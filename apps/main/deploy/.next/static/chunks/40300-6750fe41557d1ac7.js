"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40300],{40300:function(e,l,a){a.d(l,{Z:function(){return J}});var d=a(52322),i=a(89330),n=a(39812),t=a(60218),s=a(69387),r=a(2784),o=a(48601),u=a(82737),c=a(62202),v=a(65950),m=a(71987),y=a(26612),h=a(5088),x=a(21581),I=a(8661),p=a(38449),f=a(65215),C=a(7121),P=a(27423),F=a(62362),j=a(31389),Z=a(33625),D=a(80983),g=a(39704),q=a(61802),V=a(19473),k=a(98345),b=a(84100),w=a(70104),N=a(2454),R=a(69627),O=a(91406),A=a(96026),S=a(54074);function _(e){var l,a,s,u,m,y,h,C,F,g,q,k,b,w,R,_,U,T,E,Q,J,$,M,W,z;let{recordId:H,maxSeqNo:K,seqNo:Y,labels:B,maxAccess:L,readOnlyField:G,refetchTable:X,window:ee}=e,{getRequest:el,postRequest:ea}=(0,r.useContext)(v.$),{platformLabels:ed}=(0,r.useContext)(V.l),{stack:ei}=(0,A.V)(),{formik:en}=(0,D.c)({maxAccess:L,initialValues:{details:{trxId:H,sku:"",seqNo:null,itemId:null,itemName:"",siteId:null,muId:null,muQty:null,qty:null,baseQty:null,deliveryDate:new Date,status:1,onhand:null,lastPurchaseDate:null,lastPurchaseCurrencyId:null,lastPurchaseUnitPrice:null,unitCost:null,totalCost:null,justification:""}},validateOnChange:!0,validationSchema:o.Ry({details:o.Ry({itemId:o.Rx().required(),qty:o.Rx().required()})}),onSubmit:async e=>{(e=e.details).seqNo||e.recordId||(e.seqNo=K+1),await ea({extension:N.y.RequisitionDetail.set,record:JSON.stringify({...e,deliveryDate:(null==e?void 0:e.deliveryDate)?(0,n.ku)(null==e?void 0:e.deliveryDate):null,baseQty:e.muQty?e.muQty*e.qty:e.qty})}),X(H),c.ZP.success(e.trxId?ed.Edited:ed.Added),ee.close()}}),et=!!en.values.details.recordId;async function es(e){var l;if(!e){en.setFieldValue("details.onhand",0);return}let a=await el({extension:f.$.Availability.get,parameters:"_itemId=".concat(e,"&_seqNo=0")});en.setFieldValue("details.onhand",(null==a?void 0:null===(l=a.record)||void 0===l?void 0:l.onhand)||0)}async function er(e){var l,a,d,i,t,s,r,o,u;if(!e){en.setFieldValue("details.lastPurchaseUnitPrice",0),en.setFieldValue("details.lastPurchaseDate",null),en.setFieldValue("details.lastPurchaseCurrencyId",null);return}let c=await el({extension:N.y.ItemLastPurchaseInfo.last,parameters:"_itemId=".concat(e,"&_vendorId=").concat((null==en?void 0:null===(l=en.values)||void 0===l?void 0:l.vendorId)||0)});en.setFieldValue("details.lastPurchaseUnitPrice",(null==c?void 0:null===(d=c.record)||void 0===d?void 0:null===(a=d.invoiceItem)||void 0===a?void 0:a.unitPrice)||0),en.setFieldValue("details.lastPurchaseDate",(null==c?void 0:null===(t=c.record)||void 0===t?void 0:null===(i=t.invoice)||void 0===i?void 0:i.date)?(0,n.a1)(null==c?void 0:null===(r=c.record)||void 0===r?void 0:null===(s=r.invoice)||void 0===s?void 0:s.date):null),en.setFieldValue("details.lastPurchaseCurrencyId",null==c?void 0:null===(u=c.record)||void 0===u?void 0:null===(o=u.invoice)||void 0===o?void 0:o.currencyId)}async function eo(e){var l;if(!e){en.setFieldValue("details.unitCost",0);return}let a=await el({extension:f.$.CurrentCost.get,parameters:"_itemId=".concat(e)});en.setFieldValue("details.unitCost",(null==a?void 0:null===(l=a.record)||void 0===l?void 0:l.currentCost)||0)}async function eu(){var e,l,a,d,i,t,s;if(!Y)return;let r=await el({extension:N.y.RequisitionDetail.get,parameters:"_trxId=".concat(H,"&_seqNo=").concat(Y)});en.setValues({details:{...r.record,onhand:(null==r?void 0:null===(e=r.record)||void 0===e?void 0:e.onHand)||0,totalCost:((null==r?void 0:null===(l=r.record)||void 0===l?void 0:l.qty)||0)*((null==r?void 0:null===(a=r.record)||void 0===a?void 0:a.unitCost)||0),deliveryDate:(null==r?void 0:null===(d=r.record)||void 0===d?void 0:d.deliveryDate)?(0,n.a1)(null==r?void 0:null===(i=r.record)||void 0===i?void 0:i.deliveryDate):null,lastPurchaseDate:(null==r?void 0:null===(t=r.record)||void 0===t?void 0:t.lastPurchaseDate)?(0,n.a1)(null==r?void 0:null===(s=r.record)||void 0===s?void 0:s.lastPurchaseDate):null}})}return(0,r.useEffect)(()=>{eu()},[]),(0,d.jsx)(S.Z,{onSave:en.handleSubmit,maxAccess:L,editMode:!0,disabledSubmit:G,children:(0,d.jsx)(j.R,{children:(0,d.jsx)(Z.g,{children:(0,d.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(P.U,{endpointId:f.$.Item.snapshot,valueField:"reference",displayField:"name",name:"details.itemId",label:B.item,form:en,readOnly:G,displayFieldWidth:3,valueShow:"sku",secondValueShow:"itemName",maxAccess:L,required:!0,formObject:en.values.details,columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}],onChange:async(e,l)=>{if(null==l?void 0:l.isInactive){ei({message:B.inactiveItem}),en.resetForm(),en.setFieldValue("details.sku",null);return}await es(null==l?void 0:l.recordId),await er(null==l?void 0:l.recordId),await eo(null==l?void 0:l.recordId),en.setFieldValue("details.msId",(null==l?void 0:l.msId)||null),en.setFieldValue("details.muId",null),en.setFieldValue("details.totalCost",en.values.details.qty||0*en.values.details.unitCost||0),en.setFieldValue("details.itemName",(null==l?void 0:l.name)||""),en.setFieldValue("details.sku",(null==l?void 0:l.sku)||""),en.setFieldValue("details.itemId",(null==l?void 0:l.recordId)||null)},errorCheck:"details.itemId"})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{endpointId:f.$.Site.qry,name:"details.siteId",readOnly:G,label:B.site,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:en.values.details,valueField:"recordId",displayField:["reference","name"],maxAccess:L,onChange:(e,l)=>{en.setFieldValue("details.siteId",(null==l?void 0:l.recordId)||null)},error:(null==en?void 0:null===(l=en.touched.details)||void 0===l?void 0:l.siteId)&&!!(null==en?void 0:null===(a=en.errors.details)||void 0===a?void 0:a.siteId)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{endpointId:en.values.details.msId&&f.$.MeasurementUnit.qry,parameters:"_msId=".concat(en.values.details.msId),name:"details.muId",readOnly:et||G,label:B.measurement,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:en.values.details,valueField:"recordId",displayField:["reference","name"],maxAccess:L,onChange:(e,l)=>{en.setFieldValue("details.muId",(null==l?void 0:l.recordId)||""),en.setFieldValue("details.muQty",null==l?void 0:l.qty)},error:(null==en?void 0:null===(s=en.touched.details)||void 0===s?void 0:s.muId)&&!!(null==en?void 0:null===(u=en.errors.details)||void 0===u?void 0:u.muId)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(O.Z,{name:"details.qty",label:B.qty,value:en.values.details.qty,onChange:e=>{let l=Number(e.target.value.replace(/,/g,""));en.setFieldValue("details.totalCost",(l||0)*(en.values.details.unitCost||0)),en.setFieldValue("details.qty",l)},onClear:()=>en.setFieldValue("details.qty",null),readOnly:G,maxAccess:L,required:!0,error:(null==en?void 0:null===(m=en.touched.details)||void 0===m?void 0:m.qty)&&!!(null==en?void 0:null===(y=en.errors.details)||void 0===y?void 0:y.qty)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(O.Z,{name:"details.unitCost",label:B.unitCost,value:en.values.details.unitCost,onChange:en.handleChange,onClear:()=>en.setFieldValue("details.unitCost",""),readOnly:!0,maxAccess:L,error:(null==en?void 0:null===(h=en.touched.details)||void 0===h?void 0:h.unitCost)&&!!(null==en?void 0:null===(C=en.errors.details)||void 0===C?void 0:C.unitCost)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(O.Z,{name:"details.totalCost",label:B.totalCost,value:en.values.details.totalCost,onChange:en.handleChange,onClear:()=>en.setFieldValue("details.totalCost",0),readOnly:!0,maxAccess:L,error:(null==en?void 0:null===(F=en.touched.details)||void 0===F?void 0:F.totalCost)&&!!(null==en?void 0:null===(g=en.errors.details)||void 0===g?void 0:g.totalCost)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(O.Z,{name:"details.onhand",label:B.onHand,value:en.values.details.onhand,onChange:en.handleChange,onClear:()=>en.setFieldValue("details.onhand",0),readOnly:!0,maxAccess:L,error:(null==en?void 0:null===(q=en.touched.details)||void 0===q?void 0:q.onhand)&&!!(null==en?void 0:null===(k=en.errors.details)||void 0===k?void 0:k.onhand)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(P.U,{endpointId:N.y.Vendor.snapshot,valueField:"reference",displayField:"name",name:"details.vendorId",label:B.vendor,form:en,readOnly:G,displayFieldWidth:3,valueShow:"vendorRef",secondValueShow:"vendorName",maxAccess:L,formObject:en.values.details,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:async(e,l)=>{en.setFieldValue("details.vendorName",(null==l?void 0:l.name)||""),en.setFieldValue("details.vendorRef",(null==l?void 0:l.reference)||""),en.setFieldValue("details.vendorId",(null==l?void 0:l.recordId)||null)},errorCheck:"details.vendorId"})})]})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(i.Z,{name:"details.deliveryDate",label:B.deliveryDate,readOnly:G,value:null==en?void 0:null===(b=en.values)||void 0===b?void 0:b.details.deliveryDate,onChange:en.setFieldValue,maxAccess:L,onClear:()=>en.setFieldValue("details.deliveryDate",null),error:(null==en?void 0:null===(w=en.touched.details)||void 0===w?void 0:w.deliveryDate)&&!!(null==en?void 0:null===(R=en.errors.details)||void 0===R?void 0:R.deliveryDate)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(O.Z,{name:"details.lastPurchaseUnitPrice",label:B.lastPurchaseUnitPrice,value:en.values.details.lastPurchaseUnitPrice,onChange:en.handleChange,onClear:()=>en.setFieldValue("details.lastPurchaseUnitPrice",""),readOnly:!0,maxAccess:L,error:(null==en?void 0:null===(_=en.touched.details)||void 0===_?void 0:_.lastPurchaseUnitPrice)&&!!(null==en?void 0:null===(U=en.errors.details)||void 0===U?void 0:U.lastPurchaseUnitPrice)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{endpointId:p.r.Currency.qry,name:"details.lastPurchaseCurrencyId",label:B.lastPurchaseCurrency,valueField:"recordId",displayField:"name",readOnly:!0,values:en.values.details,onChange:(e,l)=>{en.setFieldValue("details.lastPurchaseCurrencyId",(null==l?void 0:l.recordId)||null)},error:(null==en?void 0:null===(T=en.touched.details)||void 0===T?void 0:T.lastPurchaseCurrencyId)&&!!(null==en?void 0:null===(E=en.errors.details)||void 0===E?void 0:E.lastPurchaseCurrencyId),maxAccess:L})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(i.Z,{name:"details.lastPurchaseDate",label:B.lastPurchaseDate,readOnly:!0,value:null==en?void 0:null===(Q=en.values)||void 0===Q?void 0:Q.details.lastPurchaseDate,onChange:en.setFieldValue,maxAccess:L,onClear:()=>en.setFieldValue("details.lastPurchaseDate",null),error:(null==en?void 0:null===(J=en.touched.details)||void 0===J?void 0:J.lastPurchaseDate)&&!!(null==en?void 0:null===($=en.errors.details)||void 0===$?void 0:$.lastPurchaseDate)})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(x.Z,{name:"details.justification",label:B.justification,value:null==en?void 0:null===(M=en.values)||void 0===M?void 0:M.details.justification,rows:2.5,readOnly:G,maxAccess:L,onChange:en.handleChange,onClear:()=>en.setFieldValue("details.justification",""),error:(null==en?void 0:null===(W=en.touched.details)||void 0===W?void 0:W.justification)&&!!(null==en?void 0:null===(z=en.errors.details)||void 0===z?void 0:z.justification)})})]})})]})})})})}var U=a(1685),T=a(21326),E=a(50023),Q=a(92407);function J(e){var l,a,A,S,J,$;let{recordId:M,window:W}=e,{getRequest:z,postRequest:H}=(0,r.useContext)(v.$),{stack:K}=(0,q.zY)(),{platformLabels:Y,userDefaultsData:B}=(0,r.useContext)(V.l),[L,G]=(0,r.useState)(1),X=parseInt(null==B?void 0:null===(a=B.list)||void 0===a?void 0:null===(l=a.find(e=>"plantId"===e.key))||void 0===l?void 0:l.value),ee=(0,U.m)("userData").userId,{labels:el,access:ea}=(0,E.Z)({datasetId:y.i.PurchaseRequisition});(0,T.Z)({title:null==el?void 0:el.purchaseRequisition,window:W});let{documentType:ed,maxAccess:ei,changeDT:en}=(0,k.H)({functionId:C.J.PurchaseRequisition,access:ea,enabled:!M}),et=(0,m.E)({endpointId:N.y.PurchaseRequisition.page}),{formik:es}=(0,D.c)({maxAccess:ei,documentType:{key:"dtId",value:null==ed?void 0:ed.dtId},initialValues:{recordId:M,dtId:null,dgId:null,reference:"",status:1,date:new Date,procurementType:null,siteId:null,deliveryDate:null,notes:"",vendorId:null,plantId:X,departmentId:null,releaseStatus:null,wip:1,totalCost:0,totalQty:0,items:{}},validateOnChange:!0,validationSchema:o.Ry({date:o.hT().required(),procurementType:o.Z_().required()}),onSubmit:async e=>{let l={...e};delete l.items;let a=await H({extension:N.y.PurchaseRequisition.set,record:JSON.stringify({...l,date:(null==l?void 0:l.date)?(0,n.ku)(null==l?void 0:l.date):null,deliveryDate:(null==l?void 0:l.deliveryDate)?(0,n.OZ)(new Date(l.deliveryDate)):null})});et(),c.ZP.success(l.recordId?Y.Edited:Y.Added),await eh(null==a?void 0:a.recordId)}}),er=!!es.values.recordId,eo=2==es.values.wip,eu=-1==es.values.status,ec=[{key:"Attachment",condition:!0,onClick:"onClickAttachment",disabled:!er},{key:"WorkFlow",condition:!0,onClick:async()=>{K({Component:g.Z,props:{functionId:C.J.PurchaseRequisition,recordId:es.values.recordId}})},disabled:!er},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!er},{key:"Close",condition:!eo,onClick:async function(){let e=await H({extension:N.y.PurchaseRequisition.close,record:JSON.stringify(es.values)});c.ZP.success(Y.Closed),et(),eh(null==e?void 0:e.recordId)},disabled:eo||!er||eu},{key:"Reopen",condition:eo,onClick:async function(){let e=await H({extension:N.y.PurchaseRequisition.reopen,record:JSON.stringify(es.values)});c.ZP.success(Y.Reopened),et(),eh(null==e?void 0:e.recordId)},disabled:!eo||eu},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!eo||eu},{key:"Cancel",condition:!0,onClick:async function(){let e=await H({extension:N.y.PurchaseRequisition.cancel,record:JSON.stringify(es.values)});c.ZP.success(Y.Cancelled),et(),eh(null==e?void 0:e.recordId)},disabled:!er||eu}],ev=[{field:"sku",headerName:el.sku,flex:1},{field:"itemName",headerName:el.name,flex:1},{field:"siteName",headerName:el.site,flex:1},{field:"muName",headerName:el.measurement,flex:1},{field:"qty",headerName:el.qty,flex:1,type:"number"},{field:"deliveryDate",headerName:el.deliveryDate,flex:1,type:"date"},{field:"vendorName",headerName:el.vendor,flex:1},{field:"unitCost",headerName:el.unitCost,flex:1,type:"number"},{field:"totalCost",headerName:el.totalCost,flex:1,type:"number"}];async function em(){let e=await z({extension:p.r.Users.get,parameters:"_recordId=".concat(ee)});return null==e?void 0:e.record}async function ey(e){if(!e)return;let l=await z({extension:Q.y.Employee.get1,parameters:"_recordId=".concat(e)});return null==l?void 0:l.record}async function eh(e){!function(e,l){var a;let d=0,i=0,t=null==l?void 0:null===(a=l.list)||void 0===a?void 0:a.map(e=>(d+=(null==e?void 0:e.unitCost)*(null==e?void 0:e.qty),i+=(null==e?void 0:e.qty)||0,(null==e?void 0:e.seqNo)>L&&G(null==e?void 0:e.seqNo),{...e,totalCost:((null==e?void 0:e.unitCost)*(null==e?void 0:e.qty)||0).toFixed(2),unitCost:((null==e?void 0:e.unitCost)||0).toFixed(2),qty:((null==e?void 0:e.qty)||0).toFixed(2)}));es.setValues({...e,date:(0,n.a1)(null==e?void 0:e.date),deliveryDate:(0,n.a1)(null==e?void 0:e.deliveryDate),totalCost:d.toFixed(2),totalQty:i.toFixed(2),items:{list:t}})}(await ex(e),await eI(e))}async function ex(e){if(!e)return;let l=await z({extension:N.y.PurchaseRequisition.get,parameters:"_recordId=".concat(e)});return null==l?void 0:l.record}async function eI(e){if(e)return await z({extension:N.y.RequisitionDetail.qry,parameters:"_trxId=".concat(e)})}let ep=e=>{K({Component:_,props:{recordId:M,labels:el,maxAccess:ei,readOnlyField:eo||eu,maxSeqNo:L,seqNo:null==e?void 0:e.seqNo,refetchTable:eh},width:800,height:450,title:el.purchaseDetails})},ef=async e=>{await H({extension:N.y.RequisitionDetail.del,record:JSON.stringify(e)}),eh(M),c.ZP.success(Y.Deleted)};return(0,r.useEffect)(()=>{!async function(){if(M)eh(M);else{let e=await em(),l=await ey(null==e?void 0:e.employeeId);es.setFieldValue("departmentId",(null==l?void 0:l.departmentId)||null)}}()},[]),(0,d.jsx)(u.Z,{resourceId:y.i.PurchaseRequisition,functionId:C.J.PurchaseRequisition,form:es,maxAccess:ei,editMode:er,actions:ec,previewReport:er,disabledSubmit:eo||eu,children:(0,d.jsxs)(j.R,{children:[(0,d.jsx)(Z.g,{children:(0,d.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{endpointId:p.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(C.J.PurchaseRequisition),filter:er?void 0:e=>1===e.activeStatus,name:"dtId",label:el.docType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:eo||eu,valueField:"recordId",displayField:["reference","name"],values:es.values,maxAccess:!er&&ei,onChange:async(e,l)=>{await en(l),es.setFieldValue("dtId",(null==l?void 0:l.recordId)||null)},error:es.touched.dtId&&!!es.errors.dtId})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(h.Z,{name:"reference",label:el.reference,value:null==es?void 0:null===(A=es.values)||void 0===A?void 0:A.reference,maxAccess:!er&&ei,readOnly:er,onChange:es.handleChange,onClear:()=>es.setFieldValue("reference",""),error:es.touched.reference&&!!es.errors.reference})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(i.Z,{name:"date",label:el.date,readOnly:eo||eu,value:null==es?void 0:null===(S=es.values)||void 0===S?void 0:S.date,onChange:es.setFieldValue,required:!0,maxAccess:ei,onClear:()=>es.setFieldValue("date",null),error:es.touched.date&&!!es.errors.date})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{datasetId:b.v.PROCUREMENT_TYPE,name:"procurementType",label:el.procurementType,readOnly:eo||eu,values:es.values,valueField:"key",displayField:"value",required:!0,maxAccess:ei,onChange:(e,l)=>{es.setFieldValue("procurementType",(null==l?void 0:l.key)||null)},error:es.touched.procurementType&&!!es.errors.procurementType})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(P.U,{endpointId:N.y.Vendor.snapshot,valueField:"reference",displayField:"name",name:"vendorId",label:el.vendor,form:es,readOnly:eo||eu,displayFieldWidth:2,valueShow:"vendorRef",secondValueShow:"vendorName",maxAccess:ei,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:async(e,l)=>{es.setFieldValue("vendorName",(null==l?void 0:l.name)||""),es.setFieldValue("vendorRef",(null==l?void 0:l.reference)||""),es.setFieldValue("vendorId",(null==l?void 0:l.recordId)||null)},errorCheck:"vendorId"})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{endpointId:w.K.DepartmentFilters.qry,parameters:"_filter=&_size=1000&_startAt=0&_type=0&_activeStatus=0&_sortBy=recordId",name:"departmentId",readOnly:eo||eu,label:el.department,values:es.values,columnsInDropDown:[{key:"departmentRef",value:"Reference"},{key:"name",value:"Name"}],displayField:["departmentRef","name"],maxAccess:ei,onChange:(e,l)=>{es.setFieldValue("departmentId",(null==l?void 0:l.recordId)||null)},error:es.touched.departmentId&&!!es.errors.departmentId})}),(0,d.jsx)(t.ZP,{item:!0,xs:2,children:(0,d.jsx)(R.Z,{onClick:ep,style:{border:"1px solid #4eb558"},color:"transparent",image:"add.png",disabled:!er||eo})})]})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{endpointId:f.$.Site.qry,name:"siteId",readOnly:eo||eu,label:el.site,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:es.values,valueField:"recordId",displayField:["reference","name"],maxAccess:ei,onChange:(e,l)=>{es.setFieldValue("siteId",(null==l?void 0:l.recordId)||null)},error:es.touched.siteId&&!!es.errors.siteId})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(i.Z,{name:"deliveryDate",label:el.deliveryDate,readOnly:eo||eu,value:null==es?void 0:null===(J=es.values)||void 0===J?void 0:J.deliveryDate,onChange:es.setFieldValue,maxAccess:ei,onClear:()=>es.setFieldValue("deliveryDate",null),error:es.touched.deliveryDate&&!!es.errors.deliveryDate})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(I.Z,{endpointId:p.r.Plant.qry,name:"plantId",label:el.plant,readOnly:eo||eu,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:es.values,valueField:"recordId",displayField:["reference","name"],maxAccess:ei,onChange:(e,l)=>{es.setFieldValue("plantId",(null==l?void 0:l.recordId)||null)},error:es.touched.plantId&&!!es.errors.plantId})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(x.Z,{name:"notes",label:el.notes,value:null==es?void 0:null===($=es.values)||void 0===$?void 0:$.notes,rows:2.5,readOnly:eo||eu,maxAccess:ei,onChange:es.handleChange,onClear:()=>es.setFieldValue("notes",""),error:es.touched.notes&&!!es.errors.notes})})]})})]})}),(0,d.jsx)(F.Q,{children:(0,d.jsx)(s.Z,{name:"itemTable",columns:ev,gridData:es.values.items,rowId:["recordId"],onEdit:ep,onDelete:eo||eu?void 0:ef,maxAccess:ei,pagination:!1})}),(0,d.jsx)(Z.g,{children:(0,d.jsxs)(t.ZP,{container:!0,justifyContent:"flex-end",spacing:2,children:[(0,d.jsx)(t.ZP,{item:!0,children:(0,d.jsx)(O.Z,{name:"totalQty",label:el.totalQty,value:es.values.totalQty,readOnly:!0})}),(0,d.jsx)(t.ZP,{item:!0,children:(0,d.jsx)(O.Z,{name:"totalCost",label:el.totalCost,value:es.values.totalCost,readOnly:!0})})]})})]})})}J.width=1100,J.height=700}}]);