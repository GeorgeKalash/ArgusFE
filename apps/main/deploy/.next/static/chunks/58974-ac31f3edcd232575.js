"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58974],{17627:function(e,r,a){a.d(r,{s:function(){return l}});let t="CTTRX.asmx/",l={CurrencyTrading:{get2:t+"get2CIV",get3:t+"get3CIV",set2:t+"set2CIV",snapshot:t+"snapshotCIV",close:t+"closeCIV",reopen:t+"reopenCIV",post:t+"postCIV"},CreditOrder:{page:t+"pageORD",qry:t+"qryORD",get:t+"getORD",del:t+"delORD",snapshot:t+"snapshotORD",set:t+"set2ORD",close:t+"closeORD",reopen:t+"reopenORD",tfr:t+"transfer2ORD"},CreditOrderItem:{qry:t+"qryORI"},UndeliveredCreditOrder:{page:t+"pageORD2",qry:t+"qryORD2",snapshot:t+"snapshotORD2"},CreditInvoice:{page:t+"pageIVC",qry:t+"qryIVC",get:t+"getIVC",del:t+"delIVC",snapshot:t+"snapshotIVC",set:t+"set2IVC",close:t+"closeIVC",post:t+"postIVC",cancel:t+"cancelIVC"},CreditInvoiceItem:{qry:t+"qryIVI"},CashCount:{qry:t+"qryTRX"}}},67920:function(e,r,a){a.d(r,{m:function(){return l}});var t=a(48601);function l(e,r,a){var l;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"items",o={...e};return null==a||null===(l=a.record)||void 0===l||l.controls.forEach(e=>{let{controlId:r,accessLevel:a}=e,[t,l]=null==r?void 0:r.split(".");t!==n||2!==a||l in o||(o[l]=e=>(null==e?void 0:e[l])!=null),(1===a||4===a)&&l in o&&delete o[l]}),{schema:t.Ry().shape({...Object.keys(o).reduce((e,a)=>(e[a]=t.nK().nullable().test(function(e){var t;let l=this.parent,[,n]=this.path.match(/^(\w+)\[(\d+)\]/)||[],d=(null===(t=this.options.context)||void 0===t?void 0:t[n])||[];if(r||!r&&d.length>1){if(null!==l[a]&&void 0!==l[a]&&0!==l[a]&&""!==o[a]&&!o[a](l))return!1;if(!Object.entries(o).some(e=>{let[,r]=e;return!!r(l)}))return!0}return!!o[a](l)&&void 0!==e}),e),{})}),requiredFields:o}}},58974:function(e,r,a){var t=a(52322),l=a(89330),n=a(39812),o=a(60218),d=a(95453),i=a(37691),s=a(6640),c=a(2784),u=a(96026),v=a(48601),p=a(82737),y=a(62202),m=a(65950),h=a(71987),x=a(26612),I=a(5088),C=a(21581),f=a(8661),g=a(38449),F=a(7121),R=a(53621),Z=a(17627),w=a(24074),b=a(2119),V=a(27423),j=a(61802),q=a(39704),P=a(76399),N=a(91088),_=a(31389),O=a(62362),A=a(33625),k=a(96333),T=a(98345),S=a(80983),D=a(19473),M=a(50023),W=a(21326),J=a(1685),E=a(67920),L=a(91406);let G=e=>{var r,a,G,U,Y,X,B,Q,$,z,H,K,ee,er,ea,et;let{recordId:el,window:en}=e,{stack:eo}=(0,j.zY)(),{stack:ed}=(0,u.V)(),{platformLabels:ei,userDefaultsData:es}=(0,c.useContext)(D.l),[ec,eu]=(0,c.useState)(null),[ev,ep]=(0,c.useState)(F.J.CreditInvoicePurchase),{getRequest:ey,postRequest:em}=(0,c.useContext)(m.$),eh=(0,J.m)("userData").userId,ex=parseInt(null==es?void 0:null===(a=es.list)||void 0===a?void 0:null===(r=a.find(e=>{let{key:r}=e;return"plantId"===r}))||void 0===r?void 0:r.value),eI=parseInt(null==es?void 0:null===(U=es.list)||void 0===U?void 0:null===(G=U.find(e=>{let{key:r}=e;return"cashAccountId"===r}))||void 0===G?void 0:G.value),{labels:eC,access:ef}=(0,M.Z)({datasetId:x.i.CreditInvoice,editMode:!!el}),eg=(0,h.E)({endpointId:Z.s.CreditInvoice.page}),{maxAccess:eF}=(0,T.H)({functionId:ev,access:ef,enabled:!el,hasDT:!1});(0,W.Z)({title:eC.creditInvoice,window:en});let{schema:eR,requiredFields:eZ}=(0,E.m)({currencyRef:e=>null==e?void 0:e.currencyRef,currencyName:e=>null==e?void 0:e.currencyName,qty:e=>null==e?void 0:e.qty,exRate:e=>null==e?void 0:e.exRate,amount:e=>null==e?void 0:e.amount},!0,eF,"rows"),{formik:ew}=(0,S.c)({initialValues:{recordId:el,date:new Date,dtId:null,functionId:F.J.CreditInvoicePurchase,reference:"",plantId:ex,corId:"",corRef:"",corName:"",wip:1,status:1,releaseStatus:"",notes:"",amount:0,baseAmount:0,exRate:"",minRate:"",maxRate:"",rateCalcMethod:"",cashAccountId:eI,cashAccountName:"",cashAccountRef:"",rateType:"",rows:[{id:1,invoiceId:el||null,seqNo:"",currencyId:null,qty:"",rateCalcMethod:"",exRate:"",defaultRate:"",minRate:"",maxRate:"",amount:"",baseAmount:"",notes:"",goc:!1}]},maxAccess:eF,validateOnChange:!0,validationSchema:v.Ry({date:v.Z_().required(),plantId:v.Z_().required(),corId:v.Z_().required(),cashAccountId:v.Z_().required(),rows:v.IX().of(eR)}),onSubmit:async e=>{var r;let a={...e,date:(0,n.ku)(e.date),amount:eP,baseAmount:eN};delete a.rows;let t=null===(r=ew.values.rows.filter(e=>{var r;return null===(r=Object.values(eZ))||void 0===r?void 0:r.every(r=>r(e))}))||void 0===r?void 0:r.map((e,r)=>({...e,seqNo:r+1,invoiceId:ew.values.recordId||0})),l=await em({extension:Z.s.CreditInvoice.set,record:JSON.stringify({header:a,items:t})});y.ZP.success(e.recordId?ei.Edited:ei.Added),await eO(l.recordId),eg()}}),eb=3===ew.values.status,eV=-1==ew.values.status,ej=1!=ew.values.status,eq=!!ew.values.recordId,eP=(null==ew?void 0:null===(X=ew.values)||void 0===X?void 0:null===(Y=X.rows)||void 0===Y?void 0:Y.length)?null==ew?void 0:null===(Q=ew.values)||void 0===Q?void 0:null===(B=Q.rows)||void 0===B?void 0:B.reduce((e,r)=>{var a;return e+(parseFloat(null==r?void 0:null===(a=r.amount)||void 0===a?void 0:a.toString().replace(/,/g,""))||0)},0):0,eN=(null==ew?void 0:null===(z=ew.values)||void 0===z?void 0:null===($=z.rows)||void 0===$?void 0:$.length)?null==ew?void 0:null===(H=ew.values)||void 0===H?void 0:H.rows.reduce((e,r)=>{var a;return e+(parseFloat(null==r?void 0:null===(a=r.baseAmount)||void 0===a?void 0:a.toString().replace(/,/g,""))||0)},0):0;async function e_(e){return await ey({extension:Z.s.CreditInvoice.get,parameters:"_recordId=".concat(e)})}async function eO(e){var r;let a=await e_(e),t=await eD(e);ew.setValues(e=>({...e,...a.record,date:(0,n.a1)(a.record.date),rows:t})),await eM(null==a?void 0:null===(r=a.record)||void 0===r?void 0:r.functionId)}let eA=async(e,r,a)=>{var t,l,n,o;if(!e)return;let d=await ey({extension:R.d.Correspondent.get,parameters:"_recordId=".concat(e)});ew.setFieldValue("currencyId",(null==d?void 0:null===(t=d.record)||void 0===t?void 0:t.currencyId)||null),ew.setFieldValue("currencyRef",(null==d?void 0:null===(l=d.record)||void 0===l?void 0:l.currencyRef)||"");let i=await ey({extension:w.u.Defaults.get,parameters:"_key=ct_credit_eval_ratetype_id"});await eT(a,null==d?void 0:null===(n=d.record)||void 0===n?void 0:n.currencyId,r,null==i?void 0:null===(o=i.record)||void 0===o?void 0:o.value)},ek=async e=>{var r;if(!e)return;let a=await ey({extension:g.r.UserFunction.get,parameters:"_userId=".concat(eh,"&_functionId=").concat(e)});ew.setFieldValue("dtId",(null==a?void 0:null===(r=a.record)||void 0===r?void 0:r.dtId)||null)};async function eT(e,r,a,t){var l,n,o,d,i;if(!e||!r||!t||!a){e||ed({message:eC.emptyPlant}),r||(ew.setFieldValue("corId",null),ew.setFieldValue("corRef",""),ew.setFieldValue("corName",""),ed({message:eC.emptyToCurrency})),t||ed({message:eC.emptyRate}),a||ed({message:eC.emptyFromCurrency});return}let s=await ey({extension:w.u.ExchangeMap.get,parameters:"_plantId=".concat(e,"&_currencyId=").concat(r,"&_raCurrencyId=").concat(a,"&_rateTypeId=").concat(t)});if(!(null==s?void 0:null===(l=s.record)||void 0===l?void 0:l.rate)){ed({message:eC.undefinedCorRate});return}ew.setFieldValue("currencyId",r),ew.setFieldValue("exRate",null==s?void 0:null===(n=s.record)||void 0===n?void 0:n.rate),ew.setFieldValue("rateCalcMethod",null==s?void 0:null===(o=s.record)||void 0===o?void 0:o.rateCalcMethod),ew.setFieldValue("minRate",null==s?void 0:null===(d=s.record)||void 0===d?void 0:d.minRate),ew.setFieldValue("maxRate",null==s?void 0:null===(i=s.record)||void 0===i?void 0:i.maxRate)}async function eS(e){for(let r in e)if(!e[r]){ed({message:"".concat(r," ").concat(eC.empty)});return}let r=await ey({extension:w.u.ExchangeMap.get,parameters:"_plantId=".concat(e.plantId,"&_currencyId=").concat(e.fromCurrency,"&_raCurrencyId=").concat(e.toCurrency,"&_rateTypeId=").concat(e.rateType)});return null==r?void 0:r.record}let eD=async e=>{var r;let a=await ey({extension:Z.s.CreditInvoiceItem.qry,parameters:"_invoiceId=".concat(e)});return(null==a?void 0:null===(r=a.list)||void 0===r?void 0:r.length)>0?a.list.map((e,r)=>({...e,id:r+1,qty:parseFloat(null==e?void 0:e.qty).toFixed(2),amount:parseFloat(null==e?void 0:e.amount).toFixed(2),baseAmount:parseFloat(null==e?void 0:e.baseAmount).toFixed(2),exRate:parseFloat(null==e?void 0:e.exRate).toFixed(7),defaultRate:parseFloat(null==e?void 0:e.defaultRate).toFixed(7)})):ew.initialValues.rows};async function eM(e){if(e==F.J.CreditInvoicePurchase||e==F.J.CreditInvoiceSales){var r;let a=await ey({extension:g.r.Defaults.get,parameters:e==F.J.CreditInvoicePurchase?"_key=ct_credit_purchase_ratetype_id":e==F.J.CreditInvoiceSales?"_key=ct_credit_sales_ratetype_id":""});ew.setFieldValue("rateType",null==a?void 0:null===(r=a.record)||void 0===r?void 0:r.value),ew.setFieldValue("functionId",e)}}async function eW(){var e,r;let a=await ey({extension:g.r.Defaults.get,parameters:"_key=baseCurrencyId"});return await eJ(null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.value),null==a?void 0:null===(r=a.record)||void 0===r?void 0:r.value}let eJ=async e=>{var r;let a=await ey({extension:g.r.Currency.get,parameters:"_recordId=".concat(e)});eu((null==a?void 0:null===(r=a.record)||void 0===r?void 0:r.reference)||"")};async function eE(){var e,r;let a=await ey({extension:b.G.CbBankAccounts.get,parameters:"_recordId=".concat(eI)});ew.setFieldValue("cashAccountRef",(null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.reference)||""),ew.setFieldValue("cashAccountName",(null==a?void 0:null===(r=a.record)||void 0===r?void 0:r.name)||"")}let eL=async()=>{let e=await em({extension:Z.s.CreditInvoice.post,record:JSON.stringify(ew.values)});y.ZP.success(ei.Posted),eg(),eO(null==e?void 0:e.recordId)},eG=async()=>{let e=await em({extension:Z.s.CreditInvoice.cancel,record:JSON.stringify(ew.values)});y.ZP.success(ei.Cancelled),eg(),eO(null==e?void 0:e.recordId)},eU=async()=>{eo({Component:q.Z,props:{functionId:ew.values.functionId,recordId:ew.values.recordId}})},eY=[{key:"GL",condition:!0,onClick:"onClickGL",datasetId:x.i.GLCreditInvoice,disabled:!eq},{key:"Locked",condition:!0,onClick:eL,disabled:!eq||3===ew.values.status||4===ew.values.status||eV},{key:"Cancel",condition:!0,onClick:eG,disabled:!eq||eb||eV},{key:"WorkFlow",condition:!0,onClick:eU,disabled:!eq},{key:"Shipment",condition:!0,onClick:()=>{eo({Component:N.u,props:{recordId:ew.values.recordId,functionId:ew.values.functionId,editMode:1!=ew.values.status,totalBaseAmount:eN}})},disabled:!eq},{key:"Transportation",condition:!0,onClick:()=>{eo({Component:k.R,props:{recordId:ew.values.recordId,functionId:ew.values.functionId,editMode:1!=ew.values.status}})},disabled:!eq}],eX=[{component:"resourcecombobox",label:eC.currency,name:"currencyRef",props:{endpointId:g.r.Currency.qry,displayField:"reference",valueField:"recordId",mapping:[{from:"recordId",to:"currencyId"},{from:"reference",to:"currencyRef"},{from:"name",to:"currencyName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:3},flex:2,async onChange(e){var r,a,t;let{row:{update:l,oldRow:n,newRow:o}}=e;if(!(null==o?void 0:o.currencyId))return;let d=await eS({plantId:ex||ew.values.plantId,toCurrency:null==ew?void 0:null===(r=ew.values)||void 0===r?void 0:r.currencyId,fromCurrency:null==o?void 0:o.currencyId,rateType:null==ew?void 0:null===(a=ew.values)||void 0===a?void 0:a.rateType});if(!(null==d?void 0:d.rate)){l({exRate:0,defaultRate:0,amount:0,baseAmount:0}),ed({message:"".concat(eC.undefinedRate," ").concat(null==o?void 0:o.currencyRef)});return}let i=0,s=0;if(null==o?void 0:o.qty){let e=parseFloat(null==o?void 0:null===(t=o.qty)||void 0===t?void 0:t.toString().replace(/,/g,""))||0,r=1===d.rateCalcMethod?e*d.rate:2===d.rateCalcMethod?e/d.rate:0;i=parseFloat(r).toFixed(2),s=parseFloat(1===ew.values.rateCalcMethod?r*ew.values.exRate:2===ew.values.rateCalcMethod?r/ew.values.exRate:0).toFixed(2)}let c=await eB(null==o?void 0:o.currencyId);l({currencyId:d.currencyId,currencyName:d.currencyName,exRate:d.rate.toFixed(7),defaultRate:d.rate.toFixed(7),rateCalcMethod:d.rateCalcMethod,minRate:d.minRate,maxRate:d.maxRate,goc:(null==c?void 0:c.goc)||!1,amount:i,baseAmount:s})}},{component:"textfield",label:eC.name,name:"currencyName",readOnly:!0,props:{readOnly:!0},flex:3},{component:"numberfield",label:eC.quantity,name:"qty",props:{readOnly:ej,disabled:!ew.values.corId},flex:2,updateOn:"blur",async onChange(e){var r,a;let{row:{update:t,newRow:l}}=e,n=l.rateCalcMethod,o=1===n?parseFloat(null==l?void 0:null===(r=l.qty)||void 0===r?void 0:r.toString().replace(/,/g,""))*(null==l?void 0:l.exRate):2===n?parseFloat(null==l?void 0:null===(a=l.qty)||void 0===a?void 0:a.toString().replace(/,/g,""))/(null==l?void 0:l.exRate):0,d=1===ew.values.rateCalcMethod?parseFloat(o)*ew.values.exRate:2===n?parseFloat(o)/ew.values.exRate:0;t({amount:parseFloat(o).toFixed(2),baseAmount:parseFloat(d).toFixed(2),qty:parseFloat(null==l?void 0:l.qty).toFixed(2)})}},{component:"numberfield",label:eC.defaultRate,name:"defaultRate",props:{readOnly:!0,disabled:!ew.values.corId},flex:2},{component:"numberfield",label:eC.exRate,name:"exRate",props:{readOnly:ej,decimalScale:7},updateOn:"blur",flex:2,async onChange(e){let{row:{update:r,newRow:a}}=e;if(!a.currencyId||!a.exRate){r({exRate:"",defaultRate:"",amount:0,baseAmount:0});return}let t=e=>parseFloat(null==e?void 0:e.toString().replace(/,/g,""))||0,l=t(a.exRate);if(l>0){let e=t(a.minRate),n=t(a.maxRate);if(l>=e&&l<=n){let e=t(a.qty),n=a.rateCalcMethod,o=1===n?e*l:2===n?e/l:0,d=1===ew.values.rateCalcMethod?o*ew.values.exRate:2===ew.values.rateCalcMethod?o/ew.values.exRate:0;r({exRate:l.toFixed(7),amount:o.toFixed(2),baseAmount:d.toFixed(2)})}else ed({message:"".concat(l," ").concat(eC.invalidRange," [").concat(e,"-").concat(n,"]")}),r({exRate:"",amount:0,baseAmount:0})}}},{component:"numberfield",label:"".concat(eC.total," ").concat(ew.values.currencyRef||null),name:"amount",props:{readOnly:!0},flex:2}];async function eB(e){if(!e)return;let r=await ey({extension:R.d.CorrespondentCurrency.get,parameters:"_corId=".concat(ew.values.corId,"&_currencyId=").concat(e)});return null==r?void 0:r.record}return(0,c.useEffect)(()=>{!async function(){el?(await eO(el),await eW()):(await eM(F.J.CreditInvoicePurchase),await ek(F.J.CreditInvoicePurchase),parseInt(eI)&&await eE())}()},[]),(0,t.jsx)(p.Z,{actions:eY,resourceId:x.i.CreditInvoice,form:ew,editMode:eq,maxAccess:eF,previewReport:eq,functionId:ew.values.functionId,disabledSubmit:ej,children:(0,t.jsxs)(_.R,{children:[(0,t.jsx)(A.g,{children:(0,t.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(o.ZP,{item:!0,xs:12,children:(0,t.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(o.ZP,{item:!0,xs:4,children:(0,t.jsx)(l.Z,{name:"date",required:!0,label:eC.date,readOnly:ej,value:null==ew?void 0:null===(K=ew.values)||void 0===K?void 0:K.date,onChange:ew.setFieldValue,maxAccess:eF,onClear:()=>ew.setFieldValue("date",null),error:ew.touched.date&&!!ew.errors.date})}),(0,t.jsx)(o.ZP,{item:!0,xs:4,children:(0,t.jsx)(f.Z,{endpointId:g.r.Plant.qry,name:"plantId",label:eC.plant,readOnly:!0,values:ew.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,maxAccess:eF,onChange:(e,r)=>{ew.setFieldValue("plantId",(null==r?void 0:r.recordId)||null)},error:ew.touched.plantId&&!!ew.errors.plantId})}),(0,t.jsx)(o.ZP,{item:!0,xs:4,children:(0,t.jsx)(I.Z,{name:"reference",label:eC.reference,value:null==ew?void 0:null===(ee=ew.values)||void 0===ee?void 0:ee.reference,maxAccess:eF,maxLength:"30",onChange:ew.handleChange,onClear:()=>ew.setFieldValue("reference",""),readOnly:eq,error:ew.touched.reference&&!!ew.errors.reference})})]})}),(0,t.jsx)(o.ZP,{item:!0,xs:12,children:(0,t.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(o.ZP,{item:!0,xs:8,children:(0,t.jsx)(V.U,{endpointId:R.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",label:eC.correspondent,form:ew,firstFieldWidth:4,required:!0,displayFieldWidth:3,valueShow:"corRef",secondValueShow:"corName",readOnly:null===(er=ew.values.rows)||void 0===er?void 0:er.some(e=>!!e.currencyId),onChange:async(e,r)=>{if(r){let e=await eW();eA(null==r?void 0:r.recordId,e,ew.values.plantId)}ew.setFieldValue("corName",(null==r?void 0:r.name)||""),ew.setFieldValue("corRef",(null==r?void 0:r.reference)||""),ew.setFieldValue("corId",(null==r?void 0:r.recordId)||null)},errorCheck:"corId"})}),(0,t.jsx)(o.ZP,{item:!0,xs:8,children:(0,t.jsx)(V.U,{endpointId:b.G.CashAccount.snapshot,parameters:{_type:0},firstFieldWidth:4,valueField:"accountNo",displayField:"name",name:"cashAccountId",required:!0,label:eC.cashAccount,form:ew,readOnly:ej,valueShow:"cashAccountRef",displayFieldWidth:3,secondValueShow:"cashAccountName",onChange:(e,r)=>{ew.setFieldValue("cashAccountRef",(null==r?void 0:r.accountNo)||""),ew.setFieldValue("cashAccountName",(null==r?void 0:r.name)||""),ew.setFieldValue("cashAccountId",(null==r?void 0:r.recordId)||null)},errorCheck:"cashAccountId"})}),(0,t.jsx)(o.ZP,{item:!0,xs:8,children:(0,t.jsxs)(d.Z,{row:!0,value:ew.values.functionId,defaultValue:F.J.CreditInvoicePurchase,onChange:async e=>{await eM(e.target.value),await ek(e.target.value),ep(e.target.value),ew.setFieldValue("reference","")},children:[(0,t.jsx)(i.Z,{value:F.J.CreditInvoicePurchase,control:(0,t.jsx)(s.Z,{}),label:eC.purchase,disabled:null===(ea=ew.values.rows)||void 0===ea?void 0:ea.some(e=>!!e.currencyId)}),(0,t.jsx)(i.Z,{value:F.J.CreditInvoiceSales,control:(0,t.jsx)(s.Z,{}),label:eC.sale,disabled:null===(et=ew.values.rows)||void 0===et?void 0:et.some(e=>!!e.currencyId)})]})})]})})]})}),(0,t.jsx)(O.Q,{children:(0,t.jsx)(P._,{onChange:e=>ew.setFieldValue("rows",e),disabled:!ew.values.corId||eV||eb,value:ew.values.rows,error:ew.errors.rows,allowAddNewLine:!ej,allowDelete:!ej,maxAccess:ef,columns:eX,bg:ew.values.functionId&&(ew.values.functionId!=F.J.CreditInvoicePurchase?"#C7F6C7":"rgb(245, 194, 193)")})}),(0,t.jsx)(A.g,{children:(0,t.jsxs)(o.ZP,{container:!0,rowGap:1,xs:12,children:[(0,t.jsx)(o.ZP,{container:!0,rowGap:1,xs:8,style:{marginTop:"10px"},children:(0,t.jsx)(C.Z,{name:"notes",label:eC.notes,value:ew.values.notes,rows:3,readOnly:ej,maxAccess:eF,onChange:ew.handleChange,onClear:()=>ew.setFieldValue("notes",""),error:ew.touched.notes&&!!ew.errors.notes})}),(0,t.jsxs)(o.ZP,{container:!0,rowGap:1,xs:4,sx:{px:2},style:{marginTop:"10px"},children:[(0,t.jsx)(o.ZP,{item:!0,xs:12,children:(0,t.jsx)(L.Z,{name:"totalCUR",label:"".concat(eC.total," ").concat(ew.values.currencyRef||""),value:eP,readOnly:!0,align:"right"})}),(0,t.jsx)(o.ZP,{item:!0,xs:12,children:(0,t.jsx)(L.Z,{name:"baseAmount",label:"".concat(eC.total," ").concat(ec||""),value:eN,readOnly:!0,align:"right"})})]})]})})]})})};G.width=1e3,G.height=650,r.Z=G},96333:function(e,r,a){a.d(r,{R:function(){return R}});var t=a(52322),l=a(31389),n=a(62362),o=a(26612),d=a(60218),i=a(5088),s=a(8661),c=a(80983),u=a(51264),v=a(48601),p=a(71987),y=a(2784),m=a(65950),h=a(84100),x=a(62202),I=a(91406),C=a(38449),f=a(19473),g=a(21326),F=a(54074);let R=e=>{let{recordId:r,functionId:a,editMode:R,window:Z}=e,{postRequest:w,getRequest:b}=(0,y.useContext)(m.$),{platformLabels:V}=(0,y.useContext)(f.l);(0,g.Z)({title:V.Shipment,window:Z});let{formik:j}=(0,c.c)({initialValues:{recordId:r,functionId:a,transporter:"",type:"",deliveryType:"",departurePort:"",arrivalPort:"",customsNo:"",doNo:"",grossWgt:"",netWgt:"",policyNo:"",tripNo:"",arrivalCountryId:""},validateOnChange:!0,validationSchema:v.Ry({transporter:v.Z_().required(),type:v.Z_().required(),deliveryType:v.Z_().required(),departurePort:v.Z_().required(),arrivalPort:v.Z_().required(),customsNo:v.Z_().required(),policyNo:v.Z_().required(),tripNo:v.Z_().required(),arrivalCountryId:v.Z_().required(),doNo:v.Z_().required(),grossWgt:v.Z_().required(),netWgt:v.Z_().required()}),onSubmit:async e=>{await w({extension:u.p.Transportation.set,record:JSON.stringify(e)}),x.ZP.success("Record Updated Successfully")}}),{labels:q,maxAccess:P}=(0,p.J)({datasetId:o.i.LOTransportation});return(0,y.useEffect)(()=>{!async function(){if(r&&a){let e=await b({extension:u.p.Transportation.get,parameters:"_recordId=".concat(r,"&_functionId=").concat(a)});e.record&&j.setValues(e.record)}}()},[]),(0,t.jsx)(F.Z,{onSave:j.handleSubmit,maxAccess:P,editMode:!0,children:(0,t.jsx)(l.R,{children:(0,t.jsx)(n.Q,{children:(0,t.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{datasetId:h.v.DELIVERY_TYPE,name:"deliveryType",label:q.deliveryType,values:j.values,valueField:"key",displayField:"value",required:!0,readOnly:R,maxAccess:P,onChange:(e,r)=>{j&&j.setFieldValue("deliveryType",r?r.key:"")},error:j.touched.deliveryType&&!!j.errors.deliveryType})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(i.Z,{name:"tripNo",label:q.tripNo,value:j.values.tripNo,onChange:j.handleChange,onClear:()=>j.setFieldValue("tripNo",""),maxAccess:P,type:"numeric",maxLength:"20",required:!0,readOnly:R,error:j.touched.tripNo&&!!j.errors.tripNo})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{datasetId:h.v.TRANSPORTER,name:"transporter",label:q.transportationType,values:j.values,valueField:"key",displayField:"value",required:!0,readOnly:R,maxAccess:P,onChange:(e,r)=>{j&&j.setFieldValue("transporter",r?r.key:"")},error:j.touched.transporter&&!!j.errors.transporter})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(i.Z,{name:"doNo",label:q.doNo,value:j.values.doNo,onChange:j.handleChange,onClear:()=>j.setFieldValue("doNo",""),maxAccess:P,maxLength:"20",type:"numeric",required:!0,readOnly:R,error:j.touched.doNo&&!!j.errors.doNo})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{datasetId:h.v.LO_TYPE,name:"type",label:q.type,values:j.values,valueField:"key",displayField:"value",readOnly:R,required:!0,maxAccess:P,onChange:(e,r)=>{j&&j.setFieldValue("type",r?r.key:"")},error:j.touched.type&&!!j.errors.type})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(i.Z,{name:"customsNo",label:q.customsNo,value:j.values.customsNo,onChange:j.handleChange,onClear:()=>j.setFieldValue("customsNo",""),maxAccess:P,maxLength:"20",type:"numeric",required:!0,readOnly:R,error:j.touched.customsNo&&!!j.errors.customsNo})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{datasetId:h.v.PORT,name:"departurePort",label:q.departurePort,values:j.values,valueField:"key",displayField:"value",required:!0,maxAccess:P,readOnly:R,onChange:(e,r)=>{j&&j.setFieldValue("departurePort",r?r.key:"")},error:j.touched.departurePort&&!!j.errors.departurePort})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(I.Z,{name:"grossWgt",label:q.netGross,value:j.values.grossWgt,onChange:j.handleChange,onClear:()=>j.setFieldValue("grossWgt",""),readOnly:R,required:!0,error:j.touched.grossWgt&&!!j.errors.grossWgt})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{datasetId:h.v.PORT,name:"arrivalPort",label:q.arrivalPort,values:j.values,valueField:"key",displayField:"value",required:!0,readOnly:R,maxAccess:P,onChange:(e,r)=>{j&&j.setFieldValue("arrivalPort",r?r.key:"")},error:j.touched.arrivalPort&&!!j.errors.arrivalPort})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(I.Z,{name:"netWgt",label:q.netWgt,value:j.values.netWgt,onChange:j.handleChange,onClear:()=>j.setFieldValue("netWgt",""),readOnly:R,required:!0,error:j.touched.netWgt&&!!j.errors.netWgt})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(i.Z,{name:"policyNo",label:q.policyNo,value:j.values.policyNo,onChange:j.handleChange,onClear:()=>j.setFieldValue("policyNo",""),maxAccess:P,maxLength:"20",type:"numeric",required:!0,readOnly:R,error:j.touched.policyNo&&!!j.errors.policyNo})}),(0,t.jsx)(d.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{endpointId:C.r.Country.qry,name:"arrivalCountryId",label:q.arrivalCountry,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,valueField:"recordId",displayField:["reference","name"],required:!0,readOnly:R,maxAccess:P,onChange:(e,r)=>{j.setFieldValue("arrivalCountryId",r?r.recordId:"")},error:j.touched.arrivalCountryId&&!!j.errors.arrivalCountryId})})]})})})})};R.width=700,R.height=430}}]);