(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27122],{75778:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/correspondent-agent-branches",function(){return s(6162)}])},6162:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var r=s(52322),a=s(2784),n=s(27723),d=s(69387),o=s(26612),l=s(65950),i=s(53621),c=s(29326),u=s(60218),g=s(82737),C=s(5088),p=s(8661),h=s(80983),y=s(71987),I=s(48601),v=s(62202),b=s(31389),m=s(62362),f=s(19473);function x(e){var t;let{_labels:s,maxAccess:n,store:d,setStore:c,editMode:x}=e,{getRequest:q,postRequest:P}=(0,a.useContext)(l.$),{recordId:_,address:A}=d,{platformLabels:S}=(0,a.useContext)(f.l),R=(0,y.E)({endpointId:i.d.CorrespondentAgentBranches.page}),{formik:T}=(0,h.c)({maxAccess:n,initialValues:{recordId:_||null,agentId:"",swiftCode:"",addressId:"",address:""},validateOnChange:!0,validationSchema:I.Ry({agentId:I.Z_().required(),swiftCode:I.Z_().required()}),onSubmit:async e=>{let t=(null==A?void 0:A.recordId)||null;t&&(e={...e,addressId:t});let s=await P({extension:i.d.CorrespondentAgentBranches.set,record:JSON.stringify(e)});x?v.ZP.success(S.Edited):v.ZP.success(S.Added),c(t=>({...t,agentBranch:e,recordId:s.recordId})),T.setFieldValue("recordId",s.recordId),R()}});return(0,a.useEffect)(()=>{!async function(){if(_){let e=await q({extension:i.d.CorrespondentAgentBranches.get,parameters:"_recordId=".concat(_)});T.setValues(e.record),c(t=>({...t,agentBranch:e.record}))}}()},[]),(0,r.jsx)(g.Z,{form:T,resourceId:o.i.CorrespondentAgentBranch,maxAccess:n,editMode:x,children:(0,r.jsx)(b.R,{children:(0,r.jsx)(m.Q,{children:(0,r.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(p.Z,{name:"agentId",endpointId:i.d.CorrespondentAgents.qry,label:null==s?void 0:s.agent,valueField:"recordId",displayField:"name",required:!0,values:T.values,onChange:(e,t)=>{T.setFieldValue("agentId",null==t?void 0:t.recordId)},error:T.touched.agentId&&!!T.errors.agentId,maxAccess:n})}),(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(C.Z,{name:"swiftCode",label:null==s?void 0:s.swiftCode,value:null===(t=T.values)||void 0===t?void 0:t.swiftCode,required:!0,maxLength:"20",onChange:T.handleChange,onClear:()=>T.setFieldValue("swiftCode",""),error:T.touched.swiftCode&&!!T.errors.swiftCode,maxAccess:n})})]})})})})}var q=s(9522),P=s(38449),_=s(93894),A=e=>{var t;let{labels:s,maxAccess:n,recordId:d,height:u}=e,[g,C]=(0,a.useState)({recordId:d||null,agentBranch:null,address:null,addressId:null}),p=!!g.recordId,[h,y]=(0,a.useState)(0),{getRequest:I,postRequest:b}=(0,a.useContext)(l.$),{platformLabels:m}=(0,a.useContext)(f.l),A=[{label:s.agentBranch},{label:s.address,disabled:!p}];return(0,a.useEffect)(()=>{var e;let t=null===(e=g.agentBranch)||void 0===e?void 0:e.addressId;t&&I({extension:P.r.Address.get,parameters:"_filter=&_recordId=".concat(t)}).then(e=>{C(t=>({...t,address:e.record}))})},[null===(t=g.agentBranch)||void 0===t?void 0:t.addressId]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.Y,{tabs:A,activeTab:h,setActiveTab:y,maxAccess:n}),(0,r.jsx)(c.Z,{height:u,index:0,value:h,maxAccess:n,children:(0,r.jsx)(x,{_labels:s,maxAccess:n,store:g,setStore:C,editMode:p})}),(0,r.jsx)(c.Z,{height:u,index:1,value:h,maxAccess:n,children:(0,r.jsx)(_.O,{editMode:p,datasetId:o.i.ADDCorrespondentAgentBranch,address:g.address,setAddress:e=>C(t=>({...t,address:e,addressId:null==e?void 0:e.addressId})),allowPost:!0,onSubmit:function(e){var t;let s={...e,recordId:null===(t=g.agentBranch)||void 0===t?void 0:t.addressId};b({extension:P.r.Address.set,record:JSON.stringify(s)}).then(t=>{var s,r;let a=t.recordId;if(C(t=>({...t,address:{...e,addressId:a},addressId:a})),null===(s=g.agentBranch)||void 0===s?void 0:s.addressId)v.ZP.success(m.Edited);else{let e={...g.agentBranch,addressId:a,recordId:g.recordId,agentId:null===(r=g.agentBranch)||void 0===r?void 0:r.agentId};b({extension:i.d.CorrespondentAgentBranches.set,record:JSON.stringify(e)}).then(()=>{v.ZP.success(m.Edited)})}})},isCleared:!1})})]})},S=s(61802),R=s(33625),T=()=>{let{getRequest:e,postRequest:t}=(0,a.useContext)(l.$),{platformLabels:s}=(0,a.useContext)(f.l),{stack:c}=(0,S.zY)();async function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:s=0,_pageSize:r=50}=t;return{...await e({extension:i.d.CorrespondentAgentBranches.page,parameters:"_startAt=".concat(s,"&_pageSize=").concat(r,"&filter=&_dgId=0")}),_startAt:s}}let{query:{data:g},refetch:C,labels:p,paginationParameters:h,access:I}=(0,y.J)({queryFn:u,endpointId:i.d.CorrespondentAgentBranches.page,datasetId:o.i.CorrespondentAgentBranch}),x=[{field:"agentName",headerName:p.name,flex:1,editable:!1},{field:"swiftCode",headerName:p.swiftCode,flex:1,editable:!1}],q=async e=>{await t({extension:i.d.CorrespondentAgentBranches.del,record:JSON.stringify(e)}),P(),v.ZP.success(s.Deleted)},P=(0,y.E)({endpointId:i.d.CorrespondentAgentBranches.page});function _(e){c({Component:A,props:{labels:p,recordId:e||null,maxAccess:I},width:700,height:500,title:p.agentBranch})}return(0,r.jsxs)(b.R,{children:[(0,r.jsx)(R.g,{children:(0,r.jsx)(n.Z,{onAdd:()=>{_()},maxAccess:I,labels:p})}),(0,r.jsx)(m.Q,{children:(0,r.jsx)(d.Z,{columns:x,gridData:g,rowId:["recordId"],onEdit:e=>{_(e.recordId)},onDelete:q,refetch:C,paginationType:"api",paginationParameters:h,isLoading:!1,pageSize:50,maxAccess:I})})]})}},53621:function(e,t,s){"use strict";s.d(t,{d:function(){return a}});let r="RTSET.asmx/",a={Interface:{qry:r+"qryITF",page:r+"pageITF",get:r+"getITF",set:r+"setITF",del:r+"delITF"},ProductMaster:{qry:r+"qryPRO",page:r+"pagePRO",get:r+"getPRO",set:r+"setPRO",del:r+"delPRO",snapshot:r+"snapshotPRO"},ProductCountries:{qry:r+"qryPCO",set2:r+"set2PCO"},ProductMonetaries:{qry:r+"qryPMO",set2:r+"set2PMO"},ProductDispersal:{qry:r+"qryPDI",get:r+"getPDI",set:r+"setPDI",del:r+"delPDI"},ProductSchedules:{qry:r+"qryPSC",set2:r+"set2PSC"},ProductScheduleRanges:{qry:r+"qryPSR",set2:r+"set2PSR"},ProductScheduleFees:{qry:r+"qryPSF",set2:r+"set2PSF"},ProductDispersalAgents:{qry:r+"qryPDA",set2:r+"set2PDA"},Correspondent:{page:r+"pageCOR",qry:r+"qryCOR",qry2:r+"qry2COR",get:r+"getCOR",set:r+"setCOR",del:r+"delCOR",snapshot:r+"snapshotCOR"},CorrespondentCountry:{qry:r+"qryCCO",get:r+"getCCO",set2:r+"set2CCO",del:r+"delCCO"},CorrespondentCurrency:{qry:r+"qryCCU",get:r+"getCCU",set2:r+"set2CCU",del:r+"delCCU"},CorrespondentAgents:{qry:r+"qryAGT",page:r+"pageAGT",get:r+"getAGT",set:r+"setAGT",del:r+"delAGT"},CorrespondentAgentBranches:{qry:r+"qryABR",page:r+"pageABR",get:r+"getABR",set:r+"setABR",del:r+"delABR"},CorrespondentExchangeMap:{qry:r+"qryEXC",set2:r+"set2EXC"},CurrencyExchangeMap:{qry:r+"qryEXG",set2:r+"set2EXG"},CorrespondentExchangeBuyMap:{qry:r+"qryEXB",set2:r+"set2EXB"},ExchangeRates:{get:r+"getEXB",qry:r+"qryEXG2",set2:r+"set2EXB"},RtDefault:{qry:r+"qryDE",set2:r+"set2DE"},Profession:{qry:r+"qryPFN",page:r+"pagePFN",get:r+"getPFN",set:r+"setPFN",del:r+"delPFN",snapshot:r+"snapshotPFN"},ClientIndividual:{qry:r+"qryCLI"},SalaryRange:{qry:r+"qrySRA",page:r+"pageSRA",get:r+"getSRA",set:r+"setSRA",del:r+"delSRA"},SourceOfIncome:{qry:r+"qrySI",page:r+"pageSI",snapshot:r+"snapshotSI",get:r+"getSI",set:r+"setSI",del:r+"delSI"},CorrespondentControl:{qry:r+"qryCCL",set:r+"set2CCL"},InterfaceMaps:{qry:r+"qryIFM",get:r+"getIFM",set2:r+"set2IFM"},SourceOfIncomeType:{qry:r+"qrySIT",snapshot:r+"snapshotSIT",page:r+"pageSIT",get:r+"getSIT",set:r+"setSIT",del:r+"delSIT"},ProfessionGroups:{qry:r+"qryPFG",page:r+"pagePFG",snapshot:r+"snapshotPFG",get:r+"getPFG",set:r+"setPFG",del:r+"delPFG"},CorrespondentGroup:{qry:r+"qryCGP",page:r+"pageCGP",get:r+"getCGP",set:r+"setCGP",del:r+"delCGP"},ExtraIncome:{qry:r+"qryEI",get:r+"getEI",del:r+"delEI",page:r+"pageEI",snapshot:r+"snapshotEI",set:r+"setEI"},CountryRisk:{page:r+"pageCOU",get:r+"getCOU",set:r+"setCOU",del:r+"delCOU"},CorDispControl:{qry:r+"qryCDC",set2:r+"set2CDC"},CorrespondentDispersal:{qry:r+"qryCDM",get:r+"getCDM",del:r+"delCDM",set2:r+"set2CDM"},CorrespondentDispersalRate:{qry:r+"qryCDR",set2:r+"set2CDR"}}},93894:function(e,t,s){"use strict";s.d(t,{O:function(){return u}});var r=s(52322),a=s(2784),n=s(82737),d=s(13073),o=s(80983),l=s(31389),i=s(33625),c=s(48601);let u=e=>{let{setAddress:t,address:s,editMode:u,window:g,readOnly:C,allowPost:p=!0,optional:h=!1,onSubmit:y,isSavedClear:I=!0,isCleared:v=!0,changeClear:b=!1,actions:m=[],...f}=e,[x,q]=(0,a.useState)(!h),[P,_]=(0,a.useState)({}),{formik:A}=(0,o.c)({maxAccess:P.maxAccess,initialValues:{recordId:null,name:"",countryId:null,countryName:"",stateId:null,stateName:"",cityId:null,city:"",street1:"",street2:"",email1:"",email2:"",phone:"",phone2:"",phone3:"",addressId:null,postalCode:"",cityDistrictId:null,cityDistrict:"",bldgNo:"",unitNo:"",subNo:"",poBox:""},validateOnChange:!0,validateOnBlur:!0,validationSchema:c.Ry({...P.validate}),onSubmit:e=>{t(e),p?y(e,g):g.close()}});return(0,a.useEffect)(()=>{h&&(A.values.name||A.values.street1||A.values.countryId||A.values.cityId)&&q(!0),!h||A.values.name||A.values.street1||A.values.countryId||A.values.cityId||q(!1)},[A.values]),(0,r.jsx)(n.Z,{form:A,maxAccess:P.maxAccess,isInfo:!1,disabledSubmit:C,editMode:u,isSavedClear:I,isCleared:v,onClear:b?()=>{A.resetForm({values:A.initialValues})}:void 0,actions:m,...f,children:(0,r.jsx)(l.R,{children:(0,r.jsx)(i.g,{children:(0,r.jsx)(d.Z,{addressValidation:A,readOnly:C,required:x,setFormik:_,address:s,...f})})})})}},29326:function(e,t,s){"use strict";var r=s(52322);s(2784);var a=s(23925),n=s(13980),d=s.n(n),o=s(95291),l=s.n(o),i=s(65947);let c=e=>{var t,s,n;let{children:d,value:o,index:c,maxAccess:u,...g}=e,C="".concat(e.name||"tab",".").concat(c),{accessLevel:p}=null!==(n=(null!==(s=null==u?void 0:null===(t=u.record)||void 0===t?void 0:t.controls)&&void 0!==s?s:[]).find(e=>e.controlId===C))&&void 0!==n?n:{accessLevel:0};if(p===i.A1)return null;let h=o===c;return(0,r.jsx)(a.Z,{role:"tabpanel",hidden:!h,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(l().tabPanel," ").concat(h?l().active:l().hidden),...g,children:d})};c.propTypes={children:d().node,index:d().number.isRequired,value:d().number.isRequired},t.Z=c},9522:function(e,t,s){"use strict";s.d(t,{Y:function(){return g}});var r=s(52322),a=s(23925),n=s(54582),d=s(68696),o=s(44258),l=s(2784),i=s(99266),c=s(52614),u=s.n(c);let g=e=>{var t,s,c,g,C;let{tabs:p,activeTab:h,setActiveTab:y,maxAccess:I,name:v="tab"}=e,b=(null==I?void 0:null===(s=I.record)||void 0===s?void 0:null===(t=s.controls)||void 0===t?void 0:t.filter(e=>{var t;return 4===e.accessLevel&&(null===(t=e.controlId)||void 0===t?void 0:t.startsWith("".concat(v,".")))}).map(e=>e.controlId.split(".")[1]))||[],m=null==p?void 0:null===(c=p.map((e,t)=>({...e,id:t})))||void 0===c?void 0:c.filter((e,t)=>!b.includes(String(t))),f=null===(g=m[h])||void 0===g?void 0:g.id,x=null===(C=m[h])||void 0===C?void 0:C.disabled;return(0,l.useEffect)(()=>{f>=0&&!x&&h!=f&&y(f)},[]),(0,r.jsx)(a.Z,{className:u().tabsContainer,children:(0,r.jsx)(a.Z,{className:u().tabsWrapper,children:(0,r.jsx)(n.Z,{value:h,onChange:(e,t)=>y(t),variant:"scrollable",scrollButtons:m.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==m?void 0:m.map(e=>(0,r.jsx)(d.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,r.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,r.jsx)("span",{children:e.label}),e.id===h&&(null==e?void 0:e.onRefetch)&&(0,r.jsx)(o.Z,{size:"small",className:u().refreshButton,onClick:t=>{t.stopPropagation(),e.onRefetch()},children:(0,r.jsx)(i.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[13073,49774,92888,40179],function(){return e(e.s=75778)}),_N_E=e.O()}]);