(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53173],{57338:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-employee-list",function(){return l(70985)}])},70985:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return ee}});var r=l(52322),t=l(2784),n=l(62202),i=l(69387),s=l(65950),d=l(26612),o=l(71987),c=l(61802),u=l(31389),m=l(33625),h=l(62362),x=l(36908),v=l(19473),p=l(60218),f=l(23925),y=l(76385),b=l(29326),g=l(9522),I=l(48601),j=l(5088),C=l(82737),Z=l(8661),D=l(84100),F=l(80983),N=l(89330),_=l(6035),A=l(38449),P=l(92407),w=l(39812),E=l(19689),R=l(95982),S=l(84705),V=e=>{var a,l,i,c;let{labels:m,maxAccess:x,setStore:f,store:y,imageUploadRef:b,getData:g}=e,{postRequest:V,getRequest:q}=(0,t.useContext)(s.$),{platformLabels:T}=(0,t.useContext)(v.l),{recordId:k}=y,L=(0,o.E)({endpointId:P.y.EmployeeChart.page}),{formik:O}=(0,F.c)({initialValues:{recordId:k,reference:"",firstName:"",middleName:"",familyName:"",idRef:"",homeMail:"",workMail:"",mobile:"",phone:"",civilStatus:null,otpId:null,birthDate:null,lastName:"",religion:null,nationalityId:null,bloodType:null,scId:null,scType:null,placeOfBirth:"",hireDate:null,gender:1,activeStatus:1,isConfidential:!1,sgId:null},maxAccess:x,validationSchema:I.Ry({reference:I.Z_().required(),firstName:I.Z_().required(),middleName:I.Z_().required(),lastName:I.Z_().required(),birthDate:I.hT().required(),scType:I.Rx().required(),hireDate:I.hT().required(),homeMail:I.Z_().email().nullable(),workMail:I.Z_().email().nullable(),mobile:I.Rx().min(999999).nullable(),phone:I.Rx().min(999999).nullable(),scId:I.Rx().when("scType",{is:e=>2==e,then:()=>I.Rx().required(),otherwise:()=>I.Rx().nullable()}),sgId:I.Rx().nullable().test("sgId-required-if-confidential","sgId is required when confidential",function(e){let{isConfidential:a}=this.parent;return!(a&&!e)})}),onSubmit:async e=>{let a=await V({extension:P.y.Employee.set,record:JSON.stringify({...e,hireDate:(0,w.ku)(e.hireDate),birthDate:(0,w.ku)(e.birthDate)})});e.recordId||O.setFieldValue("recordId",a.recordId),f(l=>({...l,recordId:a.recordId,hireDate:e.hireDate})),b.current&&(b.current.value=parseInt(a.recordId),await b.current.submit()),L(),g(a.recordId),n.ZP.success(e.recordId?T.Edited:T.Added)}});(0,t.useEffect)(()=>{!async function(){if(k){var e,a;let l=await q({extension:P.y.Employee.get1,parameters:"_recordId=".concat(k)});O.setValues({...l.record,hireDate:(null==l?void 0:null===(e=l.record)||void 0===e?void 0:e.hireDate)?(0,w.a1)(l.record.hireDate):null,birthDate:(null==l?void 0:null===(a=l.record)||void 0===a?void 0:a.birthDate)?(0,w.a1)(l.record.birthDate):null}),f(e=>{var a;return{...e,hireDate:null==l?void 0:null===(a=l.record)||void 0===a?void 0:a.hireDate}})}}()},[]);let B=!!(null==O?void 0:null===(a=O.values)||void 0===a?void 0:a.recordId),M=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!B}];return(0,r.jsx)(C.Z,{resourceId:d.i.EmployeeFilter,form:O,maxAccess:x,editMode:B,reportSize:5,previewReport:B,actions:M,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(h.Q,{children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:6,children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"reference",label:m.reference,value:O.values.reference,required:!0,maxLength:"10",readOnly:B,maxAccess:x,onChange:O.handleChange,onClear:()=>O.setFieldValue("reference",""),error:O.touched.reference&&!!O.errors.reference})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"firstName",label:m.firstName,value:O.values.firstName,maxAccess:x,required:!0,maxLength:"20",onChange:O.handleChange,onClear:()=>O.setFieldValue("firstName",""),error:O.touched.firstName&&!!O.errors.firstName})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"middleName",label:m.middleName,value:O.values.middleName,maxAccess:x,required:!0,maxLength:"20",onChange:O.handleChange,onClear:()=>O.setFieldValue("middleName",""),error:O.touched.middleName&&!!O.errors.middleName})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"lastName",label:m.lastName,value:O.values.lastName,maxAccess:x,maxLength:"20",required:!0,onChange:O.handleChange,onClear:()=>O.setFieldValue("lastName",""),error:O.touched.lastName&&!!O.errors.lastName})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"familyName",label:m.familyName,value:O.values.familyName,maxAccess:x,maxLength:"20",onChange:O.handleChange,onClear:()=>O.setFieldValue("familyName",""),error:O.touched.familyName&&!!O.errors.familyName})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"idRef",label:m.idRef,value:O.values.idRef,maxAccess:x,maxLength:"20",onChange:O.handleChange,onClear:()=>O.setFieldValue("idRef",""),error:O.touched.idRef&&!!O.errors.idRef})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"homeMail",label:m.homeMail,value:O.values.homeMail,maxAccess:x,maxLength:"40",onChange:O.handleChange,onClear:()=>O.setFieldValue("homeMail",""),error:O.touched.homeMail&&!!O.errors.homeMail})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"workMail",label:m.workMail,value:O.values.workMail,maxAccess:x,maxLength:"40",onChange:O.handleChange,onClear:()=>O.setFieldValue("workMail",""),error:O.touched.workMail&&!!O.errors.workMail})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"mobile",label:m.mobile,value:O.values.mobile,maxAccess:x,maxLength:15,phone:!0,onChange:O.handleChange,onClear:()=>O.setFieldValue("mobile",null),error:O.touched.mobile&&!!O.errors.mobile})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"phone",label:m.homePhone,value:O.values.phone,maxAccess:x,maxLength:15,phone:!0,onChange:O.handleChange,onClear:()=>O.setFieldValue("phone",null),error:O.touched.phone&&!!O.errors.phone})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"civilStatus",label:m.civilStatus,datasetId:D.v.CIVIL_STATUS,values:O.values,valueField:"key",displayField:"value",onChange:(e,a)=>{O.setFieldValue("civilStatus",(null==a?void 0:a.key)||null)},error:O.touched.civilStatus&&!!O.errors.civilStatus})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:_.f.OvertimeProfiles.qry,name:"otpId",label:m.overtimeProfile,valueField:"recordId",displayField:"name",values:O.values,onChange:(e,a)=>{O.setFieldValue("otpId",(null==a?void 0:a.recordId)||null)},error:O.touched.otpId&&!!O.errors.otpId})})]})}),(0,r.jsx)(p.ZP,{item:!0,xs:6,children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"birthDate",label:m.birthDate,value:null===(l=O.values)||void 0===l?void 0:l.birthDate,required:!0,onChange:O.setFieldValue,onClear:()=>O.setFieldValue("birthDate",null),error:O.touched.birthDate&&!!O.errors.birthDate})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"religion",label:m.religion,datasetId:D.v.RELIGION,values:O.values,valueField:"key",displayField:"value",onChange:(e,a)=>{O.setFieldValue("religion",(null==a?void 0:a.key)||null)},error:O.touched.religion&&!!O.errors.religion})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"nationalityId",endpointId:A.r.Country.qry,label:m.nationality,valueField:"recordId",displayField:"name",values:O.values,onChange:(e,a)=>{O.setFieldValue("nationalityId",(null==a?void 0:a.recordId)||0)},maxAccess:x,error:O.touched.nationalityId&&!!O.errors.nationalityId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"bloodType",label:m.bloodType,datasetId:D.v.BLOOD_TYPE,values:O.values,valueField:"key",displayField:"value",maxAccess:x,onChange:(e,a)=>{O.setFieldValue("bloodType",(null==a?void 0:a.key)||null)},error:O.touched.bloodType&&!!O.errors.bloodType})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"scType",label:m.scheduleType,datasetId:D.v.SCHEDULE_TYPE,values:O.values,required:!0,valueField:"key",displayField:"value",maxAccess:x,onChange:(e,a)=>{((null==a?void 0:a.key)==1||(null==a?void 0:a.key)==3||(null==a?void 0:a.key)==4)&&O.setFieldValue("scId",null),O.setFieldValue("scType",(null==a?void 0:a.key)||null)},error:O.touched.scType&&!!O.errors.scType})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:_.f.Schedule.qry,name:"scId",label:m.schedule,valueField:"recordId",displayField:"name",values:O.values,maxAccess:x,required:2==O.values.scType,readOnly:1==O.values.scType||3==O.values.scType||4==O.values.scType,onChange:(e,a)=>{O.setFieldValue("scId",(null==a?void 0:a.recordId)||null)},error:O.touched.scId&&!!O.errors.scId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"placeOfBirth",label:m.placeOfBirth,value:O.values.placeOfBirth,maxAccess:x,onChange:O.handleChange,maxLength:"30",onClear:()=>O.setFieldValue("placeOfBirth",""),error:O.touched.placeOfBirth&&!!O.errors.placeOfBirth})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"hireDate",label:m.hireDate,value:null===(i=O.values)||void 0===i?void 0:i.hireDate,required:!0,maxAccess:x,onChange:O.setFieldValue,onClear:()=>O.setFieldValue("hireDate",null),error:O.touched.hireDate&&!!O.errors.hireDate})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(S.Z,{name:"gender",maxAccess:x,row:!0,value:O.values.gender,onChange:e=>O.setFieldValue("gender",Number(e.target.value)),options:[{label:m.male,value:1},{label:m.female,value:2}]})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(E.Z,{name:"isConfidential",value:null===(c=O.values)||void 0===c?void 0:c.isConfidential,onChange:e=>{O.setFieldValue("isConfidential",e.target.checked),O.setFieldValue("sgId",null)},label:m.isConfidential,maxAccess:x})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:R.y.SecurityGroup.qry,parameters:"_startAt=0&_pageSize=1000&filter=",name:"sgId",label:m.securityGrp,values:O.values,valueField:"recordId",displayField:"name",maxAccess:x,onChange:(e,a)=>{O.setFieldValue("sgId",(null==a?void 0:a.recordId)||null)},required:O.values.isConfidential,readOnly:!O.values.isConfidential,error:O.touched.sgId&&!!O.errors.sgId})})]})})]})})})})},q=l(27723),T=l(21581),k=l(54074),L=e=>{var a;let{recordId:l,labels:i,maxAccess:d,employeeId:c,window:m}=e,{getRequest:x,postRequest:f}=(0,t.useContext)(s.$),{platformLabels:y}=(0,t.useContext)(v.l),b=(0,o.E)({endpointId:P.y.EmployementHistory.qry}),{formik:g}=(0,F.c)({maxAccess:d,initialValues:{recordId:l,employeeId:c,statusId:null,date:new Date,comment:""},validationSchema:I.Ry({statusId:I.Rx().required(),date:I.hT().required()}),onSubmit:async e=>{await f({extension:P.y.EmployementHistory.set,record:JSON.stringify({...e,employeeId:c})}),n.ZP.success(e.recordId?y.Edited:y.Added),m.close(),b()}}),j=!!g.values.recordId,C=async e=>{let a=await x({extension:P.y.EmployementHistory.get,parameters:"_recordId=".concat(e)});g.setValues({...a.record,date:(0,w.a1)(a.record.date)})};return(0,t.useEffect)(()=>{l&&C(l)},[]),(0,r.jsx)(k.Z,{onSave:g.handleSubmit,maxAccess:d,editMode:j,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(h.Q,{children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:P.y.EmploymentStatusFilters.qry,name:"statusId",label:i.status,valueField:"recordId",displayField:"name",values:g.values,maxAccess:d,required:!0,onChange:(e,a)=>{g.setFieldValue("statusId",(null==a?void 0:a.recordId)||null)},error:g.touched.statusId&&!!g.errors.statusId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"date",label:i.date,value:g.values.date,onChange:g.setFieldValue,maxAccess:d,required:!0,onClear:()=>g.setFieldValue("date",null),error:g.touched.date&&!!g.errors.date})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(T.Z,{name:"comment",label:i.comments,value:null==g?void 0:null===(a=g.values)||void 0===a?void 0:a.comment,maxLength:"100",maxAccess:d,onChange:g.handleChange,onClear:()=>g.setFieldValue("comment",""),error:g.touched.comment&&!!g.errors.comment})})]})})})})},O=e=>{var a,l;let{labels:x,maxAccess:f,store:b}=e,{getRequest:g,postRequest:I}=(0,t.useContext)(s.$),{platformLabels:C}=(0,t.useContext)(v.l),{stack:Z}=(0,c.zY)(),{recordId:D}=b,[F,N]=(0,t.useState)(""),[_,A]=(0,t.useState)("");async function w(){return await g({extension:P.y.EmployementHistory.qry,parameters:"_filter=&_size=30&_startAt=0&_employeeId=".concat(D)})}async function E(){return await g({extension:P.y.JobInfo.qry,parameters:"_filter=&_size=30&_startAt=0&_params=1|".concat(D,"&_employeeId=&_sortBy=recordId desc")})}let{query:{data:R},refetch:S,invalidate:V}=(0,o.J)({enabled:!!D,queryFn:w,endpointId:P.y.EmployementHistory.qry,datasetId:d.i.EmployeeFilter,params:{disabledReqParams:!0,maxAccess:f}}),{query:{data:T},refetch:k}=(0,o.J)({enabled:!!D,queryFn:E,endpointId:P.y.JobInfo.qry,datasetId:d.i.EmployeeFilter,params:{disabledReqParams:!0,maxAccess:f}}),O=F?{list:null==R?void 0:null===(a=R.list)||void 0===a?void 0:a.filter(e=>{var a;return null===(a=e.statusName)||void 0===a?void 0:a.toLowerCase().includes(F.toLowerCase())})}:R,B=_?{list:null==T?void 0:null===(l=T.list)||void 0===l?void 0:l.filter(e=>[e.positionName,e.branchName,e.departmentName].filter(Boolean).some(e=>e.toLowerCase().includes(_.toLowerCase())))}:T,M=[{field:"statusName",headerName:x.status,flex:1},{field:"date",headerName:x.date,flex:1,type:"date"}],J=[{field:"date",headerName:x.date,flex:1,type:"date"},{field:"departmentName",headerName:x.department,flex:1},{field:"branchName",headerName:x.branch,flex:1},{field:"positionName",headerName:x.position,flex:1},{field:"reportToName",headerName:x.reportTo,flex:1},{field:"statusName",headerName:x.status,flex:1}],z=async e=>{await I({extension:P.y.EmployementHistory.del,record:JSON.stringify(e)}),n.ZP.success(C.Deleted),V()},U=e=>{Z({Component:L,props:{labels:x,maxAccess:f,employeeId:D,recordId:null==e?void 0:e.recordId},width:500,height:400,title:x.EmploymentHistory})};return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(m.g,{children:(0,r.jsx)(y.Z,{variant:"h6",padding:2,children:x.EmploymentHistory})}),(0,r.jsx)(m.g,{children:(0,r.jsxs)(p.ZP,{container:!0,xs:12,children:[(0,r.jsx)(p.ZP,{item:!0,xs:1.3,children:(0,r.jsx)(q.Z,{onAdd:U,maxAccess:f})}),(0,r.jsx)(p.ZP,{item:!0,xs:3,paddingTop:1,children:(0,r.jsx)(j.Z,{name:"searchEmployment",value:F,label:C.Search,onClear:()=>N(""),onChange:e=>N(e.target.value),onSearch:e=>N(e),search:!0})})]})}),(0,r.jsx)(h.Q,{children:(0,r.jsx)(i.Z,{name:"EmploymentHistoryTable",columns:M,gridData:O,rowId:["recordId"],onEdit:U,onDelete:z,pageSize:50,pagination:!1,refetch:S,maxAccess:f})}),(0,r.jsx)(m.g,{children:(0,r.jsx)(y.Z,{variant:"h6",padding:2,children:x.JobInfo})}),(0,r.jsx)(m.g,{children:(0,r.jsx)(p.ZP,{container:!0,xs:12,paddingBottom:2,children:(0,r.jsx)(p.ZP,{item:!0,xs:3,children:(0,r.jsx)(j.Z,{name:"searchJobInfo",value:_,label:C.Search,onClear:()=>A(""),onChange:e=>A(e.target.value),onSearch:e=>A(e),search:!0})})})}),(0,r.jsx)(h.Q,{children:(0,r.jsx)(i.Z,{name:"JobInfoTable",columns:J,gridData:B,rowId:["recordId"],pageSize:50,pagination:!1,refetch:k,maxAccess:f})})]})},B=l(19809),M=l(91406),J=l(83562),z=e=>{var a,l,i,d,c;let{labels:m,maxAccess:x,store:f}=e,{postRequest:y,getRequest:b}=(0,t.useContext)(s.$),{platformLabels:g}=(0,t.useContext)(v.l),{recordId:C,hireDate:_}=f,A=(0,o.E)({endpointId:P.y.EmployeeChart.page}),E=_?"string"==typeof _&&_.includes("/Date")?(0,w.a1)(_):new Date(_):null,{formik:R}=(0,F.c)({initialValues:{recordId:C,employeeId:C,probationEndDate:E,pyActiveDate:E,nextReviewDate:null,npId:null,termEndDate:null,recruitmentInfo:"",recruitmentCost:null,pyReference:"",taReference:"",ssBranchId:null,probationPeriod:0,sponsorId:null,otherRef:"",bsId:null,languageId:null},maxAccess:x,validationSchema:I.Ry({probationEndDate:I.hT().required(),pyActiveDate:I.hT().required()}),onSubmit:async e=>{await y({extension:P.y.Hiring.set,record:JSON.stringify({...e,employeeId:C,pyActiveDate:(0,w.ku)(e.pyActiveDate),termEndDate:e.termEndDate?(0,w.ku)(e.termEndDate):null,nextReviewDate:e.nextReviewDate?(0,w.ku)(e.nextReviewDate):null,probationEndDate:(0,w.ku)(e.probationEndDate)})}),A(),n.ZP.success(g.Edited)}}),S=!!R.values.recordId;return(0,t.useEffect)(()=>{!async function(){if(C){let t=await b({extension:P.y.Hiring.get,parameters:"_employeeId=".concat(C)});if(null==t?void 0:t.record){var e,a,l,r;R.setValues({...null==t?void 0:t.record,employeeId:C,pyActiveDate:(null==t?void 0:null===(e=t.record)||void 0===e?void 0:e.pyActiveDate)?(0,w.a1)(t.record.pyActiveDate):null,termEndDate:(null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.termEndDate)?(0,w.a1)(t.record.termEndDate):null,nextReviewDate:(null==t?void 0:null===(l=t.record)||void 0===l?void 0:l.nextReviewDate)?(0,w.a1)(t.record.nextReviewDate):null,probationEndDate:(null==t?void 0:null===(r=t.record)||void 0===r?void 0:r.probationEndDate)?(0,w.a1)(t.record.probationEndDate):null})}else R.setFieldValue("probationEndDate",E),R.setFieldValue("pyActiveDate",E)}}()},[_]),(0,r.jsx)(k.Z,{onSave:R.handleSubmit,maxAccess:x,editMode:S,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(h.Q,{children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:6,children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:P.y.NoticePeriods.qry,name:"npId",label:m.noticePeriod,valueField:"recordId",displayField:"name",values:R.values,maxAccess:x,onChange:(e,a)=>{R.setFieldValue("npId",(null==a?void 0:a.recordId)||null)},error:R.touched.npId&&!!R.errors.npId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(M.Z,{name:"probationPeriod",label:m.probationPeriod,value:R.values.probationPeriod,maxAccess:x,maxLength:9,onChange:R.handleChange,allowNegative:!1,onBlur:e=>{let a=e.target.value;if(R.setFieldValue("probationPeriod",a),_&&a){let e=new Date("string"==typeof _&&_.includes("/Date")?(0,w.a1)(_):new Date(_));e.setDate(e.getDate()+Number(a)),R.setFieldValue("probationEndDate",e)}},onClear:()=>R.setFieldValue("probationPeriod",""),error:R.touched.probationPeriod&&!!R.errors.probationPeriod})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"probationEndDate",label:m.probationEndDate,value:null===(a=R.values)||void 0===a?void 0:a.probationEndDate,required:!0,onChange:(e,a)=>{let l=null,r=a?new Date(a):null;if(_&&(l="string"==typeof _&&_.includes("/Date")?(0,w.a1)(_):new Date(_)),r&&l){let e=(0,B.Z)(r,l);R.setFieldValue("probationPeriod",e>0?e:0)}R.setFieldValue("probationEndDate",a)},maxAccess:x,onClear:()=>R.setFieldValue("probationEndDate",""),error:R.touched.probationEndDate&&!!R.errors.probationEndDate})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"nextReviewDate",label:m.nextReviewDate,value:null===(l=R.values)||void 0===l?void 0:l.nextReviewDate,onChange:R.setFieldValue,maxAccess:x,onClear:()=>R.setFieldValue("nextReviewDate",""),error:R.touched.nextReviewDate&&!!R.errors.nextReviewDate})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"termEndDate",label:m.termEndDate,value:null===(i=R.values)||void 0===i?void 0:i.termEndDate,maxAccess:x,onChange:R.setFieldValue,onClear:()=>R.setFieldValue("termEndDate",""),error:R.touched.termEndDate&&!!R.errors.termEndDate})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"pyActiveDate",label:m.pyActiveDate,value:null===(d=R.values)||void 0===d?void 0:d.pyActiveDate,required:!0,maxAccess:x,onChange:R.setFieldValue,onClear:()=>R.setFieldValue("pyActiveDate",""),error:R.touched.pyActiveDate&&!!R.errors.pyActiveDate})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"languageId",label:m.language,datasetId:D.v.LANGUAGE_EMPLOYEE,values:R.values,maxAccess:x,valueField:"key",displayField:"value",onChange:(e,a)=>{R.setFieldValue("languageId",(null==a?void 0:a.key)||null)},error:R.touched.languageId&&!!R.errors.languageId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(T.Z,{name:"recruitmentInfo",label:m.recruitmentInfo,value:null==R?void 0:null===(c=R.values)||void 0===c?void 0:c.recruitmentInfo,maxLength:"255",maxAccess:x,onChange:R.handleChange,onClear:()=>R.setFieldValue("recruitmentInfo",""),error:R.touched.recruitmentInfo&&!!R.errors.recruitmentInfo})})]})}),(0,r.jsx)(p.ZP,{item:!0,xs:6,children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(M.Z,{name:"recruitmentCost",label:m.recruitmentCost,value:R.values.recruitmentCost,maxAccess:x,maxLength:"10",onChange:R.handleChange,onClear:()=>R.setFieldValue("recruitmentCost",""),error:R.touched.recruitmentCost&&!!R.errors.recruitmentCost})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"pyReference",label:m.pyReference,value:R.values.pyReference,maxAccess:x,maxLength:"10",onChange:R.handleChange,onClear:()=>R.setFieldValue("pyReference",""),error:R.touched.pyReference&&!!R.errors.pyReference})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"taReference",label:m.taReference,value:R.values.taReference,maxAccess:x,maxLength:"10",onChange:R.handleChange,onClear:()=>R.setFieldValue("taReference",""),error:R.touched.taReference&&!!R.errors.taReference})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:J.m.BankTransferFilters.qry,name:"ssBranchId",label:m.ssBranch,valueField:"recordId",displayField:"name",maxAccess:x,values:R.values,onChange:(e,a)=>{R.setFieldValue("ssBranchId",(null==a?void 0:a.recordId)||null)},error:R.touched.ssBranchId&&!!R.errors.ssBranchId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:P.y.SponsorFilters.qry,name:"sponsorId",label:m.sponsor,valueField:"recordId",displayField:"name",values:R.values,maxAccess:x,onChange:(e,a)=>{R.setFieldValue("sponsorId",(null==a?void 0:a.recordId)||null)},error:R.touched.sponsorId&&!!R.errors.sponsorId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"otherRef",label:m.otherRef,value:R.values.otherRef,maxAccess:x,maxLength:15,onChange:R.handleChange,onClear:()=>R.setFieldValue("otherRef",""),error:R.touched.otherRef&&!!R.errors.otherRef})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:J.m.BankTransferFilters.qry,name:"bsId",label:m.benefitSchedule,values:R.values,valueField:"recordId",displayField:"name",maxAccess:x,onChange:(e,a)=>{R.setFieldValue("bsId",(null==a?void 0:a.recordId)||null)},error:R.touched.bsId&&!!R.errors.bsId})})]})})]})})})})},U=l(50496),H=e=>{let{labels:a,maxAccess:l,store:n}=e,{getRequest:c,postRequest:x}=(0,t.useContext)(s.$),{recordId:v}=n;async function p(){let e=await c({extension:U.U.Leaves.qry,parameters:"_filter=&_size=30&_startAt=0&_lsId=0&_employeeId=".concat(v,"&_asOfDate=").concat((null==n?void 0:n.date)?(0,w.jW)(null==n?void 0:n.date):(0,w.jW)(new Date))});if(e&&(null==e?void 0:e.list)){var a;e.list=null==e?void 0:null===(a=e.list)||void 0===a?void 0:a.map(e=>({...e,earned:null==e?void 0:e.summary.earned,used:null==e?void 0:e.summary.used,lost:null==e?void 0:e.summary.carryOverDeducted,adjustments:null==e?void 0:e.summary.adjustments,balance:null==e?void 0:e.summary.balance,payments:null==e?void 0:e.summary.payments,checked:null==e?void 0:e.isEnrolled}))}return e}let{query:{data:f},refetch:b}=(0,o.J)({enabled:!!v,queryFn:p,endpointId:U.U.Leaves.qry,datasetId:d.i.EmployeeFilter,params:{disabledReqParams:!0,maxAccess:l}}),g=[{field:"schedule.name",headerName:a.name,flex:1},{field:"summary.lttName",headerName:a.type,flex:1},{field:"earned",headerName:a.earned,flex:1,type:{field:"number",decimal:2}},{field:"used",headerName:a.used,flex:1,type:{field:"number",decimal:2}},{field:"lost",headerName:a.lost,flex:1,type:{field:"number",decimal:2}},{field:"adjustments",headerName:a.adjustment,flex:1,type:{field:"number",decimal:2}},{field:"payments",headerName:a.payment,flex:1,type:{field:"number",decimal:2}},{field:"balance",headerName:a.balance,flex:1,type:{field:"number",decimal:2}}];return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(m.g,{children:(0,r.jsx)(y.Z,{variant:"h6",padding:2,children:a.LeaveBalance})}),(0,r.jsx)(h.Q,{children:(0,r.jsx)(i.Z,{name:"leaveBalanceTable",columns:g,gridData:f,rowId:["recordId"],showCheckboxColumn:!0,handleCheckboxChange:async(e,a)=>{var l,r,t,n;a?await x({extension:P.y.Leaves.set,record:JSON.stringify({employeeId:v,ltId:null==e?void 0:null===(t=e.schedule)||void 0===t?void 0:t.ltId,lsId:null==e?void 0:null===(n=e.schedule)||void 0===n?void 0:n.recordId})}):await x({extension:P.y.Leaves.del,record:JSON.stringify({employeeId:v,ltId:null==e?void 0:null===(l=e.schedule)||void 0===l?void 0:l.ltId,lsId:null==e?void 0:null===(r=e.schedule)||void 0===r?void 0:r.recordId})}),b()},pageSize:50,pagination:!1,refetch:b,maxAccess:l,showSelectAll:!1})})]})},Q=e=>{var a,l,i;let{recordId:d,employeeId:c,labels:m,maxAccess:x,window:f}=e,{getRequest:y,postRequest:b}=(0,t.useContext)(s.$),{platformLabels:g}=(0,t.useContext)(v.l),C=(0,o.E)({endpointId:P.y.Skills.qry}),{formik:D}=(0,F.c)({maxAccess:x,initialValues:{recordId:d,employeeId:c,institution:"",clId:null,dateFrom:null,dateTo:null,remarks:"",grade:"",major:""},validationSchema:I.Ry({institution:I.Z_().required(),clId:I.Rx().required(),grade:I.Z_().required(),major:I.Z_().required()}),onSubmit:async e=>{await b({extension:P.y.Skills.set,record:JSON.stringify({...e,employeeId:c})}),n.ZP.success(e.recordId?g.Edited:g.Added),C(),f.close()}}),_=async e=>{let a=await y({extension:P.y.Skills.get,parameters:"_recordId=".concat(e)});D.setValues({...a.record,dateFrom:(0,w.a1)(a.record.dateFrom),dateTo:(0,w.a1)(a.record.dateTo),employeeId:c})};return(0,t.useEffect)(()=>{d&&_(d)},[]),(0,r.jsx)(k.Z,{onSave:D.handleSubmit,maxAccess:x,editMode:!!d,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(h.Q,{children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"institution",label:m.institution,value:D.values.institution,required:!0,maxLength:50,maxAccess:x,onChange:D.handleChange,onClear:()=>D.setFieldValue("institution",""),error:D.touched.institution&&!!D.errors.institution})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:P.y.CertificateFilters.qry,name:"clId",label:m.level,valueField:"recordId",maxAccess:x,required:!0,displayField:"name",values:D.values,onChange:(e,a)=>{D.setFieldValue("clId",(null==a?void 0:a.recordId)||null)},error:D.touched.clId&&!!D.errors.clId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"dateFrom",label:m.from,value:null===(a=D.values)||void 0===a?void 0:a.dateFrom,maxAccess:x,onChange:D.setFieldValue,onClear:()=>D.setFieldValue("dateFrom",null),error:D.touched.dateFrom&&!!D.errors.dateFrom})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(N.Z,{name:"dateTo",label:m.to,value:null===(l=D.values)||void 0===l?void 0:l.dateTo,onChange:D.setFieldValue,maxAccess:x,onClear:()=>D.setFieldValue("dateTo",null),error:D.touched.dateTo&&!!D.errors.dateTo})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(T.Z,{name:"remarks",label:m.remarks,value:null==D?void 0:null===(i=D.values)||void 0===i?void 0:i.remarks,maxLength:"100",rows:2,maxAccess:x,onChange:D.handleChange,onClear:()=>D.setFieldValue("remarks",""),error:D.touched.remarks&&!!D.errors.remarks})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"grade",label:m.grade,value:D.values.grade,required:!0,maxAccess:x,maxLength:20,onChange:D.handleChange,onClear:()=>D.setFieldValue("grade",""),error:D.touched.grade&&!!D.errors.grade})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"major",label:m.major,value:D.values.major,required:!0,maxLength:50,maxAccess:x,onChange:D.handleChange,onClear:()=>D.setFieldValue("major",""),error:D.touched.major&&!!D.errors.major})})]})})})})},W=e=>{let{labels:a,maxAccess:l,store:x}=e,{getRequest:p,postRequest:f}=(0,t.useContext)(s.$),{platformLabels:y}=(0,t.useContext)(v.l),{stack:b}=(0,c.zY)(),{recordId:g}=x;async function I(){return await p({extension:P.y.Skills.qry,parameters:"_filter=&_size=30_startAt=0&_employeeId=".concat(g)})}let{query:{data:j},refetch:C,invalidate:Z}=(0,o.J)({enabled:!!g,queryFn:I,endpointId:P.y.Skills.qry,datasetId:d.i.EmployeeFilter}),D=[{field:"clName",headerName:a.level,flex:1},{field:"institution",headerName:a.institution,flex:1},{field:"dateFrom",headerName:a.from,flex:1,type:"date"},{field:"dateTo",headerName:a.to,flex:1,type:"date"},{field:"grade",headerName:a.grade,flex:1},{field:"major",headerName:a.major,flex:1}],F=async e=>{await f({extension:P.y.Skills.del,record:JSON.stringify(e)}),n.ZP.success(y.Deleted),Z()},N=e=>{b({Component:Q,props:{labels:a,maxAccess:l,recordId:e,employeeId:g},width:600,height:500,title:a.Skills})};return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(m.g,{children:(0,r.jsx)(q.Z,{onAdd:()=>{N()},maxAccess:l})}),(0,r.jsx)(h.Q,{children:(0,r.jsx)(i.Z,{name:"skillsTable",columns:D,gridData:j,rowId:["recordId"],onEdit:e=>{N(null==e?void 0:e.recordId)},onDelete:F,pageSize:50,pagination:!1,refetch:C,maxAccess:l})})]})},Y=l(93883),$=e=>{let{maxAccess:a,store:l}=e,{postRequest:i,getRequest:d}=(0,t.useContext)(s.$),{platformLabels:c}=(0,t.useContext)(v.l),{recordId:m}=l,[x,f]=(0,t.useState)([]),y=(0,o.E)({endpointId:P.y.UserDefined.qry}),{formik:b}=(0,F.c)({initialValues:{},maxAccess:a,onSubmit:async e=>{let a={items:Object.entries(e).map(e=>{let[a,l]=e;return{propertyId:Number(a),employeeId:m,value:null!=l?l:""}})};await i({extension:P.y.UserDefined.set2,record:JSON.stringify(a)}),n.ZP.success(c.Edited),y()}});(0,t.useEffect)(()=>{!async function(){var e;if(!m)return;let a=await d({extension:P.y.UserDefined.qry,parameters:"_employeeId=".concat(m)}),l=await d({extension:P.y.CustomProperties.qry,parameters:"_employeeId=".concat(m)}),r=null==l?void 0:null===(e=l.list)||void 0===e?void 0:e.map(e=>{var l,r;let t=null==a?void 0:null===(l=a.list)||void 0===l?void 0:l.find(a=>a.propertyId===e.recordId);return{...e,value:null!==(r=null==t?void 0:t.value)&&void 0!==r?r:"",employeeId:m}});f(r);let t=null==r?void 0:r.reduce((e,a)=>(e[a.recordId]=a.value,e),{});b.setValues(t)}()},[m]);let g=e=>{var l;let t=e.recordId,n=null!==(l=b.values[t])&&void 0!==l?l:"";switch(e.mask){case 1:return(0,r.jsx)(j.Z,{name:String(t),label:e.name,value:n||"",maxAccess:a,onChange:b.handleChange,onClear:()=>b.setFieldValue(String(t),"")},t);case 2:return(0,r.jsx)(M.Z,{name:String(t),label:e.name,value:n||"",maxAccess:a,onChange:b.handleChange,onClear:()=>b.setFieldValue(String(t),"")},t);case 3:return(0,r.jsx)(N.Z,{name:String(t),label:e.name,maxAccess:a,value:n?new Date(n):null,onChange:(e,a)=>b.setFieldValue(String(t),a||""),onClear:()=>b.setFieldValue(String(t),"")},t);case 4:return(0,r.jsx)(Y.Z,{name:String(t),label:e.name,maxAccess:a,value:n?new Date(n):null,onChange:(e,a)=>b.setFieldValue(String(t),a||""),onClear:()=>b.setFieldValue(String(t),"")},t);case 5:return(0,r.jsx)(E.Z,{name:String(t),label:e.name,checked:!0===n||"true"===n,onChange:e=>b.setFieldValue(String(t),e.target.checked),maxAccess:a},t);default:return null}};return(0,r.jsx)(k.Z,{onSave:b.handleSubmit,maxAccess:a,editMode:!0,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(h.Q,{children:(0,r.jsx)(p.ZP,{container:!0,spacing:2,children:null==x?void 0:x.map(e=>(0,r.jsx)(p.ZP,{item:!0,xs:12,children:g(e)},e.recordId))})})})})},G=l(5211),X=l(2801),K=e=>{let{recordId:a,labels:l,maxAccess:n}=e,[i,o]=(0,t.useState)(0),[c,u]=(0,t.useState)({recordId:a||null,hireDate:null}),{getRequest:m}=(0,t.useContext)(s.$),[h,x]=(0,t.useState)(null),v=(0,t.useRef)(null),I=[{label:l.Profile},{label:l.Job,disabled:!c.recordId},{label:l.Leaves,disabled:!c.recordId},{label:l.Hiring,disabled:!c.recordId},{label:l.Files,disabled:!c.recordId},{label:l.Skills,disabled:!c.recordId},{label:l.UserDefined,disabled:!c.recordId}],j=async e=>{let a=await m({extension:P.y.QuickView.get,parameters:"_recordId=".concat(e,"&_asOfDate=").concat((0,w.uQ)(new Date))});x((null==a?void 0:a.record)||{}),u(e=>{var l;return{...e,hireDate:(null==a?void 0:null===(l=a.record)||void 0===l?void 0:l.hireDate)||null}})};return(0,t.useEffect)(()=>{a&&j(a)},[]),(0,r.jsxs)(p.ZP,{container:!0,sx:{height:"100%"},children:[(0,r.jsx)(p.ZP,{item:!0,xs:3,sx:{height:"100%"},children:(0,r.jsxs)(f.Z,{sx:{height:"100%",borderRight:"1px solid #ddd",p:2,display:"flex",flexDirection:"column",alignItems:"left"},children:[(0,r.jsx)(X.Z,{ref:v,resourceId:d.i.EmployeeFilter,seqNo:0,recordId:a,disabled:!!a}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{variant:"subtitle1",children:(null==h?void 0:h.fullName)||""}),(0,r.jsx)(y.Z,{variant:"subtitle1",children:(null==h?void 0:h.departmentName)||""}),(0,r.jsx)(y.Z,{variant:"subtitle1",children:(null==h?void 0:h.branchName)||""}),(0,r.jsx)(y.Z,{variant:"subtitle1",children:(null==h?void 0:h.positionName)||""}),(0,r.jsxs)(y.Z,{variant:"body2",color:"text.secondary",children:[l.Manager,": ",(null==h?void 0:h.reportToName)||""]}),(0,r.jsx)(y.Z,{variant:"body2",color:"text.secondary",children:(null==h?void 0:h.serviceDuration)||""})]})]})}),(0,r.jsxs)(p.ZP,{item:!0,xs:9,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(g.Y,{tabs:I,activeTab:i,setActiveTab:o,maxAccess:n}),(0,r.jsx)(b.Z,{index:0,value:i,maxAccess:n,children:(0,r.jsx)(V,{store:c,setStore:u,labels:l,getData:j,maxAccess:n,imageUploadRef:v})}),(0,r.jsx)(b.Z,{index:1,value:i,maxAccess:n,children:(0,r.jsx)(O,{store:c,labels:l,maxAccess:n})}),(0,r.jsx)(b.Z,{index:2,value:i,maxAccess:n,children:(0,r.jsx)(H,{store:c,labels:l,maxAccess:n})}),(0,r.jsx)(b.Z,{index:3,value:i,maxAccess:n,children:(0,r.jsx)(z,{store:c,labels:l,maxAccess:n})}),(0,r.jsx)(b.Z,{index:4,value:i,maxAccess:n,children:(0,r.jsx)(G.Z,{resourceId:d.i.Files,recordId:a,isNotTab:a})}),(0,r.jsx)(b.Z,{index:5,value:i,maxAccess:n,children:(0,r.jsx)(W,{store:c,labels:l,maxAccess:n})}),(0,r.jsx)(b.Z,{index:6,value:i,maxAccess:n,children:(0,r.jsx)($,{store:c,maxAccess:n})})]})]})},ee=()=>{let{getRequest:e,postRequest:a}=(0,t.useContext)(s.$),{platformLabels:l}=(0,t.useContext)(v.l),{stack:p}=(0,c.zY)(),{query:{data:f},labels:y,filterBy:b,paginationParameters:g,invalidate:I,access:j,refetch:C}=(0,o.J)({queryFn:D,endpointId:P.y.EmployeeChart.page,datasetId:d.i.EmployeeFilter,filter:{filterFn:Z}});async function Z(a){let{filters:l,pagination:r}=a;if(null==l||!l.qry)return D({_startAt:r._startAt||0,params:null==l?void 0:l.params});{let a=await e({extension:P.y.EmployeeChart.qry2,parameters:"_filter=".concat(l.qry,"&_branchId=0")});return a&&(null==a?void 0:a.list)&&(a.list=null==a?void 0:a.list.map(e=>{var a;return{...e,hireDate:null==e?void 0:null===(a=e.parent)||void 0===a?void 0:a.hireDate}})),a}}async function D(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:l=0,_pageSize:r=50,params:t}=a,n=await e({extension:P.y.EmployeeChart.page,parameters:"_startAt=".concat(l,"&_size=30&_sortBy=recordId desc&_pageSize=").concat(r,"&_params=").concat(t||"")});return n&&(null==n?void 0:n.list)&&(n.list=n.list.map(e=>{var a;return{...e,hireDate:null==e?void 0:null===(a=e.parent)||void 0===a?void 0:a.hireDate}})),{...n,_startAt:l}}let F=[{field:"pictureUrl",headerName:"",flex:1,type:"image"},{field:"parent.reference",headerName:y.ref,flex:1},{field:"parent.fullName",headerName:y.name,flex:1,wrapText:!0,autoHeight:!0},{field:"department.name",headerName:y.department,flex:1},{field:"position.name",headerName:y.position,flex:1,wrapText:!0,autoHeight:!0},{field:"branch.name",headerName:y.branch,flex:1},{field:"scName",headerName:y.schedule,flex:1},{field:"scTypeName",headerName:y.scheduleType,flex:1},{field:"hireDate",headerName:y.hireDate,flex:1,type:"date"}],N=async e=>{var r;await a({extension:P.y.Employee.del,record:JSON.stringify({recordId:null==e?void 0:null===(r=e.parent)||void 0===r?void 0:r.recordId})}),I(),n.ZP.success(l.Deleted)};function _(e){p({Component:K,props:{labels:y,recordId:e,maxAccess:j},width:1e3,height:700,title:y.employee})}return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(m.g,{children:(0,r.jsx)(x.Z,{onAdd:()=>{_()},maxAccess:j,reportName:"RT108",filterBy:b})}),(0,r.jsx)(h.Q,{children:(0,r.jsx)(i.Z,{name:"table",columns:F,gridData:f,rowId:["recordId"],paginationParameters:g,paginationType:"api",refetch:C,onEdit:e=>{var a;_(null==e?void 0:null===(a=e.parent)||void 0===a?void 0:a.recordId)},onDelete:N,deleteConfirmationType:"strict",pageSize:50,maxAccess:j})})]})}},84705:function(e,a,l){"use strict";var r=l(52322);l(2784);var t=l(95453),n=l(37691),i=l(6640),s=l(81576),d=l(81119),o=l.n(d),c=l(7087),u=l.n(c);a.Z=e=>{let{options:a=[],value:l,onChange:d,row:c=!0,maxAccess:m,name:h,readOnly:x,hidden:v,required:p=!1,...f}=e,{_readOnly:y,_required:b,_hidden:g}=(0,s.W)(h,m,p,x,v),I=y||g;return g?null:(0,r.jsx)(t.Z,{row:c,value:l,onChange:d,className:o().radioGroup,...f,children:a.map(e=>{let{label:a,value:l,disabled:t=!1}=e;return(0,r.jsx)(n.Z,{value:l,disabled:I||t,required:b,label:a,classes:{label:u().inputLabel},control:(0,r.jsx)(i.Z,{className:o().radio,classes:{root:u().outlinedRoot}})},l)})})}},2801:function(e,a,l){"use strict";var r=l(52322),t=l(23925),n=l(2784),i=l(80983),s=l(65950),d=l(38449),o=l(19473),c=l(35656),u=l(10498),m=l.n(u),h=l(69627);let x=(0,n.forwardRef)((e,a)=>{let{resourceId:u,error:x,seqNo:v,recordId:p,width:f=140,height:y=140,customWidth:b,customHeight:g,disabled:I=!1,isAbsolutePath:j=!1,parentImage:C}=e,Z=(0,n.useRef)(null),D=(0,n.useRef)(null),F=(0,n.useRef)({}),{getRequest:N,postRequest:_}=(0,n.useContext)(s.$),{platformLabels:A}=(0,n.useContext)(o.l),[P,w]=(0,n.useState)(""),E=null==C?void 0:C.recordId,R=null==C?void 0:C.resourceId,{formik:S}=(0,i.c)({initialValues:{}}),{width:V}=(0,c.d)(),q=V>=1680?1:V>=1600?.9:V<=1024?.7:.7+(V-1024)/576*.22000000000000008;(0,n.useImperativeHandle)(a,()=>({submit:T}));let T=()=>{var e,l,r,t,n,i,s,o,c,m,h,x;if(I)return;let v=(null==a?void 0:null===(e=a.current)||void 0===e?void 0:e.value)||p;if(j){if((null===(i=S.values)||void 0===i?void 0:null===(n=i.file)||void 0===n?void 0:n.name)||S.values.url){let e={...S.values,fileName:(null===(c=S.values.file)||void 0===c?void 0:c.name)||S.values.url,resourceId:u,recordId:v};return _({extension:d.r.Attachment.set2,record:JSON.stringify(e),file:null===(m=S.values)||void 0===m?void 0:m.file}).then(()=>L(v))}return P||null===(s=F.current)||void 0===s||!s.fileName||(null===(o=S.values)||void 0===o?void 0:o.fileName)?void 0:_({extension:d.r.Attachment.del,record:JSON.stringify(F.current)}).then(()=>L(v))}if(null===(l=S.values)||void 0===l?void 0:l.file){let e={...S.values,recordId:v};return _({extension:d.r.Attachment.set,record:JSON.stringify(e),file:null===(h=S.values)||void 0===h?void 0:h.file}).then(()=>L(v))}if(!P&&(null===(r=F.current)||void 0===r?void 0:r.url)&&!(null===(t=S.values)||void 0===t?void 0:t.url))return _({extension:d.r.Attachment.del,record:JSON.stringify(F.current),file:null===(x=F.current)||void 0===x?void 0:x.url}).then(()=>L(v))},k=()=>{w(""),S.setValues({})},L=async e=>{let a=e||p;if(!u)return;if(j&&a){let e=await N({extension:d.r.Attachment.get2,parameters:"_resourceId=".concat(u,"&_seqNo=").concat(v,"&_recordId=").concat(a)}),l=(null==e?void 0:e.record)||{};S.setValues({...l,resourceId:u}),F.current={...l,resourceId:u},w((null==l?void 0:l.fileName)?"".concat(l.fileName,"?t=").concat(Date.now()):"");return}let l=R||u,r=E||a;if(!r)return;let t=await N({extension:d.r.Attachment.get,parameters:"_resourceId=".concat(l,"&_seqNo=").concat(v,"&_recordId=").concat(r)}),n=(null==t?void 0:t.record)||{};S.setValues({...n,resourceId:l}),F.current={...n,resourceId:l},w((null==n?void 0:n.url)?"".concat(n.url,"?t=").concat(Date.now()):"")};return(0,n.useEffect)(()=>{E||p?L():k()},[E,p]),(0,r.jsxs)(t.Z,{className:m().container,children:[(0,r.jsx)(t.Z,{className:m().previewBox,style:{width:"100%",maxWidth:(b||f)*q,height:(g||y)*q},onClick:()=>{I||Z.current.click()},children:(0,r.jsx)("img",{src:P||l(68802).default.src,alt:"",className:m().previewImage,style:{border:x?"2px solid #F44336":"none"},onError:e=>{e.currentTarget.src=l(68802).default.src}})}),(0,r.jsxs)(t.Z,{className:m().bottomSection,children:[(0,r.jsx)("input",{hidden:!0,type:"file",accept:"image/png, image/jpeg, image/jpg",ref:Z,onChange:e=>{var a,l;let r=null==e?void 0:null===(l=e.target)||void 0===l?void 0:null===(a=l.files)||void 0===a?void 0:a[0];if(!r)return;if(Math.round(r.size/1024)>500){alert(A.MaxFileSize);return}let t=new Date(r.lastModifiedDate),n="".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear());S.setValues({resourceId:u,recordId:p,seqNo:0,fileName:r.name,folderId:null,folderName:null,date:n,url:null,file:r});let i=new FileReader;D.current=i,i.onloadend=e=>w(e.target.result),i.readAsDataURL(r)},disabled:I}),(0,r.jsx)(h.Z,{onClick:k,image:"clear.png",tooltipText:A.Clear,color:"#F44336",border:"none",disabled:I})]})]})});a.Z=x},29326:function(e,a,l){"use strict";var r=l(52322);l(2784);var t=l(23925),n=l(13980),i=l.n(n),s=l(95291),d=l.n(s),o=l(65947);let c=e=>{var a,l,n;let{children:i,value:s,index:c,maxAccess:u,...m}=e,h="".concat(e.name||"tab",".").concat(c),{accessLevel:x}=null!==(n=(null!==(l=null==u?void 0:null===(a=u.record)||void 0===a?void 0:a.controls)&&void 0!==l?l:[]).find(e=>e.controlId===h))&&void 0!==n?n:{accessLevel:0};if(x===o.A1)return null;let v=s===c;return(0,r.jsx)(t.Z,{role:"tabpanel",hidden:!v,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(d().tabPanel," ").concat(v?d().active:d().hidden),...m,children:i})};c.propTypes={children:i().node,index:i().number.isRequired,value:i().number.isRequired},a.Z=c},9522:function(e,a,l){"use strict";l.d(a,{Y:function(){return m}});var r=l(52322),t=l(23925),n=l(54582),i=l(68696),s=l(44258),d=l(2784),o=l(99266),c=l(52614),u=l.n(c);let m=e=>{var a,l,c,m,h;let{tabs:x,activeTab:v,setActiveTab:p,maxAccess:f,name:y="tab"}=e,b=(null==f?void 0:null===(l=f.record)||void 0===l?void 0:null===(a=l.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(y,".")))}).map(e=>e.controlId.split(".")[1]))||[],g=null==x?void 0:null===(c=x.map((e,a)=>({...e,id:a})))||void 0===c?void 0:c.filter((e,a)=>!b.includes(String(a))),I=null===(m=g[v])||void 0===m?void 0:m.id,j=null===(h=g[v])||void 0===h?void 0:h.disabled;return(0,d.useEffect)(()=>{I>=0&&!j&&v!=I&&p(I)},[]),(0,r.jsx)(t.Z,{className:u().tabsContainer,children:(0,r.jsx)(t.Z,{className:u().tabsWrapper,children:(0,r.jsx)(n.Z,{value:v,onChange:(e,a)=>p(a),variant:"scrollable",scrollButtons:g.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==g?void 0:g.map(e=>(0,r.jsx)(i.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,r.jsxs)(t.Z,{display:"flex",alignItems:"center",children:[(0,r.jsx)("span",{children:e.label}),e.id===v&&(null==e?void 0:e.onRefetch)&&(0,r.jsx)(s.Z,{size:"small",className:u().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,r.jsx)(o.Z,{className:u().refreshIcon})})]})},e.id))})})})}},81119:function(e){e.exports={radioGroup:"CustomRadioButtonGroup_radioGroup__nJ_DE",radio:"CustomRadioButtonGroup_radio__n8LPY"}},10498:function(e){e.exports={container:"ImageUpload_container__I2BWx",previewBox:"ImageUpload_previewBox__JogCN",previewImage:"ImageUpload_previewImage___eqQX",bottomSection:"ImageUpload_bottomSection__jpph8"}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=57338)}),_N_E=e.O()}]);