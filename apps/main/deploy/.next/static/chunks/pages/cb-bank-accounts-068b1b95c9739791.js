(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65478],{11397:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cb-bank-accounts",function(){return n(78338)}])},78338:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return F}});var r=n(52322),c=n(2784),l=n(62202),t=n(69387),s=n(27723),u=n(65950),d=n(2119),o=n(60218),i=n(48601),m=n(82737),h=n(26612),x=n(38449),f=n(8661),I=n(27423),N=n(80983),p=n(91406),y=n(5088),v=n(84100),b=n(25870),A=n(31389),k=n(62362),C=n(19473);function g(e){let{labels:a,maxAccess:n,recordId:t,invalidate:s}=e,{getRequest:g,postRequest:_}=(0,c.useContext)(u.$),{platformLabels:Z}=(0,c.useContext)(C.l),{formik:j}=(0,N.c)({initialValues:{recordId:t||null,name:null,accountNo:null,currencyId:null,activeStatus:null,groupId:null,accountId:null,accountName:null,IBAN:null,bankId:null,type:1,bankName:null},maxAccess:n,validateOnChange:!0,validationSchema:i.Ry({name:i.Z_().required(),accountNo:i.Z_().required(),currencyId:i.Z_().required(),activeStatus:i.Z_().required(),bankId:i.Z_().required()}),onSubmit:async e=>{let a=await _({extension:d.G.CbBankAccounts.set,record:JSON.stringify(e)});e.recordId||j.setValues({...e,recordId:a.recordId}),s(),l.ZP.success(e.recordId?Z.Edited:Z.Added)}}),F=!!j.values.recordId;return(0,c.useEffect)(()=>{!async function(){if(t){let e=await g({extension:d.G.CbBankAccounts.get,parameters:"_recordId=".concat(t,"&_type=1")});j.setValues(e.record)}}()},[]),(0,r.jsx)(m.Z,{resourceId:h.i.CbBankAccounts,form:j,maxAccess:n,editMode:F,children:(0,r.jsx)(A.R,{children:(0,r.jsx)(k.Q,{children:(0,r.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"name",label:a.name,value:j.values.name,required:!0,maxAccess:n,onChange:j.handleChange,onClear:()=>j.setFieldValue("name",""),error:j.touched.name&&!!j.errors.name})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(p.Z,{name:"accountNo",label:a.accountNo,value:j.values.accountNo,required:!0,maxAccess:n,onChange:j.handleChange,onClear:()=>j.setFieldValue("accountNo",""),error:j.touched.accountNo&&!!j.errors.accountNo})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{endpointId:x.r.Currency.qry,name:"currencyId",label:a.currencyName,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,required:!0,maxAccess:n,onChange:(e,a)=>{j.setFieldValue("currencyId",(null==a?void 0:a.recordId)||null)},error:j.touched.currencyId&&!!j.errors.currencyId})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{datasetId:v.v.ACTIVE_STATUS,name:"activeStatus",label:a.activeStatus,valueField:"key",displayField:"value",values:j.values,required:!0,maxAccess:n,onChange:(e,a)=>{j.setFieldValue("activeStatus",null==a?void 0:a.key)},error:j.touched.activeStatus&&!!j.errors.activeStatus})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{endpointId:d.G.CbCashGroup.qry,name:"groupId",label:a.groupName,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,maxAccess:n,onChange:(e,a)=>{j.setFieldValue("groupId",a?a.recordId:"")},error:j.touched.groupId&&!!j.errors.groupId})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.U,{endpointId:b.H.Account.snapshot,valueField:"recordId",displayField:"name",name:"reference",secondValueShow:"name",label:a.accountName,form:j,firstValue:j.values.accountRef,secondValue:j.values.accountName,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:(e,a)=>{j.setFieldValue("accountId",a?a.recordId:""),j.setFieldValue("accountRef",a?a.reference:""),j.setFieldValue("accountName",a?a.name:"")},errorCheck:"accountId",maxAccess:n})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(p.Z,{name:"IBAN",label:a.IBAN,value:j.values.IBAN,maxAccess:n,onChange:j.handleChange,onClear:()=>j.setFieldValue("IBAN",""),error:j.touched.IBAN&&!!j.errors.IBAN})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{endpointId:d.G.CbBank.qry,name:"bankId",label:a.bankName,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,required:!0,maxAccess:n,onChange:(e,a)=>{j.setFieldValue("bankId",a?a.recordId:""),j.setFieldValue("bankName",a?a.name:"")},error:j.touched.bankId&&!!j.errors.bankId})})]})})})})}var _=n(71987),Z=n(61802),j=n(33625),F=()=>{let{getRequest:e,postRequest:a}=(0,c.useContext)(u.$),{stack:n}=(0,Z.zY)();async function o(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:r=50}=a;return{...await e({extension:d.G.CbBankAccounts.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(r,"&_type=1&_params=")}),_startAt:n}}let i=(0,_.E)({endpointId:d.G.CbBankAccounts.qry}),{query:{data:m},labels:x,filterBy:f,clearFilter:I,paginationParameters:N,refetch:p,access:y}=(0,_.J)({queryFn:o,endpointId:d.G.CbBankAccounts.qry,datasetId:h.i.CbBankAccounts,filter:{filterFn:v}});async function v(a){let{filters:n}=a;return await e({extension:d.G.CbBankAccounts.snapshot,parameters:"_type=1&_filter=".concat(n.qry)})}let b=[{field:"name",headerName:x.name,flex:1},{field:"accountNo",headerName:x.accountNo,flex:1},{field:"bankName",headerName:x.bankName,flex:1},{field:"currencyName",headerName:x.currencyName,flex:1},{field:"IBAN",headerName:x.IBAN,flex:1},{field:"statusName",headerName:x.statusName,flex:1},{field:"accountRef",headerName:x.accountRef,flex:1},{field:"accountName",headerName:x.accountName,flex:1},{field:"groupName",headerName:x.groupName,flex:1}],C=async e=>{await a({extension:d.G.CbBankAccounts.del,record:JSON.stringify(e)}),i(),l.ZP.success("Record Deleted Successfully")};function F(e){n({Component:g,props:{labels:x,recordId:e||null,maxAccess:y,invalidate:i},width:600,height:600,title:x.CbBankAccounts})}return(0,r.jsxs)(A.R,{children:[(0,r.jsx)(j.g,{children:(0,r.jsx)(s.Z,{onAdd:()=>{F()},maxAccess:y,onSearch:e=>{f("qry",e)},onSearchClear:()=>{I("qry")},labels:x,inputSearch:!0,previewReport:h.i.CbBankAccounts})}),(0,r.jsx)(k.Q,{children:(0,r.jsx)(t.Z,{columns:b,gridData:m,rowId:["recordId"],onEdit:e=>{F(null==e?void 0:e.recordId)},onDelete:C,isLoading:!1,pageSize:50,paginationParameters:N,paginationType:"api",maxAccess:y,refetch:p})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=11397)}),_N_E=e.O()}]);