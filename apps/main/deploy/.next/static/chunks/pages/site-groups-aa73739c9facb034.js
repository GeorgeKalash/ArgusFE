(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57132],{90052:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/site-groups",function(){return n(50032)}])},50032:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return I}});var t=n(52322),s=n(2784),a=n(62202),i=n(69387),c=n(27723),o=n(65950),d=n(26612),l=n(61802),u=n(71987),f=n(65215),h=n(60218),p=n(48601),x=n(82737),m=n(80983),S=n(5088),C=n(31389),_=n(62362),g=n(19473);function w(e){let{labels:r,recordId:n,maxAccess:i}=e,{platformLabels:c}=(0,s.useContext)(g.l),{getRequest:l,postRequest:w}=(0,s.useContext)(o.$),y=(0,u.E)({endpointId:f.$.SiteGroups.qry}),{formik:I}=(0,m.c)({initialValues:{recordId:null,name:"",reference:""},maxAccess:i,validateOnChange:!0,validationSchema:p.Ry({name:p.Z_().required(),reference:p.Z_().required()}),onSubmit:async e=>{let r=await w({extension:f.$.SiteGroups.set,record:JSON.stringify(e)});e.recordId?a.ZP.success(c.Edited):(a.ZP.success(c.Added),I.setFieldValue("recordId",r.recordId)),y()}}),j=!!I.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(n){let e=await l({extension:f.$.SiteGroups.get,parameters:"_recordId=".concat(n)});I.setValues(e.record)}}()},[]),(0,t.jsx)(x.Z,{resourceId:d.i.SiteGroups,form:I,height:400,maxAccess:i,editMode:j,children:(0,t.jsx)(C.R,{children:(0,t.jsx)(_.Q,{children:(0,t.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(S.Z,{name:"reference",label:r.reference,value:I.values.reference,required:!0,maxAccess:i,onChange:I.handleChange,onClear:()=>I.setFieldValue("reference",""),error:I.touched.reference&&I.errors.reference})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(S.Z,{name:"name",label:r.name,value:I.values.name,required:!0,maxAccess:i,onChange:I.handleChange,onClear:()=>I.setFieldValue("name",""),error:I.touched.name&&I.errors.name})})]})})})})}var y=n(33625),I=()=>{let{getRequest:e,postRequest:r}=(0,s.useContext)(o.$),{platformLabels:n}=(0,s.useContext)(g.l),{stack:h}=(0,l.zY)();async function p(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50}=r;return await e({extension:f.$.SiteGroups.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t,"&_filter=")})}let{query:{data:x},labels:m,access:S,search:I,clear:j,refetch:Z}=(0,u.J)({queryFn:p,endpointId:f.$.SiteGroups.qry,datasetId:d.i.SiteGroups,search:{endpointId:f.$.SiteGroups.qry,searchFn:q}});async function q(r){let{qry:n}=r,t=await e({extension:f.$.SiteGroups.qry,parameters:"_filter=".concat(n)}),s=t.list.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.reference&&e.reference.toLowerCase().includes(n.toLowerCase()));return{...t,list:s}}let G=(0,u.E)({endpointId:f.$.SiteGroups.qry}),v=[{field:"reference",headerName:m.reference,flex:1},{field:"name",headerName:m.name,flex:1}],$=async e=>{await r({extension:f.$.SiteGroups.del,record:JSON.stringify(e)}),G(),a.ZP.success(n.Deleted)};function E(e){h({Component:w,props:{labels:m,recordId:e,maxAccess:S},width:500,height:300,title:m.siteGroup})}return(0,t.jsxs)(C.R,{children:[(0,t.jsx)(y.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{E()},maxAccess:S,labels:m,inputSearch:!0,onSearch:I,onSearchClear:j})}),(0,t.jsx)(_.Q,{children:(0,t.jsx)(i.Z,{columns:v,gridData:x,rowId:["recordId"],onEdit:e=>{E(null==e?void 0:e.recordId)},refetch:Z,onDelete:$,maxAccess:S,pageSize:50,paginationType:"client"})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=90052)}),_N_E=e.O()}]);