(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88711],{92640:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auto-post-excl",function(){return r(3349)}])},3349:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(52322),n=r(2784),a=r(62202),o=r(69387),d=r(27723),l=r(65950),c=r(88469),i=r(71987),u=r(26612),p=r(31389),m=r(33625),y=r(62362),g=r(61802),I=r(19473),h=r(60218),x=r(48601),q=r(82737),C=r(5088),O=r(80983),f=r(91406),R=r(8661),A=r(84100),P=r(27423),S=r(53621),v=r(38449),F=r(75991),W=r(19689);function E(e){var t;let{labels:r,maxAccess:d,recordId:m}=e,{getRequest:g,postRequest:E}=(0,n.useContext)(l.$),{platformLabels:N}=(0,n.useContext)(I.l),w=(0,i.E)({endpointId:c.N.AutoPostExclusion.qry}),{formik:D}=(0,O.c)({initialValues:{recordId:null,name:"",functionId:"",corId:"",currencyId:"",countryId:"",dispersalType:"",minAmount:"",maxAmount:"",isInactive:!1,plantGroupId:"",cgId:"",items:[{checked:!1,exclusionId:0,plantRef:"",plantName:""}]},validateOnChange:!0,validationSchema:x.Ry({name:x.Z_().required(),functionId:x.Z_().required(),minAmount:x.Rx().nullable().transform((e,t)=>""===String(t).trim()?null:e).test("is-less-than-max","Min Amount should be less than or equal to Max Amount",function(e){let{maxAmount:t}=this.parent;return null===e||null===t||!(e>t)||(this.createError({path:"maxAmount",message:"Max Amount should be greater than or equal to Min Amount"}),!1)}),maxAmount:x.Rx().nullable().transform((e,t)=>""===String(t).trim()?null:e).test("is-greater-than-min","Max Amount should be greater than or equal to Min Amount",function(e){let{minAmount:t}=this.parent;return null===e||null===t||!(e<t)||(this.createError({path:"minAmount",message:"Min Amount should be less than or equal to Max Amount"}),!1)})}),onSubmit:async e=>{let t={header:{recordId:e.recordId,name:e.name,functionId:e.functionId,corId:e.corId,currencyId:e.currencyId,countryId:e.countryId,dispersalType:e.dispersalType,minAmount:e.minAmount,maxAmount:e.maxAmount,isInactive:e.isInactive,plantGroupId:e.plantGroupId,cgId:e.cgId,plantId:e.plantId},items:e.items.filter(e=>e.checked).map(e=>({exclusionId:e.exclusionId,plantId:e.plantId}))},r=await E({extension:c.N.AutoPostExclusion.set2,record:JSON.stringify(t)});e.recordId?a.ZP.success(N.Edited):(a.ZP.success(N.Added),D.setFieldValue("recordId",r.recordId)),w()}}),T=!!D.values.recordId;(0,n.useEffect)(()=>{!async function(){let e=await g({extension:v.r.Plant.qry,parameters:""});if(m){let t=await g({extension:c.N.AutoPostExclusion.get2,parameters:"_recordId=".concat(m)}),r=e.list.map((e,r)=>({checked:!!t.record.items.find(t=>t.plantId===e.recordId),exclusionId:m||0,plantRef:e.reference,plantName:e.name,plantId:e.recordId}));D.setValues({...D.values,recordId:t.record.header.recordId,name:t.record.header.name,functionId:t.record.header.functionId,corId:t.record.header.corId,corRef:t.record.header.corRef,corName:t.record.header.corId,currencyId:t.record.header.currencyId,countryId:t.record.header.countryId,dispersalType:t.record.header.dispersalType,minAmount:t.record.header.minAmount,maxAmount:t.record.header.maxAmount,isInactive:t.record.header.isInactive,plantGroupId:t.record.header.plantGroupId,cgId:t.record.header.cgId,plantId:t.record.header.plantId,items:r})}else{var t;let r=null==e?void 0:null===(t=e.list)||void 0===t?void 0:t.map((e,t)=>({checked:!1,exclusionId:m||0,plantRef:e.reference,plantName:e.name,plantId:e.recordId}));D.setValues({...D.values,items:r})}}()},[]);let G=[{field:"plantRef",flex:1,headerName:r.plantRef},{field:"plantName",flex:1,headerName:r.plantName}];return(0,s.jsx)(q.Z,{resourceId:u.i.AutoPostExclusion,form:D,maxAccess:d,editMode:T,children:(0,s.jsx)(p.R,{children:(0,s.jsx)(y.Q,{children:(0,s.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(h.ZP,{item:!0,xs:6,children:(0,s.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(C.Z,{name:"name",label:r.name,value:D.values.name,required:!0,maxAccess:d,maxLength:"30",onChange:D.handleChange,onClear:()=>D.setFieldValue("name",""),error:D.touched.name&&!!D.errors.name})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(R.Z,{datasetId:A.v.RT_Function,name:"functionId",label:r.function,required:!0,valueField:"key",displayField:"value",values:D.values,maxAccess:d,onClear:()=>D.setFieldValue("functionId",""),onChange:(e,t)=>{D.setFieldValue("functionId",(null==t?void 0:t.key)||"")},error:D.touched.functionId&&!!D.errors.functionId})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(P.U,{endpointId:S.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",label:r.corName,form:D,displayFieldWidth:2,valueShow:"corRef",readOnly:T,secondValueShow:"corName",maxAccess:d,onChange:(e,t)=>{D.setFieldValue("corId",t?t.recordId:""),D.setFieldValue("corName",t?t.name:""),D.setFieldValue("corRef",t?t.reference:"")}})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(R.Z,{endpointId:v.r.Currency.qry,name:"currencyId",label:r.currencyName,valueField:"recordId",readOnly:T,displayField:["reference","name","flName"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],values:D.values,maxAccess:d,onChange:(e,t)=>{D.setFieldValue("currencyId",(null==t?void 0:t.recordId)||null)},error:D.touched.currencyId&&!!D.errors.currencyId})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(R.Z,{name:"dispersalType",label:r.dispersal,datasetId:A.v.RT_Dispersal_Type,valueField:"key",readOnly:T,displayField:"value",values:D.values,onChange:(e,t)=>{D.setFieldValue("dispersalType",null==t?void 0:t.key)}})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(R.Z,{endpointId:v.r.Country.qry,name:"countryId",label:r.country,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],readOnly:T,values:D.values,valueField:"recordId",displayField:["reference","name","flName"],maxAccess:d,onChange:(e,t)=>{D.setFieldValue("countryId",null==t?void 0:t.recordId)},error:D.touched.countryId&&!!D.errors.countryId})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{name:"minAmount",label:r.minAmount,value:D.values.minAmount,maxAccess:d,onChange:e=>D.setFieldValue("minAmount",e.target.value),onClear:()=>D.setFieldValue("minAmount",""),error:D.touched.minAmount&&!!D.errors.minAmount,decimalScale:2})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{name:"maxAmount",label:r.maxAmount,value:D.values.maxAmount,maxAccess:d,onChange:e=>D.setFieldValue("maxAmount",e.target.value),onClear:()=>D.setFieldValue("maxAmount",""),error:D.touched.maxAmount&&!!D.errors.maxAmount,decimalScale:2})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(R.Z,{endpointId:v.r.PlantGroup.qry,name:"plantGroupId",label:r.plantGroup,readOnly:T,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,valueField:"recordId",displayField:["reference","name"],maxAccess:d,onChange:(e,t)=>{D.setFieldValue("plantGroupId",null==t?void 0:t.recordId)},error:D.touched.plantGroupId&&!!D.errors.plantGroupId})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(R.Z,{endpointId:S.d.CorrespondentGroup.qry,name:"cgId",readOnly:T,label:r.correspondentGroup,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,valueField:"recordId",displayField:"name",maxAccess:d,onChange:(e,t)=>{D.setFieldValue("cgId",null==t?void 0:t.recordId)}})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(W.Z,{name:"isInactive",value:null===(t=D.values)||void 0===t?void 0:t.isInactive,onChange:e=>D.setFieldValue("isInactive",e.target.checked),label:r.isInactive,maxAccess:d})})]})}),(0,s.jsx)(h.ZP,{item:!0,xs:6,sx:{display:"flex",flex:1},children:(0,s.jsx)(F.Z,{sx:{flex:1},title:r.plant,children:(0,s.jsx)(o.Z,{columns:G,gridData:{list:D.values.items},rowId:["plantId"],pageSize:50,pagination:!1,paginationType:"client",isLoading:!1,maxAccess:d,showCheckboxColumn:!0})})})]})})})})}var N=()=>{let{getRequest:e,postRequest:t}=(0,n.useContext)(l.$),{platformLabels:r}=(0,n.useContext)(I.l);async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:s=50}=t;return{...await e({extension:c.N.AutoPostExclusion.qry,parameters:"_startAt=".concat(r,"&_pageSize=").concat(s,"&filter=")}),_startAt:r}}let{stack:x}=(0,g.zY)(),{query:{data:q},labels:C,refetch:O,paginationParameters:f,access:R}=(0,i.J)({queryFn:h,endpointId:c.N.AutoPostExclusion.qry,datasetId:u.i.AutoPostExclusion}),A=(0,i.E)({endpointId:c.N.AutoPostExclusion.qry}),P=[{field:"name",headerName:C.name,flex:1},{field:"functionName",headerName:C.function,flex:1},{field:"corName",headerName:C.corName,flex:1},{field:"currencyName",headerName:C.currencyName,flex:1},{field:"dispersalTypeName",headerName:C.dispersal,flex:1},{field:"plantGroupName",headerName:C.plantGroup,flex:1},{field:"cgName",headerName:C.correspondentGroup,flex:1}];function S(e){x({Component:E,props:{labels:C,recordId:e,maxAccess:R},width:1200,height:650,title:C.autoPostExclusion})}let v=async e=>{await t({extension:c.N.AutoPostExclusion.del,record:JSON.stringify(e)}),A(),a.ZP.success(r.Deleted)};return(0,s.jsxs)(p.R,{children:[(0,s.jsx)(m.g,{children:(0,s.jsx)(d.Z,{onAdd:()=>{S()},maxAccess:R})}),(0,s.jsx)(y.Q,{children:(0,s.jsx)(o.Z,{columns:P,gridData:q,rowId:["recordId"],onEdit:e=>{S(null==e?void 0:e.recordId)},onDelete:v,isLoading:!1,refetch:O,pageSize:50,paginationParameters:f,maxAccess:R,paginationType:"api"})})]})}},88469:function(e,t,r){"use strict";r.d(t,{N:function(){return n}});let s="RTOW.asmx/",n={Country:{qry:s+"qryPCO2"},DispersalType:{qry:s+"qryPMO2"},Currency:{qry:s+"qryPMO3"},Agent:{qry:s+"qryPDA2"},ProductDispersalEngine:{qry:s+"qryPDE"},OutwardsCash:{qry:s+"qryOWC"},OutwardsOrder:{qry:s+"qryOWO",qry2:s+"qryOWO2",page:s+"pageOWO",get:s+"getOWO",get2:s+"get2OWO",set:s+"setOWO",set2:s+"set2OWO",del:s+"delOWO",close:s+"closeOWO",reopen:s+"reopenOWO",post:s+"postOWO",snapshot:s+"snapshotOWO"},OutwardsRequest:{get:s+"getOWX"},InwardSettlement:{qry:s+"qryIWS",page:s+"pageIWS",get:s+"getIWS",set:s+"setIWS",del:s+"delIWS",close:s+"closeIWS",reopen:s+"reopenIWS",post:s+"postIWS",snapshot:s+"snapshotIWS"},InwardsTransfer:{get:s+"getIW",set:s+"setIW",del:s+"delIW",snapshot:s+"snapshotIW",snapshot2:s+"snapshotIW2",close:s+"closeIW",reopen:s+"reopenIW",post:s+"postIW",open:s+"openIW"},InwardGLInformation:{get:s+"getIWI"},Beneficiary:{qry:s+"qryBEN",qry2:s+"qryBEN2",qry3:s+"qryBEN3",get:s+"getBEN",del:s+"delBEN",snapshot:s+"snapshotBEN",snapshot2:s+"snapshotBEN2 "},BeneficiaryBank:{qry:s+"qryBEB",get:s+"getBEB",set:s+"set2BEB",del:s+"delBEB"},BeneficiaryCash:{qry:s+"qryBEC",get:s+"getBEC",set:s+"set2BEC",del:s+"delBEC"},FeeSchedule:{qry:s+"qryFSC",page:s+"pageFSC",snapshot:s+"snapshotFSC",get:s+"getFSC",set:s+"setFSC",del:s+"delFSC"},FeeScheduleDetail:{qry:s+"qryFSD",get:s+"getFSD",set2:s+"set2FSD",del:s+"delFSD"},FeeScheduleOutwards:{qry:s+"qryFSO",page:s+"pageFSO",get:s+"getFSO",set:s+"setFSO",del:s+"delFSO"},FeeScheduleInwards:{qry:s+"qryFSI",page:s+"pageFSI",get:s+"getFSI",set:s+"setFSI",del:s+"delFSI"},OutwardGLInformation:{get:s+"getOWI"},AutoPostExclusion:{qry:s+"qryAPX",get:s+"getAPX",set:s+"setAPX",del:s+"delAPX",get2:s+"get2APX",set2:s+"set2APX"},OutwardsModification:{qry:s+"qryOWM",page:s+"pageOWM",snapshot:s+"snapshotOWM",get:s+"getOWM",set2:s+"set2OWM",del:s+"delOWM",post:s+"postOWM",reopen:s+"reopenOWM",close:s+"closeOWM"},Postoutwards:{qry:s+"qryOWT3",post2:s+"post2OWT"},OutwardsReturn:{page:s+"pageOWR",qry2:s+"qryOWR2",get:s+"getOWR",set:s+"setOWR",close:s+"closeOWR",reopen:s+"reopenOWR",post:s+"postOWR",snapshot:s+"snapshotOWR"},CorrespondentOutwards:{qry:s+"qryACE",set:s+"setACE"},ReceiptVouchers:{qry:s+"qryRV",page:s+"pageRV",get:s+"getRV",set:s+"setRV",set2:s+"set2RV",del:s+"delRV",post:s+"postRV",close:s+"closeRV",reopen:s+"reopenRV",snapshot:s+"snapshotRV"},OutwardsTransfer:{get:s+"getOWT",snapshot:s+"snapshotOWT",qry2:s+"qryOWT2"},UnassignedCountry:{unassigned:s+"unassignedCOU"},UnassignedCurrency:{unassigned:s+"unassignedCU"},UnassignedDispersalType:{unassigned:s+"unassignedDT"},AssignedCountry:{assigned:s+"assignedCOU"},AssignedCurrency:{assigned:s+"assignedCU"},AssignedDispersalType:{assigned:s+"assignedDT"},OutwardReturnSettlement:{qry:s+"qryORS",page:s+"pageORS",get:s+"getORS",get2:s+"get2ORS",set:s+"setORS",set2:s+"set2ORS",del:s+"delORS",post:s+"postORS",close:s+"closeORS",reopen:s+"reopenORS",snapshot:s+"snapshotORS"},OutwardReturnReason:{page:s+"pageOWRR",snapshot:s+"snapshotOWRR",qry:s+"qryOWRR",get:s+"getOWRR",set:s+"setOWRR",del:s+"delOWRR"}}},53621:function(e,t,r){"use strict";r.d(t,{d:function(){return n}});let s="RTSET.asmx/",n={Interface:{qry:s+"qryITF",page:s+"pageITF",get:s+"getITF",set:s+"setITF",del:s+"delITF"},ProductMaster:{qry:s+"qryPRO",page:s+"pagePRO",get:s+"getPRO",set:s+"setPRO",del:s+"delPRO",snapshot:s+"snapshotPRO"},ProductCountries:{qry:s+"qryPCO",set2:s+"set2PCO"},ProductMonetaries:{qry:s+"qryPMO",set2:s+"set2PMO"},ProductDispersal:{qry:s+"qryPDI",get:s+"getPDI",set:s+"setPDI",del:s+"delPDI"},ProductSchedules:{qry:s+"qryPSC",set2:s+"set2PSC"},ProductScheduleRanges:{qry:s+"qryPSR",set2:s+"set2PSR"},ProductScheduleFees:{qry:s+"qryPSF",set2:s+"set2PSF"},ProductDispersalAgents:{qry:s+"qryPDA",set2:s+"set2PDA"},Correspondent:{page:s+"pageCOR",qry:s+"qryCOR",qry2:s+"qry2COR",get:s+"getCOR",set:s+"setCOR",del:s+"delCOR",snapshot:s+"snapshotCOR"},CorrespondentCountry:{qry:s+"qryCCO",get:s+"getCCO",set2:s+"set2CCO",del:s+"delCCO"},CorrespondentCurrency:{qry:s+"qryCCU",get:s+"getCCU",set2:s+"set2CCU",del:s+"delCCU"},CorrespondentAgents:{qry:s+"qryAGT",page:s+"pageAGT",get:s+"getAGT",set:s+"setAGT",del:s+"delAGT"},CorrespondentAgentBranches:{qry:s+"qryABR",page:s+"pageABR",get:s+"getABR",set:s+"setABR",del:s+"delABR"},CorrespondentExchangeMap:{qry:s+"qryEXC",set2:s+"set2EXC"},CurrencyExchangeMap:{qry:s+"qryEXG",set2:s+"set2EXG"},CorrespondentExchangeBuyMap:{qry:s+"qryEXB",set2:s+"set2EXB"},ExchangeRates:{get:s+"getEXB",qry:s+"qryEXG2",set2:s+"set2EXB"},RtDefault:{qry:s+"qryDE",set2:s+"set2DE"},Profession:{qry:s+"qryPFN",page:s+"pagePFN",get:s+"getPFN",set:s+"setPFN",del:s+"delPFN",snapshot:s+"snapshotPFN"},ClientIndividual:{qry:s+"qryCLI"},SalaryRange:{qry:s+"qrySRA",page:s+"pageSRA",get:s+"getSRA",set:s+"setSRA",del:s+"delSRA"},SourceOfIncome:{qry:s+"qrySI",page:s+"pageSI",snapshot:s+"snapshotSI",get:s+"getSI",set:s+"setSI",del:s+"delSI"},CorrespondentControl:{qry:s+"qryCCL",set:s+"set2CCL"},InterfaceMaps:{qry:s+"qryIFM",get:s+"getIFM",set2:s+"set2IFM"},SourceOfIncomeType:{qry:s+"qrySIT",snapshot:s+"snapshotSIT",page:s+"pageSIT",get:s+"getSIT",set:s+"setSIT",del:s+"delSIT"},ProfessionGroups:{qry:s+"qryPFG",page:s+"pagePFG",snapshot:s+"snapshotPFG",get:s+"getPFG",set:s+"setPFG",del:s+"delPFG"},CorrespondentGroup:{qry:s+"qryCGP",page:s+"pageCGP",get:s+"getCGP",set:s+"setCGP",del:s+"delCGP"},ExtraIncome:{qry:s+"qryEI",get:s+"getEI",del:s+"delEI",page:s+"pageEI",snapshot:s+"snapshotEI",set:s+"setEI"},CountryRisk:{page:s+"pageCOU",get:s+"getCOU",set:s+"setCOU",del:s+"delCOU"},CorDispControl:{qry:s+"qryCDC",set2:s+"set2CDC"},CorrespondentDispersal:{qry:s+"qryCDM",get:s+"getCDM",del:s+"delCDM",set2:s+"set2CDM"},CorrespondentDispersalRate:{qry:s+"qryCDR",set2:s+"set2CDR"}}},75991:function(e,t,r){"use strict";var s=r(52322),n=r(60218),a=r(76385);t.Z=e=>{let{children:t,title:r,form:o=!1,...d}=e;return(0,s.jsxs)(n.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:r?{xs:.75,sm:1,md:1.25}:0,p:o?0:"clamp(8px, 0.8vw, 14px)",pt:o?0:r?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...d.sx},children:[!!r&&(0,s.jsx)(a.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:r}),t]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=92640)}),_N_E=e.O()}]);