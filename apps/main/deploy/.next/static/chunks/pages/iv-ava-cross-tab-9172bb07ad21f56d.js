(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23618],{37299:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-ava-cross-tab",function(){return a(2894)}])},64581:function(e,t){"use strict";t.Z={src:"/_next/static/media/imgSerials.d1ee59bb.png",height:17,width:23,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAIVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt0UjBAAAAC3RSTlMCZzsmQ6RbWbaSTwNdgTwAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVHicY2BiZ2BgYOBiZmBmYmRjZGRhYGBg4eBkZWVDYjAzMbKDpWCKARB/AJwjPQgCAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6}},4831:function(e,t){"use strict";t.Z={src:"/_next/static/media/lot.bca31410.png",height:19,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAKlBMVEVMaXEREBARDw8TEhIPDw8LCwsPDQ4RDg4SEA8SEBAPDQ0QEBASEBATERJjgqF5AAAADnRSTlMAcEkZIwlago8+NmagwZFCgWsAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA4SURBVHicFcbHEcAgEACxvRzA/bfrQS+By4gDhCK5L3IqKyDd6+vAh1FTw5Ttvga5ekUMrOtoxg8kgwEghNgcNAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},2894:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var i=a(52322),r=a(2784),d=a(69387),l=a(65950),n=a(26612),A=a(61802),o=a(71987),s=a(33625),u=a(31389),c=a(62362),h=a(36908),m=a(65215),f=e=>{let{labels:t,itemId:a}=e,{getRequest:A}=(0,r.useContext)(l.$),[s,h]=(0,r.useState)([]);async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:i=50}=e,r=await A({extension:m.$.AvailabilitySerial.page,parameters:"_itemId=".concat(a,"&_siteId=0&_srlNo=0&_startAt=").concat(t,"&_pageSize=").concat(i)});return h({...r,_startAt:t}),{...r,_startAt:t}}let{refetch:g,paginationParameters:p}=(0,o.J)({datasetId:n.i.AvailabilitiesCrossTab,queryFn:f,endpointId:m.$.AvailabilitySerial.page});(0,r.useEffect)(()=>{h([]),g()},[a]);let v=[{field:"srlNo",headerName:t.serialNo,flex:1},{field:"weight",headerName:t.weight,flex:1,type:"number"},{field:"siteRef",headerName:t.site,flex:1}];return(0,i.jsx)(u.R,{children:(0,i.jsx)(c.Q,{children:(0,i.jsx)(d.Z,{columns:v,gridData:s,rowId:["srlNo"],isLoading:!0,pageSize:50,paginationType:"api",paginationParameters:p,refetch:g,name:"avaSerial"})})})},g=a(64581),p=a(4831),v=a(23925),x=a(44258),w=a(96577),N=a.n(w),y=e=>{let{labels:t,categoryId:a,itemId:n,maxAccess:A}=e,{getRequest:o}=(0,r.useContext)(l.$),[s,h]=(0,r.useState)([]);async function f(){h(await o({extension:m.$.AvailabilityLot.qry,parameters:"_itemId=".concat(n,"&_siteId=0")}))}let[g,p]=(0,r.useState)([]);async function v(){let e=[{field:"lotRef",headerName:t.lotNumber,flex:1},{field:"onHand",headerName:t.qtyOnHand,flex:1,type:"number"}];if(a){var i,r,d,l,n,A;let t=await o({extension:m.$.LotCategory.get,parameters:"_recordId=".concat(a)});(null==t?void 0:null===(i=t.record)||void 0===i?void 0:i.udd1)&&e.push({field:"udd1",headerName:t.record.udd1,flex:1,type:"date"}),(null==t?void 0:null===(r=t.record)||void 0===r?void 0:r.udd2)&&e.push({field:"udd2",headerName:t.record.udd2,flex:1,type:"date"}),(null==t?void 0:null===(d=t.record)||void 0===d?void 0:d.udn1)&&e.push({field:"udn1",headerName:t.record.udn1,flex:1}),(null==t?void 0:null===(l=t.record)||void 0===l?void 0:l.udn2)&&e.push({field:"udn2",headerName:t.record.udn2,flex:1}),(null==t?void 0:null===(n=t.record)||void 0===n?void 0:n.udt1)&&e.push({field:"udt1",headerName:t.record.udt1,flex:1}),(null==t?void 0:null===(A=t.record)||void 0===A?void 0:A.udt2)&&e.push({field:"udt2",headerName:t.record.udt2,flex:1})}e.push({field:"siteRef",headerName:t.site,flex:1}),p(e)}return(0,r.useEffect)(()=>{v(),f()},[]),(0,i.jsx)(u.R,{children:(0,i.jsx)(c.Q,{children:(0,i.jsx)(d.Z,{columns:g,gridData:s,rowId:["lotId","siteId"],isLoading:!1,pagination:!1,maxAccess:A,name:"avaLot"})})})},I=a(55010),b=()=>{let{getRequest:e}=(0,r.useContext)(l.$),{stack:t}=(0,A.zY)(),[a,m]=(0,r.useState)([]);async function w(){var t,a;let i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:d=0,_pageSize:l=50,params:n}=r,A=await e({extension:I.P.Report415,parameters:"_startAt=".concat(d,"&_pageSize=").concat(l,"&_params=").concat(n||"","&_properties=")});return A&&(i=B(A.record)),{count:(null==A?void 0:null===(t=A.record)||void 0===t?void 0:t.recordCount)||0,list:(null==A?void 0:null===(a=A.record)||void 0===a?void 0:a.recordCount)?i:[],_startAt:d}}let{query:{data:b},labels:R,paginationParameters:_,refetch:E,access:C,filterBy:S}=(0,o.J)({queryFn:w,endpointId:I.P.Report415,datasetId:n.i.AvailabilitiesCrossTab,filter:{filterFn:D}}),B=e=>{let{availabilities:t,usedSites:a}=e;a.sort(),k(a);let i=new Set,r=[];return t.forEach(e=>{if(i.has(e.sku))return;i.add(e.sku);let d={sku:e.sku,itemName:e.itemName,itemId:e.itemId,categoryId:e.lotCategoryId,trackBy:e.trackBy},l=0;a.forEach(a=>{let i=t.find(t=>t.sku===e.sku&&t.siteName===a);d[a]=i?i.qty:0,l+=d[a]}),d.total=parseFloat(l).toFixed(2),r.push(d)}),r},k=e=>{let t=[{field:"sku",headerName:R.sku,width:250},{field:"itemName",headerName:R.itemName,width:350},{field:"total",headerName:R.total,type:"number",width:210}];e.forEach(a=>{t.push({field:a,headerName:a,width:e.length<=8?null:130,flex:e.length<=8?1:null,type:"number"})}),m(t)};async function D(e){let{filters:t,pagination:a}=e;return w({_startAt:(null==t?void 0:t.params)?0:a._startAt,params:null==t?void 0:t.params})}let j=e=>{t({Component:f,props:{labels:R,itemId:e.itemId},width:900,height:600,title:R.serialNo})},Z=e=>{t({Component:y,props:{labels:R,categoryId:e.categoryId,itemId:e.itemId,maxAccess:C},width:1150,height:450,title:R.lotAva})},T=[...a,{field:"trackBy",headerName:"S/L",width:60,cellRenderer:e=>{let{trackBy:t}=e.data;return 1===t||2===t?(0,i.jsx)(v.Z,{sx:{display:"flex",width:"100%",justifyContent:"center"},children:(0,i.jsx)(x.Z,{size:"small",onClick:()=>1===t?j(e.data):Z(e.data),children:(0,i.jsx)(N(),{src:1===t?g.Z:p.Z,width:1===t?25:18,height:18,alt:1===t?"Serial":"Lot"})})}):null}}];return(0,i.jsxs)(u.R,{children:[(0,i.jsx)(s.g,{children:(0,i.jsx)(h.Z,{hasSearch:!1,maxAccess:C,filterBy:S,reportName:"IV415"})}),(0,i.jsx)(c.Q,{children:(0,i.jsx)(d.Z,{columns:T,gridData:b,rowId:["itemId"],maxAccess:C,refetch:E,pageSize:50,paginationParameters:_,paginationType:"api",name:"avaCrossTable"})})]})}},55010:function(e,t,a){"use strict";a.d(t,{P:function(){return r}});let i="RG.IV.asmx/",r={Report403:i+"IV403_p",Report408:i+"IV408_p",Report451:i+"IV451",Report415:i+"IV415b"}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=37299)}),_N_E=e.O()}]);