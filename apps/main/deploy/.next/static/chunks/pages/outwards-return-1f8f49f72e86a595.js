(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60612],{79301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/outwards-return",function(){return r(81228)}])},81228:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var n=r(52322),a=r(2784),l=r(69387),o=r(65950),s=r(71987),c=r(26612),d=r(31389),i=r(33625),u=r(62362),p=r(61802),f=r(19473),m=r(96026),v=r(38449),x=r(1685),y=r(88469),g=r(99090),w=r(7121),h=r(98345),I=r(36908),N=()=>{let{getRequest:e}=(0,a.useContext)(o.$),{platformLabels:t}=(0,a.useContext)(f.l),{stack:r}=(0,m.V)(),{stack:N}=(0,p.zY)();async function _(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:n=50,params:a}=t;return{...await e({extension:y.N.OutwardsReturn.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(n,"&_params=").concat(a||"","&filter=")}),_startAt:r}}async function b(t){let{filters:r,pagination:n}=t;return(null==r?void 0:r.qry)?await e({extension:y.N.OutwardsReturn.snapshot,parameters:"_filter=".concat(r.qry)}):_({_startAt:n._startAt||0,params:null==r?void 0:r.params})}let{query:{data:O},labels:S,paginationParameters:R,filterBy:A,refetch:T,access:k}=(0,s.J)({queryFn:_,endpointId:y.N.OutwardsReturn.page,datasetId:c.i.OutwardsReturn,filter:{filterFn:b}}),D=[{field:"reference",headerName:S.reference,flex:1},{field:"date",headerName:S.date,flex:1,type:"date"},{field:"owt_reference",headerName:S.outwardRef,flex:1},{field:"requestedByName",headerName:S.requestedBy,flex:1},{field:"settlementStatusName",headerName:S.settlementStatus,flex:1},{field:"rsName",headerName:S.rsName,flex:1},{field:"statusName",headerName:S.statusName,flex:1},{field:"wipName",headerName:S.wip,flex:1}],{proxyAction:q}=(0,h.G)({functionId:w.J.OutwardsReturn,action:$,hasDT:!1}),F=async()=>{await q()},E=(0,x.m)("userData").userId,C=async()=>{try{return(await e({extension:v.r.UserDefaults.get,parameters:"_userId=".concat(E,"&_key=plantId")})).record.value}catch(e){return""}};async function j(e,t){let r=await J();N({Component:g.Z,props:{recordId:t,plantId:e,dtId:r}})}async function $(e){let n=await C();""!==n?j(n,e):r({message:t.noDefaultPlant})}let J=async()=>{try{var t;let r=await e({extension:v.r.UserFunction.get,parameters:"_userId=".concat(E,"&_functionId=").concat(w.J.OutwardsReturn)});return null==r?void 0:null===(t=r.record)||void 0===t?void 0:t.dtId}catch(e){return""}};return(0,n.jsxs)(d.R,{children:[(0,n.jsx)(i.g,{children:(0,n.jsx)(I.Z,{onAdd:F,maxAccess:k,labels:S,reportName:"RTOWR",filterBy:A})}),(0,n.jsx)(u.Q,{children:(0,n.jsx)(l.Z,{columns:D,gridData:O,rowId:["recordId"],onEdit:e=>{$(null==e?void 0:e.recordId)},isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:R,refetch:T,maxAccess:k})})]})}},1685:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});let n=e=>{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null}},98345:function(e,t,r){"use strict";r.d(t,{H:function(){return v},G:function(){return m}});var n=r(45300),a=r(2784),l=r(96026),o=r(38449);r(26612);var s=r(65947),c=r(1685);let d=async(e,t,r)=>{try{let n=await e({extension:t,parameters:r});return t.includes("qry")?n:n.record}catch(e){return null}},i=(e,t,r,n)=>{let a=(e=JSON.parse(JSON.stringify(e))).record.controls,l=a.find(e=>"reference"===e.controlId);return l?l.accessLevel=(null==t?void 0:t.mandatory)?s.$7:s.rr:(null==t?void 0:t.mandatory)?a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.mandatory)?s.$7:s.rr}):(null==t?void 0:t.readOnly)?a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.readOnly)?s.rr:s.$7}):a=e.record.controls.filter(e=>"reference"!=e.controlId),r&&a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","dtId"),accessLevel:s.$7}),{...e,record:{...e.record,controls:a}}},u=async(e,t,r)=>{let n,a;switch(r){case"dtId":let l=(0,c.m)("userData"),s=null==l?void 0:l.userId;a="_userId=".concat(s,"&_functionId=").concat(t),n=o.r.UserFunction.get;break;case"glbSysNumberRange":a="_recordId=".concat(t),n=o.r.SystemFunction.get;break;case"DocumentType":a="_dgId=".concat(t,"&_startAt=",0,"&_pageSize=",50),n=o.r.DocumentType.qry;break;case"DcTypNumberRange":a="_recordId=".concat(t),n=o.r.DocumentType.get;break;case"isExternal":a="_recordId=".concat(t),n=o.r.NumberRange.get;break;default:return null}return await d(e,n,a)},p=async function(e){let t,r,n,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,c=!(arguments.length>4)||void 0===arguments[4]||arguments[4],d=arguments.length>5?arguments[5]:void 0,p=void 0===s&&l&&await u(e,l,"dtId"),f=null==p?void 0:p.dtId,m="",v=!0;if(p&&void 0===s||"nraId"===s){if(f){let r=await u(e,f,"DcTypNumberRange");t=null==r?void 0:r.nraId,v=!((null==r?void 0:r.activeStatus)<0),t||(m="Assign the document type to a number range")}if((!f||!v)&&c&&l){var x;let t=await u(e,l,"DocumentType");a=(null==t?void 0:null===(x=t.list)||void 0===x?void 0:x.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===s||void 0===s)&&l){if((!f||f)&&!t||t&&!v){let r=await u(e,l,"glbSysNumberRange");(t=null==r?void 0:r.nraId)&&a&&(a=!1),v=!0}m=t||a?"":"Assign the system Function to a number range"}s>0&&!t&&(t=s),t&&v?(r={readOnly:null==(n=await u(e,t,"isExternal"))||!n.external,mandatory:null!=n&&!!n.external},o&&(o=await i(o,r,a,d))):!t&&o&&(o=await i(o,r,a,d));let y=d?"".concat(d,".reference"):"reference";return{dtId:f,resetReference:null==r?void 0:r.readOnly,dcTypeRequired:a,reference:{fieldName:y,isEmpty:(null==n?void 0:n.external)!==void 0&&(null==n||!n.external)},errorMessage:m,maxAccess:o,selectNraId:s}};var f=r(65950);function m(e){let{functionId:t,action:r,hasDT:n}=e,{getRequest:o}=(0,a.useContext)(f.$),{stack:s}=(0,l.V)();return{proxyAction:async()=>{let e=await p(o,t,"",void 0,n);(null==e?void 0:e.errorMessage)?s({message:null==e?void 0:e.errorMessage}):await r()}}}function v(e){var t;let{functionId:r,access:o,hasDT:s,enabled:c=!0,objectName:d=""}=e,{getRequest:i}=(0,a.useContext)(f.$),{stack:u}=(0,l.V)(),[m,v]=(0,a.useState)(),x=async e=>{let t=await p(i,r,o,e,s,d);if(!t.errorMessage)return t;u({message:null==t?void 0:t.errorMessage})},y=(0,n.a)({retry:!1,staleTime:0,enabled:c,queryKey:[r,m,!!o,c],queryFn:m||"nraId"===m?()=>x(m):()=>x()});return{documentType:y.data,maxAccess:(null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.maxAccess)||o,changeDT(e){v((null==e?void 0:e.nraId)||"nraId")}}}},75991:function(e,t,r){"use strict";var n=r(52322),a=r(60218),l=r(76385);t.Z=e=>{let{children:t,title:r,form:o=!1,...s}=e;return(0,n.jsxs)(a.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:r?{xs:.75,sm:1,md:1.25}:0,p:o?0:"clamp(8px, 0.8vw, 14px)",pt:o?0:r?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...s.sx},children:[!!r&&(0,n.jsx)(l.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:r}),t]})}}},function(e){e.O(0,[92515,2494,36908,99090,49774,92888,40179],function(){return e(e.s=79301)}),_N_E=e.O()}]);