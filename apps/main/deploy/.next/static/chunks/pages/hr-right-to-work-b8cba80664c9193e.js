(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33249],{3658:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-right-to-work",function(){return t(26135)}])},26135:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return F}});var n=t(52322),i=t(2784),a=t(62202),d=t(69387),s=t(27723),l=t(65950),o=t(71987),c=t(26612),u=t(31389),m=t(33625),h=t(62362),x=t(61802),y=t(19473),p=t(38449),f=t(60218),g=t(48601),v=t(82737),I=t(5088),D=t(80983),T=t(8661),q=t(70104),k=t(81579),C=t(89330),R=t(39812);function j(e){var r,t;let{labels:d,maxAccess:s,recordId:m}=e,{getRequest:x,postRequest:j}=(0,i.useContext)(l.$),{platformLabels:F}=(0,i.useContext)(y.l),Z=(0,o.E)({endpointId:p.r.RightToWork.page}),{formik:b}=(0,D.c)({initialValues:{recordId:null,branchId:null,dtId:null,documentRef:"",divisionId:null,remarks:"",expiryDate:null,issueDate:null},maxAccess:s,validationSchema:g.Ry({dtId:g.Rx().required(),documentRef:g.Z_().required(),issueDate:g.hT().required().test(function(e){let{expiryDate:r}=this.parent;return e.getTime()<=(null==r?void 0:r.getTime())}),expiryDate:g.hT().required().test(function(e){let{issueDate:r}=this.parent;return e.getTime()>=(null==r?void 0:r.getTime())})}),onSubmit:async e=>{let r=await j({extension:p.r.RightToWork.set,record:JSON.stringify(e)});a.ZP.success(e.recordId?F.Edited:F.Added),e.recordId||b.setFieldValue("recordId",r.recordId),Z()}}),A=!!b.values.recordId;(0,i.useEffect)(()=>{!async function(){if(m){let e=await x({extension:p.r.RightToWork.get,parameters:"_recordId=".concat(m)});b.setValues({...null==e?void 0:e.record,issueDate:(0,R.a1)(null==e?void 0:e.record.issueDate),expiryDate:(0,R.a1)(null==e?void 0:e.record.expiryDate)})}}()},[]);let N=[{key:"Attachment",condition:!0,onClick:"onClickAttachment",disabled:!A}];return(0,n.jsx)(v.Z,{resourceId:c.i.RightToWork,form:b,actions:N,maxAccess:s,editMode:A,children:(0,n.jsx)(u.R,{children:(0,n.jsx)(h.Q,{children:(0,n.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(T.Z,{endpointId:q.K.BranchFilters.qry,name:"branchId",label:d.branch,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:b.values,maxAccess:s,onChange:(e,r)=>{b.setFieldValue("branchId",(null==r?void 0:r.recordId)||null)},error:b.touched.branchId&&!!b.errors.branchId})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(T.Z,{endpointId:k.r.DocumentType.qry,name:"dtId",readOnly:A,label:d.docType,valueField:"recordId",displayField:"name",values:b.values,maxAccess:s,onChange:(e,r)=>{b.setFieldValue("dtId",(null==r?void 0:r.recordId)||null)},required:!0,error:b.touched.dtId&&!!b.errors.dtId})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(I.Z,{name:"documentRef",label:d.documentRef,value:b.values.documentRef,required:!0,maxAccess:s,maxLength:"20",onChange:b.handleChange,onClear:()=>b.setFieldValue("documentRef",""),error:b.touched.documentRef&&!!b.errors.documentRef})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(I.Z,{name:"remarks",label:d.remarks,value:b.values.remarks,maxLength:"255",maxAccess:s,onChange:b.handleChange,onClear:()=>b.setFieldValue("remarks",null),error:b.touched.remarks&&!!b.errors.remarks})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(C.Z,{name:"expiryDate",label:d.expiryDate,value:null===(r=b.values)||void 0===r?void 0:r.expiryDate,required:!0,onChange:b.setFieldValue,onClear:()=>b.setFieldValue("expiryDate",null),error:b.touched.expiryDate&&!!b.errors.expiryDate,maxAccess:s})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(C.Z,{name:"issueDate",label:d.issueDate,required:!0,value:null===(t=b.values)||void 0===t?void 0:t.issueDate,onChange:b.setFieldValue,onClear:()=>b.setFieldValue("issueDate",""),error:b.touched.issueDate&&!!b.errors.issueDate,maxAccess:s})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(T.Z,{endpointId:q.K.DivisionFilters.qry,name:"divisionId",label:d.division,valueField:"recordId",displayField:"name",maxAccess:s,values:b.values,onChange:(e,r)=>{b.setFieldValue("divisionId",(null==r?void 0:r.recordId)||null)},error:b.touched.divisionId&&!!b.errors.divisionId})})]})})})})}var F=()=>{let{getRequest:e,postRequest:r}=(0,i.useContext)(l.$),{platformLabels:t}=(0,i.useContext)(y.l),{stack:f}=(0,x.zY)();async function g(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:n=50}=r;return{...await e({extension:p.r.RightToWork.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(n,"&_filter=")}),_startAt:t}}let{query:{data:v},labels:I,paginationParameters:D,refetch:T,invalidate:q,access:k}=(0,o.J)({queryFn:g,endpointId:p.r.RightToWork.page,datasetId:c.i.RightToWork}),C=[{field:"dtName",headerName:I.docType,flex:1},{field:"branchName",headerName:I.branch,flex:1},{field:"documentRef",headerName:I.documentRef,flex:1},{field:"remarks",headerName:I.remarks,flex:1},{field:"issueDate",headerName:I.issueDate,flex:1,type:"date"},{field:"expiryDate",headerName:I.expiryDate,flex:1,type:"date"}];function R(e){f({Component:j,props:{labels:I,recordId:e,maxAccess:k},width:500,height:420,title:I.rightToWork})}let F=async e=>{await r({extension:p.r.RightToWork.del,record:JSON.stringify(e)}),a.ZP.success(t.Deleted),q()};return(0,n.jsxs)(u.R,{children:[(0,n.jsx)(m.g,{children:(0,n.jsx)(s.Z,{onAdd:()=>{R()},maxAccess:k})}),(0,n.jsx)(h.Q,{children:(0,n.jsx)(d.Z,{name:"table",columns:C,gridData:v,rowId:["recordId"],onEdit:e=>{R(null==e?void 0:e.recordId)},onDelete:F,pageSize:50,paginationType:"api",paginationParameters:D,refetch:T,maxAccess:k})})]})}},81579:function(e,r,t){"use strict";t.d(r,{r:function(){return i}});let n="AA.asmx/",i={DocumentType:{qry:n+"qryDT"},ProcessNotification:{qry:n+"qryPN",set:n+"set2PN"},AdTemplate:{qry:n+"qryTE",page:n+"pageTE",set:n+"setTE",get:n+"getTE",del:n+"delTE"},TemplateBody:{qry:n+"qryTB",set:n+"setTB",get:n+"getTB",del:n+"delTB"}}},70104:function(e,r,t){"use strict";t.d(r,{K:function(){return i}});let n="CS.asmx/",i={DivisionFilters:{qry:n+"qryDI"},BranchFilters:{qry:n+"qryBR"},CompanyPositions:{qry:n+"qryPO"},DepartmentFilters:{qry:n+"qryDE"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=3658)}),_N_E=e.O()}]);