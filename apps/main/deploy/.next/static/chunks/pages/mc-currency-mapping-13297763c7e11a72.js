(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58146],{17186:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mc-currency-mapping",function(){return n(43307)}])},43307:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return M}});var a=n(52322),c=n(2784),d=n(62202),t=n(69387),l=n(27723),i=n(65950),s=n(1251),u=n(71987),o=n(26612),y=n(31389),p=n(33625),I=n(62362),x=n(61802),m=n(60218),h=n(48601),f=n(82737),g=n(80983),v=n(8661),T=n(38449),_=n(19473);function q(e){let{labels:r,maxAccess:n,record:t,recordId:l}=e,{getRequest:p,postRequest:x}=(0,c.useContext)(i.$),{platformLabels:q}=(0,c.useContext)(_.l),M=(0,u.E)({endpointId:s.q.McExchangeMap.page}),{formik:E}=(0,g.c)({initialValues:{recordId:l||null,currencyId:null,rateTypeId:null,exId:null},maxAccess:n,validateOnChange:!0,validationSchema:h.Ry({currencyId:h.Z_().required(),rateTypeId:h.Z_().required(),exId:h.Z_().required()}),onSubmit:async e=>{try{let r=E.values.currencyId,n=E.values.rateTypeId;await x({extension:s.q.McExchangeMap.set,record:JSON.stringify(e)}),r||n?d.ZP.success(q.Edited):d.ZP.success(q.Added),E.setFieldValue("recordId",String(1e3*e.currencyId+e.rateTypeId)),M()}catch(e){}}}),N=!!E.values.recordId;return(0,c.useEffect)(()=>{!async function(){try{if(t.rateTypeId&&t.currencyId&&l){let e=await p({extension:s.q.McExchangeMap.get,parameters:"_currencyId=".concat(t.currencyId,"&_rateTypeId=").concat(t.rateTypeId)});E.setValues({...e.record,recordId:String(1e3*e.record.currencyId+e.record.rateTypeId)})}}catch(e){}}()},[]),(0,a.jsx)(f.Z,{resourceId:o.i.MultiCurrencyMapping,form:E,maxAccess:n,editMode:N,children:(0,a.jsx)(y.R,{children:(0,a.jsx)(I.Q,{children:(0,a.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{readOnly:N,endpointId:T.r.Currency.qry,name:"currencyId",label:r.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Currency Ref"},{key:"name",value:"Name"}],values:E.values,required:!0,maxAccess:n,onChange:(e,r)=>{E&&E.setFieldValue("currencyId",(null==r?void 0:r.recordId)||"")},error:E.touched.currencyId&&!!E.errors.currencyId})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:s.q.RateType.qry,name:"rateTypeId",label:r.rateType,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:" Ref"},{key:"name",value:"Name"}],values:E.values,required:!0,maxAccess:n,readOnly:N,onChange:(e,r)=>{E&&E.setFieldValue("rateTypeId",(null==r?void 0:r.recordId)||"")},error:E.touched.rateTypeId&&!!E.errors.rateTypeId})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:s.q.ExchangeTable.qry,name:"exId",label:r.exchangeTable,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Ref"},{key:"name",value:"Name"}],values:E.values,required:!0,maxAccess:n,onChange:(e,r)=>{E.setFieldValue("exId",(null==r?void 0:r.recordId)||"")},error:E.touched.exId&&!!E.errors.exId})})]})})})})}var M=()=>{let{getRequest:e,postRequest:r}=(0,c.useContext)(i.$),{stack:n}=(0,x.zY)(),{platformLabels:m}=(0,c.useContext)(_.l);async function h(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50}=r;return{...await e({extension:s.q.McExchangeMap.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&filter=")}),_startAt:n}}let{query:{data:f},labels:g,paginationParameters:v,refetch:T,access:M,invalidate:E}=(0,u.J)({queryFn:h,endpointId:s.q.McExchangeMap.page,datasetId:o.i.MultiCurrencyMapping}),N=[{field:"currencyName",headerName:g.currency,flex:1},{field:"rateTypeName",headerName:g.rateType,flex:1},{field:"exName",headerName:g.exchangeTable,flex:1}],Z=async e=>{try{await r({extension:s.q.McExchangeMap.del,record:JSON.stringify(e)}),E(),d.ZP.success(m.Deleted)}catch(e){}};function j(e){n({Component:q,props:{labels:g,record:e,maxAccess:M,recordId:e?String(1e3*e.currencyId+e.rateTypeId):null},width:600,height:300,title:g.mc_mapping})}return(0,a.jsxs)(y.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(l.Z,{onAdd:()=>{j()},maxAccess:M})}),(0,a.jsx)(I.Q,{children:(0,a.jsx)(t.Z,{columns:N,gridData:f,rowId:["currencyId","rateTypeId"],onEdit:e=>{j(e)},onDelete:Z,isLoading:!1,pageSize:50,paginationType:"api",maxAccess:M,refetch:T,paginationParameters:v})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=17186)}),_N_E=e.O()}]);