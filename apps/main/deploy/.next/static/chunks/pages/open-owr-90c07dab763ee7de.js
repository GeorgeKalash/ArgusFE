(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36959],{79661:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/open-owr",function(){return r(50641)}])},50641:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(52322),a=r(2784),l=r(69387),o=r(65950),i=r(71987),s=r(26612),c=r(31389),d=r(33625),u=r(62362),p=r(88469),m=r(36908),f=r(61802),v=r(99090),x=r(93432),y=()=>{let{getRequest:e}=(0,a.useContext)(o.$),{stack:t}=(0,f.zY)();async function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,params:n}=t;return{...await e({extension:p.N.OutwardsReturn.qry2,parameters:"_params=".concat(n||"")}),_startAt:r}}async function y(t){let{filters:n,pagination:a}=t;return(null==n?void 0:n.qry)?await e({extension:p.N.OutwardsReturn.snapshot,parameters:"_filter=".concat(n.qry)}):r({_startAt:a._startAt||0,params:null==n?void 0:n.params})}let{query:{data:g},labels:w,filterBy:h,paginationParameters:I,refetch:N,access:_}=(0,i.J)({queryFn:r,endpointId:p.N.OutwardsReturn.qry2,datasetId:s.i.OpenOutwardsReturn,filter:{filterFn:y}}),b=[{field:"reference",headerName:w.reference,flex:1},{field:"date",headerName:w.date,flex:1,type:"date"},{field:"currencyName",headerName:w.currency,flex:1},{field:"requestedByName",headerName:w.requestedBy,flex:1},{field:"clientName",headerName:w.client,flex:1},{field:"corName",headerName:w.corName,flex:1},{field:"amount",headerName:w.amount,flex:1},{field:"settlementStatusName",headerName:w.settlementStatus,flex:1}];async function O(t){let r=await e({extension:x.C.getLabels,parameters:"_dataset=".concat(t)});return r.list?Object.fromEntries(r.list.map(e=>{let{key:t,value:r}=e;return[t,r]})):{}}async function S(e){let r=await O(s.i.OutwardsReturn);t({Component:v.Z,props:{labels:r,recordId:e,maxAccess:_,isOpenOutwards:!0,refetch:N},width:800,height:630,title:r.outwardsReturn})}return(0,n.jsxs)(c.R,{children:[(0,n.jsx)(d.g,{children:(0,n.jsx)(m.Z,{labels:w,reportName:"RTOWR2",filterBy:h})}),(0,n.jsx)(u.Q,{children:(0,n.jsx)(l.Z,{columns:b,gridData:g,rowId:["recordId"],isLoading:!1,pageSize:50,onEdit:e=>{S(null==e?void 0:e.recordId)},paginationType:"api",paginationParameters:I,refetch:N,maxAccess:_})})]})}},1685:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});let n=e=>{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null}},98345:function(e,t,r){"use strict";r.d(t,{H:function(){return v},G:function(){return f}});var n=r(45300),a=r(2784),l=r(96026),o=r(38449);r(26612);var i=r(65947),s=r(1685);let c=async(e,t,r)=>{try{let n=await e({extension:t,parameters:r});return t.includes("qry")?n:n.record}catch(e){return null}},d=(e,t,r,n)=>{let a=(e=JSON.parse(JSON.stringify(e))).record.controls,l=a.find(e=>"reference"===e.controlId);return l?l.accessLevel=(null==t?void 0:t.mandatory)?i.$7:i.rr:(null==t?void 0:t.mandatory)?a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.mandatory)?i.$7:i.rr}):(null==t?void 0:t.readOnly)?a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.readOnly)?i.rr:i.$7}):a=e.record.controls.filter(e=>"reference"!=e.controlId),r&&a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","dtId"),accessLevel:i.$7}),{...e,record:{...e.record,controls:a}}},u=async(e,t,r)=>{let n,a;switch(r){case"dtId":let l=(0,s.m)("userData"),i=null==l?void 0:l.userId;a="_userId=".concat(i,"&_functionId=").concat(t),n=o.r.UserFunction.get;break;case"glbSysNumberRange":a="_recordId=".concat(t),n=o.r.SystemFunction.get;break;case"DocumentType":a="_dgId=".concat(t,"&_startAt=",0,"&_pageSize=",50),n=o.r.DocumentType.qry;break;case"DcTypNumberRange":a="_recordId=".concat(t),n=o.r.DocumentType.get;break;case"isExternal":a="_recordId=".concat(t),n=o.r.NumberRange.get;break;default:return null}return await c(e,n,a)},p=async function(e){let t,r,n,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=!(arguments.length>4)||void 0===arguments[4]||arguments[4],c=arguments.length>5?arguments[5]:void 0,p=void 0===i&&l&&await u(e,l,"dtId"),m=null==p?void 0:p.dtId,f="",v=!0;if(p&&void 0===i||"nraId"===i){if(m){let r=await u(e,m,"DcTypNumberRange");t=null==r?void 0:r.nraId,v=!((null==r?void 0:r.activeStatus)<0),t||(f="Assign the document type to a number range")}if((!m||!v)&&s&&l){var x;let t=await u(e,l,"DocumentType");a=(null==t?void 0:null===(x=t.list)||void 0===x?void 0:x.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===i||void 0===i)&&l){if((!m||m)&&!t||t&&!v){let r=await u(e,l,"glbSysNumberRange");(t=null==r?void 0:r.nraId)&&a&&(a=!1),v=!0}f=t||a?"":"Assign the system Function to a number range"}i>0&&!t&&(t=i),t&&v?(r={readOnly:null==(n=await u(e,t,"isExternal"))||!n.external,mandatory:null!=n&&!!n.external},o&&(o=await d(o,r,a,c))):!t&&o&&(o=await d(o,r,a,c));let y=c?"".concat(c,".reference"):"reference";return{dtId:m,resetReference:null==r?void 0:r.readOnly,dcTypeRequired:a,reference:{fieldName:y,isEmpty:(null==n?void 0:n.external)!==void 0&&(null==n||!n.external)},errorMessage:f,maxAccess:o,selectNraId:i}};var m=r(65950);function f(e){let{functionId:t,action:r,hasDT:n}=e,{getRequest:o}=(0,a.useContext)(m.$),{stack:i}=(0,l.V)();return{proxyAction:async()=>{let e=await p(o,t,"",void 0,n);(null==e?void 0:e.errorMessage)?i({message:null==e?void 0:e.errorMessage}):await r()}}}function v(e){var t;let{functionId:r,access:o,hasDT:i,enabled:s=!0,objectName:c=""}=e,{getRequest:d}=(0,a.useContext)(m.$),{stack:u}=(0,l.V)(),[f,v]=(0,a.useState)(),x=async e=>{let t=await p(d,r,o,e,i,c);if(!t.errorMessage)return t;u({message:null==t?void 0:t.errorMessage})},y=(0,n.a)({retry:!1,staleTime:0,enabled:s,queryKey:[r,f,!!o,s],queryFn:f||"nraId"===f?()=>x(f):()=>x()});return{documentType:y.data,maxAccess:(null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.maxAccess)||o,changeDT(e){v((null==e?void 0:e.nraId)||"nraId")}}}},75991:function(e,t,r){"use strict";var n=r(52322),a=r(60218),l=r(76385);t.Z=e=>{let{children:t,title:r,form:o=!1,...i}=e;return(0,n.jsxs)(a.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:r?{xs:.75,sm:1,md:1.25}:0,p:o?0:"clamp(8px, 0.8vw, 14px)",pt:o?0:r?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...i.sx},children:[!!r&&(0,n.jsx)(l.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:r}),t]})}}},function(e){e.O(0,[92515,2494,36908,99090,49774,92888,40179],function(){return e(e.s=79661)}),_N_E=e.O()}]);