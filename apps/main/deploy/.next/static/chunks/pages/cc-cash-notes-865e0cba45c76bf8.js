(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5380],{3526:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cc-cash-notes",function(){return r(35917)}])},13585:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return N}});var t=r(52322),c=r(60218),s=r(2784),a=r(48601),o=r(82737),d=r(62202),u=r(65950),i=r(26612),l=r(57393),y=r(80983),h=r(91406),f=r(31389),C=r(62362),p=r(8661),x=r(38449),m=r(71987),g=r(19473);function N(e){let{labels:n,maxAccess:r,record:N,recordId:I,window:_}=e,{getRequest:T,postRequest:v}=(0,s.useContext)(u.$),{platformLabels:R}=(0,s.useContext)(g.l),j=(0,m.E)({endpointId:l.s.CcCashNotes.page}),{formik:w}=(0,y.c)({initialValues:{recordId:I,currencyId:"",note:null},maxAccess:r,validateOnChange:!0,validationSchema:a.Ry({currencyId:a.Z_().required(),note:a.Z_().required()}),onSubmit:async e=>{let n=w.values.currencyId,r=w.values.note;await v({extension:l.s.CcCashNotes.set,record:JSON.stringify(e)}),n||r?d.ZP.success(R.Edited):d.ZP.success(R.Added),w.setFieldValue("recordId",String(10*e.currencyId)+e.note),_.close(),j()}}),Z=!!w.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(N&&N.currencyId&&N.note&&I){let e=await T({extension:l.s.CcCashNotes.get,parameters:"_currencyId=".concat(N.currencyId,"&_note=").concat(N.note)});w.setValues({...e.record,recordId:String(10*e.record.currencyId)+e.record.note})}}()},[]),(0,t.jsx)(o.Z,{resourceId:i.i.CashNote,form:w,maxAccess:r,editMode:Z,children:(0,t.jsx)(f.R,{children:(0,t.jsx)(C.Q,{children:(0,t.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(c.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{endpointId:x.r.Currency.qry,name:"currencyId",label:n.currencyName,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:w.values,required:!0,readOnly:Z,maxAccess:r,onChange:(e,n)=>{w.setFieldValue("currencyId",(null==n?void 0:n.recordId)||null)},error:w.touched.currencyId&&!!w.errors.currencyId})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,children:(0,t.jsx)(h.Z,{name:"note",label:n.currencyNote,value:w.values.note,required:!0,readOnly:Z,maxAccess:r,onChange:w.handleChange,onClear:()=>w.setFieldValue("note",""),error:w.touched.note&&!!w.errors.note})})]})})})})}},35917:function(e,n,r){"use strict";r.r(n);var t=r(52322),c=r(2784),s=r(62202),a=r(69387),o=r(27723),d=r(65950),u=r(57393),i=r(13585),l=r(71987),y=r(26612),h=r(61802),f=r(31389),C=r(33625),p=r(62362),x=r(19473);n.default=()=>{let{getRequest:e,postRequest:n}=(0,c.useContext)(d.$),{stack:r}=(0,h.zY)(),{platformLabels:m}=(0,c.useContext)(x.l);async function g(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50}=n;return{...await e({extension:u.s.CcCashNotes.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(t,"&_params=&_currencyId=0")}),_startAt:r}}let{invalidate:N,query:{data:I},labels:_,paginationParameters:T,refetch:v,access:R}=(0,l.J)({queryFn:g,endpointId:u.s.CcCashNotes.page,datasetId:y.i.CashNote}),j=[{field:"currencyRef",headerName:_.currencyRef,flex:1},{field:"currencyName",headerName:_.currencyName,flex:1},{field:"note",headerName:_.currencyNote,flex:1,type:"number"}],w=async e=>{try{await n({extension:u.s.CcCashNotes.del,record:JSON.stringify(e)}),N(),s.ZP.success(m.Deleted)}catch(e){}};function Z(e){r({Component:i.default,props:{labels:_,record:e,recordId:e?String(10*e.currencyId)+e.note:null,maxAccess:R},width:600,height:300,title:_.CcCashNotes})}return(0,t.jsxs)(f.R,{children:[(0,t.jsx)(C.g,{children:(0,t.jsx)(o.Z,{onAdd:()=>{Z()},maxAccess:R,labels:_})}),(0,t.jsx)(p.Q,{children:(0,t.jsx)(a.Z,{columns:j,gridData:I,rowId:["currencyId","note"],onEdit:e=>{Z(e)},onDelete:w,isLoading:!1,pageSize:50,paginationParameters:T,paginationType:"api",maxAccess:R,refetch:v})})]})}},57393:function(e,n,r){"use strict";r.d(n,{s:function(){return c}});let t="CC.asmx/",c={CashCountTransaction:{snapshot:t+"snapshotTRX",qry:t+"qryTRX",get2:t+"get2TRX",set2:t+"set2TRX",post:t+"postTRX",close:t+"closeTRX",reopen:t+"reopenTRX",del:t+"delTRX"},Generate:{generate:t+"generateTFR"},CcCashNotes:{qry:t+"qryNOT",get:t+"getNOT",set:t+"setNOT",del:t+"delNOT",page:t+"pageNOT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=3526)}),_N_E=e.O()}]);