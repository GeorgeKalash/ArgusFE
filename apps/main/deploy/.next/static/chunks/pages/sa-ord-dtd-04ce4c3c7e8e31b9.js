(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79538],{72795:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-ord-dtd",function(){return a(28180)}])},28180:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var l=a(52322),d=a(2784),n=a(62202),s=a(69387),r=a(27723),o=a(65950),c=a(61802),i=a(71987),u=a(26612),m=a(31389),p=a(33625),I=a(62362),x=a(19473),y=a(22341),f=a(60218),h=a(48601),v=a(82737),D=a(80983);a(91406);var _=a(8661),g=a(38449),P=a(84100),j=a(19689);function Z(e){var t,a,s;let{labels:r,maxAccess:c,recordId:p}=e,{getRequest:Z,postRequest:k}=(0,d.useContext)(o.$),{platformLabels:w}=(0,d.useContext)(x.l),A=(0,i.E)({endpointId:y.P.DocumentTypeDefault.qry}),{formik:F}=(0,D.c)({initialValues:{recordId:p||null,dtId:"",spId:"",commitItems:!1,disableSKULookup:!1,allocateBy:""},validateOnChange:!0,validationSchema:h.Ry({dtId:h.Z_().required(),allocateBy:h.Z_().when("commitItems",{is:!0,then:e=>e.required(),otherwise:e=>e.notRequired()})}),onSubmit:async e=>{await k({extension:y.P.DocumentTypeDefault.set,record:JSON.stringify(e)}),F.values.recordId?n.ZP.success(w.Edited):(n.ZP.success(w.Added),F.setFieldValue("recordId",F.values.dtId)),A()}}),N=!!F.values.recordId;return(0,d.useEffect)(()=>{!async function(){if(p){let e=await Z({extension:y.P.DocumentTypeDefault.get,parameters:"_dtId=".concat(p)});console.log(e.record,"res"),F.setValues({...e.record,recordId:p})}}()},[]),(0,l.jsx)(v.Z,{resourceId:u.i.DocumentTypeDefault,form:F,maxAccess:c,editMode:N,children:(0,l.jsx)(m.R,{children:(0,l.jsx)(I.Q,{children:(0,l.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(f.ZP,{item:!0,xs:12,children:(0,l.jsx)(_.Z,{endpointId:g.r.DocumentType.qry,parameters:"_dgId=5101&_startAt=0&_pageSize=1000&_filter=",name:"dtId",label:r.documentType,required:!0,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:N,valueField:"recordId",displayField:["reference","name"],values:F.values,maxAccess:c,onChange:(e,t)=>{F&&F.setFieldValue("dtId",null==t?void 0:t.recordId)},error:F.touched.dtId&&!!F.errors.dtId})}),(0,l.jsx)(f.ZP,{item:!0,xs:12,children:(0,l.jsx)(_.Z,{endpointId:y.P.SalesPerson.qry,name:"spId",label:r.salesPerson,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"name",value:"name"}],values:F.values,maxAccess:c,onChange:(e,t)=>{F.setFieldValue("spId",t?t.recordId:"")},error:F.touched.spId&&!!F.errors.spId})}),(0,l.jsx)(f.ZP,{item:!0,xs:12,children:(0,l.jsx)(_.Z,{endpointId:g.r.Plant.qry,name:"plantId",label:r.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:F.values,maxAccess:c,onChange:(e,t)=>{let a=(null==t?void 0:t.recordId)||"";F.setFieldValue("plantId",a)},error:F.touched.plantId&&!!F.errors.plantId})}),(0,l.jsx)(f.ZP,{item:!0,xs:12,children:(0,l.jsx)(j.Z,{name:"commitItems",value:null===(t=F.values)||void 0===t?void 0:t.commitItems,onChange:e=>F.setFieldValue("commitItems",e.target.checked),label:r.commitItems,maxAccess:c})}),(0,l.jsx)(f.ZP,{item:!0,xs:12,children:(0,l.jsx)(_.Z,{datasetId:P.v.SA_ALLOCATE_BY,name:"allocateBy",label:r.allocateBy,valueField:"key",displayField:"value",values:F.values,maxAccess:c,onChange:(e,t)=>{F.setFieldValue("allocateBy",null==t?void 0:t.key)},required:null===(a=F.values)||void 0===a?void 0:a.commitItems,error:F.touched.allocateBy&&!!F.errors.allocateBy})}),(0,l.jsx)(f.ZP,{item:!0,xs:12,children:(0,l.jsx)(j.Z,{name:"disableSKULookup",value:null===(s=F.values)||void 0===s?void 0:s.disableSKULookup,onChange:e=>F.setFieldValue("disableSKULookup",e.target.checked),label:r.dsl,maxAccess:c})})]})})})})}var k=()=>{let{getRequest:e,postRequest:t}=(0,d.useContext)(o.$),{platformLabels:a}=(0,d.useContext)(x.l),{stack:f}=(0,c.zY)();async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:l=50}=t;try{return{...await e({extension:y.P.DocumentTypeDefault.qry,parameters:"_filter=&_functionId=5101"}),_startAt:a}}catch(e){}}let{query:{data:v},labels:D,invalidate:_,refetch:g,access:P}=(0,i.J)({queryFn:h,endpointId:y.P.DocumentTypeDefault.qry,datasetId:u.i.DocumentTypeDefault}),j=[{field:"commitItems",headerName:D.commitItems,flex:1},{field:"dtName",headerName:D.documentType,flex:1},{field:"spName",headerName:D.salesPerson,flex:1},{field:"plantName",headerName:D.plant,flex:1}],k=async e=>{try{await t({extension:y.P.DocumentTypeDefault.del,record:JSON.stringify(e)}),_(),n.ZP.success(a.Deleted)}catch(e){}};function w(e){f({Component:Z,props:{labels:D,recordId:null==e?void 0:e.dtId,maxAccess:P},width:600,height:500,title:D.dtDefault})}return(0,l.jsxs)(m.R,{children:[(0,l.jsx)(p.g,{children:(0,l.jsx)(r.Z,{onAdd:()=>{w()},maxAccess:P})}),(0,l.jsx)(I.Q,{children:(0,l.jsx)(s.Z,{columns:j,gridData:v,rowId:["dtId"],onEdit:e=>{w(e)},onDelete:k,isLoading:!1,pageSize:50,refetch:g,paginationType:"client",maxAccess:P})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=72795)}),_N_E=e.O()}]);