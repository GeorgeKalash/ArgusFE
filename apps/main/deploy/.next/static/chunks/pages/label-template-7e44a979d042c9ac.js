(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42141],{3171:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/label-template",function(){return l(56903)}])},56903:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return R}});var t=l(52322),s=l(2784),r=l(62202),n=l(69387),i=l(27723),d=l(65950),o=l(26612),c=l(71987),u=l(29326),m=l(9522),h=l(60218),x=l(5088),b=l(8661),p=l(82737),y=l(48601),v=l(80983),g=l(19473),f=l(91406),C=l(84100),_=l(76426),T=l(31389),I=l(62362),Z=e=>{let{labels:a,maxAccess:l,store:n,setStore:i}=e,{getRequest:u,postRequest:m}=(0,s.useContext)(d.$),{platformLabels:Z}=(0,s.useContext)(g.l),{recordId:j}=n,q=(0,c.E)({endpointId:_.x.LabelTemplate.qry}),{formik:A}=(0,v.c)({maxAccess:l,initialValues:{recordId:j,name:"",width:"",height:"",labelHomeX:"",labelHomeY:"",format:""},validateOnChange:!1,validationSchema:y.Ry({name:y.Z_().required(),width:y.Z_().required(),height:y.Z_().required(),labelHomeX:y.Rx().nullable().min(0),labelHomeY:y.Rx().nullable().min(0)}),onSubmit:async e=>{await N(e)}}),S=!!A.values.recordId,N=async e=>{await m({extension:_.x.LabelTemplate.set,record:JSON.stringify(e)}).then(a=>{e.recordId?r.ZP.success(Z.Edited):(A.setFieldValue("recordId",a.recordId),r.ZP.success(Z.Added)),i(e=>({...e,recordId:a.recordId})),q()})};return(0,s.useEffect)(()=>{!async function(){if(j){var e=(await u({extension:_.x.LabelTemplate.get,parameters:"_recordId=".concat(j)})).record;A.setValues(e),i(a=>({...a,recordId:e.recordId}))}}()},[]),(0,t.jsx)(p.Z,{form:A,resourceId:o.i.LabelTemplates,maxAccess:l,editMode:S,children:(0,t.jsx)(T.R,{children:(0,t.jsx)(I.Q,{children:(0,t.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{name:"name",label:a.name,value:A.values.name,required:!0,onChange:A.handleChange,onClear:()=>A.setFieldValue("name",""),error:A.touched.name&&!!A.errors.name,maxAccess:l})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(f.Z,{name:"width",type:"number",label:a.width,value:A.values.width,required:!0,onChange:A.handleChange,onClear:()=>A.setFieldValue("width",""),error:A.touched.width&&!!A.errors.width,maxAccess:l})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{name:"height",type:"number",label:a.height,value:A.values.height,required:!0,onChange:A.handleChange,onClear:()=>A.setFieldValue("height",""),error:A.touched.height&&!!A.errors.height,maxAccess:l})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{name:"labelHomeX",type:"number",label:"X",value:A.values.labelHomeX,maxLength:"30",maxAccess:l,onChange:A.handleChange,onClear:()=>A.setFieldValue("labelHomeX",""),error:A.touched.labelHomeX&&!!A.errors.labelHomeX})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{name:"labelHomeY",type:"number",label:"Y",value:A.values.labelHomeY,maxLength:"30",maxAccess:l,onChange:A.handleChange,onClear:()=>A.setFieldValue("labelHomeY",""),error:A.touched.labelHomeY&&!!A.errors.labelHomeY})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(b.Z,{name:"format",datasetId:C.v.SC_LABEL_PRINT_FORMAT,label:a.format,valueField:"key",displayField:"value",values:A.values,onChange:(e,a)=>{A.setFieldValue("format",(null==a?void 0:a.key)||"")},error:A.touched.format&&!!A.errors.format,maxAccess:l})})]})})})})},j=l(61802),q=l(78711),A=l(54074),S=e=>{var a,l;let{tlId:n,labels:i,seqNo:o,getGridData:c,maxAccess:u,window:m}=e,{getRequest:p,postRequest:v}=(0,s.useContext)(d.$),{platformLabels:Z}=(0,s.useContext)(g.l),j=(0,q.TA)({initialValues:{seqNo:"",labelTemplateId:n,itemKey:"",displayType:"",direction:"",x:"",y:"",scale:"",displayAreaWidth:"",displayAreaHeight:"",fontSize:0,font:""},validateOnChange:!0,validationSchema:y.Ry({seqNo:y.Z_().required(),itemKey:y.Z_().required(),displayType:y.Z_().required(),x:y.Z_().required(),y:y.Z_().required(),scale:y.Z_().required(),displayAreaWidth:y.Z_().required(),displayAreaHeight:y.Z_().required()}),onSubmit:async e=>{await S(e)}}),S=async e=>{await v({extension:_.x.Item.set,record:JSON.stringify(e)}).then(a=>{e.seqNo?r.ZP.success(Z.Edited):r.ZP.success(Z.Added),c(n),m.close()}).catch(e=>{})},N=e=>{let a="_seqNo=".concat(e,"&_labelTemplateId=").concat(n);p({extension:_.x.Item.get,parameters:a}).then(e=>{var a;(null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.seqNo)&&j.setValues(e.record)}).catch(e=>{})};return(0,s.useEffect)(()=>{o&&N(o)},[]),(0,t.jsx)(A.Z,{form:j,maxAccess:u,children:(0,t.jsx)(T.R,{children:(0,t.jsx)(I.Q,{children:(0,t.jsx)(h.ZP,{container:!0,gap:2,children:(0,t.jsxs)(h.ZP,{container:!0,xs:12,spacing:2,children:[(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(f.Z,{name:"seqNo",label:i.seqNo,value:null===(a=j.values)||void 0===a?void 0:a.seqNo,required:!0,onChange:j.handleChange,onClear:()=>j.setFieldValue("seqNo",""),error:j.touched.seqNo&&!!j.errors.seqNo,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{name:"itemKey",label:i.itemKey,value:null===(l=j.values)||void 0===l?void 0:l.itemKey,required:!0,onChange:j.handleChange,onClear:()=>j.setFieldValue("itemKey",""),error:j.touched.itemKey&&!!j.errors.itemKey,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(b.Z,{name:"displayType",label:i.displayType,datasetId:C.v.SC_LABEL_ITEM_DISPLAY_TYPE,valueField:"key",displayField:"value",values:j.values,required:!0,onChange:(e,a)=>{j.setFieldValue("displayType",(null==a?void 0:a.key)||"")},error:j.touched.displayType&&!!j.errors.displayType})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{name:"font",label:i.font,value:j.values.font,onChange:j.handleChange,onClear:()=>j.setFieldValue("font",""),error:j.touched.font&&!!j.errors.font,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(b.Z,{name:"printDirection",label:i.direction,datasetId:C.v.PRINT_DIRECTION,valueField:"key",displayField:"value",values:j.values,onChange:(e,a)=>{j.setFieldValue("printDirection",null==a?void 0:a.key)},error:j.touched.printDirection&&!!j.errors.printDirection})}),(0,t.jsx)(h.ZP,{item:!0,xs:5,children:(0,t.jsx)(x.Z,{name:"x",label:"X",type:"number",value:j.values.x,required:!0,readOnly:!1,onChange:j.handleChange,onClear:()=>j.setFieldValue("x",""),error:j.touched.x&&!!j.errors.x,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:5,children:(0,t.jsx)(x.Z,{name:"displayAreaWidth",type:"number",label:i.displayAreaWidth,value:j.values.displayAreaWidth,required:!0,readOnly:!1,onChange:j.handleChange,onClear:()=>j.setFieldValue("displayAreaWidth",""),error:j.touched.displayAreaWidth&&!!j.errors.displayAreaWidth,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:5,children:(0,t.jsx)(x.Z,{name:"y",label:"Y",type:"number",value:j.values.y,required:!0,readOnly:!1,onChange:j.handleChange,onClear:()=>j.setFieldValue("y",""),error:j.touched.y&&!!j.errors.y,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:5,children:(0,t.jsx)(x.Z,{name:"displayAreaHeight",label:i.displayAreaHeight,type:"number",value:j.values.displayAreaHeight,required:!0,readOnly:!1,onChange:j.handleChange,onClear:()=>j.setFieldValue("displayAreaHeight",""),error:j.touched.displayAreaHeight&&!!j.errors.displayAreaHeight,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:5,children:(0,t.jsx)(x.Z,{name:"scale",label:i.scale,type:"number",value:j.values.scale,required:!0,readOnly:!1,onChange:j.handleChange,onClear:()=>j.setFieldValue("scale",""),error:j.touched.scale&&!!j.errors.scale,maxAccess:u})}),(0,t.jsx)(h.ZP,{item:!0,xs:5,children:(0,t.jsx)(f.Z,{name:"fontSize",label:i.fontSize,type:"number",value:j.values.fontSize,required:!0,decimalScale:0,readOnly:!1,onChange:e=>{let a=e.target.value;(a<0||""===a)&&(e.target.value=0),j.handleChange(e)},onClear:()=>j.setFieldValue("fontSize",""),error:j.touched.fontSize&&!!j.errors.fontSize,maxAccess:u})})]})})})})})},N=l(33625),P=e=>{let{recordId:a,labels:l,maxAccess:r}=e,{getRequest:o,postRequest:c}=(0,s.useContext)(d.$),[u,m]=(0,s.useState)(),{stack:h}=(0,j.zY)(),{platformLabels:x}=(0,s.useContext)(g.l),b=()=>{m([]),o({extension:_.x.Item.qry,parameters:"_labelTemplateId=".concat(a)}).then(e=>{m(e),setStore(a=>({...a,dispersals:e.list}))}).catch(e=>{})},p=[{field:"seqNo",headerName:l.seqNo,flex:1},{field:"itemKey",headerName:l.itemKey,flex:1},{field:"displayTypeName",headerName:l.displayType,flex:1},{field:"x",headerName:"X",flex:1,type:{field:"number",decimal:2}},{field:"y",headerName:"Y",flex:1,type:{field:"number",decimal:2}},{field:"font",headerName:l.font,flex:1},{field:"fontSize",headerName:l.fontSize,flex:1,type:{field:"number",decimal:2}}];function y(e){h({Component:S,props:{labels:l,tlId:a,seqNo:e,maxAccess:r,getGridData:b},width:700,height:500,title:null==l?void 0:l.item})}return(0,s.useEffect)(()=>{a&&b()},[a]),(0,t.jsxs)(T.R,{children:[(0,t.jsx)(N.g,{children:(0,t.jsx)(i.Z,{onAdd:()=>{y()},maxAccess:r})}),(0,t.jsx)(I.Q,{children:(0,t.jsx)(n.Z,{columns:p,gridData:u,rowId:["seqNo"],onEdit:e=>{y(e.seqNo)},onDelete:e=>{c({extension:_.x.Item.del,record:JSON.stringify(e)}).then(e=>{b(),toast.success(x.Deleted)}).catch(e=>{})},isLoading:!1,maxAccess:r,pagination:!1})})]})},D=e=>{let{labels:a,maxAccess:l,recordId:r}=e,[n,i]=(0,s.useState)({recordId:r}),[d,o]=(0,s.useState)(0),c=[{label:a.labeltemplate},{label:a.item,disabled:!n.recordId}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Y,{tabs:c,activeTab:d,setActiveTab:o,maxAccess:l}),(0,t.jsx)(u.Z,{index:0,value:d,maxAccess:l,children:(0,t.jsx)(Z,{labels:a,maxAccess:l,store:n,setStore:i})}),(0,t.jsx)(u.Z,{index:1,value:d,maxAccess:l,children:(0,t.jsx)(P,{labels:a,maxAccess:l,recordId:null==n?void 0:n.recordId})})]})},R=()=>{let{getRequest:e,postRequest:a}=(0,s.useContext)(d.$),{platformLabels:l}=(0,s.useContext)(g.l),{stack:u}=(0,j.zY)(),{query:{data:m},refetch:h,labels:x,invalidate:b,access:p}=(0,c.J)({endpointId:_.x.LabelTemplate.qry,queryFn:y,datasetId:o.i.LabelTemplates});async function y(){return await e({extension:_.x.LabelTemplate.qry,parameters:""})}let v=[{field:"name",headerName:x.name,flex:1},{field:"height",headerName:x.height,flex:1},{field:"width",headerName:x.width,flex:1}];function f(e){u({Component:D,props:{labels:x,recordId:e,maxAccess:p},width:800,height:450,title:x.labeltemplate})}return(0,t.jsxs)(T.R,{children:[(0,t.jsx)(N.g,{children:(0,t.jsx)(i.Z,{onAdd:()=>{f()},maxAccess:p,labels:x})}),(0,t.jsx)(I.Q,{children:(0,t.jsx)(n.Z,{columns:v,gridData:m,rowId:["recordId"],onEdit:e=>{f(e.recordId)},onDelete:e=>{a({extension:_.x.LabelTemplate.del,record:JSON.stringify(e)}).then(()=>{b(),r.ZP.success(l.Deleted)})},refetch:h,paginationType:"client",isLoading:!1,pageSize:50,maxAccess:p})})]})}},76426:function(e,a,l){"use strict";l.d(a,{x:function(){return s}});let t="SC.asmx/",s={LabelTemplate:{qry:t+"qryLBT",set:t+"setLBT",get:t+"getLBT",del:t+"delLBT"},Item:{qry:t+"qryLBI",set:t+"setLBI",get:t+"getLBI",del:t+"delLBI"},Sites:{qry:t+"qrySIT",set:t+"setSIT",set2:t+"set2SIT",get:t+"getSIT",del:t+"delSIT",reopen:t+"reopenSIT",end:t+"endSIT"},Controller:{qry:t+"qryCRL"},StockCountControllerTab:{qry:t+"qryPHY",set2:t+"set2PHY",set:t+"setPHY",get:t+"getPHY",del:t+"delPHY"},StockCount:{page:t+"pageHDR",post:t+"postHDR",unpost:t+"unpostHDR",qry:t+"qryHDR",get:t+"getHDR",set:t+"setHDR",del:t+"delHDR",close:t+"closeHDR",reopen:t+"reopenHDR",snapshot:t+"snapshotHDR"},StockCountController:{page:t+"pageCRL",set:t+"setCRL",get:t+"getCRL",del:t+"delCRL"},DocumentTypeDefaults:{qry:t+"qryDTD",set:t+"setDTD",get:t+"getDTD",del:t+"delDTD"},StockCountItem:{qry:t+"qryITM",set:t+"setITM",get:t+"getITM",del:t+"delITM"},StockCountSerialSum:{qry:t+"qrySRS"},StockCountItemDetail:{qry:t+"qryITD",set:t+"setITD",get:t+"getITD",del:t+"delITD",set2:t+"set2ITD"},StockCountSerialDetail:{set2:t+"set2SRL",qry:t+"qrySRL",append:t+"appendSRL",del:t+"delSRL",batch:t+"batchSRL"}}},29326:function(e,a,l){"use strict";var t=l(52322);l(2784);var s=l(23925),r=l(13980),n=l.n(r),i=l(95291),d=l.n(i),o=l(65947);let c=e=>{var a,l,r;let{children:n,value:i,index:c,maxAccess:u,...m}=e,h="".concat(e.name||"tab",".").concat(c),{accessLevel:x}=null!==(r=(null!==(l=null==u?void 0:null===(a=u.record)||void 0===a?void 0:a.controls)&&void 0!==l?l:[]).find(e=>e.controlId===h))&&void 0!==r?r:{accessLevel:0};if(x===o.A1)return null;let b=i===c;return(0,t.jsx)(s.Z,{role:"tabpanel",hidden:!b,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(d().tabPanel," ").concat(b?d().active:d().hidden),...m,children:n})};c.propTypes={children:n().node,index:n().number.isRequired,value:n().number.isRequired},a.Z=c},9522:function(e,a,l){"use strict";l.d(a,{Y:function(){return m}});var t=l(52322),s=l(23925),r=l(54582),n=l(68696),i=l(44258),d=l(2784),o=l(99266),c=l(52614),u=l.n(c);let m=e=>{var a,l,c,m,h;let{tabs:x,activeTab:b,setActiveTab:p,maxAccess:y,name:v="tab"}=e,g=(null==y?void 0:null===(l=y.record)||void 0===l?void 0:null===(a=l.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(v,".")))}).map(e=>e.controlId.split(".")[1]))||[],f=null==x?void 0:null===(c=x.map((e,a)=>({...e,id:a})))||void 0===c?void 0:c.filter((e,a)=>!g.includes(String(a))),C=null===(m=f[b])||void 0===m?void 0:m.id,_=null===(h=f[b])||void 0===h?void 0:h.disabled;return(0,d.useEffect)(()=>{C>=0&&!_&&b!=C&&p(C)},[]),(0,t.jsx)(s.Z,{className:u().tabsContainer,children:(0,t.jsx)(s.Z,{className:u().tabsWrapper,children:(0,t.jsx)(r.Z,{value:b,onChange:(e,a)=>p(a),variant:"scrollable",scrollButtons:f.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==f?void 0:f.map(e=>(0,t.jsx)(n.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,t.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)("span",{children:e.label}),e.id===b&&(null==e?void 0:e.onRefetch)&&(0,t.jsx)(i.Z,{size:"small",className:u().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,t.jsx)(o.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=3171)}),_N_E=e.O()}]);