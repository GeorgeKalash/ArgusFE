(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22968],{98473:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pm-task",function(){return a(71595)}])},71595:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var s=a(52322),n=a(2784),r=a(62202),d=a(69387),i=a(27723),l=a(65950),o=a(71987),g=a(26612),c=a(31389),p=a(33625),T=a(62362),u=a(61802),P=a(19473),y=a(60218),m=a(48601),q=a(82737),E=a(5088),h=a(80983),M=a(54736);function R(e){let{labels:t,maxAccess:a,recordId:d,window:i}=e,{getRequest:p,postRequest:u}=(0,n.useContext)(l.$),{platformLabels:R}=(0,n.useContext)(P.l),S=(0,o.E)({endpointId:M.m.PreventiveMaintenanceTasks.page}),{formik:W}=(0,h.c)({maxAccess:a,initialValues:{recordId:null,name:""},validationSchema:m.Ry({name:m.Z_().min(3,"Name must be at least 3 characters").required()}),onSubmit:async e=>{let t=await u({extension:M.m.PreventiveMaintenanceTasks.set,record:JSON.stringify(e)});r.ZP.success(e.recordId?R.Edited:R.Added),e.recordId||W.setFieldValue("recordId",t.recordId),S(),i.close()}}),x=!!W.values.recordId;return(0,n.useEffect)(()=>{!async function(){if(d){let e=await p({extension:M.m.PreventiveMaintenanceTasks.get,parameters:"_recordId=".concat(d)});W.setValues(null==e?void 0:e.record)}}()},[]),(0,s.jsx)(q.Z,{resourceId:g.i.PreventiveMaintenanceTasks,form:W,maxAccess:a,editMode:x,children:(0,s.jsx)(c.R,{children:(0,s.jsx)(T.Q,{children:(0,s.jsx)(y.ZP,{container:!0,spacing:2,children:(0,s.jsx)(y.ZP,{item:!0,xs:12,children:(0,s.jsx)(E.Z,{name:"name",label:t.name,value:W.values.name,required:!0,maxAccess:a,maxLength:"30",onChange:W.handleChange,onClear:()=>W.setFieldValue("name",""),error:W.touched.name&&!!W.errors.name})})})})})})}function S(){let{getRequest:e,postRequest:t}=(0,n.useContext)(l.$),{platformLabels:a}=(0,n.useContext)(P.l),{stack:y}=(0,u.zY)();async function m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:s=50}=t;return{...await e({extension:M.m.PreventiveMaintenanceTasks.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(s,"&_filter=")}),_startAt:a}}let{query:{data:q},labels:E,paginationParameters:h,refetch:S,invalidate:W,access:x}=(0,o.J)({queryFn:m,endpointId:M.m.PreventiveMaintenanceTasks.page,datasetId:g.i.PreventiveMaintenanceTasks}),f=[{field:"name",headerName:E.name,flex:1}];function O(e){y({Component:R,props:{labels:E,recordId:e,maxAccess:x},width:500,height:250,title:E.pmt})}let v=async e=>{await t({extension:M.m.PreventiveMaintenanceTasks.del,record:JSON.stringify(e)}),r.ZP.success(a.Deleted),W()};return(0,s.jsxs)(c.R,{children:[(0,s.jsx)(p.g,{children:(0,s.jsx)(i.Z,{onAdd:()=>{O()},maxAccess:x})}),(0,s.jsx)(T.Q,{children:(0,s.jsx)(d.Z,{name:"table",columns:f,gridData:q,rowId:["recordId"],onEdit:e=>{O(null==e?void 0:e.recordId)},onDelete:v,pageSize:50,paginationType:"api",paginationParameters:h,refetch:S,maxAccess:x})})]})}},54736:function(e,t,a){"use strict";a.d(t,{m:function(){return n}});let s="RS.asmx/",n={RepairName:{page:s+"pageRNA",qry:s+"qryRNA",get:s+"getRNA",set:s+"setRNA",del:s+"delRNA"},WorkOrderTypes:{page:s+"pageWOT",qry:s+"qryWOT",get:s+"getWOT",set:s+"setWOT",del:s+"delWOT"},RepairType:{page:s+"pageRT",get:s+"getRT",set:s+"setRT",del:s+"delRT"},SpareParts:{snapshot:s+"snapshotSP",page:s+"pageSP",get:s+"getSP",set:s+"setSP",del:s+"delSP"},InspectionTemplate:{get2:s+"get2ITE",page:s+"pageITE",set2:s+"set2ITE",del:s+"delITE"},Department:{page:s+"pageDEP",get:s+"getDEP",set:s+"setDEP",del:s+"delDEP"},Warehouse:{page:s+"pageWH",qry:s+"qryWH",set:s+"setWH",get:s+"getWH",del:s+"delWH"},PreventiveMaintenanceTasks:{qry:s+"qryPMT",page:s+"pagePMT",qry:s+"qryPMT",get:s+"getPMT",set:s+"setPMT",del:s+"delPMT"},Equipment:{qry:s+"qryEQP",page:s+"pageEQP",get:s+"getEQP",set:s+"setEQP",del:s+"delEQP",snapshot:s+"snapshotEQP"},SpManufacturer:{page:s+"pageSPM",get:s+"getSPM",set:s+"setSPM",del:s+"delSPM",qry:s+"qrySPM"},JobPosition:{page:s+"pagePOS",qry:s+"qryPOS",get:s+"getPOS",set:s+"setPOS",del:s+"delPOS"},SpCategory:{page:s+"pageSPC",get:s+"getSPC",set:s+"setSPC",del:s+"delSPC",qry:s+"qrySPC"},MaintenanceTemplates:{page:s+"pageMTE",get:s+"getMTE",set:s+"setMTE",del:s+"delMTE",qry:s+"qryMTE"},MaintenanceTemplateTask:{qry:s+"qryMTT",get:s+"getMTT",set:s+"setMTT",del:s+"delMTT"},RsLabors:{qry:s+"qryLBR",snapshot:s+"snapshotLBR",page:s+"pageLBR",set:s+"setLBR",get:s+"getLBR",del:s+"delLBR",qry:s+"qryLBR"},WorkOrder:{page:s+"qryWO",get:s+"getWO",set:s+"setWO",del:s+"delWO",post:s+"postWO"},WorkTask:{qry:s+"qryWTK",get:s+"getWTK",set:s+"setWTK",del:s+"delWTK"},EquipmentType:{qry:s+"qryEQT",get:s+"getEQT",set:s+"setEQT",del:s+"delEQT"},WorkOrderParts:{qry:s+"qryWOP",set2:s+"set2WOP"},WorkOrderLabors:{qry:s+"qryWOL",set2:s+"set2WOL"},RepairRequest:{page:s+"pageREQ",get:s+"getREQ",set:s+"setREQ",del:s+"delREQ"},Employee:{snapshot:s+"snapshotEMP"},RepairType:{qry:s+"qryRT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=98473)}),_N_E=e.O()}]);