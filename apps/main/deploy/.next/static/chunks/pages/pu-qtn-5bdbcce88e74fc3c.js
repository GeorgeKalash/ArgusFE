(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74559],{89380:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pu-qtn",function(){return n(37496)}])},37496:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return _}});var a=n(52322),r=n(2784),o=n(71987),u=n(65950),d=n(69387),i=n(62202),c=n(61802),s=n(26612),l=n(31389),m=n(33625),f=n(62362),p=n(19473),h=n(98345),y=n(7121),A=n(36908),x=n(68838),N=n(2454);function _(){let{postRequest:t,getRequest:e}=(0,r.useContext)(u.$),{platformLabels:n}=(0,r.useContext)(p.l),{stack:_}=(0,c.zY)(),{query:{data:P},filterBy:g,refetch:w,labels:v,access:b,paginationParameters:T,invalidate:q}=(0,o.J)({queryFn:Q,endpointId:N.y.PurchaseQuotation.page,datasetId:s.i.PurchaseQuotations,filter:{filterFn:C}}),E=[{field:"reference",headerName:v.reference,flex:1},{field:"date",headerName:v.date,flex:1,type:"date"},{field:"vendorName",headerName:v.vendor,flex:1},{field:"currencyName",headerName:v.currency,flex:1},{field:"volume",headerName:v.volume,flex:1,type:"number"},{field:"qty",headerName:v.qty,flex:1,type:"number"},{field:"amount",headerName:v.net,flex:1,type:"number"},{field:"description",headerName:v.description,flex:2},{field:"statusName",headerName:v.status,flex:1}];async function Q(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50,params:r=[]}=t;return{...await e({extension:N.y.PurchaseQuotation.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&_sortBy=recordId desc&_params=").concat(r,"&filter=")}),_startAt:n}}async function C(t){let{filters:n,pagination:a}=t;return n.qry?await e({extension:N.y.PurchaseQuotation.snapshot,parameters:"_filter=".concat(n.qry)}):Q({_startAt:a._startAt||0,params:null==n?void 0:n.params})}let{proxyAction:D}=(0,h.G)({functionId:y.J.PurchaseQuotation,action:j}),I=async()=>{await D()};async function j(t){_({Component:x.Z,props:{recordId:t}})}let k=async e=>{await t({extension:N.y.PurchaseQuotation.del,record:JSON.stringify(e)}),q(),i.ZP.success(n.Deleted)};return(0,a.jsxs)(l.R,{children:[(0,a.jsx)(m.g,{children:(0,a.jsx)(A.Z,{onAdd:I,maxAccess:b,filterBy:g,reportName:"PUQTN"})}),(0,a.jsx)(f.Q,{children:(0,a.jsx)(d.Z,{name:"table",columns:E,gridData:P,rowId:["recordId"],onEdit:t=>{j(null==t?void 0:t.recordId)},refetch:w,onDelete:k,deleteConfirmationType:"strict",pageSize:50,maxAccess:b,paginationParameters:T,paginationType:"api"})})]})}},16096:function(t,e,n){"use strict";n.d(e,{ER:function(){return a},Ot:function(){return c},Ww:function(){return i},Yi:function(){return u},a$:function(){return r}});let a=1,r=2,o=t=>{if(!0===t.tdPct){t.tdAmount>100?1===t.typeChange?t.tdAmount=0:t.tdAmount=t.currentDiscount:t.currentDiscount=t.tdAmount,t.hiddenTdPct=t.tdAmount;let e=t.subtotal*t.tdAmount/100;t.hiddenTdAmount=e,t.tdType=r}else if(t.tdAmount>t.subtotal)1===t.typeChange?t.tdAmount=0:t.tdAmount=t.currentDiscount;else{t.currentDiscount=t.tdAmount;let e=0===t.subtotal?0:100*t.tdAmount/t.subtotal;t.hiddenTdPct=e,t.hiddenTdAmount=t.tdAmount,t.tdType=a}return t},u=t=>t=o(t),d=(t,e)=>(t.forEach(t=>{e.totalQty+=parseFloat(t.qty),e.totalWeight+=t.qty*t.weight,e.totalVolume+=t.qty*t.volume,e.totalUpo+=t.upo,e.sumVat+=t.vatAmount}),e.net=e.sumExtended+e.sumVat+((null==e?void 0:e.miscAmount)||0)-((null==e?void 0:e.tdAmount)||0),e),i=t=>t.reduce((t,e)=>t+(Number(e.extendedPrice)||0),0),c=(t,e)=>e=d(t,e)}},function(t){t.O(0,[92515,2494,36908,23352,68838,49774,92888,40179],function(){return t(t.s=89380)}),_N_E=t.O()}]);