(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37836],{18365:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/po-tracking",function(){return s(86584)}])},86584:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var n=s(52322),a=s(2784),r=s(62202),o=s(27723),l=s(65950),d=s(71987),i=s(26612),p=s(31389),c=s(33625),u=s(62362),m=s(61802),g=s(19473),y=s(65215),I=s(60218),R=s(27423),P=s(80983),D=s(69627),h=s(2454),q=s(76399),v=s(39812),O=s(54074),f=()=>{let{getRequest:e,postRequest:t}=(0,a.useContext)(l.$),{platformLabels:s}=(0,a.useContext)(g.l),{stack:f}=(0,m.zY)(),{labels:S,access:V}=(0,d.J)({datasetId:i.i.POTracking}),{formik:b}=(0,P.c)({validateOnChange:!0,maxAccess:V,initialValues:{poId:null,items:[]},onSubmit:async e=>{var n;let a=null==e?void 0:null===(n=e.items)||void 0===n?void 0:n.map((t,s)=>({poId:e.poId,seqNo:t.id,deliveryDate:(0,v.a1)(t.date),...t})),o={poId:e.poId,items:a},l=await t({extension:h.y.OrderItem.set2,record:JSON.stringify(o)});b.setFieldValue("recordId",l.recordId),r.ZP.success(s.Updated)}}),x=[{component:"resourcelookup",label:S.sku,name:"sku",props:{endpointId:y.$.Item.snapshot,valueField:"sku",displayField:"sku",readOnly:!0,mapping:[{from:"recordId",to:"itemId"},{from:"sku",to:"sku"},{from:"name",to:"itemName"},{from:"trackBy",to:"trackBy"}]}},{component:"textfield",label:S.itemName,name:"itemName",props:{readOnly:!0}},{component:"numberfield",name:"qty",label:S.qty,props:{readOnly:!0}},{component:"textfield",label:S.requestRef,name:"requestRef",props:{readOnly:!0}},{component:"numberfield",name:"netUnitPrice",label:S.unitCost,props:{readOnly:!0}},{component:"numberfield",name:"vatAmount",label:S.vat,props:{readOnly:!0}},{component:"numberfield",name:"extendedPrice",label:S.extendedCost,props:{readOnly:!0}},{component:"numberfield",name:"receivedQty",label:S.receivedQty,props:{readOnly:!0}},{component:"numberfield",name:"invoicedQty",label:S.invoicedQty,props:{readOnly:!0}},{component:"date",name:"deliveryDate",flex:2,label:null==S?void 0:S.deliveryDate},{component:"resourcecombobox",label:S.trackingStatus,name:"trackingStatusId",props:{endpointId:h.y.PUOrderStatus.qry,displayField:"name",mapping:[{from:"name",to:"trackingStatusName"},{from:"recordId",to:"trackingStatusId"}]}}];async function E(){var t;let s=await e({extension:h.y.OrderItem.qry,parameters:"_poId=".concat(b.values.poId)});b.setFieldValue("items",(null==s?void 0:null===(t=s.list)||void 0===t?void 0:t.map((e,t)=>{let{...s}=e;return{id:t+1,...s,deliveryDate:(0,v.a1)(s.deliveryDate)}}))||b.values.items)}return(0,n.jsx)(O.Z,{isParentWindow:!1,onSave:b.handleSubmit,maxAccess:V,children:(0,n.jsxs)(p.R,{children:[(0,n.jsx)(c.g,{children:(0,n.jsx)(o.Z,{maxAccess:V,labels:S,middleSection:(0,n.jsx)(I.ZP,{item:!0,xs:12,children:(0,n.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(I.ZP,{item:!0,xs:4,children:(0,n.jsx)(R.U,{endpointId:h.y.PurchaseOrder.snapshot,name:"poId",filter:{status:4},label:S.purchaseOrder,valueField:"reference",displayField:"name",secondDisplayField:!1,form:b,maxAccess:V,valueShow:"poRef",onChange:(e,t)=>{b.setFieldValue("poId",(null==t?void 0:t.recordId)||null),(null==t?void 0:t.recordId)||b.setFieldValue("items",[])}})}),(0,n.jsx)(I.ZP,{item:!0,xs:1,children:(0,n.jsx)(D.Z,{onClick:E,label:s.Preview,color:"#231F20",image:"preview.png",disabled:!b.values.poId})})]})})})}),(0,n.jsx)(u.Q,{children:(0,n.jsx)(q._,{onChange:e=>b.setFieldValue("items",e),value:b.values.items,error:b.errors.items,name:"items",maxAccess:V,columns:x,allowAddNewLine:!1,allowDelete:!1})})]})})}},2454:function(e,t,s){"use strict";s.d(t,{y:function(){return a}});let n="PU.asmx/",a={VendorGroups:{qry:n+"qryGRP",page:n+"pageGRP",get:n+"getGRP",set:n+"setGRP",del:n+"delGRP"},PriceList:{qry:n+"qryPRI",del:n+"delPRI",get:n+"getPRI",set:n+"setPRI"},PUOrderStatus:{qry:n+"qryPOS",page:n+"pagePOS",get:n+"getPOS",set:n+"setPOS",del:n+"delPOS"},DeliveryMethods:{qry:n+"qryDM",page:n+"pageDM",get:n+"getDM",set:n+"setDM",del:n+"delDM"},PaymentTerms:{qry:n+"qryPT",page:n+"pagePT",get:n+"getPT",set:n+"setPT",del:n+"delPT"},Vendor:{snapshot:n+"snapshotVEN",qry:n+"qryVEN",page:n+"pageVEN",get:n+"getVEN",set:n+"setVEN",del:n+"delVEN"},Address:{qry:n+"qryAD",page:n+"pageAD",get:n+"getAD",set:n+"setAD",del:n+"delAD"},DocumentTypeDefault:{qry:n+"qryDTD",get:n+"getDTD",set:n+"setDTD",del:n+"delDTD",page:n+"pageDTD"},PurchaseInvoiceHeader:{qry:n+"qryIVC",get:n+"getIVC",get2:n+"get2IVC",level2_PU:n+"level2_PU",set:n+"setIVC",del:n+"delIVC",snapshot:n+"snapshotIVC",set2:n+"set2IVC",post:n+"postIVC",unpost:n+"unpostIVC",generate:n+"generateIVC",preview:n+"previewIVC",sync:n+"syncIVC",verify:n+"verifyIVC"},Invoice:{snapshot:n+"snapshotINV"},PurchaseReturnHeader:{set2:n+"set2IVR",post:n+"postIVR",unpost:n+"unpostIVR",del:n+"delIVR",qry:n+"qryIVR",snapshot:n+"snapshotIVR"},VendorPrice:{get:n+"getPRI2"},ItemCostHistory:{qry:n+"qryIPH"},ItemPromotion:{qry:n+"qryIVIM"},Serials:{qry:n+"qrySRL",import:n+"importSRL",last:n+"lastSRL",sync:n+"syncSRL"},Shipment:{get:n+"getSHP",set2:n+"set2SHP",del:n+"delSHP",page:n+"pageSHP",snapshot:n+"snapshotSHP",post:n+"postSHP",unpost:n+"unpostSHP",gen:n+"genSHP"},ShipmentItem:{qry:n+"qrySHI"},UnpostedOrderPack:{get:n+"openORD",snapshot:n+"snapshotORD"},PurchaseOrder:{page:n+"pageORD",snapshot:n+"snapshotORD",del:n+"delORD",set2:n+"set2ORD",get2:n+"get2ORD",close:n+"closeORD",reopen:n+"reopenORD",terminate:n+"terminateORD",transfer:n+"transfer1ORD"},PurchaseRequisition:{snapshot:n+"snapshotREQ",page:n+"pageREQ",get:n+"getREQ",set:n+"setREQ",del:n+"delREQ",cancel:n+"cancelREQ",reopen:n+"reopenREQ",close:n+"closeREQ"},RequisitionDetail:{qry:n+"qryREI",set:n+"setREI",get:n+"getREI",del:n+"delREI"},QuotationItem:{preview:n+"previewQTI",qry:n+"qryQTI"},OrderItem:{qry:n+"qryORI",set2:n+"set2ORI"},PUDraftReturn:{set2:n+"set2DRE",get:n+"getDRE",page:n+"pageDRE",snapshot:n+"snapshotDRE",del:n+"delDRE",post:n+"postDRE"},PUDraftReturnSerial:{get2:n+"get2DRS",qry:n+"qryDRS",del:n+"delDRS",append:n+"appendDRS",batch:n+"batchDRS"},FinancialGroup:{qry:n+"qryFII",set2:n+"set2FII"},PUInvoiceRetBalance:{balance:n+"balanceRET"},ItemLastPurchaseInfo:{last:n+"lastIVI"},PurchaseQuotation:{page:n+"pageQTN",set2:n+"set2QTN",get:n+"getQTN",del:n+"delQTN",snapshot:n+"snapshotQTN"},GenerateQTNPRPack:{gen:n+"genQTN"},GeneratePOPRPack:{gen:n+"genPO",gen2:n+"gen2PO"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=18365)}),_N_E=e.O()}]);