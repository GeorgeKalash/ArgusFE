(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25173],{60607:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pm-designer",function(){return t(5404)}])},5404:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return M}});var n=t(52322),a=t(2784),r=t(62202),o=t(69387),l=t(27723),i=t(65950),d=t(71987),c=t(26612),p=t(31389),D=t(33625),g=t(62362),h=t(61802),u=t(19473),S=t(63518),m=t(60218),f=t(48601),x=t(82737),P=t(5088),y=t(80983),R=t(8661),C=t(84100);function L(e){let{labels:s,maxAccess:t,recordId:o}=e,{getRequest:l,postRequest:D}=(0,a.useContext)(i.$),{platformLabels:h}=(0,a.useContext)(u.l),L=(0,d.E)({endpointId:S.z.Designer.page}),{formik:M}=(0,y.c)({initialValues:{recordId:null,reference:"",name:"",type:""},maxAccess:t,validateOnChange:!0,validationSchema:f.Ry({name:f.Z_().required(),reference:f.Z_().required(),type:f.Z_().required()}),onSubmit:async e=>{let s=await D({extension:S.z.Designer.set,record:JSON.stringify(e)});e.recordId?r.ZP.success(h.Edited):(r.ZP.success(h.Added),M.setFieldValue("recordId",s.recordId)),L()}}),_=!!M.values.recordId;return(0,a.useEffect)(()=>{!async function(){if(o){let e=await l({extension:S.z.Designer.get,parameters:"_recordId=".concat(o)});M.setValues(e.record)}}()},[]),(0,n.jsx)(x.Z,{resourceId:c.i.Designer,form:M,maxAccess:t,editMode:_,children:(0,n.jsx)(p.R,{children:(0,n.jsx)(g.Q,{children:(0,n.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(P.Z,{name:"reference",label:s.reference,value:M.values.reference,required:!0,maxAccess:t,maxLength:"10",onChange:M.handleChange,onClear:()=>M.setFieldValue("reference",""),error:M.touched.reference&&!!M.errors.reference})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(P.Z,{name:"name",label:s.name,value:M.values.name,required:!0,maxLength:"60",maxAccess:t,onChange:M.handleChange,onClear:()=>M.setFieldValue("name",""),error:M.touched.name&&!!M.errors.name})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{datasetId:C.v.DESIGNER_TYPE,name:"type",label:s.type,values:M.values,required:!0,valueField:"key",displayField:"value",maxAccess:t,onChange:(e,s)=>{M.setFieldValue("type",(null==s?void 0:s.key)||null)},error:M.touched.type&&!!M.errors.type})})]})})})})}var M=()=>{let{getRequest:e,postRequest:s}=(0,a.useContext)(i.$),{platformLabels:t}=(0,a.useContext)(u.l),{stack:m}=(0,h.zY)();async function f(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:n=50}=s;return{...await e({extension:S.z.Designer.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(n)}),_startAt:t}}let{query:{data:x},labels:P,paginationParameters:y,search:R,clear:C,refetch:M,access:_,invalidate:v}=(0,d.J)({queryFn:f,endpointId:S.z.Designer.page,datasetId:c.i.Designer,search:{searchFn:A}});async function A(s){let{qry:t}=s;return await e({extension:S.z.Designer.snapshot,parameters:"_filter=".concat(t)})}let q=[{field:"reference",headerName:P.reference,flex:1},{field:"name",headerName:P.name,flex:1}];function Z(e){m({Component:L,props:{labels:P,recordId:e,maxAccess:_},width:600,height:300,title:P.designer})}let j=async e=>{await s({extension:S.z.Designer.del,record:JSON.stringify(e)}),v(),r.ZP.success(t.Deleted)};return(0,n.jsxs)(p.R,{children:[(0,n.jsx)(D.g,{children:(0,n.jsx)(l.Z,{onAdd:()=>{Z()},maxAccess:_,onSearch:R,onSearchClear:C,inputSearch:!0})}),(0,n.jsx)(g.Q,{children:(0,n.jsx)(o.Z,{name:"table",columns:q,gridData:x,rowId:["recordId"],onEdit:e=>{Z(null==e?void 0:e.recordId)},onDelete:j,pageSize:50,paginationType:"api",paginationParameters:y,refetch:M,maxAccess:_})})]})}},63518:function(e,s,t){"use strict";t.d(s,{z:function(){return a}});let n="PM.asmx/",a={Designer:{page:n+"pageDSR",get:n+"getDSR",set:n+"setDSR",del:n+"delDSR",snapshot:n+"snapshotDSR",qry:n+"qryDSR"},ThreeDDesign:{page:n+"page3DD",get:n+"get3DD",set:n+"set3DD",del:n+"del3DD",post:n+"post3DD",close:n+"close3DD",reopen:n+"reopen3DD",snapshot:n+"snapshot3DD"},Sketch:{page:n+"pageSKH",get:n+"getSKH",set:n+"setSKH",del:n+"delSKH",close:n+"closeSKH",reopen:n+"reopenSKH",snapshot:n+"snapshotSKH",snapshot2:n+"snapshot2SKH",snapshot3:n+"snapshot3SKH",post:n+"postSKH"},ModelMaker:{snapshot:n+"snapshotMDL",snapshot2:n+"snapshot2MDL",page:n+"pageMDL",get:n+"getMDL",set:n+"setMDL",del:n+"delMDL",post:n+"postMDL",close:n+"closeMDL",reopen:n+"reopenMDL"},ModellingMaterial:{qry:n+"qryMDLM",set2:n+"set2MDLM"},Printing:{page:n+"page3DP",get:n+"get3DP",set:n+"set3DP",del:n+"del3DP",start:n+"start3DP",snapshot:n+"snapshot3DP",snapshot2:n+"snapshot3DP2",post:n+"post3DP",qry:n+"qry3DP"},ThreeDDrawing:{snapshot:n+"snapshot3DD",snapshot2:n+"snapshot23DD",get:n+"get3DD",snapshot3DD2:n+"snapshot3DD2"},Rubber:{page:n+"pageRBR",get:n+"getRBR",set:n+"setRBR",del:n+"delRBR",snapshot:n+"snapshotRBR",post:n+"postRBR",start:n+"startRBR"},Modeling:{qry:n+"qryMDL"},Casting:{page:n+"pageCAS",get:n+"getCAS",set:n+"setCAS",del:n+"delCAS",snapshot:n+"snapshotCAS",post:n+"postCAS"},DocumentTypeDefault:{page:n+"pageDTD",get:n+"getDTD",set:n+"setDTD",del:n+"delDTD"},Samples:{page:n+"pageSPL",get2:n+"get2SPL",set:n+"setSPL",del:n+"delSPL",snapshot:n+"snapshotSPL",set2:n+"set2SPL",close:n+"closeSPL",reopen:n+"reopenSPL",post:n+"postSPL"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=60607)}),_N_E=e.O()}]);