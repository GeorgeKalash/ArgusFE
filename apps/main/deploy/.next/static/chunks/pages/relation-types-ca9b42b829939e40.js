(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34688],{602:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/relation-types",function(){return r(48099)}])},48099:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var a=r(52322),s=r(2784),n=r(62202),l=r(69387),o=r(27723),d=r(65950),c=r(24074),i=r(71987),u=r(26612),p=r(60218),m=r(78711),C=r(48601),y=r(82737),f=r(5088),g=r(19473);function h(e){let{labels:t,maxAccess:r,recordId:l,setStore:o}=e,{platformLabels:h}=(0,s.useContext)(g.l),{getRequest:I,postRequest:b}=(0,s.useContext)(d.$),x=(0,i.E)({endpointId:c.u.RelationType.page}),q=(0,m.TA)({initialValues:{recordId:null,reference:"",name:"",flName:""},validateOnChange:!0,validationSchema:C.Ry({reference:C.Z_().required(),name:C.Z_().required(),flName:C.Z_().required()}),onSubmit:async e=>{let t=await b({extension:c.u.RelationType.set,record:JSON.stringify(e)});e.recordId||(o({recordId:t.recordId,name:e.name}),q.setFieldValue("recordId",t.recordId)),n.ZP.success(e.recordId?h.Edited:h.Added),x()}}),v=!!q.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(l){let e=await I({extension:c.u.RelationType.get,parameters:"_recordId=".concat(l)});o({recordId:e.record.recordId,name:e.record.name}),q.setValues(e.record)}}()},[]),(0,a.jsx)(y.Z,{resourceId:u.i.RelationType,form:q,maxAccess:r,editMode:v,children:(0,a.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(f.Z,{name:"reference",label:t.reference,value:q.values.reference,required:!0,maxAccess:r,maxLength:"30",onChange:q.handleChange,onClear:()=>q.setFieldValue("reference",""),error:q.touched.reference&&!!q.errors.reference})}),(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(f.Z,{name:"name",label:t.name,value:q.values.name,required:!0,rows:2,maxAccess:r,onChange:q.handleChange,onClear:()=>q.setFieldValue("name",""),error:q.touched.name&&!!q.errors.name})}),(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(f.Z,{name:"flName",label:t.flName,value:q.values.flName,required:!0,maxLength:"50",maxAccess:r,onChange:q.handleChange,onClear:()=>q.setFieldValue("flName",""),error:q.touched.flName&&!!q.errors.flName})})]})})}var I=r(29326),b=r(9522),x=r(89119),q=e=>{let{labels:t,maxAccess:r,recordId:n,height:l}=e,[o,d]=(0,s.useState)(0),[c,i]=(0,s.useState)({recordId:n||null,name:null}),p=[{label:null==t?void 0:t.RelationTypes},{label:null==t?void 0:t.interface,disabled:!c.recordId}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Y,{tabs:p,activeTab:o,setActiveTab:d,maxAccess:r}),(0,a.jsx)(I.Z,{height:l,index:0,value:o,maxAccess:r,children:(0,a.jsx)(h,{labels:t,maxAccess:r,recordId:n,setStore:i})}),(0,a.jsx)(I.Z,{index:1,value:o,maxAccess:r,children:(0,a.jsx)(x.V,{height:l,labels:t,resourceId:u.i.RelationType,recordId:c.recordId,maxAccess:r,name:c.name})})]})},v=r(61802),_=r(31389),P=r(33625),R=r(62362),T=()=>{let{getRequest:e,postRequest:t}=(0,s.useContext)(d.$),{stack:r}=(0,v.zY)(),{platformLabels:p}=(0,s.useContext)(g.l);async function m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50}=t;return{...await e({extension:c.u.RelationType.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a)}),_startAt:r}}async function C(t){let{qry:r}=t;return await e({extension:c.u.RelationType.snapshot,parameters:"_filter=".concat(r)})}let{query:{data:y},search:f,clear:h,labels:I,paginationParameters:b,refetch:x,invalidate:T,access:S}=(0,i.J)({queryFn:m,endpointId:c.u.RelationType.page,datasetId:u.i.RelationType,search:{searchFn:C}}),A=[{field:"reference",headerName:I.reference,flex:1},{field:"name",headerName:I.name,flex:1},{field:"flName",headerName:I.flName,flex:1}];function N(e){r({Component:q,props:{labels:I,recordId:e,maxAccess:S},width:600,height:400,title:I.RelationTypes})}let E=async e=>{await t({extension:c.u.RelationType.del,record:JSON.stringify(e)}),T(),n.ZP.success(p.Deleted)};return(0,a.jsxs)(_.R,{children:[(0,a.jsx)(P.g,{children:(0,a.jsx)(o.Z,{onAdd:()=>{N()},maxAccess:S,onSearch:f,onSearchClear:h,labels:I,inputSearch:!0})}),(0,a.jsx)(R.Q,{children:(0,a.jsx)(l.Z,{columns:A,gridData:y,rowId:["recordId"],onEdit:e=>{N(e.recordId)},onDelete:E,isLoading:!1,pageSize:50,refetch:x,paginationParameters:b,paginationType:"api",maxAccess:S})})]})}},53621:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});let a="RTSET.asmx/",s={Interface:{qry:a+"qryITF",page:a+"pageITF",get:a+"getITF",set:a+"setITF",del:a+"delITF"},ProductMaster:{qry:a+"qryPRO",page:a+"pagePRO",get:a+"getPRO",set:a+"setPRO",del:a+"delPRO",snapshot:a+"snapshotPRO"},ProductCountries:{qry:a+"qryPCO",set2:a+"set2PCO"},ProductMonetaries:{qry:a+"qryPMO",set2:a+"set2PMO"},ProductDispersal:{qry:a+"qryPDI",get:a+"getPDI",set:a+"setPDI",del:a+"delPDI"},ProductSchedules:{qry:a+"qryPSC",set2:a+"set2PSC"},ProductScheduleRanges:{qry:a+"qryPSR",set2:a+"set2PSR"},ProductScheduleFees:{qry:a+"qryPSF",set2:a+"set2PSF"},ProductDispersalAgents:{qry:a+"qryPDA",set2:a+"set2PDA"},Correspondent:{page:a+"pageCOR",qry:a+"qryCOR",qry2:a+"qry2COR",get:a+"getCOR",set:a+"setCOR",del:a+"delCOR",snapshot:a+"snapshotCOR"},CorrespondentCountry:{qry:a+"qryCCO",get:a+"getCCO",set2:a+"set2CCO",del:a+"delCCO"},CorrespondentCurrency:{qry:a+"qryCCU",get:a+"getCCU",set2:a+"set2CCU",del:a+"delCCU"},CorrespondentAgents:{qry:a+"qryAGT",page:a+"pageAGT",get:a+"getAGT",set:a+"setAGT",del:a+"delAGT"},CorrespondentAgentBranches:{qry:a+"qryABR",page:a+"pageABR",get:a+"getABR",set:a+"setABR",del:a+"delABR"},CorrespondentExchangeMap:{qry:a+"qryEXC",set2:a+"set2EXC"},CurrencyExchangeMap:{qry:a+"qryEXG",set2:a+"set2EXG"},CorrespondentExchangeBuyMap:{qry:a+"qryEXB",set2:a+"set2EXB"},ExchangeRates:{get:a+"getEXB",qry:a+"qryEXG2",set2:a+"set2EXB"},RtDefault:{qry:a+"qryDE",set2:a+"set2DE"},Profession:{qry:a+"qryPFN",page:a+"pagePFN",get:a+"getPFN",set:a+"setPFN",del:a+"delPFN",snapshot:a+"snapshotPFN"},ClientIndividual:{qry:a+"qryCLI"},SalaryRange:{qry:a+"qrySRA",page:a+"pageSRA",get:a+"getSRA",set:a+"setSRA",del:a+"delSRA"},SourceOfIncome:{qry:a+"qrySI",page:a+"pageSI",snapshot:a+"snapshotSI",get:a+"getSI",set:a+"setSI",del:a+"delSI"},CorrespondentControl:{qry:a+"qryCCL",set:a+"set2CCL"},InterfaceMaps:{qry:a+"qryIFM",get:a+"getIFM",set2:a+"set2IFM"},SourceOfIncomeType:{qry:a+"qrySIT",snapshot:a+"snapshotSIT",page:a+"pageSIT",get:a+"getSIT",set:a+"setSIT",del:a+"delSIT"},ProfessionGroups:{qry:a+"qryPFG",page:a+"pagePFG",snapshot:a+"snapshotPFG",get:a+"getPFG",set:a+"setPFG",del:a+"delPFG"},CorrespondentGroup:{qry:a+"qryCGP",page:a+"pageCGP",get:a+"getCGP",set:a+"setCGP",del:a+"delCGP"},ExtraIncome:{qry:a+"qryEI",get:a+"getEI",del:a+"delEI",page:a+"pageEI",snapshot:a+"snapshotEI",set:a+"setEI"},CountryRisk:{page:a+"pageCOU",get:a+"getCOU",set:a+"setCOU",del:a+"delCOU"},CorDispControl:{qry:a+"qryCDC",set2:a+"set2CDC"},CorrespondentDispersal:{qry:a+"qryCDM",get:a+"getCDM",del:a+"delCDM",set2:a+"set2CDM"},CorrespondentDispersalRate:{qry:a+"qryCDR",set2:a+"set2CDR"}}},29326:function(e,t,r){"use strict";var a=r(52322);r(2784);var s=r(23925),n=r(13980),l=r.n(n),o=r(95291),d=r.n(o),c=r(65947);let i=e=>{var t,r,n;let{children:l,value:o,index:i,maxAccess:u,...p}=e,m="".concat(e.name||"tab",".").concat(i),{accessLevel:C}=null!==(n=(null!==(r=null==u?void 0:null===(t=u.record)||void 0===t?void 0:t.controls)&&void 0!==r?r:[]).find(e=>e.controlId===m))&&void 0!==n?n:{accessLevel:0};if(C===c.A1)return null;let y=o===i;return(0,a.jsx)(s.Z,{role:"tabpanel",hidden:!y,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),className:"".concat(d().tabPanel," ").concat(y?d().active:d().hidden),...p,children:l})};i.propTypes={children:l().node,index:l().number.isRequired,value:l().number.isRequired},t.Z=i},9522:function(e,t,r){"use strict";r.d(t,{Y:function(){return p}});var a=r(52322),s=r(23925),n=r(54582),l=r(68696),o=r(44258),d=r(2784),c=r(99266),i=r(52614),u=r.n(i);let p=e=>{var t,r,i,p,m;let{tabs:C,activeTab:y,setActiveTab:f,maxAccess:g,name:h="tab"}=e,I=(null==g?void 0:null===(r=g.record)||void 0===r?void 0:null===(t=r.controls)||void 0===t?void 0:t.filter(e=>{var t;return 4===e.accessLevel&&(null===(t=e.controlId)||void 0===t?void 0:t.startsWith("".concat(h,".")))}).map(e=>e.controlId.split(".")[1]))||[],b=null==C?void 0:null===(i=C.map((e,t)=>({...e,id:t})))||void 0===i?void 0:i.filter((e,t)=>!I.includes(String(t))),x=null===(p=b[y])||void 0===p?void 0:p.id,q=null===(m=b[y])||void 0===m?void 0:m.disabled;return(0,d.useEffect)(()=>{x>=0&&!q&&y!=x&&f(x)},[]),(0,a.jsx)(s.Z,{className:u().tabsContainer,children:(0,a.jsx)(s.Z,{className:u().tabsWrapper,children:(0,a.jsx)(n.Z,{value:y,onChange:(e,t)=>f(t),variant:"scrollable",scrollButtons:b.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==b?void 0:b.map(e=>(0,a.jsx)(l.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,a.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)("span",{children:e.label}),e.id===y&&(null==e?void 0:e.onRefetch)&&(0,a.jsx)(o.Z,{size:"small",className:u().refreshButton,onClick:t=>{t.stopPropagation(),e.onRefetch()},children:(0,a.jsx)(c.Z,{className:u().refreshIcon})})]})},e.id))})})})}},89119:function(e,t,r){"use strict";r.d(t,{V:function(){return I}});var a=r(52322),s=r(2784),n=r(65950),l=r(49864),o=r(50023),d=r(26612),c=r(62202),i=r(76399),u=r(80983),p=r(84100),m=r(53621),C=r(80968),y=r(5088),f=r(62362),g=r(31389),h=r(54074);let I=e=>{let{recordId:t,resourceId:r,name:I}=e,{getRequest:b,postRequest:x}=(0,s.useContext)(n.$),{getAllKvsByDataset:q}=(0,s.useContext)(C.k),{labels:v,access:_}=(0,o.Z)({datasetId:d.i.InterfaceMap,editMode:!!t}),{formik:P}=(0,u.c)({initialValues:{rows:[{id:1,recordId:t,resourceId:d.i.resourceId,interfaceId:"",interfaceName:"",reference:""}]},validateOnChange:!0,onSubmit:async e=>{let a=P.values.rows.map(e=>({recordId:t,resourceId:r,...e})),s=a.every(e=>""===e.interfaceId);(await x({extension:m.d.InterfaceMaps.set2,record:JSON.stringify({recordId:t,resourceId:r,items:s?[]:a})})).recordId&&c.ZP.success("Record Successfully")}});async function R(){return new Promise((e,t)=>{q({_dataset:p.v.ALL_INTERFACES,callback:r=>{r?e(r):t()}})})}(0,s.useEffect)(()=>{!async function(){if(t){let e=await R(),a=await b({extension:m.d.InterfaceMaps.qry,parameters:"_recordId=".concat(t,"&_resourceId=").concat(r)}),s=e.map(e=>{let t={interfaceId:e.key,interfaceName:e.value,reference:""},r=a.list.find(e=>t.interfaceId==e.interfaceId);return r&&(t.reference=r.reference),t});P.setValues({...P.values,rows:s.map((e,t)=>({...e,id:t+1}))})}}()},[t]);let T=[{component:"resourcecombobox",label:v.interface,name:"interfaceId",props:{readOnly:!0,datasetId:p.v.ALL_INTERFACES,valueField:"key",displayField:"value",displayFieldWidth:2,mapping:[{from:"key",to:"interfaceId"},{from:"value",to:"interfaceName"}]}},{component:"textfield",label:v.reference,name:"reference"}];return(0,a.jsx)(h.Z,{onSave:P.handleSubmit,maxAccess:_,editMode:!0,children:(0,a.jsx)(g.R,{children:(0,a.jsxs)(f.Q,{children:[(0,a.jsx)(l.Z,{sx:{width:"50%"},children:(0,a.jsx)(y.Z,{label:v.name,value:I,readOnly:!0})}),(0,a.jsx)(i._,{onChange:e=>P.setFieldValue("rows",e),value:P.values.rows,error:P.errors.rows,columns:T,allowDelete:!1})]})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=602)}),_N_E=e.O()}]);