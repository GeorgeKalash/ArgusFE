(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89468],{11958:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-client-groups",function(){return r(40356)}])},40356:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return w}});var a=r(52322),s=r(2784),t=r(62202),i=r(69387),l=r(27723),c=r(65950),d=r(61802),o=r(71987),u=r(26612),f=r(31389),m=r(33625),p=r(62362),x=r(19473),h=r(22341),g=r(60218),C=r(48601),_=r(82737),I=r(5088),P=r(38449),j=r(80983),v=r(27423);function Z(e){let{labels:n,maxAccess:r,recordId:i}=e,{getRequest:l,postRequest:d}=(0,s.useContext)(c.$),{platformLabels:m}=(0,s.useContext)(x.l),Z=(0,o.E)({endpointId:h.P.ClientGroups.page}),{formik:w}=(0,j.c)({initialValues:{recordId:null,name:"",reference:"",nraId:""},validateOnChange:!0,validationSchema:C.Ry({name:C.Z_().required(),reference:C.Z_().required()}),onSubmit:async e=>{let n=await d({extension:h.P.ClientGroups.set,record:JSON.stringify(e)});e.recordId?t.ZP.success(m.Edited):(t.ZP.success(m.Added),w.setFieldValue("recordId",n.recordId)),Z()}}),y=!!w.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(i){let e=await l({extension:h.P.ClientGroups.get,parameters:"_recordId=".concat(i)});w.setValues(e.record)}}()},[]),(0,a.jsx)(_.Z,{resourceId:u.i.ClientGroups,form:w,maxAccess:r,editMode:y,children:(0,a.jsx)(f.R,{children:(0,a.jsx)(p.Q,{children:(0,a.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(g.ZP,{item:!0,xs:12,children:(0,a.jsx)(I.Z,{name:"reference",label:n.reference,value:w.values.reference,required:!0,maxAccess:r,onChange:w.handleChange,onClear:()=>w.setFieldValue("reference",""),error:w.touched.reference&&!!w.errors.reference})}),(0,a.jsx)(g.ZP,{item:!0,xs:12,children:(0,a.jsx)(I.Z,{name:"name",label:n.name,value:w.values.name,required:!0,maxAccess:r,maxLength:"30",onChange:w.handleChange,onClear:()=>w.setFieldValue("name",""),error:w.touched.name&&!!w.errors.name})}),(0,a.jsx)(g.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.U,{endpointId:P.r.NumberRange.snapshot,form:w,valueField:"reference",displayField:"description",name:"nraRef",label:n.numberRange,secondDisplayField:!0,secondValue:w.values.nraDescription,onChange:(e,n)=>{let{recordId:r,reference:a,description:s}=n||{};w.setValues({...w.values,nraId:r||null,nraRef:a||"",nraDescription:s||""})}})})]})})})})}var w=()=>{let{getRequest:e,postRequest:n}=(0,s.useContext)(c.$),{platformLabels:r}=(0,s.useContext)(x.l),{stack:g}=(0,d.zY)();async function C(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50}=n;return{...await e({extension:h.P.ClientGroups.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a,"&_filter=&_sortField=")}),_startAt:r}}let{query:{data:_},labels:I,invalidate:P,paginationParameters:j,refetch:v,access:w}=(0,o.J)({queryFn:C,endpointId:h.P.ClientGroups.page,datasetId:u.i.ClientGroups}),y=[{field:"reference",headerName:I.reference,flex:1},{field:"name",headerName:I.name,flex:1},{field:"nraRef",headerName:I.numberRange,flex:1}],b=async e=>{await n({extension:h.P.ClientGroups.del,record:JSON.stringify(e)}),P(),t.ZP.success(r.Deleted)};function N(e){g({Component:Z,props:{labels:I,recordId:e,maxAccess:w},width:600,height:400,title:I.clientGroups})}return(0,a.jsxs)(f.R,{children:[(0,a.jsx)(m.g,{children:(0,a.jsx)(l.Z,{onAdd:()=>{N()},maxAccess:w})}),(0,a.jsx)(p.Q,{children:(0,a.jsx)(i.Z,{columns:y,gridData:_,rowId:["recordId"],onEdit:e=>{N(null==e?void 0:e.recordId)},onDelete:b,isLoading:!1,pageSize:50,refetch:v,paginationParameters:j,paginationType:"api",maxAccess:w})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=11958)}),_N_E=e.O()}]);