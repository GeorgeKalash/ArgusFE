(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99105],{95876:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/aa-process-notification",function(){return l(67686)}])},67686:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return N}});var n=l(52322),r=l(2784),s=l(62202),o=l(65950),a=l(81579),i=l(80968),d=l(71987),u=l(26612),c=l(80983),m=l(31389),p=l(62362),f=l(76399),y=l(19473),T=l(84100),v=l(54074),N=()=>{var e;let{getRequest:t,postRequest:l}=(0,r.useContext)(o.$),{platformLabels:N}=(0,r.useContext)(y.l),{getAllKvsByDataset:w}=(0,r.useContext)(i.k),{labels:_,access:I}=(0,d.J)({queryFn:()=>b(),datasetId:u.i.ProcessNotifications}),{formik:x}=(0,c.c)({maxAccess:I,initialValues:{rows:[{id:1,processId:null,templateId:null}]},onSubmit:async()=>{let e=(x.values.rows||[]).filter(e=>e.templateId);await l({extension:a.r.ProcessNotification.set,record:JSON.stringify({items:e})}),s.ZP.success(N.Updated)}});async function P(){return new Promise((e,t)=>{w({_dataset:T.v.PROCESS_NOTIFICATION_TYPE,callback:l=>{l?e(l):t()}})})}let b=async()=>{let[e,l,n]=await Promise.all([P(),t({extension:a.r.ProcessNotification.qry,parameters:"_filter="}),t({extension:a.r.AdTemplate.qry,parameters:"_filter="})]),r=(null!=e?e:[]).map((e,t)=>{var r,s;let o=((null==l?void 0:l.list)||[]).find(t=>t.processId===Number(e.key)),a=(null===(r=((null==n?void 0:n.list)||[]).find(e=>{var t;return e.recordId===(null!==(t=null==o?void 0:o.templateId)&&void 0!==t?t:null)}))||void 0===r?void 0:r.name)||"";return{id:t+1,processId:Number(e.key),processName:e.value,templateId:null!==(s=null==o?void 0:o.templateId)&&void 0!==s?s:null,templateName:a}});x.setFieldValue("rows",r)},q=[{component:"textfield",label:_.name,name:"processName",props:{readOnly:!0}},{component:"resourcecombobox",label:_.template,name:"Template",props:{endpointId:a.r.AdTemplate.qry,valueField:"recordId",displayField:"name",mapping:[{from:"recordId",to:"templateId"},{from:"name",to:"templateName"}]}}];return(0,n.jsx)(v.Z,{onSave:x.handleSubmit,maxAccess:I,fullSize:!0,children:(0,n.jsx)(m.R,{children:(0,n.jsx)(p.Q,{children:(0,n.jsx)(f._,{onChange:e=>x.setFieldValue("rows",e),value:x.values.rows,name:"PNTable",maxAccess:I,error:null===(e=x.errors)||void 0===e?void 0:e.rows,columns:q,allowDelete:!1,allowAddNewLine:!1})})})})}},81579:function(e,t,l){"use strict";l.d(t,{r:function(){return r}});let n="AA.asmx/",r={DocumentType:{qry:n+"qryDT"},ProcessNotification:{qry:n+"qryPN",set:n+"set2PN"},AdTemplate:{qry:n+"qryTE",page:n+"pageTE",set:n+"setTE",get:n+"getTE",del:n+"delTE"},TemplateBody:{qry:n+"qryTB",set:n+"setTB",get:n+"getTB",del:n+"delTB"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=95876)}),_N_E=e.O()}]);