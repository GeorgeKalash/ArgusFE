(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96925],{43535:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-pen-type",function(){return t(40955)}])},40955:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return R}});var l=t(52322),n=t(2784),s=t(62202),r=t(69387),i=t(27723),o=t(65950),d=t(71987),u=t(26612),c=t(31389),m=t(33625),p=t(62362),v=t(61802),y=t(83562),x=t(29326),h=t(9522),b=t(60218),g=t(48601),f=t(82737),C=t(5088),_=t(80983),T=t(19473),I=t(8661),P=t(84100),q=t(91406);function S(e){let{labels:a,maxAccess:t,setStore:r,store:i}=e,{recordId:m}=i,{getRequest:v,postRequest:x}=(0,n.useContext)(o.$),{platformLabels:h}=(0,n.useContext)(T.l),S=(0,d.E)({endpointId:y.m.PenaltyType.page}),{formik:j}=(0,_.c)({initialValues:{recordId:null,name:"",reason:null,timeBase:null,timeCode:null,from:null,to:null},maxAccess:t,validationSchema:g.Ry({name:g.Z_().required(),reason:g.Rx().required(),timeBase:g.Rx().required(),timeCode:g.Rx().when("reason",{is:1,then:e=>e.required(),otherwise:e=>e.notRequired()}),from:g.Rx().nullable().max(32767).test(function(e){let{reason:a,to:t}=this.parent;return 1===a&&(null!=e||null!=t)&&e<=t||null==e&&null==t}),to:g.Rx().nullable().max(32767).test(function(e){let{reason:a,from:t}=this.parent;return 1===a&&(null!=e||null!=t)&&e>=t||null==e&&null==t})}),onSubmit:async e=>{let a=await x({extension:y.m.PenaltyType.set,record:JSON.stringify(e)});m||(r(e=>({...e,recordId:a.recordId})),j.setFieldValue("recordId",a.recordId)),s.ZP.success(e.recordId?h.Edited:h.Added),S()}});(0,n.useEffect)(()=>{!async function(){if(m){let e=await v({extension:y.m.PenaltyType.get,parameters:"_recordId=".concat(m)});j.setValues(e.record)}}()},[]);let E=41==j.values.timeCode||20==j.values.timeCode||21==j.values.timeCode;return(0,l.jsx)(f.Z,{resourceId:u.i.PenaltyType,form:j,maxAccess:t,editMode:!!m,children:(0,l.jsx)(c.R,{children:(0,l.jsx)(p.Q,{children:(0,l.jsxs)(b.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"name",label:a.name,value:j.values.name,required:!0,maxAccess:t,maxLength:"30",onChange:j.handleChange,onClear:()=>j.setFieldValue("name",""),error:j.touched.name&&!!j.errors.name})}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{name:"reason",label:a.reason,datasetId:P.v.REASON,values:j.values,valueField:"key",displayField:"value",maxAccess:t,required:!0,onChange:(e,a)=>{j.setValues({...j.values,timeCode:null,from:null,to:null,reason:(null==a?void 0:a.key)||null})},error:j.touched.reason&&!!j.errors.reason})}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{name:"timeBase",label:a.timeBase,datasetId:P.v.TIME_BASE,values:j.values,valueField:"key",displayField:"value",required:!0,maxAccess:t,onChange:(e,a)=>{j.setFieldValue("timeBase",(null==a?void 0:a.key)||null)},error:j.touched.timeBase&&!!j.errors.timeBase})}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:y.m.TimeCodes.qry,name:"timeCode",label:a.timeVariationType,values:j.values,valueField:"timeCode",displayField:"name",required:1==j.values.reason,readOnly:1!=j.values.reason,maxAccess:t,onChange:(e,a)=>{j.setFieldValue("timeCode",a.timeCode||null)},error:j.touched.timeCode&&!!j.errors.timeCode})}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(q.Z,{name:"from",label:a.from,value:j.values.from,maxAccess:t,maxLength:7,decimalScale:0,readOnly:E,onChange:j.handleChange,onClear:()=>j.setFieldValue("from",null),error:j.touched.from&&!!j.errors.from})}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(q.Z,{name:"to",label:a.to,value:j.values.to,maxAccess:t,maxLength:7,decimalScale:0,readOnly:E,onChange:j.handleChange,onClear:()=>j.setFieldValue("to",null),error:j.touched.to&&!!j.errors.to})})]})})})})}var j=t(76399),E=t(26150),F=t(54074),A=t(67920),Z=e=>{let{store:a,maxAccess:t,labels:r}=e,{recordId:i}=a,{getRequest:d,postRequest:u}=(0,n.useContext)(o.$),{platformLabels:v}=(0,n.useContext)(T.l),{schema:x,requiredFields:h}=(0,A.m)({amount:e=>(null==e?void 0:e.amount)!=null,actionName:e=>null==e?void 0:e.actionName,deductionType:e=>null==e?void 0:e.deductionType,expressionId:e=>null==e?void 0:e.expressionId},!0,t,"items"),{formik:f}=(0,_.c)({maxAccess:t,conditionSchema:["items"],validationSchema:g.Ry({damage:g.Rx().required(),items:g.IX().of(x)}),initialValues:{damage:1,items:[{id:1}]},onSubmit:async e=>{var a;let t=null==e?void 0:null===(a=e.items)||void 0===a?void 0:a.filter(e=>{var a;return null===(a=Object.values(h))||void 0===a?void 0:a.every(a=>a(e))}).map((a,t)=>{let{id:l,expressionName:n,deductionTypeName:s,actionName:r,...o}=a;return{...o,sequence:t+1,damage:e.damage,ptId:i}});await u({extension:y.m.PenaltyDetail.set2,record:JSON.stringify({...e,ptId:i,items:t})}),s.ZP.success(v.Edited)}});(0,n.useEffect)(()=>{i&&async function(){if(f.values.damage){var e,a;let t=await d({extension:y.m.PenaltyDetail.qry,parameters:"_ptId=".concat(i,"&_damage=").concat(f.values.damage)});f.setFieldValue("items",(null===(e=t.list)||void 0===e?void 0:e.length)>0?null==t?void 0:null===(a=t.list)||void 0===a?void 0:a.map((e,a)=>({...e,id:a+1})):f.initialValues.items)}else f.setFieldValue("items",f.initialValues.items)}()},[f.values.damage]);let C=[{component:"resourcecombobox",name:"actionName",label:r.action,props:{datasetId:P.v.PENALTY_DETAIL_ACTION,valueField:"key",displayField:"value",displayFieldWidth:2,mapping:[{from:"key",to:"action"},{from:"value",to:"actionName"}]}},{component:"resourcecombobox",name:"deductionType",label:r.deductionType,props:{datasetId:P.v.DEDUCTION_TYPE,valueField:"key",displayField:"value",displayFieldWidth:2,mapping:[{from:"key",to:"deductionType"},{from:"value",to:"deductionTypeName"}]}},{component:"numberfield",label:r.deductionAmount,name:"amount",props:{allowNegative:!1,maxLength:10}},{component:"resourcecombobox",label:r.expression,name:"expressionId",props:{endpointId:E.X.Expression.qry,valueField:"recordId",displayField:"name",mapping:[{from:"name",to:"expressionName"},{from:"recordId",to:"expressionId"}]}},{component:"checkbox",name:"includeTV",label:r.includeHourSalary}];return(0,l.jsx)(F.Z,{maxAccess:t,onSave:f.handleSubmit,children:(0,l.jsxs)(c.R,{children:[(0,l.jsx)(m.g,{children:(0,l.jsx)(b.ZP,{container:!0,children:(0,l.jsx)(b.ZP,{item:!0,xs:4,children:(0,l.jsx)(I.Z,{name:"damage",label:r.damage,datasetId:P.v.DAMAGE_LEVEL,values:f.values,valueField:"key",displayField:"value",required:!0,maxAccess:t,onChange:(e,a)=>{f.setFieldValue("damage",(null==a?void 0:a.key)||null)},error:f.touched.damage&&!!f.errors.damage})})})}),(0,l.jsx)(p.Q,{children:(0,l.jsx)(j._,{onChange:e=>f.setFieldValue("items",e),name:"items",value:f.values.items,error:f.errors.items,columns:C,maxAccess:t})})]})})},N=e=>{let{recordId:a,labels:t,access:s}=e,[r,i]=(0,n.useState)(0),[o,d]=(0,n.useState)({recordId:a}),u=[{label:t.penaltyType},{label:t.penaltyDetail,disabled:!o.recordId}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Y,{tabs:u,activeTab:r,setActiveTab:i,maxAccess:s}),(0,l.jsx)(x.Z,{index:0,value:r,maxAccess:s,children:(0,l.jsx)(S,{labels:t,setStore:d,store:o,maxAccess:s})}),(0,l.jsx)(x.Z,{index:1,value:r,maxAccess:s,children:(0,l.jsx)(Z,{labels:t,maxAccess:s,store:o})})]})},R=()=>{let{getRequest:e,postRequest:a}=(0,n.useContext)(o.$),{platformLabels:t}=(0,n.useContext)(T.l),{stack:x}=(0,v.zY)();async function h(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:l=50}=a;return{...await e({extension:y.m.PenaltyType.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(l,"&filter=")}),_startAt:t}}let{query:{data:b},labels:g,paginationParameters:f,invalidate:C,refetch:_,access:I}=(0,d.J)({queryFn:h,endpointId:y.m.PenaltyType.page,datasetId:u.i.PenaltyType}),P=[{field:"name",headerName:g.name,flex:1},{field:"reasonString",headerName:g.reason,flex:1},{field:"timeBaseString",headerName:g.timeBase,flex:1},{field:"from",headerName:g.from,flex:1,type:"number"},{field:"to",headerName:g.to,flex:1,type:"number"},{field:"timeCodeName",headerName:g.timeVariationType,flex:1}],q=async e=>{await a({extension:y.m.PenaltyType.del,record:JSON.stringify(e)}),s.ZP.success(t.Deleted),C()};function S(e){x({Component:N,props:{labels:g,recordId:e,access:I},width:800,height:420,title:g.penaltyType})}return(0,l.jsxs)(c.R,{children:[(0,l.jsx)(m.g,{children:(0,l.jsx)(i.Z,{onAdd:()=>{S()},maxAccess:I})}),(0,l.jsx)(p.Q,{children:(0,l.jsx)(r.Z,{name:"table",columns:P,gridData:b,rowId:["recordId"],onEdit:e=>{S(null==e?void 0:e.recordId)},onDelete:q,pageSize:50,refetch:_,paginationParameters:f,paginationType:"api",maxAccess:I})})]})}},26150:function(e,a,t){"use strict";t.d(a,{X:function(){return l}});let l={Expression:{qry:"ME.asmx/qryEX"}}},83562:function(e,a,t){"use strict";t.d(a,{m:function(){return n}});let l="PY.asmx/",n={Payroll:{qry:l+"qryHE",page:l+"pageHE",get:l+"getHE",set:l+"setHE",del:l+"delHE",close:l+"closeHE",reopen:l+"reopenHE",post:l+"postHE",unpost:l+"unpostHE",snapshot:l+"snapshotHE"},BankTransferFilters:{qry:l+"qrySB",page:l+"pageSB",get:l+"getSB",set:l+"setSB",del:l+"delSB"},Paycode:{qry:l+"qryPC",set:l+"setPC",del:l+"delPC",get:l+"getPC"},SecuritySchedule:{qry:l+"qrySS"},IndemnitySchedule:{page:l+"pageIS",qry:l+"qryIS",get:l+"getIS",set:l+"setIS",del:l+"delIS"},LedgerGroup:{qry:l+"qryGLG",get:l+"getGLG",set:l+"setGLG",del:l+"delGLG"},Arguments:{page:l+"pageAR"},SalaryBatch:{page:l+"pageBAT",get:l+"getBAT",set:l+"setBAT",del:l+"delBAT"},TimeCodes:{page:l+"pageTC",qry:l+"qryTC",get:l+"getTC",set:l+"setTC",del:l+"delTC"},FinalSettlement:{page:l+"pageFS",get:l+"getFS",set:l+"setFS",del:l+"delFS",snapshot:l+"snapshotFS"},IndemnityCompany:{qry:l+"qryID",set2:l+"set2ID"},IndemnityResignation:{qry:l+"qryIR",set2:l+"set2IR"},PenaltyType:{page:l+"pagePT",qry:l+"qryPT",get:l+"getPT",set:l+"setPT",del:l+"delPT"},PenaltyDetail:{qry:l+"qryPD",set2:l+"set2PD"},GeneratePayroll:{gen:l+"genEM",page:l+"pageEM"},PayrollDetails:{qry:l+"qryED",set2:l+"set2ED"},SocialSecurity:{qry:l+"qryES"},FiscalYear:{qry:l+"qryYE"},Period:{qry:l+"qryPE"}}},67920:function(e,a,t){"use strict";t.d(a,{m:function(){return n}});var l=t(48601);function n(e,a,t){var n;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"items",r={...e};return null==t||null===(n=t.record)||void 0===n||n.controls.forEach(e=>{let{controlId:a,accessLevel:t}=e,[l,n]=null==a?void 0:a.split(".");l!==s||2!==t||n in r||(r[n]=e=>(null==e?void 0:e[n])!=null),(1===t||4===t)&&n in r&&delete r[n]}),{schema:l.Ry().shape({...Object.keys(r).reduce((e,t)=>(e[t]=l.nK().nullable().test(function(e){var l;let n=this.parent,[,s]=this.path.match(/^(\w+)\[(\d+)\]/)||[],i=(null===(l=this.options.context)||void 0===l?void 0:l[s])||[];if(a||!a&&i.length>1){if(null!==n[t]&&void 0!==n[t]&&0!==n[t]&&""!==r[t]&&!r[t](n))return!1;if(!Object.entries(r).some(e=>{let[,a]=e;return!!a(n)}))return!0}return!!r[t](n)&&void 0!==e}),e),{})}),requiredFields:r}}},29326:function(e,a,t){"use strict";var l=t(52322);t(2784);var n=t(23925),s=t(13980),r=t.n(s),i=t(95291),o=t.n(i),d=t(65947);let u=e=>{var a,t,s;let{children:r,value:i,index:u,maxAccess:c,...m}=e,p="".concat(e.name||"tab",".").concat(u),{accessLevel:v}=null!==(s=(null!==(t=null==c?void 0:null===(a=c.record)||void 0===a?void 0:a.controls)&&void 0!==t?t:[]).find(e=>e.controlId===p))&&void 0!==s?s:{accessLevel:0};if(v===d.A1)return null;let y=i===u;return(0,l.jsx)(n.Z,{role:"tabpanel",hidden:!y,id:"simple-tabpanel-".concat(u),"aria-labelledby":"simple-tab-".concat(u),className:"".concat(o().tabPanel," ").concat(y?o().active:o().hidden),...m,children:r})};u.propTypes={children:r().node,index:r().number.isRequired,value:r().number.isRequired},a.Z=u},9522:function(e,a,t){"use strict";t.d(a,{Y:function(){return m}});var l=t(52322),n=t(23925),s=t(54582),r=t(68696),i=t(44258),o=t(2784),d=t(99266),u=t(52614),c=t.n(u);let m=e=>{var a,t,u,m,p;let{tabs:v,activeTab:y,setActiveTab:x,maxAccess:h,name:b="tab"}=e,g=(null==h?void 0:null===(t=h.record)||void 0===t?void 0:null===(a=t.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(b,".")))}).map(e=>e.controlId.split(".")[1]))||[],f=null==v?void 0:null===(u=v.map((e,a)=>({...e,id:a})))||void 0===u?void 0:u.filter((e,a)=>!g.includes(String(a))),C=null===(m=f[y])||void 0===m?void 0:m.id,_=null===(p=f[y])||void 0===p?void 0:p.disabled;return(0,o.useEffect)(()=>{C>=0&&!_&&y!=C&&x(C)},[]),(0,l.jsx)(n.Z,{className:c().tabsContainer,children:(0,l.jsx)(n.Z,{className:c().tabsWrapper,children:(0,l.jsx)(s.Z,{value:y,onChange:(e,a)=>x(a),variant:"scrollable",scrollButtons:f.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:c().tabsIndicator},className:c().tabs,children:null==f?void 0:f.map(e=>(0,l.jsx)(r.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(c().tabName," ").concat(e.disabled?c().tabDisabled:""),classes:{root:c().tabRoot,selected:c().selectedTab},label:(0,l.jsxs)(n.Z,{display:"flex",alignItems:"center",children:[(0,l.jsx)("span",{children:e.label}),e.id===y&&(null==e?void 0:e.onRefetch)&&(0,l.jsx)(i.Z,{size:"small",className:c().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,l.jsx)(d.Z,{className:c().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=43535)}),_N_E=e.O()}]);