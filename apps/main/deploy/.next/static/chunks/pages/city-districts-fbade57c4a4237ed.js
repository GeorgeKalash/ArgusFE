(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40286],{35271:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/city-districts",function(){return n(74584)}])},74584:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return F}});var a=n(52322),t=n(2784),i=n(62202),c=n(69387),l=n(27723),s=n(65950),d=n(38449),o=n(26612),u=n(71987),m=n(31389),y=n(33625),f=n(62362),x=n(60218),h=n(48601),I=n(82737),v=n(5088),g=n(8661),p=n(27423),C=n(80983),N=n(19473),_=n(19689);function j(e){var r;let{labels:n,recordId:c,maxAccess:l}=e,[y,j]=(0,t.useState)(!!c),{getRequest:Z,postRequest:F}=(0,t.useContext)(s.$),{platformLabels:D}=(0,t.useContext)(N.l),V=(0,u.E)({endpointId:d.r.CityDistrict.page}),{formik:A}=(0,C.c)({initialValues:{recordId:null,name:"",flName:"",reference:"",countryId:null,cityId:null,countryName:"",cityName:"",cityRef:"",isInactive:!1},maxAccess:l,validateOnChange:!0,validationSchema:h.Ry({name:h.Z_().required(),reference:h.Z_().required(),countryId:h.Z_().required(),cityId:h.Z_().required()}),onSubmit:async e=>{let r=await F({extension:d.r.CityDistrict.set,record:JSON.stringify(e)});e.recordId||A.setValues({...e,recordId:r.recordId}),j(!0),i.ZP.success(e.recordId?D.Edited:D.Added),V()}});return(0,t.useEffect)(()=>{!async function(){if(c){let e=await Z({extension:d.r.CityDistrict.get,parameters:"_recordId=".concat(c)});A.setValues({...e.record,isInactive:!!e.record.isInactive})}}()},[]),(0,a.jsx)(I.Z,{resourceId:o.i.CityDistrict,form:A,maxAccess:l,editMode:y,children:(0,a.jsx)(m.R,{children:(0,a.jsx)(f.Q,{children:(0,a.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{name:"reference",label:n.reference,value:A.values.reference,readOnly:y,required:!0,onChange:A.handleChange,onClear:()=>A.setFieldValue("reference",""),error:A.touched.reference&&!!A.errors.reference,maxLength:"10",maxAccess:l})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{name:"name",label:n.name,value:A.values.name,required:!0,onChange:A.handleChange,onClear:()=>A.setFieldValue("name",""),error:A.touched.name&&!!A.errors.name,maxLength:"40",maxAccess:l})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{name:"flName",label:n.flName,value:A.values.flName,maxAccess:l,maxLength:"40",onChange:A.handleChange,onClear:()=>A.setFieldValue("flName",""),error:A.touched.flName&&!!A.errors.flName})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{endpointId:d.r.Country.qry,name:"countryId",label:n.country,valueField:"recordId",displayField:["reference","name","flName"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language"}],values:A.values,required:!0,maxAccess:l,onChange:(e,r)=>{A.setFieldValue("cityId",null),A.setFieldValue("cityRef",null),A.setFieldValue("cityName",null),r?A.setFieldValue("countryId",null==r?void 0:r.recordId):A.setFieldValue("countryId","")},error:A.touched.countryId&&!!A.errors.countryId})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(p.U,{endpointId:d.r.City.snapshot,parameters:{_countryId:A.values.countryId,_stateId:0},valueField:"reference",displayField:"name",name:"cityRef",label:n.city,required:!0,form:A,secondDisplayField:!0,firstValue:A.values.cityRef,secondValue:A.values.cityName,onChange:(e,r)=>{A.setValues({...A.values,cityId:(null==r?void 0:r.recordId)||"",cityRef:(null==r?void 0:r.reference)||"",cityName:(null==r?void 0:r.name)||""})},errorCheck:"cityId",maxAccess:l,readOnly:!A.values.countryId})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(_.Z,{name:"isInactive",value:null===(r=A.values)||void 0===r?void 0:r.isInactive,onChange:e=>A.setFieldValue("isInactive",e.target.checked),label:n.isInactive,maxAccess:l})})]})})})})}var Z=n(61802),F=()=>{let{getRequest:e,postRequest:r}=(0,t.useContext)(s.$),{platformLabels:n}=(0,t.useContext)(N.l);async function x(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50}=r;return{...await e({extension:d.r.CityDistrict.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a)}),_startAt:n}}let{stack:h}=(0,Z.zY)(),I=(0,u.E)({endpointId:d.r.CityDistrict.page}),{query:{data:v},labels:g,refetch:p,paginationParameters:C,access:_}=(0,u.J)({queryFn:x,endpointId:d.r.CityDistrict.page,datasetId:o.i.CityDistrict}),F=[{field:"reference",headerName:g.reference,flex:1},{field:"name",headerName:g.name,flex:1},{field:"flName",headerName:g.flName,flex:1},{field:"countryName",headerName:g.country,flex:1},{field:"cityName",headerName:g.city,flex:1}],D=async e=>{await r({extension:d.r.CityDistrict.del,record:JSON.stringify(e)}),i.ZP.success(n.Deleted),I()};function V(e){h({Component:j,props:{labels:g,recordId:e,maxAccess:_},width:700,height:530,title:g.cityDistrict})}return(0,a.jsxs)(m.R,{children:[(0,a.jsx)(y.g,{children:(0,a.jsx)(l.Z,{onAdd:()=>{V()},maxAccess:_})}),(0,a.jsx)(f.Q,{children:(0,a.jsx)(c.Z,{columns:F,gridData:v,rowId:["recordId"],onEdit:e=>{V(null==e?void 0:e.recordId)},onDelete:D,isLoading:!1,pageSize:50,maxAccess:_,refetch:p,paginationParameters:C,paginationType:"api"})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=35271)}),_N_E=e.O()}]);