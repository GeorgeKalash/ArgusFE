(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40759],{90550:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-rebuildAC",function(){return n(50918)}])},50918:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a=n(52322),r=n(2784),s=n(61802),i=n(26612),l=n(60218),o=n(48601),c=n(62202),d=n(82737),u=n(65950),h=n(31389),m=n(62362),x=n(80983),f=n(19473),p=n(89330),v=n(27423),b=n(8661),j=n(39812),g=n(38449),w=n(65215),y=n(84309);function C(e){var t,n;let{_labels:C,maxAccess:D}=e,{platformLabels:P}=(0,r.useContext)(f.l),{postRequest:I}=(0,r.useContext)(u.$),{stack:Z}=(0,s.zY)(),{formik:_}=(0,x.c)({initialValues:{recordId:"N/A",startDate:null,endDate:null,year:null,itemId:null},maxAccess:D,validationSchema:o.Ry({startDate:o.hT().nullable().test("start-before-end","Start date must be before end date",function(e){let{endDate:t}=this.parent;return!e||!t||e.getTime()<=t.getTime()}),endDate:o.hT().nullable().test("end-after-start","End date must be after start date",function(e){let{startDate:t}=this.parent;return!t||!e||e.getTime()>=t.getTime()}),year:o.Rx().required()}),onSubmit:async e=>{let{itemId:t,...n}=e,a={...n,startDate:e.startDate?(0,j.ku)(e.startDate):null,endDate:e.endDate?(0,j.ku)(e.endDate):null,...t&&{itemId:t}},r=await I({extension:w.$.RebuildAC.rebuild,record:JSON.stringify(a)});Z({Component:y.R,props:{recordId:r.recordId},closable:!1}),c.ZP.success(P.rebuild)}}),k=[{key:"Rebuild",condition:!0,onClick:_.handleSubmit,disabled:!1}];return(0,a.jsx)(d.Z,{resourceId:i.i.RebuildAC,actions:k,editMode:!0,isCleared:!1,isSaved:!1,form:_,maxAccess:D,children:(0,a.jsx)(h.R,{children:(0,a.jsx)(m.Q,{children:(0,a.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(b.Z,{endpointId:g.r.FiscalYears.qry,name:"year",label:C.year,valueField:"fiscalYear",displayField:"fiscalYear",values:_.values,required:!0,maxAccess:D,onChange:(e,t)=>{_.setFieldValue("year",(null==t?void 0:t.fiscalYear)||null)},error:_.touched.year&&!!_.errors.year})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.U,{endpointId:w.$.Item.snapshot,name:"itemId",label:C.item,valueField:"sku",displayField:"name",valueShow:"itemSku",secondValueShow:"itemName",form:_,displayFieldWidth:2,onChange:(e,t)=>{_.setFieldValue("itemSku",(null==t?void 0:t.sku)||""),_.setFieldValue("itemName",(null==t?void 0:t.name)||""),_.setFieldValue("itemId",(null==t?void 0:t.recordId)||null)},error:_.touched.itemId&&!!_.errors.itemId,maxAccess:D})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(p.Z,{name:"startDate",label:C.startDate,max:_.values.endDate,value:null===(t=_.values)||void 0===t?void 0:t.startDate,onChange:_.setFieldValue,maxAccess:D,onClear:()=>_.setFieldValue("startDate",""),error:_.touched.startDate&&!!_.errors.startDate})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(p.Z,{name:"endDate",label:C.endDate,value:null===(n=_.values)||void 0===n?void 0:n.endDate,min:_.values.startDate,onChange:_.setFieldValue,maxAccess:D,onClear:()=>_.setFieldValue("endDate",""),error:_.touched.endDate&&!!_.errors.endDate})})]})})})})}var D=()=>(0,a.jsx)(s.ut,{datasetId:i.i.RebuildAC,labelKey:"rebuildAC",Component:C})},84309:function(e,t,n){"use strict";n.d(t,{R:function(){return A}});var a=n(73235),r=n(52322),s=n(3854),i=n(2784),l=n(82737),o=n(65950),c=n(62362),d=n(31389),u=n(60218),h=n(21581),m=n(38449),x=n(5088),f=n(19473),p=n(21326);function v(){let e=(0,a._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return v=function(){return e},e}function b(){let e=(0,a._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return b=function(){return e},e}function j(){let e=(0,a._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return j=function(){return e},e}function g(){let e=(0,a._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return g=function(){return e},e}function w(){let e=(0,a._)(["\n  container-type: inline-size;\n"]);return w=function(){return e},e}function y(){let e=(0,a._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return y=function(){return e},e}let C=s.ZP.div(v()),D=s.ZP.span(b()),P=s.ZP.span(j()),I=s.ZP.div(g()),Z=s.ZP.div(w()),_=s.ZP.div(y());function k(e){let{label:t,topLabel:n,width:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(P,{children:[n,": "]}),(0,r.jsxs)(I,{children:[(0,r.jsx)(_,{style:{width:a}}),(0,r.jsx)(D,{children:t})]})]})}let A=e=>{let{recordId:t,onComplete:n,access:a,window:s}=e,{getRequest:v}=(0,i.useContext)(o.$),{platformLabels:b}=(0,i.useContext)(f.l);(0,p.Z)({title:b.Progress,window:s});let[j,g]=(0,i.useState)({recordId:t,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),w=async()=>(await v({extension:m.r.THD.get,parameters:"_recordId=".concat(t)})).record,y=j.currentPhase===j.phases&&j.completed===j.iterations,D=!!j.status&&j.status<0;(0,i.useEffect)(()=>{n&&(y||D)&&n()},[D,y]),(0,i.useEffect)(()=>{(async()=>{g(await w())})();let e=setInterval(async()=>{let t=await w();g(t);let n=t.currentPhase===t.phases&&t.completed===t.iterations,a=!!t.status&&t.status<0;(t.status&&t.status<0||n||a)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let P=j.phases?j.currentPhase/j.phases*100:0,I=j.iterations?j.completed/j.iterations*100:0;return(0,r.jsx)(l.Z,{form:j,maxAccess:a,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>s.close(),disabled:!y&&!D}],isSaved:!1,children:(0,r.jsx)(d.R,{children:(0,r.jsx)(c.Q,{children:(0,r.jsxs)(C,{children:[(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(x.Z,{name:"phase",label:b.Phase,value:j.currentPhaseName,readOnly:!0,maxAccess:a})}),(0,r.jsxs)(Z,{children:[(0,r.jsx)(k,{label:"".concat(b.Step," ").concat(j.currentPhase," of ").concat(j.phases,"..."),topLabel:b.currentPhase,width:"".concat(P,"%")}),(0,r.jsx)(k,{label:"".concat(b.Step," ").concat(j.completed," of ").concat(j.iterations,"..."),topLabel:b.Completed,width:"".concat(I,"%")})]}),(0,r.jsx)(h.Z,{name:"log",label:b.Log,value:j.logInfo,rows:4,maxAccess:a,readOnly:!0})]})})})})};A.width=500,A.height=450}},function(e){e.O(0,[3854,49774,92888,40179],function(){return e(e.s=90550)}),_N_E=e.O()}]);