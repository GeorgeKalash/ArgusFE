(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21300],{92927:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gl-settings",function(){return l(23901)}])},23901:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return x}});var a=l(52322),t=l(2784),s=l(60218),u=l(62202),r=l(5088),i=l(65950),g=l(38449),m=l(26612),C=l(71987),S=l(48601),A=l(31389),L=l(62362),G=l(19473),c=l(91406),o=l(80983),d=l(54074),x=()=>{let{postRequest:e}=(0,t.useContext)(i.$),{platformLabels:n,defaultsData:l,updateDefaults:x}=(0,t.useContext)(G.l);(0,t.useEffect)(()=>{h()},[l]);let h=()=>{var e;let n={},a=null==l?void 0:null===(e=l.list)||void 0===e?void 0:e.filter(e=>"GLACSegments"===e.key||"GLACSeg0"===e.key||"GLACSeg1"===e.key||"GLACSeg2"===e.key||"GLACSeg3"===e.key||"GLACSeg4"===e.key||"GLACSegName0"===e.key||"GLACSegName1"===e.key||"GLACSegName2"===e.key||"GLACSegName3"===e.key||"GLACSegName4"===e.key),t=["GLACSegments","GLACSeg0","GLACSeg1","GLACSeg2","GLACSeg3","GLACSeg4"];null==a||a.forEach(e=>{n[e.key]=t.includes(e.key)?Number(null==e?void 0:e.value)||null:e.value}),f.setValues(n)},{labels:N,access:v}=(0,C.J)({datasetId:m.i.GLSettings}),{formik:f}=(0,o.c)({maxAccess:v,initialValues:{GLACSegments:null,GLACSeg0:null,GLACSeg1:null,GLACSeg2:null,GLACSeg3:null,GLACSeg4:null,GLACSegName0:"",GLACSegName1:"",GLACSegName2:"",GLACSegName3:"",GLACSegName4:""},validateOnChange:!0,validationSchema:S.Ry({GLACSegments:S.Rx().nullable().required().min(2).max(5),GLACSeg0:S.Rx().nullable().required().min(1).max(8),GLACSegName0:S.Z_().nullable().required(),GLACSeg1:S.Rx().nullable().required().min(1).max(8),GLACSegName1:S.Z_().nullable().required(),GLACSeg2:S.Rx().nullable().min(1).max(8).test(function(e){let{GLACSegments:n}=this.parent;return!(n>=3)||null!=e&&e>=1&&e<=8}),GLACSegName2:S.Z_().nullable().test(function(e){let{GLACSegments:n}=this.parent;return!(n>=3)||null!=e&&""!==e.trim()}),GLACSeg3:S.Rx().nullable().min(1).max(8).test(function(e){let{GLACSegments:n}=this.parent;return!(n>=4)||null!=e&&e>=1&&e<=8}),GLACSegName3:S.Z_().nullable().test(function(e){let{GLACSegments:n}=this.parent;return!(n>=4)||null!=e&&""!==e.trim()}),GLACSeg4:S.Rx().nullable().min(1).max(8).test(function(e){let{GLACSegments:n}=this.parent;return!(n>=5)||null!=e&&e>=1&&e<=8}),GLACSegName4:S.Z_().nullable().test(function(e){let{GLACSegments:n}=this.parent;return!(n>=5)||null!=e&&""!==e.trim()})}),onSubmit:async e=>{await y(e)}}),y=async l=>{var a=[];a.push({key:"GLACSegments",value:l.GLACSegments});for(let e=0;e<5;e++){let n="GLACSeg".concat(e),t="GLACSegName".concat(e);void 0!==l[n]&&a.push({key:n,value:l[n]}),void 0!==l[t]&&a.push({key:t,value:l[t]})}await e({extension:g.r.Defaults.set,record:JSON.stringify({sysDefaults:a})}).then(e=>{u.ZP.success(n.Edited),x(a)})},b=["GLACSeg0","GLACSeg1","GLACSeg2","GLACSeg3","GLACSeg4"],k=["GLACSegName0","GLACSegName1","GLACSegName2","GLACSegName3","GLACSegName4"],p=e=>{e>=2?f.setValues(n=>{let l={...n,GLACSegments:e};return b.forEach((a,t)=>{l[a]=t<e&&!(""===n[a]||null==n[a])?Number(n[a]):null}),k.forEach((a,t)=>{var s;l[a]=t<e&&null!==(s=n[a])&&void 0!==s?s:""}),l}):f.setFieldValue("GLACSegments",e)};return(0,a.jsx)(d.Z,{onSave:f.handleSubmit,maxAccess:v,children:(0,a.jsx)(A.R,{children:(0,a.jsx)(L.Q,{children:(0,a.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Z,{name:"GLACSegments",label:N.segments,value:f.values.GLACSegments,onChange:(e,n)=>p(n),onClear:()=>f.setFieldValue("GLACSegments",null),min:2,max:5,arrow:!0,error:!!f.errors.GLACSegments,maxAccess:v})}),[0,1,2,3,4].map(e=>{var n,l;let t="GLACSeg".concat(e),u="GLACSegName".concat(e),i=(null!==(l=f.values.GLACSegments)&&void 0!==l?l:0)>e;return(0,a.jsxs)(s.ZP,{container:!0,item:!0,xs:12,columnSpacing:2,rowSpacing:1,alignItems:"flex-start",children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,lg:6,children:(0,a.jsx)(c.Z,{name:t,label:N["segment"+e],value:f.values[t],onClear:()=>f.setFieldValue(t,null),numberField:!0,onChange:(e,n)=>f.setFieldValue(t,n),error:i&&!!f.errors[t],readOnly:!i,min:1,max:8,arrow:!0,maxAccess:v})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,lg:6,children:(0,a.jsx)(r.Z,{name:u,label:N["segName"+e],value:(null===(n=f.values)||void 0===n?void 0:n[u])||"",onClear:()=>f.setFieldValue(u,""),onChange:f.handleChange,error:i&&!!f.errors[u],readOnly:!i,maxLength:20,maxAccess:v})})]},e)})]})})})})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=92927)}),_N_E=e.O()}]);