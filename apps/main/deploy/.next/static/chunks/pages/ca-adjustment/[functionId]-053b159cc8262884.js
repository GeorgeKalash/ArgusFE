(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44433],{51884:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ca-adjustment/[functionId]",function(){return t(56258)}])},56258:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return P}});var n=t(52322),l=t(2784),r=t(62202),d=t(69387),o=t(65950),c=t(71987),i=t(26612),s=t(31389),u=t(33625),v=t(62362),m=t(61802),h=t(2119),y=t(60218),f=t(48601),I=t(82737),x=t(5088),p=t(80983),g=t(38449),A=t(8661),C=t(89330),b=t(39812),F=t(91406),j=t(21581),N=t(98345),k=t(39704),w=t(19473),Z=t(1251),_=t(77595),R=t(30657),V=t(26553),O=t(69627);function S(e){var a,t,d,u,S,D;let{labels:M,access:P,recordId:T,functionId:q}=e,{documentType:L,maxAccess:E,changeDT:G}=(0,N.H)({functionId:q,access:P,enabled:!T}),{platformLabels:B,defaultsData:J,userDefaultsData:$}=(0,l.useContext)(w.l),{stack:z}=(0,m.zY)(),U=parseInt(null==$?void 0:null===(t=$.list)||void 0===t?void 0:null===(a=t.find(e=>"cashAccountId"===e.key))||void 0===a?void 0:a.value),W=parseInt(null==$?void 0:null===(u=$.list)||void 0===u?void 0:null===(d=u.find(e=>"plantId"===e.key))||void 0===d?void 0:d.value),{getRequest:H,postRequest:Q}=(0,l.useContext)(o.$),X=(0,c.E)({endpointId:h.G.CAadjustment.page}),{formik:Y}=(0,p.c)({documentType:{key:"dtId",value:null==L?void 0:L.dtId},initialValues:{recordId:T||null,reference:"",name:"",dtId:null,plantId:W,date:new Date,currencyId:parseInt(null===(S=el())||void 0===S?void 0:S.currencyId),currencyName:"",status:1,cashAccountId:U||null,amount:"",baseAmount:"",exRate:1,rateCalcMethod:1,functionId:q,notes:""},maxAccess:E,validateOnChange:!0,validationSchema:f.Ry({amount:f.Z_().required(),currencyId:f.Z_().required(),cashAccountId:f.Z_().required(),dtId:f.Z_().required(),date:f.Z_().required()}),onSubmit:async e=>{let a=e.recordId;a||(e.status=1,e.rateCalcMethod=1);let t=await Q({extension:h.G.CAadjustment.set,record:JSON.stringify(e)});a?r.ZP.success(B.Edited):(r.ZP.success(B.Added),Y.setValues({...e,baseAmount:Y.values.baseAmount?Y.values.baseAmount:e.amount,recordId:t.recordId}));let n=await H({extension:h.G.CAadjustment.get,parameters:"_recordId=".concat(t.recordId)});Y.setFieldValue("reference",n.record.reference),X()}}),K=!!Y.values.recordId||!!T,ee=3===Y.values.status;async function ea(e,a,t,n){if(e&&a&&t){var l,r,d,o;let c=await H({extension:Z.q.Currency.get,parameters:"_currencyId=".concat(e,"&_date=").concat((0,b.Uf)(a),"&_rateDivision=").concat(t)}),i=(0,R.fB)({amount:0===n?0:null!=n?n:Y.values.amount,exRate:null===(l=c.record)||void 0===l?void 0:l.exRate,baseAmount:0,rateCalcMethod:null===(r=c.record)||void 0===r?void 0:r.rateCalcMethod,dirtyField:R.ss});Y.setFieldValue("baseAmount",parseFloat(null==i?void 0:i.baseAmount).toFixed(2)||0),Y.setFieldValue("exRate",null===(d=c.record)||void 0===d?void 0:d.exRate),Y.setFieldValue("rateCalcMethod",null===(o=c.record)||void 0===o?void 0:o.rateCalcMethod)}}async function et(e){if(e){var a,t,n,l;let r=await H({extension:h.G.DocumentTypeDefault.get,parameters:"_dtId=".concat(e)}),d=(null==r?void 0:null===(a=r.record)||void 0===a?void 0:a.cashAccountId)?null==r?void 0:null===(t=r.record)||void 0===t?void 0:t.cashAccountId:U;return Y.setFieldValue("cashAccountId",d||null),en(d),Y.setFieldValue("plantId",(null==r?void 0:null===(n=r.record)||void 0===n?void 0:n.plantId)?null==r?void 0:null===(l=r.record)||void 0===l?void 0:l.plantId:W),r}}let en=async e=>{if(e){let{record:a}=await H({extension:h.G.CbBankAccounts.get,parameters:"_recordId=".concat(e)});Y.setFieldValue("cashAccountRef",a.reference),Y.setFieldValue("cashAccountName",a.name)}};function el(){var e;let a={};return(null==J?void 0:null===(e=J.list)||void 0===e?void 0:e.filter(e=>"currencyId"===e.key)).forEach(e=>a[e.key]=e.value?parseInt(e.value):null),a}(0,l.useEffect)(()=>{var e;Y.values.dtId&&!T&&et(null==Y?void 0:null===(e=Y.values)||void 0===e?void 0:e.dtId)},[Y.values.dtId]),(0,l.useEffect)(()=>{!async function(){if(T){let e=await H({extension:h.G.CAadjustment.get,parameters:"_recordId=".concat(T)});Y.setValues({...e.record,date:(0,b.a1)(e.record.date)})}else{let e=Y.values.cashAccountId;e&&en(e)}K||el()}()},[]);let er=async()=>{let e=await Q({extension:h.G.CAadjustment.post,record:JSON.stringify(Y.values)});if(null==e?void 0:e.recordId){r.ZP.success(B.Posted),X();let e=await H({extension:h.G.CAadjustment.get,parameters:"_recordId=".concat(Y.values.recordId)});e.record.date=(0,b.a1)(e.record.date),Y.setValues(e.record)}},ed=async()=>{let e=await Q({extension:h.G.CAadjustment.unpost,record:JSON.stringify(Y.values)});if(null==e?void 0:e.recordId){r.ZP.success(B.Unposted),X();let e=await H({extension:h.G.CAadjustment.get,parameters:"_recordId=".concat(Y.values.recordId)});e.record.date=(0,b.a1)(e.record.date),Y.setValues(e.record)}},eo=async()=>{z({Component:k.Z,props:{functionId:Y.values.functionId,recordId:Y.values.recordId}})},ec=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!K},{key:"GL",condition:!0,onClick:"onClickGL",datasetId:i.i.GLIncreaseDecreaseAdj,disabled:!K},{key:"Locked",condition:ee,onClick:"onUnpostConfirmation",onSuccess:ed,disabled:!K},{key:"Unlocked",condition:!ee,onClick:er,disabled:!K},{key:"WorkFlow",condition:!0,onClick:eo,disabled:!K},{key:"Cash Transaction",condition:!0,onClick:"transactionClicked",disabled:!K}];return(0,n.jsx)(I.Z,{resourceId:i.i.IncreaseDecreaseAdj,form:Y,maxAccess:E,editMode:K,actions:ec,functionId:q,previewReport:K,disabledSubmit:ee,children:(0,n.jsx)(s.R,{children:(0,n.jsx)(v.Q,{children:(0,n.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsx)(A.Z,{endpointId:g.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(Y.values.functionId),name:"dtId",readOnly:K,label:M.doctype,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:Y.values,maxAccess:E,onChange:(e,a)=>{Y.setFieldValue("dtId",null==a?void 0:a.recordId),G(a)},error:Y.touched.dtId&&!!Y.errors.dtId})}),(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsx)(x.Z,{name:"reference",label:M.reference,value:Y.values.reference,readOnly:K,rows:2,maxAccess:E,onChange:Y.handleChange,onClear:()=>Y.setFieldValue("reference",""),error:Y.touched.reference&&!!Y.errors.reference})}),(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsx)(A.Z,{endpointId:g.r.Plant.qry,name:"plantId",label:M.plant,readOnly:ee,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:Y.values,maxAccess:E,onChange:(e,a)=>{let t=(null==a?void 0:a.recordId)||"";Y.setFieldValue("plantId",t)},error:Y.touched.plantId&&!!Y.errors.plantId})}),(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsx)(C.Z,{name:"date",label:M.date,readOnly:ee,value:Y.values.date,onChange:async(e,a)=>{Y.setFieldValue("date",a),await ea(Y.values.currencyId,a,V.B.FINANCIALS)},required:!0,maxAccess:E,onClear:()=>Y.setFieldValue("date",null),error:Y.touched.date&&!!Y.errors.date})}),(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsxs)(y.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,n.jsx)(y.ZP,{item:!0,xs:8,children:(0,n.jsx)(A.Z,{endpointId:g.r.Currency.qry,filter:e=>1===e.currencyType,name:"currencyId",label:M.currency,readOnly:ee,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:Y.values,required:!0,maxAccess:E,onChange:async(e,a)=>{await ea(null==a?void 0:a.recordId,Y.values.date,V.B.FINANCIALS),Y.setFieldValue("currencyId",(null==a?void 0:a.recordId)||null),Y.setFieldValue("currencyName",null==a?void 0:a.name)},error:Y.touched.currencyId&&!!Y.errors.currencyId})}),(0,n.jsx)(y.ZP,{item:!0,xs:4,children:(0,n.jsx)(O.Z,{onClick:()=>{var e;return e=Y.values,void z({Component:_.Z,props:{DatasetIdAccess:i.i.MCRIncreaseDecreaseAdj,data:e,onOk:e=>{Y.setValues(a=>({...a,...e}))}}})},disabled:!Y.values.currencyId||Y.values.currencyId===(null===(D=el())||void 0===D?void 0:D.currencyId),tooltipText:B.add,image:"popup.png"})})]})}),(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsx)(A.Z,{endpointId:h.G.CashAccount.qry,parameters:"_type=0",name:"cashAccountId",readOnly:ee,required:!0,label:M.cashAccount,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:Y.values,maxAccess:E,onChange:(e,a)=>{Y.setFieldValue("cashAccountId",(null==a?void 0:a.recordId)||null)},error:Y.touched.cashAccountId&&!!Y.errors.cashAccountId})}),(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsx)(F.Z,{name:"amount",type:"text",label:M.amount,value:Y.values.amount,readOnly:ee,required:!0,maxAccess:E,thousandSeparator:!1,onChange:async e=>{var a,t,n;Y.setFieldValue("amount",e.target.value);let l=(0,R.fB)({amount:null!==(n=e.target.value)&&void 0!==n?n:0,exRate:null===(a=Y.values)||void 0===a?void 0:a.exRate,baseAmount:0,rateCalcMethod:null===(t=Y.values)||void 0===t?void 0:t.rateCalcMethod,dirtyField:R.ss});Y.setFieldValue("baseAmount",parseFloat(null==l?void 0:l.baseAmount).toFixed(2)||0)},onClear:async()=>{Y.setFieldValue("amount",0)},error:Y.touched.amount&&!!Y.errors.amount,maxLength:10})}),(0,n.jsx)(y.ZP,{item:!0,xs:12,children:(0,n.jsx)(j.Z,{name:"notes",label:M.notes,readOnly:ee,value:Y.values.notes,maxLength:"100",rows:2,maxAccess:E,onChange:Y.handleChange,onClear:()=>Y.setFieldValue("notes",""),error:Y.touched.notes&&!!Y.errors.notes})})]})})})})}var D=t(63165),M=t(36908),P=()=>{let{getRequest:e,postRequest:a}=(0,l.useContext)(o.$),{platformLabels:t}=(0,l.useContext)(w.l),{stack:y}=(0,m.zY)(),{functionId:f}=(0,D.F)();async function I(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:n=50,params:l}=a;return{...await e({extension:h.G.CAadjustment.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(n,"&_params=").concat(l||"","&_sortBy=date desc&_functionId=").concat(f)}),_startAt:t}}async function x(e){let{filters:a,pagination:t}=e;return I({_startAt:t._startAt||0,params:null==a?void 0:a.params})}let{query:{data:p},filterBy:g,labels:A,access:C,paginationParameters:b,invalidate:F,refetch:j}=(0,c.J)({queryFn:I,endpointId:h.G.CAadjustment.page,datasetId:i.i.IncreaseDecreaseAdj,filter:{filterFn:x,default:{functionId:f}}}),k=[{field:"reference",headerName:A.reference,flex:1},{field:"dtName",headerName:A.doctype,flex:1},{field:"cashAccountName",headerName:A.cashAccount,flex:1},{field:"date",headerName:A.date,flex:1,type:"date"},{field:"amount",headerName:A.amount,flex:1,type:"number"},{field:"currencyRef",headerName:A.currency,flex:1},{field:"statusName",headerName:A.status,flex:1},{field:"notes",headerName:A.notes,flex:1}];function Z(e){y({Component:S,props:{labels:A,recordId:e,access:C,functionId:f},width:900,height:600,title:3301==f?A.increaseAdj:A.decreaseAdj})}let{proxyAction:_}=(0,N.G)({functionId:f,action:Z}),R=async()=>{await _()},V=async e=>{await a({extension:h.G.CAadjustment.del,record:JSON.stringify(e)}),F(),r.ZP.success(t.Deleted)};return(0,n.jsxs)(s.R,{children:[(0,n.jsx)(u.g,{children:(0,n.jsx)(M.Z,{onAdd:R,maxAccess:C,reportName:"CAADJ",filterBy:g,hasSearch:!1})}),(0,n.jsx)(v.Q,{children:(0,n.jsx)(d.Z,{name:"table",columns:k,gridData:p,rowId:["recordId"],onEdit:e=>{Z(null==e?void 0:e.recordId)},onDelete:V,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,paginationParameters:b,refetch:j,paginationType:"api",maxAccess:C})})]})}},63165:function(e,a,t){"use strict";t.d(a,{F:function(){return r}});var n=t(5632),l=t(2784);let r=()=>{let e=(0,n.useRouter)(),[a,t]=(0,l.useState)(e.query);return a}},1685:function(e,a,t){"use strict";t.d(a,{m:function(){return n}});let n=e=>{let a=window.sessionStorage.getItem(e);return a?JSON.parse(a):null}},98345:function(e,a,t){"use strict";t.d(a,{H:function(){return y},G:function(){return h}});var n=t(45300),l=t(2784),r=t(96026),d=t(38449);t(26612);var o=t(65947),c=t(1685);let i=async(e,a,t)=>{try{let n=await e({extension:a,parameters:t});return a.includes("qry")?n:n.record}catch(e){return null}},s=(e,a,t,n)=>{let l=(e=JSON.parse(JSON.stringify(e))).record.controls,r=l.find(e=>"reference"===e.controlId);return r?r.accessLevel=(null==a?void 0:a.mandatory)?o.$7:o.rr:(null==a?void 0:a.mandatory)?l.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==a?void 0:a.mandatory)?o.$7:o.rr}):(null==a?void 0:a.readOnly)?l.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==a?void 0:a.readOnly)?o.rr:o.$7}):l=e.record.controls.filter(e=>"reference"!=e.controlId),t&&l.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","dtId"),accessLevel:o.$7}),{...e,record:{...e.record,controls:l}}},u=async(e,a,t)=>{let n,l;switch(t){case"dtId":let r=(0,c.m)("userData"),o=null==r?void 0:r.userId;l="_userId=".concat(o,"&_functionId=").concat(a),n=d.r.UserFunction.get;break;case"glbSysNumberRange":l="_recordId=".concat(a),n=d.r.SystemFunction.get;break;case"DocumentType":l="_dgId=".concat(a,"&_startAt=",0,"&_pageSize=",50),n=d.r.DocumentType.qry;break;case"DcTypNumberRange":l="_recordId=".concat(a),n=d.r.DocumentType.get;break;case"isExternal":l="_recordId=".concat(a),n=d.r.NumberRange.get;break;default:return null}return await i(e,n,l)},v=async function(e){let a,t,n,l,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,c=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=arguments.length>5?arguments[5]:void 0,v=void 0===o&&r&&await u(e,r,"dtId"),m=null==v?void 0:v.dtId,h="",y=!0;if(v&&void 0===o||"nraId"===o){if(m){let t=await u(e,m,"DcTypNumberRange");a=null==t?void 0:t.nraId,y=!((null==t?void 0:t.activeStatus)<0),a||(h="Assign the document type to a number range")}if((!m||!y)&&c&&r){var f;let a=await u(e,r,"DocumentType");l=(null==a?void 0:null===(f=a.list)||void 0===f?void 0:f.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===o||void 0===o)&&r){if((!m||m)&&!a||a&&!y){let t=await u(e,r,"glbSysNumberRange");(a=null==t?void 0:t.nraId)&&l&&(l=!1),y=!0}h=a||l?"":"Assign the system Function to a number range"}o>0&&!a&&(a=o),a&&y?(t={readOnly:null==(n=await u(e,a,"isExternal"))||!n.external,mandatory:null!=n&&!!n.external},d&&(d=await s(d,t,l,i))):!a&&d&&(d=await s(d,t,l,i));let I=i?"".concat(i,".reference"):"reference";return{dtId:m,resetReference:null==t?void 0:t.readOnly,dcTypeRequired:l,reference:{fieldName:I,isEmpty:(null==n?void 0:n.external)!==void 0&&(null==n||!n.external)},errorMessage:h,maxAccess:d,selectNraId:o}};var m=t(65950);function h(e){let{functionId:a,action:t,hasDT:n}=e,{getRequest:d}=(0,l.useContext)(m.$),{stack:o}=(0,r.V)();return{proxyAction:async()=>{let e=await v(d,a,"",void 0,n);(null==e?void 0:e.errorMessage)?o({message:null==e?void 0:e.errorMessage}):await t()}}}function y(e){var a;let{functionId:t,access:d,hasDT:o,enabled:c=!0,objectName:i=""}=e,{getRequest:s}=(0,l.useContext)(m.$),{stack:u}=(0,r.V)(),[h,y]=(0,l.useState)(),f=async e=>{let a=await v(s,t,d,e,o,i);if(!a.errorMessage)return a;u({message:null==a?void 0:a.errorMessage})},I=(0,n.a)({retry:!1,staleTime:0,enabled:c,queryKey:[t,h,!!d,c],queryFn:h||"nraId"===h?()=>f(h):()=>f()});return{documentType:I.data,maxAccess:(null==I?void 0:null===(a=I.data)||void 0===a?void 0:a.maxAccess)||d,changeDT(e){y((null==e?void 0:e.nraId)||"nraId")}}}},77595:function(e,a,t){"use strict";t.d(a,{Z:function(){return A}});var n=t(52322),l=t(60218),r=t(2784),d=t(26612),o=t(5088),c=t(80983),i=t(31389),s=t(62362),u=t(91406),v=t(30657),m=t(65950),h=t(1251),y=t(39812),f=t(26553),I=t(71987),x=t(21326),p=t(19473),g=t(54074);function A(e){var a,t,A,C,b,F,j,N,k;let{data:w,onOk:Z,DatasetIdAccess:_,window:R}=e,{getRequest:V}=(0,r.useContext)(m.$),{platformLabels:O}=(0,r.useContext)(p.l);(0,x.Z)({title:O.MultiCurrencyRate,window:R});let{labels:S,access:D}=(0,I.J)({endpointId:h.q.Currency.get,DatasetIdAccess:_,datasetId:d.i.MultiCurrencyRate}),{formik:M}=(0,c.c)({initialValues:{currencyId:null==w?void 0:w.currencyId,currencyName:null==w?void 0:w.currencyName,exchangeId:null==w?void 0:w.exchangeId,exchangeName:null==w?void 0:w.exchangeName,rateCalcMethod:null==w?void 0:w.rateCalcMethod,rateCalcMethodName:null==w?void 0:w.rateCalcMethodName,rateTypeId:null==w?void 0:w.rateTypeId,exRate:(null==w?void 0:w.exRate)||null,amount:(null==w?void 0:w.amount)||0,baseAmount:null==w?void 0:w.baseAmount,rateTypeName:null==w?void 0:w.rateTypeName},maxAccess:D,validateOnChange:!0});async function P(){if((null==w?void 0:w.currencyId)&&(null==w?void 0:w.date)){var e,a,t,n,l;let r=await V({extension:h.q.Currency.get,parameters:"_currencyId=".concat(null==w?void 0:w.currencyId,"&_date=").concat((0,y.Uf)(null==w?void 0:w.date),"&_rateDivision=").concat(f.B.FINANCIALS)});M.setFieldValue("rateCalcMethod",null===(e=r.record)||void 0===e?void 0:e.rateCalcMethod),M.setFieldValue("rateCalcMethodName",null===(a=r.record)||void 0===a?void 0:a.rateCalcMethodName),M.setFieldValue("exchangeId",null===(t=r.record)||void 0===t?void 0:t.exchangeId),M.setFieldValue("exchangeName",null===(n=r.record)||void 0===n?void 0:n.exchangeName),M.setFieldValue("rateTypeName",null===(l=r.record)||void 0===l?void 0:l.rateTypeName)}}(0,r.useEffect)(()=>{!async function(){await P()}()},[]);let T=()=>{Z&&(Z({...M.values,exRate:M.values.exRate,baseAmount:M.values.baseAmount,amount:M.values.amount}),R.close())},q=[{key:"Ok",condition:!0,onClick:T,disabled:!1}];return(0,n.jsx)(g.Z,{onSave:T,actions:q,maxAccess:D,editMode:!1,isSaved:!1,children:(0,n.jsx)(i.R,{children:(0,n.jsx)(s.Q,{children:(0,n.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(o.Z,{name:"currencyName",value:null==M?void 0:null===(a=M.values)||void 0===a?void 0:a.currencyName,label:S.currency,readOnly:!0})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(o.Z,{name:"rateTypeName",value:null==M?void 0:null===(t=M.values)||void 0===t?void 0:t.rateTypeName,label:S.rateType,readOnly:!0})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(o.Z,{name:"exchangeName",value:null==M?void 0:null===(A=M.values)||void 0===A?void 0:A.exchangeName,label:S.exchangeTable,readOnly:!0})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(o.Z,{name:"rateCalcMethodName",value:null==M?void 0:null===(C=M.values)||void 0===C?void 0:C.rateCalcMethodName,label:S.rateCalcMethod,readOnly:!0})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{name:"exRate",value:null==M?void 0:null===(b=M.values)||void 0===b?void 0:b.exRate,label:S.rate,readOnly:(null==M?void 0:null===(F=M.values)||void 0===F?void 0:F.amount)==0,maxAccess:D,onClear:()=>{M.setFieldValue("baseAmount",""),M.setFieldValue("exRate","")},decimalScale:7,onChange:e=>{var a,t;let n=e.target.value;if(!n){M.setFieldValue("exRate",""),M.setFieldValue("baseAmount","");return}M.setFieldValue("exRate",n);let l=(0,v.fB)({amount:(null==w?void 0:w.amount)||0,exRate:n,baseAmount:parseFloat((null==M?void 0:null===(a=M.values)||void 0===a?void 0:a.baseAmount)||0).toFixed(2),rateCalcMethod:null==M?void 0:null===(t=M.values)||void 0===t?void 0:t.rateCalcMethod,dirtyField:v.ss});M.setValues({...M.values,...l,baseAmount:parseFloat(l.baseAmount).toFixed(2)})}})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{name:"amount",value:null==M?void 0:null===(j=M.values)||void 0===j?void 0:j.amount,label:S.amount,readOnly:!0})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{name:"baseAmount",value:null==M?void 0:null===(N=M.values)||void 0===N?void 0:N.baseAmount,label:S.baseAmount,readOnly:(null==M?void 0:null===(k=M.values)||void 0===k?void 0:k.amount)==0,onClear:()=>{M.setFieldValue("baseAmount",""),M.setFieldValue("exRate","")},maxAccess:D,onChange:e=>{var a,t;let n=e.target.value;if(!n){M.setFieldValue("baseAmount",""),M.setFieldValue("exRate","");return}M.setFieldValue("baseAmount",n);let l=(0,v.fB)({amount:(null==w?void 0:w.amount)||0,exRate:null==M?void 0:null===(a=M.values)||void 0===a?void 0:a.exRate,baseAmount:parseFloat(n||0).toFixed(2),rateCalcMethod:null==M?void 0:null===(t=M.values)||void 0===t?void 0:t.rateCalcMethod,dirtyField:v.i5});M.setValues({...M.values,...l})}})})]})})})})}A.width=500,A.height=500},39704:function(e,a,t){"use strict";var n=t(52322),l=t(2784),r=t(22341),d=t(65950),o=t(85325),c=t(21326),i=t(19473),s=t(35656),u=t(24868),v=t.n(u);let m=e=>{let{functionId:a,recordId:t,window:u}=e,{getRequest:m}=(0,l.useContext)(d.$),{languageId:h}=(0,l.useContext)(o.V),{platformLabels:y}=(0,l.useContext)(i.l),f=t+"-"+a;(0,c.Z)({title:y.WorkFlow,window:u});let{width:I}=(0,s.d)(),x=I<=1024,p=I>1024&&I<=1280,g=x?10:p?12:14,A=x?75:p?85:95,C=x?15:p?20:25,b=async()=>{var e="_functionId=".concat(a,"&_recordId=").concat(t);let n=await m({extension:r.P.WorkFlow.graph,parameters:e});return null==n?void 0:n.record},F=e=>{let a=[],t=[],n="",l="";return e.objects.forEach(e=>{a.push({functionName:e.functionName,reference:e.reference,date:e.date})}),e.workflow.forEach(a=>{e.objects.forEach(e=>{let t=e.functionName.split(" ").join("\r\n");a.parentId===e.recordId&&a.parentFunctionId===e.functionId&&(n=e.reference+"\r\n"+e.date+"\r\n"+t,a.parentId),a.childId===e.recordId&&a.childFunctionId===e.functionId&&(l=e.reference+"\r\n"+e.date+"\r\n"+t,a.childId)}),""===n||""===l||t.push({from:n,to:l,value:1,labelText:""}),n="",l=""}),t};return(0,l.useEffect)(()=>{!async function(){var e=await b();if(e){let a=(e,a)=>{let t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,t.onload=a,document.head.appendChild(t)};a("https://cdn.amcharts.com/lib/4/core.js",()=>{a("https://cdn.amcharts.com/lib/4/charts.js",()=>{a("https://cdn.amcharts.com/lib/4/themes/animated.js",()=>{am4core.ready(()=>{let a=am4core.create(f,am4charts.SankeyDiagram),t=F(e);a.data=t,a.dataFields.fromName="from",a.dataFields.toName="to",a.dataFields.value="value",a.paddingRight=2===h?0:40,a.paddingLeft=2===h?40:0,a.tooltip.label.fontSize=g;let n=a.nodes.template;n.draggable=!1,n.inert=!0,n.clickable=!1,n.width=A,n.height=C,n.nameLabel.label.fontSize=g,n.nameLabel.locationX=2===h?.85:0,n.nameLabel.height=void 0,n.nameLabel.label.fontWeight="bold";let l=a.links.template;l.middleLine.strokeOpacity=.3,l.middleLine.stroke=am4core.color("#555"),l.middleLine.strokeWidth=5,l.middleLine.hoverable=!1,l.fillOpacity=0,l.hoverable=!0,l.hoverOnFocus=!0,l.fill=am4core.color("#A8C686"),l.isHover=!0,a.appear(1e3,100)})})})})}}()},[]),(0,n.jsx)("div",{id:f,className:v().root})};m.width=950,a.Z=m},24868:function(e){e.exports={root:"WorkFlow_root__EINm1"}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=51884)}),_N_E=e.O()}]);