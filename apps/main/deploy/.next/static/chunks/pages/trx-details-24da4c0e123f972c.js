(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92907],{73006:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trx-details",function(){return l(64360)}])},64360:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return Z}});var t=l(52322),s=l(2784),n=l(8661),d=l(65950),r=l(69387),u=l(71987),i=l(60218),o=l(26612),c=l(80983),x=l(31389),m=l(33625),v=l(62362),h=l(27423),p=l(89330),I=l(38449),j=l(84100),y=l(5088),D=l(61802),f=l(94668);function g(e){let{obj:a}=e,[l,n]=(0,s.useState)({}),{getRequest:r}=(0,s.useContext)(d.$);return(0,s.useEffect)(()=>{!async function(){n(JSON.parse((await r({extension:I.r.TrxDetails.get,parameters:"_recordId=".concat(a.recordId)})).record.data))}()},[]),(0,t.jsx)(x.R,{children:(0,t.jsx)(m.g,{children:(0,t.jsx)(f.Z,{sx:{overflow:"auto"},children:(0,t.jsx)(i.ZP,{item:!0,style:{height:290},children:(0,t.jsx)("pre",{style:{margin:0,fontFamily:"inherit",fontWeight:500},children:JSON.stringify(l,null,2)})})})})})}var _=l(19473),F=l(69627),Z=()=>{var e,a;let[l,f]=(0,s.useState)([]),{getRequest:Z}=(0,s.useContext)(d.$),{stack:C}=(0,D.zY)(),{platformLabels:N}=(0,s.useContext)(_.l),P=e=>{let a=(null==e?void 0:e.getMonth())+1,l=null==e?void 0:e.getDate(),t=null==e?void 0:e.getFullYear();return"".concat(a,"-").concat(l,"-").concat(t)},w=()=>{let e=P(k.values.startDate),a=P(k.values.endDate);Z({extension:I.r.TrxDetails.qry2,parameters:"_countryId=".concat(k.values.countryId,"&_moduleId=").concat(k.values.moduleId||0,"&_resourceId=").concat(k.values.resourceId||0,"&_userId=").concat(k.values.userId||0,"&_trxType=").concat(k.values.trxType||0,"&_data=").concat(k.values.data||0,"&_startDate=").concat(e,"&_endDate=").concat(a)}).then(e=>{f(e)})},{labels:V,access:T}=(0,u.J)({datasetId:o.i.TransactionLog}),b=new Date;b.setHours(0,0,0,0);let{formik:k}=(0,c.c)({initialValues:{countryId:0,currencyId:"",resourceId:"",data:"",moduleId:"",trxType:"",userId:"",startDate:b,endDate:b},access:T,validateOnChange:!0}),E=[{field:"eventDt",headerName:V.eventDate,flex:1,type:"date"},{field:"userName",headerName:V.userName,flex:1},{field:"ttName",headerName:V.ttName,flex:1},{field:"resourceName",headerName:V.resourceName,flex:1}];return(0,t.jsxs)(x.R,{children:[(0,t.jsx)(m.g,{children:(0,t.jsxs)(i.ZP,{container:!0,spacing:2,p:2,children:[(0,t.jsx)(i.ZP,{item:!0,xs:3,children:(0,t.jsx)(p.Z,{name:"startDate",max:k.values.endDate,label:V.startDate,value:null==k?void 0:null===(e=k.values)||void 0===e?void 0:e.startDate,onChange:k.setFieldValue,onClear:()=>k.setFieldValue("startDate",""),error:!k.values.startDate,maxAccess:T})}),(0,t.jsx)(i.ZP,{item:!0,xs:3,children:(0,t.jsx)(n.Z,{datasetId:j.v.MODULE,name:"moduleId",label:V.module,valueField:"key",displayField:"value",values:k.values,onChange:(e,a)=>{k.setFieldValue("moduleId",(null==a?void 0:a.key)||null),a||k.setFieldValue("resourceId",null)},maxAccess:T})}),(0,t.jsx)(i.ZP,{item:!0,xs:3,children:(0,t.jsx)(n.Z,{endpointId:I.r.ModuleClassRES.qry,parameters:"_moduleId=".concat(k.values.moduleId||0,"&_filter="),label:"ResourceId",name:"resourceId",values:k.values,readOnly:!k.values.moduleId,valueField:"key",displayField:"value",onChange:(e,a)=>{k.setFieldValue("resourceId",(null==a?void 0:a.key)||null)},maxAccess:T})}),(0,t.jsx)(i.ZP,{item:!0,xs:3}),(0,t.jsx)(i.ZP,{item:!0,xs:3,children:(0,t.jsx)(p.Z,{name:"endDate",min:k.values.startDate,label:V.endDate,value:null==k?void 0:null===(a=k.values)||void 0===a?void 0:a.endDate,onChange:k.setFieldValue,onClear:()=>k.setFieldValue("endDate",null),error:!k.values.endDate,maxAccess:T})}),(0,t.jsx)(i.ZP,{item:!0,xs:3,children:(0,t.jsx)(y.Z,{name:"data",label:V.data,value:k.values.data,onChange:k.handleChange,onClear:()=>k.setFieldValue("data",null),maxAccess:T})}),(0,t.jsx)(i.ZP,{item:!0,xs:3,children:(0,t.jsx)(n.Z,{datasetId:j.v.TRX_TYPE,name:"trxType",label:V.ttype,valueField:"key",displayField:"value",values:k.values,onChange:(e,a)=>{k.setFieldValue("trxType",(null==a?void 0:a.key)||null)}})}),(0,t.jsx)(i.ZP,{item:!0,xs:3}),(0,t.jsx)(i.ZP,{item:!0,xs:4,children:(0,t.jsx)(h.U,{endpointId:I.r.Users.snapshot,valueField:"username",displayField:"email",name:"userId",label:V.users,form:k,displayFieldWidth:2,valueShow:"username",secondValueShow:"email",onChange:(e,a)=>{k.setFieldValue("userId",a?a.recordId:""),k.setFieldValue("email",a?a.email:""),k.setFieldValue("username",a?a.username:"")}})}),(0,t.jsx)(i.ZP,{item:!0,xs:2,children:(0,t.jsx)(F.Z,{onClick:()=>{k.values.startDate&&k.values.endDate&&w()},image:"preview.png",tooltipText:N.Preview})}),(0,t.jsx)(i.ZP,{item:!0,xs:6})]})}),(0,t.jsx)(v.Q,{children:(0,t.jsx)(r.Z,{columns:E,gridData:l,rowId:["recordId"],onEdit:e=>{C({Component:g,props:{obj:e},width:600,height:390,expandable:!1,title:V.data})},isLoading:!1,pagination:!1,maxAccess:T})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=73006)}),_N_E=e.O()}]);