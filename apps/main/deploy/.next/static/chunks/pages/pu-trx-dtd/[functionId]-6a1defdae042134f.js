(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55017],{23908:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pu-trx-dtd/[functionId]",function(){return s(98521)}])},98521:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var a=s(52322),n=s(2784),r=s(62202),l=s(69387),d=s(27723),o=s(65950),i=s(71987),c=s(26612),u=s(31389),p=s(33625),I=s(62362),m=s(61802),g=s(19473),y=s(63165),D=s(2454),P=s(60218),h=s(48601),R=s(82737),f=s(80983),x=s(38449),v=s(8661),q=s(65215),T=s(19689);function S(e){var t,s,l,d;let{labels:p,maxAccess:m,recordId:y,functionId:S}=e,{platformLabels:V}=(0,n.useContext)(g.l),{getRequest:O,postRequest:E}=(0,n.useContext)(o.$),N=(0,i.E)({endpointId:D.y.DocumentTypeDefault.page}),{formik:C}=(0,f.c)({initialValues:{dtId:null,recordId:y,plantId:null,spId:null,siteId:null,disableSKULookup:!1,commitItems:!1,postMetalToFinancials:!1,updateDocDateOnPost:!1},maxAccess:m,validationSchema:h.Ry({dtId:h.Z_().required()}),onSubmit:async e=>{await E({extension:D.y.DocumentTypeDefault.set,record:JSON.stringify(e)}),y?r.ZP.success(V.Edited):(C.setFieldValue("recordId",C.values.dtId),r.ZP.success(V.Added)),N()}}),F=!!C.values.recordId;return(0,n.useEffect)(()=>{!async function(){if(y){let e=await O({extension:D.y.DocumentTypeDefault.get,parameters:"_dtId=".concat(y)});C.setValues({...e.record,recordId:e.record.dtId})}}()},[]),(0,a.jsx)(R.Z,{resourceId:c.i.PUDocumentTypeDefaults,form:C,maxAccess:m,editMode:F,children:(0,a.jsx)(u.R,{children:(0,a.jsx)(I.Q,{children:(0,a.jsxs)(P.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(P.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:x.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(S),name:"dtId",required:!0,label:p.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],readOnly:F,values:C.values,maxAccess:m,onChange:(e,t)=>{C.setFieldValue("dtId",null==t?void 0:t.recordId)},error:C.touched.dtId&&!!C.errors.dtId})}),(0,a.jsx)(P.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:x.r.Plant.qry,name:"plantId",label:p.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Ref"},{key:"name",value:"Name"}],values:C.values,maxAccess:m,onChange:(e,t)=>{C.setFieldValue("plantId",null==t?void 0:t.recordId)},error:C.touched.plantId&&!!C.errors.plantId})}),(0,a.jsx)(P.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:q.$.Site.qry,name:"siteId",label:p.site,values:C.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Ref"},{key:"name",value:"Name"}],maxAccess:m,onChange:(e,t)=>{C.setFieldValue("siteId",null==t?void 0:t.recordId)},error:C.touched.siteId&&!!C.errors.siteId})}),(0,a.jsx)(P.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{name:"commitItems",value:null===(t=C.values)||void 0===t?void 0:t.commitItems,onChange:e=>C.setFieldValue("commitItems",e.target.checked),label:p.commitItems,maxAccess:m})}),(0,a.jsx)(P.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{name:"postMetalToFinancials",value:null===(s=C.values)||void 0===s?void 0:s.postMetalToFinancials,onChange:e=>C.setFieldValue("postMetalToFinancials",e.target.checked),label:p.postMetalToFinancials,maxAccess:m})}),(0,a.jsx)(P.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{name:"disableSKULookup",value:null===(l=C.values)||void 0===l?void 0:l.disableSKULookup,onChange:e=>C.setFieldValue("disableSKULookup",e.target.checked),label:p.dsl,maxAccess:m})}),(0,a.jsx)(P.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{name:"updateDocDateOnPost",value:null===(d=C.values)||void 0===d?void 0:d.updateDocDateOnPost,onChange:e=>C.setFieldValue("updateDocDateOnPost",e.target.checked),label:p.updateDocDateOnPost,maxAccess:m})})]})})})})}var V=()=>{let{getRequest:e,postRequest:t}=(0,n.useContext)(o.$),{platformLabels:s}=(0,n.useContext)(g.l),{stack:P}=(0,m.zY)(),{functionId:h}=(0,y.F)();async function R(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:s=0,_pageSize:a=50}=t;return{...await e({extension:D.y.DocumentTypeDefault.page,parameters:"_startAt=".concat(s,"&_pageSize=").concat(a,"&_functionId=").concat(h)}),_startAt:s}}let{query:{data:f},labels:x,access:v,invalidate:q,refetch:T,paginationParameters:V}=(0,i.J)({queryFn:R,endpointId:D.y.DocumentTypeDefault.page,datasetId:c.i.PUDocumentTypeDefaults}),O=[{field:"commitItems",headerName:x.commitItems,type:"checkbox",flex:1},{field:"dtName",headerName:x.documentType,flex:1},{field:"plantName",headerName:x.plant,flex:1},{field:"siteRef",headerName:x.siteRef,flex:1},{field:"siteName",headerName:x.site,flex:1}];function E(e){P({Component:S,props:{labels:x,recordId:null==e?void 0:e.dtId,maxAccess:v,functionId:h},width:500,height:430,title:x.DocumentTypeDefault})}let N=async()=>{E()},C=async e=>{await t({extension:D.y.DocumentTypeDefault.del,record:JSON.stringify(e)}),q(),r.ZP.success(s.Deleted)};return(0,a.jsxs)(u.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(d.Z,{onAdd:N,maxAccess:v})}),(0,a.jsx)(I.Q,{children:(0,a.jsx)(l.Z,{name:"table",columns:O,gridData:f,rowId:["dtId"],onEdit:e=>{E(e)},onDelete:C,isLoading:!1,pageSize:50,paginationParameters:V,refetch:T,paginationType:"api",maxAccess:v})})]})}},2454:function(e,t,s){"use strict";s.d(t,{y:function(){return n}});let a="PU.asmx/",n={VendorGroups:{qry:a+"qryGRP",page:a+"pageGRP",get:a+"getGRP",set:a+"setGRP",del:a+"delGRP"},PriceList:{qry:a+"qryPRI",del:a+"delPRI",get:a+"getPRI",set:a+"setPRI"},PUOrderStatus:{qry:a+"qryPOS",page:a+"pagePOS",get:a+"getPOS",set:a+"setPOS",del:a+"delPOS"},DeliveryMethods:{qry:a+"qryDM",page:a+"pageDM",get:a+"getDM",set:a+"setDM",del:a+"delDM"},PaymentTerms:{qry:a+"qryPT",page:a+"pagePT",get:a+"getPT",set:a+"setPT",del:a+"delPT"},Vendor:{snapshot:a+"snapshotVEN",qry:a+"qryVEN",page:a+"pageVEN",get:a+"getVEN",set:a+"setVEN",del:a+"delVEN"},Address:{qry:a+"qryAD",page:a+"pageAD",get:a+"getAD",set:a+"setAD",del:a+"delAD"},DocumentTypeDefault:{qry:a+"qryDTD",get:a+"getDTD",set:a+"setDTD",del:a+"delDTD",page:a+"pageDTD"},PurchaseInvoiceHeader:{qry:a+"qryIVC",get:a+"getIVC",get2:a+"get2IVC",level2_PU:a+"level2_PU",set:a+"setIVC",del:a+"delIVC",snapshot:a+"snapshotIVC",set2:a+"set2IVC",post:a+"postIVC",unpost:a+"unpostIVC",generate:a+"generateIVC",preview:a+"previewIVC",sync:a+"syncIVC",verify:a+"verifyIVC"},Invoice:{snapshot:a+"snapshotINV"},PurchaseReturnHeader:{set2:a+"set2IVR",post:a+"postIVR",unpost:a+"unpostIVR",del:a+"delIVR",qry:a+"qryIVR",snapshot:a+"snapshotIVR"},VendorPrice:{get:a+"getPRI2"},ItemCostHistory:{qry:a+"qryIPH"},ItemPromotion:{qry:a+"qryIVIM"},Serials:{qry:a+"qrySRL",import:a+"importSRL",last:a+"lastSRL",sync:a+"syncSRL"},Shipment:{get:a+"getSHP",set2:a+"set2SHP",del:a+"delSHP",page:a+"pageSHP",snapshot:a+"snapshotSHP",post:a+"postSHP",unpost:a+"unpostSHP",gen:a+"genSHP"},ShipmentItem:{qry:a+"qrySHI"},UnpostedOrderPack:{get:a+"openORD",snapshot:a+"snapshotORD"},PurchaseOrder:{page:a+"pageORD",snapshot:a+"snapshotORD",del:a+"delORD",set2:a+"set2ORD",get2:a+"get2ORD",close:a+"closeORD",reopen:a+"reopenORD",terminate:a+"terminateORD",transfer:a+"transfer1ORD"},PurchaseRequisition:{snapshot:a+"snapshotREQ",page:a+"pageREQ",get:a+"getREQ",set:a+"setREQ",del:a+"delREQ",cancel:a+"cancelREQ",reopen:a+"reopenREQ",close:a+"closeREQ"},RequisitionDetail:{qry:a+"qryREI",set:a+"setREI",get:a+"getREI",del:a+"delREI"},QuotationItem:{preview:a+"previewQTI",qry:a+"qryQTI"},OrderItem:{qry:a+"qryORI",set2:a+"set2ORI"},PUDraftReturn:{set2:a+"set2DRE",get:a+"getDRE",page:a+"pageDRE",snapshot:a+"snapshotDRE",del:a+"delDRE",post:a+"postDRE"},PUDraftReturnSerial:{get2:a+"get2DRS",qry:a+"qryDRS",del:a+"delDRS",append:a+"appendDRS",batch:a+"batchDRS"},FinancialGroup:{qry:a+"qryFII",set2:a+"set2FII"},PUInvoiceRetBalance:{balance:a+"balanceRET"},ItemLastPurchaseInfo:{last:a+"lastIVI"},PurchaseQuotation:{page:a+"pageQTN",set2:a+"set2QTN",get:a+"getQTN",del:a+"delQTN",snapshot:a+"snapshotQTN"},GenerateQTNPRPack:{gen:a+"genQTN"},GeneratePOPRPack:{gen:a+"genPO",gen2:a+"gen2PO"}}},63165:function(e,t,s){"use strict";s.d(t,{F:function(){return r}});var a=s(5632),n=s(2784);let r=()=>{let e=(0,a.useRouter)(),[t,s]=(0,n.useState)(e.query);return t}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=23908)}),_N_E=e.O()}]);