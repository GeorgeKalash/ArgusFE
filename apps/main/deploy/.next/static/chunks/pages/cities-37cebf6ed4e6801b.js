(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50821],{48310:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cities",function(){return n(10705)}])},10705:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return j}});var r=n(52322),t=n(2784),s=n(62202),i=n(69387),c=n(27723),d=n(65950),l=n(38449),o=n(26612),u=n(31389),m=n(60218),h=n(48601),f=n(82737),x=n(71987),y=n(80983),I=n(5088),v=n(8661),p=n(62362),C=n(19473),g=n(19689);function N(e){var a;let{labels:n,recordId:i,maxAccess:c}=e,[N,_]=(0,t.useState)(!!i),{platformLabels:Z}=(0,t.useContext)(C.l),{getRequest:j,postRequest:w}=(0,t.useContext)(d.$),A=(0,x.E)({endpointId:l.r.City.page}),{formik:F}=(0,y.c)({initialValues:{recordId:null,name:"",flName:"",reference:"",countryId:null,stateId:null,countryName:"",stateName:"",isInactive:!1},maxAccess:c,validateOnChange:!0,validationSchema:h.Ry({name:h.Z_().required(),reference:h.Z_().required(),countryId:h.Z_().required()}),onSubmit:async e=>{let a=e.recordId,n=await w({extension:l.r.City.set,record:JSON.stringify(e)});a?s.ZP.success(Z.Edited):(s.ZP.success(Z.Added),F.setValues({...e,recordId:n.recordId})),_(!0),A()}});return(0,t.useEffect)(()=>{!async function(){if(i){let e=await j({extension:l.r.City.get,parameters:"_recordId=".concat(i)});F.setValues({...e.record,isInactive:!!e.record.isInactive})}}()},[]),(0,r.jsx)(f.Z,{resourceId:o.i.Cities,form:F,maxAccess:c,editMode:N,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(p.Q,{children:(0,r.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.Z,{name:"reference",label:n.reference,value:F.values.reference,required:!0,maxAccess:c,onChange:F.handleChange,onClear:()=>F.setFieldValue("reference",""),error:F.touched.reference&&F.errors.reference})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.Z,{name:"name",label:n.name,value:F.values.name,required:!0,maxAccess:c,onChange:F.handleChange,onClear:()=>F.setFieldValue("name",""),error:F.touched.name&&F.errors.name})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.Z,{name:"flName",label:n.flName,value:F.values.flName,maxAccess:c,maxLength:"40",onChange:F.handleChange,onClear:()=>F.setFieldValue("flName",""),error:F.touched.flName&&!!F.errors.flName})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{endpointId:l.r.Country.qry,name:"countryId",label:n.country,valueField:"recordId",displayField:"name",readOnly:N,displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:F.values,required:!0,maxAccess:c,onChange:(e,a)=>{F.setFieldValue("countryId",(null==a?void 0:a.recordId)||"")},error:F.touched.countryId&&F.errors.countryId})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{endpointId:l.r.State.qry,parameters:F.values.countryId&&"_countryId=".concat(F.values.countryId),name:"stateId",label:n.state,valueField:"recordId",displayField:"name",readOnly:(N||!F.values.countryId)&&!0,values:F.values,onChange:(e,a)=>{F.setFieldValue("stateId",null==a?void 0:a.recordId)},maxAccess:c})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"isInactive",value:null===(a=F.values)||void 0===a?void 0:a.isInactive,onChange:e=>F.setFieldValue("isInactive",e.target.checked),label:n.isInactive,maxAccess:c})})]})})})})}var _=n(61802),Z=n(33625),j=()=>{let{getRequest:e,postRequest:a}=(0,t.useContext)(d.$),{platformLabels:n}=(0,t.useContext)(C.l),{stack:m}=(0,_.zY)();async function h(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:r=50}=a;return{...await e({extension:l.r.City.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(r,"&_filter=&_countryId=0&_stateId=0")}),_startAt:n}}let{query:{data:f},labels:y,access:I,search:v,clear:g,refetch:j,paginationParameters:w}=(0,x.J)({queryFn:h,endpointId:l.r.City.page,datasetId:o.i.Cities,search:{endpointId:l.r.City.snapshot,searchFn:A}});async function A(a){let{qry:n}=a;return await e({extension:l.r.City.snapshot,parameters:"_filter=".concat(n,"&_stateId=0&_countryId=0")})}let F=(0,x.E)({endpointId:l.r.City.page}),P=[{field:"reference",headerName:y.reference,flex:1},{field:"name",headerName:y.name,flex:1},{field:"flName",headerName:y.flName,flex:1},{field:"countryName",headerName:y.country,flex:1},{field:"stateName",headerName:y.state,flex:1}],b=async e=>{try{await a({extension:l.r.City.del,record:JSON.stringify(e)}),F(),s.ZP.success(n.Deleted)}catch(e){}};function S(e){m({Component:N,props:{labels:y,recordId:e,maxAccess:I},width:500,height:460,title:y.cities})}return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(Z.g,{children:(0,r.jsx)(c.Z,{onAdd:()=>{S()},maxAccess:I,onSearch:v,onSearchClear:g,labels:y,inputSearch:!0,refetch:j})}),(0,r.jsx)(p.Q,{children:(0,r.jsx)(i.Z,{columns:P,gridData:f,rowId:["recordId"],onEdit:e=>{S(null==e?void 0:e.recordId)},onDelete:b,maxAccess:I,pageSize:50,paginationParameters:w,paginationType:"api"})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=48310)}),_N_E=e.O()}]);