(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85039],{48856:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pm-model-maker",function(){return a(51429)}])},51429:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return E}});var d=a(52322),n=a(2784),t=a(71987),r=a(65950),o=a(69387),i=a(62202),s=a(61802),u=a(26612),c=a(31389),v=a(33625),m=a(62362),p=a(19473),I=a(98345),h=a(7121),x=a(36908),f=a(63518),y=a(29326),b=a(9522),g=a(60218),D=a(48601),C=a(82737),F=a(8661),_=a(80983),j=a(93883),k=a(39812),Z=a(27423),P=a(91406),N=a(38449),w=a(90587),V=a(5088),M=a(21581),A=a(53164),S=a(89330),O=a(65215);function T(e){var l,a,o,v,x,y,b,T;let{labels:z,access:q,setStore:R,store:L}=e,{getRequest:G,postRequest:E}=(0,n.useContext)(r.$),{platformLabels:J}=(0,n.useContext)(p.l),{stack:W}=(0,s.zY)(),{recordId:$}=L,{documentType:B,maxAccess:Y,changeDT:X}=(0,I.H)({functionId:h.J.ModelMaker,access:q,enabled:!$}),Q=(0,t.E)({endpointId:f.z.ModelMaker.page}),{formik:U}=(0,_.c)({documentType:{key:"dtId",value:null==B?void 0:B.dtId},initialValues:{recordId:$,dtId:null,reference:null,date:new Date,threeDPId:null,laborId:null,startDate:null,endDate:null,productionClassId:null,productionStandardId:null,collectionId:null,itemGroupId:null,designGroupId:null,designFamilyId:null,metalId:null,weight:0,wip:null,notes:"",status:1,productionLineId:null},maxAccess:Y,validateOnChange:!0,validationSchema:D.Ry({laborId:D.Z_().required(),threeDPId:D.Z_().required(),date:D.hT().required(),startDate:D.hT().required(),endDate:D.hT().required()}),onSubmit:async e=>{let l=await E({extension:f.z.ModelMaker.set,record:JSON.stringify({...e,date:(0,k.ku)(e.date),startDate:(0,k.ku)(e.startDate),endDate:(0,k.ku)(e.endDate)})});i.ZP.success($?J.Edited:J.Added),el(null==l?void 0:l.recordId),Q()}}),H=!!U.values.recordId,K=2==U.values.wip,ee=3==U.values.status;async function el(e){var l,a,d;let n=await G({extension:f.z.ModelMaker.get,parameters:"_recordId=".concat(e)});U.setValues({...n.record,date:(0,k.a1)(null==n?void 0:null===(l=n.record)||void 0===l?void 0:l.date),startDate:(0,k.a1)(null==n?void 0:null===(a=n.record)||void 0===a?void 0:a.startDate),endDate:(0,k.a1)(null==n?void 0:null===(d=n.record)||void 0===d?void 0:d.endDate)}),R(e=>{var l,a;return{...e,recordId:null==n?void 0:null===(l=n.record)||void 0===l?void 0:l.recordId,isClosed:(null==n?void 0:null===(a=n.record)||void 0===a?void 0:a.wip)===2}})}let ea=[{key:"Locked",condition:ee,disabled:ee},{key:"Unlocked",condition:!ee,onClick:async function(){var e,l,a,d,n;let t=await E({extension:f.z.ModelMaker.post,record:JSON.stringify({...U.values,date:(0,k.ku)(null==U?void 0:null===(e=U.values)||void 0===e?void 0:e.date),startDate:(null==U?void 0:null===(l=U.values)||void 0===l?void 0:l.startDate)?(0,k.ku)(null==U?void 0:null===(a=U.values)||void 0===a?void 0:a.startDate):null,endDate:(null==U?void 0:null===(d=U.values)||void 0===d?void 0:d.endDate)?(0,k.ku)(null==U?void 0:null===(n=U.values)||void 0===n?void 0:n.endDate):null})});i.ZP.success(J.Posted),Q(),el(t.recordId)},disabled:!H||!K},{key:"Close",condition:!K,onClick:async function(){var e,l,a,d,n;let t=await E({extension:f.z.ModelMaker.close,record:JSON.stringify({...U.values,date:(0,k.ku)(null==U?void 0:null===(e=U.values)||void 0===e?void 0:e.date),startDate:(null==U?void 0:null===(l=U.values)||void 0===l?void 0:l.startDate)?(0,k.ku)(null==U?void 0:null===(a=U.values)||void 0===a?void 0:a.startDate):null,endDate:(null==U?void 0:null===(d=U.values)||void 0===d?void 0:d.endDate)?(0,k.ku)(null==U?void 0:null===(n=U.values)||void 0===n?void 0:n.endDate):null})});i.ZP.success(J.Closed),Q(),el(t.recordId)},disabled:K||!H},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!K},{key:"Reopen",condition:K,onClick:async function(){var e,l,a,d,n;let t=await E({extension:f.z.ModelMaker.reopen,record:JSON.stringify({...U.values,date:(0,k.ku)(null==U?void 0:null===(e=U.values)||void 0===e?void 0:e.date),startDate:(null==U?void 0:null===(l=U.values)||void 0===l?void 0:l.startDate)?(0,k.ku)(null==U?void 0:null===(a=U.values)||void 0===a?void 0:a.startDate):null,endDate:(null==U?void 0:null===(d=U.values)||void 0===d?void 0:d.endDate)?(0,k.ku)(null==U?void 0:null===(n=U.values)||void 0===n?void 0:n.endDate):null})});i.ZP.success(J.Reopened),Q(),el(t.recordId)},disabled:!K||!H||ee},{key:"threeDPrinting",condition:!0,onClick:async()=>{var e;W({Component:A.Z,props:{recordId:null===(e=U.values)||void 0===e?void 0:e.threeDPId}})},disabled:!U.values.threeDPId}];(0,n.useEffect)(()=>{$&&el($)},[]);let ed=async e=>await G({extension:f.z.Printing.get,parameters:"_recordId=".concat(e)}),en=async e=>await G({extension:f.z.ThreeDDesign.get,parameters:"_recordId=".concat(e)});return(0,d.jsx)(C.Z,{resourceId:u.i.ModelMaker,functionId:h.J.ModelMaker,form:U,maxAccess:Y,editMode:H,actions:ea,disabledSubmit:K,children:(0,d.jsx)(c.R,{children:(0,d.jsx)(m.Q,{children:(0,d.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:N.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(h.J.ModelMaker),name:"dtId",label:z.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:H,valueField:"recordId",displayField:["reference","name"],values:U.values,maxAccess:Y,onChange:async(e,l)=>{if(X(l),U.setFieldValue("productionLineId",null),null==l?void 0:l.recordId){let{record:e}=await G({extension:f.z.DocumentTypeDefault.get,parameters:"_dtId=".concat(null==l?void 0:l.recordId)});U.setFieldValue("productionLineId",null==e?void 0:e.productionLineId),(null==e?void 0:e.productionLineId)&&(U.setFieldValue("threeDPRef",""),U.setFieldValue("threeDPId",null),U.setFieldValue("designGroupId",null),U.setFieldValue("designFamilyId",null),U.setFieldValue("productionClassId",null),U.setFieldValue("productionStandardId",null),U.setFieldValue("collectionId",null),U.setFieldValue("itemGroupId",null),U.setFieldValue("metalId",null),U.setFieldValue("productionClassRef",""),U.setFieldValue("productionClassName",""))}U.setFieldValue("dtId",null==l?void 0:l.recordId)},error:U.touched.dtId&&!!U.errors.dtId})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(V.Z,{name:"reference",label:z.reference,value:null==U?void 0:null===(l=U.values)||void 0===l?void 0:l.reference,maxAccess:!H&&Y,readOnly:H,onChange:U.handleChange,onClear:()=>U.setFieldValue("reference",null),error:U.touched.reference&&!!U.errors.reference})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:w.u.ProductionLine.qry,parameters:"_startAt=0&_pageSize=1000",values:U.values,name:"productionLineId",label:z.productionLine,valueField:"recordId",displayField:["reference","name"],maxAccess:Y,onChange:(e,l)=>{U.setFieldValue("productionLineId",(null==l?void 0:l.recordId)||null)},readOnly:!0,error:U.touched.productionLineId&&U.errors.productionLineId})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(S.Z,{name:"date",required:!0,label:z.date,value:U.values.date,onChange:U.setFieldValue,maxAccess:Y,readOnly:K,onClear:()=>U.setFieldValue("date",null),error:U.touched.date&&!!U.errors.date})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(j.Z,{name:"startDate",required:!0,label:z.startDate,value:U.values.startDate,onChange:U.setFieldValue,maxAccess:Y,readOnly:K,onClear:()=>U.setFieldValue("startDate",null),error:U.touched.startDate&&!!U.errors.startDate})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(j.Z,{name:"endDate",required:!0,label:z.endDate,value:U.values.endDate,onChange:U.setFieldValue,maxAccess:Y,readOnly:K,onClear:()=>U.setFieldValue("endDate",null),error:U.touched.endDate&&!!U.errors.endDate})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:w.u.Labor.qry,parameters:"_startAt=0&_pageSize=200&_params=",name:"laborId",required:!0,readOnly:K,label:z.labor,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:U.values,onChange:(e,l)=>{U.setFieldValue("laborId",(null==l?void 0:l.recordId)||null)},error:U.touched.laborId&&!!U.errors.laborId})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(Z.U,{endpointId:f.z.Printing.snapshot2,parameters:{_productionLineId:U.values.productionLineId||0},valueField:"reference",displayField:"reference",name:"threeDPId",label:z.print,form:U,readOnly:K,valueShow:"threeDPRef",maxAccess:Y,editMode:H,secondDisplayField:!1,required:!0,columnsInDropDown:[{key:"reference",value:"Ref"},{key:"date",value:"Date",type:"date"}],onChange:async(e,l)=>{if(null==l?void 0:l.recordId){var a,d,n,t,r,o,i;let e=await ed(null==l?void 0:l.recordId),s=await en(null==l?void 0:l.threeDDId);U.setFieldValue("designFamilyId",(null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.designFamilyId)||null),U.setFieldValue("designGroupId",(null==e?void 0:null===(d=e.record)||void 0===d?void 0:d.designGroupId)||null),U.setFieldValue("productionClassId",(null==s?void 0:null===(n=s.record)||void 0===n?void 0:n.productionClassId)||null),U.setFieldValue("productionStandardId",(null==s?void 0:null===(t=s.record)||void 0===t?void 0:t.productionStandardId)||null),U.setFieldValue("collectionId",(null==s?void 0:null===(r=s.record)||void 0===r?void 0:r.collectionId)||null),U.setFieldValue("itemGroupId",(null==s?void 0:null===(o=s.record)||void 0===o?void 0:o.itemGroupId)||null),U.setFieldValue("metalId",(null==s?void 0:null===(i=s.record)||void 0===i?void 0:i.metalId)||null)}U.setFieldValue("threeDPRef",null==l?void 0:l.reference),U.setFieldValue("threeDPId",null==l?void 0:l.recordId)},errorCheck:"threeDPId"})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:w.u.DesignFamily.qry,name:"designFamilyId",label:z.familyGroup,valueField:"recordId",displayField:"name",values:U.values,readOnly:!0,onChange:(e,l)=>U.setFieldValue("designFamilyId",(null==l?void 0:l.recordId)||null),error:(null==U?void 0:null===(a=U.touched)||void 0===a?void 0:a.designFamilyId)&&!!(null==U?void 0:null===(o=U.errors)||void 0===o?void 0:o.designFamilyId),maxAccess:Y})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:w.u.DesignGroup.qry,name:"designGroupId",label:z.designGroup,valueField:"recordId",displayField:"name",values:U.values,readOnly:!0,onChange:(e,l)=>U.setFieldValue("designGroupId",(null==l?void 0:l.recordId)||null),error:(null==U?void 0:null===(v=U.touched)||void 0===v?void 0:v.designGroupId)&&!!(null==U?void 0:null===(x=U.errors)||void 0===x?void 0:x.designGroupId),maxAccess:Y})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:w.u.ProductionClass.qry,values:U.values,name:"productionClassId",label:z.productionClass,valueField:"recordId",displayField:"name",maxAccess:Y,readOnly:!0,onChange:(e,l)=>{U.setFieldValue("productionClassId",(null==l?void 0:l.recordId)||null)},error:U.touched.productionClassId&&!!U.errors.productionClassId})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:w.u.ProductionStandard.qry,values:U.values,name:"productionStandardId",label:z.productionStandard,valueField:"recordId",displayField:"reference",maxAccess:Y,readOnly:!0,onChange:(e,l)=>U.setFieldValue("productionStandardId",(null==l?void 0:l.recordId)||null),error:U.touched.productionStandardId&&!!U.errors.productionStandardId})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:O.$.Collections.qry,name:"collectionId",label:z.collection,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:!0,maxAccess:Y,values:U.values,onChange:(e,l)=>U.setFieldValue("collectionId",(null==l?void 0:l.recordId)||null),error:(null==U?void 0:null===(y=U.touched)||void 0===y?void 0:y.collectionId)&&!!(null==U?void 0:null===(b=U.errors)||void 0===b?void 0:b.collectionId)})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:O.$.Group.qry,parameters:"_startAt=0&_pageSize=1000",values:U.values,name:"itemGroupId",label:z.itemGroup,valueField:"recordId",displayField:["reference","name"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:!0,maxAccess:Y,onChange:(e,l)=>U.setFieldValue("itemGroupId",(null==l?void 0:l.recordId)||null),error:U.touched.itemGroupId&&U.errors.itemGroupId})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(F.Z,{endpointId:O.$.Metals.qry,name:"metalId",label:z.metal,valueField:"recordId",displayField:"reference",values:U.values,readOnly:!0,onChange:(e,l)=>U.setFieldValue("metalId",null==l?void 0:l.recordId),error:U.touched.metalId&&!!U.errors.metalId,maxAccess:Y})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(P.Z,{name:"weight",maxAccess:Y,label:z.weight,value:U.values.weight,maxLength:10,decimalScale:2,readOnly:K,onChange:e=>U.setFieldValue("weight",e.target.value),onClear:()=>{U.setFieldValue("weight",0)}})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(V.Z,{name:"statusName",label:z.status,value:null==U?void 0:null===(T=U.values)||void 0===T?void 0:T.statusName,maxAccess:Y,readOnly:!0,onChange:U.handleChange,onClear:()=>U.setFieldValue("statusName",null),error:U.touched.statusName&&!!U.errors.statusName})}),(0,d.jsx)(g.ZP,{item:!0,xs:12,children:(0,d.jsx)(M.Z,{name:"notes",label:z.notes,value:U.values.notes,rows:3,editMode:H,maxAccess:Y,readOnly:K,onChange:e=>U.setFieldValue("notes",e.target.value),onClear:()=>U.setFieldValue("notes",null),error:U.touched.notes&&!!U.errors.notes})})]})})})})}var z=a(76399),q=a(67920),R=a(54074);function L(e){var l,a;let{store:t,labels:o,maxAccess:s}=e,{getRequest:u,postRequest:I}=(0,n.useContext)(r.$),{platformLabels:h}=(0,n.useContext)(p.l),{recordId:x,isClosed:y}=t,{schema:b,requiredFields:C}=(0,q.m)({itemId:e=>null==e?void 0:e.itemId,size:e=>null==e?void 0:e.size,pcs:e=>(null==e?void 0:e.pcs)<32767},!0,s,"items"),{formik:F}=(0,_.c)({initialValues:{items:[{id:1}]},maxAccess:s,validateOnChange:!0,validationSchema:D.Ry({items:D.IX().of(b)}),onSubmit:async e=>{let l=null==e?void 0:e.items.filter(e=>{var l;return null===(l=Object.values(C))||void 0===l?void 0:l.every(l=>l(e))}).map((e,l)=>{let{id:a,itemCategoryName:d,rawCategoryName:n,itemCategoryRef:t,rawCategoryRef:r,...o}=e;return{...o,seqNo:l+1}});await I({extension:f.z.ModellingMaterial.set2,record:JSON.stringify({modelId:x,items:l})}),i.ZP.success(h.Edited)}}),j=[{component:"resourcelookup",label:o.sku,name:"itemId",props:{endpointId:O.$.Materials.snapshot,displayField:"sku",valueField:"recordId",columnsInDropDown:[{key:"sku",value:"Sku"},{key:"name",value:"Name"}],mapping:[{from:"recordId",to:"itemId"},{from:"name",to:"itemName"},{from:"sku",to:"sku"},{from:"categoryName",to:"itemCategoryName"}],displayFieldWidth:3},async onChange(e){let{row:{update:l,newRow:a}}=e;if(a.itemId){let{record:e}=await u({extension:O.$.ItemProduction.get,parameters:"_recordId=".concat(a.itemId)});l({rawCategoryName:null==e?void 0:e.rmcName})}}},{component:"textfield",label:o.itemName,name:"itemName",props:{readOnly:!0}},{component:"textfield",label:o.category,name:"itemCategoryName",props:{readOnly:!0}},{component:"textfield",label:o.rawCategory,name:"rawCategoryName",props:{readOnly:!0}},{component:"numberfield",label:o.pcs,name:"pcs",props:{maxLength:7,decimalScale:0}},{component:"textfield",label:o.size,name:"size",props:{maxLength:10}},{component:"numberfield",label:o.weight,name:"weight",props:{maxLength:10,decimalScale:2}}];(0,n.useEffect)(()=>{!async function(){if(x){let l=await u({extension:f.z.ModellingMaterial.qry,parameters:"_modelId=".concat(x)});if((null==l?void 0:l.list.length)>0){var e;let a=null==l?void 0:null===(e=l.list)||void 0===e?void 0:e.map((e,l)=>({...e,id:l+1}));F.setFieldValue("items",a)}}}()},[]);let k=F.values.items.reduce((e,l)=>{var a;return e+(parseFloat(null==l?void 0:null===(a=l.pcs)||void 0===a?void 0:a.toString().replace(/,/g,""))||0)},0),Z=F.values.items.reduce((e,l)=>{var a;return e+(parseFloat(null==l?void 0:null===(a=l.weight)||void 0===a?void 0:a.toString().replace(/,/g,""))||0)},0);return(0,d.jsx)(R.Z,{onSave:F.handleSubmit,maxAccess:s,editMode:!!x,disabledSubmit:y,isParentWindow:!1,children:(0,d.jsxs)(c.R,{children:[(0,d.jsx)(m.Q,{children:(0,d.jsx)(z._,{name:"materials",maxAccess:s,onChange:e=>F.setFieldValue("items",e),value:null===(l=F.values)||void 0===l?void 0:l.items,error:null===(a=F.errors)||void 0===a?void 0:a.items,columns:j,allowDelete:!y,disabled:y})}),(0,d.jsx)(v.g,{children:(0,d.jsxs)(g.ZP,{container:!0,justifyContent:"flex-end",spacing:2,children:[(0,d.jsx)(g.ZP,{item:!0,xs:3,children:(0,d.jsx)(P.Z,{name:"totalPcs",maxAccess:s,label:o.totalPcs,value:k,readOnly:!0})}),(0,d.jsx)(g.ZP,{item:!0,xs:3,children:(0,d.jsx)(P.Z,{name:"totalWgt",maxAccess:s,label:o.totalWgt,value:Z,readOnly:!0})})]})})]})})}function G(e){let{labels:l,access:a,recordId:t}=e,[r,o]=(0,n.useState)(0),[i,s]=(0,n.useState)({recordId:t,isClosed:!1}),u=[{label:l.modelling},{label:l.materials,disabled:!i.recordId}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b.Y,{tabs:u,activeTab:r,setActiveTab:o,maxAccess:a}),(0,d.jsx)(y.Z,{index:0,value:r,maxAccess:a,children:(0,d.jsx)(T,{labels:l,access:a,setStore:s,store:i})}),(0,d.jsx)(y.Z,{index:1,value:r,maxAccess:a,children:(0,d.jsx)(L,{access:a,labels:l,store:i})})]})}var E=()=>{let{postRequest:e,getRequest:l}=(0,n.useContext)(r.$),{platformLabels:a}=(0,n.useContext)(p.l),{stack:y}=(0,s.zY)(),{query:{data:b},filterBy:g,refetch:D,labels:C,access:F,paginationParameters:_,invalidate:j}=(0,t.J)({queryFn:Z,endpointId:f.z.ModelMaker.page,datasetId:u.i.ModelMaker,filter:{filterFn:P}}),k=[{field:"dtName",headerName:C.documentType,flex:1},{field:"reference",headerName:C.reference,flex:1},{field:"date",headerName:C.date,flex:1,type:"date"},{field:"startDate",headerName:C.startDate,flex:1,type:"date"},{field:"endDate",headerName:C.endDate,flex:1,type:"date"},{field:"threeDPRef",headerName:C.print,flex:1},{field:"laborRef",headerName:C.labor,flex:1},{field:"weight",headerName:C.weight,flex:1,type:"number"},{field:"productionLineName",headerName:C.productionLine,flex:1},{field:"rsName",headerName:C.rsName,flex:1},{field:"statusName",headerName:C.status,flex:1},{field:"wipName",headerName:C.wip,flex:1},{field:"notes",headerName:C.notes,flex:1}];async function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:d=50,params:n=[]}=e;return{...await l({extension:f.z.ModelMaker.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(d,"&_sortBy=recordId desc&_params=").concat(n,"&filter=")}),_startAt:a}}async function P(e){let{filters:a,pagination:d}=e;return a.qry?await l({extension:f.z.ModelMaker.snapshot,parameters:"_filter=".concat(a.qry)}):Z({_startAt:d._startAt||0,params:null==a?void 0:a.params})}let{proxyAction:N}=(0,I.G)({functionId:h.J.ModelMaker,action:V}),w=async()=>{N()};async function V(e){y({Component:G,props:{labels:C,access:F,recordId:e},width:900,height:680,title:C.modelMaker})}let M=async l=>{await e({extension:f.z.ModelMaker.del,record:JSON.stringify(l)}),j(),i.ZP.success(a.Deleted)};return(0,d.jsxs)(c.R,{children:[(0,d.jsx)(v.g,{children:(0,d.jsx)(x.Z,{onAdd:w,maxAccess:F,filterBy:g,reportName:"PMMDL"})}),(0,d.jsx)(m.Q,{children:(0,d.jsx)(o.Z,{name:"table",columns:k,gridData:b,rowId:["recordId"],onEdit:e=>{V(null==e?void 0:e.recordId)},refetch:D,onDelete:M,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,maxAccess:F,paginationParameters:_,paginationType:"api"})})]})}},67920:function(e,l,a){"use strict";a.d(l,{m:function(){return n}});var d=a(48601);function n(e,l,a){var n;let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"items",r={...e};return null==a||null===(n=a.record)||void 0===n||n.controls.forEach(e=>{let{controlId:l,accessLevel:a}=e,[d,n]=null==l?void 0:l.split(".");d!==t||2!==a||n in r||(r[n]=e=>(null==e?void 0:e[n])!=null),(1===a||4===a)&&n in r&&delete r[n]}),{schema:d.Ry().shape({...Object.keys(r).reduce((e,a)=>(e[a]=d.nK().nullable().test(function(e){var d;let n=this.parent,[,t]=this.path.match(/^(\w+)\[(\d+)\]/)||[],o=(null===(d=this.options.context)||void 0===d?void 0:d[t])||[];if(l||!l&&o.length>1){if(null!==n[a]&&void 0!==n[a]&&0!==n[a]&&""!==r[a]&&!r[a](n))return!1;if(!Object.entries(r).some(e=>{let[,l]=e;return!!l(n)}))return!0}return!!r[a](n)&&void 0!==e}),e),{})}),requiredFields:r}}},29326:function(e,l,a){"use strict";var d=a(52322);a(2784);var n=a(23925),t=a(13980),r=a.n(t),o=a(95291),i=a.n(o),s=a(65947);let u=e=>{var l,a,t;let{children:r,value:o,index:u,maxAccess:c,...v}=e,m="".concat(e.name||"tab",".").concat(u),{accessLevel:p}=null!==(t=(null!==(a=null==c?void 0:null===(l=c.record)||void 0===l?void 0:l.controls)&&void 0!==a?a:[]).find(e=>e.controlId===m))&&void 0!==t?t:{accessLevel:0};if(p===s.A1)return null;let I=o===u;return(0,d.jsx)(n.Z,{role:"tabpanel",hidden:!I,id:"simple-tabpanel-".concat(u),"aria-labelledby":"simple-tab-".concat(u),className:"".concat(i().tabPanel," ").concat(I?i().active:i().hidden),...v,children:r})};u.propTypes={children:r().node,index:r().number.isRequired,value:r().number.isRequired},l.Z=u},9522:function(e,l,a){"use strict";a.d(l,{Y:function(){return v}});var d=a(52322),n=a(23925),t=a(54582),r=a(68696),o=a(44258),i=a(2784),s=a(99266),u=a(52614),c=a.n(u);let v=e=>{var l,a,u,v,m;let{tabs:p,activeTab:I,setActiveTab:h,maxAccess:x,name:f="tab"}=e,y=(null==x?void 0:null===(a=x.record)||void 0===a?void 0:null===(l=a.controls)||void 0===l?void 0:l.filter(e=>{var l;return 4===e.accessLevel&&(null===(l=e.controlId)||void 0===l?void 0:l.startsWith("".concat(f,".")))}).map(e=>e.controlId.split(".")[1]))||[],b=null==p?void 0:null===(u=p.map((e,l)=>({...e,id:l})))||void 0===u?void 0:u.filter((e,l)=>!y.includes(String(l))),g=null===(v=b[I])||void 0===v?void 0:v.id,D=null===(m=b[I])||void 0===m?void 0:m.disabled;return(0,i.useEffect)(()=>{g>=0&&!D&&I!=g&&h(g)},[]),(0,d.jsx)(n.Z,{className:c().tabsContainer,children:(0,d.jsx)(n.Z,{className:c().tabsWrapper,children:(0,d.jsx)(t.Z,{value:I,onChange:(e,l)=>h(l),variant:"scrollable",scrollButtons:b.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:c().tabsIndicator},className:c().tabs,children:null==b?void 0:b.map(e=>(0,d.jsx)(r.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(c().tabName," ").concat(e.disabled?c().tabDisabled:""),classes:{root:c().tabRoot,selected:c().selectedTab},label:(0,d.jsxs)(n.Z,{display:"flex",alignItems:"center",children:[(0,d.jsx)("span",{children:e.label}),e.id===I&&(null==e?void 0:e.onRefetch)&&(0,d.jsx)(o.Z,{size:"small",className:c().refreshButton,onClick:l=>{l.stopPropagation(),e.onRefetch()},children:(0,d.jsx)(s.Z,{className:c().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[92515,2494,36908,44129,38096,53164,49774,92888,40179],function(){return e(e.s=48856)}),_N_E=e.O()}]);