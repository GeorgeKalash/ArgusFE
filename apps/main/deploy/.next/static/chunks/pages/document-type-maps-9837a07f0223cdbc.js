(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20445],{49474:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/document-type-maps",function(){return t(88203)}])},88203:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var o=t(52322),r=t(2784),d=t(62202),a=t(69387),i=t(36908),c=t(65950),u=t(38449),l=t(26612),s=t(71987),m=t(31389),I=t(33625),f=t(62362),F=t(61802),p=t(60218),v=t(48601),x=t(82737),y=t(84100),g=t(8661),T=t(80983),h=t(19689),_=t(19473);function D(e){var n;let{labels:t,maxAccess:a,recordId:i,record:I}=e,{getRequest:F,postRequest:D}=(0,r.useContext)(c.$),{platformLabels:S}=(0,r.useContext)(_.l),N=(0,s.E)({endpointId:u.r.DocumentTypeMap.page}),{formik:Z}=(0,T.c)({initialValues:{recordId:i||null,fromFunctionId:"",fromDTId:"",toFunctionId:"",decimals:"",profileId:"",currencyType:"",currencyTypeName:"",sale:!1,useSameReference:!1,dtId:"",symbol:"",fromFunctionName:"",toFunctionName:"",fromDTName:"",...I},maxAccess:a,validateOnChange:!0,validationSchema:v.Ry({fromFunctionId:v.Z_().required(),fromDTId:v.Z_().required(),toFunctionId:v.Z_().required(),dtId:v.Z_().required()}),onSubmit:async e=>{let n=Z.values.fromFunctionId,t=Z.values.fromDTId,o=Z.values.toFunctionId;await D({extension:u.r.DocumentTypeMap.set,record:JSON.stringify(e)}),d.ZP.success(n||t||o?S.Edited:S.Added),Z.setValues({...e,recordId:String(e.fromFunctionId)+String(e.fromDTId)+String(e.toFunctionId)}),N()}}),j=!!Z.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(I&&I.fromFunctionId&&I.fromDTId&&I.toFunctionId){let e=await F({extension:u.r.DocumentTypeMap.get,parameters:"_fromFunctionId=".concat(I.fromFunctionId,"&_fromDTId=").concat(I.fromDTId,"&_toFunctionId=").concat(I.toFunctionId)});Z.setValues({...e.record,recordId:String(e.record.fromFunctionId)+String(e.record.fromDTId)+String(e.record.toFunctionId)})}}()},[]),(0,o.jsx)(x.Z,{resourceId:l.i.DocumentTypeMaps,form:Z,maxAccess:a,editMode:j,children:(0,o.jsx)(m.R,{children:(0,o.jsx)(f.Q,{children:(0,o.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,o.jsx)(p.ZP,{item:!0,xs:12,children:(0,o.jsx)(g.Z,{datasetId:y.v.SYSTEM_FUNCTION,name:"fromFunctionId",label:t.fromFunction,valueField:"key",displayField:"value",readOnly:j,maxAccess:a,values:Z.values,onChange:(e,n)=>{n?(Z&&Z.setFieldValue("fromFunctionId",null==n?void 0:n.key),Z&&Z.setFieldValue("fromFunctionName",null==n?void 0:n.value)):(Z&&Z.setFieldValue("fromFunctionId",""),Z&&Z.setFieldValue("fromFunctionName","")),Z&&Z.setFieldValue("fromDTId","")},error:Z.touched.fromFunctionId&&!!Z.errors.fromFunctionId})}),(0,o.jsx)(p.ZP,{item:!0,xs:12,children:(0,o.jsx)(g.Z,{endpointId:Z.values.fromFunctionId&&u.r.DocumentType.qry,name:"fromDTId",label:t.fromDocument,valueField:"recordId",displayField:"name",readOnly:j,values:Z.values,parameters:Z.values.fromFunctionId&&(Z.values.fromFunctionId?"_dgId=".concat(j?"0":Z.values.fromFunctionId,"&_startAt=",0,"&_pageSize=",1e3):"_dgId=0&_startAt=".concat(0,"&_pageSize=",1e3)),maxAccess:a,onChange:(e,n)=>{Z.setFieldValue("fromDTId",null==n?void 0:n.recordId)},error:Z.touched.fromDTId&&!!Z.errors.fromDTId})}),(0,o.jsx)(p.ZP,{item:!0,xs:12,children:(0,o.jsx)(g.Z,{datasetId:y.v.SYSTEM_FUNCTION,name:"toFunctionId",label:t.toFunction,readOnly:j,valueField:"key",displayField:"value",maxAccess:a,values:Z.values,onChange:(e,n)=>{n?(Z&&Z.setFieldValue("toFunctionId",null==n?void 0:n.key),Z&&Z.setFieldValue("toFunctionName",null==n?void 0:n.value)):(Z&&Z.setFieldValue("toFunctionId",""),Z&&Z.setFieldValue("toFunctionName","")),Z&&Z.setFieldValue("dtId","")},error:Z.touched.toFunctionId&&!!Z.errors.toFunctionId})}),(0,o.jsx)(p.ZP,{item:!0,xs:12,children:(0,o.jsx)(g.Z,{endpointId:Z.values.toFunctionId&&u.r.DocumentType.qry,name:"dtId",label:t.toDocument,valueField:"recordId",displayField:"name",maxAccess:a,values:Z.values,parameters:Z.values.toFunctionId&&(Z.values.toFunctionId?"_dgId=".concat(Z.values.toFunctionId,"&_startAt=",0,"&_pageSize=",1e3):"_dgId=0&_startAt=".concat(0,"&_pageSize=",1e3)),onChange:(e,n)=>{Z.setFieldValue("dtId",null==n?void 0:n.recordId)},error:Z.touched.dtId&&!!Z.errors.dtId})}),(0,o.jsx)(p.ZP,{item:!0,xs:12,children:(0,o.jsx)(h.Z,{name:"useSameReference",value:null===(n=Z.values)||void 0===n?void 0:n.useSameReference,onChange:e=>Z.setFieldValue("useSameReference",e.target.checked),label:t.useSameRef,maxAccess:a})})]})})})})}var S=()=>{let{getRequest:e,postRequest:n}=(0,r.useContext)(c.$),{stack:t}=(0,F.zY)();async function p(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:o=50,params:r}=n;return{...await e({extension:u.r.DocumentTypeMap.page,parameters:"_filter=&_params=".concat(r||"","&_startAt=").concat(t,"&_pageSize=").concat(o)}),_startAt:t}}let v=(0,s.E)({endpointId:u.r.DocumentTypeMap.page});async function x(e){let{filters:n,pagination:t}=e;return p({_startAt:(null==t?void 0:t._startAt)||0,params:null==n?void 0:n.params})}let{query:{data:y},labels:g,paginationParameters:T,refetch:h,access:_,filterBy:S}=(0,s.J)({queryFn:p,endpointId:u.r.DocumentTypeMap.page,datasetId:l.i.DocumentTypeMaps,filter:{filterFn:x}}),N=[{field:"fromFunctionName",headerName:g.fromFunction,flex:1},{field:"fromDTName",headerName:g.fromDocument,flex:1},{field:"toFunctionName",headerName:g.toFunction,flex:1},{field:"toDTName",headerName:g.toDocument,flex:1}],Z=async e=>{await n({extension:u.r.DocumentTypeMap.del,record:JSON.stringify(e)}),v(),d.ZP.success("Record Deleted Successfully")};function j(e){t({Component:D,props:{labels:g,record:e,maxAccess:_,recordId:e?String(e.fromFunctionId)+String(e.fromDTId)+String(e.toFunctionId):void 0},width:600,height:450,title:g.documentTypeMap})}return(0,o.jsxs)(m.R,{children:[(0,o.jsx)(I.g,{children:(0,o.jsx)(i.Z,{hasSearch:!1,labels:g,onAdd:()=>{j()},maxAccess:_,reportName:"SYDTM",filterBy:S})}),(0,o.jsx)(f.Q,{children:(0,o.jsx)(a.Z,{columns:N,gridData:y,rowId:["fromFunctionId","fromDTId","toFunctionId"],onEdit:e=>{j(e)},onDelete:Z,refetch:h,isLoading:!1,pageSize:50,paginationParameters:T,paginationType:"api",maxAccess:_})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=49474)}),_N_E=e.O()}]);