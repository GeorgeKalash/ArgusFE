(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1211],{4467:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-plu",function(){return a(88457)}])},88457:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var r=a(52322),s=a(2784),n=a(71987),l=a(65950),d=a(69387),o=a(62202),i=a(61802),c=a(26612),u=a(31389),p=a(33625),g=a(62362),y=a(19473),m=a(98345),h=a(7121),I=a(22341),v=a(29326),q=a(9522),S=a(60218),f=a(48601),C=a(82737),x=a(38449),b=a(8661),T=a(80983),P=a(91406),D=a(5088),R=a(89330),O=a(84100),M=a(39812),A=a(65215),_=a(90587);function L(e){var t,a;let{labels:d,maxAccess:i,setStore:p,store:v}=e,{getRequest:q,postRequest:L}=(0,s.useContext)(l.$),{platformLabels:J}=(0,s.useContext)(y.l),{recordId:F}=v,{documentType:N,maxAccess:B,changeDT:Z}=(0,m.H)({functionId:h.J.PriceListUpdate,access:i,enabled:!F}),w=(0,n.E)({endpointId:I.P.PriceListUpdate.page}),{formik:j}=(0,T.c)({maxAccess:B,validateOnChange:!0,documentType:{key:"dtId",value:null==N?void 0:N.dtId},initialValues:{recordId:F,reference:"",status:1,releaseStatus:1,date:new Date,type:"",amount:null,plId:null,groupId:null,dtId:null,currencyId:null,pgId:null,productionLineId:null,categoryId:null},validationSchema:f.Ry({date:f.hT().required(),type:f.Z_().required(),amount:f.Rx().required(),plId:f.Rx().required(),currencyId:f.Rx().required()}),onSubmit:async e=>{let t=await L({extension:I.P.PriceListUpdate.set,record:JSON.stringify({...e,date:(0,M.ku)(e.date)})});o.ZP.success(e.recordId?J.Edited:J.Added),await G(t.recordId),p({...v,recordId:t.recordId}),w()}}),k=!!j.values.recordId,W=3===j.values.status;async function G(e){if(e){let t=await q({extension:I.P.PriceListUpdate.get,parameters:"_recordId=".concat(e)}),a=await q({extension:I.P.PriceListItem.qry,parameters:"_pluId=".concat(e,"&_itemId=0")});p(e=>({...e,items:a})),j.setValues({...t.record,date:(0,M.a1)(t.record.date)})}}(0,s.useEffect)(()=>{!async function(){F&&await G(F)}()},[]);let E=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!k},{key:"Locked",condition:W,onClick:"onUnpostConfirmation",onSuccess:async()=>{await L({extension:I.P.PriceListUpdate.unpost,record:JSON.stringify(j.values)})&&(o.ZP.success(J.Unposted),w(),await G(j.values.recordId))},disabled:!k},{key:"Unlocked",condition:!W,onClick:async()=>{await L({extension:I.P.PriceListUpdate.post,record:JSON.stringify(j.values)})&&(o.ZP.success(J.Posted),w(),await G(j.values.recordId))},disabled:!k},{key:"generate",condition:!0,onClick:async()=>{await L({extension:I.P.PriceListUpdate.generate,record:JSON.stringify(j.values)}),o.ZP.success(J.Generated),await G(j.values.recordId),w()},disabled:!k}];return(0,r.jsx)(C.Z,{resourceId:c.i.PriceListUpdates,functionId:h.J.PriceListUpdate,form:j,actions:E,maxAccess:B,editMode:k,disabledSubmit:W,previewReport:k,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(g.Q,{children:(0,r.jsxs)(S.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{endpointId:x.r.DocumentType.qry,parameters:"_dgId=".concat(h.J.PriceListUpdate,"&_startAt=",0,"&_pageSize=",50),filter:k?void 0:e=>1===e.activeStatus,name:"dtId",label:d.documentType,readOnly:k,valueField:"recordId",displayField:"name",values:j.values,onChange:async(e,t)=>{j.setFieldValue("dtId",(null==t?void 0:t.recordId)||null),Z(t)},error:j.touched.dtId&&!!j.errors.dtId,maxAccess:B})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(D.Z,{name:"reference",label:d.reference,value:j.values.reference,readOnly:k,maxAccess:!k&&B,maxLength:"30",onChange:j.handleChange,onClear:()=>j.setFieldValue("reference",""),error:j.touched.reference&&!!j.errors.reference})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(R.Z,{name:"date",required:!0,label:d.date,value:null==j?void 0:null===(t=j.values)||void 0===t?void 0:t.date,onChange:j.setFieldValue,maxAccess:B,readOnly:W,onClear:()=>j.setFieldValue("date",null),error:j.touched.date&&!!j.errors.date})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{datasetId:O.v.PRICE_LIST_UPDATE_TYPE,name:"type",label:d.type,valueField:"key",displayField:"value",values:j.values,required:!0,readOnly:W,maxAccess:B,onChange:(e,t)=>{j.setFieldValue("type",(null==t?void 0:t.key)||null)},error:j.touched.type&&!!j.errors.type})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(P.Z,{name:"amount",label:d.amount,value:null==j?void 0:null===(a=j.values)||void 0===a?void 0:a.amount,maxAccess:B,onChange:j.handleChange,onClear:()=>j.setFieldValue("amount",null),required:!0,readOnly:W,error:j.touched.amount&&!!j.errors.amount,maxLength:12,decimalScale:3})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{endpointId:I.P.PriceLevel.qry,name:"plId",label:d.priceLevel,valueField:"recordId",required:!0,displayField:"name",displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,maxAccess:B,readOnly:W,onChange:(e,t)=>{j.setFieldValue("plId",(null==t?void 0:t.recordId)||"")},error:j.touched.plId&&!!j.errors.plId})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{endpointId:A.$.Group.qry,parameters:"_startAt=0&_pageSize=1000",name:"groupId",label:d.itemGroupFilter,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,readOnly:W,onChange:(e,t)=>{j.setFieldValue("groupId",(null==t?void 0:t.recordId)||null)},error:j.touched.groupId&&!!j.errors.groupId,maxAccess:i})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{endpointId:_.u.ProductionLine.qry,parameters:"_startAt=0&_pageSize=1000",values:j.values,name:"productionLineId",label:d.productionLine,valueField:"recordId",displayField:["reference","name"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:W,maxAccess:B,onChange:(e,t)=>{j.setFieldValue("productionLineId",(null==t?void 0:t.recordId)||null)},error:j.touched.productionLineId&&j.errors.productionLineId})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{endpointId:A.$.Category.qry,parameters:"_pagesize=30&_startAt=0&_name=",name:"categoryId",label:d.category,valueField:"recordId",displayField:"name",displayFieldWidth:1,values:null==j?void 0:j.values,maxAccess:i,readOnly:W,onChange:(e,t)=>{j.setFieldValue("categoryId",(null==t?void 0:t.recordId)||null)},error:j.touched.categoryId&&!!j.errors.categoryId})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{endpointId:x.r.Currency.qry,name:"currencyId",label:d.currency,valueField:"recordId",readOnly:W,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,required:!0,maxAccess:B,onChange:(e,t)=>{j.setFieldValue("currencyId",(null==t?void 0:t.recordId)||null)},error:j.touched.currencyId&&!!j.errors.currencyId})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(b.Z,{endpointId:I.P.PriceGroups.qry,name:"pgId",label:d.priceGroup,valueField:"recordId",displayField:"name",readOnly:W,values:j.values,maxAccess:B,onChange:(e,t)=>{j.setFieldValue("pgId",(null==t?void 0:t.recordId)||null)},onClear:()=>j.setFieldValue("pgId",null)})})]})})})})}var J=a(27723),F=e=>{let{store:t,labels:a,maxAccess:o}=e,{getRequest:i}=(0,s.useContext)(l.$),{recordId:y,items:m}=t;async function h(){let e=await i({extension:I.P.PriceListItem.qry,parameters:"_pluId=".concat(y,"&_itemId=0")});return setStore(t=>({...t,items:(null==e?void 0:e.count)==0?m:e})),e}async function v(e){let{qry:t}=e;return await i({extension:I.P.PriceListItem.snapshot,parameters:"_filter=".concat(t,"&_pluId=").concat(y)})}let{query:{data:q},search:f,clear:C,labels:x}=(0,n.J)({enabled:!!y,datasetId:c.i.PriceListUpdates,queryFn:h,endpointId:I.P.PriceListItem.qry,search:{searchFn:v}}),b=[{field:"sku",headerName:a.sku,flex:1},{field:"itemName",headerName:a.item,flex:1},{field:"plName",headerName:a.priceLevel,flex:1},{field:"ptName",headerName:a.priceType,flex:1},{field:"currencyRef",headerName:a.currency,flex:1},{field:"value",headerName:a.price,flex:1,type:"number"}],T=q||m;return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(p.g,{children:(0,r.jsx)(S.ZP,{container:!0,spacing:2,sx:{mt:1},children:(0,r.jsx)(S.ZP,{item:!0,xs:6,children:(0,r.jsx)(J.Z,{maxAccess:o,onSearch:f,onSearchClear:C,labels:x,inputSearch:!0})})})}),(0,r.jsx)(g.Q,{children:(0,r.jsx)(d.Z,{columns:b,gridData:T,rowId:["recordId"],isLoading:!1,maxAccess:o,pagination:!1})})]})};function N(e){let{labels:t,maxAccess:a,recordId:n}=e,[l,d]=(0,s.useState)(0),[o,i]=(0,s.useState)({recordId:n,items:[]}),c=[{label:t.PriceListUpdate},{label:t.items,disabled:!o.recordId}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.Y,{tabs:c,activeTab:l,setActiveTab:d,maxAccess:a}),(0,r.jsx)(v.Z,{index:0,value:l,maxAccess:a,children:(0,r.jsx)(L,{labels:t,maxAccess:a,setStore:i,store:o})}),(0,r.jsx)(v.Z,{index:1,value:l,maxAccess:a,children:(0,r.jsx)(F,{labels:t,maxAccess:a,store:o})})]})}var B=()=>{let{postRequest:e,getRequest:t}=(0,s.useContext)(l.$),{platformLabels:a}=(0,s.useContext)(y.l),{stack:v}=(0,i.zY)(),{query:{data:q},refetch:S,labels:f,access:C,paginationParameters:x,invalidate:b}=(0,n.J)({queryFn:P,endpointId:I.P.PriceListUpdate.page,datasetId:c.i.PriceListUpdates}),T=[{field:"reference",headerName:f.reference,flex:1},{field:"date",headerName:f.date,flex:1,type:"date"},{field:"typeName",headerName:f.type,flex:1},{field:"amount",headerName:f.amount,flex:1,type:"number"},{field:"groupName",headerName:f.itemGroupFilter,flex:1},{field:"statusName",headerName:f.status,flex:1}];async function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:r=50,params:s=[]}=e;return{...await t({extension:I.P.PriceListUpdate.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(r,"&_params=").concat(s,"&filter=")}),_startAt:a}}let{proxyAction:D}=(0,m.G)({functionId:h.J.PriceListUpdate,action:O}),R=async()=>{await D()};async function O(e){v({Component:N,props:{labels:f,maxAccess:C,recordId:e},width:1e3,height:680,title:f.PriceListUpdate})}let M=async t=>{await e({extension:I.P.PriceListUpdate.del,record:JSON.stringify(t)}),b(),o.ZP.success(a.Deleted)};return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(p.g,{children:(0,r.jsx)(J.Z,{onAdd:R,maxAccess:C})}),(0,r.jsx)(g.Q,{children:(0,r.jsx)(d.Z,{columns:T,gridData:q,rowId:["recordId"],onEdit:e=>{O(e.recordId)},refetch:S,onDelete:M,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,maxAccess:C,paginationParameters:x,paginationType:"api"})})]})}},90587:function(e,t,a){"use strict";a.d(t,{u:function(){return s}});let r="MF.asmx/",s={DesignRawMaterial:{qry2:r+"qryDRM2",qry:r+"qryDRM",set2:r+"set2DRM"},JobOrdersItem:{qry:r+"qryJIT",set2:r+"set2JIT"},IssueOfMaterialsItems:{qry:r+"qryIMI",qry2:r+"qryIMI2"},LaborGroup:{snapshot:r+"snapshotLBG",page:r+"pageLBG",qry:r+"qryLBG",set:r+"setLBG",get:r+"getLBG",del:r+"delLBG"},ProductionLine:{page:r+"pageLIN",qry:r+"qryLIN",qry2:r+"qry2LIN",qry3:r+"qry3LIN",set:r+"setLIN",get:r+"getLIN",del:r+"delLIN"},CostGroup:{page:r+"pageCG",set:r+"setCG",get:r+"getCG",del:r+"delCG",qry:r+"qryCG"},WorkCenter:{page:r+"pageWCT",qry:r+"qryWCT",qry3:r+"qryWCT3",set:r+"setWCT",get:r+"getWCT",del:r+"delWCT",snapshot:r+"snapshotWCT"},Routing:{page:r+"pageRTN",qry:r+"qryRTN",set:r+"setRTN",get:r+"getRTN",del:r+"delRTN",snapshot2:r+"snapshot2RTN",snapshot:r+"snapshotRTN"},Operation:{snapshot:r+"snapshotOPR",qry:r+"qryOPR",page:r+"pageOPR",set:r+"setOPR",get:r+"getOPR",del:r+"delOPR"},Labor:{page:r+"pageLBR",qry:r+"qryLBR",qry2:r+"qry2LBR",set:r+"setLBR",get:r+"getLBR",del:r+"delLBR",snapshot:r+"snapshotLBR"},Machine:{page:r+"pageMAC",qry:r+"qryMAC",set:r+"setMAC",get:r+"getMAC",del:r+"delMAC",snapshot:r+"snapshotMAC"},MachineSpecification:{page:r+"pageMAS",qry:r+"qryMAS",set:r+"setMAS",get:r+"getMAS",del:r+"delMAS"},LeanProductionPlanning:{preview:r+"previewPQ",update:r+"updatePQ",snapshot:r+"snapshotPQ",del:r+"delPQ",cancel:r+"cancelPQ"},MaterialsAdjustment:{generate:r+"generateADJ"},ProductionClass:{page:r+"pageCLS",qry:r+"qryCLS",set:r+"setCLS",get:r+"getCLS",del:r+"delCLS",snapshot:r+"qryCLS"},ProductionStandard:{qry:r+"qrySTD",page:r+"pageSTD",set:r+"setSTD",get:r+"getSTD",del:r+"delSTD"},ProductionClassSemiFinished:{qry:r+"qryCSF",set:r+"setCSF",get:r+"getCSF",del:r+"delCSF",set2:r+"set2CSF"},RoutingSequence:{set2:r+"set2RTS",qry:r+"qryRTS"},Overhead:{qry:r+"qryOVH",set:r+"setOVH",get:r+"getOVH",del:r+"delOVH",page:r+"pageOVH",snapshot:r+"snapshotOVH"},Design:{qry:r+"qryDES",set:r+"setDES",get:r+"getDES",del:r+"delDES",snapshot:r+"snapshotDES",page:r+"pageDES"},MFJobOrder:{pack:r+"packJOB",qry:r+"qryJOB",qry2:r+"qryJOB2",set:r+"setJOB",get:r+"getJOB",get2:r+"get2JOB",del:r+"delJOB",snapshot:r+"snapshotJOB",snapshot2:r+"snapshotJOB2",snapshot3:r+"snapshotJOB3",cancel:r+"cancelJOB",post:r+"postJOB",start:r+"startJOB",stop:r+"stopJOB",wip:r+"wipJOB",sync:r+"syncJOB"},ProductionSheet:{page:r+"pagePST",qry:r+"qryPST",get:r+"getPST",set2:r+"set2PST",get2:r+"get2PST",del:r+"delPST",post:r+"postPST",unpost:r+"unpostPST",snapshot:r+"snapshotPST"},ProductionSheetItem:{qry:r+"qryPSI",set:r+"setPSI",get:r+"getPSI",del:r+"delPSI"},DocumentTypeDefault:{qry:r+"qryDTD",get:r+"getDTD",set:r+"setDTD",del:r+"delDTD",page:r+"pageDTD"},RawMaterialCategory:{qry:r+"qryRMC",get:r+"getRMC",set:r+"setRMC",del:r+"delRMC",page:r+"pageRMC"},WorksheetMaterials:{qry:r+"qryIMA",get:r+"getIMA",pack:r+"get2IMA",set:r+"setIMA",set2:r+"set2IMA",del:r+"delIMA",post:r+"postIMA"},ProductionSheetQueue:{qry:r+"qryPSQ"},Damage:{qry:r+"qryDMG",get:r+"getDMG",set:r+"setDMG",del:r+"delDMG",page:r+"pageDMG",snapshot:r+"snapshotDMG",post:r+"postDMG",get2:r+"get2DMG",set2:r+"set2DMG",preview:r+"previewDMG"},JobCategory:{qry:r+"qryJCA"},JobRouting:{qry:r+"qryJRO",get:r+"getJRO",set:r+"setJRO",set2:r+"set2JRO",del:r+"delJRO",sync:r+"syncJRO",close:r+"closeJRO",reopen:r+"reopenJRO"},Worksheet:{snapshot:r+"snapshotWST",get:r+"getWST",pack:r+"getPackWST",set:r+"setWST",del:r+"delWST",page:r+"pageWST",summary:r+"summaryWST",post:r+"postWST",qry2:r+"qryWST2",draft:r+"draftWST"},JobOverhead:{qry:r+"qryJOH",set2:r+"set2JOH",generate:r+"generateJOH"},JobMaterial:{qry:r+"qryJMA"},JobItemSize:{qry:r+"qryJSZ",set2:r+"set2JSZ"},MFSerial:{qry:r+"qrySRL",qry2:r+"qrySRL2",set2:r+"set2SRL",generate:r+"generateSRL"},SamplePack:{qry:r+"qrySPL",set2:r+"set2SPL"},DamageReturn:{get:r+"getDMR",set:r+"setDMR",del:r+"delDMR",page:r+"pageDMR",snapshot:r+"snapshotDMR",post:r+"postDMR"},ProductionOrder:{get2:r+"get2PO",set2:r+"set2PO",del:r+"delPO",page:r+"pagePO",snapshot:r+"snapshotPO",post:r+"postPO",gen:r+"genPO",close:r+"closePO"},BillOfMaterials:{get:r+"getBMA",qry2:r+"qry2BMA",set:r+"setBMA",del:r+"delBMA",page:r+"pageBMA",snapshot:r+"snapshotBMA"},Component:{get:r+"getBMI",qry:r+"qryBMI",del:r+"delBMI",set:r+"setBMI",set2:r+"set2BMI"},Assembly:{get:r+"getASM",set2:r+"set2ASM",del:r+"delASM",page:r+"pageASM",snapshot:r+"snapshotASM",post:r+"postASM",unpost:r+"unpostASM",generate:r+"genASM"},AssemblyItems:{qry:r+"qryASC"},AssemblyLot:{get:r+"getASL",set:r+"setASL"},AssemblyOverhead:{qry:r+"qryAOH",set2:r+"set2AOH"},MeasurementScheduleMap:{qry:r+"qryMSM",set:r+"setMSM",set2:r+"set2MSM",del:r+"delMSM"},JobCategory:{set:r+"setJCA",get:r+"getJCA",del:r+"delJCA",page:r+"pageJCA",qry:r+"qryJCA"},DesignGroup:{qry:r+"qryDEG",set:r+"setDEG",get:r+"getDEG",del:r+"delDEG",page:r+"pageDEG"},Components:{qry:r+"qryDEM",set2:r+"set2DEM"},DesignFamily:{qry:r+"qryDEF",set:r+"setDEF",get:r+"getDEF",del:r+"delDEF",page:r+"pageDEF"},ProductionShifts:{qry:r+"qrySHI",set:r+"setSHI",get:r+"getSHI",del:r+"delSHI",page:r+"pageSHI"},JobOrderWizard:{set2:r+"set2JOZ",get2:r+"get2JOZ",del:r+"delJOZ",page:r+"pageJOZ",snapshot:r+"snapshotJOZ",post:r+"postJOZ"},JobTransfer:{get2:r+"get2TFR",set2:r+"set2TFR",del:r+"delTFR",page:r+"pageTFR",snapshot:r+"snapshotTFR",post:r+"postTFR",close:r+"closeTFR",reopen:r+"reopenTFR",qry:r+"qryTFR"},JobWorkCenter:{qry:r+"qryJWC",close:r+"closeJWC",reopen:r+"reopenJWC",get:r+"getJWC",snapshot:r+"snapshotJWC",verify:r+"verifyJWC"},WorkCenterConsumption:{page:r+"pageCON",snapshot:r+"snapshotCON",del:r+"delCON",set2:r+"set2CON",get:r+"getCON",post:r+"postCON",unpost:r+"unpostCON",close:r+"closeCON",reopen:r+"reopenCON"},ConsumptionItemView:{qry:r+"qryCOI"},LineItemCapacity:{set2:r+"set2LIT",del:r+"delLIT",qry:r+"qryLIT",page:r+"pageLIT"},CostGroupOverhead:{set2:r+"set2CGV",qry:r+"qryCGV"},IssueOfMaterialDimension:{set:r+"setIMD",qry:r+"qryIMD"},JobOrder:{gen:r+"genORD"},RefreshPoItem:{refresh:r+"refreshPOI"},WorkCenterTransferMap:{qry:r+"qryWCTM",set2:r+"set2WCTM"},BatchWorksheet:{get2:r+"get2BWST",set2:r+"set2BWST",del:r+"delBWST",page:r+"pageBWST",snapshot:r+"snapshotBWST",post:r+"postBWST",gen:r+"genBWST",close:r+"closeBWST",reopen:r+"reopenBWST"},ProductionOrderFromSaleOrder:{gen:r+"generatePOFromSO"},BatchTransfer:{page:r+"pageBTFR",set2:r+"set2BTFR",del:r+"delBTFR",snapshot:r+"snapshotBTFR",get:r+"getBTFR",post:r+"postBTFR",unpost:r+"unpostBTFR"},BatchTransferJob:{qry:r+"qryBTFJ"},Disposal:{page:r+"pageDIS",snapshot:r+"snapshotDIS",get:r+"getDIS",set2:r+"set2DIS",del:r+"delDIS"},DisposalItem:{qry:r+"qryDII"},DisposalSerial:{qry:r+"qryDISRL"},MetalSetting:{page:r+"pageMTS",set:r+"setMTS",get:r+"getMTS",del:r+"delMTS"},DamageReason:{qry:r+"qryDRS",page:r+"pageDRS",set:r+"setDRS",get:r+"getDRS",del:r+"delDRS",snapshot:r+"snapshotDRS"},DamageCategory:{qry:r+"qryDCA",page:r+"pageDCA",set:r+"setDCA",get:r+"getDCA",del:r+"delDCA",snapshot:r+"snapshotDCA"}}},1685:function(e,t,a){"use strict";a.d(t,{m:function(){return r}});let r=e=>{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null}},98345:function(e,t,a){"use strict";a.d(t,{H:function(){return m},G:function(){return y}});var r=a(45300),s=a(2784),n=a(96026),l=a(38449);a(26612);var d=a(65947),o=a(1685);let i=async(e,t,a)=>{try{let r=await e({extension:t,parameters:a});return t.includes("qry")?r:r.record}catch(e){return null}},c=(e,t,a,r)=>{let s=(e=JSON.parse(JSON.stringify(e))).record.controls,n=s.find(e=>"reference"===e.controlId);return n?n.accessLevel=(null==t?void 0:t.mandatory)?d.$7:d.rr:(null==t?void 0:t.mandatory)?s.push({sgId:0,resourceId:"",controlId:"".concat(r?r+".":"","reference"),accessLevel:(null==t?void 0:t.mandatory)?d.$7:d.rr}):(null==t?void 0:t.readOnly)?s.push({sgId:0,resourceId:"",controlId:"".concat(r?r+".":"","reference"),accessLevel:(null==t?void 0:t.readOnly)?d.rr:d.$7}):s=e.record.controls.filter(e=>"reference"!=e.controlId),a&&s.push({sgId:0,resourceId:"",controlId:"".concat(r?r+".":"","dtId"),accessLevel:d.$7}),{...e,record:{...e.record,controls:s}}},u=async(e,t,a)=>{let r,s;switch(a){case"dtId":let n=(0,o.m)("userData"),d=null==n?void 0:n.userId;s="_userId=".concat(d,"&_functionId=").concat(t),r=l.r.UserFunction.get;break;case"glbSysNumberRange":s="_recordId=".concat(t),r=l.r.SystemFunction.get;break;case"DocumentType":s="_dgId=".concat(t,"&_startAt=",0,"&_pageSize=",50),r=l.r.DocumentType.qry;break;case"DcTypNumberRange":s="_recordId=".concat(t),r=l.r.DocumentType.get;break;case"isExternal":s="_recordId=".concat(t),r=l.r.NumberRange.get;break;default:return null}return await i(e,r,s)},p=async function(e){let t,a,r,s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=arguments.length>5?arguments[5]:void 0,p=void 0===d&&n&&await u(e,n,"dtId"),g=null==p?void 0:p.dtId,y="",m=!0;if(p&&void 0===d||"nraId"===d){if(g){let a=await u(e,g,"DcTypNumberRange");t=null==a?void 0:a.nraId,m=!((null==a?void 0:a.activeStatus)<0),t||(y="Assign the document type to a number range")}if((!g||!m)&&o&&n){var h;let t=await u(e,n,"DocumentType");s=(null==t?void 0:null===(h=t.list)||void 0===h?void 0:h.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===d||void 0===d)&&n){if((!g||g)&&!t||t&&!m){let a=await u(e,n,"glbSysNumberRange");(t=null==a?void 0:a.nraId)&&s&&(s=!1),m=!0}y=t||s?"":"Assign the system Function to a number range"}d>0&&!t&&(t=d),t&&m?(a={readOnly:null==(r=await u(e,t,"isExternal"))||!r.external,mandatory:null!=r&&!!r.external},l&&(l=await c(l,a,s,i))):!t&&l&&(l=await c(l,a,s,i));let I=i?"".concat(i,".reference"):"reference";return{dtId:g,resetReference:null==a?void 0:a.readOnly,dcTypeRequired:s,reference:{fieldName:I,isEmpty:(null==r?void 0:r.external)!==void 0&&(null==r||!r.external)},errorMessage:y,maxAccess:l,selectNraId:d}};var g=a(65950);function y(e){let{functionId:t,action:a,hasDT:r}=e,{getRequest:l}=(0,s.useContext)(g.$),{stack:d}=(0,n.V)();return{proxyAction:async()=>{let e=await p(l,t,"",void 0,r);(null==e?void 0:e.errorMessage)?d({message:null==e?void 0:e.errorMessage}):await a()}}}function m(e){var t;let{functionId:a,access:l,hasDT:d,enabled:o=!0,objectName:i=""}=e,{getRequest:c}=(0,s.useContext)(g.$),{stack:u}=(0,n.V)(),[y,m]=(0,s.useState)(),h=async e=>{let t=await p(c,a,l,e,d,i);if(!t.errorMessage)return t;u({message:null==t?void 0:t.errorMessage})},I=(0,r.a)({retry:!1,staleTime:0,enabled:o,queryKey:[a,y,!!l,o],queryFn:y||"nraId"===y?()=>h(y):()=>h()});return{documentType:I.data,maxAccess:(null==I?void 0:null===(t=I.data)||void 0===t?void 0:t.maxAccess)||l,changeDT(e){m((null==e?void 0:e.nraId)||"nraId")}}}},29326:function(e,t,a){"use strict";var r=a(52322);a(2784);var s=a(23925),n=a(13980),l=a.n(n),d=a(95291),o=a.n(d),i=a(65947);let c=e=>{var t,a,n;let{children:l,value:d,index:c,maxAccess:u,...p}=e,g="".concat(e.name||"tab",".").concat(c),{accessLevel:y}=null!==(n=(null!==(a=null==u?void 0:null===(t=u.record)||void 0===t?void 0:t.controls)&&void 0!==a?a:[]).find(e=>e.controlId===g))&&void 0!==n?n:{accessLevel:0};if(y===i.A1)return null;let m=d===c;return(0,r.jsx)(s.Z,{role:"tabpanel",hidden:!m,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(o().tabPanel," ").concat(m?o().active:o().hidden),...p,children:l})};c.propTypes={children:l().node,index:l().number.isRequired,value:l().number.isRequired},t.Z=c},9522:function(e,t,a){"use strict";a.d(t,{Y:function(){return p}});var r=a(52322),s=a(23925),n=a(54582),l=a(68696),d=a(44258),o=a(2784),i=a(99266),c=a(52614),u=a.n(c);let p=e=>{var t,a,c,p,g;let{tabs:y,activeTab:m,setActiveTab:h,maxAccess:I,name:v="tab"}=e,q=(null==I?void 0:null===(a=I.record)||void 0===a?void 0:null===(t=a.controls)||void 0===t?void 0:t.filter(e=>{var t;return 4===e.accessLevel&&(null===(t=e.controlId)||void 0===t?void 0:t.startsWith("".concat(v,".")))}).map(e=>e.controlId.split(".")[1]))||[],S=null==y?void 0:null===(c=y.map((e,t)=>({...e,id:t})))||void 0===c?void 0:c.filter((e,t)=>!q.includes(String(t))),f=null===(p=S[m])||void 0===p?void 0:p.id,C=null===(g=S[m])||void 0===g?void 0:g.disabled;return(0,o.useEffect)(()=>{f>=0&&!C&&m!=f&&h(f)},[]),(0,r.jsx)(s.Z,{className:u().tabsContainer,children:(0,r.jsx)(s.Z,{className:u().tabsWrapper,children:(0,r.jsx)(n.Z,{value:m,onChange:(e,t)=>h(t),variant:"scrollable",scrollButtons:S.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==S?void 0:S.map(e=>(0,r.jsx)(l.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,r.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,r.jsx)("span",{children:e.label}),e.id===m&&(null==e?void 0:e.onRefetch)&&(0,r.jsx)(d.Z,{size:"small",className:u().refreshButton,onClick:t=>{t.stopPropagation(),e.onRefetch()},children:(0,r.jsx)(i.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=4467)}),_N_E=e.O()}]);