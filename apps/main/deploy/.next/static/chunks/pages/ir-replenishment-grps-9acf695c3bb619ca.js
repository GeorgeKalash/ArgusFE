(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81059],{59324:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ir-replenishment-grps",function(){return n(88969)}])},88969:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var a=n(52322),r=n(2784),l=n(62202),s=n(69387),i=n(27723),u=n(65950),d=n(61802),o=n(71987),c=n(26612),h=n(31389),p=n(33625),f=n(62362),g=n(19473),m=n(60218),x=n(48601),R=n(82737),y=n(5088),M=n(80983),Q=n(91406),P=n(58912);function q(e){let{labels:t,maxAccess:n,recordId:s}=e,{getRequest:i,postRequest:d}=(0,r.useContext)(u.$),{platformLabels:p}=(0,r.useContext)(g.l),q=(0,o.E)({endpointId:P.I.ReplenishmentGroups.page}),{formik:I}=(0,M.c)({initialValues:{recordId:s,reference:"",name:"",defaultMaxQty:"",defaultMinQty:""},validateOnChange:!0,validationSchema:x.Ry({name:x.Z_().required(),reference:x.Z_().required(),defaultMinQty:x.Rx().nullable().min(0,"Must be greater than or equal to 0").max(1e3).test("lessThanMax","minUnitPrice must be less than or equal to defaultMaxQty",function(e){let{defaultMaxQty:t}=this.parent;return null==t||null==e||e<=t}),defaultMaxQty:x.Rx().nullable().max(1e3,"Must be less than or equal to 1000").test("greaterThanMin","defaultMaxQty must be greater than or equal to defaultMinQty",function(e){let{defaultMinQty:t}=this.parent;return null==t||null==e||e>=t}),defaultRequiredQty:x.Rx().nullable().min(0,"Must be greater than or equal to 0").max(1e3,"Must be less than or equal to 1000")}),onSubmit:async e=>{let t=await d({extension:P.I.ReplenishmentGroups.set,record:JSON.stringify(e)});e.recordId?l.ZP.success(p.Edited):(l.ZP.success(p.Added),I.setFieldValue("recordId",t.recordId)),q()}}),v=!!I.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(s){let e=await i({extension:P.I.ReplenishmentGroups.get,parameters:"_recordId=".concat(s)});I.setValues(e.record)}}()},[]),(0,a.jsx)(R.Z,{resourceId:c.i.IRReplenishmentGrps,form:I,maxAccess:n,editMode:v,children:(0,a.jsx)(h.R,{children:(0,a.jsx)(f.Q,{children:(0,a.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(y.Z,{name:"reference",label:t.reference,required:!0,value:I.values.reference,maxAccess:n,maxLength:"30",onChange:I.handleChange,onClear:()=>I.setFieldValue("reference",""),error:I.touched.reference&&!!I.errors.reference})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(y.Z,{name:"name",label:t.name,value:I.values.name,required:!0,maxAccess:n,maxLength:"30",onChange:I.handleChange,onClear:()=>I.setFieldValue("name",""),error:I.touched.name&&!!I.errors.name})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(Q.Z,{name:"defaultMaxQty",label:t.defaultMaxQty,value:I.values.defaultMaxQty,maxAccess:n,onChange:I.handleChange,onClear:()=>I.setFieldValue("defaultMaxQty",""),allowNegative:!1,error:I.touched.defaultMaxQty&&!!I.errors.defaultMaxQty,helperText:I.touched.defaultMaxQty&&I.errors.defaultMaxQty})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(Q.Z,{name:"defaultMinQty",label:t.defaultMinQty,value:I.values.defaultMinQty,maxAccess:n,onChange:I.handleChange,onClear:()=>I.setFieldValue("defaultMinQty",""),allowNegative:!1,error:I.touched.defaultMinQty&&!!I.errors.defaultMinQty,helperText:I.touched.defaultMinQty&&I.errors.defaultMinQty})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(Q.Z,{name:"defaultRequiredQty",label:t.defaultRequiredQty,value:I.values.defaultRequiredQty,maxAccess:n,onChange:I.handleChange,onClear:()=>I.setFieldValue("defaultRequiredQty",""),allowNegative:!1,error:I.touched.defaultRequiredQty&&!!I.errors.defaultRequiredQty,helperText:I.touched.defaultRequiredQty&&I.errors.defaultRequiredQty})})]})})})})}var I=()=>{let{getRequest:e,postRequest:t}=(0,r.useContext)(u.$),{platformLabels:n}=(0,r.useContext)(g.l),{stack:m}=(0,d.zY)();async function x(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50}=t;return{...await e({extension:P.I.ReplenishmentGroups.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&_filter=")}),_startAt:n}}let{query:{data:R},labels:y,invalidate:M,paginationParameters:Q,refetch:I,access:v}=(0,o.J)({queryFn:x,endpointId:P.I.ReplenishmentGroups.page,datasetId:c.i.IRReplenishmentGrps}),C=[{field:"reference",headerName:y.reference,flex:1},{field:"name",headerName:y.name,flex:1}],T=async e=>{await t({extension:P.I.ReplenishmentGroups.del,record:JSON.stringify(e)}),M(),l.ZP.success(n.Deleted)};function E(e){m({Component:q,props:{labels:y,recordId:e,maxAccess:v},width:600,height:450,title:y.repGroups})}return(0,a.jsxs)(h.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(i.Z,{onAdd:()=>{E()},maxAccess:v})}),(0,a.jsx)(f.Q,{children:(0,a.jsx)(s.Z,{columns:C,gridData:R,rowId:["recordId"],onEdit:e=>{E(null==e?void 0:e.recordId)},onDelete:T,isLoading:!1,pageSize:50,refetch:I,paginationParameters:Q,paginationType:"api",maxAccess:v})})]})}},58912:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});let a="IR.asmx/",r={ReplenishmentGroups:{qry:a+"qryGRP",page:a+"pageGRP",get:a+"getGRP",set:a+"setGRP",del:a+"delGRP"},IvReplenishements:{qry:a+"qryHDR",page:a+"pageHDR",get:a+"getHDR",set:a+"setHDR"},IvReplenishementsList:{qry:a+"qryTRX"},GenerateIvReplenishements:{generate:a+"generateTFR"},MaterialReplenishment:{page:a+"pageREQ",del:a+"delREQ",get:a+"getREQ",set2:a+"set2REQ",snapshot:a+"snapshotREQ",close:a+"closeREQ",reopen:a+"reopenREQ",cancel:a+"cancelREQ",print:a+"printREQ"},OrderItem:{qry:a+"qryREI",open:a+"openREI"},MatPlanning:{page:a+"pageMPL",del:a+"delMPL",get:a+"getMPL",set2:a+"set2MPL",reopen:a+"reopenMPL",close:a+"closeMPL",qry:a+"qryMPL",snapshot:a+"snapshotMPL"},MatPlanningItem:{qry:a+"qryMPI",append:a+"appendMPI"},PurchaseRequest:{generate:a+"generatePR"},PlantSettings:{get:a+"getPLT",set:a+"setPLT",del:a+"delPLT"},DocumentTypeDefault:{get:a+"getDTD",set:a+"setDTD",del:a+"delDTD",page:a+"pageDTD"},materialPlaning:{preview:a+"previewMRP"},Transfer:{generate2:a+"generate2TFR"},ConsumptionOfTools:{generate:a+"generateMFCON"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=59324)}),_N_E=e.O()}]);