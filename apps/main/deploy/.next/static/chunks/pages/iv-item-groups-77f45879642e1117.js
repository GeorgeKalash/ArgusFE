(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77535],{44334:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-item-groups",function(){return n(65928)}])},65928:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return Z}});var t=n(52322),a=n(2784),o=n(62202),s=n(69387),c=n(27723),i=n(65950),d=n(61802),l=n(71987),u=n(26612),m=n(31389),p=n(33625),h=n(62362),x=n(19473),f=n(60218),v=n(48601),y=n(82737),I=n(5088),g=n(80983),C=n(74898),A=n(65215),_=n(8661),G=n(84100);function j(e){let{labels:r,maxAccess:n,recordId:s}=e,{getRequest:c,postRequest:d}=(0,a.useContext)(i.$),{platformLabels:p}=(0,a.useContext)(x.l),j=(0,l.E)({endpointId:A.$.Group.page}),{formik:Z}=(0,g.c)({initialValues:{recordId:s,reference:"",name:"",valuationMethod:"",procurementMethod:"",msId:""},validateOnChange:!0,validationSchema:v.Ry({name:v.Z_().required(),reference:v.Z_().required()}),onSubmit:async e=>{let r=await d({extension:A.$.Group.set,record:JSON.stringify(e)});e.recordId?o.ZP.success(p.Edited):(o.ZP.success(p.Added),Z.setFieldValue("recordId",r.recordId)),j()}}),w=!!Z.values.recordId;(0,a.useEffect)(()=>{!async function(){if(s){let e=await c({extension:A.$.Group.get,parameters:"_recordId=".concat(s)});Z.setValues(e.record)}}()},[]);let P=[{key:"Integration Account",condition:!0,onClick:"onClickGIA",masterSource:C.N.ItemGroup,disabled:!w}];return(0,t.jsx)(y.Z,{resourceId:u.i.InventoryGroup,form:Z,maxAccess:n,editMode:w,actions:P,children:(0,t.jsx)(m.R,{children:(0,t.jsx)(h.Q,{children:(0,t.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.Z,{name:"reference",required:!0,label:r.reference,value:Z.values.reference,maxAccess:n,maxLength:"30",onChange:Z.handleChange,onClear:()=>Z.setFieldValue("reference",""),error:Z.touched.reference&&!!Z.errors.reference})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.Z,{name:"name",label:r.name,value:Z.values.name,required:!0,maxAccess:n,maxLength:"30",onChange:Z.handleChange,onClear:()=>Z.setFieldValue("name",""),error:Z.touched.name&&!!Z.errors.name})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(_.Z,{datasetId:G.v.PROCUREMENT_METHOD,name:"procurementMethod",label:r.procurement,valueField:"key",displayField:"value",values:Z.values,maxAccess:n,onChange:(e,r)=>{Z.setFieldValue("procurementMethod",(null==r?void 0:r.key)||"")},error:Z.touched.procurementMethod&&Z.errors.procurementMethod})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(_.Z,{datasetId:G.v.VALUATION_METHOD,values:Z.values,name:"valuationMethod",label:r.valuation,valueField:"key",displayField:"value",displayFieldWidth:1,maxAccess:n,onChange:(e,r)=>{Z.setFieldValue("valuationMethod",(null==r?void 0:r.key)||"")},error:Z.touched.valuationMethod&&Z.errors.valuationMethod})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(_.Z,{endpointId:A.$.Measurement.qry,parameters:"_name=",name:"msId",label:r.measurement,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:Z.values,valueField:"recordId",displayField:["reference","name"],maxAccess:n,onChange:(e,r)=>{Z.setFieldValue("msId",r.recordId||"")},error:Z.touched.msId&&!!Z.errors.msId})})]})})})})}var Z=()=>{let{getRequest:e,postRequest:r}=(0,a.useContext)(i.$),{platformLabels:n}=(0,a.useContext)(x.l),{stack:f}=(0,d.zY)(),{query:{data:v},labels:y,paginationParameters:I,invalidate:g,filterBy:C,clearFilter:_,refetch:G,access:Z}=(0,l.J)({queryFn:P,endpointId:A.$.Group.page,datasetId:u.i.InventoryGroup,filter:{endpointId:A.$.Group.snapshot,filterFn:w}});async function w(r){let{filters:n,pagination:t}=r;return n.qry?await e({extension:A.$.Group.snapshot,parameters:"_filter=".concat(n.qry)}):await P(t)}async function P(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50}=r;return{...await e({extension:A.$.Group.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t)}),_startAt:n}}let E=[{field:"reference",headerName:y.reference,flex:1},{field:"name",headerName:y.name,flex:1}],F=async e=>{try{await r({extension:A.$.Group.del,record:JSON.stringify(e)}),g(),o.ZP.success(n.Deleted)}catch(e){}};function M(e){f({Component:j,props:{labels:y,recordId:e,maxAccess:Z},width:600,height:500,title:y.itemGroup})}return(0,t.jsxs)(m.R,{children:[(0,t.jsx)(p.g,{children:(0,t.jsx)(c.Z,{onSearch:e=>{C("qry",e)},onSearchClear:()=>{_("qry")},inputSearch:!0,onAdd:()=>{M()},maxAccess:Z,previewReport:u.i.InventoryGroup})}),(0,t.jsx)(h.Q,{children:(0,t.jsx)(s.Z,{columns:E,gridData:v,rowId:["recordId"],onEdit:e=>{M(null==e?void 0:e.recordId)},onDelete:F,isLoading:!1,pageSize:50,refetch:G,paginationParameters:I,paginationType:"api",maxAccess:Z})})]})}},74898:function(e,r,n){"use strict";n.d(r,{N:function(){return t}});let t={Global:0,AccountGroup:10,Account:11,CashAccountGroup:20,CashAccount:21,ItemGroup:30,Item:31,ItemCategory:32,Site:33,ExpenseType:41,CostType:42,ProductionOverhead:51,TaxCode:12,PayrollGLGroup:61,PayrollEntitlementDeduction:62,AssetGroup:71,AssetClass:72}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=44334)}),_N_E=e.O()}]);