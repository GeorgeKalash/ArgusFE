(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60051],{61147:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gl-system-params",function(){return a(55718)}])},55718:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return f}});var c=a(52322),o=a(61802),t=a(26612),u=a(2784),d=a(60218),l=a(62202),s=a(65950),r=a(38449),i=a(8661),G=a(31389),L=a(62362),C=a(7121),m=a(19473),A=a(80983),F=a(27423),g=a(66361),h=a(5088),D=a(48601),E=a(19689),S=a(54074),O=e=>{var n;let{_labels:a,access:o}=e,{postRequest:t,getRequest:O}=(0,u.useContext)(s.$),{platformLabels:f,defaultsData:v,updateDefaults:x}=(0,u.useContext)(m.l),{formik:I}=(0,A.c)({validateOnChange:!0,validationSchema:D.Ry({GLDOEGainAccountId:D.Z_().required(),GLDOELossAccountId:D.Z_().required(),GLFYCLossAccountId:D.Z_().required(),GLFYCGainAccountId:D.Z_().required()}),initialValues:{GLDOEGainAccountId:null,GLDOEGainAccountname:"",GLDOEGainAccountref:"",GLDOELossAccountId:null,GLDOELossAccountref:"",GLDOELossAccountname:"",GLRoundingAccountDb:null,GLRoundingAccountDbname:"",GLRoundingAccountDbref:"",GLRoundingAccountCr:null,GLRoundingAccountCrname:"",GLRoundingAccountCrref:"",GLDOESeg0Start:null,GLDOESeg0End:null,GLDOEDTId:"",GLFYCGainAccountId:"",GLFYCGainAccountname:"",GLFYCGainAccountref:"",GLFYCLossAccountId:"",GLFYCLossAccountref:"",GLFYCLossAccountname:"",GLFYCSeg0Start:"",GLFYCSeg0End:"",GLFYCDTId:"",GLFYCDOECheck:!1},onSubmit:e=>{p(e)}});(0,u.useEffect)(()=>{Y()},[]);let Y=async()=>{var e;let n={},a=["GLDOEGainAccountId","GLDOELossAccountId","GLRoundingAccountDb","GLRoundingAccountCr","GLDOESeg0Start","GLDOESeg0End","GLDOEDTId","GLFYCGainAccountId","GLFYCLossAccountId","GLFYCSeg0Start","GLFYCSeg0End","GLFYCDTId","GLFYCDOECheck"],c=null==v?void 0:null===(e=v.list)||void 0===e?void 0:e.filter(e=>a.includes(e.key));null==c||c.forEach(e=>{"GLFYCDOECheck"===e.key?n[e.key]="true"===e.value||!0===e.value:["GLDOESeg0End","GLDOESeg0Start","GLFYCSeg0Start","GLFYCSeg0End"].includes(e.key)?n[e.key]=e.value||null:n[e.key]=e.value?parseInt(e.value,10):null}),I.setValues(n),await Promise.all([{key:"GLDOEGainAccountId",refField:"GLDOEGainAccountref",nameField:"GLDOEGainAccountname"},{key:"GLDOELossAccountId",refField:"GLDOELossAccountref",nameField:"GLDOELossAccountname"},{key:"GLRoundingAccountDb",refField:"GLRoundingAccountDbref",nameField:"GLRoundingAccountDbname"},{key:"GLRoundingAccountCr",refField:"GLRoundingAccountCrref",nameField:"GLRoundingAccountCrname"},{key:"GLFYCGainAccountId",refField:"GLFYCGainAccountref",nameField:"GLFYCGainAccountname"},{key:"GLFYCLossAccountId",refField:"GLFYCLossAccountref",nameField:"GLFYCLossAccountname"}].map(async e=>{let{key:a,refField:c,nameField:o}=e,t=n[a];if(t){let e=await O({extension:g.x.ChartOfAccounts.get,parameters:"_recordId=".concat(t)});I.setFieldValue(c,e.record.accountRef),I.setFieldValue(o,e.record.name)}else I.setFieldValue(c,null),I.setFieldValue(o,null)}))},p=e=>{var n=[];Object.entries(e).forEach(e=>{let[a,c]=e;n.push({key:a,value:c})}),t({extension:r.r.Defaults.set,record:JSON.stringify({SysDefaults:n})}).then(e=>{e&&l.ZP.success(f.Edited),x(n)})},y=e=>{e.forEach(e=>{let{name:n,value:a}=e;I.setFieldValue(n,a)})};return(0,c.jsx)(S.Z,{onSave:I.handleSubmit,maxAccess:o,children:(0,c.jsx)(G.R,{children:(0,c.jsx)(L.Q,{children:(0,c.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(F.U,{endpointId:g.x.ChartOfAccounts.snapshot,valueField:"accountRef",displayField:"name",name:"GLDOEGainAccountId",label:a.glDoeGain,form:I,required:!0,displayFieldWidth:2,valueShow:"GLDOEGainAccountref",secondValueShow:"GLDOEGainAccountname",maxAccess:o,onChange:(e,n)=>{let{recordId:a="",accountRef:c="",name:o=""}=n||{};y([{name:"GLDOEGainAccountId",value:a},{name:"GLDOEGainAccountref",value:c},{name:"GLDOEGainAccountname",value:o}])},error:I.touched.GLDOEGainAccountId&&!!I.errors.GLDOEGainAccountId})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(F.U,{endpointId:g.x.ChartOfAccounts.snapshot,valueField:"accountRef",displayField:"name",name:"GLDOELossAccountId",label:a.glDoeLoss,form:I,required:!0,displayFieldWidth:2,valueShow:"GLDOELossAccountref",secondValueShow:"GLDOELossAccountname",maxAccess:o,onChange:(e,n)=>{let{recordId:a="",accountRef:c="",name:o=""}=n||{};y([{name:"GLDOELossAccountId",value:a},{name:"GLDOELossAccountref",value:c},{name:"GLDOELossAccountname",value:o}])},error:I.touched.GLDOELossAccountId&&!!I.errors.GLDOELossAccountId})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(F.U,{endpointId:g.x.ChartOfAccounts.snapshot,valueField:"accountRef",displayField:"name",name:"GLRoundingAccountDb",label:a.glRounding,form:I,displayFieldWidth:2,valueShow:"GLRoundingAccountDbref",secondValueShow:"GLRoundingAccountDbname",maxAccess:o,onChange:(e,n)=>{let{recordId:a="",accountRef:c="",name:o=""}=n||{};y([{name:"GLRoundingAccountDb",value:a},{name:"GLRoundingAccountDbref",value:c},{name:"GLRoundingAccountDbname",value:o}])},error:I.touched.GLRoundingAccountDb&&!!I.errors.GLRoundingAccountDb})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(F.U,{endpointId:g.x.ChartOfAccounts.snapshot,valueField:"accountRef",displayField:"name",name:"GLRoundingAccountCr",label:a.glRoundingC,form:I,displayFieldWidth:2,valueShow:"GLRoundingAccountCrref",secondValueShow:"GLRoundingAccountCrname",maxAccess:o,onChange:(e,n)=>{let{recordId:a="",accountRef:c="",name:o=""}=n||{};y([{name:"GLRoundingAccountCr",value:a},{name:"GLRoundingAccountCrref",value:c},{name:"GLRoundingAccountCrname",value:o}])},error:I.touched.GLRoundingAccountCr&&!!I.errors.GLRoundingAccountCr})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(h.Z,{onClear:()=>I.setFieldValue("GLDOESeg0Start",""),name:"GLDOESeg0Start",onChange:I.handleChange,label:a.glDoeSegStart,value:I.values.GLDOESeg0Start,error:I.touched.GLDOESeg0Start&&!!I.errors.GLDOESeg0Start})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(h.Z,{onClear:()=>I.setFieldValue("GLDOESeg0End",""),name:"GLDOESeg0End",onChange:I.handleChange,label:a.glDoeSegEnd,value:I.values.GLDOESeg0End,error:I.touched.GLDOESeg0End&&!!I.errors.GLDOESeg0End})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(i.Z,{endpointId:r.r.DocumentType.qry,parameters:"_dgId=".concat(C.J.JournalVoucher,"&_startAt=",0,"&_pageSize=",50),name:"GLDOEDTId",label:a.glDoeDt,valueField:"recordId",displayField:"name",values:I.values,onChange:async(e,n)=>{I.setFieldValue("GLDOEDTId",null==n?void 0:n.recordId)},error:I.touched.GLDOEDTId&&!!I.errors.GLDOEDTId,maxAccess:o})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(F.U,{endpointId:g.x.ChartOfAccounts.snapshot,valueField:"accountRef",displayField:"name",name:"GLFYCGainAccountId",label:a.glFycGain,form:I,required:!0,displayFieldWidth:2,valueShow:"GLFYCGainAccountref",secondValueShow:"GLFYCGainAccountname",maxAccess:o,onChange:(e,n)=>{let{recordId:a="",accountRef:c="",name:o=""}=n||{};y([{name:"GLFYCGainAccountId",value:a},{name:"GLFYCGainAccountref",value:c},{name:"GLFYCGainAccountname",value:o}])},error:I.touched.GLFYCGainAccountId&&!!I.errors.GLFYCGainAccountId})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(F.U,{endpointId:g.x.ChartOfAccounts.snapshot,valueField:"accountRef",displayField:"name",name:"GLFYCLossAccountId",label:a.glFycLoss,form:I,required:!0,displayFieldWidth:2,valueShow:"GLFYCLossAccountref",secondValueShow:"GLFYCLossAccountname",maxAccess:o,onChange:(e,n)=>{let{recordId:a="",accountRef:c="",name:o=""}=n||{};y([{name:"GLFYCLossAccountId",value:a},{name:"GLFYCLossAccountref",value:c},{name:"GLFYCLossAccountname",value:o}])},error:I.touched.GLFYCLossAccountId&&!!I.errors.GLFYCLossAccountId})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(h.Z,{onClear:()=>I.setFieldValue("GLFYCSeg0Start",""),name:"GLFYCSeg0Start",onChange:I.handleChange,label:a.glFycStart,value:I.values.GLFYCSeg0Start,error:I.touched.GLFYCSeg0Start&&!!I.errors.GLFYCSeg0Start})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(h.Z,{onClear:()=>I.setFieldValue("GLFYCSeg0End",""),name:"GLFYCSeg0End",onChange:I.handleChange,label:a.glFycEnd,value:I.values.GLFYCSeg0End,error:I.touched.GLFYCSeg0End&&!!I.errors.GLFYCSeg0End})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(i.Z,{endpointId:r.r.DocumentType.qry,parameters:"_dgId=".concat(C.J.JournalVoucher,"&_startAt=",0,"&_pageSize=",50),name:"GLFYCDTId",label:a.glFycDt,valueField:"recordId",displayField:"name",values:I.values,onChange:async(e,n)=>{I.setFieldValue("GLFYCDTId",null==n?void 0:n.recordId)},error:I.touched.GLFYCDTId&&!!I.errors.GLFYCDTId,maxAccess:o})}),(0,c.jsx)(d.ZP,{item:!0,xs:12,children:(0,c.jsx)(E.Z,{name:"GLFYCDOECheck",value:null===(n=I.values)||void 0===n?void 0:n.GLFYCDOECheck,onChange:e=>I.setFieldValue("GLFYCDOECheck",e.target.checked),label:a.check,maxAccess:o})})]})})})})},f=()=>(0,c.jsx)(o.ut,{datasetId:t.i.SystemParams,labelKey:"gsp",Component:O,height:700,width:600})}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=61147)}),_N_E=e.O()}]);