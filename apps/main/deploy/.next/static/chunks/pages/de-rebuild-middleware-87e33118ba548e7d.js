(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80744],{43508:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/de-rebuild-middleware",function(){return n(83526)}])},83526:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var s=n(52322),r=n(2784),a=n(61802),i=n(60218),l=n(48601),o=n(62202),c=n(65950),d=n(31389),u=n(62362),p=n(80983),h=n(89330),g=n(19473),f=n(84309),x=n(30043),m=n(39812),v=n(54074);function D(e){var t,n;let{_labels:D,access:R}=e,{postRequest:T}=(0,r.useContext)(c.$),{platformLabels:P}=(0,r.useContext)(g.l),{stack:y}=(0,a.zY)(),{formik:I}=(0,p.c)({initialValues:{startDate:null,endDate:null},maxAccess:R,validateOnChange:!0,validationSchema:l.Ry({startDate:l.hT().required().test(function(e){let{endDate:t}=this.parent;return e.getTime()<=(null==t?void 0:t.getTime())}),endDate:l.hT().required().test(function(e){let{startDate:t}=this.parent;return e.getTime()>=(null==t?void 0:t.getTime())})}),onSubmit:async e=>{try{let t={...e};t.startDate=(0,m.OZ)(new Date(t.startDate)),t.endDate=(0,m.OZ)(new Date(t.endDate));let n=await T({extension:x.U.Reduild.rebuild,record:JSON.stringify(t)});y({Component:f.R,props:{recordId:n.recordId},closable:!1}),o.ZP.success(P.Added),I.setValues(e),invalidate()}catch(e){}}});return(0,s.jsx)(v.Z,{onSave:I.handleSubmit,actions:[{key:"Locked",condition:!0,onClick:()=>I.handleSubmit(),disabled:!1}],isSaved:!1,editMode:!0,maxAccess:R,children:(0,s.jsx)(d.R,{children:(0,s.jsx)(u.Q,{children:(0,s.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(h.Z,{name:"startDate",label:D.startDate,max:I.values.endDate,value:null===(t=I.values)||void 0===t?void 0:t.startDate,required:!0,onChange:I.setFieldValue,onClear:()=>I.setFieldValue("startDate",""),error:I.touched.startDate&&!!I.errors.startDate,maxAccess:R})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(h.Z,{name:"endDate",label:D.endDate,value:null===(n=I.values)||void 0===n?void 0:n.endDate,min:I.values.startDate,required:!0,onChange:I.setFieldValue,onClear:()=>I.setFieldValue("endDate",""),error:I.touched.endDate&&!!I.errors.endDate,maxAccess:R})})]})})})})}var R=n(26612),T=()=>(0,s.jsx)(a.ut,{datasetId:R.i.RebuildUndeliveredItems,labelKey:"rebuildUndeliveredItems",Component:D})},30043:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let s="DE.asmx/",r={Driver:{snapshot:s+"snapshotDRV",page:s+"pageDRV",set:s+"setDRV",get:s+"getDRV",qry:s+"qryDRV",del:s+"delDRV"},Vehicle:{page:s+"pageVEH",set:s+"setVEH",get:s+"getVEH",qry:s+"qryVEH",del:s+"delVEH"},Trip:{page:s+"pageTRP",set:s+"setTRP",get:s+"getTRP",qry:s+"qryTRP",del:s+"delTRP",snapshot:s+"snapshotTRP",snapshot2:s+"snapshot2TRP",reopen:s+"reopenTRP",post:s+"postTRP",unpost:s+"unpostTRP",close:s+"closeTRP",generate:s+"generateTRP",setTRP2:s+"setTRP2",assign:s+"assignTRP",unassign:s+"unassignedTRP"},TripOrderPack2:{set2:s+"set2TRO"},TripOrder:{qry:s+"qryTRO"},Reduild:{rebuild:s+"rebuildMW"},TRP:{flag:s+"flagTRP"},ExpenseTypes:{get:s+"getET",set:s+"setET",del:s+"delET",page:s+"pageET"},DeliveriesOrders:{qry:s+"qryORD",get:s+"getORD",snapshot:s+"snapshotORD",unpost:s+"unpostORD",gen:s+"genORD",post:s+"postORD",del:s+"delORD",cancel:s+"cancelORD",flag:s+"flagORD",set2:s+"set2ORD"},Invoice:{generate:s+"generateIVC2",generateInv:s+"generateIVC",preview:s+"previewIVC"},OrderItem:{qry:s+"qryORI",get:s+"getORI"},MW:{qry:s+"qryMW2"},GenerateTrip:{root:s+"rootSZ",firstLevel:s+"firstLevelSZ",undelivered2:s+"undeliveredSO2",previewTRP:s+"previewTRP"},DeliveryLeadTime:{get:s+"getLDT",page:s+"pageLDT",set:s+"setLDT",del:s+"delLDT"},Volume:{vol:s+"volZO"},AllocatedVolume:{qry:s+"qryVEH2"},InboundTransp:{pack:s+"getPackINB",page:s+"pageINB",set2:s+"set2INB",get:s+"getINB",get2:s+"get2INB",del:s+"delINB",snapshot:s+"snapshotINB",post:s+"postINB",unpost:s+"unpostINB"},InboundOrders:{qry:s+"qryINO"}}},84309:function(e,t,n){"use strict";n.d(t,{R:function(){return V}});var s=n(73235),r=n(52322),a=n(3854),i=n(2784),l=n(82737),o=n(65950),c=n(62362),d=n(31389),u=n(60218),p=n(21581),h=n(38449),g=n(5088),f=n(19473),x=n(21326);function m(){let e=(0,s._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return m=function(){return e},e}function v(){let e=(0,s._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return v=function(){return e},e}function D(){let e=(0,s._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return D=function(){return e},e}function R(){let e=(0,s._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return R=function(){return e},e}function T(){let e=(0,s._)(["\n  container-type: inline-size;\n"]);return T=function(){return e},e}function P(){let e=(0,s._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return P=function(){return e},e}let y=a.ZP.div(m()),I=a.ZP.span(v()),w=a.ZP.span(D()),b=a.ZP.div(R()),O=a.ZP.div(T()),q=a.ZP.div(P());function j(e){let{label:t,topLabel:n,width:s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(w,{children:[n,": "]}),(0,r.jsxs)(b,{children:[(0,r.jsx)(q,{style:{width:s}}),(0,r.jsx)(I,{children:t})]})]})}let V=e=>{let{recordId:t,onComplete:n,access:s,window:a}=e,{getRequest:m}=(0,i.useContext)(o.$),{platformLabels:v}=(0,i.useContext)(f.l);(0,x.Z)({title:v.Progress,window:a});let[D,R]=(0,i.useState)({recordId:t,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),T=async()=>(await m({extension:h.r.THD.get,parameters:"_recordId=".concat(t)})).record,P=D.currentPhase===D.phases&&D.completed===D.iterations,I=!!D.status&&D.status<0;(0,i.useEffect)(()=>{n&&(P||I)&&n()},[I,P]),(0,i.useEffect)(()=>{(async()=>{R(await T())})();let e=setInterval(async()=>{let t=await T();R(t);let n=t.currentPhase===t.phases&&t.completed===t.iterations,s=!!t.status&&t.status<0;(t.status&&t.status<0||n||s)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let w=D.phases?D.currentPhase/D.phases*100:0,b=D.iterations?D.completed/D.iterations*100:0;return(0,r.jsx)(l.Z,{form:D,maxAccess:s,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>a.close(),disabled:!P&&!I}],isSaved:!1,children:(0,r.jsx)(d.R,{children:(0,r.jsx)(c.Q,{children:(0,r.jsxs)(y,{children:[(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"phase",label:v.Phase,value:D.currentPhaseName,readOnly:!0,maxAccess:s})}),(0,r.jsxs)(O,{children:[(0,r.jsx)(j,{label:"".concat(v.Step," ").concat(D.currentPhase," of ").concat(D.phases,"..."),topLabel:v.currentPhase,width:"".concat(w,"%")}),(0,r.jsx)(j,{label:"".concat(v.Step," ").concat(D.completed," of ").concat(D.iterations,"..."),topLabel:v.Completed,width:"".concat(b,"%")})]}),(0,r.jsx)(p.Z,{name:"log",label:v.Log,value:D.logInfo,rows:4,maxAccess:s,readOnly:!0})]})})})})};V.width=500,V.height=450}},function(e){e.O(0,[3854,49774,92888,40179],function(){return e(e.s=43508)}),_N_E=e.O()}]);