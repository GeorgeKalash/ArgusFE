(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41310],{83146:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rs-department",function(){return r(19419)}])},19419:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var a=r(52322),n=r(2784),s=r(62202),d=r(69387),l=r(27723),g=r(65950),i=r(61802),p=r(71987),o=r(26612),c=r(31389),u=r(33625),m=r(62362),T=r(19473),y=r(60218),P=r(48601),q=r(82737),h=r(5088),E=r(80983),f=r(54736);function x(e){let{labels:t,maxAccess:r,recordId:d,window:l}=e,{getRequest:i,postRequest:u}=(0,n.useContext)(g.$),{platformLabels:x}=(0,n.useContext)(T.l),R=(0,p.E)({endpointId:f.m.Department.page}),{formik:S}=(0,E.c)({initialValues:{recordId:null,name:"",reference:""},validateOnChange:!0,validationSchema:P.Ry({name:P.Z_().required(),reference:P.Z_().required()}),onSubmit:async e=>{await u({extension:f.m.Department.set,record:JSON.stringify(e)}),s.ZP.success(e.recordId?x.Edited:x.Added),R(),l.close()}}),W=!!S.values.recordId;return(0,n.useEffect)(()=>{!async function(){if(d){let e=await i({extension:f.m.Department.get,parameters:"_recordId=".concat(d)});S.setValues(e.record)}}()},[]),(0,a.jsx)(q.Z,{resourceId:o.i.Department,form:S,maxAccess:r,editMode:W,children:(0,a.jsx)(c.R,{children:(0,a.jsx)(m.Q,{children:(0,a.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"reference",label:t.reference,value:S.values.reference,required:!0,maxAccess:r,maxLength:"10",onChange:S.handleChange,onClear:()=>S.setFieldValue("reference",""),error:S.touched.reference&&!!S.errors.reference})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"name",label:t.name,value:S.values.name,required:!0,maxAccess:r,maxLength:"50",onChange:S.handleChange,onClear:()=>S.setFieldValue("name",""),error:S.touched.name&&!!S.errors.name})})]})})})})}var R=()=>{let{getRequest:e,postRequest:t}=(0,n.useContext)(g.$),{platformLabels:r}=(0,n.useContext)(T.l),{stack:y}=(0,i.zY)();async function P(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50}=t;return{...await e({extension:f.m.Department.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a,"&_filter=")}),_startAt:r}}let{query:{data:q},labels:h,invalidate:E,paginationParameters:R,refetch:S,access:W}=(0,p.J)({queryFn:P,endpointId:f.m.Department.page,datasetId:o.i.Department}),O=[{field:"reference",headerName:h.reference,flex:1},{field:"name",headerName:h.name,flex:1}],M=async e=>{await t({extension:f.m.Department.del,record:JSON.stringify(e)}),E(),s.ZP.success(r.Deleted)};function C(e){y({Component:x,props:{labels:h,recordId:e,maxAccess:W},width:500,height:250,title:h.Department})}return(0,a.jsxs)(c.R,{children:[(0,a.jsx)(u.g,{children:(0,a.jsx)(l.Z,{onAdd:()=>{C()},maxAccess:W})}),(0,a.jsx)(m.Q,{children:(0,a.jsx)(d.Z,{name:"table",columns:O,gridData:q,rowId:["recordId"],onEdit:e=>{C(null==e?void 0:e.recordId)},onDelete:M,pageSize:50,refetch:S,paginationParameters:R,paginationType:"api",maxAccess:W})})]})}},54736:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});let a="RS.asmx/",n={RepairName:{page:a+"pageRNA",qry:a+"qryRNA",get:a+"getRNA",set:a+"setRNA",del:a+"delRNA"},WorkOrderTypes:{page:a+"pageWOT",qry:a+"qryWOT",get:a+"getWOT",set:a+"setWOT",del:a+"delWOT"},RepairType:{page:a+"pageRT",get:a+"getRT",set:a+"setRT",del:a+"delRT"},SpareParts:{snapshot:a+"snapshotSP",page:a+"pageSP",get:a+"getSP",set:a+"setSP",del:a+"delSP"},InspectionTemplate:{get2:a+"get2ITE",page:a+"pageITE",set2:a+"set2ITE",del:a+"delITE"},Department:{page:a+"pageDEP",get:a+"getDEP",set:a+"setDEP",del:a+"delDEP"},Warehouse:{page:a+"pageWH",qry:a+"qryWH",set:a+"setWH",get:a+"getWH",del:a+"delWH"},PreventiveMaintenanceTasks:{qry:a+"qryPMT",page:a+"pagePMT",qry:a+"qryPMT",get:a+"getPMT",set:a+"setPMT",del:a+"delPMT"},Equipment:{qry:a+"qryEQP",page:a+"pageEQP",get:a+"getEQP",set:a+"setEQP",del:a+"delEQP",snapshot:a+"snapshotEQP"},SpManufacturer:{page:a+"pageSPM",get:a+"getSPM",set:a+"setSPM",del:a+"delSPM",qry:a+"qrySPM"},JobPosition:{page:a+"pagePOS",qry:a+"qryPOS",get:a+"getPOS",set:a+"setPOS",del:a+"delPOS"},SpCategory:{page:a+"pageSPC",get:a+"getSPC",set:a+"setSPC",del:a+"delSPC",qry:a+"qrySPC"},MaintenanceTemplates:{page:a+"pageMTE",get:a+"getMTE",set:a+"setMTE",del:a+"delMTE",qry:a+"qryMTE"},MaintenanceTemplateTask:{qry:a+"qryMTT",get:a+"getMTT",set:a+"setMTT",del:a+"delMTT"},RsLabors:{qry:a+"qryLBR",snapshot:a+"snapshotLBR",page:a+"pageLBR",set:a+"setLBR",get:a+"getLBR",del:a+"delLBR",qry:a+"qryLBR"},WorkOrder:{page:a+"qryWO",get:a+"getWO",set:a+"setWO",del:a+"delWO",post:a+"postWO"},WorkTask:{qry:a+"qryWTK",get:a+"getWTK",set:a+"setWTK",del:a+"delWTK"},EquipmentType:{qry:a+"qryEQT",get:a+"getEQT",set:a+"setEQT",del:a+"delEQT"},WorkOrderParts:{qry:a+"qryWOP",set2:a+"set2WOP"},WorkOrderLabors:{qry:a+"qryWOL",set2:a+"set2WOL"},RepairRequest:{page:a+"pageREQ",get:a+"getREQ",set:a+"setREQ",del:a+"delREQ"},Employee:{snapshot:a+"snapshotEMP"},RepairType:{qry:a+"qryRT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=83146)}),_N_E=e.O()}]);