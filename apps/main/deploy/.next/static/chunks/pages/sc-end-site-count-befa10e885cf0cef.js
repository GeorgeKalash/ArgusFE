(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87475],{73856:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sc-end-site-count",function(){return s(10087)}])},10087:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var n=s(52322),o=s(61802),l=s(26612),d=s(60218),a=s(48601),r=s(2784),i=s(65950),u=s(31389),c=s(62362),I=s(80983),S=s(8661),C=s(19473),y=s(76426),p=s(5088),m=s(62202),g=s(54074);function k(e){let{_labels:t,access:s}=e,{postRequest:o}=(0,r.useContext)(i.$),{platformLabels:l}=(0,r.useContext)(C.l),{formik:k}=(0,I.c)({initialValues:{stockCountId:"",siteId:"",notes:"",status:""},maxAccess:s,validateOnChange:!0,validationSchema:a.Ry({stockCountId:a.Z_().required(),siteId:a.Z_().required()}),onSubmit:async e=>{3===e.status?await o({extension:y.x.Sites.reopen,record:JSON.stringify(e)}):await o({extension:y.x.Sites.end,record:JSON.stringify(e)}),m.ZP.success(l.Saved),k.resetForm()}}),x=[{key:"Locked",condition:3===k.values.status,onClick:()=>k.handleSubmit(),disabled:!1},{key:"Unlocked",condition:3!==k.values.status,onClick:()=>k.handleSubmit(),disabled:!1}];return(0,n.jsx)(g.Z,{onSave:k.handleSubmit,actions:x,maxAccess:s,isSaved:!1,editMode:!0,children:(0,n.jsx)(u.R,{children:(0,n.jsx)(c.Q,{children:(0,n.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{endpointId:y.x.StockCount.qry,parameters:"_startAt=0&_pageSize=50&_params=",name:"stockCountId",label:t.stockCount,valueField:"recordId",displayField:"reference",values:k.values,required:!0,maxAccess:s,onChange:(e,t)=>{k&&k.setFieldValue("stockCountId",null==t?void 0:t.recordId),k.setFieldValue("notes","")},error:k.touched.stockCountId&&!!k.errors.stockCountId})}),(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.Z,{name:"siteId",endpointId:y.x.Sites.qry,parameters:k.values.stockCountId?"_stockCountId=".concat(k.values.stockCountId):"",label:t.site,filter:e=>e.isChecked,valueField:"siteId",displayField:["siteRef","siteName"],columnsInDropDown:[{key:"siteRef",value:"Reference"},{key:"siteName",value:"Name"}],values:k.values,onChange:(e,t)=>{k.setFieldValue("siteId",t?null==t?void 0:t.siteId:""),k.setFieldValue("notes",t?null==t?void 0:t.notes:""),k.setFieldValue("status",t?null==t?void 0:t.status:"")},error:k.touched.siteId&&!!k.errors.siteId,maxAccess:s})}),(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{name:"notes",type:"text",label:t.notes,readOnly:!0,value:k.values.notes,maxAccess:s,onChange:e=>k.setFieldValue("notes",e.target.value),onClear:()=>k.setFieldValue("notes",""),error:k.touched.notes&&!!k.errors.notes})})]})})})})}var x=()=>(0,n.jsx)(o.ut,{datasetId:l.i.EndSiteCount,labelKey:"endSiteCount",Component:k})},76426:function(e,t,s){"use strict";s.d(t,{x:function(){return o}});let n="SC.asmx/",o={LabelTemplate:{qry:n+"qryLBT",set:n+"setLBT",get:n+"getLBT",del:n+"delLBT"},Item:{qry:n+"qryLBI",set:n+"setLBI",get:n+"getLBI",del:n+"delLBI"},Sites:{qry:n+"qrySIT",set:n+"setSIT",set2:n+"set2SIT",get:n+"getSIT",del:n+"delSIT",reopen:n+"reopenSIT",end:n+"endSIT"},Controller:{qry:n+"qryCRL"},StockCountControllerTab:{qry:n+"qryPHY",set2:n+"set2PHY",set:n+"setPHY",get:n+"getPHY",del:n+"delPHY"},StockCount:{page:n+"pageHDR",post:n+"postHDR",unpost:n+"unpostHDR",qry:n+"qryHDR",get:n+"getHDR",set:n+"setHDR",del:n+"delHDR",close:n+"closeHDR",reopen:n+"reopenHDR",snapshot:n+"snapshotHDR"},StockCountController:{page:n+"pageCRL",set:n+"setCRL",get:n+"getCRL",del:n+"delCRL"},DocumentTypeDefaults:{qry:n+"qryDTD",set:n+"setDTD",get:n+"getDTD",del:n+"delDTD"},StockCountItem:{qry:n+"qryITM",set:n+"setITM",get:n+"getITM",del:n+"delITM"},StockCountSerialSum:{qry:n+"qrySRS"},StockCountItemDetail:{qry:n+"qryITD",set:n+"setITD",get:n+"getITD",del:n+"delITD",set2:n+"set2ITD"},StockCountSerialDetail:{set2:n+"set2SRL",qry:n+"qrySRL",append:n+"appendSRL",del:n+"delSRL",batch:n+"batchSRL"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=73856)}),_N_E=e.O()}]);