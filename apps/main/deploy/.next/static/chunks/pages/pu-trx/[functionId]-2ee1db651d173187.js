(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1661],{30419:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pu-trx/[functionId]",function(){return a(68075)}])},68075:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return _}});var t=a(52322),n=a(70844),c=a(2784),s=a(33625),i=a(31389),u=a(36908),d=a(96026),o=a(98345),l=a(19473),f=a(65950),h=a(2454),p=a(26612),y=a(7121),m=a(61802),v=a(71987),I=a(69387),P=a(4447),x=a(63165),N=a(62202),_=()=>{let{postRequest:e,getRequest:r}=(0,c.useContext)(f.$),{platformLabels:a,defaultsData:_}=(0,c.useContext)(l.l),{stack:w}=(0,m.zY)(),{stack:g}=(0,d.V)(),{functionId:J}=(0,x.F)(),R={[y.J.PurchaseInvoice]:{del:h.y.PurchaseInvoiceHeader.del},[y.J.PurchaseReturn]:{del:h.y.PurchaseReturnHeader.del}},{query:{data:F},filterBy:b,refetch:q,labels:A,access:C,paginationParameters:H,invalidate:k}=(0,v.J)({queryFn:E,endpointId:parseFloat(J)===y.J.PurchaseInvoice?h.y.PurchaseInvoiceHeader.qry:h.y.PurchaseReturnHeader.qry,datasetId:p.i.PurchaseInvoice,DatasetIdAccess:(e=>{switch(e){case y.J.PurchaseInvoice:return p.i.PurchaseInvoice;case y.J.PurchaseReturn:return p.i.PurchaseReturn;default:return null}})(parseInt(J)),filter:{filterFn:j,default:{functionId:J}}}),D=[{field:"reference",headerName:A.reference,flex:1},{field:"statusName",headerName:A.status,flex:1},{field:"date",headerName:A.date,flex:1,type:"date"},{field:"dueDate",headerName:A.dueDate,flex:1,type:"date"},{field:"vendorName",headerName:A.vendor,flex:1},{field:"currencyName",headerName:A.currency,flex:1},{field:"volume",headerName:A.volume,flex:1,type:"number"},{field:"amount",headerName:A.net,flex:1,type:"number"},{field:"pcs",headerName:A.pcs,flex:1,type:"number"},{field:"qty",headerName:A.totQty,flex:1,type:"number"},{field:"weight",headerName:A.weight,flex:1,type:"number"},{field:"description",headerName:A.description,flex:2},{field:"isVerified",headerName:A.isVerified,type:"checkbox"}];async function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:t=50,params:n=[]}=e;return{...await r({extension:parseFloat(J)===y.J.PurchaseInvoice?h.y.PurchaseInvoiceHeader.qry:h.y.PurchaseReturnHeader.qry,parameters:"_startAt=".concat(a,"&_pageSize=").concat(t,"&&_params=").concat(n)}),_startAt:a}}async function j(e){let{filters:a,pagination:t}=e;return a.qry?await r({extension:parseFloat(J)===y.J.PurchaseInvoice?h.y.PurchaseInvoiceHeader.snapshot:h.y.PurchaseReturnHeader.snapshot,parameters:"_filter=".concat(a.qry)+(parseFloat(J)===y.J.PurchaseReturn?"&_functionId=".concat(parseFloat(J)):"")}):E({_startAt:t._startAt||0,params:null==a?void 0:a.params})}async function S(){var e;let r=null==_?void 0:null===(e=_.list)||void 0===e?void 0:e.find(e=>{let{key:r}=e;return"currencyId"===r});return parseInt(null==r?void 0:r.value)||null}let{proxyAction:V}=(0,o.G)({functionId:J,action:async()=>{await S()?T():g({message:A.noSelectedCurrency})}}),Z=e=>parseFloat(e)===y.J.PurchaseInvoice?A.purchaseInvoice:parseFloat(e)===y.J.PurchaseReturn?A.purchaseReturn:void 0;async function T(e){w({Component:P.Z,props:{labels:A,recordId:e,access:C,functionId:J},width:1330,height:720,title:Z(parseInt(J))})}let z=async()=>{await V()},O=async r=>{var t;await e({extension:null===(t=R[J])||void 0===t?void 0:t.del,record:JSON.stringify(r)}),k(),N.ZP.success(a.Deleted)};return(0,t.jsxs)(i.R,{children:[(0,t.jsx)(s.g,{children:(0,t.jsx)(u.Z,{onAdd:z,maxAccess:C,reportName:parseFloat(J)===y.J.PurchaseInvoice?"PUIVC":"PUIVR",filterBy:b})}),(0,t.jsx)(n.Z,{children:(0,t.jsx)(I.Z,{name:"table",columns:D,gridData:F,rowId:["recordId"],onEdit:e=>{T(null==e?void 0:e.recordId)},onDelete:O,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,paginationParameters:H,refetch:q,paginationType:"api",maxAccess:C})})]})}},63165:function(e,r,a){"use strict";a.d(r,{F:function(){return c}});var t=a(5632),n=a(2784);let c=()=>{let e=(0,t.useRouter)(),[r,a]=(0,n.useState)(e.query);return r}}},function(e){e.O(0,[92515,2494,36908,23352,4447,49774,92888,40179],function(){return e(e.s=30419)}),_N_E=e.O()}]);