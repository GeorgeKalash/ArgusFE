(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28304],{12717:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/global-exchange-buy-map",function(){return t(94794)}])},94794:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return P}});var n=t(52322),s=t(2784),a=t(60218),o=t(65950),d=t(38449),c=t(48601),l=t(78711),y=t(53621),u=t(1251),g=t(62202),p=t(19473),i=t(26612),C=t(76399),q=t(8661),I=t(31389),h=t(33625),m=t(62362),f=t(54074),P=()=>{let{getRequest:e,postRequest:r}=(0,s.useContext)(o.$),{getLabels:t,getAccess:P}=(0,s.useContext)(p.l),{platformLabels:x}=(0,s.useContext)(p.l),[R,S]=(0,s.useState)(),[E,O]=(0,s.useState)(0),[F,D]=(0,s.useState)(null);(0,s.useEffect)(()=>{E?E.record.maxAccess>0?t(i.i.GlobalExchangeBuyMap,D):S({message:"YOU DON'T HAVE ACCESS TO THIS SCREEN"}):P(i.i.CorrespondentAgentBranch,O)},[E]);let N=(0,l.TA)({validateOnChange:!0,validationSchema:c.Ry({rows:c.IX().of(c.Ry().shape({countryId:c.Z_().required(""),exchangeId:c.Z_().required("")})).required("Operations array is required")}),initialValues:{currencyId:"",rows:[{id:1,currencyId:"",countryId:"",countryName:"",countryRef:"",exchangeRef:"",exchangeName:"",exchangeId:""}]},onSubmit:async e=>{await v(e)}}),T={country:F&&F.find(e=>"1"===e.key)&&F.find(e=>"1"===e.key).value,currency:F&&F.find(e=>"2"===e.key)&&F.find(e=>"2"===e.key).value,exchangeTable:F&&F.find(e=>"3"===e.key)&&F.find(e=>"3"===e.key).value,name:F&&F.find(e=>"4"===e.key)&&F.find(e=>"4"===e.key).value},v=async e=>{let t={currencyId:e.currencyId,globalExchangeBuyMaps:e.rows.map(r=>{let{currencyId:t,...n}=r;return{currencyId:e.currencyId,...n}})};await r({extension:y.d.CorrespondentExchangeBuyMap.set2,record:JSON.stringify(t)}).then(e=>{e.statusId&&g.ZP.success(x.Updated)}).catch(e=>{})},A=r=>{N.setFieldValue("rows",[{id:1,currencyId:"",countryId:"",countryName:"",countryRef:"",exchangeRef:"",exchangeName:"",exchangeId:""}]),r&&e({extension:y.d.CorrespondentExchangeBuyMap.qry,parameters:"_currencyId=".concat(r)}).then(e=>{e.list.length>0&&N.setFieldValue("rows",e.list.map((e,r)=>{let{...t}=e;return{id:r+1,...t}}))}).catch(e=>{})},G=[{component:"resourcecombobox",label:T.country,name:"countryId",props:{endpointId:d.r.Country.qry,valueField:"recordId",displayField:"reference",displayFieldWidth:1.2,mapping:[{from:"name",to:"countryName"},{from:"reference",to:"countryRef"},{from:"recordId",to:"countryId"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}]}},{component:"textfield",label:T.name,name:"countryName",props:{readOnly:!0}},{component:"resourcecombobox",label:T.exchangeTable,name:"exchangeId",props:{endpointId:u.q.ExchangeTable.qry2,parameters:"_currencyId="+N.values.currencyId,valueField:"recordId",displayField:"reference",mapping:[{from:"name",to:"exchangeName"},{from:"reference",to:"exchangeRef"},{from:"recordId",to:"exchangeId"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}]}},{component:"textfield",label:T.name,name:"exchangeName",props:{readOnly:!0}}];return(0,n.jsx)(f.Z,{onSave:N.handleSubmit,fullSize:!0,maxAccess:E,children:(0,n.jsxs)(I.R,{children:[(0,n.jsx)(h.g,{children:(0,n.jsx)(a.ZP,{container:!0,p:2,children:(0,n.jsx)(a.ZP,{item:!0,xs:3,children:(0,n.jsx)(q.Z,{endpointId:d.r.Currency.qry,name:"currencyId",label:T.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Currency Ref"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],values:N.values,required:!0,maxAccess:E,onChange:(e,r)=>{let t=(null==r?void 0:r.recordId)||"";N.setFieldValue("currencyId",t),A(t)},error:N.errors&&!!N.errors.currencyId})})})}),(0,n.jsx)(m.Q,{children:N.values.currencyId&&(0,n.jsx)(C._,{onChange:e=>N.setFieldValue("rows",e),value:N.values.rows,error:N.errors.rows,columns:G})})]})})}},53621:function(e,r,t){"use strict";t.d(r,{d:function(){return s}});let n="RTSET.asmx/",s={Interface:{qry:n+"qryITF",page:n+"pageITF",get:n+"getITF",set:n+"setITF",del:n+"delITF"},ProductMaster:{qry:n+"qryPRO",page:n+"pagePRO",get:n+"getPRO",set:n+"setPRO",del:n+"delPRO",snapshot:n+"snapshotPRO"},ProductCountries:{qry:n+"qryPCO",set2:n+"set2PCO"},ProductMonetaries:{qry:n+"qryPMO",set2:n+"set2PMO"},ProductDispersal:{qry:n+"qryPDI",get:n+"getPDI",set:n+"setPDI",del:n+"delPDI"},ProductSchedules:{qry:n+"qryPSC",set2:n+"set2PSC"},ProductScheduleRanges:{qry:n+"qryPSR",set2:n+"set2PSR"},ProductScheduleFees:{qry:n+"qryPSF",set2:n+"set2PSF"},ProductDispersalAgents:{qry:n+"qryPDA",set2:n+"set2PDA"},Correspondent:{page:n+"pageCOR",qry:n+"qryCOR",qry2:n+"qry2COR",get:n+"getCOR",set:n+"setCOR",del:n+"delCOR",snapshot:n+"snapshotCOR"},CorrespondentCountry:{qry:n+"qryCCO",get:n+"getCCO",set2:n+"set2CCO",del:n+"delCCO"},CorrespondentCurrency:{qry:n+"qryCCU",get:n+"getCCU",set2:n+"set2CCU",del:n+"delCCU"},CorrespondentAgents:{qry:n+"qryAGT",page:n+"pageAGT",get:n+"getAGT",set:n+"setAGT",del:n+"delAGT"},CorrespondentAgentBranches:{qry:n+"qryABR",page:n+"pageABR",get:n+"getABR",set:n+"setABR",del:n+"delABR"},CorrespondentExchangeMap:{qry:n+"qryEXC",set2:n+"set2EXC"},CurrencyExchangeMap:{qry:n+"qryEXG",set2:n+"set2EXG"},CorrespondentExchangeBuyMap:{qry:n+"qryEXB",set2:n+"set2EXB"},ExchangeRates:{get:n+"getEXB",qry:n+"qryEXG2",set2:n+"set2EXB"},RtDefault:{qry:n+"qryDE",set2:n+"set2DE"},Profession:{qry:n+"qryPFN",page:n+"pagePFN",get:n+"getPFN",set:n+"setPFN",del:n+"delPFN",snapshot:n+"snapshotPFN"},ClientIndividual:{qry:n+"qryCLI"},SalaryRange:{qry:n+"qrySRA",page:n+"pageSRA",get:n+"getSRA",set:n+"setSRA",del:n+"delSRA"},SourceOfIncome:{qry:n+"qrySI",page:n+"pageSI",snapshot:n+"snapshotSI",get:n+"getSI",set:n+"setSI",del:n+"delSI"},CorrespondentControl:{qry:n+"qryCCL",set:n+"set2CCL"},InterfaceMaps:{qry:n+"qryIFM",get:n+"getIFM",set2:n+"set2IFM"},SourceOfIncomeType:{qry:n+"qrySIT",snapshot:n+"snapshotSIT",page:n+"pageSIT",get:n+"getSIT",set:n+"setSIT",del:n+"delSIT"},ProfessionGroups:{qry:n+"qryPFG",page:n+"pagePFG",snapshot:n+"snapshotPFG",get:n+"getPFG",set:n+"setPFG",del:n+"delPFG"},CorrespondentGroup:{qry:n+"qryCGP",page:n+"pageCGP",get:n+"getCGP",set:n+"setCGP",del:n+"delCGP"},ExtraIncome:{qry:n+"qryEI",get:n+"getEI",del:n+"delEI",page:n+"pageEI",snapshot:n+"snapshotEI",set:n+"setEI"},CountryRisk:{page:n+"pageCOU",get:n+"getCOU",set:n+"setCOU",del:n+"delCOU"},CorDispControl:{qry:n+"qryCDC",set2:n+"set2CDC"},CorrespondentDispersal:{qry:n+"qryCDM",get:n+"getCDM",del:n+"delCDM",set2:n+"set2CDM"},CorrespondentDispersalRate:{qry:n+"qryCDR",set2:n+"set2CDR"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=12717)}),_N_E=e.O()}]);