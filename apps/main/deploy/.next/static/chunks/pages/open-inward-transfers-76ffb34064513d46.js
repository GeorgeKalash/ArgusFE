(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48419],{80765:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/open-inward-transfers",function(){return t(53244)}])},53244:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return _}});var s=t(52322),a=t(69387),n=t(27723),o=t(26612),d=t(71987),l=t(61802),i=t(88469),c=t(33625),p=t(62362),u=t(31389),g=t(65950),y=t(2784),q=t(19473),h=t(60218),C=t(62202),O=t(91406),I=t(5088),v=t(75991),m=t(54074),x=t(8661),f=t(27423),R=t(96026),S=t(80983),N=t(2119),P=t(53621),F=t(48601);function W(e){var r,t,a,n;let{form:o,labels:l,access:p,window:W}=e,{stack:_}=(0,R.V)(),{postRequest:w,getRequest:E}=(0,y.useContext)(g.$),{platformLabels:A,defaultsData:T}=(0,y.useContext)(q.l),[D,M]=(0,y.useState)([]);o.receiver_bankId=2;let k=(0,d.E)({endpointId:i.N.InwardsTransfer.open}),{formik:b}=(0,S.c)({initialValues:{recordId:null==o?void 0:o.recordId,corId:null,corRef:"",corName:"",amount:null,receiver_firstName:"",receiver_lastName:"",trackingNo:"",countryId:"",receiver_bankId:"",receiver_accountNo:""},access:p,validateOnChange:!0,validationSchema:F.Ry({corId:F.Z_().required(),amount:F.Rx().required(),receiver_firstName:F.Z_().required(),receiver_lastName:F.Z_().required(),trackingNo:F.Z_().test("is-trackingNo-required","Tracking number is required",function(e){return!o.trackingNo||!!e}),receiver_accountNo:F.Z_().test("is-receiver_accountNo-required","receiver_accountNo is required",function(e){return 2!=o.dispersalMode||!!e}),receiver_bankId:F.Z_().test("is-receiver_bankId-required","receiver_bankId is required",function(e){return 2!=o.dispersalMode||!!e})}),onSubmit:()=>{M([]);let e={...b.values};delete e.countryId,1===o.dispersalMode&&(delete e.receiver_bankId,delete e.receiver_accountNo);let r=Object.keys(e).filter(r=>e[r]!=o[r]);0===r.length?B():(M(r),_({message:A.fieldsDoNotMatch}))}}),B=async()=>{let e={...o};e.baseAmount=(null==e?void 0:e.baseAmount)===""?null==e?void 0:e.amount:null==e?void 0:e.baseAmount,e.rateCalcMethod=(null==e?void 0:e.rateCalcMethod)===""?1:null==e?void 0:e.rateCalcMethod;let r=await w({extension:i.N.InwardsTransfer.close,record:JSON.stringify(e)});C.ZP.success(A.Closed);let t=await Z(r.recordId);4==t.record.status&&await j(t.record),k(),W.close()};async function Z(e){return await E({extension:i.N.InwardsTransfer.get,parameters:"_recordId=".concat(e)})}async function j(e){await w({extension:i.N.InwardsTransfer.post,record:JSON.stringify(e)})}let V=e=>D.includes(e);return(0,y.useEffect)(()=>{var e;let r=null==T?void 0:null===(e=T.list)||void 0===e?void 0:e.find(e=>{let{key:r}=e;return"countryId"===r});b.setFieldValue("countryId",parseInt(r.value))},[]),(0,s.jsx)(m.Z,{onSave:b.handleSubmit,maxAccess:p,children:(0,s.jsx)(u.R,{children:(0,s.jsxs)(c.g,{children:[(0,s.jsx)(v.Z,{title:l.header,sx:{flex:0},children:(0,s.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.U,{endpointId:P.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",label:l.correspondent,form:b,required:!0,displayFieldWidth:2,valueShow:"corRef",secondValueShow:"corName",access:p,onChange:(e,r)=>{b.setFieldValue("corId",r?r.recordId:""),b.setFieldValue("corName",r?r.name:""),b.setFieldValue("corRef",r?r.reference:"")},error:b.touched.corId&&!!b.errors.corId||V("corId")})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(O.Z,{name:"amount",required:!0,label:l.amount,value:b.values.amount,onChange:e=>b.setFieldValue("amount",e.target.value),onClear:()=>b.setFieldValue("amount",""),error:b.touched.amount&&!!b.errors.amount||V("amount"),maxLength:15,decimalScale:2})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(I.Z,{name:"trackingNo",label:l.trackingNo,value:null==b?void 0:null===(r=b.values)||void 0===r?void 0:r.trackingNo,maxLength:"30",required:null==o?void 0:o.trackingNo,onChange:e=>b.setFieldValue("trackingNo",e.target.value),onClear:()=>b.setFieldValue("trackingNo",""),error:b.touched.trackingNo&&!!b.errors.trackingNo||V("trackingNo")})})]})}),(0,s.jsx)(v.Z,{title:l.receiverDetails,sx:{flex:0},children:(0,s.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(I.Z,{name:"receiver_firstName",label:l.receiver_firstName,value:null==b?void 0:null===(t=b.values)||void 0===t?void 0:t.receiver_firstName,maxLength:"20",required:!0,error:b.touched.receiver_firstName&&!!b.errors.receiver_firstName||V("receiver_firstName"),onChange:b.handleChange,onClear:()=>b.setFieldValue("receiver_firstName","")})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(I.Z,{name:"receiver_lastName",label:l.receiver_lastName,value:null==b?void 0:null===(a=b.values)||void 0===a?void 0:a.receiver_lastName,maxLength:"20",required:!0,error:b.touched.receiver_lastName&&!!b.errors.receiver_lastName||V("receiver_lastName"),onChange:b.handleChange,onClear:()=>b.setFieldValue("receiver_lastName","")})}),2==o.dispersalMode&&(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(x.Z,{endpointId:b.values.countryId&&N.G.CbBank.qry2,parameters:"_countryId=".concat(b.values.countryId),name:"receiver_bankId",label:l.receiver_bank,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:b.values,onChange:(e,r)=>{b.setFieldValue("receiver_bankId",null==r?void 0:r.recordId)},required:2==o.dispersalMode,error:b.touched.receiver_bankId&&!!b.errors.receiver_bankId||V("receiver_bankId")})}),2==o.dispersalMode&&(0,s.jsx)(h.ZP,{item:!0,xs:12,children:(0,s.jsx)(I.Z,{name:"receiver_accountNo",label:l.receiver_accountNo,value:null==b?void 0:null===(n=b.values)||void 0===n?void 0:n.receiver_accountNo,maxLength:"30",required:2==o.dispersalMode,error:b.touched.receiver_accountNo&&!!b.errors.receiver_accountNo||V("receiver_accountNo"),onChange:b.handleChange,onClear:()=>b.setFieldValue("receiver_accountNo","")})})]})})]})})})}var _=()=>{let{stack:e}=(0,l.zY)(),{getRequest:r}=(0,y.useContext)(g.$),{platformLabels:t}=(0,y.useContext)(q.l),{query:{data:h},labels:C,refetch:O,paginationParameters:I,access:v}=(0,d.J)({queryFn:m,endpointId:i.N.InwardsTransfer.open,datasetId:o.i.OpenInwardTransfers});async function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:s=50}=e;return{...await r({extension:i.N.InwardsTransfer.open,parameters:"_startAt=".concat(t,"&_pageSize=").concat(s,"&filter=")}),_startAt:t}}let x=[{field:"reference",headerName:C.reference,flex:1},{field:"date",headerName:C.date,flex:1,type:"date"},{field:"currencyRef",headerName:C.currency,flex:1},{field:"amount",headerName:C.amount,flex:1,type:"number"},{field:"wipName",headerName:C.wip,flex:1}];return(0,s.jsxs)(u.R,{children:[(0,s.jsx)(c.g,{children:(0,s.jsx)(n.Z,{maxAccess:v})}),(0,s.jsx)(p.Q,{children:(0,s.jsx)(a.Z,{columns:x,gridData:h,rowId:["recordId"],onEdit:r=>{e({Component:W,props:{form:r,labels:C,access:v},width:600,title:t.ApproveFields})},isLoading:!1,pageSize:50,refetch:O,paginationParameters:I,paginationType:"api",maxAccess:v})})]})}},88469:function(e,r,t){"use strict";t.d(r,{N:function(){return a}});let s="RTOW.asmx/",a={Country:{qry:s+"qryPCO2"},DispersalType:{qry:s+"qryPMO2"},Currency:{qry:s+"qryPMO3"},Agent:{qry:s+"qryPDA2"},ProductDispersalEngine:{qry:s+"qryPDE"},OutwardsCash:{qry:s+"qryOWC"},OutwardsOrder:{qry:s+"qryOWO",qry2:s+"qryOWO2",page:s+"pageOWO",get:s+"getOWO",get2:s+"get2OWO",set:s+"setOWO",set2:s+"set2OWO",del:s+"delOWO",close:s+"closeOWO",reopen:s+"reopenOWO",post:s+"postOWO",snapshot:s+"snapshotOWO"},OutwardsRequest:{get:s+"getOWX"},InwardSettlement:{qry:s+"qryIWS",page:s+"pageIWS",get:s+"getIWS",set:s+"setIWS",del:s+"delIWS",close:s+"closeIWS",reopen:s+"reopenIWS",post:s+"postIWS",snapshot:s+"snapshotIWS"},InwardsTransfer:{get:s+"getIW",set:s+"setIW",del:s+"delIW",snapshot:s+"snapshotIW",snapshot2:s+"snapshotIW2",close:s+"closeIW",reopen:s+"reopenIW",post:s+"postIW",open:s+"openIW"},InwardGLInformation:{get:s+"getIWI"},Beneficiary:{qry:s+"qryBEN",qry2:s+"qryBEN2",qry3:s+"qryBEN3",get:s+"getBEN",del:s+"delBEN",snapshot:s+"snapshotBEN",snapshot2:s+"snapshotBEN2 "},BeneficiaryBank:{qry:s+"qryBEB",get:s+"getBEB",set:s+"set2BEB",del:s+"delBEB"},BeneficiaryCash:{qry:s+"qryBEC",get:s+"getBEC",set:s+"set2BEC",del:s+"delBEC"},FeeSchedule:{qry:s+"qryFSC",page:s+"pageFSC",snapshot:s+"snapshotFSC",get:s+"getFSC",set:s+"setFSC",del:s+"delFSC"},FeeScheduleDetail:{qry:s+"qryFSD",get:s+"getFSD",set2:s+"set2FSD",del:s+"delFSD"},FeeScheduleOutwards:{qry:s+"qryFSO",page:s+"pageFSO",get:s+"getFSO",set:s+"setFSO",del:s+"delFSO"},FeeScheduleInwards:{qry:s+"qryFSI",page:s+"pageFSI",get:s+"getFSI",set:s+"setFSI",del:s+"delFSI"},OutwardGLInformation:{get:s+"getOWI"},AutoPostExclusion:{qry:s+"qryAPX",get:s+"getAPX",set:s+"setAPX",del:s+"delAPX",get2:s+"get2APX",set2:s+"set2APX"},OutwardsModification:{qry:s+"qryOWM",page:s+"pageOWM",snapshot:s+"snapshotOWM",get:s+"getOWM",set2:s+"set2OWM",del:s+"delOWM",post:s+"postOWM",reopen:s+"reopenOWM",close:s+"closeOWM"},Postoutwards:{qry:s+"qryOWT3",post2:s+"post2OWT"},OutwardsReturn:{page:s+"pageOWR",qry2:s+"qryOWR2",get:s+"getOWR",set:s+"setOWR",close:s+"closeOWR",reopen:s+"reopenOWR",post:s+"postOWR",snapshot:s+"snapshotOWR"},CorrespondentOutwards:{qry:s+"qryACE",set:s+"setACE"},ReceiptVouchers:{qry:s+"qryRV",page:s+"pageRV",get:s+"getRV",set:s+"setRV",set2:s+"set2RV",del:s+"delRV",post:s+"postRV",close:s+"closeRV",reopen:s+"reopenRV",snapshot:s+"snapshotRV"},OutwardsTransfer:{get:s+"getOWT",snapshot:s+"snapshotOWT",qry2:s+"qryOWT2"},UnassignedCountry:{unassigned:s+"unassignedCOU"},UnassignedCurrency:{unassigned:s+"unassignedCU"},UnassignedDispersalType:{unassigned:s+"unassignedDT"},AssignedCountry:{assigned:s+"assignedCOU"},AssignedCurrency:{assigned:s+"assignedCU"},AssignedDispersalType:{assigned:s+"assignedDT"},OutwardReturnSettlement:{qry:s+"qryORS",page:s+"pageORS",get:s+"getORS",get2:s+"get2ORS",set:s+"setORS",set2:s+"set2ORS",del:s+"delORS",post:s+"postORS",close:s+"closeORS",reopen:s+"reopenORS",snapshot:s+"snapshotORS"},OutwardReturnReason:{page:s+"pageOWRR",snapshot:s+"snapshotOWRR",qry:s+"qryOWRR",get:s+"getOWRR",set:s+"setOWRR",del:s+"delOWRR"}}},53621:function(e,r,t){"use strict";t.d(r,{d:function(){return a}});let s="RTSET.asmx/",a={Interface:{qry:s+"qryITF",page:s+"pageITF",get:s+"getITF",set:s+"setITF",del:s+"delITF"},ProductMaster:{qry:s+"qryPRO",page:s+"pagePRO",get:s+"getPRO",set:s+"setPRO",del:s+"delPRO",snapshot:s+"snapshotPRO"},ProductCountries:{qry:s+"qryPCO",set2:s+"set2PCO"},ProductMonetaries:{qry:s+"qryPMO",set2:s+"set2PMO"},ProductDispersal:{qry:s+"qryPDI",get:s+"getPDI",set:s+"setPDI",del:s+"delPDI"},ProductSchedules:{qry:s+"qryPSC",set2:s+"set2PSC"},ProductScheduleRanges:{qry:s+"qryPSR",set2:s+"set2PSR"},ProductScheduleFees:{qry:s+"qryPSF",set2:s+"set2PSF"},ProductDispersalAgents:{qry:s+"qryPDA",set2:s+"set2PDA"},Correspondent:{page:s+"pageCOR",qry:s+"qryCOR",qry2:s+"qry2COR",get:s+"getCOR",set:s+"setCOR",del:s+"delCOR",snapshot:s+"snapshotCOR"},CorrespondentCountry:{qry:s+"qryCCO",get:s+"getCCO",set2:s+"set2CCO",del:s+"delCCO"},CorrespondentCurrency:{qry:s+"qryCCU",get:s+"getCCU",set2:s+"set2CCU",del:s+"delCCU"},CorrespondentAgents:{qry:s+"qryAGT",page:s+"pageAGT",get:s+"getAGT",set:s+"setAGT",del:s+"delAGT"},CorrespondentAgentBranches:{qry:s+"qryABR",page:s+"pageABR",get:s+"getABR",set:s+"setABR",del:s+"delABR"},CorrespondentExchangeMap:{qry:s+"qryEXC",set2:s+"set2EXC"},CurrencyExchangeMap:{qry:s+"qryEXG",set2:s+"set2EXG"},CorrespondentExchangeBuyMap:{qry:s+"qryEXB",set2:s+"set2EXB"},ExchangeRates:{get:s+"getEXB",qry:s+"qryEXG2",set2:s+"set2EXB"},RtDefault:{qry:s+"qryDE",set2:s+"set2DE"},Profession:{qry:s+"qryPFN",page:s+"pagePFN",get:s+"getPFN",set:s+"setPFN",del:s+"delPFN",snapshot:s+"snapshotPFN"},ClientIndividual:{qry:s+"qryCLI"},SalaryRange:{qry:s+"qrySRA",page:s+"pageSRA",get:s+"getSRA",set:s+"setSRA",del:s+"delSRA"},SourceOfIncome:{qry:s+"qrySI",page:s+"pageSI",snapshot:s+"snapshotSI",get:s+"getSI",set:s+"setSI",del:s+"delSI"},CorrespondentControl:{qry:s+"qryCCL",set:s+"set2CCL"},InterfaceMaps:{qry:s+"qryIFM",get:s+"getIFM",set2:s+"set2IFM"},SourceOfIncomeType:{qry:s+"qrySIT",snapshot:s+"snapshotSIT",page:s+"pageSIT",get:s+"getSIT",set:s+"setSIT",del:s+"delSIT"},ProfessionGroups:{qry:s+"qryPFG",page:s+"pagePFG",snapshot:s+"snapshotPFG",get:s+"getPFG",set:s+"setPFG",del:s+"delPFG"},CorrespondentGroup:{qry:s+"qryCGP",page:s+"pageCGP",get:s+"getCGP",set:s+"setCGP",del:s+"delCGP"},ExtraIncome:{qry:s+"qryEI",get:s+"getEI",del:s+"delEI",page:s+"pageEI",snapshot:s+"snapshotEI",set:s+"setEI"},CountryRisk:{page:s+"pageCOU",get:s+"getCOU",set:s+"setCOU",del:s+"delCOU"},CorDispControl:{qry:s+"qryCDC",set2:s+"set2CDC"},CorrespondentDispersal:{qry:s+"qryCDM",get:s+"getCDM",del:s+"delCDM",set2:s+"set2CDM"},CorrespondentDispersalRate:{qry:s+"qryCDR",set2:s+"set2CDR"}}},75991:function(e,r,t){"use strict";var s=t(52322),a=t(60218),n=t(76385);r.Z=e=>{let{children:r,title:t,form:o=!1,...d}=e;return(0,s.jsxs)(a.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:t?{xs:.75,sm:1,md:1.25}:0,p:o?0:"clamp(8px, 0.8vw, 14px)",pt:o?0:t?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...d.sx},children:[!!t&&(0,s.jsx)(n.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:t}),r]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=80765)}),_N_E=e.O()}]);