(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18637],{21943:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-parts",function(){return n(21546)}])},21546:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return y}});var a=n(52322),t=n(2784),s=n(62202),c=n(69387),i=n(27723),d=n(65950),o=n(71987),l=n(26612),u=n(33625),f=n(62362),x=n(31389),h=n(61802),m=n(65215),p=n(60218),g=n(48601),_=n(82737),I=n(5088),C=n(80983),P=n(19473);function j(e){let{labels:r,maxAccess:n,recordId:c}=e,{getRequest:i,postRequest:u}=(0,t.useContext)(d.$),{platformLabels:h}=(0,t.useContext)(P.l),j=(0,o.E)({endpointId:m.$.Parts.qry}),{formik:y}=(0,C.c)({initialValues:{recordId:null,name:"",reference:""},maxAccess:n,validateOnChange:!0,validationSchema:g.Ry({name:g.Z_().required(),reference:g.Z_().required()}),onSubmit:async e=>{let r=await u({extension:m.$.Parts.set,record:JSON.stringify(e)});e.recordId||y.setValues({...e,recordId:r.recordId}),s.ZP.success(e.recordId?h.Edited:h.Added),j()}}),v=!!y.values.recordId||!!c;return(0,t.useEffect)(()=>{!async function(){if(c){let e=await i({extension:m.$.Parts.get,parameters:"_recordId=".concat(c)});y.setValues(e.record)}}()},[]),(0,a.jsx)(_.Z,{resourceId:l.i.IVparts,form:y,maxAccess:n,editMode:v,children:(0,a.jsx)(x.R,{children:(0,a.jsx)(f.Q,{children:(0,a.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(I.Z,{name:"name",label:r.name,value:y.values.name,required:!0,maxAccess:n,onChange:y.handleChange,onClear:()=>y.setFieldValue("name",""),error:y.touched.name&&!!y.errors.name})}),(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(I.Z,{name:"reference",label:r.reference,value:y.values.reference,required:!0,maxAccess:n,onChange:y.handleChange,onClear:()=>y.setFieldValue("reference",""),error:y.touched.reference&&!!y.errors.reference})})]})})})})}var y=()=>{let{getRequest:e,postRequest:r}=(0,t.useContext)(d.$),{platformLabels:n}=(0,t.useContext)(P.l),{stack:p}=(0,h.zY)();async function g(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50}=r;return{...await e({extension:m.$.Parts.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&filter=")}),_startAt:n}}let{query:{data:_},labels:I,refetch:C,invalidate:y,paginationParameters:v,access:w}=(0,o.J)({queryFn:g,endpointId:m.$.Parts.qry,datasetId:l.i.IVparts}),Z=[{field:"name",headerName:I.name,flex:1},{field:"reference",headerName:I.reference,flex:1}];function A(e){p({Component:j,props:{labels:I,recordId:e,maxAccess:w},width:500,height:270,title:I.parts})}let q=async e=>{await r({extension:m.$.Parts.del,record:JSON.stringify(e)}),y(),s.ZP.success(n.Deleted)};return(0,a.jsxs)(x.R,{children:[(0,a.jsx)(u.g,{children:(0,a.jsx)(i.Z,{onAdd:()=>{A()},maxAccess:w})}),(0,a.jsx)(f.Q,{children:(0,a.jsx)(c.Z,{columns:Z,gridData:_,rowId:["recordId"],onEdit:e=>{A(null==e?void 0:e.recordId)},onDelete:q,isLoading:!1,pageSize:50,refetch:C,paginationParameters:v,paginationType:"api",maxAccess:w})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=21943)}),_N_E=e.O()}]);