(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75020],{96100:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ps-trx-dtd/[functionId]",function(){return s(84983)}])},84983:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var n=s(52322),a=s(2784),r=s(62202),d=s(69387),o=s(27723),l=s(65950),c=s(71987),i=s(26612),u=s(31389),p=s(33625),f=s(62362),y=s(61802),I=s(19473),m=s(81510),g=s(60218),h=s(48601),x=s(82737),D=s(8661),S=s(80983),P=s(19689),C=s(38449);function _(e){let{labels:t,maxAccess:s,recordId:d,functionId:o,window:p}=e,{getRequest:y,postRequest:_}=(0,a.useContext)(l.$),{platformLabels:q}=(0,a.useContext)(I.l),A=(0,c.E)({endpointId:m.A.DocumentTypeDefault.qry}),{formik:v}=(0,S.c)({initialValues:{dtId:"",disableSKULookup:!1},maxAccess:s,validateOnChange:!0,validationSchema:h.Ry({dtId:h.Z_().required()}),onSubmit:async e=>{let t=e.recordId;await _({extension:m.A.DocumentTypeDefault.set,record:JSON.stringify(e)}),t||v.setFieldValue("recordId",e.dtId),r.ZP.success(q.Updated),A(),p.close()}}),R=!!v.values.recordId;return(0,a.useEffect)(()=>{!async function(){if(d){let e=await y({extension:m.A.DocumentTypeDefault.get,parameters:"_dtId=".concat(d)});v.setValues({...e.record,recordId:d})}}()},[]),(0,n.jsx)(x.Z,{resourceId:i.i.POSDocTypeDefault,form:v,maxAccess:s,editMode:R,isCleared:!1,children:(0,n.jsx)(u.R,{children:(0,n.jsx)(f.Q,{children:(0,n.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(D.Z,{endpointId:C.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(o),name:"dtId",required:!0,label:t.doctype,readOnly:R,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:v.values,maxAccess:s,onChange:(e,t)=>{v.setFieldValue("dtId",(null==t?void 0:t.recordId)||"")},error:v.touched.dtId&&!!v.errors.dtId})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(P.Z,{name:"disableSKULookup",value:v.values.disableSKULookup,onChange:e=>v.setFieldValue("disableSKULookup",e.target.checked),label:t.dsl,maxAccess:s})})]})})})})}var q=s(63165),A=()=>{let{getRequest:e,postRequest:t}=(0,a.useContext)(l.$),{platformLabels:s}=(0,a.useContext)(I.l),{stack:g}=(0,y.zY)(),{functionId:h}=(0,q.F)();async function x(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pagination:{_startAt:s=0,_pageSize:n=50}}=t;return{...await e({extension:m.A.DocumentTypeDefault.qry,parameters:"_startAt=".concat(s,"&_pageSize=").concat(n,"&_functionId=").concat(h)}),_startAt:s}}let{query:{data:D},labels:S,access:P,paginationParameters:C,invalidate:A,refetch:v}=(0,c.J)({endpointId:m.A.DocumentTypeDefault.qry,datasetId:i.i.POSDocTypeDefault,filter:{filterFn:x,default:{functionId:h}}}),R=[{field:"dtName",headerName:S.doctype,flex:1},{field:"disableSKULookup",headerName:S.dsl,type:"checkbox",flex:1}],T=async e=>{await t({extension:m.A.DocumentTypeDefault.del,record:JSON.stringify(e)}),A(),r.ZP.success(s.Deleted)};function V(e){g({Component:_,props:{labels:S,functionId:h,recordId:null==e?void 0:e.dtId,maxAccess:P},width:500,height:300,title:S.doctypeDefault})}return(0,n.jsxs)(u.R,{children:[(0,n.jsx)(p.g,{children:(0,n.jsx)(o.Z,{onAdd:()=>{V()},maxAccess:P})}),(0,n.jsx)(f.Q,{children:(0,n.jsx)(d.Z,{columns:R,gridData:D,rowId:["dtId"],onEdit:e=>{V(e)},onDelete:T,isLoading:!1,pageSize:50,paginationParameters:C,refetch:v,paginationType:"api",maxAccess:P})})]})}},81510:function(e,t,s){"use strict";s.d(t,{A:function(){return a}});let n="PS.asmx/",a={PosUsers:{qry:n+"qryUSR",get:n+"getUSR",set:n+"setUSR",del:n+"delUSR",page:n+"pageUSR",set2:n+"set2USR"},PointOfSales:{page:n+"pagePOS",qry:n+"qryPOS",get:n+"getPOS",set:n+"setPOS",del:n+"delPOS"},SalesPerson:{qry:n+"qrySP",set2:n+"set2SP"},CashAccount:{qry:n+"qryCA",set2:n+"set2CA"},DocumentTypeDefault:{qry:n+"qryDTD",get:n+"getDTD",set:n+"setDTD",del:n+"delDTD"},RetailInvoice:{qry:n+"qryIVC",del:n+"delIVC",get:n+"getIVC",get2:n+"get2IVC",snapshot:n+"snapshotIVC",level:n+"level2_IVC",set2:n+"set2IVC",post:n+"postIVC",unpost:n+"unpostIVC"},RetailPurchase:{set2:n+"set2IVP"},RetailPurchaseReturn:{set2:n+"set2IPR"},RetailReturn:{set2:n+"set2IVR"},PUItems:{snapshot:n+"snapshotIT"}}},63165:function(e,t,s){"use strict";s.d(t,{F:function(){return r}});var n=s(5632),a=s(2784);let r=()=>{let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(e.query);return t}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=96100)}),_N_E=e.O()}]);