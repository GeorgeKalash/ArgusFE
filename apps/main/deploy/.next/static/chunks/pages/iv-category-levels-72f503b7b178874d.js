(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66284],{21397:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-category-levels",function(){return n(13392)}])},13392:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=n(52322),s=n(2784),l=n(48601),a=n(65950),u=n(76399),c=n(26612),o=n(62202),r=n(71987),d=n(31389),m=n(62362),v=n(19473),f=n(80983),h=n(96026),x=n(65215),_=n(54074),g=()=>{let{getRequest:e,postRequest:t}=(0,s.useContext)(a.$),{platformLabels:n}=(0,s.useContext)(v.l),{stack:g}=(0,h.V)(),{labels:p,access:y}=(0,r.J)({datasetId:c.i.CategoryLevels});async function I(){var t;let n=await e({extension:x.$.CategoryLevel.qry}),i=null==n?void 0:null===(t=n.list)||void 0===t?void 0:t.map((e,t)=>({id:t+1,...e}));w.setValues({items:i})}(0,s.useEffect)(()=>{I()},[]);let{formik:w}=(0,f.c)({maxAccess:y,validateOnChange:!0,validationSchema:l.Ry({items:l.IX().of(l.Ry().shape({levelId:l.Rx().required().integer().min(0).max(9).test("is-unique","".concat(p.levelIDUniqueMessage),function(e){let{parent:t}=this;return!w.values.items.find(n=>n.levelId===e&&n.id!==t.id)}),name:l.Z_().required()}))}),initialValues:{items:[{id:1,levelId:0,name:""}]},onSubmit:async e=>{let i=e.items.map(e=>e.levelId),s=new Set;for(let e of i){if(s.has(e)){g({message:"".concat(p.duplicateLevelIdFound,": ").concat(e)});return}s.add(e)}let l={items:e.items};await t({extension:x.$.CategoryLevel.set2,record:JSON.stringify(l)}),o.ZP.success(n.Saved)}}),C=[{component:"numberfield",label:p.levelId,name:"levelId"},{component:"textfield",label:p.name,name:"name"}];return(0,i.jsx)(_.Z,{onSave:w.handleSubmit,maxAccess:y,fullSize:!0,children:(0,i.jsx)(d.R,{children:(0,i.jsx)(m.Q,{children:(0,i.jsx)(u._,{name:"items",onChange:e=>w.setFieldValue("items",e),value:w.values.items,error:w.errors.items,columns:C,maxAccess:y})})})})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=21397)}),_N_E=e.O()}]);