(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36405],{69593:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exchange-rates",function(){return t(94705)}])},94705:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return E}});var r=t(52322),n=t(2784),d=t(62202),s=t(69387),c=t(65950),o=t(1251),i=t(26612),l=t(61802),u=t(71987),x=t(60218),I=t(82737),g=t(80983),h=t(48601),m=t(8661),y=t(89330),f=t(91406),p=t(31389),q=t(62362),v=t(19473);function _(e){var a;let{labels:t,recordId:s,maxAccess:l,record:_,window:N}=e,{getRequest:S,postRequest:E}=(0,n.useContext)(c.$),{platformLabels:w}=(0,n.useContext)(v.l),b=(0,u.E)({endpointId:o.q.ExchangeRates.page}),Z=e=>"".concat(e.substring(0,4),"/").concat(e.substring(4,6),"/").concat(e.substring(6,8)),j=e=>{let a=new Date(e),t=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return"".concat(t).concat(r).concat(n)},{formik:D}=(0,g.c)({initialValues:{recordId:s,exId:"",seqNo:0,rate:"",dayId:new Date},maxAccess:l,validateOnChange:!0,validationSchema:h.Ry({exId:h.Z_().required(),dayId:h.Z_().required(),rate:h.Z_().required()}),onSubmit:async e=>{let a=D.values.exId,t=D.values.dayId,r=D.values.seqNo;await E({extension:o.q.ExchangeRates.set,record:JSON.stringify({...e,dayId:j(e.dayId)})}),a||t||r?d.ZP.success(w.Edited):d.ZP.success(w.Added),D.setFieldValue("recordId",String(e.exId)+String(e.dayId)+String(e.seqNo)),N.close(),b()}}),C=!!D.values.recordId;return(0,n.useEffect)(()=>{C&&_&&async function(){let e=await S({extension:o.q.ExchangeRates.get,parameters:"_exId=".concat(_.exId,"&_dayId=").concat(_.dayId,"&_seqNo=").concat(_.seqNo)});(null==e?void 0:e.record)&&D.setValues({...e.record,recordId:"".concat(e.record.exId).concat(e.record.dayId).concat(String(e.record.seqNo)),dayId:new Date(Z(e.record.dayId))})}()},[]),(0,n.useEffect)(()=>{!async function(){if(_&&_.exId&&_.dayId&&_.seqNo&&s){let e=await S({extension:o.q.ExchangeRates.get,parameters:"_exId=".concat(_.exId,"&_dayId=").concat(_.dayId,"&_seqNo=").concat(_.seqNo)});D.setValues({...e.record,dayId:new Date(Z(e.record.dayId)),recordId:String(e.record.exId)+String(e.record.dayId)+String(e.record.seqNo)})}}()},[]),(0,r.jsx)(I.Z,{resourceId:i.i.ExchangeRates,form:D,maxAccess:l,editMode:C,children:(0,r.jsx)(p.R,{children:(0,r.jsx)(q.Q,{children:(0,r.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(m.Z,{endpointId:o.q.ExchangeTable.qry,name:"exId",label:t.exTable,readOnly:C,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:" Ref"},{key:"name",value:"Name"}],values:D.values,required:!0,maxAccess:l,onChange:(e,a)=>{D&&D.setFieldValue("exId",null==a?void 0:a.recordId)},error:!!D.errors.exId})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"dayId",readOnly:C,label:t.stDate,onChange:D.setFieldValue,value:D.values.dayId,maxAccess:l,required:!0,error:D.touched.dayId&&!!D.errors.dayId})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{name:"rate",label:t.rate,decimalScale:7,value:null===(a=D.values)||void 0===a?void 0:a.rate,required:!0,maxLength:"18",onChange:D.handleChange,onClear:()=>D.setFieldValue("rate",""),maxAccess:l,error:D.touched.rate&&!!D.errors.rate})})]})})})})}var N=t(33625),S=t(36908),E=()=>{let{getRequest:e,postRequest:a}=(0,n.useContext)(c.$),{platformLabels:t}=(0,n.useContext)(v.l),{stack:x}=(0,l.zY)();async function I(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:r=50,params:n}=a;return{...await e({extension:o.q.ExchangeRates.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(r,"&_params=").concat(n||"","&exId=")}),_startAt:t}}async function g(e){let{filters:a,pagination:t}=e;return I({_startAt:t._startAt||0,params:null==a?void 0:a.params})}let{query:{data:h},labels:m,paginationParameters:y,refetch:f,access:E,invalidate:w,filterBy:b}=(0,u.J)({queryFn:I,endpointId:o.q.ExchangeRates.page,datasetId:i.i.ExchangeRates,filter:{filterFn:g}}),Z=e=>{let a=e.substring(0,4),t=e.substring(4,6),r=e.substring(6,8);return"".concat(r,"/").concat(t,"/").concat(a)},j=[{field:"exName",headerName:m.exTable,flex:1},{field:"dayId",headerName:m.stDate,flex:1,valueGetter:e=>{let{data:a}=e;return Z(null==a?void 0:a.dayId)}},{field:"rate",headerName:m.rate,flex:1,valueFormatter:e=>{let{value:a}=e;return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:5,useGrouping:!0}).format(a)}}],D=async e=>{await a({extension:o.q.ExchangeRates.del,record:JSON.stringify(e)}),w(),d.ZP.success(t.Deleted)};function C(e){x({Component:_,props:{labels:m,record:e,maxAccess:E,recordId:e?String(e.exId)+String(e.dayId)+String(e.seqNo):null},width:500,height:400,title:m.exRate})}return(0,r.jsxs)(p.R,{children:[(0,r.jsx)(N.g,{children:(0,r.jsx)(S.Z,{hasSearch:!1,onAdd:()=>{C()},maxAccess:E,filterBy:b,reportName:"MCED"})}),(0,r.jsx)(q.Q,{children:(0,r.jsx)(s.Z,{columns:j,gridData:h,rowId:["exId","dayId","seqNo"],onEdit:e=>{C(e)},onDelete:D,maxAccess:E,refetch:f,pageSize:50,paginationParameters:y,paginationType:"api"})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=69593)}),_N_E=e.O()}]);