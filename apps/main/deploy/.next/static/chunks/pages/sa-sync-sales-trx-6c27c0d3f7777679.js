(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93821],{71496:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-sync-sales-trx",function(){return t(2563)}])},2563:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var s=t(52322),a=t(2784),r=t(61802),i=t(26612),c=t(60218),l=t(48601),o=t(65950),u=t(31389),d=t(62362),h=t(80983),x=t(19473),p=t(19689),f=t(22341),m=t(84309),v=t(89330),y=t(96026),P=t(54074);function g(e){var n,t,i,g,j,b,w,Z,S;let{_labels:C,maxAccess:T}=e,{platformLabels:D}=(0,a.useContext)(x.l),{stack:_}=(0,y.V)(),{postRequest:R}=(0,a.useContext)(o.$),{stack:k}=(0,r.zY)(),{formik:E}=(0,h.c)({initialValues:{startDate:new Date,endDate:new Date,syncTRX:!1,syncRET:!1,syncPOS:!1},maxAccess:T,validationSchema:l.Ry({startDate:l.hT().required(),endDate:l.hT().required()}),onSubmit:async e=>{let n=await R({extension:f.P.SATrx.sync,record:JSON.stringify(e)});if(!e.syncTRX&&!e.syncRET&&!e.syncPOS){_({message:C.errorMessage});return}n.recordId&&k({Component:m.R,props:{recordId:n.recordId},closable:!1})}});return(0,s.jsx)(P.Z,{actions:[{key:"Rebuild",condition:!0,onClick:()=>E.handleSubmit(),disabled:!1}],isSaved:!1,onSave:E.handleSubmit,maxAccess:T,children:(0,s.jsx)(u.R,{children:(0,s.jsx)(d.Q,{children:(0,s.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"startDate",label:C.startDate,onChange:E.setFieldValue,maxAccess:T,required:!0,onClear:()=>E.setFieldValue("startDate",null),value:null===(n=E.values)||void 0===n?void 0:n.startDate,error:(null===(t=E.errors)||void 0===t?void 0:t.startDate)&&!!(null===(i=E.errors)||void 0===i?void 0:i.startDate)})}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"endDate",label:C.endDate,onChange:E.setFieldValue,maxAccess:T,required:!0,onClear:()=>E.setFieldValue("endDate",null),value:null===(g=E.values)||void 0===g?void 0:g.endDate,error:(null===(j=E.errors)||void 0===j?void 0:j.endDate)&&!!(null===(b=E.errors)||void 0===b?void 0:b.endDate)})}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{name:"syncTRX",value:null===(w=E.values)||void 0===w?void 0:w.syncTRX,onChange:e=>E.setFieldValue("syncTRX",e.target.checked),label:C.syncTRX,maxAccess:T})}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{name:"syncRET",value:null===(Z=E.values)||void 0===Z?void 0:Z.syncRET,onChange:e=>E.setFieldValue("syncRET",e.target.checked),label:C.syncRET,maxAccess:T})}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{name:"syncPOS",value:null===(S=E.values)||void 0===S?void 0:S.syncPOS,onChange:e=>E.setFieldValue("syncPOS",e.target.checked),label:C.syncPOS,maxAccess:T})})]})})})})}var j=()=>(0,s.jsx)(r.ut,{datasetId:i.i.SyncSalesTrx,labelKey:"SyncSalesTrx",Component:g,height:350})},84309:function(e,n,t){"use strict";t.d(n,{R:function(){return R}});var s=t(73235),a=t(52322),r=t(3854),i=t(2784),c=t(82737),l=t(65950),o=t(62362),u=t(31389),d=t(60218),h=t(21581),x=t(38449),p=t(5088),f=t(19473),m=t(21326);function v(){let e=(0,s._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return v=function(){return e},e}function y(){let e=(0,s._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return y=function(){return e},e}function P(){let e=(0,s._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return P=function(){return e},e}function g(){let e=(0,s._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return g=function(){return e},e}function j(){let e=(0,s._)(["\n  container-type: inline-size;\n"]);return j=function(){return e},e}function b(){let e=(0,s._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return b=function(){return e},e}let w=r.ZP.div(v()),Z=r.ZP.span(y()),S=r.ZP.span(P()),C=r.ZP.div(g()),T=r.ZP.div(j()),D=r.ZP.div(b());function _(e){let{label:n,topLabel:t,width:s}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)(S,{children:[t,": "]}),(0,a.jsxs)(C,{children:[(0,a.jsx)(D,{style:{width:s}}),(0,a.jsx)(Z,{children:n})]})]})}let R=e=>{let{recordId:n,onComplete:t,access:s,window:r}=e,{getRequest:v}=(0,i.useContext)(l.$),{platformLabels:y}=(0,i.useContext)(f.l);(0,m.Z)({title:y.Progress,window:r});let[P,g]=(0,i.useState)({recordId:n,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),j=async()=>(await v({extension:x.r.THD.get,parameters:"_recordId=".concat(n)})).record,b=P.currentPhase===P.phases&&P.completed===P.iterations,Z=!!P.status&&P.status<0;(0,i.useEffect)(()=>{t&&(b||Z)&&t()},[Z,b]),(0,i.useEffect)(()=>{(async()=>{g(await j())})();let e=setInterval(async()=>{let n=await j();g(n);let t=n.currentPhase===n.phases&&n.completed===n.iterations,s=!!n.status&&n.status<0;(n.status&&n.status<0||t||s)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let S=P.phases?P.currentPhase/P.phases*100:0,C=P.iterations?P.completed/P.iterations*100:0;return(0,a.jsx)(c.Z,{form:P,maxAccess:s,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>r.close(),disabled:!b&&!Z}],isSaved:!1,children:(0,a.jsx)(u.R,{children:(0,a.jsx)(o.Q,{children:(0,a.jsxs)(w,{children:[(0,a.jsx)(d.ZP,{item:!0,xs:12,children:(0,a.jsx)(p.Z,{name:"phase",label:y.Phase,value:P.currentPhaseName,readOnly:!0,maxAccess:s})}),(0,a.jsxs)(T,{children:[(0,a.jsx)(_,{label:"".concat(y.Step," ").concat(P.currentPhase," of ").concat(P.phases,"..."),topLabel:y.currentPhase,width:"".concat(S,"%")}),(0,a.jsx)(_,{label:"".concat(y.Step," ").concat(P.completed," of ").concat(P.iterations,"..."),topLabel:y.Completed,width:"".concat(C,"%")})]}),(0,a.jsx)(h.Z,{name:"log",label:y.Log,value:P.logInfo,rows:4,maxAccess:s,readOnly:!0})]})})})})};R.width=500,R.height=450}},function(e){e.O(0,[3854,49774,92888,40179],function(){return e(e.s=71496)}),_N_E=e.O()}]);