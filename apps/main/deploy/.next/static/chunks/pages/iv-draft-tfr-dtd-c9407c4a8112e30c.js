(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73778],{96836:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-draft-tfr-dtd",function(){return t(6343)}])},6343:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return j}});var a=t(52322),n=t(2784),d=t(62202),l=t(69387),s=t(27723),i=t(65950),o=t(61802),c=t(71987),u=t(26612),m=t(31389),f=t(33625),p=t(62362),I=t(19473),x=t(65215),v=t(7121),y=t(60218),h=t(48601),g=t(82737),D=t(80983),S=t(38449),T=t(8661),C=t(19689),N=t(51264);function _(e){var r;let{labels:t,maxAccess:l,recordId:s,window:o}=e,{platformLabels:f}=(0,n.useContext)(I.l),{getRequest:_,postRequest:j}=(0,n.useContext)(i.$),A=(0,c.E)({endpointId:x.$.DocumentTypeDefaults.page}),{formik:Z}=(0,D.c)({initialValues:{recordId:s,functionId:v.J.DraftTransfer,dtId:null,siteId:null,toSiteId:null,carrierId:null,plantId:null,disableSKULookup:!1},maxAccess:l,validationSchema:h.Ry({dtId:h.Z_().required()}),onSubmit:async e=>{await j({extension:x.$.DocumentTypeDefaults.set,record:JSON.stringify(e)}),s?d.ZP.success(f.Edited):(Z.setFieldValue("recordId",Z.values.dtId),d.ZP.success(f.Added)),A(),o.close()}}),k=!!Z.values.recordId;return(0,n.useEffect)(()=>{!async function(){if(s){let e=await _({extension:x.$.DocumentTypeDefaults.get,parameters:"_dtId=".concat(s)});Z.setValues({...e.record,recordId:e.record.dtId})}}()},[]),(0,a.jsx)(g.Z,{resourceId:u.i.MaterialTransferDTD,form:Z,maxAccess:l,editMode:k,functionId:v.J.DraftTransfer,children:(0,a.jsx)(m.R,{children:(0,a.jsx)(p.Q,{children:(0,a.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:S.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(v.J.DraftTransfer),name:"dtId",required:!0,label:t.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],readOnly:k,values:Z.values,maxAccess:l,onChange:(e,r)=>{Z.setFieldValue("dtId",null==r?void 0:r.recordId)},error:Z.touched.dtId&&!!Z.errors.dtId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:x.$.Site.qry,name:"siteId",label:t.fromSite,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:Z.values,maxAccess:l,onChange:(e,r)=>{Z.setFieldValue("siteId",null==r?void 0:r.recordId)},error:Z.touched.siteId&&!!Z.errors.siteId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:x.$.Site.qry,name:"toSiteId",label:t.toSite,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:Z.values,maxAccess:l,onChange:(e,r)=>{Z.setFieldValue("toSiteId",null==r?void 0:r.recordId)},error:Z.touched.toSiteId&&!!Z.errors.toSiteId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(C.Z,{name:"disableSKULookup",value:null===(r=Z.values)||void 0===r?void 0:r.disableSKULookup,onChange:e=>Z.setFieldValue("disableSKULookup",e.target.checked),label:t.dsl,maxAccess:l})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:N.p.LoCarrier.qry,name:"carrierId",label:t.carrier,values:null==Z?void 0:Z.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],maxAccess:l,onChange:(e,r)=>{Z.setFieldValue("carrierId",(null==r?void 0:r.recordId)||"")},error:Z.touched.carrierId&&!!Z.errors.carrierId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:S.r.Plant.qry,name:"plantId",label:t.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Ref"},{key:"name",value:"Name"}],values:Z.values,maxAccess:l,onChange:(e,r)=>{Z.setFieldValue("plantId",null==r?void 0:r.recordId)},error:Z.touched.plantId&&!!Z.errors.plantId})})]})})})})}var j=()=>{let{getRequest:e,postRequest:r}=(0,n.useContext)(i.$),{platformLabels:t}=(0,n.useContext)(I.l),{stack:y}=(0,o.zY)();async function h(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:a=50}=r;return{...await e({extension:x.$.DocumentTypeDefaults.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(a,"&_filter=&_functionId=").concat(v.J.DraftTransfer)}),_startAt:t}}let{query:{data:g},labels:D,invalidate:S,refetch:T,access:C,paginationParameters:N}=(0,c.J)({queryFn:h,endpointId:x.$.DocumentTypeDefaults.page,datasetId:u.i.MaterialTransferDTD}),j=[{field:"dtName",headerName:D.documentType,flex:1},{field:"siteName",headerName:D.fromSite,flex:1},{field:"toSiteName",headerName:D.toSite,flex:1},{field:"carrierName",headerName:D.carrier,flex:1},{field:"plantName",headerName:D.plant,flex:1}],A=async e=>{await r({extension:x.$.DocumentTypeDefaults.del,record:JSON.stringify(e)}),S(),d.ZP.success(t.Deleted)};function Z(e){y({Component:_,props:{labels:D,recordId:null==e?void 0:e.dtId,maxAccess:C},width:600,height:500,title:D.DraftSerialsTransferDTD})}return(0,a.jsxs)(m.R,{children:[(0,a.jsx)(f.g,{children:(0,a.jsx)(s.Z,{onAdd:()=>{Z()},maxAccess:C})}),(0,a.jsx)(p.Q,{children:(0,a.jsx)(l.Z,{columns:j,gridData:g,rowId:["dtId"],onEdit:e=>{Z(e)},onDelete:A,isLoading:!1,pageSize:50,refetch:T,paginationType:"api",paginationParameters:N,maxAccess:C})})]})}},51264:function(e,r,t){"use strict";t.d(r,{p:function(){return n}});let a="LO.asmx/",n={LoCollector:{qry:a+"qryCOL",get:a+"getCOL",set:a+"setCOL",page:a+"pageCOL",del:a+"delCOL"},LoCarrier:{qry:a+"qryCAR",get:a+"getCAR",set:a+"setCAR",page:a+"pageCAR",del:a+"delCAR"},Shipment:{get2:a+"get2SHP",set2:a+"set2SHP"},Transportation:{get:a+"getTPT",set:a+"setTPT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=96836)}),_N_E=e.O()}]);