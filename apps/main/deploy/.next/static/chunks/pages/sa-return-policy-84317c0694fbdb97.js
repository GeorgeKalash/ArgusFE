(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[54825],{93806:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-return-policy",function(){return n(95630)}])},95630:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return Z}});var r=n(52322),t=n(2784),c=n(62202),s=n(69387),l=n(27723),i=n(65950),d=n(61802),o=n(71987),u=n(26612),x=n(31389),m=n(33625),h=n(62362),f=n(19473),P=n(22341),g=n(60218),y=n(48601),p=n(82737),C=n(5088),_=n(80983),j=n(91406);function v(e){let{labels:a,maxAccess:n,recordId:s}=e,{getRequest:l,postRequest:d}=(0,t.useContext)(i.$),{platformLabels:m}=(0,t.useContext)(f.l),v=(0,o.E)({endpointId:P.P.ReturnPolicy.page}),{formik:Z}=(0,_.c)({initialValues:{recordId:null,reference:"",name:"",maxPct:"",maxDaysBack:""},validateOnChange:!0,validationSchema:y.Ry({name:y.Z_().required(),maxPct:y.Rx().required().min(.01," must be greater than 0").max(100," must be less than or equal to 100")}),onSubmit:async e=>{let a=await d({extension:P.P.ReturnPolicy.set,record:JSON.stringify(e)});e.recordId?c.ZP.success(m.Edited):(c.ZP.success(m.Added),Z.setFieldValue("recordId",a.recordId)),v()}}),I=!!Z.values.recordId;return(0,t.useEffect)(()=>{!async function(){if(s){let e=await l({extension:P.P.ReturnPolicy.get,parameters:"_recordId=".concat(s)});Z.setValues(e.record)}}()},[]),(0,r.jsx)(p.Z,{resourceId:u.i.ReturnPolicy,form:Z,maxAccess:n,editMode:I,children:(0,r.jsx)(x.R,{children:(0,r.jsx)(h.Q,{children:(0,r.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(g.ZP,{item:!0,xs:12,children:(0,r.jsx)(C.Z,{name:"reference",label:a.reference,value:Z.values.reference,maxAccess:n,maxLength:"30",onChange:Z.handleChange,onClear:()=>Z.setFieldValue("reference","")})}),(0,r.jsx)(g.ZP,{item:!0,xs:12,children:(0,r.jsx)(C.Z,{name:"name",label:a.name,value:Z.values.name,required:!0,maxAccess:n,maxLength:"30",onChange:Z.handleChange,onClear:()=>Z.setFieldValue("name",""),error:Z.touched.name&&!!Z.errors.name})}),(0,r.jsx)(g.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"maxPct",required:!0,label:a.maxPt,value:Z.values.maxPct,maxAccess:n,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("maxPct",""),error:Z.touched.maxPct&&!!Z.errors.maxPct,allowNegative:!1})}),(0,r.jsx)(g.ZP,{item:!0,xs:12,children:(0,r.jsx)(j.Z,{name:"maxDaysBack",label:a.maxDaysBack,value:Z.values.maxDaysBack,maxAccess:n,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("maxDaysBack","")})})]})})})})}var Z=()=>{let{getRequest:e,postRequest:a}=(0,t.useContext)(i.$),{platformLabels:n}=(0,t.useContext)(f.l),{stack:g}=(0,d.zY)();async function y(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:r=50}=a;try{return{...await e({extension:P.P.ReturnPolicy.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(r,"&_filter=&_sortField=")}),_startAt:n}}catch(e){}}let{query:{data:p},labels:C,invalidate:_,paginationParameters:j,refetch:Z,access:I}=(0,o.J)({queryFn:y,endpointId:P.P.ReturnPolicy.page,datasetId:u.i.ReturnPolicy}),w=[{field:"reference",headerName:C.reference,flex:1},{field:"name",headerName:C.name,flex:1},{field:"maxPct",headerName:C.maxPt,flex:1},{field:"maxDaysBack",headerName:C.maxDaysBack,flex:1}],A=async e=>{try{await a({extension:P.P.ReturnPolicy.del,record:JSON.stringify(e)}),_(),c.ZP.success(n.Deleted)}catch(e){}};function N(e){g({Component:v,props:{labels:C,recordId:e,maxAccess:I},width:600,height:500,title:C.returnPolicy})}return(0,r.jsxs)(x.R,{children:[(0,r.jsx)(m.g,{children:(0,r.jsx)(l.Z,{onAdd:()=>{N()},maxAccess:I})}),(0,r.jsx)(h.Q,{children:(0,r.jsx)(s.Z,{columns:w,gridData:p,rowId:["recordId"],onEdit:e=>{N(null==e?void 0:e.recordId)},onDelete:A,isLoading:!1,pageSize:50,refetch:Z,paginationParameters:j,paginationType:"api",maxAccess:I})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=93806)}),_N_E=e.O()}]);