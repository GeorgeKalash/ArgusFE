(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98125],{22002:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bp-master-data",function(){return l(77475)}])},77475:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return K}});var n=l(52322),r=l(2784),t=l(62202),s=l(69387),d=l(65950),i=l(253),o=l(26612),c=l(29326),u=l(48601),m=l(82737),x=l(60218),v=l(5088),h=l(3191),f=l(89330),I=l(38449),y=l(8661),p=l(84100),b=l(39812),g=l(31389),j=l(62362),Z=l(80983),C=l(91406),N=l(19473),F=l(19689),P=l(243);function D(e){var a,l,s,c,D;let{labels:A,maxAccess:w,invalidate:_,store:R,setStore:S,window:k}=e,{recordId:V}=R,{getRequest:q,postRequest:T}=(0,r.useContext)(d.$),{platformLabels:O}=(0,r.useContext)(N.l),{changeDT:B,maxAccess:M}=(0,P.r)({access:w,readOnlyOnEditMode:!1,name:"reference"}),{formik:E}=(0,Z.c)({maxAccess:M,initialValues:{recordId:V||null,reference:"",name:"",category:null,categoryName:null,groupId:null,flName:"",defaultInc:"",defaultId:"",isInactive:!1,keywords:"",plId:null,shipAddressId:null,billAddressId:null,birthDate:null,birthPlace:"",nationalityId:null,legalStatusId:null,isBlackListed:!1},validateOnChange:!0,validationSchema:u.Ry({category:u.Z_().required(),groupId:u.Z_().required(),reference:u.Z_().required(),name:u.Z_().required()}),onSubmit:async e=>{var a;e.recordId=V;let l=await T({extension:i.F.MasterData.set,record:JSON.stringify({...e,birthDate:(null==e?void 0:e.birthDate)?(0,b.ku)(null==e?void 0:e.birthDate):null})});if(e.defaultId){let a={bpId:l.recordId,idNum:e.defaultId,incId:e.defaultInc};await T({extension:i.F.MasterIDNum.set,record:JSON.stringify(a)})}_();let n=L?O.Edited:O.Added;t.ZP.success(n);let r=L?{reference:null==E?void 0:null===(a=E.values)||void 0===a?void 0:a.reference}:await G(l.recordId);k.setNextToTitle(null==r?void 0:r.reference)}}),L=!!E.values.recordId,z=async e=>{let a=await q({extension:i.F.CategoryID.qry,parameters:"_startAt=0&_pageSize=1000"});return e?a.list.filter(a=>1===parseInt(e)&&a.person||2===parseInt(e)&&a.org||3===parseInt(e)&&a.group):[]},J=async e=>{if(e&&V){let a=await q({extension:i.F.MasterIDNum.get,parameters:"_bpId=".concat(V,"&_incId=").concat(e)});a.record&&E.setFieldValue("defaultId",a.record.idNum)}},$=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!L}];async function G(e){if(!e)return;let a=await q({extension:i.F.MasterData.get,parameters:"_recordId=".concat(e)}),l=(null==a?void 0:a.record)||{};return E.setValues({...l,birthDate:(null==l?void 0:l.birthDate)?(0,b.a1)(null==l?void 0:l.birthDate):null}),S(e=>({...e,recordId:null==l?void 0:l.recordId,bp:{ref:(null==l?void 0:l.reference)||"",name:(null==l?void 0:l.name)||""}})),l}return(0,r.useEffect)(()=>{!async function(){if(V){let e=await G(V);await J(null==e?void 0:e.defaultInc)}}()},[V]),(0,r.useEffect)(()=>{!async function(){var e,a;if(null==E?void 0:null===(e=E.values)||void 0===e?void 0:e.category){let e=await z(null==E?void 0:null===(a=E.values)||void 0===a?void 0:a.category);S(a=>({...a,category:e}))}}()},[null==E?void 0:null===(a=E.values)||void 0===a?void 0:a.category]),(0,n.jsx)(m.Z,{resourceId:o.i.BPMasterData,actions:$,form:E,maxAccess:M,editMode:L,children:(0,n.jsx)(g.R,{children:(0,n.jsx)(j.Q,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{datasetId:p.v.BP_CATEGORY,name:"category",label:A.category,valueField:"key",displayField:"value",values:E.values,required:!0,readOnly:L,maxAccess:M,onChange:(e,a)=>{E.setFieldValue("category",null==a?void 0:a.key),E.setFieldValue("defaultInc",""),E.setFieldValue("defaultId","")},error:E.touched.category&&!!E.errors.category})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:i.F.Group.qry,name:"groupId",label:A.groupName,valueField:"recordId",displayField:"name",values:E.values,required:!0,readOnly:L,maxAccess:M,onChange:(e,a)=>{E.setFieldValue("groupId",(null==a?void 0:a.recordId)||null),B(a)},error:E.touched.groupId&&!!E.errors.groupId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"reference",readOnly:L,label:A.reference,value:E.values.reference,maxAccess:M,maxLength:"15",onChange:E.handleChange,onClear:()=>E.setFieldValue("reference",""),error:E.touched.reference&&!!E.errors.reference})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"name",label:A.name,value:E.values.name,required:!0,maxLength:"70",maxAccess:M,onChange:E.handleChange,onClear:()=>E.setFieldValue("name",""),error:E.touched.name&&!!E.errors.name})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(f.Z,{name:"birthDate",label:A.birthDate,value:E.values.birthDate,onChange:E.setFieldValue,maxAccess:M,onClear:()=>E.setFieldValue("birthDate",""),error:E.touched.birthDate&&!!E.errors.birthDate})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"birthPlace",label:A.birthPlace,value:E.values.birthPlace,maxLength:"30",maxAccess:M,onChange:E.handleChange,onClear:()=>E.setFieldValue("birthPlace",""),error:E.touched.birthPlace&&!!E.errors.birthPlace})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"flName",label:A.flName,value:E.values.flName,maxLength:"70",maxAccess:M,onChange:E.handleChange,onClear:()=>E.setFieldValue("flName",""),error:E.touched.flName&&!!E.errors.flName})})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"keywords",label:A.keywords,value:E.values.keywords,maxLength:"30",maxAccess:M,onChange:E.handleChange,onClear:()=>E.setFieldValue("keywords",""),error:E.touched.keywords&&!!E.errors.keywords})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(h.Z,{name:"defaultInc",label:A.idCategory,valueField:"recordId",displayField:"name",readOnly:!E.values.category||!(null==R?void 0:null===(l=R.category)||void 0===l?void 0:l.length)>0,store:R.category,value:null==R?void 0:null===(s=R.category)||void 0===s?void 0:s.filter(e=>e.recordId===parseInt(E.values.defaultInc))[0],maxAccess:M,onChange:(e,a)=>{E.setFieldValue("defaultId",""),E.setFieldValue("defaultInc",a?a.recordId:null),J(null==a?void 0:a.recordId)}})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(C.Z,{name:"defaultId",label:A.defaultId,value:E.values.defaultId,maxAccess:M,readOnly:!(null===(c=E.values)||void 0===c?void 0:c.defaultInc),onChange:E.handleChange,onClear:()=>E.setFieldValue("defaultId","")})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:I.r.Country.qry,name:"nationalityId",label:A.nationalityId,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:E.values,valueField:"recordId",displayField:"name",maxAccess:M,onChange:(e,a)=>{E&&E.setFieldValue("nationalityId",null==a?void 0:a.recordId)},error:E.touched.nationalityId&&!!E.errors.nationalityId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:i.F.LegalStatus.qry,parameters:"_startAt=0&_pageSize=100",name:"legalStatusId",label:A.legalStatus,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:"name",values:E.values,maxAccess:M,onChange:(e,a)=>{E&&E.setFieldValue("legalStatusId",null==a?void 0:a.recordId)},error:E.touched.legalStatusId&&!!E.errors.legalStatusId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(F.Z,{name:"isInactive",value:E.values.isInactive,onChange:e=>E.setFieldValue("isInactive",e.target.checked),label:A.inactive,maxAccess:M})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(F.Z,{name:"isBlackListed",value:null===(D=E.values)||void 0===D?void 0:D.isBlackListed,onChange:e=>E.setFieldValue("isBlackListed",e.target.checked),label:A.isBlackListed,maxAccess:M})})]})})]})})})})}var A=l(9522),w=l(76399),_=l(54074),R=e=>{let{store:a,maxAccess:l,labels:s}=e,{recordId:o}=a,{getRequest:c,postRequest:u}=(0,r.useContext)(d.$),{platformLabels:m}=(0,r.useContext)(N.l),x=!!a.recordId,{formik:v}=(0,Z.c)({maxAccess:l,validateOnChange:!0,initialValues:{rows:[]},onSubmit:async e=>{await f(e.rows)}}),h=[{component:"textfield",label:s.idCategory,name:"incName",props:{readOnly:!0}},{component:"textfield",label:s.idNumber,name:"idNum",updateOn:"blur",async onChange(e){let{row:{update:a,oldRow:l,newRow:n}}=e;if(!(null==n?void 0:n.idNum)){a({...n,expiryDate:null});return}}},{component:"date",name:"expiryDate",label:null==s?void 0:s.expiryDate,propsReducer(e){let{row:a,props:l}=e;return{...l,readOnly:!a.idNum}}}],f=async e=>{let a=Object.entries(e).map(async e=>{let[a,l]=e;return(null==l?void 0:l.idNum)===""&&(l.idNum=null),await u({extension:i.F.MasterIDNum.set,record:JSON.stringify({...l,expiryDate:l.expiryDate?(0,b.ku)(l.expiryDate):null})})});await Promise.all(a),t.ZP.success(e.recordId?m.Edited:m.Added)};async function I(e){if(e){let r=await c({extension:i.F.MasterIDNum.qry,parameters:"_bpId=".concat(e)}),t=a.category;var l,n=null===(l=r.list)||void 0===l?void 0:l.filter(e=>null==t?void 0:t.some(a=>a.name===e.incName));if((null==n?void 0:n.length)>0){let e=n.map((e,a)=>{let{expiryDate:l,...n}=e;return{id:a,...n,expiryDate:l?(0,b.a1)(l):null}});v.setValues({rows:e})}else v.setValues({rows:[]})}}return(0,r.useEffect)(()=>{var e;(null===(e=a.category)||void 0===e?void 0:e.length)>0&&I(o)},[a.category,o]),(0,n.jsx)(_.Z,{onSave:v.handleSubmit,maxAccess:l,editMode:x,isParentWindow:!1,children:(0,n.jsx)(g.R,{children:(0,n.jsx)(j.Q,{children:(0,n.jsx)(w._,{onChange:e=>v.setFieldValue("rows",e),value:v.values.rows,error:v.errors.rows,columns:h,name:"rows",allowDelete:!1,allowAddNewLine:!1})})})})},S=l(17454),k=l(61802),V=l(45937),q=l(71987),T=e=>{let{store:a,editMode:l,...s}=e,{recordId:c}=a,{getRequest:u,postRequest:m}=(0,r.useContext)(d.$),{stack:x}=(0,k.zY)(),{platformLabels:v}=(0,r.useContext)(N.l),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:l=50}=e;return{...await u({extension:i.F.BPAddress.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(l,"&_bpId=").concat(c)}),_startAt:a}},{query:{data:f,refetch:I},paginationParameters:y}=(0,q.J)({enabled:!!c,queryFn:h,endpointId:i.F.BPAddress.page,datasetId:o.i.Address});async function p(e){x({Component:V.Z,props:{recordId:e,isSavedClear:!1,datasetId:o.i.ADDBPMasterData,editMode:l,onSubmit:async(a,l)=>{a.bpId=c,await m({extension:i.F.BPAddress.set,record:JSON.stringify(a)}),t.ZP.success(e?v.Edited:v.Added),I(),l.close()}}})}let b={...f,list:((null==f?void 0:f.list)||[]).map(e=>e.address)};return(0,n.jsx)(S.Z,{addressGridData:b,paginationParameters:y,addAddress:function(){p()},delAddress:e=>{e.bpId=c,e.addressId=e.recordId,m({extension:i.F.BPAddress.del,record:JSON.stringify(e)}).then(e=>{t.ZP.success(v.Deleted),I()})},editAddress:e=>{p(e.recordId)},datasetId:o.i.ADDBPMasterData,refetch:I,...s})},O=l(27723),B=l(27423),M=e=>{let{bpId:a,recordId:l,labels:s,maxAccess:c,getRelationGridData:v,window:h,editMode:I}=e,{getRequest:p,postRequest:C}=(0,r.useContext)(d.$),{platformLabels:F}=(0,r.useContext)(N.l),{formik:P}=(0,Z.c)({maxAccess:c,initialValues:{recordId:null,toBPId:null,relationId:null,relationName:null,startDate:null,endDate:null,toBPName:null,toBPRef:null,fromBPId:a},validateOnChange:!0,validationSchema:u.Ry({toBPId:u.Z_().required(),relationId:u.Z_().required()}),onSubmit:async e=>{await D(e)}}),D=async e=>{e.startDate=e.startDate?(0,b.ku)(e.startDate):"",e.endDate=e.endDate?(0,b.ku)(e.endDate):"",await C({extension:i.F.Relation.set,record:JSON.stringify(e)}),l?t.ZP.success(F.Edited):t.ZP.success(F.Added),await v(a),h.close()},A=async e=>{let a=await p({extension:i.F.Relation.get,parameters:"_recordId=".concat(e)});a.record.startDate=(0,b.a1)(a.record.startDate),a.record.endDate=(0,b.a1)(a.record.endDate),P.setValues(a.record)};return(0,r.useEffect)(()=>{l&&A(l)},[l]),(0,n.jsx)(m.Z,{resourceId:o.i.BPMasterData,form:P,maxAccess:c,isInfo:!1,editMode:I,children:(0,n.jsx)(g.R,{children:(0,n.jsx)(j.Q,{children:(0,n.jsxs)(x.ZP,{container:!0,gap:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(B.U,{endpointId:i.F.MasterData.snapshot,name:"toBPId",label:s.businessPartner,form:P,required:!0,displayFieldWidth:2,valueField:"recordId",displayField:"reference",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],firstValue:P.values.toBPRef,secondValue:P.values.toBPName,onChange:(e,a)=>{P.setFieldValue("toBPId",a?a.recordId:""),P.setFieldValue("toBPRef",a?a.reference:""),P.setFieldValue("toBPName",a?a.name:"")},maxAccess:c,error:P.touched.toBPId&&!!P.errors.toBPId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:i.F.RelationTypes.qry,name:"relationId",label:s.relation,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:"name",values:P.values,maxAccess:c,required:!0,onChange:(e,a)=>{P&&P.setFieldValue("relationId",(null==a?void 0:a.recordId)||"")},error:P.touched.relationId&&!!P.errors.relationId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(f.Z,{name:"startDate",label:s.from,value:P.values.startDate,onChange:P.setFieldValue,maxAccess:c,onClear:()=>P.setFieldValue("startDate",""),error:P.touched.startDate&&!!P.errors.startDate})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(f.Z,{name:"endDate",label:s.to,value:P.values.endDate,onChange:P.setFieldValue,maxAccess:c,onClear:()=>P.setFieldValue("endDate",""),error:P.touched.endDate&&!!P.errors.endDate})})]})})})})},E=l(33625),L=e=>{let{store:a,labels:l,maxAccess:o}=e,{recordId:c}=a,[u,m]=(0,r.useState)([]),{getRequest:x,postRequest:v}=(0,r.useContext)(d.$),{platformLabels:h}=(0,r.useContext)(N.l),{stack:f}=(0,k.zY)(),I=!!a.recordId,y=async e=>{m(await x({extension:i.F.Relation.qry,parameters:"_bpId=".concat(e)}))},p=async e=>{await v({extension:i.F.Relation.del,record:JSON.stringify(e)}),t.ZP.success(h.Deleted),await y(c)},b=[{field:"relationName",headerName:l.relation,flex:1},{field:"toBPRef",headerName:l.reference,flex:1},{field:"toBPName",headerName:l.businessPartner,flex:1},{field:"startDate",headerName:l.from,flex:1,type:"date"},{field:"endDate",headerName:l.to,flex:1,type:"date"}],Z=e=>{f({Component:M,props:{labels:l,maxAccess:o,editMode:I,recordId:e,bpId:c,getRelationGridData:y},width:500,height:400,title:l.relation})};return(0,r.useEffect)(()=>{c&&y(c)},[c]),(0,n.jsxs)(g.R,{children:[(0,n.jsx)(E.g,{children:(0,n.jsx)(O.Z,{onAdd:()=>{Z()},maxAccess:o})}),(0,n.jsx)(j.Q,{children:(0,n.jsx)(s.Z,{columns:b,gridData:u,rowId:["recordId"],api:y,onEdit:e=>{Z(null==e?void 0:e.recordId)},onDelete:p,isLoading:!1,maxAccess:o,pagination:!1})})]})},z=e=>{let{roleId:a,recordId:l,labels:s,window:o,maxAccess:c}=e,{getRequest:m,postRequest:v}=(0,r.useContext)(d.$),{platformLabels:h}=(0,r.useContext)(N.l),f=(0,q.E)({endpointId:i.F.MasterDataRole.qry}),{formik:I}=(0,Z.c)({maxAccess:c,initialValues:{bpId:l,roleId:null},validationSchema:u.Ry({roleId:u.Z_().required()}),onSubmit:async e=>{await v({extension:i.F.MasterDataRole.set,record:JSON.stringify(e)}),f(),t.ZP.success(e.roleId?h.Edited:h.Added),o.close()}});return(0,r.useEffect)(()=>{async function e(){let e=await m({extension:i.F.MasterDataRole.get,parameters:"_bpId=".concat(l,"&_roleId=").concat(a)});I.setValues(e.record)}a&&e()},[]),(0,n.jsx)(_.Z,{onSave:I.handleSubmit,maxAccess:c,children:(0,n.jsx)(g.R,{children:(0,n.jsx)(j.Q,{children:(0,n.jsx)(x.ZP,{container:!0,children:(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:i.F.Role.qry,name:"roleId",label:s.role,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:"name",values:I.values,maxAccess:c,required:!0,onChange:(e,a)=>{I.setFieldValue("roleId",(null==a?void 0:a.recordId)||null)},error:I.touched.roleId&&!!I.errors.roleId})})})})})})},J=e=>{let{store:a,maxAccess:l,labels:c}=e,{getRequest:u,postRequest:m}=(0,r.useContext)(d.$),{recordId:x}=a,{stack:v}=(0,k.zY)(),{platformLabels:h}=(0,r.useContext)(N.l);async function f(){return await u({extension:i.F.MasterDataRole.qry,parameters:"_filter=&_bpId=".concat(x)})}let{query:{data:I},invalidate:y}=(0,q.J)({enabled:!!x,queryFn:f,datasetId:o.i.BPMasterData,endpointId:i.F.MasterDataRole.qry,params:{disabledReqParams:!0,maxAccess:l}}),p=[{field:"roleName",headerName:c.name,flex:1}];function b(e){v({Component:z,props:{labels:c,maxAccess:l,recordId:x,roleId:e},width:500,height:400,title:c.role})}let Z=async e=>{await m({extension:i.F.MasterDataRole.del,record:JSON.stringify(e)}),y(),t.ZP.success(h.Deleted)};return(0,n.jsxs)(g.R,{children:[(0,n.jsx)(E.g,{children:(0,n.jsx)(O.Z,{onAdd:()=>{b()},maxAccess:l})}),(0,n.jsx)(j.Q,{children:(0,n.jsx)(s.Z,{name:"rolesTable",columns:p,maxAccess:l,gridData:I,rowId:["roleId"],pagination:!1,onEdit:e=>{b(e.roleId)},onDelete:Z})})]})},$=l(22341);function G(e){var a,l,s,o;let{store:c,labels:m,maxAccess:h}=e,{recordId:f}=c,{getRequest:p,postRequest:b}=(0,r.useContext)(d.$),{platformLabels:P}=(0,r.useContext)(N.l),{formik:D}=(0,Z.c)({maxAccess:h,initialValues:{bpId:null,cgId:null,clientId:null,clientRef:"",clientName:"",generateClient:!0,isSubjectToVAT:!1,maxDiscount:null,discount:null,szId:null,currencyId:null,plId:null,ptId:null,spId:null,disableGeneration:!1},validationSchema:u.Ry({cgId:u.Rx().required(),clientId:u.Rx().nullable().test(function(e){return!!this.parent.generateClient||e}),discount:u.Rx().nullable().max(100),maxDiscount:u.Rx().nullable().max(100)}),onSubmit:async e=>{await b({extension:i.F.MasterSales.set,record:JSON.stringify({...e,bpId:f||null})}),t.ZP.success(P.Edited)}});return(0,r.useEffect)(()=>{!async function(){if(f){let e=await p({extension:i.F.MasterSales.get,parameters:"_bpId=".concat(f)});if(!(null==e?void 0:e.record))return;let a=Object.keys((null==e?void 0:e.record)||{}).length>0;D.setValues({...(null==e?void 0:e.record)||{},disableGeneration:a})}}()},[f]),(0,n.jsx)(_.Z,{onSave:D.handleSubmit,maxAccess:h,children:(0,n.jsx)(g.R,{children:(0,n.jsx)(j.Q,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"bpRef",label:m.bpRef,value:null==c?void 0:null===(a=c.bp)||void 0===a?void 0:a.ref,readOnly:!0})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"bpName",label:m.bpName,value:null==c?void 0:null===(l=c.bp)||void 0===l?void 0:l.name,readOnly:!0})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:$.P.ClientGroups.qry,name:"cgId",maxAccess:h,required:!0,label:m.clientGrp,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,onChange:(e,a)=>D.setFieldValue("cgId",(null==a?void 0:a.recordId)||""),error:D.touched.cgId&&!!D.errors.cgId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(F.Z,{name:"isSubjectToVAT",value:null===(s=D.values)||void 0===s?void 0:s.isSubjectToVAT,onChange:e=>D.setFieldValue("isSubjectToVAT",e.target.checked),label:m.taxable,maxAccess:h})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(F.Z,{name:"generateClient",value:null===(o=D.values)||void 0===o?void 0:o.generateClient,onChange:e=>D.setFieldValue("generateClient",e.target.checked),label:m.generateClient,maxAccess:h,readOnly:D.values.disableGeneration})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(B.U,{endpointId:$.P.Client.snapshot,valueField:"reference",displayField:"name",name:"clientId",label:m.client,form:D,displayFieldWidth:2,valueShow:"clientRef",secondValueShow:"clientName",maxAccess:h,required:!D.values.generateClient,readOnly:D.values.generateClient||D.values.disableGeneration,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:async(e,a)=>{D.setFieldValue("clientName",(null==a?void 0:a.name)||""),D.setFieldValue("clientRef",(null==a?void 0:a.reference)||""),D.setFieldValue("clientId",(null==a?void 0:a.recordId)||null)},errorCheck:"clientId"})})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:$.P.SalesZone.qry,parameters:'_startAt=0&_pageSize=1000&_sortField="recordId"&_filter=',name:"szId",label:m.salesZone,valueField:"recordId",displayField:["szRef","name"],columnsInDropDown:[{key:"szRef",value:"Reference"},{key:"name",value:"Name"}],values:D.values,maxAccess:h,onChange:(e,a)=>D.setFieldValue("szId",(null==a?void 0:a.recordId)||null),error:D.touched.szId&&!!D.errors.szId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:I.r.Currency.qry,name:"currencyId",label:m.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,maxAccess:h,onChange:(e,a)=>D.setFieldValue("currencyId",(null==a?void 0:a.recordId)||null),error:D.touched.currencyId&&!!D.errors.currencyId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:$.P.PriceLevel.qry,name:"plId",label:m.priceLevel,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,maxAccess:h,onChange:(e,a)=>D.setFieldValue("plId",(null==a?void 0:a.recordId)||""),error:D.touched.plId&&!!D.errors.plId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:$.P.PaymentTerms.qry,name:"ptId",label:m.paymentTerm,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:null==D?void 0:D.values,maxAccess:h,onChange:(e,a)=>D.setFieldValue("ptId",(null==a?void 0:a.recordId)||null)})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:$.P.SalesPerson.qry,name:"spId",label:m.salesPerson,columnsInDropDown:[{key:"spRef",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:"name",values:D.values,onChange:(e,a)=>D.setFieldValue("spId",(null==a?void 0:a.recordId)||null),error:D.touched.spId&&!!D.errors.spId,maxAccess:h})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(C.Z,{name:"discount",label:m.discount,value:D.values.discount,maxAccess:h,allowNegative:!1,onChange:D.handleChange,onClear:()=>D.setFieldValue("discount",""),error:D.touched.discount&&!!D.errors.discount})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(C.Z,{name:"maxDiscount",label:m.maxDiscount,value:D.values.maxDiscount,maxAccess:h,allowNegative:!1,onChange:D.handleChange,onClear:()=>D.setFieldValue("maxDiscount",""),error:D.touched.maxDiscount&&!!D.errors.maxDiscount})})]})})]})})})})}var Q=l(2454);function Y(e){var a,l,s,o;let{store:c,labels:m,maxAccess:h}=e,{recordId:f}=c,{getRequest:b,postRequest:C}=(0,r.useContext)(d.$),{platformLabels:P}=(0,r.useContext)(N.l),{formik:D}=(0,Z.c)({maxAccess:h,initialValues:{bpId:null,vgId:null,currencyId:null,paymentMethod:null,isSubjectToVAT:!1,vendorRef:""},validationSchema:u.Ry({vgId:u.Rx().required()}),onSubmit:async e=>{await C({extension:i.F.MasterPurchase.set,record:JSON.stringify({...e,bpId:f||null})}),t.ZP.success(P.Edited),A()}});async function A(){if(!f)return;let e=await b({extension:i.F.MasterPurchase.get,parameters:"_bpId=".concat(f)});(null==e?void 0:e.record)&&D.setValues(null==e?void 0:e.record)}return(0,r.useEffect)(()=>{f&&A()},[f]),(0,n.jsx)(_.Z,{onSave:D.handleSubmit,maxAccess:h,children:(0,n.jsx)(g.R,{children:(0,n.jsx)(j.Q,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"bpRef",label:m.bpRef,value:null==c?void 0:null===(a=c.bp)||void 0===a?void 0:a.ref,readOnly:!0})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"bpName",label:m.bpName,value:null==c?void 0:null===(l=c.bp)||void 0===l?void 0:l.name,readOnly:!0})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:Q.y.VendorGroups.qry,name:"vgId",maxAccess:h,required:!0,label:m.vendorGrp,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,onChange:(e,a)=>D.setFieldValue("vgId",(null==a?void 0:a.recordId)||""),error:D.touched.vgId&&!!D.errors.vgId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:I.r.Currency.qry,name:"currencyId",label:m.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,maxAccess:h,onChange:(e,a)=>D.setFieldValue("currencyId",(null==a?void 0:a.recordId)||null),error:D.touched.currencyId&&!!D.errors.currencyId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{datasetId:p.v.PAYMENT_METHOD,name:"paymentMethod",label:m.paymentMethod,valueField:"key",displayField:"value",values:D.values,maxAccess:h,onChange:(e,a)=>D.setFieldValue("paymentMethod",(null==a?void 0:a.key)||null),error:D.touched.paymentMethod&&!!D.errors.paymentMethod})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(F.Z,{name:"isSubjectToVAT",value:null===(s=D.values)||void 0===s?void 0:s.isSubjectToVAT,onChange:e=>D.setFieldValue("isSubjectToVAT",e.target.checked),label:m.taxable,maxAccess:h})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"vendorRef",label:m.vendorRef,value:null===(o=D.values)||void 0===o?void 0:o.vendorRef,readOnly:!0,maxAccess:h,onChange:D.handleChange,onClear:()=>D.setFieldValue("vendorRef",""),error:D.touched.vendorRef&&!!D.errors.vendorRef})})]})})})})}function W(e){var a,l,s,o,c,m;let{recordId:h,labels:f,maxAccess:p,seqInfo:b,window:C}=e,{getRequest:F,postRequest:P}=(0,r.useContext)(d.$),{platformLabels:D}=(0,r.useContext)(N.l),A=(0,q.E)({endpointId:i.F.Bank.qry}),{formik:w}=(0,Z.c)({maxAccess:p,initialValues:{bpId:h||null,seqNo:(null==b?void 0:b.seqNo)||null,bankName:"",countryId:null,accNo:"",accName:"",swiftCode:"",addInfo1:"",addInfo2:""},validationSchema:u.Ry({bankName:u.Z_().required(),countryId:u.Rx().required(),accNo:u.Z_().required(),accName:u.Z_().required()}),onSubmit:async e=>{await P({extension:i.F.Bank.set,record:JSON.stringify({...e,seqNo:(null==e?void 0:e.seqNo)||(null==b?void 0:b.maxSeqNo)+1})}),t.ZP.success(D.Edited),A(),C.close()}});return(0,r.useEffect)(()=>{!async function(){if(!h||!(null==b?void 0:b.seqNo))return;let e=await F({extension:i.F.Bank.get,parameters:"_bpId=".concat(h,"&_seqNo=").concat(null==b?void 0:b.seqNo)});(null==e?void 0:e.record)&&w.setValues(null==e?void 0:e.record)}()},[h]),(0,n.jsx)(_.Z,{onSave:w.handleSubmit,maxAccess:p,children:(0,n.jsx)(g.R,{children:(0,n.jsx)(j.Q,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"bankName",label:f.bank,value:null===(a=w.values)||void 0===a?void 0:a.bankName,maxAccess:p,required:!0,maxLength:"30",onChange:w.handleChange,onClear:()=>w.setFieldValue("bankName",""),error:w.touched.bankName&&!!w.errors.bankName})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{endpointId:I.r.Country.qry,name:"countryId",label:f.country,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,values:w.values,valueField:"recordId",displayField:["reference","name","flName"],maxAccess:p,onChange:(e,a)=>w.setFieldValue("countryId",(null==a?void 0:a.recordId)||null),error:w.touched.countryId&&!!w.errors.countryId})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"accNo",label:f.accNo,value:null===(l=w.values)||void 0===l?void 0:l.accNo,maxAccess:p,required:!0,maxLength:"30",onChange:w.handleChange,onClear:()=>w.setFieldValue("accNo",""),error:w.touched.accNo&&!!w.errors.accNo})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"accName",label:f.accName,value:null===(s=w.values)||void 0===s?void 0:s.accName,required:!0,maxLength:"30",maxAccess:p,onChange:w.handleChange,onClear:()=>w.setFieldValue("accName",""),error:w.touched.accName&&!!w.errors.accName})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"swiftCode",label:f.swiftCode,value:null===(o=w.values)||void 0===o?void 0:o.swiftCode,maxAccess:p,maxLength:"15",onChange:w.handleChange,onClear:()=>w.setFieldValue("swiftCode",""),error:w.touched.swiftCode&&!!w.errors.swiftCode})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"addInfo1",label:f.addInfo1,value:null===(c=w.values)||void 0===c?void 0:c.addInfo1,maxAccess:p,maxLength:"30",onChange:w.handleChange,onClear:()=>w.setFieldValue("addInfo1",""),error:w.touched.addInfo1&&!!w.errors.addInfo1})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(v.Z,{name:"addInfo2",label:f.addInfo2,value:null===(m=w.values)||void 0===m?void 0:m.addInfo2,maxAccess:p,maxLength:"30",onChange:w.handleChange,onClear:()=>w.setFieldValue("addInfo2",""),error:w.touched.addInfo2&&!!w.errors.addInfo2})})]})})})})}function U(e){let{store:a,labels:l,maxAccess:c}=e,{recordId:u}=a,{getRequest:m,postRequest:x}=(0,r.useContext)(d.$),{platformLabels:v}=(0,r.useContext)(N.l),{stack:h}=(0,k.zY)(),[f,I]=(0,r.useState)(0),{query:{data:y},invalidate:p}=(0,q.J)({queryFn:b,enabled:!!u,endpointId:i.F.Bank.qry,datasetId:o.i.BPMasterData,params:{disabledReqParams:!0,maxAccess:c}});async function b(){var e,a;if(!u)return{list:[]};let l=await m({extension:i.F.Bank.qry,parameters:"_bpId=".concat(u)});return I((null==l?void 0:null===(e=l.list)||void 0===e?void 0:e.length)?Math.max(...null==l?void 0:null===(a=l.list)||void 0===a?void 0:a.map(e=>{var a;return null!==(a=e.seqNo)&&void 0!==a?a:0})):0),l}let Z=[{field:"bankName",headerName:l.bank,flex:1},{field:"accNo",headerName:l.accNo,flex:1},{field:"accName",headerName:l.accName,flex:1},{field:"swiftCode",headerName:l.swiftCode,flex:1},{field:"countryName",headerName:l.countryName,flex:1}],C=e=>{h({Component:W,props:{labels:l,maxAccess:c,recordId:u,seqInfo:{seqNo:e,maxSeqNo:f}},width:500,height:400,title:l.bank})},F=async e=>{await x({extension:i.F.Bank.del,record:JSON.stringify(e)}),t.ZP.success(v.Deleted),p()};return(0,n.jsxs)(g.R,{children:[(0,n.jsx)(E.g,{children:(0,n.jsx)(O.Z,{onAdd:()=>{C()},maxAccess:c})}),(0,n.jsx)(j.Q,{children:(0,n.jsx)(s.Z,{name:"bankTable",columns:Z,gridData:y,rowId:["recordId"],onEdit:e=>{C(null==e?void 0:e.seqNo)},onDelete:F,maxAccess:c,pagination:!1})})]})}var X=e=>{let{labels:a,maxAccess:l,recordId:t,invalidate:s,window:d}=e,[i,o]=(0,r.useState)(0),[u,m]=(0,r.useState)({recordId:t||null,category:null,bp:{ref:"",name:""}}),x=[{label:a.general},{label:a.idNumber,disabled:!u.recordId},{label:a.relation,disabled:!u.recordId},{label:a.address,disabled:!u.recordId},{label:a.role,disabled:!u.recordId},{label:a.sales,disabled:!u.recordId},{label:a.purchase,disabled:!u.recordId},{label:a.bank,disabled:!u.recordId}];return(0,n.jsxs)(g.R,{children:[(0,n.jsx)(A.Y,{tabs:x,activeTab:i,setActiveTab:o,maxAccess:l}),(0,n.jsx)(c.Z,{index:0,value:i,maxAccess:l,children:(0,n.jsx)(D,{labels:a,maxAccess:l,store:u,setStore:m,invalidate:s,window:d})}),(0,n.jsx)(c.Z,{index:1,value:i,maxAccess:l,children:(0,n.jsx)(R,{store:u,maxAccess:l,labels:a})}),(0,n.jsx)(c.Z,{index:2,value:i,maxAccess:l,children:(0,n.jsx)(L,{store:u,labels:a,maxAccess:l})}),(0,n.jsx)(c.Z,{index:3,value:i,maxAccess:l,children:(0,n.jsx)(T,{store:u,setStore:m})}),(0,n.jsx)(c.Z,{index:4,value:i,maxAccess:l,children:(0,n.jsx)(J,{store:u,labels:a,maxAccess:l})}),(0,n.jsx)(c.Z,{index:5,value:i,maxAccess:l,children:(0,n.jsx)(G,{store:u,labels:a,maxAccess:l})}),(0,n.jsx)(c.Z,{index:6,value:i,maxAccess:l,children:(0,n.jsx)(Y,{store:u,labels:a,maxAccess:l})}),(0,n.jsx)(c.Z,{index:7,value:i,maxAccess:l,children:(0,n.jsx)(U,{store:u,labels:a,maxAccess:l})})]})},H=l(36908),K=()=>{let{getRequest:e,postRequest:a}=(0,r.useContext)(d.$),{platformLabels:l}=(0,r.useContext)(N.l),{stack:c}=(0,k.zY)();async function u(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:l=0,_pageSize:n=50,params:r=[]}=a;return{...await e({extension:i.F.MasterData.qry,parameters:"_startAt=".concat(l,"&_pageSize=").concat(n,"&_params=").concat(r,"&_sortBy=reference desc")}),_startAt:l}}let{query:{data:m},filterBy:x,refetch:v,labels:h,access:f,paginationParameters:I,invalidate:y}=(0,q.J)({queryFn:u,endpointId:i.F.MasterData.snapshot,datasetId:o.i.BPMasterData,filter:{filterFn:p}});async function p(a){let{filters:l,pagination:n}=a;return l.qry?await e({extension:i.F.MasterData.snapshot,parameters:"_filter=".concat(l.qry)}):u({_startAt:n._startAt||0,params:null==l?void 0:l.params})}let b=[{field:"reference",headerName:h.reference,flex:1},{field:"groupName",headerName:h.groupName,flex:1},,{field:"name",headerName:h.name,flex:1},{field:"flName",headerName:h.flName,flex:1},{field:"nationalityRef",headerName:h.nationalityRef,flex:1},{field:"nationalityName",headerName:h.nationalityName,flex:1},{field:"legalStatus",headerName:h.legalStatus,flex:1}];function Z(e,a){c({Component:X,props:{labels:h,maxAccess:f,recordId:e,invalidate:y},width:800,height:500,title:h.masterData,nextToTitle:a||null})}let C=async e=>{await a({extension:i.F.MasterData.del,record:JSON.stringify(e)}),y(),t.ZP.success(l.Deleted)};return(0,n.jsxs)(g.R,{children:[(0,n.jsx)(E.g,{children:(0,n.jsx)(H.Z,{onAdd:()=>{Z()},maxAccess:f,reportName:"BPMAS",filterBy:x})}),(0,n.jsx)(j.Q,{children:(0,n.jsx)(s.Z,{name:"table",columns:b,gridData:m,rowId:["recordId"],onEdit:e=>{Z(e.recordId,null==e?void 0:e.reference)},onDelete:C,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:I,maxAccess:f,refetch:v})})]})}},243:function(e,a,l){"use strict";l.d(a,{r:function(){return m}});var n=l(45300),r=l(2784),t=l(38449),s=l(65947);let d=async(e,a,l)=>{try{let n=await e({extension:a,parameters:l});return a.includes("qry")?n:n.record}catch(e){return null}},i=(e,a,l)=>{let n=(e=JSON.parse(JSON.stringify(e))).record.controls,r=n.find(e=>e.controlId===l);return r?r.accessLevel=(null==a?void 0:a.mandatory)?s.$7:s.rr:(null==a?void 0:a.mandatory)?n.push({sgId:18,resourceId:"",controlId:l,accessLevel:(null==a?void 0:a.mandatory)?s.$7:s.rr}):(null==a?void 0:a.readOnly)?n.push({sgId:18,resourceId:"",controlId:l,accessLevel:(null==a?void 0:a.readOnly)?s.rr:s.$7}):n=e.record.controls.filter(e=>e.controlId!==l),{...e,record:{...e.record,controls:n}}},o=async(e,a,l)=>{let n,r;return"isExternal"!==l?null:(r="_recordId=".concat(a),n=t.r.NumberRange.get,await d(e,n,r))},c=async function(e,a){let l,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"reference",s={readOnly:!1,mandatory:!1};return s=n?{readOnly:null==(l=await o(e,n,"isExternal"))||!l.external,mandatory:null!=l&&!!l.external}:{readOnly:!1,mandatory:!0},r&&(s={readOnly:!0,mandatory:!1}),a&&s&&(a=await i(a,s,t)),{type:s,maxAccess:a,selectNraId:n}};var u=l(65950);function m(e){var a;let{access:l,readOnlyOnEditMode:t,name:s}=e,{getRequest:d}=(0,r.useContext)(u.$),[i,o]=(0,r.useState)(),m=async e=>await c(d,l,e,t,s),x=(0,n.a)({retry:!1,enabled:!0,staleTime:0,queryKey:[i,!!l],queryFn:()=>m(i)});return{refBehavior:x.data,maxAccess:null==x?void 0:null===(a=x.data)||void 0===a?void 0:a.maxAccess,changeDT(e){o(null==e?void 0:e.nraId)}}}},45937:function(e,a,l){"use strict";var n=l(52322),r=l(38449),t=l(93894),s=l(2784),d=l(65950),i=l(19473),o=l(21326);let c=e=>{let{recordId:a,editMode:l,onSubmit:c=()=>{},window:u,actions:m=[],address:x,setAddress:v,required:h=!0,...f}=e,{getRequest:I,postRequest:y}=(0,s.useContext)(d.$),{platformLabels:p}=(0,s.useContext)(i.l),[b,g]=(0,s.useState)(a||null),[j,Z]=(0,s.useState)(null),C=!!x&&!!v,N=C?x:j,F=C?v:Z;(0,o.Z)({title:p.Address,window:u});let P=async e=>{if(!h){F(e),c(e,u);return}let a={...e,recordId:b||(null==N?void 0:N.recordId)||null},l=await y({extension:r.r.Address.set,record:JSON.stringify(a)}),n=(null==l?void 0:l.recordId)||b||null,t={...a,recordId:n,addressId:n};g(n),F(t),c(t,u)};return(0,s.useEffect)(()=>{!C&&b&&(async()=>{let e=await I({extension:r.r.Address.get,parameters:"_filter=&_recordId=".concat(b)});Z((null==e?void 0:e.record)||null)})()},[b,C]),(0,n.jsx)(t.O,{editMode:l,setAddress:F,address:N,onSubmit:P,actions:m,window:u,...f})};c.width=600,c.height=500,a.Z=c},93894:function(e,a,l){"use strict";l.d(a,{O:function(){return u}});var n=l(52322),r=l(2784),t=l(82737),s=l(13073),d=l(80983),i=l(31389),o=l(33625),c=l(48601);let u=e=>{let{setAddress:a,address:l,editMode:u,window:m,readOnly:x,allowPost:v=!0,optional:h=!1,onSubmit:f,isSavedClear:I=!0,isCleared:y=!0,changeClear:p=!1,actions:b=[],...g}=e,[j,Z]=(0,r.useState)(!h),[C,N]=(0,r.useState)({}),{formik:F}=(0,d.c)({maxAccess:C.maxAccess,initialValues:{recordId:null,name:"",countryId:null,countryName:"",stateId:null,stateName:"",cityId:null,city:"",street1:"",street2:"",email1:"",email2:"",phone:"",phone2:"",phone3:"",addressId:null,postalCode:"",cityDistrictId:null,cityDistrict:"",bldgNo:"",unitNo:"",subNo:"",poBox:""},validateOnChange:!0,validateOnBlur:!0,validationSchema:c.Ry({...C.validate}),onSubmit:e=>{a(e),v?f(e,m):m.close()}});return(0,r.useEffect)(()=>{h&&(F.values.name||F.values.street1||F.values.countryId||F.values.cityId)&&Z(!0),!h||F.values.name||F.values.street1||F.values.countryId||F.values.cityId||Z(!1)},[F.values]),(0,n.jsx)(t.Z,{form:F,maxAccess:C.maxAccess,isInfo:!1,disabledSubmit:x,editMode:u,isSavedClear:I,isCleared:y,onClear:p?()=>{F.resetForm({values:F.initialValues})}:void 0,actions:b,...g,children:(0,n.jsx)(i.R,{children:(0,n.jsx)(o.g,{children:(0,n.jsx)(s.Z,{addressValidation:F,readOnly:x,required:j,setFormik:N,address:l,...g})})})})}},17454:function(e,a,l){"use strict";var n=l(52322),r=l(69387),t=l(27723),s=l(31389),d=l(33625),i=l(62362),o=l(50023),c=l(26612);a.Z=e=>{let{addressGridData:a,addAddress:l,delAddress:u,editAddress:m,paginationParameters:x,refetch:v,datasetId:h}=e,{labels:f,access:I}=(0,o.Z)({datasetId:c.i.Address,DatasetIdAccess:h}),y=[{field:"name",headerName:f.name,flex:1},{field:"street1",headerName:f.street1,flex:1},{field:"street2",headerName:f.street2,flex:1},{field:"city",headerName:f.city,flex:1},{field:"phone",headerName:f.phone,flex:1},{field:"email1",headerName:f.email1,flex:1},{field:"email2",headerName:f.email2,flex:1}];return(0,n.jsxs)(s.R,{children:[(0,n.jsx)(d.g,{children:(0,n.jsx)(t.Z,{onAdd:l,maxAccess:I})}),(0,n.jsx)(i.Q,{children:(0,n.jsx)(r.Z,{name:"address",columns:y,gridData:a,rowId:["recordId"],onEdit:m,onDelete:u,isLoading:!1,maxAccess:I,pageSize:50,refetch:v,paginationParameters:x,paginationType:"api"})})]})}},29326:function(e,a,l){"use strict";var n=l(52322);l(2784);var r=l(23925),t=l(13980),s=l.n(t),d=l(95291),i=l.n(d),o=l(65947);let c=e=>{var a,l,t;let{children:s,value:d,index:c,maxAccess:u,...m}=e,x="".concat(e.name||"tab",".").concat(c),{accessLevel:v}=null!==(t=(null!==(l=null==u?void 0:null===(a=u.record)||void 0===a?void 0:a.controls)&&void 0!==l?l:[]).find(e=>e.controlId===x))&&void 0!==t?t:{accessLevel:0};if(v===o.A1)return null;let h=d===c;return(0,n.jsx)(r.Z,{role:"tabpanel",hidden:!h,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(i().tabPanel," ").concat(h?i().active:i().hidden),...m,children:s})};c.propTypes={children:s().node,index:s().number.isRequired,value:s().number.isRequired},a.Z=c},9522:function(e,a,l){"use strict";l.d(a,{Y:function(){return m}});var n=l(52322),r=l(23925),t=l(54582),s=l(68696),d=l(44258),i=l(2784),o=l(99266),c=l(52614),u=l.n(c);let m=e=>{var a,l,c,m,x;let{tabs:v,activeTab:h,setActiveTab:f,maxAccess:I,name:y="tab"}=e,p=(null==I?void 0:null===(l=I.record)||void 0===l?void 0:null===(a=l.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(y,".")))}).map(e=>e.controlId.split(".")[1]))||[],b=null==v?void 0:null===(c=v.map((e,a)=>({...e,id:a})))||void 0===c?void 0:c.filter((e,a)=>!p.includes(String(a))),g=null===(m=b[h])||void 0===m?void 0:m.id,j=null===(x=b[h])||void 0===x?void 0:x.disabled;return(0,i.useEffect)(()=>{g>=0&&!j&&h!=g&&f(g)},[]),(0,n.jsx)(r.Z,{className:u().tabsContainer,children:(0,n.jsx)(r.Z,{className:u().tabsWrapper,children:(0,n.jsx)(t.Z,{value:h,onChange:(e,a)=>f(a),variant:"scrollable",scrollButtons:b.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==b?void 0:b.map(e=>(0,n.jsx)(s.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,n.jsxs)(r.Z,{display:"flex",alignItems:"center",children:[(0,n.jsx)("span",{children:e.label}),e.id===h&&(null==e?void 0:e.onRefetch)&&(0,n.jsx)(d.Z,{size:"small",className:u().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,n.jsx)(o.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[92515,2494,36908,13073,49774,92888,40179],function(){return e(e.s=22002)}),_N_E=e.O()}]);