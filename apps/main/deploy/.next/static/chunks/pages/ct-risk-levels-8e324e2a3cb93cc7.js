(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47395],{38826:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ct-risk-levels",function(){return r(53727)}])},53727:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return I}});var a=r(52322),t=r(2784),s=r(62202),i=r(69387),c=r(27723),d=r(65950),l=r(24074),o=r(71987),u=r(26612),h=r(31389),f=r(33625),x=r(62362),m=r(60218),p=r(48601),v=r(82737),g=r(5088),_=r(80983),k=r(19473);function C(e){let{labels:n,maxAccess:r,recordId:i}=e,{platformLabels:c}=(0,t.useContext)(k.l),{getRequest:f,postRequest:C}=(0,t.useContext)(d.$),w=(0,o.E)({endpointId:l.u.RiskLevel.page}),{formik:I}=(0,_.c)({initialValues:{recordId:null,reference:"",name:""},maxAccess:r,validateOnChange:!0,validationSchema:p.Ry({reference:p.Z_().required(),name:p.Z_().required()}),onSubmit:async e=>{let n=await C({extension:l.u.RiskLevel.set,record:JSON.stringify(e)});(null==e?void 0:e.recordId)||I.setValues({...e,recordId:n.recordId}),s.ZP.success(e.recordId?c.Edited:c.Added),w()}}),j=!!I.values.recordId;return(0,t.useEffect)(()=>{!async function(){if(i){let e=await f({extension:l.u.RiskLevel.get,parameters:"_recordId=".concat(i)});I.setValues(e.record)}}()},[]),(0,a.jsx)(v.Z,{resourceId:u.i.RiskLevel,form:I,maxAccess:r,editMode:j,children:(0,a.jsx)(h.R,{children:(0,a.jsx)(x.Q,{children:(0,a.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{name:"reference",label:n.reference,value:I.values.reference,required:!0,maxAccess:r,maxLength:"30",onChange:I.handleChange,onClear:()=>I.setFieldValue("reference",""),error:I.touched.reference&&!!I.errors.reference})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{name:"name",label:n.name,value:I.values.name,required:!0,rows:2,maxAccess:r,onChange:I.handleChange,onClear:()=>I.setFieldValue("name",""),error:I.touched.name&&!!I.errors.name})})]})})})})}var w=r(61802),I=()=>{let{getRequest:e,postRequest:n}=(0,t.useContext)(d.$),{platformLabels:r}=(0,t.useContext)(k.l),{stack:m}=(0,w.zY)();async function p(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50}=n;return{...await e({extension:l.u.RiskLevel.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a)}),_startAt:r}}async function v(n){let{qry:r}=n;return await e({extension:l.u.RiskLevel.snapshot,parameters:"_filter=".concat(r)})}let{query:{data:g},search:_,clear:I,labels:j,paginationParameters:R,refetch:Z,invalidate:y,access:L}=(0,o.J)({queryFn:p,endpointId:l.u.RiskLevel.page,datasetId:u.i.RiskLevel,search:{searchFn:v}}),A=[{field:"reference",headerName:j.reference,flex:1},{field:"name",headerName:j.name,flex:1}];function E(e){m({Component:C,props:{labels:j,recordId:e,maxAccess:L},width:500,height:330,title:j.riskLevel})}let N=async e=>{await n({extension:l.u.RiskLevel.del,record:JSON.stringify(e)}),y(),s.ZP.success(r.Deleted)};return(0,a.jsxs)(h.R,{children:[(0,a.jsx)(f.g,{children:(0,a.jsx)(c.Z,{onAdd:()=>{E()},maxAccess:L,onSearch:_,onSearchClear:I,inputSearch:!0})}),(0,a.jsx)(x.Q,{children:(0,a.jsx)(i.Z,{columns:A,gridData:g,rowId:["recordId"],onEdit:e=>{E(null==e?void 0:e.recordId)},refetch:Z,onDelete:N,pageSize:50,paginationParameters:R,paginationType:"api",maxAccess:L})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=38826)}),_N_E=e.O()}]);