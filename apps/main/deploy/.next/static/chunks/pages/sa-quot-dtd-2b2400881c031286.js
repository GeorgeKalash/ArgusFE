(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93855],{15981:function(e,a,d){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-quot-dtd",function(){return d(44406)}])},44406:function(e,a,d){"use strict";d.r(a),d.d(a,{default:function(){return N}});var t=d(52322),n=d(2784),l=d(62202),r=d(69387),s=d(27723),i=d(65950),o=d(61802),c=d(71987),u=d(26612),p=d(31389),m=d(33625),x=d(62362),y=d(19473),v=d(22341),f=d(60218),I=d(48601),h=d(82737),g=d(80983),D=d(91406),P=d(8661),_=d(38449),j=d(19689);function Z(e){var a;let{labels:d,maxAccess:r,recordId:s}=e,{getRequest:o,postRequest:m}=(0,n.useContext)(i.$),{platformLabels:Z}=(0,n.useContext)(y.l),N=(0,c.E)({endpointId:v.P.DocumentTypeDefault.page}),{formik:w}=(0,g.c)({initialValues:{dtId:"",recordId:s||null,spId:"",disableSKULookup:!1,validity:""},validateOnChange:!0,validationSchema:I.Ry({dtId:I.Z_().required(),validity:I.Rx().required()}),onSubmit:async e=>{await m({extension:v.P.DocumentTypeDefault.set,record:JSON.stringify(e)}),w.values.recordId?l.ZP.success(Z.Edited):(w.setFieldValue("recordId",w.values.dtId),l.ZP.success(Z.Added)),N()}}),C=!!w.values.recordId;return(0,n.useEffect)(()=>{!async function(){if(s){let e=await o({extension:v.P.DocumentTypeDefault.get,parameters:"_dtId=".concat(s)});w.setValues({...e.record,recordId:e.record.dtId})}}()},[]),(0,t.jsx)(h.Z,{resourceId:u.i.DocumentTypeDefault,form:w,maxAccess:r,editMode:C,children:(0,t.jsx)(p.R,{children:(0,t.jsx)(x.Q,{children:(0,t.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(P.Z,{endpointId:_.r.DocumentType.qry,parameters:"_dgId=5100&_startAt=0&_pageSize=1000&_filter=",name:"dtId",label:d.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:C,valueField:"recordId",displayField:["reference","name"],values:w.values,required:!0,maxAccess:r,onChange:(e,a)=>{w&&w.setFieldValue("dtId",null==a?void 0:a.recordId)},error:w.touched.dtId&&!!w.errors.dtId})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(P.Z,{endpointId:v.P.SalesPerson.qry,name:"spId",label:d.salesPerson,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"name",value:"name"}],values:w.values,maxAccess:r,onChange:(e,a)=>{w.setFieldValue("spId",a?a.recordId:"")},error:w.touched.spId&&!!w.errors.spId})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(D.Z,{name:"validity",required:!0,label:d.validity,value:w.values.validity,maxAccess:r,onChange:w.handleChange,onClear:()=>w.setFieldValue("validity",""),error:w.touched.validity&&!!w.errors.validity,helperText:w.touched.validity&&w.values.validity>1e3?Z.validity1000:"",allowNegative:!1,decimalScale:0,maxLength:3})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(P.Z,{endpointId:_.r.Plant.qry,name:"plantId",label:d.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:w.values,maxAccess:r,onChange:(e,a)=>{let d=(null==a?void 0:a.recordId)||"";w.setFieldValue("plantId",d)},error:w.touched.plantId&&!!w.errors.plantId})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{name:"disableSKULookup",value:null===(a=w.values)||void 0===a?void 0:a.disableSKULookup,onChange:e=>w.setFieldValue("disableSKULookup",e.target.checked),label:d.dsl,maxAccess:r})})]})})})})}var N=()=>{let{getRequest:e,postRequest:a}=(0,n.useContext)(i.$),{platformLabels:d}=(0,n.useContext)(y.l),{stack:f}=(0,o.zY)();async function I(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:d=0,_pageSize:t=50}=a;try{return{...await e({extension:v.P.DocumentTypeDefault.page,parameters:"_startAt=".concat(d,"&_pageSize=").concat(t,"&_filter=&_functionId=5100")}),_startAt:d}}catch(e){}}let{query:{data:h},labels:g,invalidate:D,paginationParameters:P,refetch:_,access:j}=(0,c.J)({queryFn:I,endpointId:v.P.DocumentTypeDefault.page,datasetId:u.i.DocumentTypeDefault}),N=[{field:"dtName",headerName:g.documentType,flex:1},{field:"spName",headerName:g.salesPerson,flex:1},{field:"validity",headerName:g.validity,flex:1},{field:"plantName",headerName:g.plant,flex:1}],w=async e=>{try{await a({extension:v.P.DocumentTypeDefault.del,record:JSON.stringify(e)}),D(),l.ZP.success(d.Deleted)}catch(e){}};function C(e){f({Component:Z,props:{labels:g,recordId:null==e?void 0:e.dtId,maxAccess:j},width:600,height:500,title:g.dtDefault})}return(0,t.jsxs)(p.R,{children:[(0,t.jsx)(m.g,{children:(0,t.jsx)(s.Z,{onAdd:()=>{C()},maxAccess:j})}),(0,t.jsx)(x.Q,{children:(0,t.jsx)(r.Z,{columns:N,gridData:h,rowId:["dtId"],onEdit:e=>{C(e)},onDelete:w,isLoading:!1,pageSize:50,refetch:_,paginationParameters:P,paginationType:"api",maxAccess:j})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=15981)}),_N_E=e.O()}]);