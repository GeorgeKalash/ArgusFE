(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90870],{31257:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/warehouse",function(){return a(70070)}])},70070:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var s=a(52322),r=a(2784),n=a(62202),d=a(69387),l=a(27723),i=a(65950),o=a(71987),g=a(26612),p=a(31389),c=a(33625),u=a(62362),y=a(61802),m=a(19473),T=a(54736),P=a(60218),h=a(48601),q=a(82737),E=a(5088),W=a(80983),f=a(8661),x=a(65215);function R(e){let{labels:t,maxAccess:a,recordId:d}=e,{getRequest:l,postRequest:c}=(0,r.useContext)(i.$),{platformLabels:y}=(0,r.useContext)(m.l),R=(0,o.E)({endpointId:T.m.Warehouse.page}),{formik:S}=(0,W.c)({initialValues:{recordId:d,name:"",siteId:null},maxAccess:a,validateOnChange:!0,validationSchema:h.Ry({name:h.Z_().required()}),onSubmit:async e=>{let t=await c({extension:T.m.Warehouse.set,record:JSON.stringify(e)});e.recordId||S.setFieldValue("recordId",t.recordId),n.ZP.success(e.recordId?y.Edited:y.Added),R()}}),O=!!S.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(d){let e=await l({extension:T.m.Warehouse.get,parameters:"_recordId=".concat(d)});S.setValues(e.record)}}()},[]),(0,s.jsx)(q.Z,{resourceId:g.i.Warehouse,form:S,maxAccess:a,editMode:O,children:(0,s.jsx)(p.R,{children:(0,s.jsx)(u.Q,{children:(0,s.jsxs)(P.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(P.ZP,{item:!0,xs:12,children:(0,s.jsx)(E.Z,{name:"name",label:t.name,value:S.values.name,required:!0,maxLength:"30",maxAccess:a,onChange:S.handleChange,onClear:()=>S.setFieldValue("name",""),error:S.touched.name&&!!S.errors.name})}),(0,s.jsx)(P.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{endpointId:x.$.Site.qry,name:"siteId",label:t.site,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:S.values,maxAccess:a,onChange:(e,t)=>{S.setFieldValue("siteId",null==t?void 0:t.recordId)},error:S.touched.siteId&&!!S.errors.siteId})})]})})})})}var S=()=>{let{getRequest:e,postRequest:t}=(0,r.useContext)(i.$),{platformLabels:a}=(0,r.useContext)(m.l),{stack:P}=(0,y.zY)();async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:s=50}=t;return{...await e({extension:T.m.Warehouse.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(s,"&filter=")}),_startAt:a}}let{query:{data:q},labels:E,refetch:W,invalidate:f,paginationParameters:x,access:S}=(0,o.J)({queryFn:h,endpointId:T.m.Warehouse.page,datasetId:g.i.Warehouse}),O=[{field:"name",headerName:E.name,flex:1},{field:"siteRef",headerName:E.siteRef,flex:1},{field:"siteName",headerName:E.siteName,flex:1}],I=async e=>{await t({extension:T.m.Warehouse.del,record:JSON.stringify(e)}),f(),n.ZP.success(a.Deleted)};function M(e){P({Component:R,props:{labels:E,recordId:e,maxAccess:S},width:600,height:250,title:E.warehouse})}return(0,s.jsxs)(p.R,{children:[(0,s.jsx)(c.g,{children:(0,s.jsx)(l.Z,{onAdd:()=>{M()},maxAccess:S})}),(0,s.jsx)(u.Q,{children:(0,s.jsx)(d.Z,{name:"table",columns:O,gridData:q,rowId:["recordId"],onEdit:e=>{M(null==e?void 0:e.recordId)},onDelete:I,pageSize:50,paginationType:"api",maxAccess:S,refetch:W,paginationParameters:x})})]})}},54736:function(e,t,a){"use strict";a.d(t,{m:function(){return r}});let s="RS.asmx/",r={RepairName:{page:s+"pageRNA",qry:s+"qryRNA",get:s+"getRNA",set:s+"setRNA",del:s+"delRNA"},WorkOrderTypes:{page:s+"pageWOT",qry:s+"qryWOT",get:s+"getWOT",set:s+"setWOT",del:s+"delWOT"},RepairType:{page:s+"pageRT",get:s+"getRT",set:s+"setRT",del:s+"delRT"},SpareParts:{snapshot:s+"snapshotSP",page:s+"pageSP",get:s+"getSP",set:s+"setSP",del:s+"delSP"},InspectionTemplate:{get2:s+"get2ITE",page:s+"pageITE",set2:s+"set2ITE",del:s+"delITE"},Department:{page:s+"pageDEP",get:s+"getDEP",set:s+"setDEP",del:s+"delDEP"},Warehouse:{page:s+"pageWH",qry:s+"qryWH",set:s+"setWH",get:s+"getWH",del:s+"delWH"},PreventiveMaintenanceTasks:{qry:s+"qryPMT",page:s+"pagePMT",qry:s+"qryPMT",get:s+"getPMT",set:s+"setPMT",del:s+"delPMT"},Equipment:{qry:s+"qryEQP",page:s+"pageEQP",get:s+"getEQP",set:s+"setEQP",del:s+"delEQP",snapshot:s+"snapshotEQP"},SpManufacturer:{page:s+"pageSPM",get:s+"getSPM",set:s+"setSPM",del:s+"delSPM",qry:s+"qrySPM"},JobPosition:{page:s+"pagePOS",qry:s+"qryPOS",get:s+"getPOS",set:s+"setPOS",del:s+"delPOS"},SpCategory:{page:s+"pageSPC",get:s+"getSPC",set:s+"setSPC",del:s+"delSPC",qry:s+"qrySPC"},MaintenanceTemplates:{page:s+"pageMTE",get:s+"getMTE",set:s+"setMTE",del:s+"delMTE",qry:s+"qryMTE"},MaintenanceTemplateTask:{qry:s+"qryMTT",get:s+"getMTT",set:s+"setMTT",del:s+"delMTT"},RsLabors:{qry:s+"qryLBR",snapshot:s+"snapshotLBR",page:s+"pageLBR",set:s+"setLBR",get:s+"getLBR",del:s+"delLBR",qry:s+"qryLBR"},WorkOrder:{page:s+"qryWO",get:s+"getWO",set:s+"setWO",del:s+"delWO",post:s+"postWO"},WorkTask:{qry:s+"qryWTK",get:s+"getWTK",set:s+"setWTK",del:s+"delWTK"},EquipmentType:{qry:s+"qryEQT",get:s+"getEQT",set:s+"setEQT",del:s+"delEQT"},WorkOrderParts:{qry:s+"qryWOP",set2:s+"set2WOP"},WorkOrderLabors:{qry:s+"qryWOL",set2:s+"set2WOL"},RepairRequest:{page:s+"pageREQ",get:s+"getREQ",set:s+"setREQ",del:s+"delREQ"},Employee:{snapshot:s+"snapshotEMP"},RepairType:{qry:s+"qryRT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=31257)}),_N_E=e.O()}]);