(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63255],{82051:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-loan-types",function(){return n(81273)}])},81273:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return V}});var l=n(52322),d=n(2784),t=n(62202),r=n(69387),s=n(27723),i=n(65950),o=n(71987),c=n(26612),u=n(31389),h=n(33625),x=n(62362),m=n(61802),g=n(19473),p=n(60218),f=n(48601),L=n(82737),y=n(5088),v=n(19689),T=n(80983),C=n(8661),_=n(84100),b=n(73581),j=n(91406);function N(e){var a;let{labels:n,maxAccess:r,recordId:s}=e,{getRequest:h,postRequest:m}=(0,d.useContext)(i.$),{platformLabels:N}=(0,d.useContext)(g.l),V=(0,o.E)({endpointId:b.h.LoanType.page}),Z=f.Ry({reference:f.Z_().required(),name:f.Z_().required(),ldMethod:f.Rx().nullable(),ldValue:f.Rx().nullable().test("ldValue-validation","Invalid ldValue for selected method",function(e){let{ldMethod:a}=this.parent;return null==a||null===e||([4,5,6].includes(a)?e>=0:e>0&&e<100)}),disableEditing:f.O7()}),{formik:E}=(0,T.c)({initialValues:{recordId:null,reference:"",name:"",ldName:null,ldValue:null,disableEditing:!1},maxAccess:r,validateOnChange:!0,validationSchema:Z,onSubmit:async e=>{let a=await m({extension:b.h.LoanType.set,record:JSON.stringify(e)});t.ZP.success(e.recordId?N.Edited:N.Added),e.recordId||E.setFieldValue("recordId",a.recordId),V()}}),I=!!(null==E?void 0:null===(a=E.values)||void 0===a?void 0:a.recordId);return(0,d.useEffect)(()=>{s&&async function(){let e=await h({extension:b.h.LoanType.get,parameters:"_recordId=".concat(s)});E.setValues(null==e?void 0:e.record)}()},[]),(0,l.jsx)(L.Z,{resourceId:c.i.LoanTypes,form:E,maxAccess:r,editMode:I,children:(0,l.jsx)(u.R,{children:(0,l.jsx)(x.Q,{children:(0,l.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(p.ZP,{item:!0,xs:12,children:(0,l.jsx)(y.Z,{name:"reference",label:n.Reference,value:E.values.reference,required:!0,maxAccess:r,maxLength:"20",onChange:E.handleChange,onClear:()=>E.setFieldValue("reference",""),error:E.touched.reference&&!!E.errors.reference})}),(0,l.jsx)(p.ZP,{item:!0,xs:12,children:(0,l.jsx)(y.Z,{name:"name",label:n.Name,value:E.values.name,required:!0,maxAccess:r,maxLength:"50",onChange:E.handleChange,onClear:()=>E.setFieldValue("name",""),error:E.touched.name&&!!E.errors.name})}),(0,l.jsx)(p.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{datasetId:_.v.LOAN_DEDUCTION_METHOD,name:"ldMethod",label:n.loan,valueField:"key",displayField:"value",values:E.values,onChange:(e,a)=>E.setFieldValue("ldMethod",(null==a?void 0:a.key)||null),maxAccess:r,error:E.touched.ldMethod&&!!E.errors.ldMethod})}),(0,l.jsx)(p.ZP,{item:!0,xs:12,children:(0,l.jsx)(j.Z,{name:"ldValue",label:n.payment,value:E.values.ldValue,onChange:E.handleChange,onClear:()=>E.setFieldValue("ldValue",null),maxAccess:r,allowNegative:!1,error:E.touched.ldValue&&!!E.errors.ldValue,maxLength:5,decimalScale:3})}),(0,l.jsx)(p.ZP,{item:!0,xs:12,children:(0,l.jsx)(v.Z,{name:"disableEditing",label:n.disable,value:E.values.disableEditing,onChange:e=>E.setFieldValue("disableEditing",e.target.checked),maxAccess:r})})]})})})})}var V=()=>{let{getRequest:e,postRequest:a}=(0,d.useContext)(i.$),{platformLabels:n}=(0,d.useContext)(g.l),{stack:p}=(0,m.zY)();async function f(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:l=50}=a;return{...await e({extension:b.h.LoanType.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(l,"&_filter=")}),_startAt:n}}let{query:{data:L},labels:y,paginationParameters:v,refetch:T,invalidate:C,access:_}=(0,o.J)({queryFn:f,endpointId:b.h.LoanType.page,datasetId:c.i.LoanTypes}),j=[{field:"reference",headerName:y.Reference,flex:1},{field:"name",headerName:y.Name,flex:1},{field:"ldValue",headerName:y.payment,flex:1},{field:"ldName",headerName:y.loan,flex:1},{field:"disableEditing",headerName:y.disable,type:"checkbox",flex:1}];function V(e){p({Component:N,props:{labels:y,recordId:e,maxAccess:_},width:500,height:400,title:y.loanType})}let Z=async e=>{await a({extension:b.h.LoanType.del,record:JSON.stringify(e)}),t.ZP.success(n.Deleted),C()};return(0,l.jsxs)(u.R,{children:[(0,l.jsx)(h.g,{children:(0,l.jsx)(s.Z,{onAdd:()=>V(),maxAccess:_})}),(0,l.jsx)(x.Q,{children:(0,l.jsx)(r.Z,{columns:j,gridData:L,rowId:["recordId"],onEdit:e=>V(null==e?void 0:e.recordId),onDelete:Z,pageSize:50,paginationType:"api",paginationParameters:v,refetch:T,maxAccess:_})})]})}},73581:function(e,a,n){"use strict";n.d(a,{h:function(){return d}});let l="LT.asmx/",d={LoanType:{get:l+"getLT",set:l+"setLT",del:l+"delLT",qry:l+"qryLT",page:l+"pageLT"},Loans:{get:l+"getLR",set:l+"setLR",del:l+"delLR",page:l+"pageLR",close:l+"closeLR",reopen:l+"reopenLR"},LoanDeduction:{page:l+"pageLD",get:l+"getLD",set:l+"setLD",del:l+"delLD"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=82051)}),_N_E=e.O()}]);