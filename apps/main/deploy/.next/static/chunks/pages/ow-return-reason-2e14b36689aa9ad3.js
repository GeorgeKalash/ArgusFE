(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8607],{1711:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ow-return-reason",function(){return t(47317)}])},47317:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var r=t(52322),n=t(2784),s=t(62202),c=t(69387);t(27723);var d=t(65950),l=t(71987),i=t(26612),o=t(31389),u=t(33625),m=t(62362),x=t(61802),f=t(19473),h=t(88469),p=t(60218),v=t(48601),y=t(82737),S=t(5088),g=t(80983),_=t(8661),R=t(84100),Z=t(19689);function w(e){let{labels:a,maxAccess:t,recordId:c}=e,{getRequest:u,postRequest:x}=(0,n.useContext)(d.$),{platformLabels:w}=(0,n.useContext)(f.l),N=(0,l.E)({endpointId:h.N.OutwardReturnReason.page}),{formik:j}=(0,g.c)({initialValues:{recordId:null,reference:"",name:"",correspondant:!1,client:!1,company:!1,feesStatus:"",rateStatus:""},maxAccess:t,validateOnChange:!0,validationSchema:v.Ry({reference:v.Z_().required(),name:v.Z_().required(),feesStatus:v.Z_().required(),rateStatus:v.Z_().required()}),onSubmit:async e=>{let a=await x({extension:h.N.OutwardReturnReason.set,record:JSON.stringify(e)});e.recordId?s.ZP.success(w.Edited):(s.ZP.success(w.Added),j.setFieldValue("recordId",a.recordId)),N()}}),A=!!j.values.recordId;return(0,n.useEffect)(()=>{!async function(){if(c){let e=await u({extension:h.N.OutwardReturnReason.get,parameters:"_recordId=".concat(c)});j.setValues(e.record)}}()},[]),(0,r.jsx)(y.Z,{resourceId:i.i.OutwardReturnReason,form:j,maxAccess:t,editMode:A,children:(0,r.jsx)(o.R,{children:(0,r.jsx)(m.Q,{children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(S.Z,{name:"reference",label:a.reference,value:j.values.reference,required:!0,maxAccess:t,onChange:j.handleChange,onClear:()=>j.setFieldValue("reference",""),error:j.touched.reference&&!!j.errors.reference})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(S.Z,{name:"name",label:a.name,value:j.values.name,required:!0,maxAccess:t,onChange:j.handleChange,onClear:()=>j.setFieldValue("name",""),error:j.touched.name&&!!j.errors.name})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"correspondant",value:j.values.correspondant,onChange:e=>j.setFieldValue("correspondant",e.target.checked),label:a.correspondant,maxAccess:t})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"client",value:j.values.client,onChange:e=>j.setFieldValue("client",e.target.checked),label:a.client,maxAccess:t})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{name:"company",value:j.values.company,onChange:e=>j.setFieldValue("company",e.target.checked),label:a.company,maxAccess:t})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(_.Z,{datasetId:R.v.OW_FEES_STATUS,name:"feesStatus",label:a.feesStatus,valueField:"key",required:!0,displayField:"value",values:j.values,onChange:(e,a)=>{j.setFieldValue("feesStatus",(null==a?void 0:a.key)||"")},maxAccess:t,error:j.touched.feesStatus&&!!j.errors.feesStatus})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(_.Z,{datasetId:R.v.OW_RATE_STATUS,name:"rateStatus",label:a.rateStatus,valueField:"key",required:!0,displayField:"value",values:j.values,onChange:(e,a)=>{j.setFieldValue("rateStatus",(null==a?void 0:a.key)||"")},maxAccess:t,error:j.touched.rateStatus&&!!j.errors.rateStatus})})]})})})})}var N=t(36908),j=()=>{let{getRequest:e,postRequest:a}=(0,n.useContext)(d.$),{platformLabels:t}=(0,n.useContext)(f.l),{stack:p}=(0,x.zY)();async function v(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:r=50,params:n=[]}=a;return{...await e({extension:h.N.OutwardReturnReason.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(r,"&_params=").concat(n)}),_startAt:t}}let{query:{data:y},filterBy:S,refetch:g,labels:_,access:R,paginationParameters:Z,invalidate:j}=(0,l.J)({queryFn:v,endpointId:h.N.OutwardReturnReason.snapshot,datasetId:i.i.OutwardReturnReason,filter:{filterFn:A}});async function A(a){let{filters:t,pagination:r}=a;return t.qry?await e({extension:h.N.OutwardReturnReason.snapshot,parameters:"_filter=".concat(t.qry)}):v({_startAt:r._startAt||0,params:null==t?void 0:t.params})}let C=[{field:"reference",headerName:_.reference,flex:1},{field:"name",headerName:_.name,flex:1},{field:"correspondant",headerName:_.correspondant,flex:1,type:"checkbox"},{field:"client",headerName:_.client,flex:1,type:"checkbox"},{field:"company",headerName:_.company,flex:1,type:"checkbox"},{field:"feesStatusName",headerName:_.feesStatus,flex:1},{field:"rateStatusName",headerName:_.rateStatus,flex:1}];function O(e){p({Component:w,props:{labels:_,recordId:e,maxAccess:R},width:600,height:500,title:_.OutwardReturnReason})}let F=async e=>{await a({extension:h.N.OutwardReturnReason.del,record:JSON.stringify(e)}),j(),s.ZP.success(t.Deleted)};return(0,r.jsxs)(o.R,{children:[(0,r.jsx)(u.g,{children:(0,r.jsx)(N.Z,{onAdd:()=>{O()},maxAccess:R,reportName:"RTOWRR",filterBy:S})}),(0,r.jsx)(m.Q,{children:(0,r.jsx)(c.Z,{columns:C,gridData:y,rowId:["recordId"],onEdit:e=>{O(null==e?void 0:e.recordId)},onDelete:F,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:Z,refetch:g,maxAccess:R})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=1711)}),_N_E=e.O()}]);