(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93178],{59882:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/classes",function(){return a(51443)}])},51443:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return R}});var t=a(52322),r=a(2784),n=a(62202),l=a(69387),c=a(27723),i=a(65950),d=a(26612),o=a(29326),u=a(9522),h=a(60218),x=a(48601),m=a(78711),v=a(5088),b=a(82737),p=a(8661),f=a(71987),I=a(68676),_=a(84100),y=a(31389),C=a(62362),g=e=>{let{labels:s,editMode:a,maxAccess:l,setEditMode:c,setStore:o,store:u}=e,{postRequest:g,getRequest:j}=(0,r.useContext)(i.$),{recordId:Z}=u,A=(0,f.E)({endpointId:I.y.Class.qry}),[N,S]=(0,r.useState)({recordId:null,name:null,characteristicOperator:null}),F=(0,m.TA)({validateOnChange:!0,initialValues:N,validationSchema:x.Ry({name:x.Z_().required(" "),characteristicOperator:x.Z_().required(" ")}),onSubmit:async e=>{await q(e)}}),q=async e=>{let s=e.recordId;await g({extension:I.y.Class.set,record:JSON.stringify(e)}).then(e=>{s?n.ZP.success("Record Edited Successfully"):(c(!0),o(s=>({...s,recordId:e.recordId})),F.setFieldValue("recordId",e.recordId),n.ZP.success("Record Added Successfully")),A()})};(0,r.useEffect)(()=>{Z&&P(Z)},[Z]);let P=e=>{j({extension:I.y.Class.get,parameters:"_recordId=".concat(e)}).then(e=>{F.setValues(e.record),c(!0)})};return(0,t.jsx)(b.Z,{form:F,resourceId:d.i.Classes,maxAccess:l,editMode:a,children:(0,t.jsx)(y.R,{children:(0,t.jsx)(C.Q,{children:(0,t.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(v.Z,{name:"name",label:s.name,value:F.values.name,required:!0,maxLength:"50",maxAccess:l,onChange:F.handleChange,onClear:()=>F.setFieldValue("name",""),error:F.touched.name&&!!F.errors.name})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{datasetId:_.v.CHAR_OPERATOR,name:"characteristicOperator",label:s.characteristicOperator,required:!0,valueField:"key",displayField:"value",values:F.values,onClear:()=>F.setFieldValue("name",""),onChange:(e,s)=>{F.setFieldValue("characteristicOperator",(null==s?void 0:s.key)||"")},error:F.touched.characteristicOperator&&!!F.errors.characteristicOperator})})]})})})})},j=a(19473),Z=a(54074),A=e=>{var s,a;let{labels:l,maxAccess:c,getCharacteristicGridData:d,recordId:o,window:u}=e,{postRequest:v}=(0,r.useContext)(i.$),{platformLabels:b}=(0,r.useContext)(j.l),f=(0,m.TA)({validateOnChange:!0,initialValues:{chId:null,seqNo:null,oper:null},validationSchema:x.Ry({chId:x.Z_().required(),seqNo:x.Z_().required(),oper:x.Z_().required()}),onSubmit:async e=>{await g(e)}}),g=async e=>{let s=e.classId?e.classId:o;e.classId=s,await v({extension:I.y.ClassCharacteristics.set,record:JSON.stringify(e)}).then(e=>{n.ZP.success(b.Added),d(s),u.close()})};return(0,t.jsx)(Z.Z,{onSave:f.handleSubmit,maxAccess:c,children:(0,t.jsx)(y.R,{children:(0,t.jsx)(C.Q,{children:(0,t.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{endpointId:I.y.CharacteristicsGeneral.qry,parameters:"_startAt=0&_pageSize=50",name:"chId",label:l.characteristics,valueField:"recordId",displayField:"name",values:f.values,required:!0,maxAccess:c,onClear:()=>f.setFieldValue("chId",""),onChange:(e,s)=>{f&&f.setFieldValue("chId",(null==s?void 0:s.recordId)||"")},error:f.touched.chId&&!!f.errors.chId})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{datasetId:_.v.DR_OPERATOR,name:"oper",label:l.operator,valueField:"key",displayField:"value",values:f.values,required:!0,maxAccess:c,onClear:()=>f.setFieldValue("oper",""),onChange:(e,s)=>{f&&f.setFieldValue("oper",(null==s?void 0:s.key)||"")},error:f.touched.oper&&!!f.errors.oper})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{endpointId:(null==f?void 0:null===(s=f.values)||void 0===s?void 0:s.chId)&&I.y.CharacteristicsValues.qry,parameters:(null==f?void 0:null===(a=f.values)||void 0===a?void 0:a.chId)&&"_chId=".concat(f.values.chId),name:"seqNo",label:l.value,valueField:"seqNo",displayField:"value",values:f.values,required:!0,maxAccess:c,onClear:()=>f.setFieldValue("seqNo",""),onChange:(e,s)=>{f&&f.setFieldValue("seqNo",(null==s?void 0:s.seqNo)||"")},error:f.touched.seqNo&&!!f.errors.seqNo})})]})})})})},N=a(61802),S=a(33625),F=e=>{let{labels:s,store:a,maxAccess:d,height:o}=e,{getRequest:u,postRequest:h}=(0,r.useContext)(i.$),[x,m]=(0,r.useState)(),{stack:v}=(0,N.zY)(),{recordId:b}=a,{platformLabels:p}=(0,r.useContext)(j.l),f=[{field:"chName",headerName:s.characteristics,flex:1},{field:"value",headerName:s.value,flex:1},{field:"oper",headerName:s.operator,flex:1}],_=e=>{m([]),u({extension:I.y.ClassCharacteristics.qry,parameters:"_classId=".concat(e)}).then(e=>{m(e)}).catch(e=>{})};return(0,r.useEffect)(()=>{b&&_(b)},[b]),(0,t.jsxs)(y.R,{children:[(0,t.jsx)(S.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{v({Component:A,props:{labels:s,recordId:b,maxAccess:d,getCharacteristicGridData:_},width:400,height:400,title:s.characteristics})},maxAccess:d})}),(0,t.jsx)(C.Q,{children:(0,t.jsx)(l.Z,{columns:f,gridData:x,rowId:["chId"],onDelete:e=>{h({extension:I.y.ClassCharacteristics.del,record:JSON.stringify(e)}).then(e=>{_(b),n.ZP.success(p.Deleted)}).catch(e=>{})},isLoading:!1,maxAccess:d,pagination:!1,height:o-100})})]})},q=e=>{let{labels:s,maxAccess:a,getFunctionGridData:l,recordId:c,functionId:o,window:u,editMode:v}=e,{postRequest:f,getRequest:g}=(0,r.useContext)(i.$),[j,Z]=(0,r.useState)({functionId:null,strategyId:null}),A=(0,m.TA)({validateOnChange:!0,initialValues:j,validationSchema:x.Ry({functionId:x.Z_().required(" "),strategyId:x.Z_().required(" ")}),onSubmit:async e=>{await N(e)}}),N=async e=>{let s=e.classId?e.classId:c;e.classId=s,await f({extension:I.y.ClassFunction.set,record:JSON.stringify(e)}).then(e=>{l(s),v?n.ZP.success("Record Editted Successfully"):n.ZP.success("Record Added Successfully"),u.close()}).catch(e=>{})};(0,r.useEffect)(()=>{v&&S(c,o)},[c]);let S=(e,s)=>{let a="_classId=".concat(e,"&&_functionId=").concat(s);g({extension:I.y.ClassFunction.get,parameters:a}).then(e=>{console.log(e.record),A.setValues(e.record)})};return(0,t.jsx)(b.Z,{form:A,resourceId:d.i.Functions,maxAccess:a,isInfo:!1,children:(0,t.jsx)(y.R,{children:(0,t.jsx)(C.Q,{children:(0,t.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{datasetId:_.v.SYSTEM_FUNCTION,name:"functionId",label:s.function,required:!0,valueField:"key",displayField:"value",readOnly:v,values:A.values,maxAccess:a,onClear:()=>A.setFieldValue("functionId",""),onChange:(e,s)=>{A.setFieldValue("functionId",(null==s?void 0:s.key)||"")},error:A.touched.functionId&&!!A.errors.functionId})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{endpointId:I.y.Strategy.qry,parameters:"_startAt=0&_pageSize=50",name:"strategyId",label:s.strategy,valueField:"recordId",displayField:"name",values:A.values,required:!0,maxAccess:a,onClear:()=>A.setFieldValue("strategyId",""),onChange:(e,s)=>{A&&A.setFieldValue("strategyId",(null==s?void 0:s.recordId)||"")},error:A.touched.strategyId&&!!A.errors.strategyId})})]})})})})},P=e=>{let{labels:s,store:a,maxAccess:d}=e,{getRequest:o,postRequest:u}=(0,r.useContext)(i.$),{platformLabels:h}=(0,r.useContext)(j.l),[x,m]=(0,r.useState)(),{stack:v}=(0,N.zY)(),{recordId:b}=a,p=[{field:"functionName",headerName:s.function,flex:1},{field:"strategyName",headerName:s.strategy,flex:1}];function f(e,a){v({Component:q,props:{labels:s,recordId:b,maxAccess:d,getFunctionGridData:_,editMode:a,functionId:e},width:400,height:350,title:s.functions})}let _=e=>{m([]),o({extension:I.y.ClassFunction.qry,parameters:"_classId=".concat(e)}).then(e=>{m(e)}).catch(e=>{setErrorMessage(e)})};return(0,r.useEffect)(()=>{b&&_(b)},[b]),(0,t.jsxs)(y.R,{children:[(0,t.jsx)(S.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{f("",!1)},maxAccess:d})}),(0,t.jsx)(C.Q,{children:(0,t.jsx)(l.Z,{columns:p,gridData:x,rowId:["functionId"],onEdit:e=>{f(e.functionId,!0)},onDelete:e=>{u({extension:I.y.ClassFunction.del,record:JSON.stringify(e)}).then(e=>{_(b),n.ZP.success(h.Deleted)})},isLoading:!1,maxAccess:d,pagination:!1})})]})},T=e=>{let{height:s,recordId:a,labels:n,maxAccess:l,expanded:c}=e,[i,d]=(0,r.useState)(0),[h,x]=(0,r.useState)(a),[m,v]=(0,r.useState)({recordId:a||null,countries:[]}),b=[{label:n.class},{label:n.characteristics,disabled:!m.recordId},{label:n.function,disabled:!m.recordId}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Y,{tabs:b,activeTab:i,setActiveTab:d,maxAccess:l}),(0,t.jsx)(o.Z,{height:s,index:0,value:i,maxAccess:l,children:(0,t.jsx)(g,{labels:n,setEditMode:x,setStore:v,store:m,editMode:h,maxAccess:l})}),(0,t.jsx)(o.Z,{height:s,index:1,value:i,maxAccess:l,children:(0,t.jsx)(F,{labels:n,setEditMode:x,setStore:v,maxAccess:l,store:m,expanded:c,height:s})}),(0,t.jsx)(o.Z,{height:s,index:2,value:i,maxAccess:l,children:(0,t.jsx)(P,{labels:n,setEditMode:x,setStore:v,maxAccess:l,store:m,expanded:c,height:s})})]})},R=()=>{let{getRequest:e,postRequest:s}=(0,r.useContext)(i.$),{stack:a}=(0,N.zY)(),{query:{data:o},labels:u,paginationParameters:h,invalidate:x,refetch:m,access:v,search:b,clear:p}=(0,f.J)({queryFn:g,endpointId:I.y.Class.qry,datasetId:d.i.Classes,search:{endpointId:I.y.Class.snapshot,searchFn:_}});async function _(s){let{qry:a}=s;return await e({extension:I.y.Class.snapshot,parameters:"_filter=".concat(a)})}async function g(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:t=50}=s,r="_startAt=".concat(a,"&_pageSize=").concat(t);return{...await e({extension:I.y.Class.qry,parameters:r}),_startAt:a}}let j=[{field:"name",headerName:u.name,flex:1}];function Z(e){a({Component:T,props:{labels:u,recordId:e||null,maxAccess:v},width:600,height:400,title:u.class})}return(0,t.jsxs)(y.R,{children:[(0,t.jsx)(S.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{Z("")},maxAccess:v,onSearch:b,onSearchClear:p,labels:u,inputSearch:!0})}),(0,t.jsx)(C.Q,{children:(0,t.jsx)(l.Z,{columns:j,gridData:o,rowId:["recordId"],paginationParameters:h,paginationType:"api",refetch:m,onEdit:e=>{Z(null==e?void 0:e.recordId)},onDelete:e=>{s({extension:I.y.Class.del,record:JSON.stringify(e)}).then(e=>{n.ZP.success("Record Deleted Successfully"),x()})},isLoading:!1,pageSize:50,maxAccess:v})})]})}},29326:function(e,s,a){"use strict";var t=a(52322);a(2784);var r=a(23925),n=a(13980),l=a.n(n),c=a(95291),i=a.n(c),d=a(65947);let o=e=>{var s,a,n;let{children:l,value:c,index:o,maxAccess:u,...h}=e,x="".concat(e.name||"tab",".").concat(o),{accessLevel:m}=null!==(n=(null!==(a=null==u?void 0:null===(s=u.record)||void 0===s?void 0:s.controls)&&void 0!==a?a:[]).find(e=>e.controlId===x))&&void 0!==n?n:{accessLevel:0};if(m===d.A1)return null;let v=c===o;return(0,t.jsx)(r.Z,{role:"tabpanel",hidden:!v,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),className:"".concat(i().tabPanel," ").concat(v?i().active:i().hidden),...h,children:l})};o.propTypes={children:l().node,index:l().number.isRequired,value:l().number.isRequired},s.Z=o},9522:function(e,s,a){"use strict";a.d(s,{Y:function(){return h}});var t=a(52322),r=a(23925),n=a(54582),l=a(68696),c=a(44258),i=a(2784),d=a(99266),o=a(52614),u=a.n(o);let h=e=>{var s,a,o,h,x;let{tabs:m,activeTab:v,setActiveTab:b,maxAccess:p,name:f="tab"}=e,I=(null==p?void 0:null===(a=p.record)||void 0===a?void 0:null===(s=a.controls)||void 0===s?void 0:s.filter(e=>{var s;return 4===e.accessLevel&&(null===(s=e.controlId)||void 0===s?void 0:s.startsWith("".concat(f,".")))}).map(e=>e.controlId.split(".")[1]))||[],_=null==m?void 0:null===(o=m.map((e,s)=>({...e,id:s})))||void 0===o?void 0:o.filter((e,s)=>!I.includes(String(s))),y=null===(h=_[v])||void 0===h?void 0:h.id,C=null===(x=_[v])||void 0===x?void 0:x.disabled;return(0,i.useEffect)(()=>{y>=0&&!C&&v!=y&&b(y)},[]),(0,t.jsx)(r.Z,{className:u().tabsContainer,children:(0,t.jsx)(r.Z,{className:u().tabsWrapper,children:(0,t.jsx)(n.Z,{value:v,onChange:(e,s)=>b(s),variant:"scrollable",scrollButtons:_.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==_?void 0:_.map(e=>(0,t.jsx)(l.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,t.jsxs)(r.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)("span",{children:e.label}),e.id===v&&(null==e?void 0:e.onRefetch)&&(0,t.jsx)(c.Z,{size:"small",className:u().refreshButton,onClick:s=>{s.stopPropagation(),e.onRefetch()},children:(0,t.jsx)(d.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=59882)}),_N_E=e.O()}]);