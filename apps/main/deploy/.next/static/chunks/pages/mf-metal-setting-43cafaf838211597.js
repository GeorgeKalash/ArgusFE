(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28043],{88534:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mf-metal-setting",function(){return a(87290)}])},87290:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var s=a(52322),r=a(90587),l=a(26612),o=a(71987),n=a(19473),d=a(65950),g=a(61802),p=a(2784),i=a(62202),y=a(60218),m=a(48601),u=a(80983),S=a(82737),I=a(31389),c=a(62362),q=a(8661),M=a(65215),h=a(27423);function C(e){var t,a;let{labels:g,maxAccess:C,record:D,recordId:T}=e,{platformLabels:O}=(0,p.useContext)(n.l),{getRequest:R,postRequest:A}=(0,p.useContext)(d.$),J=(0,o.E)({endpointId:r.u.MetalSetting.page}),{formik:P}=(0,u.c)({initialValues:{recordId:T,metalId:null,metalColorId:null,damageNonMetalItemId:null,damageMetalItemId:null},maxAccess:C,validationSchema:m.Ry({damageNonMetalItemId:m.Rx().required(),damageMetalItemId:m.Rx().required(),metalId:m.Rx().required(),metalColorId:m.Rx().required()}),onSubmit:async e=>{await A({extension:r.u.MetalSetting.set,record:JSON.stringify(e)}),e.recordId||P.setFieldValue("recordId",String(10*e.metalId)+String(e.metalColorId)),i.ZP.success(e.recordId?O.Edited:O.Added),J()}}),B=!!P.values.recordId;return(0,p.useEffect)(()=>{!async function(){if(D&&D.metalId&&D.metalColorId&&T){var e,t;let a=await R({extension:r.u.MetalSetting.get,parameters:"_metalId=".concat(D.metalId,"&_metalColorId=").concat(D.metalColorId)});P.setValues({...a.record,recordId:String((null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.metalId)*10)+String(null==a?void 0:null===(t=a.record)||void 0===t?void 0:t.metalColorId)})}}()},[]),(0,s.jsx)(S.Z,{resourceId:l.i.MetalSetting,form:P,maxAccess:C,editMode:B,children:(0,s.jsx)(I.R,{children:(0,s.jsx)(c.Q,{children:(0,s.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(y.ZP,{item:!0,xs:12,children:(0,s.jsx)(q.Z,{endpointId:M.$.Metals.qry,name:"metalId",label:g.metal,valueField:"recordId",displayField:"reference",readOnly:B,values:P.values,required:!0,onChange:(e,t)=>P.setFieldValue("metalId",(null==t?void 0:t.recordId)||null),error:P.touched.metalId&&!!P.errors.metalId,maxAccess:C})}),(0,s.jsx)(y.ZP,{item:!0,xs:12,children:(0,s.jsx)(q.Z,{endpointId:M.$.MetalColor.qry,name:"metalColorId",required:!0,label:g.metalColor,valueField:"recordId",displayField:"reference",values:P.values,maxAccess:C,readOnly:B,onChange:async(e,t)=>{P.setFieldValue("metalColorId",(null==t?void 0:t.recordId)||null)},error:(null===(t=P.touched)||void 0===t?void 0:t.metalColorId)&&!!(null===(a=P.errors)||void 0===a?void 0:a.metalColorId)})}),(0,s.jsx)(y.ZP,{item:!0,xs:12,children:(0,s.jsx)(h.U,{endpointId:M.$.Item.snapshot,name:"damageMetalItemId",label:g.damageItem,valueField:"sku",displayField:"name",valueShow:"damageMetalItemSku",secondValueShow:"damageMetalItemName",columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Item Name",grid:3}],form:P,displayFieldWidth:2,required:!0,onChange:(e,t)=>{P.setFieldValue("damageMetalItemSku",(null==t?void 0:t.sku)||""),P.setFieldValue("damageMetalItemName",(null==t?void 0:t.name)||""),P.setFieldValue("damageMetalItemId",(null==t?void 0:t.recordId)||null)},error:P.touched.damageMetalItemId&&!!P.errors.damageMetalItemId,maxAccess:C})}),(0,s.jsx)(y.ZP,{item:!0,xs:12,children:(0,s.jsx)(h.U,{endpointId:M.$.Item.snapshot,name:"damageNonMetalItemId",label:g.damageNonMetalItem,valueField:"sku",displayField:"name",valueShow:"damageNonMetalItemSku",secondValueShow:"damageNonMetalItemName",form:P,displayFieldWidth:2,columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Item Name",grid:3}],required:!0,onChange:(e,t)=>{P.setFieldValue("damageNonMetalItemSku",(null==t?void 0:t.sku)||""),P.setFieldValue("damageNonMetalItemName",(null==t?void 0:t.name)||""),P.setFieldValue("damageNonMetalItemId",(null==t?void 0:t.recordId)||null)},error:P.touched.damageNonMetalItemId&&!!P.errors.damageNonMetalItemId,maxAccess:C})})]})})})})}var D=a(33625),T=a(69387),O=a(27723),R=()=>{let{postRequest:e,getRequest:t}=(0,p.useContext)(d.$),{platformLabels:a}=(0,p.useContext)(n.l),{stack:y}=(0,g.zY)();async function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:s=50}=e;return{...await t({extension:r.u.MetalSetting.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(s)}),_startAt:a}}let{query:{data:u},refetch:S,labels:q,access:M,paginationParameters:h,invalidate:R}=(0,o.J)({queryFn:m,endpointId:r.u.MetalSetting.page,datasetId:l.i.MetalSetting}),A=[{field:"metalRef",headerName:q.metal,flex:1},{field:"metalColorRef",headerName:q.metalColor,flex:1},{field:"damageMetalItemName",headerName:q.damageItem,flex:1},{field:"damageNonMetalItemName",headerName:q.damageNonMetalItem,flex:1}],J=async()=>{P()};async function P(e){y({Component:C,props:{labels:q,record:e,recordId:e?String(10*e.metalId)+String(e.metalColorId):null,maxAccess:M},width:800,height:500,title:q.metalSettings})}let B=async t=>{await e({extension:r.u.MetalSetting.del,record:JSON.stringify(t)}),R(),i.ZP.success(a.Deleted)};return(0,s.jsxs)(I.R,{children:[(0,s.jsx)(D.g,{children:(0,s.jsx)(O.Z,{onAdd:J,maxAccess:M,labels:q})}),(0,s.jsx)(c.Q,{children:(0,s.jsx)(T.Z,{name:"table",columns:A,gridData:u,rowId:["metalId"],onEdit:e=>{P(e)},refetch:S,onDelete:B,pageSize:50,maxAccess:M,paginationParameters:h,paginationType:"api"})})]})}},90587:function(e,t,a){"use strict";a.d(t,{u:function(){return r}});let s="MF.asmx/",r={DesignRawMaterial:{qry2:s+"qryDRM2",qry:s+"qryDRM",set2:s+"set2DRM"},JobOrdersItem:{qry:s+"qryJIT",set2:s+"set2JIT"},IssueOfMaterialsItems:{qry:s+"qryIMI",qry2:s+"qryIMI2"},LaborGroup:{snapshot:s+"snapshotLBG",page:s+"pageLBG",qry:s+"qryLBG",set:s+"setLBG",get:s+"getLBG",del:s+"delLBG"},ProductionLine:{page:s+"pageLIN",qry:s+"qryLIN",qry2:s+"qry2LIN",qry3:s+"qry3LIN",set:s+"setLIN",get:s+"getLIN",del:s+"delLIN"},CostGroup:{page:s+"pageCG",set:s+"setCG",get:s+"getCG",del:s+"delCG",qry:s+"qryCG"},WorkCenter:{page:s+"pageWCT",qry:s+"qryWCT",qry3:s+"qryWCT3",set:s+"setWCT",get:s+"getWCT",del:s+"delWCT",snapshot:s+"snapshotWCT"},Routing:{page:s+"pageRTN",qry:s+"qryRTN",set:s+"setRTN",get:s+"getRTN",del:s+"delRTN",snapshot2:s+"snapshot2RTN",snapshot:s+"snapshotRTN"},Operation:{snapshot:s+"snapshotOPR",qry:s+"qryOPR",page:s+"pageOPR",set:s+"setOPR",get:s+"getOPR",del:s+"delOPR"},Labor:{page:s+"pageLBR",qry:s+"qryLBR",qry2:s+"qry2LBR",set:s+"setLBR",get:s+"getLBR",del:s+"delLBR",snapshot:s+"snapshotLBR"},Machine:{page:s+"pageMAC",qry:s+"qryMAC",set:s+"setMAC",get:s+"getMAC",del:s+"delMAC",snapshot:s+"snapshotMAC"},MachineSpecification:{page:s+"pageMAS",qry:s+"qryMAS",set:s+"setMAS",get:s+"getMAS",del:s+"delMAS"},LeanProductionPlanning:{preview:s+"previewPQ",update:s+"updatePQ",snapshot:s+"snapshotPQ",del:s+"delPQ",cancel:s+"cancelPQ"},MaterialsAdjustment:{generate:s+"generateADJ"},ProductionClass:{page:s+"pageCLS",qry:s+"qryCLS",set:s+"setCLS",get:s+"getCLS",del:s+"delCLS",snapshot:s+"qryCLS"},ProductionStandard:{qry:s+"qrySTD",page:s+"pageSTD",set:s+"setSTD",get:s+"getSTD",del:s+"delSTD"},ProductionClassSemiFinished:{qry:s+"qryCSF",set:s+"setCSF",get:s+"getCSF",del:s+"delCSF",set2:s+"set2CSF"},RoutingSequence:{set2:s+"set2RTS",qry:s+"qryRTS"},Overhead:{qry:s+"qryOVH",set:s+"setOVH",get:s+"getOVH",del:s+"delOVH",page:s+"pageOVH",snapshot:s+"snapshotOVH"},Design:{qry:s+"qryDES",set:s+"setDES",get:s+"getDES",del:s+"delDES",snapshot:s+"snapshotDES",page:s+"pageDES"},MFJobOrder:{pack:s+"packJOB",qry:s+"qryJOB",qry2:s+"qryJOB2",set:s+"setJOB",get:s+"getJOB",get2:s+"get2JOB",del:s+"delJOB",snapshot:s+"snapshotJOB",snapshot2:s+"snapshotJOB2",snapshot3:s+"snapshotJOB3",cancel:s+"cancelJOB",post:s+"postJOB",start:s+"startJOB",stop:s+"stopJOB",wip:s+"wipJOB",sync:s+"syncJOB"},ProductionSheet:{page:s+"pagePST",qry:s+"qryPST",get:s+"getPST",set2:s+"set2PST",get2:s+"get2PST",del:s+"delPST",post:s+"postPST",unpost:s+"unpostPST",snapshot:s+"snapshotPST"},ProductionSheetItem:{qry:s+"qryPSI",set:s+"setPSI",get:s+"getPSI",del:s+"delPSI"},DocumentTypeDefault:{qry:s+"qryDTD",get:s+"getDTD",set:s+"setDTD",del:s+"delDTD",page:s+"pageDTD"},RawMaterialCategory:{qry:s+"qryRMC",get:s+"getRMC",set:s+"setRMC",del:s+"delRMC",page:s+"pageRMC"},WorksheetMaterials:{qry:s+"qryIMA",get:s+"getIMA",pack:s+"get2IMA",set:s+"setIMA",set2:s+"set2IMA",del:s+"delIMA",post:s+"postIMA"},ProductionSheetQueue:{qry:s+"qryPSQ"},Damage:{qry:s+"qryDMG",get:s+"getDMG",set:s+"setDMG",del:s+"delDMG",page:s+"pageDMG",snapshot:s+"snapshotDMG",post:s+"postDMG",get2:s+"get2DMG",set2:s+"set2DMG",preview:s+"previewDMG"},JobCategory:{qry:s+"qryJCA"},JobRouting:{qry:s+"qryJRO",get:s+"getJRO",set:s+"setJRO",set2:s+"set2JRO",del:s+"delJRO",sync:s+"syncJRO",close:s+"closeJRO",reopen:s+"reopenJRO"},Worksheet:{snapshot:s+"snapshotWST",get:s+"getWST",pack:s+"getPackWST",set:s+"setWST",del:s+"delWST",page:s+"pageWST",summary:s+"summaryWST",post:s+"postWST",qry2:s+"qryWST2",draft:s+"draftWST"},JobOverhead:{qry:s+"qryJOH",set2:s+"set2JOH",generate:s+"generateJOH"},JobMaterial:{qry:s+"qryJMA"},JobItemSize:{qry:s+"qryJSZ",set2:s+"set2JSZ"},MFSerial:{qry:s+"qrySRL",qry2:s+"qrySRL2",set2:s+"set2SRL",generate:s+"generateSRL"},SamplePack:{qry:s+"qrySPL",set2:s+"set2SPL"},DamageReturn:{get:s+"getDMR",set:s+"setDMR",del:s+"delDMR",page:s+"pageDMR",snapshot:s+"snapshotDMR",post:s+"postDMR"},ProductionOrder:{get2:s+"get2PO",set2:s+"set2PO",del:s+"delPO",page:s+"pagePO",snapshot:s+"snapshotPO",post:s+"postPO",gen:s+"genPO",close:s+"closePO"},BillOfMaterials:{get:s+"getBMA",qry2:s+"qry2BMA",set:s+"setBMA",del:s+"delBMA",page:s+"pageBMA",snapshot:s+"snapshotBMA"},Component:{get:s+"getBMI",qry:s+"qryBMI",del:s+"delBMI",set:s+"setBMI",set2:s+"set2BMI"},Assembly:{get:s+"getASM",set2:s+"set2ASM",del:s+"delASM",page:s+"pageASM",snapshot:s+"snapshotASM",post:s+"postASM",unpost:s+"unpostASM",generate:s+"genASM"},AssemblyItems:{qry:s+"qryASC"},AssemblyLot:{get:s+"getASL",set:s+"setASL"},AssemblyOverhead:{qry:s+"qryAOH",set2:s+"set2AOH"},MeasurementScheduleMap:{qry:s+"qryMSM",set:s+"setMSM",set2:s+"set2MSM",del:s+"delMSM"},JobCategory:{set:s+"setJCA",get:s+"getJCA",del:s+"delJCA",page:s+"pageJCA",qry:s+"qryJCA"},DesignGroup:{qry:s+"qryDEG",set:s+"setDEG",get:s+"getDEG",del:s+"delDEG",page:s+"pageDEG"},Components:{qry:s+"qryDEM",set2:s+"set2DEM"},DesignFamily:{qry:s+"qryDEF",set:s+"setDEF",get:s+"getDEF",del:s+"delDEF",page:s+"pageDEF"},ProductionShifts:{qry:s+"qrySHI",set:s+"setSHI",get:s+"getSHI",del:s+"delSHI",page:s+"pageSHI"},JobOrderWizard:{set2:s+"set2JOZ",get2:s+"get2JOZ",del:s+"delJOZ",page:s+"pageJOZ",snapshot:s+"snapshotJOZ",post:s+"postJOZ"},JobTransfer:{get2:s+"get2TFR",set2:s+"set2TFR",del:s+"delTFR",page:s+"pageTFR",snapshot:s+"snapshotTFR",post:s+"postTFR",close:s+"closeTFR",reopen:s+"reopenTFR",qry:s+"qryTFR"},JobWorkCenter:{qry:s+"qryJWC",close:s+"closeJWC",reopen:s+"reopenJWC",get:s+"getJWC",snapshot:s+"snapshotJWC",verify:s+"verifyJWC"},WorkCenterConsumption:{page:s+"pageCON",snapshot:s+"snapshotCON",del:s+"delCON",set2:s+"set2CON",get:s+"getCON",post:s+"postCON",unpost:s+"unpostCON",close:s+"closeCON",reopen:s+"reopenCON"},ConsumptionItemView:{qry:s+"qryCOI"},LineItemCapacity:{set2:s+"set2LIT",del:s+"delLIT",qry:s+"qryLIT",page:s+"pageLIT"},CostGroupOverhead:{set2:s+"set2CGV",qry:s+"qryCGV"},IssueOfMaterialDimension:{set:s+"setIMD",qry:s+"qryIMD"},JobOrder:{gen:s+"genORD"},RefreshPoItem:{refresh:s+"refreshPOI"},WorkCenterTransferMap:{qry:s+"qryWCTM",set2:s+"set2WCTM"},BatchWorksheet:{get2:s+"get2BWST",set2:s+"set2BWST",del:s+"delBWST",page:s+"pageBWST",snapshot:s+"snapshotBWST",post:s+"postBWST",gen:s+"genBWST",close:s+"closeBWST",reopen:s+"reopenBWST"},ProductionOrderFromSaleOrder:{gen:s+"generatePOFromSO"},BatchTransfer:{page:s+"pageBTFR",set2:s+"set2BTFR",del:s+"delBTFR",snapshot:s+"snapshotBTFR",get:s+"getBTFR",post:s+"postBTFR",unpost:s+"unpostBTFR"},BatchTransferJob:{qry:s+"qryBTFJ"},Disposal:{page:s+"pageDIS",snapshot:s+"snapshotDIS",get:s+"getDIS",set2:s+"set2DIS",del:s+"delDIS"},DisposalItem:{qry:s+"qryDII"},DisposalSerial:{qry:s+"qryDISRL"},MetalSetting:{page:s+"pageMTS",set:s+"setMTS",get:s+"getMTS",del:s+"delMTS"},DamageReason:{qry:s+"qryDRS",page:s+"pageDRS",set:s+"setDRS",get:s+"getDRS",del:s+"delDRS",snapshot:s+"snapshotDRS"},DamageCategory:{qry:s+"qryDCA",page:s+"pageDCA",set:s+"setDCA",get:s+"getDCA",del:s+"delDCA",snapshot:s+"snapshotDCA"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=88534)}),_N_E=e.O()}]);