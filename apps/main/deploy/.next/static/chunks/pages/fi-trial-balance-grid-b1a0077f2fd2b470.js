(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14788],{65694:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-trial-balance-grid",function(){return a(62931)}])},62931:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return h}});var i=a(52322),t=a(2784),r=a(69387),c=a(65950),l=a(71987),d=a(26612),s=a(31389),o=a(33625),u=a(62362),f=a(36908),p=a(93736),m=a(61802),x=a(60218),_=a(5088),b=e=>{let{access:n,labels:a,obj:l,params:d}=e,{getRequest:f}=(0,t.useContext)(c.$),[m,b]=(0,t.useState)({list:[]});async function h(){b(await f({extension:p.K.TrialBalance.FI401o2,parameters:"_filter=&_size=30&_startAt=0&_fiscalYear=".concat(null==d?void 0:d[1],"&_startDate=").concat(null==d?void 0:d[2],"&_endDate=").concat(null==d?void 0:d[3],"&_accountId=").concat(l.accountId,"&_currencyId=").concat(l.currencyId)}))}(0,t.useEffect)(()=>{h()},[]);let g=[{field:"date",headerName:a.date,flex:1,type:"date"},{field:"reference",headerName:a.reference,flex:1},{field:"functionName",headerName:a.functionName,flex:1},{field:"description",headerName:a.description,flex:1},{field:"debit",headerName:a.debit,flex:1,type:"number"},{field:"credit",headerName:a.credit,flex:1,type:"number"},{field:"runningBalance",headerName:a.runningBalance,flex:1,type:"number"}];return(0,i.jsxs)(s.R,{children:[(0,i.jsx)(o.g,{children:(0,i.jsx)(x.ZP,{container:!0,sx:{p:2},children:(0,i.jsxs)(x.ZP,{item:!0,container:!0,spacing:2,xs:6,children:[(0,i.jsx)(x.ZP,{item:!0,xs:12,children:(0,i.jsx)(_.Z,{label:a.currency,value:l.currencyRef,readOnly:!0})}),(0,i.jsx)(x.ZP,{item:!0,xs:12,children:(0,i.jsx)(_.Z,{label:a.account,value:l.accountRef,readOnly:!0})}),(0,i.jsx)(x.ZP,{item:!0,xs:12,children:(0,i.jsx)(_.Z,{label:a.name,value:l.accountName,readOnly:!0})})]})})}),(0,i.jsx)(u.Q,{children:(0,i.jsx)(r.Z,{name:"TrialBalance",columns:g,gridData:m,pageSize:50,paginationType:"client",refetch:h,maxAccess:n})})]})},h=()=>{let{getRequest:e}=(0,t.useContext)(c.$),{stack:n}=(0,m.zY)(),[a,x]=(0,t.useState)({});async function _(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.params&&x(function(e){let n=null==e?void 0:e.split("^"),a={};for(let e of n){let[n,i]=e.split("|");if(i&&n){if(/^\d{8}$/.test(i)){let e=i.substring(0,4),t=i.substring(4,6),r=i.substring(6,8);a={...a,[n]:"".concat(e,"-").concat(t,"-").concat(r)}}else a={...a,[n]:i}}}return a}(n.params));let a=await e({extension:p.K.TrialBalance.FI402View,parameters:"_startAt=0&_size=30&_params=".concat(n.params||"")});return{...a,list:null==a?void 0:a.list.map(e=>({...e,opening_base_credit:e.opening_debit-e.opening_credit,previous_base_credit:e.previous_debit-e.previous_credit,period_balance:e.period_debit-e.period_credit,final_balance:e.balance_debit-e.balance_credit}))}}async function h(e){let{filters:n}=e;return _({params:null==n?void 0:n.params})}let{query:{data:g},labels:y,filterBy:N,refetch:I,access:F}=(0,l.J)({endpointId:p.K.TrialBalance.FI402View,datasetId:d.i.FITrialBalanceGridView,queryFn:_,filter:{filterFn:h},defaultLoad:!1}),j=[{field:"currencyRef",headerName:y.currency,flex:1},{field:"accountRef",headerName:y.account,flex:1},{field:"accountName",headerName:y.name,flex:1},{field:"opening_base_credit",headerName:y.opening,flex:1,type:"number"},{field:"previous_base_credit",headerName:y.previous,flex:1,type:"number"},{field:"period_debit",headerName:y.periodDebit,flex:1,type:"number"},{field:"period_credit",headerName:y.periodCredit,flex:1,type:"number"},{field:"period_balance",headerName:y.periodBalance,flex:1,type:"number"},{field:"final_balance",headerName:y.finalBalance,flex:1,type:"number"}];async function v(e){n({Component:b,props:{labels:y,access:F,obj:e,params:a},width:1e3,height:700,title:y.statementOfAccount})}return(0,i.jsxs)(s.R,{children:[(0,i.jsx)(o.g,{children:(0,i.jsx)(f.Z,{maxAccess:F,filterBy:N,reportName:"FI01",hasSearch:!1})}),(0,i.jsx)(u.Q,{children:(0,i.jsx)(r.Z,{name:"table",columns:j,gridData:g,onEdit:e=>{v(e)},isLoading:!1,pageSize:50,refetch:I,paginationType:"client",maxAccess:F})})]})}},93736:function(e,n,a){"use strict";a.d(n,{K:function(){return t}});let i="RG.FI.asmx/",t={FiOpeningBalance:{gen:i+"genOBA"},FiAging:{qry:i+"FI404"},AccountSummary:{AccFI405b:i+"FI405b"},DocumentAging:{AgingFI406a:i+"FI406a",AgingFI406b:i+"FI406b"},TrialBalance:{FI402View:i+"FI402o",FI401o2:i+"FI401o2"}}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=65694)}),_N_E=e.O()}]);