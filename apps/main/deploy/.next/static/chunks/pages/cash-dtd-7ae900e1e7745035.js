(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40035],{45176:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cash-dtd",function(){return a(65726)}])},65726:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return N}});var t=a(52322),r=a(2784),d=a(62202),c=a(69387),o=a(27723),l=a(65950),s=a(61802),u=a(71987),i=a(26612),m=a(31389),f=a(33625),p=a(62362),I=a(19473),h=a(2119),x=a(60218),y=a(48601),C=a(82737),v=a(80983),A=a(8661),D=a(38449),_=a(7121);function g(e){let{labels:n,maxAccess:a,recordId:c}=e,{platformLabels:o}=(0,r.useContext)(I.l),{getRequest:s,postRequest:f}=(0,r.useContext)(l.$),g=(0,u.E)({endpointId:h.G.DocumentTypeDefault.page}),{formik:N}=(0,v.c)({initialValues:{dtId:"",plantId:"",recordId:c||null,cashAccountId:"",fromCashAccountId:"",toCashAccountId:""},maxAccess:a,validationSchema:y.Ry({dtId:y.Z_().required(),fromCashAccountId:y.Z_().nullable(),toCashAccountId:y.Z_().nullable().test(function(e){let{fromCashAccountId:n}=this.parent;return!e||!n||e!==n})}),onSubmit:async e=>{await f({extension:h.G.DocumentTypeDefault.set,record:JSON.stringify(e)}),e.recordId||N.setFieldValue("recordId",N.values.dtId),d.ZP.success(e.recordId?o.Edited:o.Added),g()}}),j=!!N.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(c){let e=await s({extension:h.G.DocumentTypeDefault.get,parameters:"_dtId=".concat(c)});N.setValues({...e.record,recordId:c})}}()},[]),(0,t.jsx)(C.Z,{resourceId:i.i.CaDtd,form:N,maxAccess:a,editMode:j,isCleared:!1,children:(0,t.jsx)(m.R,{children:(0,t.jsx)(p.Q,{children:(0,t.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{endpointId:D.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(_.J.CashTransfer),name:"dtId",required:!0,label:n.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],readOnly:j,values:N.values,maxAccess:a,onChange:(e,n)=>{N&&N.setFieldValue("dtId",(null==n?void 0:n.recordId)||"")},error:N.touched.dtId&&!!N.errors.dtId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{endpointId:D.r.Plant.qry,name:"plantId",label:o.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:N.values,onChange:(e,n)=>{N.setFieldValue("plantId",(null==n?void 0:n.recordId)||"")},error:N.touched.plantId&&!!N.errors.plantId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{endpointId:h.G.CashAccount.qry,parameters:"_type=0",name:"fromCashAccountId",label:n.fromCa,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:N.values,maxAccess:a,onChange:(e,n)=>{N.setFieldValue("fromCashAccountId",(null==n?void 0:n.recordId)||null)},error:N.touched.fromCashAccountId&&!!N.errors.fromCashAccountId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{endpointId:h.G.CashAccount.qry,parameters:"_type=0",name:"toCashAccountId",label:n.toCa,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:N.values,maxAccess:a,onChange:(e,n)=>{N.setFieldValue("toCashAccountId",(null==n?void 0:n.recordId)||null)},error:N.touched.toCashAccountId&&!!N.errors.toCashAccountId})})]})})})})}var N=()=>{let{getRequest:e,postRequest:n}=(0,r.useContext)(l.$),{platformLabels:a}=(0,r.useContext)(I.l),{stack:x}=(0,s.zY)();async function y(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:t=50}=n;try{return{...await e({extension:h.G.DocumentTypeDefault.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(t,"&_filter=&_functionId=").concat(_.J.CashTransfer)}),_startAt:a}}catch(e){}}let{query:{data:C},labels:v,invalidate:A,paginationParameters:D,refetch:N,access:j}=(0,u.J)({queryFn:y,endpointId:h.G.DocumentTypeDefault.page,datasetId:i.i.CaDtd}),Z=[{field:"dtName",headerName:v.documentType,flex:1},{field:"plantName",headerName:v.plant,flex:1},{field:"fromCashAccountName",headerName:v.fromCa,flex:1},{field:"toCashAccountName",headerName:v.toCa,flex:1}],w=async e=>{await n({extension:h.G.DocumentTypeDefault.del,record:JSON.stringify(e)}),A(),d.ZP.success(a.Deleted)};function F(e){x({Component:g,props:{labels:v,recordId:null==e?void 0:e.dtId,maxAccess:j},width:600,height:400,title:v.dtDefault})}return(0,t.jsxs)(m.R,{children:[(0,t.jsx)(f.g,{children:(0,t.jsx)(o.Z,{onAdd:()=>{F()},maxAccess:j})}),(0,t.jsx)(p.Q,{children:(0,t.jsx)(c.Z,{columns:Z,gridData:C,rowId:["dtId"],onEdit:e=>{F(e)},onDelete:w,isLoading:!1,pageSize:50,refetch:N,paginationParameters:D,paginationType:"api",maxAccess:j})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=45176)}),_N_E=e.O()}]);