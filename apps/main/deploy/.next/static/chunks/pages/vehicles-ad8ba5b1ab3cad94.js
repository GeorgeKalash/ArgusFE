(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44590],{3571:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vehicles",function(){return a(14521)}])},14521:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(52322),r=a(2784),n=a(62202),l=a(69387),o=a(27723),i=a(65950),d=a(71987),c=a(26612),p=a(31389),g=a(33625),u=a(62362),R=a(61802),y=a(19473),h=a(30043),I=a(60218),P=a(48601),m=a(82737),V=a(5088),D=a(80983),q=a(8661),T=a(38449),v=a(91406),x=a(2454);function O(e){let{labels:t,maxAccess:a,recordId:l}=e,{getRequest:o,postRequest:g}=(0,r.useContext)(i.$),{platformLabels:R}=(0,r.useContext)(y.l),O=(0,d.E)({endpointId:h.U.Vehicle.page}),{formik:f}=(0,D.c)({initialValues:{recordId:null,plateNo:"",name:"",capacityVolume:"",capacityWeight:"",plantId:""},maxAccess:a,validateOnChange:!0,validationSchema:P.Ry({name:P.Z_().required(),plateNo:P.Z_().required(),capacityVolume:P.Rx().required(),capacityWeight:P.Rx().required()}),onSubmit:async e=>{let t=await g({extension:h.U.Vehicle.set,record:JSON.stringify(e)});e.recordId?n.ZP.success(R.Edited):(n.ZP.success(R.Added),f.setFieldValue("recordId",t.recordId)),O()}}),E=!!f.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(l){let e=await o({extension:h.U.Vehicle.get,parameters:"_recordId=".concat(l)});f.setValues(e.record)}}()},[]),(0,s.jsx)(m.Z,{resourceId:c.i.Vehicle,form:f,maxAccess:a,editMode:E,children:(0,s.jsx)(p.R,{children:(0,s.jsx)(u.Q,{children:(0,s.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(V.Z,{name:"name",label:t.name,value:f.values.name,required:!0,maxAccess:a,onChange:f.handleChange,onClear:()=>f.setFieldValue("name",""),error:f.touched.name&&!!f.errors.name})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(V.Z,{name:"plateNo",label:t.plateNo,value:f.values.plateNo,required:!0,maxAccess:a,onChange:f.handleChange,onClear:()=>f.setFieldValue("plateNo",""),error:f.touched.plateNo&&!!f.errors.plateNo})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"capacityVolume",required:!0,decimalScale:0,label:t.capacityVolume,value:f.values.capacityVolume,maxAccess:a,onChange:e=>f.setFieldValue("capacityVolume",e.target.value),onClear:()=>f.setFieldValue("capacityVolume",""),error:f.touched.capacityVolume&&!!f.errors.capacityVolume})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"capacityWeight",required:!0,decimalScale:0,label:t.capacityWeight,value:f.values.capacityWeight,maxAccess:a,onChange:e=>f.setFieldValue("capacityWeight",e.target.value),onClear:()=>f.setFieldValue("capacityWeight",""),error:f.touched.capacityWeight&&!!f.errors.capacityWeight})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(q.Z,{endpointId:T.r.Plant.qry,name:"plantId",label:t.plant,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:f.values,maxAccess:a,onChange:(e,t)=>{f.setFieldValue("plantId",t?null==t?void 0:t.recordId:"")},error:f.touched.plantId&&!!f.errors.recordId})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(q.Z,{endpointId:x.y.Vendor.qry,parameters:"_startAt=0&_pageSize=50&_params=&_sortField=",name:"vendorId",label:t.vendor,valueField:"recordId",displayField:"name",values:f.values,maxAccess:a,onChange:(e,t)=>{f.setFieldValue("vendorId",t?null==t?void 0:t.recordId:"")},error:f.touched.vendorId&&!!f.errors.vendorId})})]})})})})}var f=()=>{let{getRequest:e,postRequest:t}=(0,r.useContext)(i.$),{platformLabels:a}=(0,r.useContext)(y.l),{stack:I}=(0,R.zY)();async function P(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:s=50}=t;return{...await e({extension:h.U.Vehicle.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(s,"&filter=")}),_startAt:a}}let{query:{data:m},labels:V,paginationParameters:D,refetch:q,access:T,invalidate:v}=(0,d.J)({queryFn:P,endpointId:h.U.Vehicle.page,datasetId:c.i.Vehicle}),x=[{field:"name",headerName:V.name,flex:1},{field:"plateNo",headerName:V.plateNo,flex:1},{field:"capacityVolume",headerName:V.capacityVolume,flex:1},{field:"capacityWeight",headerName:V.capacityWeight,flex:1}];function f(e){I({Component:O,props:{labels:V,recordId:e,maxAccess:T},width:600,height:500,title:V.vehicles})}let E=async e=>{try{await t({extension:h.U.Vehicle.del,record:JSON.stringify(e)}),v(),n.ZP.success(a.Deleted)}catch(e){}};return(0,s.jsxs)(p.R,{children:[(0,s.jsx)(g.g,{children:(0,s.jsx)(o.Z,{onAdd:()=>{f()},maxAccess:T})}),(0,s.jsx)(u.Q,{children:(0,s.jsx)(l.Z,{columns:x,gridData:m,rowId:["recordId"],onEdit:e=>{f(null==e?void 0:e.recordId)},onDelete:E,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:D,refetch:q,maxAccess:T})})]})}},30043:function(e,t,a){"use strict";a.d(t,{U:function(){return r}});let s="DE.asmx/",r={Driver:{snapshot:s+"snapshotDRV",page:s+"pageDRV",set:s+"setDRV",get:s+"getDRV",qry:s+"qryDRV",del:s+"delDRV"},Vehicle:{page:s+"pageVEH",set:s+"setVEH",get:s+"getVEH",qry:s+"qryVEH",del:s+"delVEH"},Trip:{page:s+"pageTRP",set:s+"setTRP",get:s+"getTRP",qry:s+"qryTRP",del:s+"delTRP",snapshot:s+"snapshotTRP",snapshot2:s+"snapshot2TRP",reopen:s+"reopenTRP",post:s+"postTRP",unpost:s+"unpostTRP",close:s+"closeTRP",generate:s+"generateTRP",setTRP2:s+"setTRP2",assign:s+"assignTRP",unassign:s+"unassignedTRP"},TripOrderPack2:{set2:s+"set2TRO"},TripOrder:{qry:s+"qryTRO"},Reduild:{rebuild:s+"rebuildMW"},TRP:{flag:s+"flagTRP"},ExpenseTypes:{get:s+"getET",set:s+"setET",del:s+"delET",page:s+"pageET"},DeliveriesOrders:{qry:s+"qryORD",get:s+"getORD",snapshot:s+"snapshotORD",unpost:s+"unpostORD",gen:s+"genORD",post:s+"postORD",del:s+"delORD",cancel:s+"cancelORD",flag:s+"flagORD",set2:s+"set2ORD"},Invoice:{generate:s+"generateIVC2",generateInv:s+"generateIVC",preview:s+"previewIVC"},OrderItem:{qry:s+"qryORI",get:s+"getORI"},MW:{qry:s+"qryMW2"},GenerateTrip:{root:s+"rootSZ",firstLevel:s+"firstLevelSZ",undelivered2:s+"undeliveredSO2",previewTRP:s+"previewTRP"},DeliveryLeadTime:{get:s+"getLDT",page:s+"pageLDT",set:s+"setLDT",del:s+"delLDT"},Volume:{vol:s+"volZO"},AllocatedVolume:{qry:s+"qryVEH2"},InboundTransp:{pack:s+"getPackINB",page:s+"pageINB",set2:s+"set2INB",get:s+"getINB",get2:s+"get2INB",del:s+"delINB",snapshot:s+"snapshotINB",post:s+"postINB",unpost:s+"unpostINB"},InboundOrders:{qry:s+"qryINO"}}},2454:function(e,t,a){"use strict";a.d(t,{y:function(){return r}});let s="PU.asmx/",r={VendorGroups:{qry:s+"qryGRP",page:s+"pageGRP",get:s+"getGRP",set:s+"setGRP",del:s+"delGRP"},PriceList:{qry:s+"qryPRI",del:s+"delPRI",get:s+"getPRI",set:s+"setPRI"},PUOrderStatus:{qry:s+"qryPOS",page:s+"pagePOS",get:s+"getPOS",set:s+"setPOS",del:s+"delPOS"},DeliveryMethods:{qry:s+"qryDM",page:s+"pageDM",get:s+"getDM",set:s+"setDM",del:s+"delDM"},PaymentTerms:{qry:s+"qryPT",page:s+"pagePT",get:s+"getPT",set:s+"setPT",del:s+"delPT"},Vendor:{snapshot:s+"snapshotVEN",qry:s+"qryVEN",page:s+"pageVEN",get:s+"getVEN",set:s+"setVEN",del:s+"delVEN"},Address:{qry:s+"qryAD",page:s+"pageAD",get:s+"getAD",set:s+"setAD",del:s+"delAD"},DocumentTypeDefault:{qry:s+"qryDTD",get:s+"getDTD",set:s+"setDTD",del:s+"delDTD",page:s+"pageDTD"},PurchaseInvoiceHeader:{qry:s+"qryIVC",get:s+"getIVC",get2:s+"get2IVC",level2_PU:s+"level2_PU",set:s+"setIVC",del:s+"delIVC",snapshot:s+"snapshotIVC",set2:s+"set2IVC",post:s+"postIVC",unpost:s+"unpostIVC",generate:s+"generateIVC",preview:s+"previewIVC",sync:s+"syncIVC",verify:s+"verifyIVC"},Invoice:{snapshot:s+"snapshotINV"},PurchaseReturnHeader:{set2:s+"set2IVR",post:s+"postIVR",unpost:s+"unpostIVR",del:s+"delIVR",qry:s+"qryIVR",snapshot:s+"snapshotIVR"},VendorPrice:{get:s+"getPRI2"},ItemCostHistory:{qry:s+"qryIPH"},ItemPromotion:{qry:s+"qryIVIM"},Serials:{qry:s+"qrySRL",import:s+"importSRL",last:s+"lastSRL",sync:s+"syncSRL"},Shipment:{get:s+"getSHP",set2:s+"set2SHP",del:s+"delSHP",page:s+"pageSHP",snapshot:s+"snapshotSHP",post:s+"postSHP",unpost:s+"unpostSHP",gen:s+"genSHP"},ShipmentItem:{qry:s+"qrySHI"},UnpostedOrderPack:{get:s+"openORD",snapshot:s+"snapshotORD"},PurchaseOrder:{page:s+"pageORD",snapshot:s+"snapshotORD",del:s+"delORD",set2:s+"set2ORD",get2:s+"get2ORD",close:s+"closeORD",reopen:s+"reopenORD",terminate:s+"terminateORD",transfer:s+"transfer1ORD"},PurchaseRequisition:{snapshot:s+"snapshotREQ",page:s+"pageREQ",get:s+"getREQ",set:s+"setREQ",del:s+"delREQ",cancel:s+"cancelREQ",reopen:s+"reopenREQ",close:s+"closeREQ"},RequisitionDetail:{qry:s+"qryREI",set:s+"setREI",get:s+"getREI",del:s+"delREI"},QuotationItem:{preview:s+"previewQTI",qry:s+"qryQTI"},OrderItem:{qry:s+"qryORI",set2:s+"set2ORI"},PUDraftReturn:{set2:s+"set2DRE",get:s+"getDRE",page:s+"pageDRE",snapshot:s+"snapshotDRE",del:s+"delDRE",post:s+"postDRE"},PUDraftReturnSerial:{get2:s+"get2DRS",qry:s+"qryDRS",del:s+"delDRS",append:s+"appendDRS",batch:s+"batchDRS"},FinancialGroup:{qry:s+"qryFII",set2:s+"set2FII"},PUInvoiceRetBalance:{balance:s+"balanceRET"},ItemLastPurchaseInfo:{last:s+"lastIVI"},PurchaseQuotation:{page:s+"pageQTN",set2:s+"set2QTN",get:s+"getQTN",del:s+"delQTN",snapshot:s+"snapshotQTN"},GenerateQTNPRPack:{gen:s+"genQTN"},GeneratePOPRPack:{gen:s+"genPO",gen2:s+"gen2PO"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=3571)}),_N_E=e.O()}]);