(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97712],{88823:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cb-bank-branches",function(){return n(84262)}])},84262:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return V}});var s=n(52322),r=n(2784),d=n(62202),t=n(61802),i=n(69387);n(27723);var l=n(65950),c=n(71987),o=n(26612),u=n(31389),m=n(33625),h=n(62362),x=n(2119),I=n(60218),y=n(48601),v=n(5088),C=n(82737),f=n(8661),g=n(80983),p=n(38449),j=n(21581),F=n(19473),k=n(27423),Z=n(19689),L=e=>{var a;let{labels:n,maxAccess:t,recordId:i}=e,{postRequest:m,getRequest:L}=(0,r.useContext)(l.$),{platformLabels:b}=(0,r.useContext)(F.l),V=(0,c.E)({endpointId:x.G.BankBranches.qry}),{formik:N}=(0,g.c)({maxAccess:t,initialValues:{recordId:i||null,name:"",bankId:"",swiftCode:"",addressLine1:"",addressLine2:"",addressLine3:"",addressLine4:"",countryId:"",stateId:"",cityId:"",cityName:"",districtId:"",districtName:"",contact1:"",contact2:"",remarks:"",isInactive:!1},validateOnChange:!0,validationSchema:y.Ry({name:y.Z_().required(),bankId:y.Z_().required(),countryId:y.Z_().required()}),onSubmit:async e=>{let a=await m({extension:x.G.BankBranches.set,record:JSON.stringify(e)});e.recordId||N.setValues({...e,recordId:a.recordId}),d.ZP.success(e.recordId?b.Edited:b.Added),V()}}),w=!!N.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(i){let e=await L({extension:x.G.BankBranches.get,parameters:"_recordId=".concat(i)});N.setValues(e.record)}}()},[]),(0,s.jsx)(C.Z,{form:N,resourceId:o.i.BankBranches,maxAccess:t,editMode:w,children:(0,s.jsx)(u.R,{children:(0,s.jsxs)(I.ZP,{container:!0,gap:2,children:[(0,s.jsx)(h.Q,{children:(0,s.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"name",label:n.name,value:N.values.name,required:!0,maxLength:"50",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("name",""),error:N.touched.name&&!!N.errors.name})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{endpointId:x.G.CbBank.qry,name:"bankId",label:n.bank,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:N.values,valueField:"recordId",displayField:["reference","name"],required:!0,maxAccess:t,onChange:(e,a)=>{N&&N.setFieldValue("bankId",null==a?void 0:a.recordId),N&&N.setFieldValue("countryId",null==a?void 0:a.countryId)},error:N.touched.bankId&&!!N.errors.bankId})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"swiftCode",label:n.swiftCode,value:N.values.swiftCode,maxLength:"20",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("swiftCode",""),error:N.touched.swiftCode&&!!N.errors.swiftCode})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"addressLine1",label:n.adressLine1,value:N.values.addressLine1,maxLength:"100",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("addressLine1",""),error:N.touched.addressLine1&&!!N.errors.addressLine1})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"addressLine2",label:n.adressLine2,value:N.values.addressLine2,maxLength:"100",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("addressLine2",""),error:N.touched.addressLine2&&!!N.errors.addressLine2})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"addressLine3",label:n.adressLine3,value:N.values.addressLine3,maxLength:"100",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("addressLine3",""),error:N.touched.addressLine3&&!!N.errors.addressLine3})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"addressLine4",label:n.adressLine4,value:N.values.addressLine4,maxLength:"100",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("addressLine4",""),error:N.touched.addressLine4&&!!N.errors.addressLine4})})]})}),(0,s.jsx)(h.Q,{children:(0,s.jsxs)(I.ZP,{container:!0,gap:2,children:[(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{endpointId:p.r.Country.qry,name:"countryId",label:n.country,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:N.values,valueField:"recordId",displayField:"name",required:!0,readOnly:w,maxAccess:t,onChange:(e,a)=>{N.setFieldValue("stateId",null),N.setFieldValue("cityId",""),N.setFieldValue("cityName",""),N.setFieldValue("districtId",""),N.setFieldValue("districtName",""),a?N.setFieldValue("countryId",null==a?void 0:a.recordId):N.setFieldValue("countryId","")},error:N.touched.countryId&&!!N.errors.countryId})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{endpointId:N.values.countryId&&p.r.State.qry,parameters:N.values.countryId&&"_countryId=".concat(N.values.countryId||0),name:"stateId",label:n.state,readOnly:(w||!N.values.countryId)&&!0,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:N.values,valueField:"recordId",displayField:"name",maxAccess:t,onChange:(e,a)=>{N.setFieldValue("stateId",null==a?void 0:a.recordId),N.setFieldValue("cityId",""),N.setFieldValue("districtId",""),N.setFieldValue("cityName",""),N.setFieldValue("districtName","")},error:N.touched.stateId&&!!N.errors.stateId})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(k.U,{endpointId:p.r.City.snapshot,parameters:{_countryId:N.values.countryId,_stateId:N.values.stateId?N.values.stateId:0},valueField:"name",displayField:"name",name:"cityName",label:n.city,readOnly:(w||!N.values.countryId)&&!0,form:N,secondDisplayField:!1,onChange:(e,a)=>{N.setValues({...N.values,cityId:(null==a?void 0:a.recordId)||"",cityName:(null==a?void 0:a.name)||"",districtId:"",districtName:""})},maxAccess:t})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(k.U,{endpointId:p.r.CityDistrict.snapshot,parameters:{_cityId:N.values.cityId},valueField:"name",displayField:"name",name:"districtName",label:n.cityDistrict,readOnly:(w||!N.values.cityId)&&!0,form:N,secondDisplayField:!1,onChange:(e,a)=>{a?(N.setFieldValue("districtId",null==a?void 0:a.recordId),N.setFieldValue("districtName",null==a?void 0:a.name)):(N.setFieldValue("districtId",""),N.setFieldValue("districtName",""))},maxAccess:t})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"contact1",type:"numeric",label:n.contact1,value:N.values.contact1,maxLength:"100",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("contact1",""),error:N.touched.contact1&&!!N.errors.contact1})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"contact2",type:"numeric",label:n.contact2,value:N.values.contact2,maxLength:"100",maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("contact2",""),error:N.touched.contact2&&!!N.errors.contact2})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(j.Z,{name:"remarks",label:n.remarks,value:N.values.remarks,maxLength:"100",rows:2,maxAccess:t,onChange:N.handleChange,onClear:()=>N.setFieldValue("remarks",""),error:N.touched.remarks&&!!N.errors.remarks})}),(0,s.jsx)(I.ZP,{item:!0,xs:12,children:(0,s.jsx)(Z.Z,{name:"isInactive",value:null===(a=N.values)||void 0===a?void 0:a.isInactive,onChange:e=>N.setFieldValue("isInactive",e.target.checked),label:n.isInactive,maxAccess:t})})]})})]})})})},b=n(36908),V=()=>{let{getRequest:e,postRequest:a}=(0,r.useContext)(l.$),{platformLabels:n}=(0,r.useContext)(F.l),{stack:I}=(0,t.zY)();async function y(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:s=50}=a;return await e({extension:x.G.BankBranches.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(s,"&filter=")})}let{query:{data:v},labels:C,paginationParameters:f,filterBy:g,refetch:p,access:j}=(0,c.J)({queryFn:y,endpointId:x.G.BankBranches.qry,datasetId:o.i.BankBranches,filter:{filterFn:k}});async function k(a){let{filters:n,pagination:s}=a;try{if(null==n?void 0:n.qry)return await e({extension:x.G.BankBranches.snapshot,parameters:"_filter=".concat(n.qry)});return y({_startAt:s._startAt||0,params:null==n?void 0:n.params})}catch(e){}}let Z=(0,c.E)({endpointId:x.G.BankBranches.qry}),V=[{field:"name",headerName:C.name,flex:1},{field:"bankName",headerName:C.bank,flex:1},{field:"swiftCode",headerName:C.swiftCode,flex:1},{field:"countryName",headerName:C.country,flex:1}];function N(e){I({Component:L,props:{labels:C,recordId:e,maxAccess:j},width:780,height:550,title:C.bankBranches})}let w=async e=>{try{await a({extension:x.G.BankBranches.del,record:JSON.stringify(e)}),Z(),d.ZP.success(n.Deleted)}catch(e){}};return(0,s.jsxs)(u.R,{children:[(0,s.jsx)(m.g,{children:(0,s.jsx)(b.Z,{onAdd:()=>{N()},maxAccess:j,reportName:"CABNB",filterBy:g})}),(0,s.jsx)(h.Q,{children:(0,s.jsx)(i.Z,{columns:V,gridData:v,rowId:["recordId"],onEdit:e=>{N(e.recordId)},onDelete:w,isLoading:!1,pageSize:50,refetch:p,paginationParameters:f,paginationType:"api",maxAccess:j})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=88823)}),_N_E=e.O()}]);