(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57659],{59958:function(e,r,d){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rt-fees-schedule-inw-map",function(){return d(23382)}])},23382:function(e,r,d){"use strict";d.r(r),d.d(r,{default:function(){return P}});var a=d(52322),s=d(2784),l=d(62202),n=d(69387),i=d(65950),c=d(71987),t=d(26612),o=d(31389),u=d(33625),h=d(62362),f=d(61802),p=d(19473),m=d(88469),I=d(60218),x=d(48601),y=d(82737),v=d(80983),F=d(27423),g=d(8661),N=d(53621),_=d(84100);function S(e){let{labels:r,maxAccess:d,recordId:n,record:u}=e,{getRequest:f,postRequest:S}=(0,s.useContext)(i.$),{platformLabels:w}=(0,s.useContext)(p.l),P=(0,c.E)({endpointId:m.N.FeeScheduleInwards.page}),{formik:M}=(0,v.c)({initialValues:{recordId:n,corId:"",dispersalMode:"",scheduleId:"",feePayer:""},maxAccess:d,validateOnChange:!0,validationSchema:x.Ry({corId:x.Z_().required(),scheduleId:x.Z_().required(),dispersalMode:x.Z_().required(),feePayer:x.Rx().required()}),onSubmit:async e=>{let r=M.values.corId,d=M.values.dispersalMode;await S({extension:m.N.FeeScheduleInwards.set,record:JSON.stringify(e)}),r||d?l.ZP.success(w.Edited):l.ZP.success(w.Added),M.setFieldValue("recordId",String(e.corId)+String(e.dispersalMode)),P()}}),j=!!M.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(u&&u.corId&&u.scheduleId&&n){let e=await f({extension:m.N.FeeScheduleInwards.get,parameters:"_corId=".concat(u.corId,"&_dispersalMode=").concat(u.dispersalMode)});M.setValues({...e.record,recordId:String(e.record.corId)+String(e.record.dispersalMode)})}}()},[]),(0,a.jsx)(y.Z,{resourceId:t.i.FeeScheduleInwardsMap,form:M,maxAccess:d,editMode:j,children:(0,a.jsx)(o.R,{children:(0,a.jsx)(h.Q,{children:(0,a.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(F.U,{endpointId:N.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",readOnly:j,label:r.cor,form:M,required:!0,displayFieldWidth:2,valueShow:"corRef",secondValueShow:"corName",maxAccess:d,onChange:(e,r)=>{M.setFieldValue("corId",r?r.recordId:""),M.setFieldValue("corName",r?r.name:""),M.setFieldValue("corRef",r?r.reference:"")},error:M.touched.corId&&!!M.errors.corId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{name:"dispersalMode",label:r.dispersalMode,datasetId:_.v.RT_Dispersal_Type,valueField:"key",readOnly:j,displayField:"value",values:M.values,required:!0,onChange:(e,r)=>{M.setFieldValue("dispersalMode",null==r?void 0:r.key)},error:M.touched.dispersalMode&&!!M.errors.dispersalMode})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{endpointId:m.N.FeeSchedule.qry,parameters:"_startAt=0&_pageSize=50&filter=",name:"scheduleId",label:r.schedule,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:M.values,required:!0,readOnly:!1,maxAccess:d,onChange:(e,r)=>{M.setFieldValue("scheduleId",(null==r?void 0:r.recordId)||null)},error:M.touched.scheduleId&&!!M.errors.scheduleId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{datasetId:_.v.FEE_PAYER,name:"feePayer",label:r.feePayer,valueField:"key",displayField:"value",values:M.values,onChange:(e,r)=>{M.setFieldValue("feePayer",r?null==r?void 0:r.key:"")},required:!0,maxAccess:d,error:M.touched.feePayer&&!!M.errors.feePayer})})]})})})})}var w=d(36908),P=()=>{let{getRequest:e,postRequest:r}=(0,s.useContext)(i.$),{platformLabels:d}=(0,s.useContext)(p.l),{stack:I}=(0,f.zY)();async function x(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:d=0,_pageSize:a=50,params:s}=r;return{...await e({extension:m.N.FeeScheduleInwards.page,parameters:"_startAt=".concat(d,"&_pageSize=").concat(a,"&_params=").concat(s||"")}),_startAt:d}}async function y(e){let{filters:r,pagination:d}=e;return x({_startAt:d._startAt||0,params:null==r?void 0:r.params})}let{query:{data:v},labels:F,paginationParameters:g,filterBy:N,refetch:_,invalidate:P,access:M}=(0,c.J)({queryFn:x,extension:m.N.FeeScheduleInwards.page,datasetId:t.i.FeeScheduleInwardsMap,filter:{filterFn:y}}),j=[{field:"corRef",headerName:F.corRef,flex:1},{field:"corName",headerName:F.corName,flex:1},{field:"dispersalModeName",headerName:F.dispersalMode,flex:1},{field:"scheduleName",headerName:F.schedule,flex:1},{field:"feePayerName",headerName:F.feePayer,flex:1}],Z=async e=>{await r({extension:m.N.FeeScheduleInwards.del,record:JSON.stringify(e)}),P(),l.ZP.success(d.Deleted)};function A(e){I({Component:S,props:{labels:F,record:e,maxAccess:M,recordId:e?String(e.corId)+String(e.dispersalMode):null},width:700,height:350,title:F.fsim})}return(0,a.jsxs)(o.R,{children:[(0,a.jsx)(u.g,{children:(0,a.jsx)(w.Z,{labels:F,onAdd:()=>{A()},maxAccess:M,reportName:"RTFSI",filterBy:N,hasSearch:!1})}),(0,a.jsx)(h.Q,{children:(0,a.jsx)(n.Z,{name:"table",columns:j,gridData:v,rowId:["recordId"],onEdit:e=>{A(e)},onDelete:Z,isLoading:!1,pageSize:50,paginationParameters:g,refetch:_,paginationType:"api",maxAccess:M})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=59958)}),_N_E=e.O()}]);