(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4821],{5199:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/system-functions",function(){return a(62801)}])},62801:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return x}});var r=a(52322),t=a(2784),s=a(62202),o=a(65950),l=a(38449),i=a(71987),u=a(26612),c=a(80983),d=a(31389),m=a(62362),f=a(76399),p=a(19473),v=a(33625),h=a(5088),w=a(84100),g=a(54074),y=a(60218),x=()=>{var e;let{getRequest:n,postRequest:a}=(0,t.useContext)(o.$),{platformLabels:x}=(0,t.useContext)(p.l),N=async()=>{let e=await n({extension:l.r.SystemFunction.qry,parameters:"_filter="});I.setValues({...I.values,rows:e.list.map((e,n)=>{let{integrationLevel:a,...r}=e;return{id:n+1,integrationLevel:null!=a?a:"1",...r}})})},{labels:_,access:b}=(0,i.J)({queryFn:N,datasetId:u.i.SystemFunction}),{formik:I}=(0,c.c)({maxAccess:b,initialValues:{search:"",rows:[{id:1,functionId:"",sfName:"",nraId:"",nraRef:"",integrationLevel:"",integrationLevelName:""}]},onSubmit:async()=>{let e={systemFunctionMappings:I.values.rows};await a({extension:l.r.SystemFunction.set2,record:JSON.stringify(e)}),await N(),s.ZP.success(x.Updated)}}),L=[{component:"textfield",label:_.functionId,name:"functionId",props:{readOnly:!0,type:"number"}},{component:"textfield",label:_.name,name:"sfName",props:{readOnly:!0}},{component:"resourcelookup",label:_.numberRange,name:"nraRef",props:{endpointId:l.r.NumberRange.snapshot,displayField:"reference",valueField:"recordId",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"description",value:"Name"}],mapping:[{from:"recordId",to:"nraId"},{from:"reference",to:"nraRef"},{from:"name",to:"nraName"}]}},{component:"resourcecombobox",name:"integrationLevel",label:_.integrationLevel,props:{datasetId:w.v.GLI_INTEGRATION_LEVEL,valueField:"key",displayField:"value",mapping:[{from:"key",to:"integrationLevel"},{from:"value",to:"integrationLevelName"}]}}],F=I.values.search?I.values.rows.filter(e=>{var n;return e.functionId.toString().includes(I.values.search.toLowerCase())||(null===(n=e.sfName)||void 0===n?void 0:n.toLowerCase().includes(I.values.search.toLowerCase()))}):I.values.rows;return(0,r.jsx)(g.Z,{onSave:I.handleSubmit,maxAccess:b,fullSize:!0,children:(0,r.jsxs)(d.R,{children:[(0,r.jsx)(v.g,{children:(0,r.jsx)(y.ZP,{container:!0,children:(0,r.jsx)(y.ZP,{item:!0,xs:3,spacing:2,p:2,children:(0,r.jsx)(h.Z,{name:"search",value:I.values.search,label:x.Search,onClear:()=>{I.setFieldValue("search","")},onChange:e=>{let{value:n}=e.target;I.setFieldValue("search",n)},onSearch:e=>I.setFieldValue("search",e),search:!0,height:35})})})}),(0,r.jsx)(m.Q,{children:(0,r.jsx)(f._,{onChange:e=>(function(e){let n=I.values.rows.map(n=>e.find(e=>e.id===n.id)||n);I.setFieldValue("rows",n)})(e),value:F,error:null===(e=I.errors)||void 0===e?void 0:e.rows,columns:L,allowDelete:!1,allowAddNewLine:!1})})]})})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=5199)}),_N_E=e.O()}]);