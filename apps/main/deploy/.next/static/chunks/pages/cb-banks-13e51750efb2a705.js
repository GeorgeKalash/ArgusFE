(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{94123:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cb-banks",function(){return r(16303)}])},16303:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(52322),s=r(2784),n=r(62202),o=r(69387),d=r(27723),l=r(65950),c=r(2119),i=r(60218),u=r(48601),C=r(82737),m=r(71987),p=r(26612),f=r(5088),g=r(31389),y=r(62362),h=r(8661),b=r(38449),I=r(80983),x=r(91406),v=r(19473);function q(e){let{labels:t,maxAccess:r,store:o,setStore:d}=e,{recordId:q}=o,{getRequest:_,postRequest:P}=(0,s.useContext)(l.$),{platformLabels:R}=(0,s.useContext)(v.l),S=(0,m.E)({endpointId:c.G.CbBank.page}),{formik:T}=(0,I.c)({initialValues:{recordId:q,reference:"",name:"",swiftCode:"",accNoLength:"",countryId:""},maxAccess:r,validateOnChange:!0,validationSchema:u.Ry({name:u.Z_().required(),reference:u.Z_().required(),swiftCode:u.Z_().required(),countryId:u.Z_().required()}),onSubmit:async e=>{let t=await P({extension:c.G.CbBank.set,record:JSON.stringify(e)});e.recordId||T.setValues({...e,recordId:t.recordId}),e.recordId||d({recordId:t.recordId,name:e.name}),n.ZP.success(e.recordId?R.Edited:R.Added),S()}}),A=!!T.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(q){let e=await _({extension:c.G.CbBank.get,parameters:"_recordId=".concat(q)});T.setValues(e.record),d({recordId:e.record.recordId,name:e.record.name})}}()},[q]),(0,a.jsx)(C.Z,{resourceId:p.i.CbBanks,form:T,maxAccess:r,editMode:A,children:(0,a.jsx)(g.R,{children:(0,a.jsx)(y.Q,{children:(0,a.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(i.ZP,{item:!0,xs:12,children:(0,a.jsx)(f.Z,{name:"reference",label:t.reference,value:T.values.reference,required:!0,maxAccess:r,maxLength:"20",onChange:T.handleChange,onClear:()=>T.setFieldValue("reference",""),error:T.touched.reference&&!!T.errors.reference})}),(0,a.jsx)(i.ZP,{item:!0,xs:12,children:(0,a.jsx)(f.Z,{name:"name",label:t.name,value:T.values.name,required:!0,maxAccess:r,maxLength:"30",onChange:T.handleChange,onClear:()=>T.setFieldValue("name",""),error:T.touched.name&&!!T.errors.name})}),(0,a.jsx)(i.ZP,{item:!0,xs:12,children:(0,a.jsx)(f.Z,{name:"swiftCode",label:t.swiftCode,value:T.values.swiftCode,maxLength:"20",required:!0,maxAccess:r,onChange:T.handleChange,onClear:()=>T.setFieldValue("swiftCode",""),error:T.touched.swiftCode&&!!T.errors.swiftCode})}),(0,a.jsx)(i.ZP,{item:!0,xs:12,children:(0,a.jsx)(x.Z,{name:"accNoLength",label:t.accNoLength,value:T.values.accNoLength,onChange:T.handleChange,onClear:()=>T.setFieldValue("accNoLength",""),error:T.touched.accNoLength&&!!T.errors.accNoLength})}),(0,a.jsx)(i.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{endpointId:b.r.Country.qry,name:"countryId",required:!0,label:t.Country,valueField:"recordId",displayField:["reference","name","flName"],columnsInDropDown:[{key:"reference",value:"reference"},{key:"name",value:"name"},{key:"flName",value:"flName"}],values:T.values,maxAccess:r,onChange:(e,t)=>{T.setFieldValue("countryId",(null==t?void 0:t.recordId)||null)},error:T.touched.countryId&&!!T.errors.countryId})})]})})})})}var _=r(9522),P=r(29326),R=r(89119),S=e=>{let{labels:t,maxAccess:r,recordId:n}=e,[o,d]=(0,s.useState)(0),[l,c]=(0,s.useState)({recordId:n,name:null}),i=[{label:null==t?void 0:t.bank},{label:null==t?void 0:t.interface,disabled:!l.recordId}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Y,{tabs:i,activeTab:o,setActiveTab:d,maxAccess:r}),(0,a.jsx)(P.Z,{index:0,value:o,maxAccess:r,children:(0,a.jsx)(q,{labels:t,maxAccess:r,store:l,setStore:c})}),(0,a.jsx)(P.Z,{index:1,value:o,maxAccess:r,children:(0,a.jsx)(R.V,{labels:t,resourceId:p.i.CbBanks,recordId:l.recordId,maxAccess:r,name:l.name})})]})},T=r(61802),A=r(33625),N=()=>{let{getRequest:e,postRequest:t}=(0,s.useContext)(l.$),{platformLabels:r}=(0,s.useContext)(v.l),{stack:i}=(0,T.zY)();async function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50}=t;return{...await e({extension:c.G.CbBank.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a,"&filter=")}),_startAt:r}}let{query:{data:C},labels:f,invalidate:h,access:b}=(0,m.J)({queryFn:u,endpointId:c.G.CbBank.page,datasetId:p.i.CbBanks}),I=[{field:"reference",headerName:f.reference,flex:1},{field:"name",headerName:f.name,flex:1},{field:"swiftCode",headerName:f.swiftCode,flex:1},{field:"countryRef",headerName:f.Country,flex:1}];function x(e){i({Component:S,props:{labels:f,recordId:e,maxAccess:b},width:600,height:500,title:f.bank})}let q=async e=>{await t({extension:c.G.CbBank.del,record:JSON.stringify(e)}),h(),n.ZP.success(r.Deleted)};return(0,a.jsxs)(g.R,{children:[(0,a.jsx)(A.g,{children:(0,a.jsx)(d.Z,{onAdd:()=>{x()},maxAccess:b})}),(0,a.jsx)(y.Q,{children:(0,a.jsx)(o.Z,{columns:I,gridData:C,rowId:["recordId"],onEdit:e=>{x(e.recordId)},onDelete:q,isLoading:!1,pageSize:50,paginationType:"api",maxAccess:b})})]})}},53621:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});let a="RTSET.asmx/",s={Interface:{qry:a+"qryITF",page:a+"pageITF",get:a+"getITF",set:a+"setITF",del:a+"delITF"},ProductMaster:{qry:a+"qryPRO",page:a+"pagePRO",get:a+"getPRO",set:a+"setPRO",del:a+"delPRO",snapshot:a+"snapshotPRO"},ProductCountries:{qry:a+"qryPCO",set2:a+"set2PCO"},ProductMonetaries:{qry:a+"qryPMO",set2:a+"set2PMO"},ProductDispersal:{qry:a+"qryPDI",get:a+"getPDI",set:a+"setPDI",del:a+"delPDI"},ProductSchedules:{qry:a+"qryPSC",set2:a+"set2PSC"},ProductScheduleRanges:{qry:a+"qryPSR",set2:a+"set2PSR"},ProductScheduleFees:{qry:a+"qryPSF",set2:a+"set2PSF"},ProductDispersalAgents:{qry:a+"qryPDA",set2:a+"set2PDA"},Correspondent:{page:a+"pageCOR",qry:a+"qryCOR",qry2:a+"qry2COR",get:a+"getCOR",set:a+"setCOR",del:a+"delCOR",snapshot:a+"snapshotCOR"},CorrespondentCountry:{qry:a+"qryCCO",get:a+"getCCO",set2:a+"set2CCO",del:a+"delCCO"},CorrespondentCurrency:{qry:a+"qryCCU",get:a+"getCCU",set2:a+"set2CCU",del:a+"delCCU"},CorrespondentAgents:{qry:a+"qryAGT",page:a+"pageAGT",get:a+"getAGT",set:a+"setAGT",del:a+"delAGT"},CorrespondentAgentBranches:{qry:a+"qryABR",page:a+"pageABR",get:a+"getABR",set:a+"setABR",del:a+"delABR"},CorrespondentExchangeMap:{qry:a+"qryEXC",set2:a+"set2EXC"},CurrencyExchangeMap:{qry:a+"qryEXG",set2:a+"set2EXG"},CorrespondentExchangeBuyMap:{qry:a+"qryEXB",set2:a+"set2EXB"},ExchangeRates:{get:a+"getEXB",qry:a+"qryEXG2",set2:a+"set2EXB"},RtDefault:{qry:a+"qryDE",set2:a+"set2DE"},Profession:{qry:a+"qryPFN",page:a+"pagePFN",get:a+"getPFN",set:a+"setPFN",del:a+"delPFN",snapshot:a+"snapshotPFN"},ClientIndividual:{qry:a+"qryCLI"},SalaryRange:{qry:a+"qrySRA",page:a+"pageSRA",get:a+"getSRA",set:a+"setSRA",del:a+"delSRA"},SourceOfIncome:{qry:a+"qrySI",page:a+"pageSI",snapshot:a+"snapshotSI",get:a+"getSI",set:a+"setSI",del:a+"delSI"},CorrespondentControl:{qry:a+"qryCCL",set:a+"set2CCL"},InterfaceMaps:{qry:a+"qryIFM",get:a+"getIFM",set2:a+"set2IFM"},SourceOfIncomeType:{qry:a+"qrySIT",snapshot:a+"snapshotSIT",page:a+"pageSIT",get:a+"getSIT",set:a+"setSIT",del:a+"delSIT"},ProfessionGroups:{qry:a+"qryPFG",page:a+"pagePFG",snapshot:a+"snapshotPFG",get:a+"getPFG",set:a+"setPFG",del:a+"delPFG"},CorrespondentGroup:{qry:a+"qryCGP",page:a+"pageCGP",get:a+"getCGP",set:a+"setCGP",del:a+"delCGP"},ExtraIncome:{qry:a+"qryEI",get:a+"getEI",del:a+"delEI",page:a+"pageEI",snapshot:a+"snapshotEI",set:a+"setEI"},CountryRisk:{page:a+"pageCOU",get:a+"getCOU",set:a+"setCOU",del:a+"delCOU"},CorDispControl:{qry:a+"qryCDC",set2:a+"set2CDC"},CorrespondentDispersal:{qry:a+"qryCDM",get:a+"getCDM",del:a+"delCDM",set2:a+"set2CDM"},CorrespondentDispersalRate:{qry:a+"qryCDR",set2:a+"set2CDR"}}},29326:function(e,t,r){"use strict";var a=r(52322);r(2784);var s=r(23925),n=r(13980),o=r.n(n),d=r(95291),l=r.n(d),c=r(65947);let i=e=>{var t,r,n;let{children:o,value:d,index:i,maxAccess:u,...C}=e,m="".concat(e.name||"tab",".").concat(i),{accessLevel:p}=null!==(n=(null!==(r=null==u?void 0:null===(t=u.record)||void 0===t?void 0:t.controls)&&void 0!==r?r:[]).find(e=>e.controlId===m))&&void 0!==n?n:{accessLevel:0};if(p===c.A1)return null;let f=d===i;return(0,a.jsx)(s.Z,{role:"tabpanel",hidden:!f,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),className:"".concat(l().tabPanel," ").concat(f?l().active:l().hidden),...C,children:o})};i.propTypes={children:o().node,index:o().number.isRequired,value:o().number.isRequired},t.Z=i},9522:function(e,t,r){"use strict";r.d(t,{Y:function(){return C}});var a=r(52322),s=r(23925),n=r(54582),o=r(68696),d=r(44258),l=r(2784),c=r(99266),i=r(52614),u=r.n(i);let C=e=>{var t,r,i,C,m;let{tabs:p,activeTab:f,setActiveTab:g,maxAccess:y,name:h="tab"}=e,b=(null==y?void 0:null===(r=y.record)||void 0===r?void 0:null===(t=r.controls)||void 0===t?void 0:t.filter(e=>{var t;return 4===e.accessLevel&&(null===(t=e.controlId)||void 0===t?void 0:t.startsWith("".concat(h,".")))}).map(e=>e.controlId.split(".")[1]))||[],I=null==p?void 0:null===(i=p.map((e,t)=>({...e,id:t})))||void 0===i?void 0:i.filter((e,t)=>!b.includes(String(t))),x=null===(C=I[f])||void 0===C?void 0:C.id,v=null===(m=I[f])||void 0===m?void 0:m.disabled;return(0,l.useEffect)(()=>{x>=0&&!v&&f!=x&&g(x)},[]),(0,a.jsx)(s.Z,{className:u().tabsContainer,children:(0,a.jsx)(s.Z,{className:u().tabsWrapper,children:(0,a.jsx)(n.Z,{value:f,onChange:(e,t)=>g(t),variant:"scrollable",scrollButtons:I.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==I?void 0:I.map(e=>(0,a.jsx)(o.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,a.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)("span",{children:e.label}),e.id===f&&(null==e?void 0:e.onRefetch)&&(0,a.jsx)(d.Z,{size:"small",className:u().refreshButton,onClick:t=>{t.stopPropagation(),e.onRefetch()},children:(0,a.jsx)(c.Z,{className:u().refreshIcon})})]})},e.id))})})})}},89119:function(e,t,r){"use strict";r.d(t,{V:function(){return b}});var a=r(52322),s=r(2784),n=r(65950),o=r(49864),d=r(50023),l=r(26612),c=r(62202),i=r(76399),u=r(80983),C=r(84100),m=r(53621),p=r(80968),f=r(5088),g=r(62362),y=r(31389),h=r(54074);let b=e=>{let{recordId:t,resourceId:r,name:b}=e,{getRequest:I,postRequest:x}=(0,s.useContext)(n.$),{getAllKvsByDataset:v}=(0,s.useContext)(p.k),{labels:q,access:_}=(0,d.Z)({datasetId:l.i.InterfaceMap,editMode:!!t}),{formik:P}=(0,u.c)({initialValues:{rows:[{id:1,recordId:t,resourceId:l.i.resourceId,interfaceId:"",interfaceName:"",reference:""}]},validateOnChange:!0,onSubmit:async e=>{let a=P.values.rows.map(e=>({recordId:t,resourceId:r,...e})),s=a.every(e=>""===e.interfaceId);(await x({extension:m.d.InterfaceMaps.set2,record:JSON.stringify({recordId:t,resourceId:r,items:s?[]:a})})).recordId&&c.ZP.success("Record Successfully")}});async function R(){return new Promise((e,t)=>{v({_dataset:C.v.ALL_INTERFACES,callback:r=>{r?e(r):t()}})})}(0,s.useEffect)(()=>{!async function(){if(t){let e=await R(),a=await I({extension:m.d.InterfaceMaps.qry,parameters:"_recordId=".concat(t,"&_resourceId=").concat(r)}),s=e.map(e=>{let t={interfaceId:e.key,interfaceName:e.value,reference:""},r=a.list.find(e=>t.interfaceId==e.interfaceId);return r&&(t.reference=r.reference),t});P.setValues({...P.values,rows:s.map((e,t)=>({...e,id:t+1}))})}}()},[t]);let S=[{component:"resourcecombobox",label:q.interface,name:"interfaceId",props:{readOnly:!0,datasetId:C.v.ALL_INTERFACES,valueField:"key",displayField:"value",displayFieldWidth:2,mapping:[{from:"key",to:"interfaceId"},{from:"value",to:"interfaceName"}]}},{component:"textfield",label:q.reference,name:"reference"}];return(0,a.jsx)(h.Z,{onSave:P.handleSubmit,maxAccess:_,editMode:!0,children:(0,a.jsx)(y.R,{children:(0,a.jsxs)(g.Q,{children:[(0,a.jsx)(o.Z,{sx:{width:"50%"},children:(0,a.jsx)(f.Z,{label:q.name,value:b,readOnly:!0})}),(0,a.jsx)(i._,{onChange:e=>P.setFieldValue("rows",e),value:P.values.rows,error:P.errors.rows,columns:S,allowDelete:!1})]})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=94123)}),_N_E=e.O()}]);