(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88945],{79029:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resignation-request",function(){return t(44404)}])},44404:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return I}});var n=t(52322),a=t(2784),r=t(71987),i=t(65950),s=t(69387),o=t(62202),d=t(61802),c=t(26612),u=t(31389),v=t(33625),p=t(62362),m=t(19473),g=t(92407),y=t(73470),f=t(27723),x=t(98345),h=t(7121),I=()=>{let{postRequest:e,getRequest:l}=(0,a.useContext)(i.$),{platformLabels:t}=(0,a.useContext)(m.l),{stack:I}=(0,d.zY)(),{query:{data:R},refetch:D,labels:S,access:q,paginationParameters:w,invalidate:b}=(0,r.J)({queryFn:C,endpointId:g.y.ResignationRequest.page,datasetId:c.i.ResignationRequest}),E=[{field:"reference",headerName:S.reference,flex:1},{field:"employeeName",headerName:S.employeeName,flex:1},{field:"date",headerName:S.date,flex:1,type:"date"},{field:"reasonName",headerName:S.reason,flex:1},{field:"statusName",headerName:S.status,flex:1},{field:"rsName",headerName:S.statusRelease,flex:1},{field:"wipName",headerName:S.wip,flex:1}];async function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:n=50,params:a=[]}=e;return{...await l({extension:g.y.ResignationRequest.page,parameters:"_startAt=".concat(t,"&_size=").concat(n,"&_params=").concat(a,"&_sortBy=recordId&filter=")}),_startAt:t}}let{proxyAction:P}=(0,x.G)({functionId:h.J.ResignationRequest,action:N}),Z=async()=>{await P()};async function N(e){I({Component:y.Z,props:{recordId:e}})}let T=async l=>{await e({extension:g.y.ResignationRequest.del,record:JSON.stringify(l)}),b(),o.ZP.success(t.Deleted)};return(0,n.jsxs)(u.R,{children:[(0,n.jsx)(v.g,{children:(0,n.jsx)(f.Z,{onAdd:Z,maxAccess:q})}),(0,n.jsx)(p.Q,{children:(0,n.jsx)(s.Z,{name:"resReqTable",columns:E,gridData:R,rowId:["recordId"],onEdit:e=>{N(e.recordId)},refetch:D,onDelete:T,deleteConfirmationType:"strict",pageSize:50,maxAccess:q,paginationParameters:w,paginationType:"api"})})]})}},92407:function(e,l,t){"use strict";t.d(l,{y:function(){return a}});let n="EP.asmx/",a={Employee:{snapshot:n+"snapshotEM",get1:n+"getEM1",set:n+"setEM",del:n+"delEM"},CertificateFilters:{qry:n+"qryCL",get:n+"getCL",set:n+"setCL",del:n+"delCL",page:n+"pageCL"},HRDocTypeFilters:{qry:n+"qryDT"},SalaryChangeReason:{qry:n+"qrySC",get:n+"getSC",set:n+"setSC",del:n+"delSC",page:n+"pageSC"},EmploymentStatusFilters:{qry:n+"qryST",page:n+"pageST",set:n+"setST",get:n+"getST",del:n+"delST"},SponsorFilters:{qry:n+"qrySP",page:n+"pageSP",set:n+"setSP",get:n+"getSP",del:n+"delSP"},RelationshipTypes:{page:n+"pageRT",set:n+"setRT",get:n+"getRT",del:n+"delRT"},BonusTypes:{get:n+"getBT",set:n+"setBT",page:n+"pageBT",del:n+"delBT"},BgCheck:{page:n+"pageCT",set:n+"setCT",get:n+"getCT",del:n+"delCT"},NoticePeriods:{get:n+"getNP",set:n+"setNP",del:n+"delNP",qry:n+"qryNP",page:n+"pageNP"},CustomProperties:{get:n+"getUP",set:n+"setUP",del:n+"delUP",page:n+"pageUP",qry:n+"qryUP"},ResignationRequest:{get:n+"getRR",set:n+"setRR",del:n+"delRR",page:n+"pageRR",close:n+"closeRR",reopen:n+"reopenRR"},TerminationReasons:{qry:n+"qryTR",get:n+"getTR",set:n+"setTR",del:n+"delTR",page:n+"pageTR"},JobInfo:{snapshot:n+"snapshotJI",page:n+"pageJI",close:n+"closeJI",reopen:n+"reopenJI",get:n+"getJI",set:n+"setJI",del:n+"delJI",qry:n+"qryJI"},QuickView:{get:n+"getQV"},EmployeePenalty:{page:n+"pagePE",close:n+"closePE",reopen:n+"reopenPE",get:n+"getPE",set:n+"setPE",del:n+"delPE"},EmployeeDeduction:{qry:n+"qryED",page:n+"pageED",del:n+"delED",get:n+"getED",set:n+"setED",snapshot:n+"snapshotED"},FullName:{sync:n+"syncFullName"},EmployeeChart:{page:n+"pageES",qry:n+"qryES",qry2:n+"qryES2"},EmployeeSalary:{qry:n+"qrySA",get:n+"getSA",set:n+"setSA",del:n+"delSA"},SalaryDetails:{qry:n+"qrySD",get:n+"getSD",set2:n+"set2SD",del:n+"delSD"},TerminationEmployee:{get:n+"getTE"},EmployementHistory:{qry:n+"qryEH",del:n+"delEH",get:n+"getEH",set:n+"setEH"},Hiring:{get:n+"getRE",set:n+"setRE"},Skills:{qry:n+"qryCE",del:n+"delCE",get:n+"getCE",set:n+"setCE"},UserDefined:{qry:n+"qryUV",set2:n+"set2UV"},Leaves:{set:n+"setLS",del:n+"delLS",get:n+"getLS"}}},1685:function(e,l,t){"use strict";t.d(l,{m:function(){return n}});let n=e=>{let l=window.sessionStorage.getItem(e);return l?JSON.parse(l):null}},98345:function(e,l,t){"use strict";t.d(l,{H:function(){return g},G:function(){return m}});var n=t(45300),a=t(2784),r=t(96026),i=t(38449);t(26612);var s=t(65947),o=t(1685);let d=async(e,l,t)=>{try{let n=await e({extension:l,parameters:t});return l.includes("qry")?n:n.record}catch(e){return null}},c=(e,l,t,n)=>{let a=(e=JSON.parse(JSON.stringify(e))).record.controls,r=a.find(e=>"reference"===e.controlId);return r?r.accessLevel=(null==l?void 0:l.mandatory)?s.$7:s.rr:(null==l?void 0:l.mandatory)?a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==l?void 0:l.mandatory)?s.$7:s.rr}):(null==l?void 0:l.readOnly)?a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==l?void 0:l.readOnly)?s.rr:s.$7}):a=e.record.controls.filter(e=>"reference"!=e.controlId),t&&a.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","dtId"),accessLevel:s.$7}),{...e,record:{...e.record,controls:a}}},u=async(e,l,t)=>{let n,a;switch(t){case"dtId":let r=(0,o.m)("userData"),s=null==r?void 0:r.userId;a="_userId=".concat(s,"&_functionId=").concat(l),n=i.r.UserFunction.get;break;case"glbSysNumberRange":a="_recordId=".concat(l),n=i.r.SystemFunction.get;break;case"DocumentType":a="_dgId=".concat(l,"&_startAt=",0,"&_pageSize=",50),n=i.r.DocumentType.qry;break;case"DcTypNumberRange":a="_recordId=".concat(l),n=i.r.DocumentType.get;break;case"isExternal":a="_recordId=".concat(l),n=i.r.NumberRange.get;break;default:return null}return await d(e,n,a)},v=async function(e){let l,t,n,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],d=arguments.length>5?arguments[5]:void 0,v=void 0===s&&r&&await u(e,r,"dtId"),p=null==v?void 0:v.dtId,m="",g=!0;if(v&&void 0===s||"nraId"===s){if(p){let t=await u(e,p,"DcTypNumberRange");l=null==t?void 0:t.nraId,g=!((null==t?void 0:t.activeStatus)<0),l||(m="Assign the document type to a number range")}if((!p||!g)&&o&&r){var y;let l=await u(e,r,"DocumentType");a=(null==l?void 0:null===(y=l.list)||void 0===y?void 0:y.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===s||void 0===s)&&r){if((!p||p)&&!l||l&&!g){let t=await u(e,r,"glbSysNumberRange");(l=null==t?void 0:t.nraId)&&a&&(a=!1),g=!0}m=l||a?"":"Assign the system Function to a number range"}s>0&&!l&&(l=s),l&&g?(t={readOnly:null==(n=await u(e,l,"isExternal"))||!n.external,mandatory:null!=n&&!!n.external},i&&(i=await c(i,t,a,d))):!l&&i&&(i=await c(i,t,a,d));let f=d?"".concat(d,".reference"):"reference";return{dtId:p,resetReference:null==t?void 0:t.readOnly,dcTypeRequired:a,reference:{fieldName:f,isEmpty:(null==n?void 0:n.external)!==void 0&&(null==n||!n.external)},errorMessage:m,maxAccess:i,selectNraId:s}};var p=t(65950);function m(e){let{functionId:l,action:t,hasDT:n}=e,{getRequest:i}=(0,a.useContext)(p.$),{stack:s}=(0,r.V)();return{proxyAction:async()=>{let e=await v(i,l,"",void 0,n);(null==e?void 0:e.errorMessage)?s({message:null==e?void 0:e.errorMessage}):await t()}}}function g(e){var l;let{functionId:t,access:i,hasDT:s,enabled:o=!0,objectName:d=""}=e,{getRequest:c}=(0,a.useContext)(p.$),{stack:u}=(0,r.V)(),[m,g]=(0,a.useState)(),y=async e=>{let l=await v(c,t,i,e,s,d);if(!l.errorMessage)return l;u({message:null==l?void 0:l.errorMessage})},f=(0,n.a)({retry:!1,staleTime:0,enabled:o,queryKey:[t,m,!!i,o],queryFn:m||"nraId"===m?()=>y(m):()=>y()});return{documentType:f.data,maxAccess:(null==f?void 0:null===(l=f.data)||void 0===l?void 0:l.maxAccess)||i,changeDT(e){g((null==e?void 0:e.nraId)||"nraId")}}}},75991:function(e,l,t){"use strict";var n=t(52322),a=t(60218),r=t(76385);l.Z=e=>{let{children:l,title:t,form:i=!1,...s}=e;return(0,n.jsxs)(a.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:t?{xs:.75,sm:1,md:1.25}:0,p:i?0:"clamp(8px, 0.8vw, 14px)",pt:i?0:t?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...s.sx},children:[!!t&&(0,n.jsx)(r.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:t}),l]})}},73470:function(e,l,t){"use strict";t.d(l,{Z:function(){return Z}});var n=t(52322),a=t(89330),r=t(39812),i=t(60218),s=t(2784),o=t(48601),d=t(82737),c=t(62202),u=t(65950),v=t(71987),p=t(26612),m=t(5088),g=t(21581),y=t(8661),f=t(7121),x=t(27423),h=t(62362),I=t(31389),R=t(91406),D=t(80983),S=t(19473),q=t(92407),w=t(75991),b=t(68676),E=t(96026),C=t(21326),P=t(50023);function Z(e){var l,t,Z,N,T,F,j,V,O;let{recordId:_,window:A}=e,{getRequest:k,postRequest:J}=(0,s.useContext)(u.$),{platformLabels:L}=(0,s.useContext)(S.l),{stack:U}=(0,E.V)(),{labels:M,access:H}=(0,P.Z)({datasetId:p.i.ResignationRequest,editMode:!!_});(0,C.Z)({title:M.ResignationReq,window:A});let $=(0,v.E)({endpointId:q.y.ResignationRequest.page}),{formik:B}=(0,D.c)({maxAccess:H,initialValues:{recordId:_||null,reference:"",date:new Date,effectiveDate:null,employeeId:null,department:null,position:null,branch:null,hireDate:null,serviceDuration:null,netSalary:null,explanation:"",status:1,wip:1,reasonId:null,releaseStatus:null},validateOnChange:!0,validationSchema:o.Ry({employeeId:o.Rx().required(),effectiveDate:o.hT().required(),date:o.hT().required(),reasonId:o.Rx().required()}),onSubmit:async e=>{let{hireDate:l,department:t,position:n,branch:a,serviceDuration:i,netSalary:s,...o}=e;J({extension:q.y.ResignationRequest.set,record:JSON.stringify({...o,date:(0,r.OZ)(new Date(e.date)),effectiveDate:(0,r.OZ)(new Date(e.effectiveDate))})}).then(async e=>{c.ZP.success(_?L.Edited:L.Added),B.setFieldValue("recordId",e.recordId),await Q(e.recordId),$()})}});function Q(e){k({extension:q.y.ResignationRequest.get,parameters:"_recordId=".concat(e)}).then(e=>{!function(e){k({extension:q.y.QuickView.get,parameters:"_recordId=".concat(null==e?void 0:e.employeeId,"&_asOfDate=").concat((0,r.Uf)((0,r.a1)(null==e?void 0:e.date)))}).then(l=>{var t,n,a,i,s,o;B.setValues({...B.values,...e,effectiveDate:(0,r.a1)(null==e?void 0:e.effectiveDate),date:(0,r.a1)(null==e?void 0:e.date),hireDate:(0,r.a1)(null==l?void 0:null===(t=l.record)||void 0===t?void 0:t.hireDate),department:null==l?void 0:null===(n=l.record)||void 0===n?void 0:n.departmentName,position:null==l?void 0:null===(a=l.record)||void 0===a?void 0:a.positionName,branch:null==l?void 0:null===(i=l.record)||void 0===i?void 0:i.branchName,serviceDuration:null==l?void 0:null===(s=l.record)||void 0===s?void 0:s.serviceDuration,netSalary:null==l?void 0:null===(o=l.record)||void 0===o?void 0:o.salary})})}(e.record)})}async function z(e){if(e){var l;await k({extension:q.y.QuickView.get,parameters:"_recordId=".concat(e,"&_asOfDate=").concat((0,r.Uf)(null==B?void 0:null===(l=B.values)||void 0===l?void 0:l.date))}).then(e=>{var l,t,n,a,i,s;B.setFieldValue("hireDate",(0,r.a1)(null==e?void 0:null===(l=e.record)||void 0===l?void 0:l.hireDate)||null),B.setFieldValue("department",(null==e?void 0:null===(t=e.record)||void 0===t?void 0:t.departmentName)||null),B.setFieldValue("position",(null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.positionName)||null),B.setFieldValue("branch",(null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.branchName)||null),B.setFieldValue("serviceDuration",(null==e?void 0:null===(i=e.record)||void 0===i?void 0:i.serviceDuration)||null),B.setFieldValue("netSalary",(null==e?void 0:null===(s=e.record)||void 0===s?void 0:s.salary)||0)})}else B.setFieldValue("hireDate",null),B.setFieldValue("department",null),B.setFieldValue("position",null),B.setFieldValue("branch",null),B.setFieldValue("serviceDuration",null),B.setFieldValue("netSalary",null)}let G=!!B.values.recordId,W=2===B.values.wip;async function X(){var e,l;let{hireDate:t,department:n,position:a,branch:i,serviceDuration:s,netSalary:o,...d}=null==B?void 0:B.values;await J({extension:q.y.ResignationRequest.reopen,record:JSON.stringify({...d,date:(0,r.OZ)(new Date(null==B?void 0:null===(e=B.values)||void 0===e?void 0:e.date)),effectiveDate:(0,r.OZ)(new Date(null==B?void 0:null===(l=B.values)||void 0===l?void 0:l.effectiveDate))})}).then(()=>{var e;c.ZP.success(L.Reopened),$(),Q(null==B?void 0:null===(e=B.values)||void 0===e?void 0:e.recordId)})}let Y=[{key:"Close",condition:!W,onClick:async function(){var e,l;let{hireDate:t,department:n,position:a,branch:i,serviceDuration:s,netSalary:o,...d}=null==B?void 0:B.values;await J({extension:q.y.ResignationRequest.close,record:JSON.stringify({...d,date:(0,r.OZ)(new Date(null==B?void 0:null===(e=B.values)||void 0===e?void 0:e.date)),effectiveDate:(0,r.OZ)(new Date(null==B?void 0:null===(l=B.values)||void 0===l?void 0:l.effectiveDate))})}).then(()=>{var e;c.ZP.success(L.Closed),$(),Q(null==B?void 0:null===(e=B.values)||void 0===e?void 0:e.recordId)})},disabled:W||!G},{key:"Reopen",condition:W,onClick:async function(){var e,l;(null==B?void 0:null===(e=B.values)||void 0===e?void 0:e.releaseStatus)?await k({extension:b.y.ReleaseIndicator.get,parameters:"_recordId=".concat(null==B?void 0:null===(l=B.value)||void 0===l?void 0:l.releaseStatus)}).then(e=>{var l;(null==e?void 0:null===(l=e.record)||void 0===l?void 0:l.isReleased)?U({message:M.documentReleasedError}):X()}):X()},disabled:!W||!G},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!W}];return(0,s.useEffect)(()=>{_&&Q(_)},[]),(0,n.jsx)(d.Z,{resourceId:p.i.ResignationRequest,functionId:f.J.ResignationRequest,form:B,maxAccess:H,actions:Y,editMode:G,isClosed:W,disabledSubmit:W,children:(0,n.jsx)(I.R,{children:(0,n.jsx)(h.Q,{children:(0,n.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(i.ZP,{item:!0,xs:6,children:(0,n.jsx)(m.Z,{name:"reference",label:M.reference,value:null==B?void 0:null===(l=B.values)||void 0===l?void 0:l.reference,maxAccess:H,readOnly:!G||W,onChange:B.handleChange,onClear:()=>B.setFieldValue("reference",""),error:B.touched.reference&&!!B.errors.reference})}),(0,n.jsx)(i.ZP,{item:!0,xs:6,children:(0,n.jsx)(a.Z,{name:"effectiveDate",required:!0,label:M.effectiveDate,value:null==B?void 0:null===(t=B.values)||void 0===t?void 0:t.effectiveDate,onChange:B.setFieldValue,readOnly:W,maxAccess:H,onClear:()=>B.setFieldValue("effectiveDate",null),error:B.touched.effectiveDate&&!!B.errors.effectiveDate})}),(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsx)(x.U,{endpointId:q.y.Employee.snapshot,parameters:{_branchId:0},required:!0,form:B,filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeRef",readOnly:W,label:M.employee,secondFieldLabel:M.name,secondDisplayField:!0,secondValue:B.values.employeeName,onChange:(e,l)=>{B.setFieldValue("employeeId",(null==l?void 0:l.recordId)||null),B.setFieldValue("employeeRef",(null==l?void 0:l.reference)||null),B.setFieldValue("employeeName",(null==l?void 0:l.fullName)||null),z(null==l?void 0:l.recordId)},error:B.touched.employeeId&&!!B.errors.employeeId})}),(0,n.jsx)(i.ZP,{item:!0,xs:6,children:(0,n.jsx)(a.Z,{name:"date",required:!0,readOnly:W,label:M.date,value:null==B?void 0:null===(Z=B.values)||void 0===Z?void 0:Z.date,onChange:B.setFieldValue,maxAccess:H,onClear:()=>B.setFieldValue("date",null),error:B.touched.date&&!!B.errors.date})}),(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsxs)(w.Z,{title:M.jobInfo,children:[(0,n.jsx)(i.ZP,{item:!0,xs:6,children:(0,n.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{name:"department",label:M.department,value:null==B?void 0:null===(N=B.values)||void 0===N?void 0:N.department,maxAccess:H,readOnly:!0})}),(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{name:"position",label:M.position,value:null==B?void 0:null===(T=B.values)||void 0===T?void 0:T.position,maxAccess:H,readOnly:!0})}),(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{name:"branch",label:M.branch,value:null==B?void 0:null===(F=B.values)||void 0===F?void 0:F.branch,maxAccess:H,readOnly:!0})}),(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsx)(a.Z,{name:"hireDate",label:M.hireDate,value:null==B?void 0:null===(j=B.values)||void 0===j?void 0:j.hireDate,readOnly:!0,maxAccess:H})})]})}),(0,n.jsx)(i.ZP,{item:!0,xs:6,children:(0,n.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{name:"serviceDuration",label:M.YIS,value:null==B?void 0:null===(V=B.values)||void 0===V?void 0:V.serviceDuration,maxAccess:H,readOnly:!0})}),(0,n.jsx)(i.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{name:"netSalary",label:M.netSalary,value:null==B?void 0:null===(O=B.values)||void 0===O?void 0:O.netSalary,maxAccess:H,readOnly:!0})})]})})]})}),(0,n.jsx)(i.ZP,{item:!0,xs:6,children:(0,n.jsx)(y.Z,{endpointId:q.y.TerminationReasons.qry,name:"reasonId",label:M.reason,valueField:"recordId",required:!0,displayField:"name",readOnly:W,values:B.values,onChange:(e,l)=>{B.setFieldValue("reasonId",(null==l?void 0:l.recordId)||null)},error:B.touched.reasonId&&!!B.errors.reasonId,maxAccess:H})}),(0,n.jsx)(i.ZP,{item:!0,xs:7,children:(0,n.jsx)(g.Z,{name:"explanation",label:M.explanation,value:B.values.explanation,rows:3,readOnly:W,maxAccess:H,onChange:e=>B.setFieldValue("explanation",e.target.value),onClear:()=>B.setFieldValue("explanation",""),error:B.touched.explanation&&!!B.errors.explanation})})]})})})})}Z.width=850,Z.height=630}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=79029)}),_N_E=e.O()}]);