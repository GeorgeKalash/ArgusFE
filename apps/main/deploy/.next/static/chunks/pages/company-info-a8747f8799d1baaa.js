(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39599],{87321:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/company-info",function(){return l(68478)}])},68478:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return N}});var r=l(52322),a=l(60218),o=l(2784),t=l(5088),i=l(8661),s=l(50023),c=l(65950),d=l(38449),u=l(26612),v=l(62202),m=l(80983),f=l(2801),x=l(1685),h=l(31389),g=l(54074),N=()=>{var e,n,l,N,p,I,C,w;let _=(0,o.useRef)(),{getRequest:j,postRequest:b}=(0,o.useContext)(c.$),{labels:Z,access:y}=(0,s.Z)({datasetId:u.i.CompanyInfo});async function S(){let e=await j({extension:d.r.CompanyInfo.get,parameters:"_filter="});A.setValues({...A.values,name:e.record.name,webSite:e.record.taxNo,taxNo:e.record.taxNo,licenseNo:e.record.licenseNo,plantId:e.record.plantId,crNo:e.record.crNo,logoUrl:e.record.logoUrl,flName:e.record.flName})}(0,o.useEffect)(()=>{S()},[]);let{formik:A}=(0,m.c)({maxAccess:y,validateOnChange:!0,initialValues:{plantId:"",accountId:null===(e=(0,x.m)("userData"))||void 0===e?void 0:e.accountId,name:"",webSite:"",taxNo:"",licenseNo:"",crNo:"",logoUrl:"",flName:""},onSubmit:async e=>{await F(e)}}),F=async e=>{await b({extension:d.r.CompanyInfo.set,record:JSON.stringify({...e,attachment:null})}),_.current&&await _.current.submit(),v.ZP.success("Record Edited Successfully")};return(0,r.jsx)(g.Z,{onSave:A.handleSubmit,maxAccess:y,children:(0,r.jsx)(h.R,{children:(0,r.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(t.Z,{name:"accountId",label:Z.accountId,value:null===(n=A.values)||void 0===n?void 0:n.accountId,onChange:A.handleChange,readOnly:!0,maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(t.Z,{name:"name",label:Z.name,value:null===(l=A.values)||void 0===l?void 0:l.name,onChange:A.handleChange,onClear:()=>A.setFieldValue("posMsg",""),error:A.errors&&!!A.errors.posMsg,maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(t.Z,{name:"flName",label:Z.foreignLanguage,value:null===(N=A.values)||void 0===N?void 0:N.flName,onChange:A.handleChange,onClear:()=>A.setFieldValue("flName",""),error:A.errors&&!!A.errors.flName,maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(t.Z,{name:"taxNo",label:Z.taxNo,value:null===(p=A.values)||void 0===p?void 0:p.taxNo,onChange:A.handleChange,onClear:()=>A.setFieldValue("taxNo",""),error:A.errors&&!!A.errors.taxNo,maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(i.Z,{endpointId:d.r.Plant.qry,name:"plantId",label:Z.plant,valueField:"recordId",values:A.values,onChange:(e,n)=>{A.setFieldValue("plantId",(null==n?void 0:n.recordId)||"")},displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(t.Z,{name:"licenseNo",label:Z.licenseNo,value:null===(I=A.values)||void 0===I?void 0:I.licenseNo,onChange:A.handleChange,onClear:()=>A.setFieldValue("licenseNo",""),error:A.errors&&!!A.errors.licenseNo,maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(t.Z,{name:"crNo",label:Z.commercialRegister,value:null===(C=A.values)||void 0===C?void 0:C.crNo,onChange:A.handleChange,onClear:()=>A.setFieldValue("crNo",""),error:A.errors&&!!A.errors.crNo,maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(t.Z,{name:"webSite",label:Z.website,value:null===(w=A.values)||void 0===w?void 0:w.webSite,onChange:A.handleChange,onClear:()=>A.setFieldValue("webSite",""),error:A.errors&&!!A.errors.webSite,maxAccess:y})}),(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{ref:_,resourceId:u.i.CompanyInfo,seqNo:0,recordId:1})})]})})})}},1685:function(e,n,l){"use strict";l.d(n,{m:function(){return r}});let r=e=>{let n=window.sessionStorage.getItem(e);return n?JSON.parse(n):null}},2801:function(e,n,l){"use strict";var r=l(52322),a=l(23925),o=l(2784),t=l(80983),i=l(65950),s=l(38449),c=l(19473),d=l(35656),u=l(10498),v=l.n(u),m=l(69627);let f=(0,o.forwardRef)((e,n)=>{let{resourceId:u,error:f,seqNo:x,recordId:h,width:g=140,height:N=140,customWidth:p,customHeight:I,disabled:C=!1,isAbsolutePath:w=!1,parentImage:_}=e,j=(0,o.useRef)(null),b=(0,o.useRef)(null),Z=(0,o.useRef)({}),{getRequest:y,postRequest:S}=(0,o.useContext)(i.$),{platformLabels:A}=(0,o.useContext)(c.l),[F,P]=(0,o.useState)(""),V=null==_?void 0:_.recordId,R=null==_?void 0:_.resourceId,{formik:O}=(0,t.c)({initialValues:{}}),{width:k}=(0,d.d)(),D=k>=1680?1:k>=1600?.9:k<=1024?.7:.7+(k-1024)/576*.22000000000000008;(0,o.useImperativeHandle)(n,()=>({submit:E}));let E=()=>{var e,l,r,a,o,t,i,c,d,v,m,f;if(C)return;let x=(null==n?void 0:null===(e=n.current)||void 0===e?void 0:e.value)||h;if(w){if((null===(t=O.values)||void 0===t?void 0:null===(o=t.file)||void 0===o?void 0:o.name)||O.values.url){let e={...O.values,fileName:(null===(d=O.values.file)||void 0===d?void 0:d.name)||O.values.url,resourceId:u,recordId:x};return S({extension:s.r.Attachment.set2,record:JSON.stringify(e),file:null===(v=O.values)||void 0===v?void 0:v.file}).then(()=>J(x))}return F||null===(i=Z.current)||void 0===i||!i.fileName||(null===(c=O.values)||void 0===c?void 0:c.fileName)?void 0:S({extension:s.r.Attachment.del,record:JSON.stringify(Z.current)}).then(()=>J(x))}if(null===(l=O.values)||void 0===l?void 0:l.file){let e={...O.values,recordId:x};return S({extension:s.r.Attachment.set,record:JSON.stringify(e),file:null===(m=O.values)||void 0===m?void 0:m.file}).then(()=>J(x))}if(!F&&(null===(r=Z.current)||void 0===r?void 0:r.url)&&!(null===(a=O.values)||void 0===a?void 0:a.url))return S({extension:s.r.Attachment.del,record:JSON.stringify(Z.current),file:null===(f=Z.current)||void 0===f?void 0:f.url}).then(()=>J(x))},U=()=>{P(""),O.setValues({})},J=async e=>{let n=e||h;if(!u)return;if(w&&n){let e=await y({extension:s.r.Attachment.get2,parameters:"_resourceId=".concat(u,"&_seqNo=").concat(x,"&_recordId=").concat(n)}),l=(null==e?void 0:e.record)||{};O.setValues({...l,resourceId:u}),Z.current={...l,resourceId:u},P((null==l?void 0:l.fileName)?"".concat(l.fileName,"?t=").concat(Date.now()):"");return}let l=R||u,r=V||n;if(!r)return;let a=await y({extension:s.r.Attachment.get,parameters:"_resourceId=".concat(l,"&_seqNo=").concat(x,"&_recordId=").concat(r)}),o=(null==a?void 0:a.record)||{};O.setValues({...o,resourceId:l}),Z.current={...o,resourceId:l},P((null==o?void 0:o.url)?"".concat(o.url,"?t=").concat(Date.now()):"")};return(0,o.useEffect)(()=>{V||h?J():U()},[V,h]),(0,r.jsxs)(a.Z,{className:v().container,children:[(0,r.jsx)(a.Z,{className:v().previewBox,style:{width:"100%",maxWidth:(p||g)*D,height:(I||N)*D},onClick:()=>{C||j.current.click()},children:(0,r.jsx)("img",{src:F||l(68802).default.src,alt:"",className:v().previewImage,style:{border:f?"2px solid #F44336":"none"},onError:e=>{e.currentTarget.src=l(68802).default.src}})}),(0,r.jsxs)(a.Z,{className:v().bottomSection,children:[(0,r.jsx)("input",{hidden:!0,type:"file",accept:"image/png, image/jpeg, image/jpg",ref:j,onChange:e=>{var n,l;let r=null==e?void 0:null===(l=e.target)||void 0===l?void 0:null===(n=l.files)||void 0===n?void 0:n[0];if(!r)return;if(Math.round(r.size/1024)>500){alert(A.MaxFileSize);return}let a=new Date(r.lastModifiedDate),o="".concat(a.getDate(),"/").concat(a.getMonth()+1,"/").concat(a.getFullYear());O.setValues({resourceId:u,recordId:h,seqNo:0,fileName:r.name,folderId:null,folderName:null,date:o,url:null,file:r});let t=new FileReader;b.current=t,t.onloadend=e=>P(e.target.result),t.readAsDataURL(r)},disabled:C}),(0,r.jsx)(m.Z,{onClick:U,image:"clear.png",tooltipText:A.Clear,color:"#F44336",border:"none",disabled:C})]})]})});n.Z=f},10498:function(e){e.exports={container:"ImageUpload_container__I2BWx",previewBox:"ImageUpload_previewBox__JogCN",previewImage:"ImageUpload_previewImage___eqQX",bottomSection:"ImageUpload_bottomSection__jpph8"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=87321)}),_N_E=e.O()}]);