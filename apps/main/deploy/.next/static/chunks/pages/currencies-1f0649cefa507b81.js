(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79640],{54084:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/currencies",function(){return a(90833)}])},90833:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return V}});var n=a(52322),l=a(2784),s=a(62202),c=a(69387),d=a(27723),i=a(65950),t=a(38449),o=a(26612),u=a(71987),m=a(31389),x=a(33625),h=a(62362),y=a(61802),f=a(60218),C=a(48601),v=a(82737),p=a(84100),g=a(5088),Z=a(8661),j=a(80983),I=a(19473),P=a(91406),b=a(19689);function N(e){var r,a;let{labels:c,maxAccess:d,recordId:x}=e,[y,N]=(0,l.useState)(!!x),{getRequest:V,postRequest:_}=(0,l.useContext)(i.$),{platformLabels:R}=(0,l.useContext)(I.l),F=(0,u.E)({endpointId:t.r.Currency.qry}),{formik:q}=(0,j.c)({initialValues:{recordId:null,name:"",reference:"",flName:"",decimals:null,profileId:null,currencyType:null,currencyTypeName:null,sale:!1,purchase:!1,isoCode:"",symbol:"",maxRateVarPct:null},maxAccess:d,validateOnChange:!0,validationSchema:C.Ry({name:C.Z_().required(),reference:C.Z_().required(),decimals:C.Z_().required(),currencyType:C.Z_().required(),profileId:C.Z_().required()}),onSubmit:async e=>{let r=await _({extension:t.r.Currency.set,record:JSON.stringify(e)});(null==e?void 0:e.recordId)||q.setValues({...e,recordId:r.recordId}),N(!0),s.ZP.success(e.recordId?R.Edited:R.Added),F()}});(0,l.useEffect)(()=>{!async function(){if(x){let e=await V({extension:t.r.Currency.get,parameters:"_recordId=".concat(x)});q.setValues(e.record)}}()},[]);let A=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!y}];return(0,n.jsx)(v.Z,{resourceId:o.i.Currencies,form:q,actions:A,maxAccess:d,editMode:y,children:(0,n.jsx)(m.R,{children:(0,n.jsx)(h.Q,{children:(0,n.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(g.Z,{name:"reference",label:c.reference,value:q.values.reference,required:!0,onChange:q.handleChange,maxLength:"3",maxAccess:d,onClear:()=>q.setFieldValue("reference",""),error:q.touched.reference&&!!q.errors.reference})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(g.Z,{name:"name",label:c.name,value:q.values.name,required:!0,maxAccess:d,onChange:q.handleChange,onClear:()=>q.setFieldValue("name",""),error:q.touched.name&&!!q.errors.name})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(g.Z,{name:"flName",label:c.foreignLanguage,value:q.values.flName,maxAccess:d,onChange:q.handleChange,onClear:()=>q.setFieldValue("flName",""),error:q.touched.flName&&!!q.errors.flName})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{datasetId:p.v.CURRENCY_DECIMALS,name:"decimals",label:c.decimals,valueField:"key",displayField:"value",values:q.values,required:!0,maxAccess:d,onChange:(e,r)=>{q&&q.setFieldValue("decimals",null==r?void 0:r.key)},error:q.touched.decimals&&!!q.errors.decimals})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{datasetId:p.v.CURRENCY_PROFILE,name:"profileId",label:c.profile,valueField:"key",displayField:"value",values:q.values,required:!0,maxAccess:d,onChange:(e,r)=>{q&&q.setFieldValue("profileId",null==r?void 0:r.key)},error:q.touched.profileId&&!!q.errors.profileId})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{datasetId:p.v.CURRENCY_TYPE,name:"currencyType",label:c.currencyType,valueField:"key",displayField:"value",values:q.values,required:!0,maxAccess:d,readOnly:y,onChange:(e,r)=>{q&&q.setFieldValue("currencyType",null==r?void 0:r.key)},error:q.touched.currencyType&&!!q.errors.currencyType})}),(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(b.Z,{name:"sale",value:null===(r=q.values)||void 0===r?void 0:r.sale,onChange:e=>q.setFieldValue("sale",e.target.checked),label:c.sales,maxAccess:d})}),(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(b.Z,{name:"purchase",value:null===(a=q.values)||void 0===a?void 0:a.purchase,onChange:e=>q.setFieldValue("purchase",e.target.checked),label:c.purchase,maxAccess:d})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(g.Z,{name:"isoCode",label:c.isoCode,value:q.values.isoCode,onChange:q.handleChange,maxLength:"3",maxAccess:d,onClear:()=>q.setFieldValue("isoCode",""),error:q.touched.isoCode&&!!q.errors.isoCode})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(g.Z,{name:"symbol",label:c.symbol,value:q.values.symbol,onChange:q.handleChange,maxLength:"5",maxAccess:d,onClear:()=>q.setFieldValue("symbol",""),error:q.touched.symbol&&!!q.errors.symbol})}),(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsx)(P.Z,{name:"maxRateVarPct",label:c.maxRateVarPct,value:q.values.maxRateVarPct,maxAccess:d,onChange:e=>q.setFieldValue("maxRateVarPct",e.target.value),onClear:()=>q.setFieldValue("maxRateVarPct",null),allowNegative:!1,maxLength:4,error:q.touched.maxRateVarPct&&!!q.errors.maxRateVarPct,decimalScale:2})})]})})})})}var V=()=>{let{postRequest:e,getRequest:r}=(0,l.useContext)(i.$),{stack:a}=(0,y.zY)(),{platformLabels:f}=(0,l.useContext)(I.l);async function C(){return await r({extension:t.r.Currency.qry,parameters:"_filter="})}let{query:{data:v},labels:p,refetch:g,invalidate:Z,filterBy:j,clearFilter:P,access:b}=(0,u.J)({queryFn:C,endpointId:t.r.Currency.qry,datasetId:o.i.Currencies,filter:{endpointId:t.r.Currency.snapshot,filterFn:V}});async function V(e){let{filters:a}=e;return a.qry?await r({extension:t.r.Currency.snapshot,parameters:"_filter=".concat(a.qry)}):C()}let _=[{field:"reference",headerName:p.reference,flex:1},{field:"name",headerName:p.name,flex:1},{field:"flName",headerName:p.foreignLanguage,flex:1},{field:"currencyTypeName",headerName:p.currencyType,flex:1}],R=async r=>{await e({extension:t.r.Currency.del,record:JSON.stringify(r)}),Z(),s.ZP.success(f.Deleted)};function F(e){a({Component:N,props:{labels:p,recordId:e,maxAccess:b},width:700,height:700,title:p.currency})}return(0,n.jsxs)(m.R,{children:[(0,n.jsx)(x.g,{children:(0,n.jsx)(d.Z,{onAdd:()=>{F()},maxAccess:b,onSearch:e=>{j("qry",e)},onSearchClear:()=>{P("qry")},inputSearch:!0})}),(0,n.jsx)(h.Q,{children:(0,n.jsx)(c.Z,{columns:_,gridData:v,rowId:["recordId"],onEdit:e=>{F(null==e?void 0:e.recordId)},onDelete:R,refetch:g,isLoading:!1,pageSize:50,paginationType:"client",maxAccess:b})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=54084)}),_N_E=e.O()}]);