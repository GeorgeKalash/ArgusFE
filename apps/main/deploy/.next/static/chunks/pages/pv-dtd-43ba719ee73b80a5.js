(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67020],{80376:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pv-dtd",function(){return n(93850)}])},93850:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return b}});var t=n(52322),d=n(2784),r=n(62202),s=n(69387),c=n(27723),l=n(65950),o=n(71987),i=n(26612),u=n(31389),p=n(33625),m=n(62362),h=n(61802),I=n(25870),y=n(7121),x=n(60218),f=n(48601),v=n(82737),D=n(8661),F=n(80983),A=n(2119),_=n(38449),g=n(84100),j=n(19473),N=n(19689);function Z(e){var a;let{labels:n,maxAccess:s,recordId:c}=e,{getRequest:p,postRequest:h}=(0,d.useContext)(l.$),Z=(0,o.E)({endpointId:I.H.FIDocTypeDefaults.qry}),{platformLabels:b}=(0,d.useContext)(j.l),{formik:E}=(0,F.c)({initialValues:{dtId:c,accountId:"",plantId:"",recordId:c,paymentMethod:"",cashAccountId:null,disableExpenseGrid:!1},maxAccess:s,validateOnChange:!0,validationSchema:f.Ry({dtId:f.Z_().required(" ")}),onSubmit:async e=>{await h({extension:I.H.FIDocTypeDefaults.set,record:JSON.stringify(e)}),c||E.setFieldValue("recordId",e.dtId),r.ZP.success(b.Submit),Z()}}),w=!!E.values.recordId;return(0,d.useEffect)(()=>{!async function(){try{if(c){let e=await p({extension:I.H.FIDocTypeDefaults.get,parameters:"_dtId=".concat(c)});E.setValues({...e.record,recordId:e.record.dtId})}}catch(e){}}()},[]),(0,t.jsx)(v.Z,{resourceId:i.i.FIDocTypeDefaults,form:E,maxAccess:s,editMode:w,children:(0,t.jsx)(u.R,{children:(0,t.jsx)(m.Q,{children:(0,t.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(D.Z,{endpointId:_.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(y.J.PaymentVoucher),name:"dtId",required:!0,label:n.doctype,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:E.values,maxAccess:s,onChange:(e,a)=>{E&&E.setFieldValue("dtId",(null==a?void 0:a.recordId)||"")},error:E.touched.dtId&&!!E.errors.dtId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(D.Z,{endpointId:_.r.Plant.qry,name:"plantId",label:n.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:E.values,maxAccess:s,onChange:(e,a)=>{let n=(null==a?void 0:a.recordId)||"";E.setFieldValue("plantId",n)},error:E.touched.plantId&&!!E.errors.plantId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(D.Z,{datasetId:g.v.PAYMENT_METHOD,name:"paymentMethod",label:n.paymentM,valueField:"key",displayField:"value",values:E.values,onChange:async(e,a)=>{E.setFieldValue("paymentMethod",null==a?void 0:a.key)},error:E.touched.paymentMethod&&!!E.errors.paymentMethod,maxAccess:s})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(D.Z,{endpointId:A.G.CashAccount.qry,parameters:"_type=0",name:"cashAccountId",label:n.cashAccount,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:E.values,maxAccess:s,onChange:(e,a)=>{E.setFieldValue("cashAccountId",(null==a?void 0:a.recordId)||null)},error:E.touched.cashAccountId&&!!E.errors.cashAccountId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(N.Z,{name:"disableExpenseGrid",value:null===(a=E.values)||void 0===a?void 0:a.disableExpenseGrid,onChange:e=>E.setFieldValue("disableExpenseGrid",e.target.checked),label:n.disableExpenseGrid,maxAccess:s})})]})})})})}var b=()=>{let{getRequest:e,postRequest:a}=(0,d.useContext)(l.$),{platformLabels:n}=(0,d.useContext)(j.l),{stack:x}=(0,h.zY)();async function f(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50}=a;return{...await e({extension:I.H.FIDocTypeDefaults.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t,"&filter=&_functionId=").concat(y.J.PaymentVoucher)}),_startAt:n}}let{query:{data:v},labels:D,paginationParameters:F,refetch:A,access:_}=(0,o.J)({queryFn:f,endpointId:I.H.FIDocTypeDefaults.qry,datasetId:i.i.FIDocTypeDefaults}),g=(0,o.E)({endpointId:I.H.FIDocTypeDefaults.qry}),N=[{field:"dtName",headerName:D.doctype,flex:1},{field:"plantName",headerName:D.plant,flex:1},{field:"paymentMethodName",headerName:D.paymentMethod,flex:1},{field:"cashAccountName",headerName:D.cashAccount,flex:1}],b=async e=>{await a({extension:I.H.FIDocTypeDefaults.del,record:JSON.stringify(e)}),g(),r.ZP.success(n.Deleted)};function E(e){x({Component:Z,props:{labels:D,recordId:e,maxAccess:_},width:500,height:400,title:D.doctypeDefault})}return(0,t.jsxs)(u.R,{children:[(0,t.jsx)(p.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{E()},maxAccess:_})}),(0,t.jsx)(m.Q,{children:(0,t.jsx)(s.Z,{columns:N,gridData:v,rowId:["dtId"],onEdit:e=>{E(null==e?void 0:e.dtId)},onDelete:b,isLoading:!1,pageSize:50,refetch:A,paginationParameters:F,paginationType:"api",maxAccess:_})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=80376)}),_N_E=e.O()}]);