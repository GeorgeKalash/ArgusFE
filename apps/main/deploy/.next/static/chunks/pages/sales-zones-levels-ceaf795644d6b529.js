(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94869],{74141:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sales-zones-levels",function(){return t(35877)}])},35877:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var l=t(52322),s=t(2784),i=t(48601),a=t(65950),u=t(76399),r=t(26612),m=t(62202),o=t(71987),d=t(31389),c=t(62362),v=t(19473),f=t(80983),h=t(22341),I=t(96026),x=t(54074),_=()=>{let{getRequest:e,postRequest:n}=(0,s.useContext)(a.$),{platformLabels:t}=(0,s.useContext)(v.l),{stack:_}=(0,I.V)(),{labels:b,access:S}=(0,o.J)({datasetId:r.i.SalesZoneLevels});(0,s.useEffect)(()=>{e({extension:h.P.SaleZoneLevel.qry}).then(e=>{let n=e.list.map((e,n)=>({id:n+1,levelId:null==e?void 0:e.levelId,name:null==e?void 0:e.name}));e.list.length>0&&p.setValues({items:n})}).catch(e=>{setErrorMessage(e)})},[]);let{formik:p}=(0,f.c)({maxAccess:S,validateOnChange:!0,validationSchema:i.Ry({items:i.IX().of(i.Ry().shape({levelId:i.Rx().required("Level ID is required").integer("Level ID must be an integer").min(0,"Level ID must be at least 0").max(9,"Level ID must be no more than 9").test("is-unique","Level ID must be unique",function(e){let{parent:n}=this;return!p.values.items.find(t=>t.levelId===e&&t.id!==n.id)}),name:i.Z_().required()}))}),initialValues:{items:[{id:1,levelId:null,name:""}]},onSubmit:async e=>{let l=e.items.map(e=>e.levelId),s=new Set;for(let e of l){if(s.has(e)){_({message:"Duplicate Level ID found: ".concat(e)});return}s.add(e)}let i={items:e.items};await n({extension:h.P.SaleZoneLevel.set2,record:JSON.stringify(i)}),m.ZP.success(t.Saved)}}),L=[{component:"numberfield",label:b.levelId,name:"levelId"},{component:"textfield",label:b.name,name:"name"}];return(0,l.jsx)(x.Z,{onSave:p.handleSubmit,maxAccess:S,fullSize:!0,children:(0,l.jsx)(d.R,{children:(0,l.jsx)(c.Q,{children:(0,l.jsx)(u._,{onChange:e=>p.setFieldValue("items",e),value:p.values.items,error:p.errors.items,columns:L,name:"items",maxAccess:S})})})})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=74141)}),_N_E=e.O()}]);