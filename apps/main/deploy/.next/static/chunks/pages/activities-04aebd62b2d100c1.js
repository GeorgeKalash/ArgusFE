(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51188],{54990:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/activities",function(){return n(16270)}])},16270:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return j}});var t=n(52322),a=n(2784),i=n(62202),s=n(69387),c=n(27723),d=n(65950),l=n(24074),u=n(71987),o=n(26612),m=n(31389),f=n(33625),x=n(62362),h=n(60218),y=n(48601),v=n(82737),g=n(84100),A=n(5088),p=n(8661),N=n(80983),_=n(19473);function C(e){let{labels:r,maxAccess:n,recordId:s}=e,[c,f]=(0,a.useState)(!!s),{platformLabels:C}=(0,a.useContext)(_.l),{getRequest:Z,postRequest:j}=(0,a.useContext)(d.$),I=(0,u.E)({endpointId:l.u.Activity.qry}),{formik:w}=(0,N.c)({initialValues:{recordId:null,name:"",reference:"",flName:"",industry:""},maxAccess:n,validateOnChange:!0,validationSchema:y.Ry({name:y.Z_().required(),reference:y.Z_().required(),industry:y.Z_().required()}),onSubmit:async e=>{let r=e.recordId,n=await j({extension:l.u.Activity.set,record:JSON.stringify(e)});r?i.ZP.success(C.Edited):(i.ZP.success(C.Added),w.setValues({...e,recordId:n.recordId})),f(!0),I()}});return(0,a.useEffect)(()=>{!async function(){if(s){let e=await Z({extension:l.u.Activity.get,parameters:"_recordId=".concat(s)});w.setValues(e.record)}}()},[]),(0,t.jsx)(v.Z,{resourceId:o.i.Activity,form:w,maxAccess:n,editMode:c,children:(0,t.jsx)(m.R,{children:(0,t.jsx)(x.Q,{children:(0,t.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{name:"name",label:r.name,value:w.values.name,required:!0,maxAccess:n,maxLength:"30",onChange:w.handleChange,onClear:()=>w.setFieldValue("name",""),error:w.touched.name&&!!w.errors.name})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{name:"reference",label:r.reference,value:w.values.reference,required:!0,rows:2,maxAccess:n,onChange:w.handleChange,onClear:()=>w.setFieldValue("reference",""),error:w.touched.reference&&!!w.errors.reference})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{name:"flName",label:r.flName,value:w.values.flName,rows:2,maxAccess:n,onChange:w.handleChange,onClear:()=>w.setFieldValue("flName",""),error:w.touched.flName&&!!w.errors.flName})}),(0,t.jsx)(h.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{datasetId:g.v.INDUSTRY,name:"industry",label:r.indId,valueField:"key",displayField:"value",values:w.values,required:!0,maxAccess:n,onChange:(e,r)=>{w.setValues({...w.values,industry:(null==r?void 0:r.key)||""})},error:w.touched.industry&&!!w.errors.industry})})]})})})})}var Z=n(61802),j=()=>{let{getRequest:e,postRequest:r}=(0,a.useContext)(d.$),{platformLabels:n}=(0,a.useContext)(_.l),{stack:h}=(0,Z.zY)();async function y(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50}=r;return{...await e({extension:l.u.Activity.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t,"&filter=")}),_startAt:n}}let{query:{data:v},labels:g,paginationParameters:A,refetch:p,access:N}=(0,u.J)({queryFn:y,endpointId:l.u.Activity.qry,datasetId:o.i.Activity}),j=(0,u.E)({endpointId:l.u.Activity.qry}),I=[{field:"reference",headerName:g.reference,flex:1},{field:"name",headerName:g.name,flex:1},{field:"flName",headerName:g.flName,flex:1}],w=async e=>{await r({extension:l.u.Activity.del,record:JSON.stringify(e)}),j(),i.ZP.success(n.Deleted)};function q(e){h({Component:C,props:{labels:g,recordId:e,maxAccess:N},width:500,height:360,title:g.Activity})}return(0,t.jsxs)(m.R,{children:[(0,t.jsx)(f.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{q()},maxAccess:N})}),(0,t.jsx)(x.Q,{children:(0,t.jsx)(s.Z,{columns:I,gridData:v,rowId:["recordId"],onEdit:e=>{q(null==e?void 0:e.recordId)},onDelete:w,isLoading:!1,pageSize:50,refetch:p,paginationParameters:A,paginationType:"api",maxAccess:N})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=54990)}),_N_E=e.O()}]);