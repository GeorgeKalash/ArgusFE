(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88863],{20110:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-expense-types",function(){return r(22826)}])},22826:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return j}});var t=r(52322),s=r(2784),a=r(62202),i=r(69387),c=r(27723),o=r(65950),d=r(25870),l=r(71987),u=r(26612),p=r(31389),x=r(33625),h=r(62362),m=r(61802),f=r(60218),y=r(48601),g=r(82737),C=r(5088),E=r(21581),_=r(74898),I=r(80983),A=r(19473);function T(e){let{labels:n,maxAccess:r,recordId:i,invalidate:c}=e,{getRequest:l,postRequest:x}=(0,s.useContext)(o.$),{platformLabels:m}=(0,s.useContext)(A.l),{formik:T}=(0,I.c)({initialValues:{recordId:i,name:"",reference:"",description:""},validateOnChange:!0,validationSchema:y.Ry({name:y.Z_().required(),reference:y.Z_().required()}),onSubmit:async e=>{let n=await x({extension:d.H.ExpenseTypes.set,record:JSON.stringify(e)});e.recordId||T.setFieldValue("recordId",n.recordId),a.ZP.success(e.recordId?m.Edited:m.Added),c()}}),j=!!T.values.recordId;(0,s.useEffect)(()=>{!async function(){if(i){let e=await l({extension:d.H.ExpenseTypes.get,parameters:"_recordId=".concat(i)});T.setValues(e.record)}}()},[]);let v=[{key:"Integration Account",condition:!0,onClick:"onClickGIA",masterSource:_.N.ExpenseType,disabled:!j}];return(0,t.jsx)(g.Z,{resourceId:u.i.Expense_Types,form:T,isCleared:!1,maxAccess:r,editMode:j,actions:v,children:(0,t.jsx)(p.R,{children:(0,t.jsx)(h.Q,{children:(0,t.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(C.Z,{name:"reference",label:n.reference,value:T.values.reference,required:!0,maxAccess:r,maxLength:"10",onChange:T.handleChange,onClear:()=>T.setFieldValue("reference",""),error:T.touched.reference&&!!T.errors.reference})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(C.Z,{name:"name",label:n.name,value:T.values.name,required:!0,maxAccess:r,maxLength:"40",onChange:T.handleChange,onClear:()=>T.setFieldValue("name",""),error:T.touched.name&&!!T.errors.name})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,children:(0,t.jsx)(E.Z,{name:"description",label:n.description,value:T.values.description,maxLength:"100",rows:2,maxAccess:r,onChange:T.handleChange,onClear:()=>T.setFieldValue("description",""),error:T.touched.description&&!!T.errors.description})})]})})})})}var j=()=>{let{getRequest:e,postRequest:n}=(0,s.useContext)(o.$),{stack:r}=(0,m.zY)(),{platformLabels:f}=(0,s.useContext)(A.l);async function y(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50}=n;return{...await e({extension:d.H.ExpenseTypes.page,parameters:"_pageSize=".concat(t,"&_startAt=").concat(r,"&_filter=")}),_startAt:r}}let g=(0,l.E)({endpointId:d.H.ExpenseTypes.page}),{query:{data:C},labels:E,access:_,search:I,clear:j,paginationParameters:v,refetch:w}=(0,l.J)({queryFn:y,endpointId:d.H.ExpenseTypes.page,datasetId:u.i.Expense_Types,search:{endpointId:d.H.ExpenseTypes.snapshot,searchFn:Z}});async function Z(n){let{qry:r}=n;return await e({extension:d.H.ExpenseTypes.snapshot,parameters:"_filter=".concat(r)})}let N=[{field:"reference",headerName:E.reference,flex:1},{field:"name",headerName:E.name,flex:1},{field:"description",headerName:E.description,flex:1}],P=async e=>{await n({extension:d.H.ExpenseTypes.del,record:JSON.stringify(e)}),g(),a.ZP.success(f.Deleted)};function b(e){r({Component:T,props:{labels:E,recordId:e,maxAccess:_,invalidate:g},width:600,height:400,title:E.expenseType})}return(0,t.jsxs)(p.R,{children:[(0,t.jsx)(x.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{b()},maxAccess:_,onSearch:I,onSearchClear:j,labels:E,inputSearch:!0})}),(0,t.jsx)(h.Q,{children:(0,t.jsx)(i.Z,{columns:N,gridData:C,paginationParameters:v,rowId:["recordId"],onEdit:e=>{b(null==e?void 0:e.recordId)},onDelete:P,isLoading:!1,pageSize:50,paginationType:"api",refetch:w,maxAccess:_})})]})}},74898:function(e,n,r){"use strict";r.d(n,{N:function(){return t}});let t={Global:0,AccountGroup:10,Account:11,CashAccountGroup:20,CashAccount:21,ItemGroup:30,Item:31,ItemCategory:32,Site:33,ExpenseType:41,CostType:42,ProductionOverhead:51,TaxCode:12,PayrollGLGroup:61,PayrollEntitlementDeduction:62,AssetGroup:71,AssetClass:72}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=20110)}),_N_E=e.O()}]);