(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13658],{64314:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-user-defined",function(){return a(35893)}])},35893:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var n=a(52322),l=a(29326),i=a(2784),s=a(9522),o=a(31389),r=a(60218),c=a(62202),u=a(5088),d=a(65950),v=a(38449),m=a(48601),b=a(80983),h=a(62362),x=a(19473),p=a(91406),C=a(54074),f=e=>{let{labels:t,maxAccess:a}=e,{postRequest:l}=(0,i.useContext)(d.$),{platformLabels:s,defaultsData:f,updateDefaults:D}=(0,i.useContext)(x.l),[_,T]=(0,i.useState)(!1),{formik:j}=(0,b.c)({initialValues:{ivtUDTCount:"",...Object.fromEntries(Array.from({length:20},(e,t)=>["ivtUDT".concat(t+1),""]))},validateOnChange:!0,validationSchema:m.Ry({ivtUDTCount:m.Rx().nullable().required().min(1).max(20),...Object.fromEntries(Array.from({length:20},(e,t)=>t+1).map(e=>["ivtUDT".concat(e),m.Z_().nullable().test(function(t){let{ivtUDTCount:a}=this.parent;return!(a>=e)||!!t})]))}),onSubmit:async e=>{await Z(e)}});(0,i.useEffect)(()=>{y()},[]);let y=()=>{var e;let t={},a=null==f?void 0:null===(e=f.list)||void 0===e?void 0:e.filter(e=>Object.keys(j.values).includes(e.key));null==a||a.forEach(e=>{e.value&&!isNaN(e.value)&&""!==e.value.trim()?t[e.key]=parseInt(e.value):t[e.key]=e.value}),j.setValues(t)},Z=async e=>{var t=[{key:"ivtUDTCount",value:e.ivtUDTCount}];for(let a=1;a<=20;a++){let n="ivtUDT".concat(a);void 0!==e[n]&&t.push({key:n,value:e[n]})}await l({extension:v.r.Defaults.set,record:JSON.stringify({sysDefaults:t})}).then(e=>{c.ZP.success(s.Updated),D(t)})};return(0,n.jsx)(C.Z,{onSave:j.handleSubmit,maxAccess:a,children:(0,n.jsx)(o.R,{children:(0,n.jsx)(h.Q,{children:(0,n.jsxs)(r.ZP,{container:!0,spacing:2,xs:6,children:[(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{name:"ivtUDTCount",label:t.propertiesCount,value:j.values.ivtUDTCount,onBlur:e=>{let t=parseInt(e.target.value,10);if(t>20||!t||t<1){T(!0);return}T(!1),j.setFieldValue("ivtUDTCount",t),function(e){for(let t=1;t<=20;t++){let a="ivtUDT".concat(t);t>e&&j.setFieldValue(a,"",!1)}}(t)},unClearable:!0,maxLength:2,decimalScale:0,allowNegative:!1,error:_||j.touched.ivtUDTCount&&!!j.errors.ivtUDTCount})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(r.ZP,{container:!0,spacing:2,children:Array.from({length:10}).map((e,a)=>(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{name:"ivtUDT".concat(a+1),label:"".concat(t.property," ").concat(a+1),value:j.values["ivtUDT".concat(a+1)],onClear:()=>j.setFieldValue("ivtUDT".concat(a+1),""),onChange:j.handleChange,error:!_&&j.values.ivtUDTCount>a&&!!j.errors["ivtUDT".concat(a+1)],inputProps:{readOnly:_||j.values.ivtUDTCount<=a||"null"===j.values.ivtUDTCount}},a)},a))})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(r.ZP,{container:!0,spacing:2,children:Array.from({length:10}).map((e,a)=>(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{name:"ivtUDT".concat(a+11),label:"".concat(t.property," ").concat(a+11),value:j.values["ivtUDT".concat(a+11)],onClear:()=>j.setFieldValue("ivtUDT".concat(a+11),""),onChange:j.handleChange,error:!_&&j.errors["ivtUDT".concat(a+11)],inputProps:{readOnly:_||j.values.ivtUDTCount<=a+10||"null"===j.values.ivtUDTCount}},a+10)},1))})})]})})})})},D=a(71987),_=a(26612),T=e=>{let{labels:t,maxAccess:a}=e,{postRequest:l}=(0,i.useContext)(d.$),{platformLabels:s,defaultsData:f,updateDefaults:D}=(0,i.useContext)(x.l),[_,T]=(0,i.useState)(!1),{formik:j}=(0,b.c)({maxAccess:a,initialValues:{ivtDimCount:"",...Object.fromEntries(Array.from({length:20},(e,t)=>["ivtDimension".concat(t+1),""]))},validateOnChange:!0,validationSchema:m.Ry({ivtDimCount:m.Rx().nullable().required().min(1).max(20),...Object.fromEntries(Array.from({length:20},(e,t)=>t+1).map(e=>["ivtDimension".concat(e),m.Z_().nullable().test(function(t){let{ivtDimCount:a}=this.parent;return!(parseInt(a)>=e)||!!t})]))}),onSubmit:async e=>{await Z(e)}});(0,i.useEffect)(()=>{y()},[]);let y=()=>{var e;let t={},a=null==f?void 0:null===(e=f.list)||void 0===e?void 0:e.filter(e=>Object.keys(j.values).includes(e.key));null==a||a.forEach(e=>{e.value&&!isNaN(e.value)&&""!==e.value.trim()?t[e.key]=parseInt(e.value):t[e.key]=e.value}),j.setValues(t)},Z=async e=>{var t=[{key:"ivtDimCount",value:e.ivtDimCount}];for(let a=1;a<=20;a++){let n="ivtDimension".concat(a);void 0!==e[n]&&t.push({key:n,value:e[n]})}await l({extension:v.r.Defaults.set,record:JSON.stringify({sysDefaults:t})}).then(e=>{c.ZP.success(s.Updated),D(t)})};return(0,n.jsx)(C.Z,{onSave:j.handleSubmit,maxAccess:a,children:(0,n.jsx)(o.R,{children:(0,n.jsx)(h.Q,{children:(0,n.jsxs)(r.ZP,{container:!0,spacing:2,xs:6,children:[(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{name:"ivtDimCount",label:t.propertiesCount,value:j.values.ivtDimCount,maxLength:2,decimalScale:0,onBlur:e=>{let t=parseInt(e.target.value,10);if(t>20||!t||t<1){T(!0);return}T(!1),j.setFieldValue("ivtDimCount",t),function(e){for(let t=1;t<=20;t++){let a="ivtDimension".concat(t);t>e&&j.setFieldValue(a,"",!1)}}(t)},unClearable:!0,allowNegative:!1,error:_||j.touched.ivtDimCount&&!!j.errors.ivtDimCount})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(r.ZP,{container:!0,spacing:2,children:Array.from({length:10}).map((e,a)=>(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{name:"ivtDimension".concat(a+1),label:"".concat(t.property," ").concat(a+1),value:j.values["ivtDimension".concat(a+1)],onClear:()=>j.setFieldValue("ivtDimension".concat(a+1),""),onChange:j.handleChange,error:!_&&j.values.ivtDimCount>a&&!!j.errors["ivtDimension".concat(a+1)],inputProps:{readOnly:_||j.values.ivtDimCount<=a||"null"===j.values.ivtDimCount}},a)},a))})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(r.ZP,{container:!0,spacing:2,children:Array.from({length:10}).map((e,a)=>(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{name:"ivtDimension".concat(a+11),label:"".concat(t.property," ").concat(a+11),value:j.values["ivtDimension".concat(a+11)],onClear:()=>j.setFieldValue("ivtDimension".concat(a+11),""),onChange:j.handleChange,error:!_&&j.errors["ivtDimension".concat(a+11)],inputProps:{readOnly:_||j.values.ivtDimCount<=a+10||"null"===j.values.ivtDimCount}},a+10)},1))})})]})})})})},j=()=>{let[e,t]=(0,i.useState)(0),{labels:a,access:r}=(0,D.J)({datasetId:_.i.UserDefined}),c=[{label:a.userProperties},{label:a.userText}];if(a&&Object.keys(a).length>0)return(0,n.jsxs)(o.R,{children:[(0,n.jsx)(s.Y,{tabs:c,activeTab:e,setActiveTab:t,maxAccess:r}),(0,n.jsx)(l.Z,{index:0,value:e,maxAccess:r,children:(0,n.jsx)(T,{maxAccess:r,labels:a})}),(0,n.jsx)(l.Z,{index:1,value:e,maxAccess:r,children:(0,n.jsx)(f,{maxAccess:r,labels:a})})]})}},29326:function(e,t,a){"use strict";var n=a(52322);a(2784);var l=a(23925),i=a(13980),s=a.n(i),o=a(95291),r=a.n(o),c=a(65947);let u=e=>{var t,a,i;let{children:s,value:o,index:u,maxAccess:d,...v}=e,m="".concat(e.name||"tab",".").concat(u),{accessLevel:b}=null!==(i=(null!==(a=null==d?void 0:null===(t=d.record)||void 0===t?void 0:t.controls)&&void 0!==a?a:[]).find(e=>e.controlId===m))&&void 0!==i?i:{accessLevel:0};if(b===c.A1)return null;let h=o===u;return(0,n.jsx)(l.Z,{role:"tabpanel",hidden:!h,id:"simple-tabpanel-".concat(u),"aria-labelledby":"simple-tab-".concat(u),className:"".concat(r().tabPanel," ").concat(h?r().active:r().hidden),...v,children:s})};u.propTypes={children:s().node,index:s().number.isRequired,value:s().number.isRequired},t.Z=u},9522:function(e,t,a){"use strict";a.d(t,{Y:function(){return v}});var n=a(52322),l=a(23925),i=a(54582),s=a(68696),o=a(44258),r=a(2784),c=a(99266),u=a(52614),d=a.n(u);let v=e=>{var t,a,u,v,m;let{tabs:b,activeTab:h,setActiveTab:x,maxAccess:p,name:C="tab"}=e,f=(null==p?void 0:null===(a=p.record)||void 0===a?void 0:null===(t=a.controls)||void 0===t?void 0:t.filter(e=>{var t;return 4===e.accessLevel&&(null===(t=e.controlId)||void 0===t?void 0:t.startsWith("".concat(C,".")))}).map(e=>e.controlId.split(".")[1]))||[],D=null==b?void 0:null===(u=b.map((e,t)=>({...e,id:t})))||void 0===u?void 0:u.filter((e,t)=>!f.includes(String(t))),_=null===(v=D[h])||void 0===v?void 0:v.id,T=null===(m=D[h])||void 0===m?void 0:m.disabled;return(0,r.useEffect)(()=>{_>=0&&!T&&h!=_&&x(_)},[]),(0,n.jsx)(l.Z,{className:d().tabsContainer,children:(0,n.jsx)(l.Z,{className:d().tabsWrapper,children:(0,n.jsx)(i.Z,{value:h,onChange:(e,t)=>x(t),variant:"scrollable",scrollButtons:D.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:d().tabsIndicator},className:d().tabs,children:null==D?void 0:D.map(e=>(0,n.jsx)(s.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(d().tabName," ").concat(e.disabled?d().tabDisabled:""),classes:{root:d().tabRoot,selected:d().selectedTab},label:(0,n.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,n.jsx)("span",{children:e.label}),e.id===h&&(null==e?void 0:e.onRefetch)&&(0,n.jsx)(o.Z,{size:"small",className:d().refreshButton,onClick:t=>{t.stopPropagation(),e.onRefetch()},children:(0,n.jsx)(c.Z,{className:d().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=64314)}),_N_E=e.O()}]);