(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95669],{43429:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/currency-exchange-map",function(){return n(18562)}])},18562:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return f}});var t=n(52322),a=n(2784),s=n(60218),d=n(65950),c=n(38449),l=n(48601),o=n(78711),u=n(53621),y=n(1251),p=n(55648),g=n(62202),i=n(19473),C=n(26612),I=n(76399),q=n(62362),h=n(31389),m=n(8661),x=n(33625),f=()=>{let{getRequest:e,postRequest:r}=(0,a.useContext)(d.$),{getLabels:n,getAccess:f}=(0,a.useContext)(i.l),[P,R]=(0,a.useState)(0),[S,v]=(0,a.useState)(null),{platformLabels:E}=(0,a.useContext)(i.l);(0,a.useEffect)(()=>{P?P.record.maxAccess>0?n(C.i.currencyExchangeMap,v):setErrorMessage({message:"YOU DON'T HAVE ACCESS TO THIS SCREEN"}):f(C.i.currencyExchangeMap,R)},[P]);let O=(0,o.TA)({validateOnChange:!0,validationSchema:l.Ry({rows:l.IX().of(l.Ry().shape({exchangeId:l.Z_().required()})).required()}),initialValues:{currencyId:"",countryId:"",rows:[{id:1,currencyId:"",countryId:"",plantId:"",countryName:"",plantName:"",exchangeRef:"",exchangeId:"",exchangeName:""}]},onSubmit:async e=>{await D(e)}}),F={country:S&&S.find(e=>"1"===e.key)&&S.find(e=>"1"===e.key).value,currency:S&&S.find(e=>"2"===e.key)&&S.find(e=>"2"===e.key).value,exchangeTable:S&&S.find(e=>"3"===e.key)&&S.find(e=>"3"===e.key).value,plant:S&&S.find(e=>"4"===e.key)&&S.find(e=>"4"===e.key).value,name:S&&S.find(e=>"5"===e.key)&&S.find(e=>"5"===e.key).value},D=async e=>{let n={currencyId:O.values.currencyId,countryId:O.values.countryId,globalExchangeMaps:e.rows.map(e=>{let{countryId:r,currencyId:n,...t}=e;return{countryId:r,currencyId:n,...t}})};await r({extension:u.d.CurrencyExchangeMap.set2,record:JSON.stringify(n)}).then(e=>{e.statusId&&g.ZP.success(E.Updated)})},N=(r,n)=>{O.setFieldValue("rows",[]),r&&n&&e({extension:c.r.Plant.qry,parameters:""}).then(t=>{let a="_currencyId=".concat(r,"&_countryId=").concat(n);e({extension:u.d.CurrencyExchangeMap.qry,parameters:a}).then(e=>{var a;let s=null==e?void 0:null===(a=e.list)||void 0===a?void 0:a.reduce((e,r)=>(e[r.plantId]=r,e),{}),d=t.list.map((e,t)=>{let a=s[e.recordId]||0;return{id:t+1,currencyId:r,countryId:n,plantId:e.recordId,plantName:e.name,exchangeId:a.exchangeId?a.exchangeId:"",plantRef:e.reference,exchangeRef:a.exchangeRef?a.exchangeRef:"",exchangeName:a.exchangeName?a.exchangeName:""}});O.setFieldValue("rows",d)})})},T=[{component:"textfield",label:F.plant,name:"plantRef",props:{readOnly:!0}},{component:"textfield",label:F.name,name:"plantName",props:{readOnly:!0}},{component:"resourcecombobox",label:F.exchangeTable,name:"exchangeId",props:{endpointId:y.q.ExchangeTable.qry2,parameters:"_currencyId=".concat(O.values.currencyId),valueField:"recordId",displayField:"reference",mapping:[{from:"name",to:"exchangeName"},{from:"reference",to:"exchangeRef"},{from:"recordId",to:"exchangeId"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}]}},{component:"textfield",label:F.name,name:"exchangeName",props:{readOnly:!0}}];return(0,t.jsxs)(h.R,{children:[(0,t.jsx)(x.g,{children:(0,t.jsxs)(s.ZP,{container:!0,xs:6,spacing:2,sx:{padding:"10px"},children:[(0,t.jsx)(s.ZP,{item:!0,xs:6,children:(0,t.jsx)(m.Z,{endpointId:c.r.Country.qry,name:"countryId",label:F.country,columnsInDropDown:[{key:"reference",value:"Currency Ref"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],values:O.values,valueField:"recordId",displayField:["reference","name"],required:!0,maxAccess:P,onChange:(e,r)=>{let n=(null==r?void 0:r.recordId)||"";O.setFieldValue("countryId",n),N(O.values.currencyId,n)},error:O.errors&&!!O.errors.countryId})}),(0,t.jsx)(s.ZP,{item:!0,xs:6,children:(0,t.jsx)(m.Z,{endpointId:c.r.Currency.qry,name:"currencyId",label:F.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Currency Ref"},{key:"name",value:"Name"}],values:O.values,required:!0,maxAccess:P,onChange:(e,r)=>{let n=(null==r?void 0:r.recordId)||"";O.setFieldValue("currencyId",n),N(n,O.values.countryId)},error:O.errors&&!!O.errors.currencyId,helperText:O.touched.currencyId&&O.errors.currencyId})})]})}),(0,t.jsx)(q.Q,{children:O.values.currencyId&&O.values.countryId&&(0,t.jsx)(I._,{onChange:e=>O.setFieldValue("rows",e),value:O.values.rows,error:O.errors.rows,columns:T,allowDelete:!1,allowAddNewLine:!1})}),(0,t.jsx)(x.g,{children:(0,t.jsx)(p.Z,{onSave:()=>{O.handleSubmit()},isSaved:!0,smallBox:!0})})]})}},53621:function(e,r,n){"use strict";n.d(r,{d:function(){return a}});let t="RTSET.asmx/",a={Interface:{qry:t+"qryITF",page:t+"pageITF",get:t+"getITF",set:t+"setITF",del:t+"delITF"},ProductMaster:{qry:t+"qryPRO",page:t+"pagePRO",get:t+"getPRO",set:t+"setPRO",del:t+"delPRO",snapshot:t+"snapshotPRO"},ProductCountries:{qry:t+"qryPCO",set2:t+"set2PCO"},ProductMonetaries:{qry:t+"qryPMO",set2:t+"set2PMO"},ProductDispersal:{qry:t+"qryPDI",get:t+"getPDI",set:t+"setPDI",del:t+"delPDI"},ProductSchedules:{qry:t+"qryPSC",set2:t+"set2PSC"},ProductScheduleRanges:{qry:t+"qryPSR",set2:t+"set2PSR"},ProductScheduleFees:{qry:t+"qryPSF",set2:t+"set2PSF"},ProductDispersalAgents:{qry:t+"qryPDA",set2:t+"set2PDA"},Correspondent:{page:t+"pageCOR",qry:t+"qryCOR",qry2:t+"qry2COR",get:t+"getCOR",set:t+"setCOR",del:t+"delCOR",snapshot:t+"snapshotCOR"},CorrespondentCountry:{qry:t+"qryCCO",get:t+"getCCO",set2:t+"set2CCO",del:t+"delCCO"},CorrespondentCurrency:{qry:t+"qryCCU",get:t+"getCCU",set2:t+"set2CCU",del:t+"delCCU"},CorrespondentAgents:{qry:t+"qryAGT",page:t+"pageAGT",get:t+"getAGT",set:t+"setAGT",del:t+"delAGT"},CorrespondentAgentBranches:{qry:t+"qryABR",page:t+"pageABR",get:t+"getABR",set:t+"setABR",del:t+"delABR"},CorrespondentExchangeMap:{qry:t+"qryEXC",set2:t+"set2EXC"},CurrencyExchangeMap:{qry:t+"qryEXG",set2:t+"set2EXG"},CorrespondentExchangeBuyMap:{qry:t+"qryEXB",set2:t+"set2EXB"},ExchangeRates:{get:t+"getEXB",qry:t+"qryEXG2",set2:t+"set2EXB"},RtDefault:{qry:t+"qryDE",set2:t+"set2DE"},Profession:{qry:t+"qryPFN",page:t+"pagePFN",get:t+"getPFN",set:t+"setPFN",del:t+"delPFN",snapshot:t+"snapshotPFN"},ClientIndividual:{qry:t+"qryCLI"},SalaryRange:{qry:t+"qrySRA",page:t+"pageSRA",get:t+"getSRA",set:t+"setSRA",del:t+"delSRA"},SourceOfIncome:{qry:t+"qrySI",page:t+"pageSI",snapshot:t+"snapshotSI",get:t+"getSI",set:t+"setSI",del:t+"delSI"},CorrespondentControl:{qry:t+"qryCCL",set:t+"set2CCL"},InterfaceMaps:{qry:t+"qryIFM",get:t+"getIFM",set2:t+"set2IFM"},SourceOfIncomeType:{qry:t+"qrySIT",snapshot:t+"snapshotSIT",page:t+"pageSIT",get:t+"getSIT",set:t+"setSIT",del:t+"delSIT"},ProfessionGroups:{qry:t+"qryPFG",page:t+"pagePFG",snapshot:t+"snapshotPFG",get:t+"getPFG",set:t+"setPFG",del:t+"delPFG"},CorrespondentGroup:{qry:t+"qryCGP",page:t+"pageCGP",get:t+"getCGP",set:t+"setCGP",del:t+"delCGP"},ExtraIncome:{qry:t+"qryEI",get:t+"getEI",del:t+"delEI",page:t+"pageEI",snapshot:t+"snapshotEI",set:t+"setEI"},CountryRisk:{page:t+"pageCOU",get:t+"getCOU",set:t+"setCOU",del:t+"delCOU"},CorDispControl:{qry:t+"qryCDC",set2:t+"set2CDC"},CorrespondentDispersal:{qry:t+"qryCDM",get:t+"getCDM",del:t+"delCDM",set2:t+"set2CDM"},CorrespondentDispersalRate:{qry:t+"qryCDR",set2:t+"set2CDR"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=43429)}),_N_E=e.O()}]);