(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44158],{34824:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-categ-price-group",function(){return a(87309)}])},87309:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return j}});var t=a(52322),n=a(2784),i=a(62202),c=a(69387),d=a(65950),o=a(71987),l=a(26612),s=a(31389),u=a(33625),g=a(62362),p=a(61802),y=a(19473),m=a(36908),I=a(22341),x=a(60218),f=a(48601),P=a(82737),h=a(80983),C=a(91406),v=a(8661),_=a(65215);function N(e){let{labels:r,maxAccess:a,record:c,recordId:u}=e,{getRequest:p,postRequest:m}=(0,n.useContext)(d.$),{platformLabels:N}=(0,n.useContext)(y.l),j=(0,o.E)({endpointId:I.P.CategoryPriceGroup.page}),{formik:w}=(0,h.c)({initialValues:{recordId:u,pgId:null,categoryId:null,unitPrice:null},validateOnChange:!0,validationSchema:f.Ry({unitPrice:f.Rx().required(),pgId:f.Rx().required(),categoryId:f.Rx().required()}),onSubmit:async e=>{let r=w.values.categoryId,a=w.values.pgId;await m({extension:I.P.CategoryPriceGroup.set,record:JSON.stringify(e)}),r||a?i.ZP.success(N.Edited):i.ZP.success(N.Added),w.setFieldValue("recordId",String(10*e.pgId)+String(e.categoryId)),j()}}),A=!!w.values.recordId;return(0,n.useEffect)(()=>{!async function(){if(c&&c.pgId&&c.categoryId&&u){let e=await p({extension:I.P.CategoryPriceGroup.get,parameters:"_pgId=".concat(c.pgId,"&_categoryId=").concat(c.categoryId)});w.setValues({...e.record,recordId:String(10*e.record.pgId)+String(e.record.categoryId)})}}()},[]),(0,t.jsx)(P.Z,{resourceId:l.i.CategoryPriceGroup,form:w,maxAccess:a,editMode:A,children:(0,t.jsx)(s.R,{children:(0,t.jsx)(g.Q,{children:(0,t.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(v.Z,{endpointId:I.P.PriceGroups.qry,name:"pgId",label:r.priceGroup,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:A,required:!0,values:w.values,maxAccess:a,onChange:(e,r)=>{w.setFieldValue("pgId",(null==r?void 0:r.recordId)||null)},onClear:()=>w.setFieldValue("pgId",""),error:w.touched.pgId&&!!w.errors.pgId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(v.Z,{endpointId:_.$.Category.qry,parameters:"_pagesize=30&_startAt=0&_name=",name:"categoryId",required:!0,label:r.itemCategory,valueField:"recordId",displayField:["caRef","name"],columnsInDropDown:[{key:"caRef",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:1,readOnly:A,values:null==w?void 0:w.values,maxAccess:a,onChange:(e,r)=>{w.setFieldValue("categoryId",(null==r?void 0:r.recordId)||null)},error:w.touched.categoryId&&!!w.errors.categoryId})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(C.Z,{name:"unitPrice",label:r.unitPrice,value:w.values.unitPrice,onChange:w.handleChange,maxAccess:a,onClear:()=>w.setFieldValue("unitPrice",""),required:!0,maxLength:12,decimalScale:2,error:w.touched.unitPrice&&!!w.errors.unitPrice})})]})})})})}var j=()=>{let{getRequest:e,postRequest:r}=(0,n.useContext)(d.$),{platformLabels:a}=(0,n.useContext)(y.l),{stack:x}=(0,p.zY)();async function f(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:t=50,params:n}=r;return{...await e({extension:I.P.CategoryPriceGroup.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(t,"&_params=").concat(n||"")}),_startAt:a}}async function P(e){let{filters:r,pagination:a}=e;return f({_startAt:a._startAt||0,params:null==r?void 0:r.params})}let{query:{data:h},labels:C,filterBy:v,paginationParameters:_,refetch:j,access:w,invalidate:A}=(0,o.J)({queryFn:f,endpointId:I.P.CategoryPriceGroup.page,datasetId:l.i.CategoryPriceGroup,filter:{filterFn:P}}),S=[{field:"pgRef",headerName:C.pgRef,flex:1},{field:"pgName",headerName:C.pgName,flex:1},{field:"categoryName",headerName:C.itemCategory,flex:1},{field:"unitPrice",headerName:C.unitPrice,flex:1,type:"number"}];async function G(e){x({Component:N,props:{labels:C,record:e,recordId:e?String(10*e.pgId)+String(e.categoryId):null,maxAccess:w},width:500,height:300,title:C.CategoryPriceGroup})}let R=async e=>{await r({extension:I.P.CategoryPriceGroup.del,record:JSON.stringify(e)}),A(),i.ZP.success(a.Deleted)};return(0,t.jsxs)(s.R,{children:[(0,t.jsx)(u.g,{children:(0,t.jsx)(m.Z,{onAdd:()=>{G()},hasSearch:!1,maxAccess:w,reportName:"SAPGC",filterBy:v,previewReport:l.i.CategoryPriceGroup})}),(0,t.jsx)(g.Q,{children:(0,t.jsx)(c.Z,{name:"table",columns:S,gridData:h,rowId:["recordId"],onEdit:e=>{G(e)},onDelete:R,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:_,refetch:j,maxAccess:w})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=34824)}),_N_E=e.O()}]);