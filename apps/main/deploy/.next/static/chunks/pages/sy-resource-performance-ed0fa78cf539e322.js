(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19655],{34121:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sy-resource-performance",function(){return l(33058)}])},33058:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return N}});var n=l(52322),r=l(60218),t=l(80983),s=l(48601),o=l(2784),i=l(71987),d=l(65950),u=l(69387),c=l(26612),m=l(8661),v=l(84100),x=l(38449),h=l(31389),D=l(33625),f=l(91406),p=l(69627),j=l(19473),I=l(39812),g=l(62362),T=l(93883),Z=l(5088),y=l(21581);function b(e){var a,l,s,u,m,v,D,f;let{recordId:p}=e,{getRequest:j}=(0,o.useContext)(d.$),{labels:b,access:w}=(0,i.J)({datasetId:c.i.TransactionLogPerformance}),{formik:N}=(0,t.c)({initialValues:{data:"",eventDt:null,masterRef:null,recordId:null,resourceId:null,resourceName:"",ttName:"",userName:""},maxAccess:w,validateOnChange:!0});return(0,o.useEffect)(()=>{!async function(){if(p){var e;let a=await j({extension:x.r.TransactionLog.get,parameters:"_recordId=".concat(p)});N.setValues({...a.record,recordId:p,eventDt:(0,I.a1)(null===(e=a.record)||void 0===e?void 0:e.eventDt)})}}()},[]),(0,n.jsx)(h.R,{children:(0,n.jsx)(g.Q,{children:(0,n.jsxs)(r.ZP,{container:!0,spacing:2,p:4,children:[(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"userName",value:null==N?void 0:null===(a=N.values)||void 0===a?void 0:a.userName,label:b.username,readOnly:!0,maxAccess:w})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"ttName",value:null==N?void 0:null===(l=N.values)||void 0===l?void 0:l.ttName,label:b.ttName,readOnly:!0,maxAccess:w})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"resourceId",value:null==N?void 0:null===(s=N.values)||void 0===s?void 0:s.resourceId,label:b.resourceId,readOnly:!0,maxAccess:w})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"resourceName",value:null==N?void 0:null===(u=N.values)||void 0===u?void 0:u.resourceName,label:b.resourceName,readOnly:!0,maxAccess:w})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"recordId",value:null==N?void 0:null===(m=N.values)||void 0===m?void 0:m.recordId,label:b.recordId,readOnly:!0,maxAccess:w})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"masterRef",value:null==N?void 0:null===(v=N.values)||void 0===v?void 0:v.masterRef,label:b.masterRef,readOnly:!0,maxAccess:w})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(T.Z,{name:"eventDt",label:b.eventDt,value:null==N?void 0:null===(D=N.values)||void 0===D?void 0:D.eventDt,readOnly:!0,maxAccess:w})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(y.Z,{name:"data",label:b.data,value:null==N?void 0:null===(f=N.values)||void 0===f?void 0:f.data,rows:6,readOnly:!0,maxAccess:w})})]})})})}var w=l(61802),N=()=>{var e,a,l,Z,y,N,P;let{getRequest:C}=(0,o.useContext)(d.$),{platformLabels:_}=(0,o.useContext)(j.l),{stack:F}=(0,w.zY)(),A=new Date,k=new Date(A.getTime()-3e5),{formik:O}=(0,t.c)({initialValues:{resourceId:null,moduleId:null,minimumDuration:null,fromDT:k,toDT:A},validateOnChange:!0,validationSchema:s.Ry({minimumDuration:s.Rx().required(),fromDT:s.hT().required(),toDT:s.hT().required()})});async function q(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:l=50}=e;if(null!==O.values.minimumDuration&&null!==O.values.fromDT&&null!==O.values.toDT)return{...await C({extension:x.r.ResourcePerformance.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(l,"&_resourceId=").concat(O.values.resourceId||0,"&_minimumDuration=").concat(O.values.minimumDuration,"&_fromDT=").concat((0,I.jW)(O.values.fromDT),"&_toDT=").concat((0,I.jW)(O.values.toDT))}),_startAt:a}}(0,o.useEffect)(()=>{let e=setInterval(()=>{let e=new Date,a=new Date(e.getTime()-3e5);O.setValues(l=>({...l,fromDT:a,toDT:e}))},6e4);return()=>clearInterval(e)},[]);let{query:{data:R},labels:V,access:E,refetch:S,paginationParameters:L}=(0,i.J)({queryFn:q,endpointId:x.r.ResourcePerformance.page,datasetId:c.i.TransactionLogPerformance}),B=async e=>{F({Component:b,props:{recordId:null==e?void 0:e.logId},width:500,height:600,title:_.TransactionLog})},z=[{field:"username",headerName:V.username,flex:1},{field:"resourceName",headerName:V.resourceName,flex:1},{field:"duration",headerName:V.duration,flex:1},{field:"requestTime",headerName:V.requestTime,flex:1,type:"dateTime",dateFormat:"hh:mm:ss a"},{field:"responseTime",headerName:V.responseTime,flex:1,type:"dateTime",dateFormat:"hh:mm:ss a"}];return(0,n.jsxs)(h.R,{children:[(0,n.jsx)(D.g,{children:(0,n.jsxs)(r.ZP,{container:!0,spacing:2,sx:{p:2},children:[(0,n.jsx)(r.ZP,{item:!0,xs:2,children:(0,n.jsx)(m.Z,{datasetId:v.v.MODULE,label:V.module,name:"moduleId",values:O.values,valueField:"key",displayField:"value",onChange:(e,a)=>{O.setFieldValue("moduleId",(null==a?void 0:a.key)||null),O.setFieldValue("resourceId","")},error:O.touched.moduleId&&!!O.errors.moduleId})}),(0,n.jsx)(r.ZP,{item:!0,xs:2,children:(0,n.jsx)(m.Z,{endpointId:O.values.moduleId&&x.r.ModuleClassRES.qry,parameters:"_moduleId=".concat(O.values.moduleId,"&_filter="),label:V.res,readOnly:!O.values.moduleId,name:"resourceId",values:O.values,valueField:"key",displayField:"value",onChange:(e,a)=>{O.setFieldValue("resourceId",(null==a?void 0:a.key)||null)},error:O.touched.resourceId&&!!O.errors.resourceId})}),(0,n.jsx)(r.ZP,{item:!0,xs:2,children:(0,n.jsx)(f.Z,{name:"minimumDuration",label:V.minimumDuration,required:!0,value:null==O?void 0:null===(e=O.values)||void 0===e?void 0:e.minimumDuration,maxAccess:E,onChange:O.handleChange,onClear:()=>O.setFieldValue("minimumDuration",""),error:O.touched.minimumDuration&&!!O.errors.minimumDuration})}),(0,n.jsx)(r.ZP,{item:!0,xs:2,children:(0,n.jsx)(T.Z,{name:"fromDT",label:V.fromDT,onChange:O.setFieldValue,maxAccess:E,required:!0,onClear:()=>O.setFieldValue("fromDT",null),value:null===(a=O.values)||void 0===a?void 0:a.fromDT,error:(null===(l=O.errors)||void 0===l?void 0:l.fromDT)&&!!(null===(Z=O.errors)||void 0===Z?void 0:Z.fromDT)})}),(0,n.jsx)(r.ZP,{item:!0,xs:2,children:(0,n.jsx)(T.Z,{name:"toDT",label:V.toDT,onChange:O.setFieldValue,maxAccess:E,required:!0,onClear:()=>O.setFieldValue("toDT",null),value:null===(y=O.values)||void 0===y?void 0:y.toDT,error:(null===(N=O.errors)||void 0===N?void 0:N.toDT)&&!!(null===(P=O.errors)||void 0===P?void 0:P.toDT)})}),(0,n.jsx)(r.ZP,{item:!0,xs:2,children:(0,n.jsx)(p.Z,{variant:"contained",label:_.Preview,image:"preview.png",onClick:()=>{O.validateForm().then(()=>{O.setTouched({moduleId:!0,resourceId:!0,minimumDuration:!0,fromDT:!0,toDT:!0})}),S()},color:"#231f20"})})]})}),(0,n.jsx)(g.Q,{children:(0,n.jsx)(u.Z,{columns:z,gridData:R,rowId:["logId"],pageSize:50,paginationType:"api",onEdit:B,paginationParameters:L,refetch:S,maxAccess:E})})]})}},93883:function(e,a,l){"use strict";var n=l(52322),r=l(2784),t=l(74143),s=l(44258),o=l(41633),i=l(45297),d=l(73980),u=l(11886),c=l(26698),m=l(32827),v=l(2494),x=l(81576),h=l(7087),D=l.n(h);a.Z=e=>{let{name:a,label:l,value:h,onChange:f,error:p,disabledRangeDate:j={},max:I=null,min:g=null,variant:T="outlined",size:Z="small",views:y=["year","month","day","hours","minutes"],fullWidth:b=!0,required:w=!1,autoFocus:N=!1,disabled:P=!1,disabledDate:C=null,readOnly:_=!1,editMode:F=!1,hasBorder:A=!0,hidden:k=!1,formatTime:O="hh:mm aa",defaultValue:q,...R}=e,V="".concat(window.localStorage.getItem("default")&&JSON.parse(window.localStorage.getItem("default")).dateFormat," ").concat(O),[E,S]=(0,r.useState)(!1),{_readOnly:L,_required:B,_hidden:z}=(0,x.W)(a,R.maxAccess,w,_,k),W=new Date(j.date);W.setDate(W.getDate()+j.day);let J=void 0===h?(()=>{let e;switch(q){case"today":e=new Date;break;case"yesterday":(e=new Date).setDate(e.getDate()-1);break;case"boy":e=new Date(new Date().getFullYear(),0,1);break;default:e=null}return e})():h;return z?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(o._,{dateAdapter:u.H,children:(0,n.jsx)(v.x,{variant:T,size:Z,value:J,label:l,views:y,minDate:g||j.date,maxDate:I||W,fullWidth:b,autoFocus:N,format:V,onChange:e=>f(a,e),onClose:()=>S(!1),open:E,disabled:P,readOnly:L,clearable:!0,shouldDisableDate:C&&(e=>{let a=new Date(e),l=new Date;return(l.setDate(l.getDate()),a.setDate(a.getDate()),">="===C)?a>=l:"<"===C?a<l:">"===C&&a>l}),slotProps:{popper:{disablePortal:!0},textField:{required:B,size:Z,fullWidth:b,error:p,inputProps:{tabIndex:L?-1:0},InputProps:{classes:{root:D().outlinedRoot,notchedOutline:A?D().outlinedFieldset:D().outlinedNoBorder,input:D().inputBase},endAdornment:!(L||P)&&(0,n.jsxs)(t.Z,{position:"end",className:D().inputAdornment,children:[J&&(0,n.jsx)(s.Z,{tabIndex:-1,edge:"start",onClick:()=>f(a,null),className:D().iconButton,children:(0,n.jsx)(i.Z,{className:D().icon})}),(0,n.jsx)(s.Z,{tabIndex:-1,onClick:()=>S(!0),className:D().iconButton,children:(0,n.jsx)(d.Z,{className:D().icon})})]})},InputLabelProps:{classes:{root:D().inputLabel,shrink:D().inputLabelShrink}}},actionBar:{actions:["accept","today"]}},slots:{actionBar:e=>(0,n.jsx)(c.Z,{...e,actions:["accept","today"]}),popper:e=>(0,n.jsx)(m.Z,{isDateTimePicker:!0,...e})}})})}}},function(e){e.O(0,[92515,2494,49774,92888,40179],function(){return e(e.s=34121)}),_N_E=e.O()}]);