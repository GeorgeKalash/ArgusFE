(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96122],{92471:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ca-adj-dtd/[functionId]",function(){return t(57744)}])},57744:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var a=t(52322),d=t(2784),r=t(62202),c=t(69387),l=t(27723),s=t(65950),o=t(71987),u=t(26612),i=t(31389),p=t(33625),f=t(62362),m=t(61802),I=t(19473),h=t(2119),x=t(60218),y=t(48601),D=t(82737),v=t(8661),g=t(80983),_=t(38449);function A(e){let{labels:n,maxAccess:t,recordId:c,functionId:l}=e,{getRequest:p,postRequest:m}=(0,d.useContext)(s.$),{platformLabels:A}=(0,d.useContext)(I.l),j=(0,o.E)({endpointId:h.G.DocumentTypeDefault.page}),{formik:N}=(0,g.c)({initialValues:{dtId:"",plantId:"",recordId:c||"",cashAccountId:null},maxAccess:t,validateOnChange:!0,validationSchema:y.Ry({dtId:y.Z_().required()}),onSubmit:async e=>{let n=e.recordId;await m({extension:h.G.DocumentTypeDefault.set,record:JSON.stringify(e)}),n||N.setFieldValue("recordId",e.dtId),r.ZP.success(A.Submit),j()}}),w=!!N.values.recordId;return(0,d.useEffect)(()=>{!async function(){if(c){let e=await p({extension:h.G.DocumentTypeDefault.get,parameters:"_dtId=".concat(c)});N.setValues({...e.record,recordId:c})}}()},[]),(0,a.jsx)(D.Z,{resourceId:u.i.FIDocTypeDefaults,form:N,maxAccess:t,editMode:w,children:(0,a.jsx)(i.R,{children:(0,a.jsx)(f.Q,{children:(0,a.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:_.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(l),name:"dtId",required:!0,label:n.doctype,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:w,valueField:"recordId",displayField:["reference","name"],values:N.values,maxAccess:t,onChange:(e,n)=>{N.setFieldValue("dtId",(null==n?void 0:n.recordId)||"")},error:N.touched.dtId&&!!N.errors.dtId})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:_.r.Plant.qry,name:"plantId",label:n.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:N.values,maxAccess:t,onChange:(e,n)=>{N.setFieldValue("plantId",(null==n?void 0:n.recordId)||"")},error:N.touched.plantId&&!!N.errors.plantId})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:h.G.CashAccount.qry,parameters:"_type=0",name:"cashAccountId",label:n.cashAccount,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:N.values,maxAccess:t,onChange:(e,n)=>{N.setFieldValue("cashAccountId",(null==n?void 0:n.recordId)||null)},error:N.touched.cashAccountId&&!!N.errors.cashAccountId})})]})})})})}var j=t(63165),N=()=>{let{getRequest:e,postRequest:n}=(0,d.useContext)(s.$),{platformLabels:t}=(0,d.useContext)(I.l),{stack:x}=(0,m.zY)(),{functionId:y}=(0,j.F)();async function D(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pagination:{_startAt:t=0,_pageSize:a=50}}=n;return{...await e({extension:h.G.DocumentTypeDefault.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(a,"&_functionId=").concat(y)}),_startAt:t}}let{query:{data:v},labels:g,access:_,paginationParameters:N,invalidate:w,refetch:F}=(0,o.J)({endpointId:h.G.DocumentTypeDefault.page,datasetId:u.i.AdjDocumentTypeDefault,filter:{filterFn:D,default:{functionId:y}}}),Z=[{field:"dtName",headerName:g.doctype,flex:1},{field:"plantName",headerName:g.plant,flex:1},{field:"cashAccountName",headerName:g.cashAccountName,flex:1}],C=async e=>{await n({extension:h.G.DocumentTypeDefault.del,record:JSON.stringify(e)}),w(),r.ZP.success(t.Deleted)};function T(e){x({Component:A,props:{labels:g,functionId:y,recordId:e,maxAccess:_},width:500,height:360,title:g.doctypeDefault})}return(0,a.jsxs)(i.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(l.Z,{onAdd:()=>{T()},maxAccess:_})}),(0,a.jsx)(f.Q,{children:(0,a.jsx)(c.Z,{columns:Z,gridData:v,rowId:["dtId"],onEdit:e=>{T(null==e?void 0:e.dtId)},onDelete:C,isLoading:!1,pageSize:50,paginationParameters:N,refetch:F,paginationType:"api",maxAccess:_})})]})}},63165:function(e,n,t){"use strict";t.d(n,{F:function(){return r}});var a=t(5632),d=t(2784);let r=()=>{let e=(0,a.useRouter)(),[n,t]=(0,d.useState)(e.query);return n}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=92471)}),_N_E=e.O()}]);