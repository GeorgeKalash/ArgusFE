(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82320],{87467:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mf-job-orders",function(){return r(57783)}])},57783:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(52322),n=r(2784),d=r(71987),i=r(65950),o=r(69387),s=r(62202),l=r(61802),c=r(26612),f=r(31389),u=r(33625),m=r(62362),p=r(19473),h=r(98345),x=r(7121),y=r(36908),N=r(41872),_=r(90587),g=r(78618),b=r(58276),w=()=>{let{postRequest:e,getRequest:t}=(0,n.useContext)(i.$),{platformLabels:r}=(0,n.useContext)(p.l),{stack:w,lockRecord:O}=(0,l.zY)(),{addLockedScreen:J}=(0,n.useContext)(b.Z),{query:{data:D},filterBy:C,refetch:F,labels:I,access:T,paginationParameters:j,invalidate:q}=(0,d.J)({queryFn:A,endpointId:_.u.MFJobOrder.qry,datasetId:c.i.MFJobOrders,filter:{filterFn:M}}),v=[{field:"reference",headerName:I.reference,flex:1},{field:"date",headerName:I.date,flex:1,type:"date"},{field:"designRef",headerName:I.design,flex:1},{field:"clientName",headerName:I.client,flex:1},{field:"itemName",headerName:I.item,flex:1},{field:"wcName",headerName:I.workCenter,flex:1},{field:"className",headerName:I.productionClass,flex:1},{field:"standardRef",headerName:I.productionStandard,flex:1},{field:"pcs",headerName:I.pcs,flex:1,type:"number"},{field:"qty",headerName:I.qty,flex:1,type:"number"},{field:"statusName",headerName:I.status,flex:1},{field:"startingDT",headerName:I.startingDate,flex:1,type:"date"},{field:"deliveryDate",headerName:I.deliveryDate,flex:1,type:"date"},{field:"endingDT",headerName:I.endingDate,flex:1,type:"date"}];async function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50,params:n=[]}=e;return{...await t({extension:_.u.MFJobOrder.qry,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a,"&_sortBy=recordId desc&_params=").concat(n,"&filter=")}),_startAt:r}}async function M(e){let{filters:r,pagination:a}=e;return r.qry?await t({extension:_.u.MFJobOrder.snapshot,parameters:"_filter=".concat(r.qry)}):A({_startAt:a._startAt||0,params:null==r?void 0:r.params})}let{proxyAction:k}=(0,h.G)({functionId:x.J.JobOrder,action:S}),E=async()=>{k()};async function Z(e,t){w({Component:N.Z,props:{labels:I,access:T,recordId:e,jobReference:t,lockRecord:O,invalidate:q},width:1150,height:720,title:I.jobOrder,nextToTitle:t})}let R=async t=>{await e({extension:_.u.MFJobOrder.del,record:JSON.stringify(t)}),q(),s.ZP.success(r.Deleted)};async function S(e,t,a){e&&3!==a?await O({recordId:e,reference:t,resourceId:c.i.MFJobOrders,onSuccess:()=>{J({resourceId:c.i.MFJobOrders,recordId:e,reference:t}),Z(e,t)},isAlreadyLocked:e=>{w({Component:g.Z,props:{DialogText:"".concat(r.RecordLocked," ").concat(e),width:600,height:200,title:r.Dialog}})}}):Z(e,t)}return(0,a.jsxs)(f.R,{children:[(0,a.jsx)(u.g,{children:(0,a.jsx)(y.Z,{onAdd:E,maxAccess:T,filterBy:C,reportName:"MFJOB"})}),(0,a.jsx)(m.Q,{children:(0,a.jsx)(o.Z,{name:"jobTable",columns:v,gridData:D,rowId:["recordId"],onEdit:e=>{S(null==e?void 0:e.recordId,null==e?void 0:e.reference,null==e?void 0:e.status)},refetch:F,onDelete:R,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,maxAccess:T,paginationParameters:j,paginationType:"api"})})]})}}},function(e){e.O(0,[92515,2494,36908,74550,98434,41872,49774,92888,40179],function(){return e(e.s=87467)}),_N_E=e.O()}]);