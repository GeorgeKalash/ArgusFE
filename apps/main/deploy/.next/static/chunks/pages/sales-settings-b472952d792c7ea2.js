(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30446],{63298:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sales-settings",function(){return a(57602)}])},57602:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return w}});var s=a(52322),n=a(2784),i=a(61802),t=a(26612),r=a(60218),d=a(48601),u=a(62202),c=a(65950),o=a(31389),m=a(62362),x=a(80983),v=a(19473),p=a(8661),h=a(22341),I=a(38449),y=a(65215),f=a(91406),g=a(84100),j=a(75991),F=a(19689),N=a(54074);function Z(e){var l,a,i,t,Z,w;let{_labels:C,access:P}=e,{postRequest:b}=(0,n.useContext)(c.$),{platformLabels:D,defaultsData:S}=(0,n.useContext)(v.l),k=["plId","ptId","currencyId","siteId","maxReturnDays","SAFIIntegration","sdpClientName","sdpItemName","sdpUnitPrice","allowSalesNoLinesTrx","salesTD"],{formik:A}=(0,x.c)({initialValues:{plId:null,ptId:null,currencyId:null,siteId:null,maxReturnDays:null,SAFIIntegration:null,sdpClientName:!1,sdpItemName:!1,sdpUnitPrice:!1,allowSalesNoLinesTrx:!1,salesTD:!1},maxAccess:P,validateOnChange:!0,validationSchema:d.Ry({maxReturnDays:d.Rx().nullable().test("is-empty-or-valid","Value must be between 0 and 9999",e=>""==e||null==e||"number"==typeof e&&e>=0&&e<=9999)}),onSubmit:async e=>{var l=[];Object.entries(e).forEach(e=>{let[a,s]=e;l.push({key:a,value:s})}),k.forEach(e=>{l.some(l=>l.key===e)||l.push({key:e})}),await b({extension:I.r.Defaults.set,record:JSON.stringify({sysDefaults:l})})&&u.ZP.success(D.Edited)}});return(0,n.useEffect)(()=>{var e;let l=e=>{var l;switch(null===(l=e.value)||void 0===l?void 0:l.toLowerCase()){case"true":return!0;case"false":return!1;default:return e.value?parseInt(e.value):null}},a=null==S?void 0:null===(e=S.list)||void 0===e?void 0:e.filter(e=>k.includes(e.key)),s=null==a?void 0:a.reduce((e,a)=>(e[a.key]=l(a),e),{});s&&A.setValues(s)},[]),(0,s.jsx)(N.Z,{onSave:A.handleSubmit,maxAccess:P,children:(0,s.jsx)(o.R,{children:(0,s.jsx)(m.Q,{children:(0,s.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(r.ZP,{item:!0,xs:11.5,children:(0,s.jsx)(j.Z,{title:C.salesDefaultValues,children:(0,s.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{endpointId:h.P.PriceLevel.qry,name:"plId",label:C.priceLevel,valueField:"recordId",displayField:["reference","name"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:null==A?void 0:A.values,maxAccess:P,onChange:(e,l)=>A.setFieldValue("plId",null==l?void 0:l.recordId)})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{endpointId:h.P.PaymentTerms.qry,name:"ptId",label:C.paymentTerm,valueField:"recordId",displayField:["reference","name"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:null==A?void 0:A.values,maxAccess:P,onChange:(e,l)=>A.setFieldValue("ptId",null==l?void 0:l.recordId)})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{endpointId:I.r.Currency.qry,name:"currencyId",label:C.currencyName,valueField:"recordId",displayField:["reference","name","flName"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],values:null==A?void 0:A.values,maxAccess:P,onChange:(e,l)=>A.setFieldValue("currencyId",null==l?void 0:l.recordId),error:A.touched.currencyId&&!!A.errors.currencyId})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{endpointId:y.$.Site.qry,name:"siteId",label:C.site,values:null==A?void 0:A.values,displayField:"name",maxAccess:P,onChange:(e,l)=>A.setFieldValue("siteId",null==l?void 0:l.recordId),error:A.touched.siteId&&!!A.errors.siteId})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{name:"maxReturnDays",label:C.maxReturnDays,value:null==A?void 0:null===(l=A.values)||void 0===l?void 0:l.maxReturnDays,onChange:A.handleChange,onClear:()=>A.setFieldValue("maxReturnDays",""),error:A.touched.maxReturnDays&&!!A.errors.maxReturnDays})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{datasetId:g.v.SA_FI_INTEGRATION,name:"SAFIIntegration",label:C.SAFIIntegration,values:null==A?void 0:A.values,valueField:"key",displayField:"value",maxAccess:P,onChange:(e,l)=>A.setFieldValue("SAFIIntegration",l?l.key:""),error:A.touched.SAFIIntegration&&!!A.errors.SAFIIntegration})})]})})}),(0,s.jsx)(r.ZP,{item:!0,xs:11.5,children:(0,s.jsxs)(j.Z,{title:C.salesColumnsDisabled,children:[(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"sdpClientName",value:null===(a=A.values)||void 0===a?void 0:a.sdpClientName,onChange:e=>A.setFieldValue("sdpClientName",e.target.checked),label:C.sdpClientName,maxAccess:P})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"sdpItemName",value:null===(i=A.values)||void 0===i?void 0:i.sdpItemName,onChange:e=>A.setFieldValue("sdpItemName",e.target.checked),label:C.sdpItemName,maxAccess:P})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"sdpUnitPrice",value:null===(t=A.values)||void 0===t?void 0:t.sdpUnitPrice,onChange:e=>A.setFieldValue("sdpUnitPrice",e.target.checked),label:C.sdpUnitPrice,maxAccess:P})})]})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"allowSalesNoLinesTrx",value:null===(Z=A.values)||void 0===Z?void 0:Z.allowSalesNoLinesTrx,onChange:e=>A.setFieldValue("allowSalesNoLinesTrx",e.target.checked),label:C.allowSalesNoLinesTrx,maxAccess:P})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"salesTD",value:null===(w=A.values)||void 0===w?void 0:w.salesTD,onChange:e=>A.setFieldValue("salesTD",e.target.checked),label:C.salesTD,maxAccess:P})})]})})})})}var w=()=>(0,s.jsx)(i.ut,{datasetId:t.i.SalesDefaults,labelKey:"salesSettings",Component:Z,height:600})},75991:function(e,l,a){"use strict";var s=a(52322),n=a(60218),i=a(76385);l.Z=e=>{let{children:l,title:a,form:t=!1,...r}=e;return(0,s.jsxs)(n.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:a?{xs:.75,sm:1,md:1.25}:0,p:t?0:"clamp(8px, 0.8vw, 14px)",pt:t?0:a?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...r.sx},children:[!!a&&(0,s.jsx)(i.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:a}),l]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=63298)}),_N_E=e.O()}]);