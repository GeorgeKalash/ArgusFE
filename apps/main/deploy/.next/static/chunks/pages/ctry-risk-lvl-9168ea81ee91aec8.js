(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95238],{67226:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ctry-risk-lvl",function(){return n(59911)}])},59911:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return N}});var t=n(52322),s=n(2784),i=n(62202),a=n(69387),d=n(65950),o=n(71987),c=n(26612),l=n(31389),u=n(33625),y=n(62362),f=n(61802),m=n(19473),v=n(60218),p=n(48601),x=n(82737),h=n(80983),k=n(8661),I=n(38449),_=n(24074),C=n(53621);function g(e){let{labels:r,maxAccess:n,recordId:a}=e,{getRequest:u,postRequest:f}=(0,s.useContext)(d.$),{platformLabels:g}=(0,s.useContext)(m.l),R=(0,o.E)({endpointId:C.d.CountryRisk.page}),{formik:N}=(0,h.c)({initialValues:{recordId:a,countryId:null,riskLevel:null},maxAccess:n,validateOnChange:!0,validationSchema:p.Ry({countryId:p.Z_().required(),riskLevel:p.Z_().required()}),onSubmit:async e=>{await f({extension:C.d.CountryRisk.set,record:JSON.stringify(e)}),e.recordId?i.ZP.success(g.Edited):(i.ZP.success(g.Added),N.setFieldValue("recordId",null==e?void 0:e.countryId)),R()}}),w=!!N.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(a){let e=await u({extension:C.d.CountryRisk.get,parameters:"_countryId=".concat(a)});N.setValues({...e.record,recordId:e.record.countryId})}}()},[]),(0,t.jsx)(x.Z,{resourceId:c.i.CountryRiskLevel,form:N,maxAccess:n,editMode:w,children:(0,t.jsx)(l.R,{children:(0,t.jsx)(y.Q,{children:(0,t.jsxs)(v.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(v.ZP,{item:!0,xs:12,children:(0,t.jsx)(k.Z,{endpointId:I.r.Country.qry,name:"countryId",label:r.country,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:1,readOnly:w,values:N.values,onChange:(e,r)=>{N.setFieldValue("countryId",r?r.recordId:"")},error:N.touched.countryId&&!!N.errors.countryId,maxAccess:n,required:!0})}),(0,t.jsx)(v.ZP,{item:!0,xs:12,children:(0,t.jsx)(k.Z,{endpointId:_.u.RiskLevel.qry,name:"riskLevel",label:r.riskLevel,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,values:N.values,onChange:(e,r)=>{N.setFieldValue("riskLevel",(null==r?void 0:r.recordId)||null)},error:N.touched.riskLevel&&!!N.errors.riskLevel,maxAccess:n})})]})})})})}var R=n(36908),N=()=>{let{getRequest:e,postRequest:r}=(0,s.useContext)(d.$),{platformLabels:n}=(0,s.useContext)(m.l),{stack:v}=(0,f.zY)();async function p(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50,params:s}=r;return{...await e({extension:C.d.CountryRisk.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t,"&_params=").concat(s||"")}),_startAt:n}}async function x(e){let{filters:r,pagination:n}=e;return p({_startAt:n._startAt||0,params:null==r?void 0:r.params})}let{query:{data:h},labels:k,paginationParameters:I,filterBy:_,refetch:N,invalidate:w,access:L}=(0,o.J)({queryFn:p,endpointId:C.d.CountryRisk.page,datasetId:c.i.CountryRiskLevel,filter:{filterFn:x}}),j=[{field:"countryRef",headerName:k.countryRef,flex:1},{field:"countryName",headerName:k.countryName,flex:1},{field:"riskLevelName",headerName:k.riskLevelName,flex:1}];function Z(e){v({Component:g,props:{labels:k,recordId:e,maxAccess:L},width:500,height:300,title:k.countryRiskLevel})}let A=async e=>{await r({extension:C.d.CountryRisk.del,record:JSON.stringify(e)}),w(),i.ZP.success(n.Deleted)};return(0,t.jsxs)(l.R,{children:[(0,t.jsx)(u.g,{children:(0,t.jsx)(R.Z,{hasSearch:!1,onAdd:()=>{Z()},maxAccess:L,filterBy:_,reportName:"RTCOU"})}),(0,t.jsx)(y.Q,{children:(0,t.jsx)(a.Z,{columns:j,gridData:h,rowId:["recordId"],onEdit:e=>{Z(null==e?void 0:e.countryId)},onDelete:A,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:I,refetch:N,maxAccess:L})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=67226)}),_N_E=e.O()}]);