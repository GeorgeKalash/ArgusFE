(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44222],{41592:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inbound-transportation",function(){return t(25089)}])},25089:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var r=t(52322),a=t(30043),l=t(26612),i=t(7121),s=t(98345),o=t(71987),d=t(19473),c=t(58276),u=t(65950),v=t(61802),p=t(2784),m=t(62202),h=t(60218),f=t(48601),x=t(28879),I=t.n(x),g=t(96026),y=t(80983),T=t(39812),b=t(84309),j=t(82737),w=t(31389),N=t(33625),P=t(8661),R=t(69627),V=t(5088),Z=t(89330),O=t(28298),C=t(62362),F=t(21581),k=t(91406),A=t(27423),D=t(69387);function S(e){var n,t,c,x,S;let{labels:q,maxAccess:_,recordId:E}=e,{getRequest:U,postRequest:L}=(0,p.useContext)(u.$),{platformLabels:B,userDefaultsData:W}=(0,p.useContext)(d.l),{stack:z}=(0,v.zY)(),{stack:J}=(0,g.V)(),H=parseInt(null==W?void 0:null===(t=W.list)||void 0===t?void 0:null===(n=t.find(e=>{let{key:n}=e;return"plantId"===n}))||void 0===n?void 0:n.value)||null,{documentType:M,maxAccess:$,changeDT:Q}=(0,s.H)({functionId:i.J.InboundTransportation,access:_,enabled:!E}),G=(0,o.E)({endpointId:a.U.InboundTransp.page}),{formik:Y}=(0,y.c)({maxAccess:$,initialValues:{recordId:null,reference:"",plantId:H,tripId:null,tripRef:"",vehicleId:null,driverId:null,date:new Date,arrivalTime:null,convertedArrivalTime:null,notes:"",dtId:null,status:1,items:[]},documentType:{key:"dtId",value:null==M?void 0:M.dtId},validationSchema:f.Ry({vehicleId:f.Rx().required(),driverId:f.Rx().required(),tripId:f.Rx().required(),date:f.hT().required()}),onSubmit:async e=>{let n={...e};delete n.items;let t=((null==e?void 0:e.items)||[]).map(e=>({...e,deliveryStatus:e.checked?3:1})),r=await L({extension:a.U.InboundTransp.set2,record:JSON.stringify({header:{...n,date:(0,T.ku)(n.date),arrivalTime:(null==n?void 0:n.arrivalTime)?(0,T.ku)(function(e,n){let t=I()(e).startOf("day");if(n){let e=I()(n,"hh:mm A");return t.set("hour",e.hour()).set("minute",e.minute())}return t}(n.arrivalTime,n.convertedArrivalTime)):null},items:t})});m.ZP.success(e.recordId?B.Edited:B.Added),er(null==r?void 0:r.recordId),G()}});function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return{totalVolume:0,totalWeight:0};let{totalWeight:n,totalVolume:t}=e.reduce((e,n)=>(e.totalWeight+=Number(null==n?void 0:n.soWeight)||0,e.totalVolume+=Number(null==n?void 0:n.soVolume)||0,e),{totalWeight:0,totalVolume:0});return{totalVolume:t.toFixed(2),totalWeight:n.toFixed(2)}}let K=3==Y.values.status,ee=!!Y.values.recordId;async function en(e){return await U({extension:a.U.InboundTransp.get2,parameters:"_recordId=".concat(e)})}function et(e){if(!Object.keys(e).length)return{};let n=(null==e?void 0:e.arrivalTime)?(0,T.a1)(null==e?void 0:e.arrivalTime):null;return{...e,date:(null==e?void 0:e.date)?(0,T.a1)(null==e?void 0:e.date):null,arrivalTime:n,...n&&{convertedArrivalTime:I()(I()(n),"hh:mm A")}}}async function er(e){var n,t;let r=await en(e);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=et(e||{}),r=(n||[]).map(e=>({...e,checked:(null==e?void 0:e.deliveryStatus)==3})),a=X(n);Y.setValues({...Y.values,...t,items:r,...a})}((null==r?void 0:null===(n=r.record)||void 0===n?void 0:n.header)||{},(null==r?void 0:null===(t=r.record)||void 0===t?void 0:t.items)||[])}let ea=[{key:"Locked",condition:K,onClick:"onUnpostConfirmation",onSuccess:async()=>{let e=await L({extension:a.U.InboundTransp.unpost,record:JSON.stringify(Y.values)});m.ZP.success(B.Unposted),er(null==e?void 0:e.recordId),G()},disabled:!ee},{key:"Unlocked",condition:!K,onClick:async()=>{let e=await L({extension:a.U.InboundTransp.post,record:JSON.stringify(Y.values)});m.ZP.success(B.Posted),await eo(),G(),z({Component:b.R,props:{recordId:(null==e?void 0:e.recordId)||null,onComplete:async()=>{await ed()}},closable:!1})},disabled:!ee}],el=[{field:"soRef",headerName:q.reference,flex:1},{field:"soDate",headerName:q.date,flex:1,type:"date"},{field:"clientName",headerName:q.client,flex:1},{field:"szName",headerName:q.salesZone,flex:1},{field:"soVolume",headerName:q.volume,flex:1,type:"number"},{field:"qty",headerName:q.qty,flex:1,type:"number"},{field:"deliveredQty",headerName:q.deliveredQty,flex:1,type:"number"},{field:"deliveryStatusName",headerName:q.deliveryStatus,flex:1},{field:"isNotified",headerName:q.isNotified,type:"checkbox",flex:1}];function ei(){Y.setFieldValue("totalWeight",0),Y.setFieldValue("totalVolume",0),Y.setFieldValue("items",[])}async function es(){if(!Y.values.tripId){ei();return}let e=await U({extension:a.U.TripOrder.qry,parameters:"_tripId=".concat(Y.values.tripId)});if(!(null==e?void 0:e.list.length)){J({message:q.noOrders}),Y.setFieldValue("totalWeight",0),Y.setFieldValue("totalVolume",0),Y.setFieldValue("tripId",null),Y.setFieldValue("tripRef","");return}let n=X(null==e?void 0:e.list);Y.setValues({...Y.values,items:((null==e?void 0:e.list)||[]).map(e=>({...e,qty:(null==e?void 0:e.soQty)||0})),...n})}async function eo(){if(!Y.values.recordId)return;let e=await U({extension:a.U.InboundTransp.get,parameters:"_recordId=".concat(Y.values.recordId)}),n=et((null==e?void 0:e.record)||{});Y.setValues(e=>{let{items:t,totalVolume:r,totalWeight:a,...l}=e;return{...l,...n,items:t,totalVolume:r,totalWeight:a}})}async function ed(){if(!Y.values.recordId){ei();return}let e=await U({extension:a.U.InboundOrders.qry,parameters:"_inboundId=".concat(Y.values.recordId)}),n=X(null==e?void 0:e.list);Y.setValues(t=>({...t,items:((null==e?void 0:e.list)||[]).map(e=>({...e,checked:(null==e?void 0:e.deliveryStatus)==3})),...n}))}return(0,p.useEffect)(()=>{E&&er(E)},[]),(0,r.jsx)(j.Z,{resourceId:l.i.InboundTransportation,form:Y,maxAccess:$,editMode:ee,actions:ea,functionId:i.J.InboundTransportation,disabledSubmit:K,previewReport:ee,children:(0,r.jsxs)(w.R,{children:[(0,r.jsx)(N.g,{children:(0,r.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(P.Z,{endpointId:a.U.InboundTransp.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.documentTypes},filter:ee?void 0:e=>1==e.activeStatus,name:"dtId",label:q.docType,readOnly:ee,valueField:"recordId",displayField:"name",values:Y.values,onChange:async(e,n)=>{Y.setFieldValue("dtId",(null==n?void 0:n.recordId)||null),Q(n)},error:Y.touched.dtId&&!!Y.errors.dtId,maxAccess:$})}),(0,r.jsx)(h.ZP,{item:!0,xs:3,children:(0,r.jsx)(A.U,{endpointId:a.U.Trip.snapshot2,valueField:"reference",displayField:"name",secondFieldLabel:q.name,name:"tripId",label:q.trip,form:Y,required:!0,valueShow:"tripRef",readOnly:K||ee,secondDisplayField:!1,maxAccess:$,onChange:async(e,n)=>{Y.setFieldValue("tripId",(null==n?void 0:n.recordId)||null),Y.setFieldValue("tripRef",(null==n?void 0:n.reference)||""),Y.setFieldValue("driverId",(null==n?void 0:n.driverId)||null),Y.setFieldValue("vehicleId",(null==n?void 0:n.vehicleId)||null)},errorCheck:"tripId"})}),(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(R.Z,{onClick:es,image:"preview.png",tooltipText:B.Preview,disabled:K||!Y.values.tripId||ee})}),(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(P.Z,{endpointId:a.U.InboundTransp.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.plants},name:"plantId",label:q.plant,valueField:"recordId",readOnly:K,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:Y.values,maxAccess:$,onChange:(e,n)=>Y.setFieldValue("plantId",(null==n?void 0:n.recordId)||null),error:Y.touched.plantId&&!!Y.errors.plantId})}),(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(V.Z,{name:"reference",label:q.reference,value:Y.values.reference,readOnly:ee,maxAccess:$,onChange:Y.handleChange,onClear:()=>Y.setFieldValue("reference",""),error:Y.touched.reference&&!!Y.errors.reference})}),(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(Z.Z,{name:"arrivalTime",label:q.arrivalDate,value:null===(c=Y.values)||void 0===c?void 0:c.arrivalTime,onChange:(e,n)=>{Y.setFieldValue("arrivalTime",n),n||Y.setFieldValue("convertedArrivalTime","")},onClear:()=>Y.setFieldValue("arrivalTime",""),readOnly:K,maxAccess:$,error:Y.touched.arrivalTime&&!!Y.errors.arrivalTime})}),(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(P.Z,{endpointId:a.U.InboundTransp.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.drivers},name:"driverId",label:q.driver,valueField:"recordId",readOnly:!0,displayField:"name",values:Y.values,maxAccess:$,required:!0,onChange:(e,n)=>{Y.setFieldValue("driverId",(null==n?void 0:n.recordId)||null)},error:Y.touched.driverId&&!!Y.errors.driverId})}),(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(Z.Z,{name:"date",label:q.date,value:Y.values.date,onChange:Y.setFieldValue,onClear:()=>Y.setFieldValue("date",null),readOnly:K,required:!0,error:Y.touched.date&&!!Y.errors.date,maxAccess:$})}),(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(O.Z,{label:q.arrivalTime,name:"convertedArrivalTime",value:null===(x=Y.values)||void 0===x?void 0:x.convertedArrivalTime,onChange:Y.setFieldValue,onClear:()=>Y.setFieldValue("convertedArrivalTime",""),readOnly:K||!(null===(S=Y.values)||void 0===S?void 0:S.arrivalTime),maxAccess:$,error:Y.touched.convertedArrivalTime&&!!Y.errors.convertedArrivalTime})}),(0,r.jsx)(h.ZP,{item:!0,xs:4,children:(0,r.jsx)(P.Z,{endpointId:a.U.InboundTransp.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.vehicles},name:"vehicleId",label:q.vehicle,valueField:"recordId",displayField:"name",values:Y.values,readOnly:!0,maxAccess:$,required:!0,onChange:(e,n)=>Y.setFieldValue("vehicleId",(null==n?void 0:n.recordId)||null),error:Y.touched.vehicleId&&!!Y.errors.vehicleId})})]})}),(0,r.jsx)(C.Q,{children:(0,r.jsx)(D.Z,{name:"ItemsTable",columns:el,gridData:{list:Y.values.items||[]},rowId:["soId"],pagination:!1,maxAccess:$,showSelectAll:!0,showCheckboxColumn:!0,disable:e=>e.isNotified,disableCheckBox:K})}),(0,r.jsx)(N.g,{children:(0,r.jsxs)(h.ZP,{container:!0,xs:12,spacing:2,sx:{pt:2},children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(F.Z,{name:"notes",label:q.notes,value:Y.values.notes,readOnly:K,maxAccess:$,onChange:e=>Y.setFieldValue("notes",e.target.value),onClear:()=>Y.setFieldValue("notes",""),error:Y.touched.notes&&!!Y.errors.notes})}),(0,r.jsx)(h.ZP,{item:!0,xs:3,children:(0,r.jsx)(k.Z,{name:"totalVolume",label:q.totVol,value:Y.values.totalVolume,readOnly:!0})}),(0,r.jsx)(h.ZP,{item:!0,xs:3,children:(0,r.jsx)(k.Z,{name:"totalWeight",label:q.totalWeight,value:Y.values.totalWeight,readOnly:!0})})]})})]})})}var q=t(78618),_=t(27723);function E(){let{getRequest:e,postRequest:n}=(0,p.useContext)(u.$),{platformLabels:t}=(0,p.useContext)(d.l),{stack:h,lockRecord:f}=(0,v.zY)(),{addLockedScreen:x}=(0,p.useContext)(c.Z);async function I(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:r=50}=n;return await e({extension:a.U.InboundTransp.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(r)})}async function g(n){let{qry:t}=n;return await e({extension:a.U.InboundTransp.snapshot,parameters:"_filter=".concat(t)})}let{query:{data:y},labels:T,paginationParameters:b,refetch:j,access:P,search:R,clear:V,invalidate:Z}=(0,o.J)({queryFn:I,endpointId:a.U.InboundTransp.page,datasetId:l.i.InboundTransportation,search:{endpointId:a.U.InboundTransp.snapshot,searchFn:g}}),O=[{field:"reference",headerName:T.reference,flex:1},{field:"tripRef",headerName:T.outbound,flex:1},{field:"date",headerName:T.date,flex:1,type:"date"},{field:"arrivalTime",headerName:T.arrivalDate,flex:1,type:"dateTime"},{field:"plantName",headerName:T.plant,flex:1},{field:"driverName",headerName:T.driver,flex:1},{field:"vehicleName",headerName:T.vehicle,flex:1},{field:"statusName",headerName:T.status,flex:1},{field:"notes",headerName:T.notes,flex:1}],{proxyAction:F}=(0,s.G)({functionId:i.J.InboundTransportation,action:E}),k=async()=>{F()};async function A(e){h({Component:S,props:{labels:T,recordId:e,maxAccess:P},width:1300,height:700,title:T.inboundTransp})}async function E(e,n,r){e&&3!=r?await f({recordId:e,reference:n,resourceId:l.i.InboundTransportation,onSuccess:()=>{x({resourceId:l.i.InboundTransportation,recordId:e,reference:n}),A(e)},isAlreadyLocked:e=>{h({Component:q.Z,props:{DialogText:"".concat(t.RecordLocked," ").concat(e),title:t.Dialog}})}}):A(e)}let U=async e=>{await n({extension:a.U.InboundTransp.del,record:JSON.stringify(e)}),Z(),m.ZP.success(t.Deleted)};return(0,r.jsxs)(w.R,{children:[(0,r.jsx)(N.g,{children:(0,r.jsx)(_.Z,{labels:T,onAdd:k,maxAccess:P,inputSearch:!0,onSearch:R,onSearchClear:V})}),(0,r.jsx)(C.Q,{children:(0,r.jsx)(D.Z,{name:"InboundTranspTable",columns:O,gridData:y,rowId:["recordId"],onEdit:e=>{E(null==e?void 0:e.recordId,null==e?void 0:e.reference,null==e?void 0:e.status)},onDelete:U,pageSize:50,paginationType:"api",paginationParameters:b,refetch:j,maxAccess:P})})]})}},30043:function(e,n,t){"use strict";t.d(n,{U:function(){return a}});let r="DE.asmx/",a={Driver:{snapshot:r+"snapshotDRV",page:r+"pageDRV",set:r+"setDRV",get:r+"getDRV",qry:r+"qryDRV",del:r+"delDRV"},Vehicle:{page:r+"pageVEH",set:r+"setVEH",get:r+"getVEH",qry:r+"qryVEH",del:r+"delVEH"},Trip:{page:r+"pageTRP",set:r+"setTRP",get:r+"getTRP",qry:r+"qryTRP",del:r+"delTRP",snapshot:r+"snapshotTRP",snapshot2:r+"snapshot2TRP",reopen:r+"reopenTRP",post:r+"postTRP",unpost:r+"unpostTRP",close:r+"closeTRP",generate:r+"generateTRP",setTRP2:r+"setTRP2",assign:r+"assignTRP",unassign:r+"unassignedTRP"},TripOrderPack2:{set2:r+"set2TRO"},TripOrder:{qry:r+"qryTRO"},Reduild:{rebuild:r+"rebuildMW"},TRP:{flag:r+"flagTRP"},ExpenseTypes:{get:r+"getET",set:r+"setET",del:r+"delET",page:r+"pageET"},DeliveriesOrders:{qry:r+"qryORD",get:r+"getORD",snapshot:r+"snapshotORD",unpost:r+"unpostORD",gen:r+"genORD",post:r+"postORD",del:r+"delORD",cancel:r+"cancelORD",flag:r+"flagORD",set2:r+"set2ORD"},Invoice:{generate:r+"generateIVC2",generateInv:r+"generateIVC",preview:r+"previewIVC"},OrderItem:{qry:r+"qryORI",get:r+"getORI"},MW:{qry:r+"qryMW2"},GenerateTrip:{root:r+"rootSZ",firstLevel:r+"firstLevelSZ",undelivered2:r+"undeliveredSO2",previewTRP:r+"previewTRP"},DeliveryLeadTime:{get:r+"getLDT",page:r+"pageLDT",set:r+"setLDT",del:r+"delLDT"},Volume:{vol:r+"volZO"},AllocatedVolume:{qry:r+"qryVEH2"},InboundTransp:{pack:r+"getPackINB",page:r+"pageINB",set2:r+"set2INB",get:r+"getINB",get2:r+"get2INB",del:r+"delINB",snapshot:r+"snapshotINB",post:r+"postINB",unpost:r+"unpostINB"},InboundOrders:{qry:r+"qryINO"}}},1685:function(e,n,t){"use strict";t.d(n,{m:function(){return r}});let r=e=>{let n=window.sessionStorage.getItem(e);return n?JSON.parse(n):null}},98345:function(e,n,t){"use strict";t.d(n,{H:function(){return h},G:function(){return m}});var r=t(45300),a=t(2784),l=t(96026),i=t(38449);t(26612);var s=t(65947),o=t(1685);let d=async(e,n,t)=>{try{let r=await e({extension:n,parameters:t});return n.includes("qry")?r:r.record}catch(e){return null}},c=(e,n,t,r)=>{let a=(e=JSON.parse(JSON.stringify(e))).record.controls,l=a.find(e=>"reference"===e.controlId);return l?l.accessLevel=(null==n?void 0:n.mandatory)?s.$7:s.rr:(null==n?void 0:n.mandatory)?a.push({sgId:0,resourceId:"",controlId:"".concat(r?r+".":"","reference"),accessLevel:(null==n?void 0:n.mandatory)?s.$7:s.rr}):(null==n?void 0:n.readOnly)?a.push({sgId:0,resourceId:"",controlId:"".concat(r?r+".":"","reference"),accessLevel:(null==n?void 0:n.readOnly)?s.rr:s.$7}):a=e.record.controls.filter(e=>"reference"!=e.controlId),t&&a.push({sgId:0,resourceId:"",controlId:"".concat(r?r+".":"","dtId"),accessLevel:s.$7}),{...e,record:{...e.record,controls:a}}},u=async(e,n,t)=>{let r,a;switch(t){case"dtId":let l=(0,o.m)("userData"),s=null==l?void 0:l.userId;a="_userId=".concat(s,"&_functionId=").concat(n),r=i.r.UserFunction.get;break;case"glbSysNumberRange":a="_recordId=".concat(n),r=i.r.SystemFunction.get;break;case"DocumentType":a="_dgId=".concat(n,"&_startAt=",0,"&_pageSize=",50),r=i.r.DocumentType.qry;break;case"DcTypNumberRange":a="_recordId=".concat(n),r=i.r.DocumentType.get;break;case"isExternal":a="_recordId=".concat(n),r=i.r.NumberRange.get;break;default:return null}return await d(e,r,a)},v=async function(e){let n,t,r,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],d=arguments.length>5?arguments[5]:void 0,v=void 0===s&&l&&await u(e,l,"dtId"),p=null==v?void 0:v.dtId,m="",h=!0;if(v&&void 0===s||"nraId"===s){if(p){let t=await u(e,p,"DcTypNumberRange");n=null==t?void 0:t.nraId,h=!((null==t?void 0:t.activeStatus)<0),n||(m="Assign the document type to a number range")}if((!p||!h)&&o&&l){var f;let n=await u(e,l,"DocumentType");a=(null==n?void 0:null===(f=n.list)||void 0===f?void 0:f.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===s||void 0===s)&&l){if((!p||p)&&!n||n&&!h){let t=await u(e,l,"glbSysNumberRange");(n=null==t?void 0:t.nraId)&&a&&(a=!1),h=!0}m=n||a?"":"Assign the system Function to a number range"}s>0&&!n&&(n=s),n&&h?(t={readOnly:null==(r=await u(e,n,"isExternal"))||!r.external,mandatory:null!=r&&!!r.external},i&&(i=await c(i,t,a,d))):!n&&i&&(i=await c(i,t,a,d));let x=d?"".concat(d,".reference"):"reference";return{dtId:p,resetReference:null==t?void 0:t.readOnly,dcTypeRequired:a,reference:{fieldName:x,isEmpty:(null==r?void 0:r.external)!==void 0&&(null==r||!r.external)},errorMessage:m,maxAccess:i,selectNraId:s}};var p=t(65950);function m(e){let{functionId:n,action:t,hasDT:r}=e,{getRequest:i}=(0,a.useContext)(p.$),{stack:s}=(0,l.V)();return{proxyAction:async()=>{let e=await v(i,n,"",void 0,r);(null==e?void 0:e.errorMessage)?s({message:null==e?void 0:e.errorMessage}):await t()}}}function h(e){var n;let{functionId:t,access:i,hasDT:s,enabled:o=!0,objectName:d=""}=e,{getRequest:c}=(0,a.useContext)(p.$),{stack:u}=(0,l.V)(),[m,h]=(0,a.useState)(),f=async e=>{let n=await v(c,t,i,e,s,d);if(!n.errorMessage)return n;u({message:null==n?void 0:n.errorMessage})},x=(0,r.a)({retry:!1,staleTime:0,enabled:o,queryKey:[t,m,!!i,o],queryFn:m||"nraId"===m?()=>f(m):()=>f()});return{documentType:x.data,maxAccess:(null==x?void 0:null===(n=x.data)||void 0===n?void 0:n.maxAccess)||i,changeDT(e){h((null==e?void 0:e.nraId)||"nraId")}}}},28298:function(e,n,t){"use strict";var r=t(52322),a=t(2784),l=t(74143),i=t(44258),s=t(41633),o=t(45297),d=t(94918),c=t(26698),u=t(51909),v=t(90740),p=t(32827),m=t(81576),h=t(7087),f=t.n(h);n.Z=e=>{let{name:n,label:t,value:h,onChange:x,error:I=!1,helperText:g="",disabledRangeTime:y={},variant:T="outlined",size:b="small",fullWidth:j=!0,required:w=!1,autoFocus:N=!1,disabled:P=!1,disabledTime:R=null,readOnly:V=!1,editMode:Z=!1,hasBorder:O=!0,hidden:C=!1,use24Hour:F=!1,min:k=null,max:A=null,...D}=e,[S,q]=(0,a.useState)(!1),[_,E]=(0,a.useState)(!1),{_readOnly:U,_required:L,_hidden:B}=(0,m.W)(n,D.maxAccess,w,V,C);return B?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(s._,{dateAdapter:v.y,children:(0,r.jsx)(u.j,{variant:T,size:b,value:h,label:t,fullWidth:j,ampm:!F,minTime:k,maxTime:A,onFocus:()=>E(!0),onBlur:()=>E(!1),autoFocus:N,onChange:e=>x(n,e),onClose:()=>q(!1),open:S,disabled:P,readOnly:U,clearable:!0,slotProps:{textField:{required:L,size:b,fullWidth:j,error:!!I,helperText:"string"==typeof I?I:g,InputProps:{classes:{root:f().outlinedRoot,notchedOutline:O?f().outlinedFieldset:f().outlinedNoBorder,input:f().inputBase},endAdornment:!(U||P)&&(0,r.jsxs)(l.Z,{position:"end",className:f().inputAdornment,children:[h&&(0,r.jsx)(i.Z,{tabIndex:-1,className:f().iconButton,onClick:()=>x(n,null),children:(0,r.jsx)(o.Z,{className:f().icon})}),(0,r.jsx)(i.Z,{tabIndex:-1,className:f().iconButton,onClick:()=>q(!0),children:(0,r.jsx)(d.Z,{className:f().icon})})]})},InputLabelProps:{className:_||h?f().inputLabelShrink:f().inputLabel}},actionBar:{actions:["accept"]}},slots:{actionBar:e=>(0,r.jsx)(c.Z,{...e,actions:["accept"]}),popper:e=>(0,r.jsx)(p.Z,{...e,matchAnchorWidth:!1,isDateTimePicker:!0})},...D})})}},78618:function(e,n,t){"use strict";var r=t(52322),a=t(23925),l=t(31389),i=t(62362);let s=e=>{let{DialogText:n,bottomSection:t}=e;return(0,r.jsxs)(l.R,{children:[(0,r.jsx)(i.Q,{children:(0,r.jsx)(a.Z,{sx:{p:12},textAlign:"center",children:n})}),t]})};s.width=600,s.height=200,n.Z=s},84309:function(e,n,t){"use strict";t.d(n,{R:function(){return O}});var r=t(73235),a=t(52322),l=t(3854),i=t(2784),s=t(82737),o=t(65950),d=t(62362),c=t(31389),u=t(60218),v=t(21581),p=t(38449),m=t(5088),h=t(19473),f=t(21326);function x(){let e=(0,r._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return x=function(){return e},e}function I(){let e=(0,r._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return I=function(){return e},e}function g(){let e=(0,r._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return g=function(){return e},e}function y(){let e=(0,r._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return y=function(){return e},e}function T(){let e=(0,r._)(["\n  container-type: inline-size;\n"]);return T=function(){return e},e}function b(){let e=(0,r._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return b=function(){return e},e}let j=l.ZP.div(x()),w=l.ZP.span(I()),N=l.ZP.span(g()),P=l.ZP.div(y()),R=l.ZP.div(T()),V=l.ZP.div(b());function Z(e){let{label:n,topLabel:t,width:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)(N,{children:[t,": "]}),(0,a.jsxs)(P,{children:[(0,a.jsx)(V,{style:{width:r}}),(0,a.jsx)(w,{children:n})]})]})}let O=e=>{let{recordId:n,onComplete:t,access:r,window:l}=e,{getRequest:x}=(0,i.useContext)(o.$),{platformLabels:I}=(0,i.useContext)(h.l);(0,f.Z)({title:I.Progress,window:l});let[g,y]=(0,i.useState)({recordId:n,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),T=async()=>(await x({extension:p.r.THD.get,parameters:"_recordId=".concat(n)})).record,b=g.currentPhase===g.phases&&g.completed===g.iterations,w=!!g.status&&g.status<0;(0,i.useEffect)(()=>{t&&(b||w)&&t()},[w,b]),(0,i.useEffect)(()=>{(async()=>{y(await T())})();let e=setInterval(async()=>{let n=await T();y(n);let t=n.currentPhase===n.phases&&n.completed===n.iterations,r=!!n.status&&n.status<0;(n.status&&n.status<0||t||r)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let N=g.phases?g.currentPhase/g.phases*100:0,P=g.iterations?g.completed/g.iterations*100:0;return(0,a.jsx)(s.Z,{form:g,maxAccess:r,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>l.close(),disabled:!b&&!w}],isSaved:!1,children:(0,a.jsx)(c.R,{children:(0,a.jsx)(d.Q,{children:(0,a.jsxs)(j,{children:[(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(m.Z,{name:"phase",label:I.Phase,value:g.currentPhaseName,readOnly:!0,maxAccess:r})}),(0,a.jsxs)(R,{children:[(0,a.jsx)(Z,{label:"".concat(I.Step," ").concat(g.currentPhase," of ").concat(g.phases,"..."),topLabel:I.currentPhase,width:"".concat(N,"%")}),(0,a.jsx)(Z,{label:"".concat(I.Step," ").concat(g.completed," of ").concat(g.iterations,"..."),topLabel:I.Completed,width:"".concat(P,"%")})]}),(0,a.jsx)(v.Z,{name:"log",label:I.Log,value:g.logInfo,rows:4,maxAccess:r,readOnly:!0})]})})})})};O.width=500,O.height=450}},function(e){e.O(0,[92515,3854,43553,49774,92888,40179],function(){return e(e.s=41592)}),_N_E=e.O()}]);