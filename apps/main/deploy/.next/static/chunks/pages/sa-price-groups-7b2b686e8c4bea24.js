(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49052],{33293:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-price-groups",function(){return r(85928)}])},85928:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Z}});var i=r(52322),a=r(2784),t=r(62202),c=r(69387),s=r(27723),l=r(65950),o=r(61802),d=r(71987),u=r(26612),m=r(31389),x=r(33625),h=r(62362),P=r(19473),f=r(22341),p=r(60218),g=r(48601),U=r(82737),C=r(5088),_=r(80983),j=r(91406);function v(e){let{labels:n,maxAccess:r,recordId:c}=e,{getRequest:s,postRequest:o}=(0,a.useContext)(l.$),{platformLabels:x}=(0,a.useContext)(P.l),v=(0,d.E)({endpointId:f.P.PriceGroups.page}),{formik:Z}=(0,_.c)({initialValues:{recordId:c||null,reference:"",name:"",minUnitPrice:"",maxUnitPrice:""},validateOnChange:!0,validationSchema:g.Ry({name:g.Z_().required(),reference:g.Z_().required(),minUnitPrice:g.Rx().nullable().min(0,"Must be greater than or equal to 0").test("lessThanMax","minUnitPrice must be less than or equal to maxUnitPrice",function(e){let{maxUnitPrice:n}=this.parent;return null==n||null==e||e<=n}),maxUnitPrice:g.Rx().nullable().test("greaterThanMin","maxUnitPrice must be greater than or equal to minUnitPrice",function(e){let{minUnitPrice:n}=this.parent;return null==n||null==e||e>=n})}),onSubmit:async e=>{let n=await o({extension:f.P.PriceGroups.set,record:JSON.stringify(e)});e.recordId?t.ZP.success(x.Edited):(t.ZP.success(x.Added),Z.setFieldValue("recordId",n.recordId)),v()}}),b=!!Z.values.recordId;return(0,a.useEffect)(()=>{!async function(){if(c){let e=await s({extension:f.P.PriceGroups.get,parameters:"_recordId=".concat(c)});Z.setValues(e.record)}}()},[]),(0,i.jsx)(U.Z,{resourceId:u.i.PriceGroups,form:Z,maxAccess:r,editMode:b,children:(0,i.jsx)(m.R,{children:(0,i.jsx)(h.Q,{children:(0,i.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(p.ZP,{item:!0,xs:12,children:(0,i.jsx)(C.Z,{name:"reference",required:!0,label:n.reference,value:Z.values.reference,maxAccess:r,maxLength:"30",onChange:Z.handleChange,onClear:()=>Z.setFieldValue("reference",""),error:Z.touched.reference&&!!Z.errors.reference})}),(0,i.jsx)(p.ZP,{item:!0,xs:12,children:(0,i.jsx)(C.Z,{name:"name",label:n.name,value:Z.values.name,required:!0,maxAccess:r,maxLength:"30",onChange:Z.handleChange,onClear:()=>Z.setFieldValue("name",""),error:Z.touched.name&&!!Z.errors.name})}),(0,i.jsx)(p.ZP,{item:!0,xs:12,children:(0,i.jsx)(j.Z,{name:"minUnitPrice",label:n.minUnitPrice,value:Z.values.minUnitPrice,maxAccess:r,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("minUnitPrice",""),error:Z.touched.minUnitPrice&&!!Z.errors.minUnitPrice,allowNegative:!1,decimalScale:3})}),(0,i.jsx)(p.ZP,{item:!0,xs:12,children:(0,i.jsx)(j.Z,{name:"maxUnitPrice",label:n.maxUnitPrice,value:Z.values.maxUnitPrice,maxAccess:r,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("maxUnitPrice",""),error:Z.touched.maxUnitPrice&&!!Z.errors.maxUnitPrice,allowNegative:!1,decimalScale:3})})]})})})})}var Z=()=>{let{getRequest:e,postRequest:n}=(0,a.useContext)(l.$),{platformLabels:r}=(0,a.useContext)(P.l),{stack:p}=(0,o.zY)();async function g(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:i=50}=n;return{...await e({extension:f.P.PriceGroups.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(i,"&_filter=&_sortField=")}),_startAt:r}}let{query:{data:U},labels:C,invalidate:_,paginationParameters:j,refetch:Z,access:b}=(0,d.J)({queryFn:g,endpointId:f.P.PriceGroups.page,datasetId:u.i.PriceGroups}),w=[{field:"reference",headerName:C.reference,flex:1},{field:"name",headerName:C.name,flex:1},{field:"minUnitPrice",headerName:C.minUnitPrice,flex:1},{field:"maxUnitPrice",headerName:C.maxUnitPrice,flex:1}],I=async e=>{await n({extension:f.P.PriceGroups.del,record:JSON.stringify(e)}),_(),t.ZP.success(r.Deleted)};function N(e){p({Component:v,props:{labels:C,recordId:e,maxAccess:b},width:600,height:450,title:C.priceGroups})}return(0,i.jsxs)(m.R,{children:[(0,i.jsx)(x.g,{children:(0,i.jsx)(s.Z,{onAdd:()=>{N()},maxAccess:b})}),(0,i.jsx)(h.Q,{children:(0,i.jsx)(c.Z,{columns:w,gridData:U,rowId:["recordId"],onEdit:e=>{N(null==e?void 0:e.recordId)},onDelete:I,isLoading:!1,pageSize:50,refetch:Z,paginationParameters:j,paginationType:"api",maxAccess:b})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=33293)}),_N_E=e.O()}]);