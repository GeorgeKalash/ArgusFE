(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60526],{91913:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/memos-dtd/[functionId]",function(){return n(73379)}])},73379:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(52322),r=n(2784),d=n(62202),s=n(69387),c=n(27723),l=n(65950),o=n(71987),i=n(26612),u=n(31389),p=n(33625),f=n(62362),I=n(61802),m=n(25870),y=n(60218),x=n(48601),h=n(82737),D=n(8661),_=n(80983),v=n(38449),g=n(19473);function F(e){let{labels:t,maxAccess:n,recordId:s,functionId:c}=e,{getRequest:p,postRequest:I}=(0,r.useContext)(l.$),{platformLabels:F}=(0,r.useContext)(g.l),w=(0,o.E)({endpointId:m.H.FIDocTypeDefaults.qry}),{formik:j}=(0,_.c)({initialValues:{dtId:"",plantId:"",recordId:s||""},maxAccess:n,validateOnChange:!0,validationSchema:x.Ry({dtId:x.Z_().required(" ")}),onSubmit:async e=>{let t=e.recordId;await I({extension:m.H.FIDocTypeDefaults.set,record:JSON.stringify(e)}),t||j.setFieldValue("recordId",e.dtId),d.ZP.success(F.Submit),w()}}),N=!!j.values.recordId;return(0,r.useEffect)(()=>{!async function(){try{if(s){let e=await p({extension:m.H.FIDocTypeDefaults.get,parameters:"_dtId=".concat(s)});j.setValues({...e.record,recordId:s})}}catch(e){}}()},[]),(0,a.jsx)(h.Z,{resourceId:i.i.FIDocTypeDefaults,form:j,maxAccess:n,editMode:N,children:(0,a.jsx)(u.R,{children:(0,a.jsx)(f.Q,{children:(0,a.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(D.Z,{endpointId:v.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(c),name:"dtId",required:!0,label:t.doctype,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:j.values,maxAccess:n,onChange:(e,t)=>{j.setFieldValue("dtId",(null==t?void 0:t.recordId)||"")},error:j.touched.dtId&&!!j.errors.dtId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(D.Z,{endpointId:v.r.Plant.qry,name:"plantId",label:t.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:j.values,maxAccess:n,onChange:(e,t)=>{let n=(null==t?void 0:t.recordId)||"";j.setFieldValue("plantId",n)},error:j.touched.plantId&&!!j.errors.plantId})})]})})})})}var w=n(63165),j=()=>{let{getRequest:e,postRequest:t}=(0,r.useContext)(l.$),{platformLabels:n}=(0,r.useContext)(g.l),{stack:y}=(0,I.zY)(),{functionId:x}=(0,w.F)();async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pagination:{_startAt:n=0,_pageSize:a=50}}=t;return{...await e({extension:m.H.FIDocTypeDefaults.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&_functionId=").concat(x)}),_startAt:n}}let{query:{data:D},labels:_,access:v,paginationParameters:j,invalidate:N,refetch:T}=(0,o.J)({endpointId:m.H.FIDocTypeDefaults.qry,datasetId:i.i.FIDocTypeDefaults,filter:{filterFn:h,default:{functionId:x}}}),Z=[{field:"dtName",headerName:_.doctype,flex:1},{field:"plantName",headerName:_.plant,flex:1}],A=async e=>{await t({extension:m.H.FIDocTypeDefaults.del,record:JSON.stringify(e)}),N(),d.ZP.success(n.Deleted)};function C(e){y({Component:F,props:{labels:_,functionId:x,recordId:null==e?void 0:e.dtId,maxAccess:v},width:500,height:360,title:_.doctypeDefault})}return(0,a.jsxs)(u.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(c.Z,{onAdd:()=>{C()},maxAccess:v})}),(0,a.jsx)(f.Q,{children:(0,a.jsx)(s.Z,{columns:Z,gridData:D,rowId:["dtId"],onEdit:e=>{C(e)},onDelete:A,isLoading:!1,pageSize:50,paginationParameters:j,refetch:T,paginationType:"api",maxAccess:v})})]})}},63165:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var a=n(5632),r=n(2784);let d=()=>{let e=(0,a.useRouter)(),[t,n]=(0,r.useState)(e.query);return t}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=91913)}),_N_E=e.O()}]);