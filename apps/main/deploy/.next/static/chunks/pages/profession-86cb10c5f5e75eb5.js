(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2104],{46199:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profession",function(){return r(95913)}])},95913:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return F}});var s=r(52322),n=r(2784),l=r(62202),t=r(69387),d=r(53621),o=r(65950),i=r(60218),c=r(48601),u=r(82737),m=r(71987),f=r(26612),v=r(5088),p=r(8661),x=r(84100),h=r(31389),b=r(62362),I=r(80983),_=r(19473),y=r(24074),g=r(19689);function C(e){var a;let{labels:r,maxAccess:t,recordId:C,setStore:j}=e,[Z,N]=(0,n.useState)(!!C),{getRequest:P,postRequest:A}=(0,n.useContext)(o.$),{platformLabels:T}=(0,n.useContext)(_.l),k=(0,m.E)({endpointId:d.d.Profession.page}),{formik:F}=(0,I.c)({initialValues:{recordId:null,reference:"",name:"",flName:"",riskLevelId:"",diplomatStatus:"",sraId:"",pfgId:"",approvalLevel:"",isInactive:!1},maxAccess:t,validateOnChange:!0,validationSchema:c.Ry().shape({name:c.Z_().required(),reference:c.Z_().required(),flName:c.Z_().required(),sraId:c.Z_().required(),diplomatStatus:c.Z_().required()}),onSubmit:async e=>{let a=e.recordId,r={...e,monthlyIncome:e.monthlyIncome},s=await A({extension:d.d.Profession.set,record:JSON.stringify(r)});a?l.ZP.success(T.Edited):(j({recordId:s.recordId,name:e.name}),l.ZP.success(T.Added),F.setValues({...e,recordId:s.recordId})),N(!0),k()}});return(0,n.useEffect)(()=>{!async function(){if(C){let e=await P({extension:d.d.Profession.get,parameters:"_recordId=".concat(C)});j({recordId:e.record.recordId,name:e.record.name}),F.setValues(e.record)}}()},[]),(0,s.jsx)(u.Z,{resourceId:f.i.Profession,form:F,maxAccess:t,editMode:Z,children:(0,s.jsx)(h.R,{children:(0,s.jsx)(b.Q,{children:(0,s.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"reference",label:r.reference,value:F.values.reference,required:!0,onChange:F.handleChange,maxLength:"10",maxAccess:t,onClear:()=>F.setFieldValue("reference",""),error:F.touched.reference&&!!F.errors.reference})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"name",label:r.name,value:F.values.name,required:!0,maxLength:"50",maxAccess:t,onChange:F.handleChange,onClear:()=>F.setFieldValue("name",""),error:F.touched.name&&!!F.errors.name})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"flName",label:r.flName,value:F.values.flName,required:!0,maxLength:"50",maxAccess:t,onChange:F.handleChange,onClear:()=>F.setFieldValue("flName",""),error:F.touched.flName&&!!F.errors.flName})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{endpointId:d.d.SalaryRange.qry,name:"sraId",label:r.salaryRange,valueField:"recordId",required:!0,displayField:["min","->","max"],columnsInDropDown:[{key:"min",value:"MIN"},{key:"max",value:"MAX"}],values:F.values,onChange:(e,a)=>{F.setFieldValue("sraId",a?null==a?void 0:a.recordId:"")},error:F.touched.sraId&&!!F.errors.sraId})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{endpointId:y.u.RiskLevel.qry,name:"riskLevelId",label:r.riskLevel,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:F.values,onChange:(e,a)=>{F.setFieldValue("riskLevelId",a?null==a?void 0:a.recordId:"")},error:F.touched.riskLevelId&&!!F.errors.riskLevelId})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{endpointId:d.d.ProfessionGroups.qry,name:"pfgId",label:r.professionGroups,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:F.values,onChange:(e,a)=>{F.setFieldValue("pfgId",a?null==a?void 0:a.recordId:"")},error:F.touched.pfgId&&!!F.errors.pfgId})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{datasetId:x.v.DIPLOMAT_STATUS,name:"diplomatStatus",label:r.diplomatStatus,valueField:"key",displayField:"value",values:F.values,required:!0,readOnly:Z,maxAccess:t,onChange:(e,a)=>{F.setFieldValue("diplomatStatus",null==a?void 0:a.key)},error:F.touched.diplomatStatus&&!!F.errors.diplomatStatus})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{datasetId:x.v.APPROVAL_LEVEL,name:"approvalLevel",label:r.approvalLevel,valueField:"key",displayField:"value",values:F.values,maxAccess:t,onChange:(e,a)=>{F.setFieldValue("approvalLevel",null==a?void 0:a.key)},error:F.touched.approvalLevel&&!!F.errors.approvalLevel})}),(0,s.jsx)(i.ZP,{item:!0,xs:12,children:(0,s.jsx)(g.Z,{name:"isInactive",value:null===(a=F.values)||void 0===a?void 0:a.isInactive,onChange:e=>F.setFieldValue("isInactive",e.target.checked),label:r.isInActive,maxAccess:t})})]})})})})}var j=r(89119),Z=r(29326),N=r(9522),P=e=>{let{labels:a,maxAccess:r,recordId:l,height:t}=e,[d,o]=(0,n.useState)(0),[i,c]=(0,n.useState)({recordId:l||null,name:null}),u=[{label:null==a?void 0:a.profession},{label:null==a?void 0:a.interface,disabled:!i.recordId}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.Y,{tabs:u,activeTab:d,setActiveTab:o,maxAccess:r}),(0,s.jsx)(Z.Z,{height:t,index:0,value:d,maxAccess:r,children:(0,s.jsx)(C,{labels:a,maxAccess:r,recordId:l,setStore:c})}),(0,s.jsx)(Z.Z,{index:1,value:d,maxAccess:r,children:(0,s.jsx)(j.V,{height:t,labels:a,resourceId:f.i.Profession,recordId:i.recordId,maxAccess:r,name:i.name})})]})},A=r(61802),T=r(33625),k=r(36908),F=()=>{let{getRequest:e,postRequest:a}=(0,n.useContext)(o.$),{stack:r}=(0,A.zY)(),{platformLabels:i}=(0,n.useContext)(_.l),{query:{data:c},labels:u,filterBy:v,paginationParameters:p,invalidate:x,access:I,refetch:y}=(0,m.J)({queryFn:C,endpointId:d.d.Profession.page,datasetId:f.i.Profession,filter:{filterFn:g}});async function g(a){let{filters:r,pagination:s}=a;return(null==r?void 0:r.qry)?await e({extension:d.d.Profession.snapshot,parameters:"_filter=".concat(r.qry)}):C({_startAt:s._startAt||0,params:null==r?void 0:r.params})}async function C(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:s=50,params:n}=a,l="_startAt=".concat(r,"&_pageSize=").concat(s,"&_params=").concat(n||"");return{...await e({extension:d.d.Profession.page,parameters:l}),_startAt:r}}let j=[{field:"reference",headerName:u.reference,flex:1},{field:"name",headerName:u.name,flex:1},{field:"flName",headerName:u.flName,flex:1},{field:"riskLevelName",headerName:u.riskLevel,flex:1}];function Z(e){r({Component:P,props:{labels:u,recordId:e,maxAccess:I},width:600,height:600,title:u.profession})}let N=async e=>{await a({extension:d.d.Profession.del,record:JSON.stringify(e)}),x(),l.ZP.success(i.Deleted)};return(0,s.jsxs)(h.R,{children:[(0,s.jsx)(T.g,{children:(0,s.jsx)(k.Z,{onAdd:()=>{Z()},maxAccess:I,reportName:"RTPFN",filterBy:v})}),(0,s.jsx)(b.Q,{children:(0,s.jsx)(t.Z,{name:"table",columns:j,gridData:c,rowId:["recordId"],onEdit:e=>{Z(e.recordId)},onDelete:N,isLoading:!1,pageSize:50,refetch:y,paginationParameters:p,paginationType:"api",maxAccess:I})})]})}},29326:function(e,a,r){"use strict";var s=r(52322);r(2784);var n=r(23925),l=r(13980),t=r.n(l),d=r(95291),o=r.n(d),i=r(65947);let c=e=>{var a,r,l;let{children:t,value:d,index:c,maxAccess:u,...m}=e,f="".concat(e.name||"tab",".").concat(c),{accessLevel:v}=null!==(l=(null!==(r=null==u?void 0:null===(a=u.record)||void 0===a?void 0:a.controls)&&void 0!==r?r:[]).find(e=>e.controlId===f))&&void 0!==l?l:{accessLevel:0};if(v===i.A1)return null;let p=d===c;return(0,s.jsx)(n.Z,{role:"tabpanel",hidden:!p,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(o().tabPanel," ").concat(p?o().active:o().hidden),...m,children:t})};c.propTypes={children:t().node,index:t().number.isRequired,value:t().number.isRequired},a.Z=c},9522:function(e,a,r){"use strict";r.d(a,{Y:function(){return m}});var s=r(52322),n=r(23925),l=r(54582),t=r(68696),d=r(44258),o=r(2784),i=r(99266),c=r(52614),u=r.n(c);let m=e=>{var a,r,c,m,f;let{tabs:v,activeTab:p,setActiveTab:x,maxAccess:h,name:b="tab"}=e,I=(null==h?void 0:null===(r=h.record)||void 0===r?void 0:null===(a=r.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(b,".")))}).map(e=>e.controlId.split(".")[1]))||[],_=null==v?void 0:null===(c=v.map((e,a)=>({...e,id:a})))||void 0===c?void 0:c.filter((e,a)=>!I.includes(String(a))),y=null===(m=_[p])||void 0===m?void 0:m.id,g=null===(f=_[p])||void 0===f?void 0:f.disabled;return(0,o.useEffect)(()=>{y>=0&&!g&&p!=y&&x(y)},[]),(0,s.jsx)(n.Z,{className:u().tabsContainer,children:(0,s.jsx)(n.Z,{className:u().tabsWrapper,children:(0,s.jsx)(l.Z,{value:p,onChange:(e,a)=>x(a),variant:"scrollable",scrollButtons:_.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==_?void 0:_.map(e=>(0,s.jsx)(t.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,s.jsxs)(n.Z,{display:"flex",alignItems:"center",children:[(0,s.jsx)("span",{children:e.label}),e.id===p&&(null==e?void 0:e.onRefetch)&&(0,s.jsx)(d.Z,{size:"small",className:u().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,s.jsx)(i.Z,{className:u().refreshIcon})})]})},e.id))})})})}},89119:function(e,a,r){"use strict";r.d(a,{V:function(){return I}});var s=r(52322),n=r(2784),l=r(65950),t=r(49864),d=r(50023),o=r(26612),i=r(62202),c=r(76399),u=r(80983),m=r(84100),f=r(53621),v=r(80968),p=r(5088),x=r(62362),h=r(31389),b=r(54074);let I=e=>{let{recordId:a,resourceId:r,name:I}=e,{getRequest:_,postRequest:y}=(0,n.useContext)(l.$),{getAllKvsByDataset:g}=(0,n.useContext)(v.k),{labels:C,access:j}=(0,d.Z)({datasetId:o.i.InterfaceMap,editMode:!!a}),{formik:Z}=(0,u.c)({initialValues:{rows:[{id:1,recordId:a,resourceId:o.i.resourceId,interfaceId:"",interfaceName:"",reference:""}]},validateOnChange:!0,onSubmit:async e=>{let s=Z.values.rows.map(e=>({recordId:a,resourceId:r,...e})),n=s.every(e=>""===e.interfaceId);(await y({extension:f.d.InterfaceMaps.set2,record:JSON.stringify({recordId:a,resourceId:r,items:n?[]:s})})).recordId&&i.ZP.success("Record Successfully")}});async function N(){return new Promise((e,a)=>{g({_dataset:m.v.ALL_INTERFACES,callback:r=>{r?e(r):a()}})})}(0,n.useEffect)(()=>{!async function(){if(a){let e=await N(),s=await _({extension:f.d.InterfaceMaps.qry,parameters:"_recordId=".concat(a,"&_resourceId=").concat(r)}),n=e.map(e=>{let a={interfaceId:e.key,interfaceName:e.value,reference:""},r=s.list.find(e=>a.interfaceId==e.interfaceId);return r&&(a.reference=r.reference),a});Z.setValues({...Z.values,rows:n.map((e,a)=>({...e,id:a+1}))})}}()},[a]);let P=[{component:"resourcecombobox",label:C.interface,name:"interfaceId",props:{readOnly:!0,datasetId:m.v.ALL_INTERFACES,valueField:"key",displayField:"value",displayFieldWidth:2,mapping:[{from:"key",to:"interfaceId"},{from:"value",to:"interfaceName"}]}},{component:"textfield",label:C.reference,name:"reference"}];return(0,s.jsx)(b.Z,{onSave:Z.handleSubmit,maxAccess:j,editMode:!0,children:(0,s.jsx)(h.R,{children:(0,s.jsxs)(x.Q,{children:[(0,s.jsx)(t.Z,{sx:{width:"50%"},children:(0,s.jsx)(p.Z,{label:C.name,value:I,readOnly:!0})}),(0,s.jsx)(c._,{onChange:e=>Z.setFieldValue("rows",e),value:Z.values.rows,error:Z.errors.rows,columns:P,allowDelete:!1})]})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=46199)}),_N_E=e.O()}]);