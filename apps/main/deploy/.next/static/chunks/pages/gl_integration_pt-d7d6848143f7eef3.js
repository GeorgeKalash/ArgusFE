(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3706],{93800:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gl_integration_pt",function(){return r(88198)}])},88198:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return j}});var t=r(52322),a=r(2784),s=r(62202),i=r(69387),c=r(27723),o=r(65950),d=r(66361),l=r(71987),u=r(26612),x=r(31389),f=r(33625),h=r(62362),g=r(60218),m=r(48601),p=r(82737),I=r(5088),y=r(80983),_=r(19473);function P(e){let{labels:n,maxAccess:r,recordId:i,invalidate:c}=e,{getRequest:l,postRequest:f}=(0,a.useContext)(o.$),{platformLabels:P}=(0,a.useContext)(_.l),{formik:C}=(0,y.c)({initialValues:{recordId:i,reference:"",name:""},maxAccess:r,validateOnChange:!0,validationSchema:m.Ry({reference:m.Z_().required(),name:m.Z_().required()}),onSubmit:async e=>{try{let n=await f({extension:d.x.IntegrationPostTypes.set,record:JSON.stringify(e)});e.recordId?s.ZP.success(P.Edited):(s.ZP.success(P.Added),C.setFieldValue("recordId",n.recordId)),c()}catch(e){}}}),j=!!C.values.recordId;return(0,a.useEffect)(()=>{!async function(){try{if(i){let e=await l({extension:d.x.IntegrationPostTypes.get,parameters:"_recordId=".concat(i)});C.setValues(e.record)}}catch(e){}}()},[]),(0,t.jsx)(p.Z,{resourceId:u.i.IntegrationPostTypes,form:C,maxAccess:r,editMode:j,children:(0,t.jsx)(x.R,{children:(0,t.jsx)(h.Q,{children:(0,t.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(g.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.Z,{name:"reference",label:n.reference,value:C.values.reference,required:!0,maxAccess:r,maxLength:"30",onChange:C.handleChange,onClear:()=>C.setFieldValue("reference",""),error:C.touched.reference&&!!C.errors.reference})}),(0,t.jsx)(g.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.Z,{name:"name",label:n.name,value:C.values.name,required:!0,rows:2,maxAccess:r,onChange:C.handleChange,onClear:()=>C.setFieldValue("name",""),error:C.touched.name&&!!C.errors.name})})]})})})})}var C=r(61802),j=()=>{let{getRequest:e,postRequest:n}=(0,a.useContext)(o.$),{stack:r}=(0,C.zY)(),{platformLabels:g}=(0,a.useContext)(_.l);async function m(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50}=n;return{...await e({extension:d.x.IntegrationPostTypes.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(t,"&filter=")}),_startAt:r}}let p=(0,l.E)({endpointId:d.x.IntegrationPostTypes.page}),{query:{data:I},labels:y,paginationParameters:j,refetch:w,access:Z}=(0,l.J)({queryFn:m,endpointId:d.x.IntegrationPostTypes.page,datasetId:u.i.IntegrationPostTypes}),v=[{field:"reference",headerName:y.reference,flex:1},{field:"name",headerName:y.name,flex:1}],T=async e=>{await n({extension:d.x.IntegrationPostTypes.del,record:JSON.stringify(e)}),p(),s.ZP.success(g.Deleted)};function A(e){r({Component:P,props:{labels:y,recordId:e||null,maxAccess:Z,invalidate:p},width:600,height:300,title:y.postType})}return(0,t.jsxs)(x.R,{children:[(0,t.jsx)(f.g,{children:(0,t.jsx)(c.Z,{onAdd:()=>{A()},maxAccess:Z})}),(0,t.jsx)(h.Q,{children:(0,t.jsx)(i.Z,{columns:v,gridData:I,rowId:["recordId"],onEdit:e=>{A(null==e?void 0:e.recordId)},onDelete:T,isLoading:!1,pageSize:50,paginationType:"api",maxAccess:Z,paginationParameters:j,refetch:w})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=93800)}),_N_E=e.O()}]);