(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99586],{3394:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/credit-invoice",function(){return r(48746)}])},48746:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var n=r(52322),s=r(2784),a=r(71987),o=r(65950),d=r(27723),l=r(69387),c=r(62202),i=r(17627),u=r(61802),y=r(26612),g=r(58974),p=r(31389),C=r(33625),I=r(62362),f=r(19473),q=r(98345),h=r(7121),v=r(96026),P=()=>{var e,t;let{postRequest:r,getRequest:P}=(0,s.useContext)(o.$),{platformLabels:m,userDefaultsData:S}=(0,s.useContext)(f.l),{stack:R}=(0,u.zY)(),{stack:O}=(0,v.V)(),x=parseInt(null==S?void 0:null===(t=S.list)||void 0===t?void 0:null===(e=t.find(e=>{let{key:t}=e;return"plantId"===t}))||void 0===e?void 0:e.value);async function D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:r=50}=e;return await P({extension:i.s.CreditInvoice.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(r,"&filter=")})}async function A(e){let{qry:t}=e;return await P({extension:i.s.CreditInvoice.snapshot,parameters:"_filter=".concat(t)})}let{query:{data:E},labels:T,search:N,clear:F,access:w,refetch:G,invalidate:_}=(0,a.J)({queryFn:D,endpointId:i.s.CreditInvoice.page,datasetId:y.i.CreditInvoice,search:{endpointId:i.s.CreditInvoice.snapshot,searchFn:A}}),{proxyAction:b}=(0,q.G)({functionId:h.J.CreditInvoicePurchase,action:k,hasDT:!1}),M=async()=>{b()};async function k(e){if(!e&&!x){O({message:T.defaultPlant});return}R({Component:g.Z,props:{recordId:e}})}let B=async e=>{await r({extension:i.s.CreditInvoice.del,record:JSON.stringify(e)}),_(),c.ZP.success(m.Deleted)};return(0,n.jsxs)(p.R,{children:[(0,n.jsx)(C.g,{children:(0,n.jsx)(d.Z,{maxAccess:w,onAdd:M,onSearch:N,onSearchClear:F,labels:T,inputSearch:!0})}),(0,n.jsx)(I.Q,{children:(0,n.jsx)(l.Z,{columns:[{field:"reference",headerName:T.reference,flex:1},{field:"date",headerName:T.date,flex:1,type:"date"},{field:"plantRef",headerName:T.plant},{field:"corName",headerName:T.correspondent,flex:1},{field:"currencyRef",headerName:T.currency,flex:1},{field:"cashAccountName",headerName:T.cashAccount,flex:1},{field:"amount",headerName:T.amount,flex:1,type:"number"},{field:"statusName",headerName:T.status,flex:1}],gridData:E,rowId:["recordId"],onEdit:e=>{k(e.recordId)},onDelete:B,isLoading:!1,pageSize:50,maxAccess:w,refetch:G,paginationType:"api"})})]})}},53621:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});let n="RTSET.asmx/",s={Interface:{qry:n+"qryITF",page:n+"pageITF",get:n+"getITF",set:n+"setITF",del:n+"delITF"},ProductMaster:{qry:n+"qryPRO",page:n+"pagePRO",get:n+"getPRO",set:n+"setPRO",del:n+"delPRO",snapshot:n+"snapshotPRO"},ProductCountries:{qry:n+"qryPCO",set2:n+"set2PCO"},ProductMonetaries:{qry:n+"qryPMO",set2:n+"set2PMO"},ProductDispersal:{qry:n+"qryPDI",get:n+"getPDI",set:n+"setPDI",del:n+"delPDI"},ProductSchedules:{qry:n+"qryPSC",set2:n+"set2PSC"},ProductScheduleRanges:{qry:n+"qryPSR",set2:n+"set2PSR"},ProductScheduleFees:{qry:n+"qryPSF",set2:n+"set2PSF"},ProductDispersalAgents:{qry:n+"qryPDA",set2:n+"set2PDA"},Correspondent:{page:n+"pageCOR",qry:n+"qryCOR",qry2:n+"qry2COR",get:n+"getCOR",set:n+"setCOR",del:n+"delCOR",snapshot:n+"snapshotCOR"},CorrespondentCountry:{qry:n+"qryCCO",get:n+"getCCO",set2:n+"set2CCO",del:n+"delCCO"},CorrespondentCurrency:{qry:n+"qryCCU",get:n+"getCCU",set2:n+"set2CCU",del:n+"delCCU"},CorrespondentAgents:{qry:n+"qryAGT",page:n+"pageAGT",get:n+"getAGT",set:n+"setAGT",del:n+"delAGT"},CorrespondentAgentBranches:{qry:n+"qryABR",page:n+"pageABR",get:n+"getABR",set:n+"setABR",del:n+"delABR"},CorrespondentExchangeMap:{qry:n+"qryEXC",set2:n+"set2EXC"},CurrencyExchangeMap:{qry:n+"qryEXG",set2:n+"set2EXG"},CorrespondentExchangeBuyMap:{qry:n+"qryEXB",set2:n+"set2EXB"},ExchangeRates:{get:n+"getEXB",qry:n+"qryEXG2",set2:n+"set2EXB"},RtDefault:{qry:n+"qryDE",set2:n+"set2DE"},Profession:{qry:n+"qryPFN",page:n+"pagePFN",get:n+"getPFN",set:n+"setPFN",del:n+"delPFN",snapshot:n+"snapshotPFN"},ClientIndividual:{qry:n+"qryCLI"},SalaryRange:{qry:n+"qrySRA",page:n+"pageSRA",get:n+"getSRA",set:n+"setSRA",del:n+"delSRA"},SourceOfIncome:{qry:n+"qrySI",page:n+"pageSI",snapshot:n+"snapshotSI",get:n+"getSI",set:n+"setSI",del:n+"delSI"},CorrespondentControl:{qry:n+"qryCCL",set:n+"set2CCL"},InterfaceMaps:{qry:n+"qryIFM",get:n+"getIFM",set2:n+"set2IFM"},SourceOfIncomeType:{qry:n+"qrySIT",snapshot:n+"snapshotSIT",page:n+"pageSIT",get:n+"getSIT",set:n+"setSIT",del:n+"delSIT"},ProfessionGroups:{qry:n+"qryPFG",page:n+"pagePFG",snapshot:n+"snapshotPFG",get:n+"getPFG",set:n+"setPFG",del:n+"delPFG"},CorrespondentGroup:{qry:n+"qryCGP",page:n+"pageCGP",get:n+"getCGP",set:n+"setCGP",del:n+"delCGP"},ExtraIncome:{qry:n+"qryEI",get:n+"getEI",del:n+"delEI",page:n+"pageEI",snapshot:n+"snapshotEI",set:n+"setEI"},CountryRisk:{page:n+"pageCOU",get:n+"getCOU",set:n+"setCOU",del:n+"delCOU"},CorDispControl:{qry:n+"qryCDC",set2:n+"set2CDC"},CorrespondentDispersal:{qry:n+"qryCDM",get:n+"getCDM",del:n+"delCDM",set2:n+"set2CDM"},CorrespondentDispersalRate:{qry:n+"qryCDR",set2:n+"set2CDR"}}},1685:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});let n=e=>{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null}},98345:function(e,t,r){"use strict";r.d(t,{H:function(){return C},G:function(){return p}});var n=r(45300),s=r(2784),a=r(96026),o=r(38449);r(26612);var d=r(65947),l=r(1685);let c=async(e,t,r)=>{try{let n=await e({extension:t,parameters:r});return t.includes("qry")?n:n.record}catch(e){return null}},i=(e,t,r,n)=>{let s=(e=JSON.parse(JSON.stringify(e))).record.controls,a=s.find(e=>"reference"===e.controlId);return a?a.accessLevel=(null==t?void 0:t.mandatory)?d.$7:d.rr:(null==t?void 0:t.mandatory)?s.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.mandatory)?d.$7:d.rr}):(null==t?void 0:t.readOnly)?s.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.readOnly)?d.rr:d.$7}):s=e.record.controls.filter(e=>"reference"!=e.controlId),r&&s.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","dtId"),accessLevel:d.$7}),{...e,record:{...e.record,controls:s}}},u=async(e,t,r)=>{let n,s;switch(r){case"dtId":let a=(0,l.m)("userData"),d=null==a?void 0:a.userId;s="_userId=".concat(d,"&_functionId=").concat(t),n=o.r.UserFunction.get;break;case"glbSysNumberRange":s="_recordId=".concat(t),n=o.r.SystemFunction.get;break;case"DocumentType":s="_dgId=".concat(t,"&_startAt=",0,"&_pageSize=",50),n=o.r.DocumentType.qry;break;case"DcTypNumberRange":s="_recordId=".concat(t),n=o.r.DocumentType.get;break;case"isExternal":s="_recordId=".concat(t),n=o.r.NumberRange.get;break;default:return null}return await c(e,n,s)},y=async function(e){let t,r,n,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=!(arguments.length>4)||void 0===arguments[4]||arguments[4],c=arguments.length>5?arguments[5]:void 0,y=void 0===d&&a&&await u(e,a,"dtId"),g=null==y?void 0:y.dtId,p="",C=!0;if(y&&void 0===d||"nraId"===d){if(g){let r=await u(e,g,"DcTypNumberRange");t=null==r?void 0:r.nraId,C=!((null==r?void 0:r.activeStatus)<0),t||(p="Assign the document type to a number range")}if((!g||!C)&&l&&a){var I;let t=await u(e,a,"DocumentType");s=(null==t?void 0:null===(I=t.list)||void 0===I?void 0:I.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===d||void 0===d)&&a){if((!g||g)&&!t||t&&!C){let r=await u(e,a,"glbSysNumberRange");(t=null==r?void 0:r.nraId)&&s&&(s=!1),C=!0}p=t||s?"":"Assign the system Function to a number range"}d>0&&!t&&(t=d),t&&C?(r={readOnly:null==(n=await u(e,t,"isExternal"))||!n.external,mandatory:null!=n&&!!n.external},o&&(o=await i(o,r,s,c))):!t&&o&&(o=await i(o,r,s,c));let f=c?"".concat(c,".reference"):"reference";return{dtId:g,resetReference:null==r?void 0:r.readOnly,dcTypeRequired:s,reference:{fieldName:f,isEmpty:(null==n?void 0:n.external)!==void 0&&(null==n||!n.external)},errorMessage:p,maxAccess:o,selectNraId:d}};var g=r(65950);function p(e){let{functionId:t,action:r,hasDT:n}=e,{getRequest:o}=(0,s.useContext)(g.$),{stack:d}=(0,a.V)();return{proxyAction:async()=>{let e=await y(o,t,"",void 0,n);(null==e?void 0:e.errorMessage)?d({message:null==e?void 0:e.errorMessage}):await r()}}}function C(e){var t;let{functionId:r,access:o,hasDT:d,enabled:l=!0,objectName:c=""}=e,{getRequest:i}=(0,s.useContext)(g.$),{stack:u}=(0,a.V)(),[p,C]=(0,s.useState)(),I=async e=>{let t=await y(i,r,o,e,d,c);if(!t.errorMessage)return t;u({message:null==t?void 0:t.errorMessage})},f=(0,n.a)({retry:!1,staleTime:0,enabled:l,queryKey:[r,p,!!o,l],queryFn:p||"nraId"===p?()=>I(p):()=>I()});return{documentType:f.data,maxAccess:(null==f?void 0:null===(t=f.data)||void 0===t?void 0:t.maxAccess)||o,changeDT(e){C((null==e?void 0:e.nraId)||"nraId")}}}}},function(e){e.O(0,[78451,58974,49774,92888,40179],function(){return e(e.s=3394)}),_N_E=e.O()}]);