(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7338],{81549:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-post-draft-return",function(){return a(57722)}])},57722:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var n=a(52322),r=a(2784),i=a(71987),s=a(65950),l=a(69387),d=a(62202),f=a(61802),o=a(26612),c=a(31389),p=a(33625),u=a(62362),m=a(19473),h=a(22341),x=a(36908),N=a(23925),g=a(44258),_=a(96577),w=a.n(_),y=a(23361),R=a(34710),D=()=>{let{postRequest:e,getRequest:t}=(0,r.useContext)(s.$),{platformLabels:_}=(0,r.useContext)(m.l),{stack:D}=(0,f.zY)(),{query:{data:P},filterBy:j,refetch:A,labels:C,access:E,invalidate:I,paginationParameters:S}=(0,i.J)({queryFn:Z,endpointId:h.P.DraftReturn.page2,datasetId:o.i.DraftSerialReturns,DatasetIdAccess:o.i.PostDraftReturns,filter:{filterFn:b}});async function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:n=50,params:r=[]}=e;return{...await t({extension:h.P.DraftReturn.page2,parameters:"_startAt=".concat(a,"&_pageSize=").concat(n,"&_params=").concat(r,"&filter=")}),_startAt:a}}async function b(e){let{filters:a,pagination:n}=e;return a.qry?await t({extension:h.P.DraftReturn.snapshot,parameters:"_filter=".concat(a.qry,"&_status=1&_spId=0")}):Z({_startAt:n._startAt||0,params:null==a?void 0:a.params})}let k=[{field:"plantName",headerName:C.plant,flex:1},{field:"reference",headerName:C.reference,flex:1},{field:"date",headerName:C.date,flex:1,type:"date"},{field:"clientRef",headerName:C.clientRef,flex:1},{field:"clientName",headerName:C.clientName,flex:1},{field:"pcs",headerName:C.pcs,flex:1,type:"number"},{field:"weight",headerName:C.weight,flex:1,type:"number"},{field:"amount",headerName:C.net,flex:1,type:"number"},{field:"spName",headerName:C.salesPerson,flex:1},{field:"description",headerName:C.description,flex:1.25},{field:"statusName",headerName:C.status,flex:1},{field:"wipName",headerName:C.wip,flex:1},{field:"post",flex:.5,headerName:C.post,cellRenderer:e=>{if(2===e.data.wip)return(0,n.jsx)(N.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:(0,n.jsx)(g.Z,{size:"small",onClick:()=>q(e.data),children:(0,n.jsx)(w(),{src:a(63933).default.src,width:18,height:18,alt:"post.png"})})})}}];async function T(e){let{recordId:t}=e;D({Component:R.Z,props:{labels:C,access:E,recordId:t,invalidate:I},width:1300,height:750,title:C.draftSerReturn})}let q=e=>{D({Component:y.Z,props:{DialogText:C.postDialogText,okButtonAction:()=>z(e),fullScreen:!1,close:!0},width:450,height:160,title:_.Confirmation})},z=async t=>{await e({extension:h.P.DraftReturn.post,record:JSON.stringify(t)})&&(d.ZP.success(_.Posted),I())};return(0,n.jsxs)(c.R,{children:[(0,n.jsx)(p.g,{children:(0,n.jsx)(x.Z,{maxAccess:E,filterBy:j,reportName:"SADRE2"})}),(0,n.jsx)(u.Q,{children:(0,n.jsx)(l.Z,{name:"table",columns:k,gridData:P,rowId:["recordId"],refetch:A,onEdit:T,isLoading:!1,pageSize:50,maxAccess:E,paginationParameters:S,paginationType:"api"})})]})}}},function(e){e.O(0,[92515,2494,36908,23352,34710,49774,92888,40179],function(){return e(e.s=81549)}),_N_E=e.O()}]);