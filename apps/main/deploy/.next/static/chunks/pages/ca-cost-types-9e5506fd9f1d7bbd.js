(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20018],{47926:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ca-cost-types",function(){return n(75056)}])},75056:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var s=n(52322),r=n(2784),a=n(62202),o=n(69387),l=n(27723),c=n(65950),i=n(71987),d=n(26612),u=n(31389),p=n(33625),T=n(62362),C=n(61802),y=n(19473),x=n(98891),f=n(60218),h=n(48601),m=n(82737),g=n(5088),A=n(80983),I=n(8661),q=n(84100);function v(e){let{labels:t,maxAccess:n,recordId:o}=e,{getRequest:l,postRequest:p}=(0,r.useContext)(c.$),{platformLabels:C}=(0,r.useContext)(y.l),v=(0,i.E)({endpointId:x.J.CACostTypes.page}),{formik:_}=(0,A.c)({initialValues:{recordId:o,reference:"",name:"",allocationType:null},maxAccess:n,validateOnChange:!0,validationSchema:h.Ry({reference:h.Z_().required(),name:h.Z_().required(),allocationType:h.Rx().required()}),onSubmit:async e=>{let t=await p({extension:x.J.CACostTypes.set,record:JSON.stringify(e)});e.recordId?a.ZP.success(C.Edited):a.ZP.success(C.Added),_.setValues({...e,recordId:t.recordId}),v()}}),P=!!_.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(o){let e=await l({extension:x.J.CACostTypes.get,parameters:"_recordId=".concat(o)});_.setValues({...e.record})}}()},[]),(0,s.jsx)(m.Z,{resourceId:d.i.CACostTypes,form:_,maxAccess:n,editMode:P,children:(0,s.jsx)(u.R,{children:(0,s.jsx)(T.Q,{children:(0,s.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(f.ZP,{item:!0,xs:12,children:(0,s.jsx)(g.Z,{name:"reference",label:t.reference,value:_.values.reference,required:!0,maxAccess:n,onChange:_.handleChange,onClear:()=>_.setFieldValue("reference",""),error:_.touched.reference&&!!_.errors.reference})}),(0,s.jsx)(f.ZP,{item:!0,xs:12,children:(0,s.jsx)(g.Z,{name:"name",label:t.name,value:_.values.name,required:!0,maxAccess:n,maxLength:"30",onChange:_.handleChange,onClear:()=>_.setFieldValue("name",""),error:_.touched.name&&!!_.errors.name})}),(0,s.jsx)(f.ZP,{item:!0,xs:12,children:(0,s.jsx)(I.Z,{datasetId:q.v.ALLOCATION_TYPE,name:"allocationType",label:t.allocationType,valueField:"key",displayField:"value",values:_.values,required:!0,maxAccess:n,onChange:(e,t)=>{_.setFieldValue("allocationType",(null==t?void 0:t.key)||null)},error:_.touched.allocationType&&!!_.errors.allocationType})})]})})})})}var _=()=>{let{getRequest:e,postRequest:t}=(0,r.useContext)(c.$),{platformLabels:n}=(0,r.useContext)(y.l),{stack:f}=(0,C.zY)();async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:s=50}=t;return{...await e({extension:x.J.CACostTypes.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(s,"&filter=")}),_startAt:n}}let{query:{data:m},labels:g,paginationParameters:A,refetch:I,access:q,invalidate:_}=(0,i.J)({queryFn:h,endpointId:x.J.CACostTypes.page,datasetId:d.i.CACostTypes}),P=[{field:"reference",headerName:g.reference,flex:1},{field:"name",headerName:g.name,flex:1}];function j(e){f({Component:v,props:{labels:g,recordId:e,maxAccess:q},width:500,height:500,title:g.CostType})}let Z=async e=>{await t({extension:x.J.CACostTypes.del,record:JSON.stringify(e)}),_(),a.ZP.success(n.Deleted)};return(0,s.jsxs)(u.R,{children:[(0,s.jsx)(p.g,{children:(0,s.jsx)(l.Z,{onAdd:()=>{j()},maxAccess:q})}),(0,s.jsx)(T.Q,{children:(0,s.jsx)(o.Z,{columns:P,gridData:m,rowId:["recordId"],onEdit:e=>{j(null==e?void 0:e.recordId)},onDelete:Z,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:A,refetch:I,maxAccess:q})})]})}},98891:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let s="CO.asmx/",r={CACostTypes:{qry:s+"qryTYP",page:s+"pageTYP",get:s+"getTYP",set:s+"setTYP",del:s+"delTYP"},PuCostAllocations:{qry:s+"qryTRX",page:s+"pageTRX",get:s+"getTRX",set:s+"setTRX",del:s+"delTRX",post:s+"postTRX",unpost:s+"unpostTRX",close:s+"closeTRX",reopen:s+"reopenTRX",snapshot:s+"snapshotTRX"},TrxCostType:{qry:s+"qryTCT",page:s+"pageTCT",get:s+"getTCT",set:s+"setTCT",del:s+"delTCT"},Invoice:{qry:s+"qryIVC",set2:s+"set2IVC"},TrxDstribution:{qry:s+"qryICT"},InvoicesItems:{qry:s+"qryITM"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=47926)}),_N_E=e.O()}]);