(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11892],{38483:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-payment-terms",function(){return n(42962)}])},42962:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return I}});var s=n(52322),r=n(2784),t=n(62202),d=n(69387),i=n(27723),l=n(65950),c=n(71987),o=n(26612),u=n(33625),m=n(62362),y=n(31389),h=n(61802),x=n(22341),f=n(19473),p=n(60218),P=n(48601),g=n(82737),C=n(5088),v=n(80983),Z=n(8661),_=n(84100),j=n(91406);function T(e){let{labels:a,maxAccess:n,recordId:d}=e,{platformLabels:i}=(0,r.useContext)(f.l),{getRequest:u,postRequest:h}=(0,r.useContext)(l.$),T=(0,c.E)({endpointId:x.P.PaymentTerms.qry}),{formik:I}=(0,v.c)({initialValues:{recordId:d||null,name:"",reference:"",type:"",discount:"",discountDays:"",days:""},maxAccess:n,validateOnChange:!0,validationSchema:P.Ry({name:P.Z_().required(),reference:P.Z_().required(),type:P.Z_().required()}),onSubmit:async e=>{e.days||(e.days=0);let a=await h({extension:x.P.PaymentTerms.set,record:JSON.stringify(e)});e.recordId?t.ZP.success(i.Edited):(t.ZP.success(i.Added),I.setFieldValue("recordId",a.recordId)),T()}}),N=!!I.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(d){let e=await u({extension:x.P.PaymentTerms.get,parameters:"_recordId=".concat(d)});I.setValues(e.record)}}()},[]),(0,s.jsx)(g.Z,{resourceId:o.i.PaymentTerm,form:I,maxAccess:n,editMode:N,children:(0,s.jsx)(y.R,{children:(0,s.jsx)(m.Q,{children:(0,s.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(C.Z,{name:"reference",label:a.reference,value:I.values.reference,required:!0,maxAccess:n,onChange:I.handleChange,onClear:()=>I.setFieldValue("reference",""),error:I.touched.reference&&!!I.errors.reference})}),(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(C.Z,{name:"name",label:a.name,value:I.values.name,required:!0,maxAccess:n,maxLength:"30",onChange:I.handleChange,onClear:()=>I.setFieldValue("name",""),error:I.touched.name&&!!I.errors.name})}),(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(Z.Z,{datasetId:_.v.PAYMENT_TERM_TYPE,name:"type",label:a.type,required:!0,valueField:"key",displayField:"value",values:I.values,maxAccess:n,onChange:(e,a)=>{I.setFieldValue("type",null==a?void 0:a.key)},error:I.touched.type&&!!I.errors.type})}),(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(j.Z,{name:"discountDays",label:a.discountDays,value:I.values.discountDays,onChange:I.handleChange,onClear:()=>I.setFieldValue("discountDays","")})}),(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(j.Z,{name:"days",label:a.days,value:I.values.days,onChange:I.handleChange,onClear:()=>I.setFieldValue("days","")})}),(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(j.Z,{name:"discount",label:a.discount,value:I.values.discount,onChange:I.handleChange,onClear:()=>I.setFieldValue("discount","")})})]})})})})}var I=()=>{let{getRequest:e,postRequest:a}=(0,r.useContext)(l.$),{stack:n}=(0,h.zY)();async function p(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:s=50}=a;try{return{...await e({extension:x.P.PaymentTerms.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(s,"&_filter=")}),_startAt:n}}catch(e){}}let{query:{data:P},labels:g,access:C,paginationParameters:v,invalidate:Z,refetch:_}=(0,c.J)({queryFn:p,endpointId:x.P.PaymentTerms.qry,datasetId:o.i.PaymentTerm}),{platformLabels:j}=(0,r.useContext)(f.l),I=[{field:"name",headerName:g.name,flex:1},{field:"ptName",headerName:g.paymentType,flex:1},{field:"days",headerName:g.days,flex:1},{field:"discountDays",headerName:g.discountDays,flex:1},{field:"discount",headerName:g.discount,flex:1,type:"number"}];function N(e){n({Component:T,props:{labels:g,recordId:e,maxAccess:C},width:700,height:470,title:g.paymentTerms})}let b=async e=>{try{await a({extension:x.P.PaymentTerms.del,record:JSON.stringify(e)}),Z(),t.ZP.success(j.Deleted)}catch(e){}};return(0,s.jsxs)(y.R,{children:[(0,s.jsx)(u.g,{children:(0,s.jsx)(i.Z,{onAdd:()=>{N()},maxAccess:C})}),(0,s.jsx)(m.Q,{children:(0,s.jsx)(d.Z,{columns:I,gridData:P,rowId:["recordId"],onEdit:e=>{N(null==e?void 0:e.recordId)},onDelete:b,isLoading:!1,refetch:_,pageSize:50,paginationParameters:v,paginationType:"api",maxAccess:C})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=38483)}),_N_E=e.O()}]);