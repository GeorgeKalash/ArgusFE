(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33012],{93968:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/states",function(){return a(64975)}])},64975:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return j}});var r=a(52322),t=a(2784),s=a(62202),c=a(69387),d=a(27723),i=a(65950),l=a(38449),o=a(71987),u=a(26612),m=a(31389),f=a(33625),x=a(62362),h=a(60218),I=a(48601),g=a(82737),v=a(5088),p=a(8661),y=a(80983),N=a(19473),C=a(19689);function Z(e){var n;let{labels:a,maxAccess:c,recordId:d}=e,[f,Z]=(0,t.useState)(!!d),{platformLabels:_}=(0,t.useContext)(N.l),{getRequest:j,postRequest:S}=(0,t.useContext)(i.$),w=(0,o.E)({endpointId:l.r.State.page}),{formik:A}=(0,y.c)({initialValues:{recordId:null,name:"",flName:"",countryId:"",reference:"",isInactive:!1},maxAccess:c,validateOnChange:!0,validationSchema:I.Ry({name:I.Z_().required(),countryId:I.Z_().required(),reference:I.Z_().required()}),onSubmit:async e=>{let n=e.recordId,a=await S({extension:l.r.State.set,record:JSON.stringify(e)});n?s.ZP.success(_.Edited):(s.ZP.success(_.Added),A.setValues({...e,recordId:a.recordId})),Z(!0),w()}});return(0,t.useEffect)(()=>{!async function(){if(d){let e=await j({extension:l.r.State.get,parameters:"_recordId=".concat(d)});A.setValues({...e.record,isInactive:!!e.record.isInactive})}}()},[d]),(0,r.jsx)(g.Z,{resourceId:u.i.States,form:A,maxAccess:c,editMode:f,children:(0,r.jsx)(m.R,{children:(0,r.jsx)(x.Q,{children:(0,r.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(h.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{name:"reference",label:a.reference,value:A.values.reference,required:!0,maxAccess:c,maxLength:"40",onChange:A.handleChange,onClear:()=>A.setFieldValue("reference",""),error:A.touched.reference&&!!A.errors.reference})}),(0,r.jsx)(h.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{name:"name",label:a.name,value:A.values.name,required:!0,maxAccess:c,maxLength:"40",onChange:A.handleChange,onClear:()=>A.setFieldValue("name",""),error:A.touched.name&&!!A.errors.name})}),(0,r.jsx)(h.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{name:"flName",label:a.flName,value:A.values.flName,maxAccess:c,maxLength:"40",onChange:A.handleChange,onClear:()=>A.setFieldValue("flName",""),error:A.touched.flName&&!!A.errors.flName})}),(0,r.jsx)(h.ZP,{item:!0,xs:12,children:(0,r.jsx)(p.Z,{endpointId:l.r.Country.qry,name:"countryId",required:!0,label:a.countryId,valueField:"recordId",displayField:"name",values:A.values,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],maxAccess:c,onChange:(e,n)=>{A.setFieldValue("countryId",null==n?void 0:n.recordId)},error:A.touched.countryId&&!!A.errors.countryId})}),(0,r.jsx)(h.ZP,{item:!0,xs:12,children:(0,r.jsx)(C.Z,{name:"isInactive",value:null===(n=A.values)||void 0===n?void 0:n.isInactive,onChange:e=>A.setFieldValue("isInactive",e.target.checked),label:a.isInactive,maxAccess:c})})]})})})})}var _=a(61802),j=()=>{let{getRequest:e,postRequest:n}=(0,t.useContext)(i.$),{stack:a}=(0,_.zY)(),{platformLabels:h}=(0,t.useContext)(N.l);async function I(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:r=50,_countryId:t=0}=n;return{...await e({extension:l.r.State.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(r,"&_countryId=").concat(t,"&filter=")}),_startAt:a}}let{query:{data:g},labels:v,refetch:p,paginationParameters:y,access:C}=(0,o.J)({queryFn:I,endpointId:l.r.State.page,datasetId:u.i.States}),j=(0,o.E)({endpointId:l.r.State.page}),S=[{field:"reference",headerName:v.reference,flex:1},{field:"name",headerName:v.name,flex:1},{field:"flName",headerName:v.flName,flex:1},{field:"countryName",headerName:v.countryId,flex:1}];function w(e){a({Component:Z,props:{labels:v,recordId:e,maxAccess:C},width:500,height:400,title:v.State})}let A=async e=>{await n({extension:l.r.State.del,record:JSON.stringify(e)}),j(),s.ZP.success(h.Deleted)};return(0,r.jsxs)(m.R,{children:[(0,r.jsx)(f.g,{children:(0,r.jsx)(d.Z,{onAdd:()=>{w()},maxAccess:C})}),(0,r.jsx)(x.Q,{children:(0,r.jsx)(c.Z,{columns:S,gridData:g,rowId:["recordId"],onEdit:e=>{w(null==e?void 0:e.recordId)},onDelete:A,isLoading:!1,refetch:p,pageSize:50,paginationParameters:y,maxAccess:C,paginationType:"api"})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=93968)}),_N_E=e.O()}]);