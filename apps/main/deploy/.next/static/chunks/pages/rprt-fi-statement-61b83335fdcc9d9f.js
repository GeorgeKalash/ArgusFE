(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3622],{61341:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rprt-fi-statement",function(){return t(86456)}])},86456:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var l=t(52322),i=t(2784),a=t(69387),r=t(65950),o=t(71987),d=t(26612),u=t(31389),s=t(33625),c=t(62362),m=t(36908),p=t(60158),h=t(26045),f=t(61802),v=t(60218),b=t(76385),x=t(40234),g=t(69627),A=t(39812);function y(e){var n;let{columns:t=[],rows:i=[],treeField:a,firstColWidth:r="",showOnScreen:o}=e,d=(null===(n=t.find(e=>e.isTree))||void 0===n?void 0:n.field)||a,u=Math.max(0,t.findIndex(e=>e.field===d)),s=t.map((e,n)=>n===u?r:null),c=e=>null==e?{}:{width:"number"==typeof e?"".concat(e,"px"):String(e)},m=(e,n)=>(null==e?void 0:e.type)==="number"&&"number"==typeof n?new Intl.NumberFormat().format(n):(null==e?void 0:e.type)==="date"?"function"==typeof A.L6?(0,A.L6)(n):null!=n?n:"":(null==e?void 0:e.type)==="dateTime"&&"function"==typeof A.bm?(0,A.bm)(n,null==e?void 0:e.dateFormat):null!=n?n:"";return(0,l.jsxs)("table",{className:"print-table",style:{display:o?"table":"none",width:"100%",borderCollapse:"collapse",fontSize:"10pt",tableLayout:"fixed"},children:[(0,l.jsx)("colgroup",{children:s.map((e,n)=>(0,l.jsx)("col",{style:c(e)},n))}),(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:t.map((e,n)=>(0,l.jsx)("th",{style:{...c(s[n]),textAlign:(null==e?void 0:e.type)==="number"?"right":"left",padding:"6px 8px",border:"1px solid #ddd",fontWeight:700,background:"#fafafa",overflow:"hidden",whiteSpace:"normal"},children:n===u?"":e.headerName||e.field},e.field))})}),(0,l.jsx)("tbody",{children:null==i?void 0:i.map((e,n)=>{let i=!!(null==e?void 0:e.isBold);return(0,l.jsx)("tr",{style:{background:n%2?"#fbfbfb":"white"},children:t.map((n,t)=>{let a=Number((null==e?void 0:e.level)||0),r=null==e?void 0:e[n.field],o=m(n,r);return(0,l.jsx)("td",{style:{...c(s[t]),textAlign:(null==n?void 0:n.type)==="number"?"right":"left",padding:"6px 8px",border:"1px solid #eee",verticalAlign:"top",fontWeight:i?700:400,overflow:"hidden",whiteSpace:"normal"},children:t===u?(0,l.jsx)("div",{style:{paddingInlineStart:"".concat(20*a,"px"),whiteSpace:"pre-wrap"},children:(0,l.jsx)("span",{children:o})}):(0,l.jsx)("span",{children:o})},n.field)})},n)})})]})}var w=e=>{let{labels:n,tableData:t,columns:a,rpbParams:r}=e,o=(0,i.useRef)(),d=(0,x.useReactToPrint)({content:()=>o.current,pageStyle:"\n      @page { size: A4; margin: 12mm; }\n    "});return(0,l.jsxs)(u.R,{children:[(0,l.jsx)(v.ZP,{item:!0,sx:{m:2},children:(0,l.jsx)(g.Z,{onClick:d,image:"print.png"})}),(0,l.jsxs)("div",{ref:o,className:"print-container",style:{all:"inherit"},children:[(0,l.jsx)(b.Z,{variant:"h5",sx:{fontWeight:"bold",textAlign:"center",m:1,fontSize:"18pt"},children:n.FinancialStatement}),r&&r.length>0&&(0,l.jsx)(v.ZP,{container:!0,direction:"column",spacing:.5,sx:{m:0,p:1},children:r.map((e,n)=>e.display&&(0,l.jsxs)(v.ZP,{item:!0,children:[(0,l.jsxs)("b",{children:[e.caption,":"]})," ",e.display]},n))}),(0,l.jsx)(y,{columns:a,rows:t,showOnScreen:!0,treeField:"nodeName",firstColWidth:"45%"})]})]})},j=()=>{let{getRequest:e}=(0,i.useContext)(r.$),[n,t]=(0,i.useState)({}),{stack:v}=(0,f.zY)(),[b,x]=(0,i.useState)({baseAmount:"",baseFiatAmount:"",reportingMetalAmount:"",currentRateBaseAmount:""});async function g(){var n,l,i,a,r;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{params:d}=o;if(!d)return;let u=Object.fromEntries(d.split("^").map(e=>e.split("|")))["4"],s=await e({extension:p.O.FinancialStatment.FS101,parameters:"_params=".concat(d)});x({baseAmount:(null==s?void 0:null===(n=s.record)||void 0===n?void 0:n.baseCurrencyRef)||"",baseFiatAmount:(null==s?void 0:null===(l=s.record)||void 0===l?void 0:l.baseCurrencyFiat)||"",reportingMetalAmount:(null==s?void 0:null===(i=s.record)||void 0===i?void 0:i.reportingMetalCurrencyRef)||"",currentRateBaseAmount:(null==s?void 0:null===(a=s.record)||void 0===a?void 0:a.baseCurrencyAtEndDateRate)||""});let c=function(e){let n=[],t=e.reduce((e,n)=>{var t;let l=null!==(t=n.parentId)&&void 0!==t?t:null;return e[l]||(e[l]=[]),e[l].push(n),e},{});return!function e(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(t[l]||[]).forEach(a=>{var r,o,d,u,s,c,m,p,h,f,v,b,x,g,A;let y=!!(null===(r=t[a.nodeId])||void 0===r?void 0:r.length),w=null!==(f=a.flags)&&void 0!==f?f:0,j=[];for(let e=0;e<32;e++)j.push(w>>e&1);let F=null!==(v=null===(d=a.cellValues)||void 0===d?void 0:null===(o=d[0])||void 0===o?void 0:o.baseAmount)&&void 0!==v?v:null,S=null!==(b=null===(s=a.cellValues)||void 0===s?void 0:null===(u=s[0])||void 0===u?void 0:u.baseFiatAmount)&&void 0!==b?b:null,N=null!==(x=null===(m=a.cellValues)||void 0===m?void 0:null===(c=m[0])||void 0===c?void 0:c.reportingMetalAmount)&&void 0!==x?x:null,R=null!==(g=null===(h=a.cellValues)||void 0===h?void 0:null===(p=h[0])||void 0===p?void 0:p.currentRateBaseAmount)&&void 0!==g?g:null;if(y&&(0===F&&(F=""),0===S&&(S=""),0===N&&(N=""),0===R&&(R="")),n.push({nodeId:a.nodeId,parent:l,level:i,isExpanded:!0,hasChildren:y,isBold:(8&w)!=0,nodeName:a.nodeName,baseAmount:F,baseFiatAmount:S,reportingMetalAmount:N,currentRateBaseAmount:R,flags:w}),y&&e(a.nodeId,i+1),1===j[0]||1===j[1]){if(n.push({nodeId:"".concat(a.nodeId,"_flags"),parent:a.nodeId,level:i,isExpanded:!1,hasChildren:!1,nodeName:" ",baseAmount:null,baseFiatAmount:null,reportingMetalAmount:null,currentRateBaseAmount:null,flags:w}),1===j[2]&&(null===(A=a.cellValues)||void 0===A?void 0:A[0])){let e={...a.cellValues[0]};for(let n in e)"number"==typeof e[n]&&(e[n]=(e[n],-e[n]));a.cellValues[0]=e}a.flags=0}})}(null,0),n}((null==s?void 0:null===(r=s.record)||void 0===r?void 0:r.data)||[]),m=Object.fromEntries(c.map(e=>{let{nodeId:n,nodeName:t}=e;return[n,t]}));if(u){let n=await e({extension:h.U.FinancialStatement.get,parameters:"_recordId=".concat(u)});(null==n?void 0:n.record)&&t({baseAmount:!!n.record.showBaseAmount,baseFiatAmount:!!n.record.showFiatCurrencyAmount,reportingMetalAmount:!!n.record.showMetalCurrencyAmount,currentRateBaseAmount:!!n.record.showCurrentRateBaseAmount})}return c.map(e=>({...e,parent:null!=e.parent?m[e.parent]:null}))}async function A(e){let{filters:n,pagination:t}=e;return g({_startAt:t._startAt||0,params:null==n?void 0:n.params})}let{query:{data:y},labels:j,filterBy:F,access:S}=(0,o.J)({queryFn:g,endpointId:p.O.FinancialStatment.FS101,datasetId:d.i.FinancialStatementsReport,filter:{filterFn:A}}),N=[{field:"nodeName",headerName:"",flex:1,width:"auto",isTree:!0},{field:"baseAmount",headerName:b.baseAmount,width:150,type:"number"},{field:"baseFiatAmount",headerName:b.baseFiatAmount,width:150,type:"number"},{field:"reportingMetalAmount",headerName:b.reportingMetalAmount,width:150,type:"number"},{field:"currentRateBaseAmount",headerName:b.currentRateBaseAmount,width:150,type:"number"}].map(e=>({...e,hide:!1===n[e.field]}));return(0,l.jsxs)(u.R,{children:[(0,l.jsx)(s.g,{children:(0,l.jsx)(m.Z,{hasSearch:!1,labels:j,maxAccess:S,reportName:"FS01",filterBy:F,Print:e=>{(null==y?void 0:y.length)&&v({Component:w,props:{tableData:y,rpbParams:e,columns:N,labels:j},width:1200,height:600,title:j.Print})},disablePrint:!(null==y?void 0:y.length)})}),(null==y?void 0:y.length)>0&&(0,l.jsx)(c.Q,{children:(0,l.jsx)(a.Z,{name:"table",columns:N,gridData:{list:y},rowId:["nodeId"],pagination:!1,collabsable:!1,maxAccess:S,field:"nodeName",disableSorting:!0,fullRowData:y})})]})}},60158:function(e,n,t){"use strict";t.d(n,{O:function(){return i}});let l="RG.GL.asmx/",i={OriginBalance:{GLDOE:l+"GLDOE"},FyOpening:{GLFYO:l+"GLFYO"},EoyClosing:{GLEOY:l+"GLEOY"},FinancialStatment:{FS101:l+"FS101"}}}},function(e){e.O(0,[92515,2494,40234,36908,49774,92888,40179],function(){return e(e.s=61341)}),_N_E=e.O()}]);