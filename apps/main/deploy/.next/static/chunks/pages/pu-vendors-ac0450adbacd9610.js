(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58772],{71560:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pu-vendors",function(){return r(67913)}])},67913:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return L}});var t=r(52322),n=r(2784),s=r(62202),d=r(69387),l=r(65950),o=r(26612),i=r(71987),c=r(61802),u=r(31389),m=r(33625),x=r(62362),v=r(19473),h=r(29326),f=r(9522),b=r(60218),I=r(48601),y=r(82737),p=r(5088),g=r(80983),_=r(25870),C=r(27423),j=r(8661),A=r(91406),Z=r(84100),N=r(2454),P=r(45300),T=r(38449),V=r(65947);let R=async(e,a)=>{try{return(await e({extension:T.r.NumberRange.get,parameters:"_recordId=".concat(a)})).record}catch(e){return null}},S=(e,a,r)=>{let t=(e=JSON.parse(JSON.stringify(e))).record.controls,n=t.find(e=>e.controlId===r);return n?n.accessLevel=a.mandatory?V.$7:V.rr:a.mandatory||a.readOnly?t.push({sgId:"",resourceId:"",controlId:r,accessLevel:a.mandatory?V.$7:V.rr}):t=t.filter(e=>e.controlId!==r),{...e,record:{...e.record,controls:t}}},w=async function(e){let a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reference",t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,d={readOnly:!1,mandatory:!0};return s?d={readOnly:!0,mandatory:!1}:n&&(d={readOnly:!(null==(a=await R(e,n))?void 0:a.external),mandatory:null==a?void 0:a.external}),t&&(t=S(t,d,r)),{field:d,maxAccess:t,selectNraId:n}};var F=r(19689);function D(e){var a,r,d,c;let{labels:m,maxAccess:h,recordId:f,setStore:T}=e,{getRequest:V,postRequest:R}=(0,n.useContext)(l.$),{platformLabels:S}=(0,n.useContext)(v.l),D=(0,i.E)({endpointId:N.y.Vendor.page}),{maxAccess:k,changeDT:O}=function(e){var a;let{access:r,fieldName:t,editMode:s=!0}=e,{getRequest:d}=(0,n.useContext)(l.$),[o,i]=(0,n.useState)(),c=async e=>await w(d,t,r,e,s),u=(0,P.a)({retry:!1,staleTime:0,queryKey:[o,!!r],queryFn:()=>c(o)});return{refBehavior:u.data,maxAccess:null==u?void 0:null===(a=u.data)||void 0===a?void 0:a.maxAccess,changeDT(e){i(null==e?void 0:e.nraId)}}}({access:h,editMode:!!f}),{formik:E}=(0,g.c)({initialValues:{recordId:f,reference:"",name:"",flName:"",currencyId:"",paymentMethod:"",tradeDiscount:"",keywords:"",groupId:"",status:"",taxId:"",taxRef:"",isInactive:!1,isTaxable:!1},maxAccess:k,validateOnChange:!0,validate:e=>{let a={};return e.isTaxable&&!e.taxRef&&(a.taxRef=" "),a},validationSchema:I.Ry().shape({name:I.Z_().required()}),onSubmit:async e=>{let a=await R({extension:N.y.Vendor.set,record:JSON.stringify(e)});e.recordId?s.ZP.success(S.Edited):(T({recordId:a.recordId,name:e.name}),E.setFieldValue("recordId",a.recordId),M(a.recordId),s.ZP.success(S.Added)),D()}}),q=!!E.values.recordId;(0,n.useEffect)(()=>{!async function(){await M(f)}()},[]);let M=async e=>{if(e){let a=await V({extension:N.y.Vendor.get,parameters:"_recordId=".concat(e)});T({recordId:a.record.recordId,name:a.record.name}),E.setValues(a.record)}};return(0,t.jsx)(y.Z,{resourceId:o.i.PuVendors,form:E,actions:[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!q}],maxAccess:k,editMode:q,children:(0,t.jsx)(u.R,{children:(0,t.jsx)(x.Q,{children:(0,t.jsxs)(b.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{endpointId:N.y.VendorGroups.qry,name:"groupId",label:m.vendorGroup,valueField:"recordId",displayField:["reference","name"],readOnly:!!q,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:E.values,onChange:(e,a)=>{E.setFieldValue("groupId",a?a.recordId:""),O(a)},error:E.touched.taxId&&!!E.errors.taxId,maxAccess:k})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{name:"reference",label:m.reference,value:E.values.reference,onChange:E.handleChange,maxLength:"10",maxAccess:k,onClear:()=>E.setFieldValue("reference",""),error:E.touched.reference&&!!E.errors.reference})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{name:"name",label:m.name,value:E.values.name,onChange:E.handleChange,maxAccess:k,required:!0,onClear:()=>E.setFieldValue("name",""),error:E.touched.name&&!!E.errors.name})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{name:"keywords",label:m.keyWords,value:E.values.keywords,maxLength:"30",maxAccess:k,onChange:E.handleChange,onClear:()=>E.setFieldValue("keyWord",""),error:E.touched.keyWord&&!!E.errors.keyWord})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(C.U,{endpointId:_.H.Account.snapshot,name:"accountId",label:m.accountRef,valueField:"reference",displayField:"name",valueShow:"accountRef",secondValueShow:"accountName",form:E,onChange:(e,a)=>{E.setFieldValue("accountId",(null==a?void 0:a.recordId)||""),E.setFieldValue("accountRef",(null==a?void 0:a.reference)||""),E.setFieldValue("accountName",(null==a?void 0:a.name)||"")},error:E.touched.accountId&&!!E.errors.accountId,maxAccess:k})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{name:"flName",label:m.flName,value:E.values.flName,maxLength:"50",maxAccess:k,onChange:E.handleChange,onClear:()=>E.setFieldValue("flName",""),error:E.touched.flName&&!!E.errors.flName})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(F.Z,{name:"isTaxable",value:null===(a=E.values)||void 0===a?void 0:a.isTaxable,onChange:e=>E.setFieldValue("isTaxable",e.target.checked),label:m.tax,maxAccess:k})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{name:"taxRef",label:m.taxRef,value:E.values.taxRef,onChange:E.handleChange,maxLength:"20",readOnly:!(null===(r=E.values)||void 0===r?void 0:r.isTaxable),required:null===(d=E.values)||void 0===d?void 0:d.isTaxable,maxAccess:k,onClear:()=>E.setFieldValue("taxRef",""),error:E.touched.taxRef&&!!E.errors.taxRef})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{endpointId:_.H.TaxSchedules.qry,name:"taxId",label:m.tax,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:E.values,onChange:(e,a)=>{E.setFieldValue("taxId",a?a.recordId:"")},error:E.touched.taxId&&!!E.errors.taxId,maxAccess:k})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{datasetId:Z.v.PAYMENT_METHOD,name:"paymentMethod",label:m.payment,valueField:"key",displayField:"value",values:E.values,onChange:async(e,a)=>{E.setFieldValue("paymentMethod",null==a?void 0:a.key)},error:E.touched.paymentMethod&&!!E.errors.paymentMethod,maxAccess:k})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{name:"tradeDiscount",maxLength:4,decimalScale:2,label:m.tradeDiscount,value:E.values.tradeDiscount,onChange:e=>E.setFieldValue("tradeDiscount",e.target.value)})}),(0,t.jsx)(b.ZP,{item:!0,xs:12,children:(0,t.jsx)(F.Z,{name:"isInactive",value:null===(c=E.values)||void 0===c?void 0:c.isInactive,onChange:e=>E.setFieldValue("isInactive",e.target.checked),label:m.inactive,maxAccess:k})})]})})})})}var k=r(17454),O=r(45937),E=e=>{let{store:a,labels:r,editMode:d,...u}=e,{recordId:m}=a,{getRequest:x,postRequest:h}=(0,n.useContext)(l.$),{stack:f}=(0,c.zY)(),{platformLabels:b}=(0,n.useContext)(v.l),I=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:r=50}=e;return{...await x({extension:N.y.Address.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(r,"&_vendorId=").concat(m)}),_startAt:a}},{query:{data:y,refetch:p},paginationParameters:g}=(0,i.J)({enabled:!!m,queryFn:I,endpointId:N.y.Address.page,datasetId:o.i.Address}),_=async e=>{e.vendorId=m,e.addressId=e.recordId,await h({extension:N.y.Address.del,record:JSON.stringify(e)}),s.ZP.success(b.Deleted),p()};function C(e){f({Component:O.Z,props:{recordId:e,isCleared:!1,datasetId:o.i.ADDPuVendors,onSubmit:async(e,r)=>{if(e){let t={vendorId:a.recordId,address:e,addressId:e.recordId};await h({extension:N.y.Address.set,record:JSON.stringify(t)}),s.ZP.success(e.recordId?b.Edited:b.Added),p(),r.close()}}}})}let j={...y,list:((null==y?void 0:y.list)||[]).map(e=>e.address)};return(0,t.jsx)(k.Z,{addressGridData:j,paginationParameters:g,addAddress:function(){C("")},delAddress:_,editAddress:e=>{C(e.recordId)},datasetId:o.i.ADDPuVendors,refetch:p,...u})},q=e=>{let{labels:a,maxAccess:r,recordId:s}=e,[d,l]=(0,n.useState)(0),[o,i]=(0,n.useState)({recordId:s||null,name:null}),c=[{label:null==a?void 0:a.vendor},{label:null==a?void 0:a.address,disabled:!o.recordId}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Y,{tabs:c,activeTab:d,setActiveTab:l,maxAccess:r}),(0,t.jsx)(h.Z,{index:0,value:d,maxAccess:r,children:(0,t.jsx)(D,{labels:a,maxAccess:r,recordId:s,setStore:i})}),(0,t.jsx)(h.Z,{index:1,value:d,maxAccess:r,children:(0,t.jsx)(E,{labels:a,recordId:o.recordId,store:o,setStore:i})})]})},M=r(36908),L=()=>{let{getRequest:e,postRequest:a}=(0,n.useContext)(l.$),{stack:r}=(0,c.zY)(),{platformLabels:h}=(0,n.useContext)(v.l),{query:{data:f},labels:b,filterBy:I,paginationParameters:y,invalidate:p,refetch:g,access:_}=(0,i.J)({queryFn:j,endpointId:N.y.Vendor.page,datasetId:o.i.PuVendors,filter:{filterFn:C}});async function C(a){let{filters:r,pagination:t}=a;return(null==r?void 0:r.qry)?await e({extension:N.y.Vendor.snapshot,parameters:"_filter=".concat(r.qry)}):j({_startAt:t._startAt||0,params:null==r?void 0:r.params})}async function j(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50,params:n}=a;return{...await e({extension:N.y.Vendor.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(t,"&_params=").concat(n||"")}),_startAt:r}}let A=[{field:"reference",headerName:b.reference,flex:1},{field:"name",headerName:b.name,flex:1},{field:"flName",headerName:b.flName,flex:1}];function Z(e){r({Component:q,props:{labels:b,recordId:e,maxAccess:_},width:700,height:550,title:null==b?void 0:b.vendor})}return(0,t.jsxs)(u.R,{children:[(0,t.jsx)(m.g,{children:(0,t.jsx)(M.Z,{onAdd:()=>{Z()},maxAccess:_,reportName:"PUVEN",filterBy:I})}),(0,t.jsx)(x.Q,{children:(0,t.jsx)(d.Z,{columns:A,gridData:f,rowId:["recordId"],paginationParameters:y,paginationType:"api",refetch:g,onEdit:e=>{Z(null==e?void 0:e.recordId)},onDelete:e=>{a({extension:N.y.Vendor.del,record:JSON.stringify(e)}).then(e=>{s.ZP.success(h.Deleted),p()}).catch(e=>{})},isLoading:!1,pageSize:50,maxAccess:_})})]})}},45937:function(e,a,r){"use strict";var t=r(52322),n=r(38449),s=r(93894),d=r(2784),l=r(65950),o=r(19473),i=r(21326);let c=e=>{let{recordId:a,editMode:r,onSubmit:c=()=>{},window:u,actions:m=[],address:x,setAddress:v,required:h=!0,...f}=e,{getRequest:b,postRequest:I}=(0,d.useContext)(l.$),{platformLabels:y}=(0,d.useContext)(o.l),[p,g]=(0,d.useState)(a||null),[_,C]=(0,d.useState)(null),j=!!x&&!!v,A=j?x:_,Z=j?v:C;(0,i.Z)({title:y.Address,window:u});let N=async e=>{if(!h){Z(e),c(e,u);return}let a={...e,recordId:p||(null==A?void 0:A.recordId)||null},r=await I({extension:n.r.Address.set,record:JSON.stringify(a)}),t=(null==r?void 0:r.recordId)||p||null,s={...a,recordId:t,addressId:t};g(t),Z(s),c(s,u)};return(0,d.useEffect)(()=>{!j&&p&&(async()=>{let e=await b({extension:n.r.Address.get,parameters:"_filter=&_recordId=".concat(p)});C((null==e?void 0:e.record)||null)})()},[p,j]),(0,t.jsx)(s.O,{editMode:r,setAddress:Z,address:A,onSubmit:N,actions:m,window:u,...f})};c.width=600,c.height=500,a.Z=c},93894:function(e,a,r){"use strict";r.d(a,{O:function(){return u}});var t=r(52322),n=r(2784),s=r(82737),d=r(13073),l=r(80983),o=r(31389),i=r(33625),c=r(48601);let u=e=>{let{setAddress:a,address:r,editMode:u,window:m,readOnly:x,allowPost:v=!0,optional:h=!1,onSubmit:f,isSavedClear:b=!0,isCleared:I=!0,changeClear:y=!1,actions:p=[],...g}=e,[_,C]=(0,n.useState)(!h),[j,A]=(0,n.useState)({}),{formik:Z}=(0,l.c)({maxAccess:j.maxAccess,initialValues:{recordId:null,name:"",countryId:null,countryName:"",stateId:null,stateName:"",cityId:null,city:"",street1:"",street2:"",email1:"",email2:"",phone:"",phone2:"",phone3:"",addressId:null,postalCode:"",cityDistrictId:null,cityDistrict:"",bldgNo:"",unitNo:"",subNo:"",poBox:""},validateOnChange:!0,validateOnBlur:!0,validationSchema:c.Ry({...j.validate}),onSubmit:e=>{a(e),v?f(e,m):m.close()}});return(0,n.useEffect)(()=>{h&&(Z.values.name||Z.values.street1||Z.values.countryId||Z.values.cityId)&&C(!0),!h||Z.values.name||Z.values.street1||Z.values.countryId||Z.values.cityId||C(!1)},[Z.values]),(0,t.jsx)(s.Z,{form:Z,maxAccess:j.maxAccess,isInfo:!1,disabledSubmit:x,editMode:u,isSavedClear:b,isCleared:I,onClear:y?()=>{Z.resetForm({values:Z.initialValues})}:void 0,actions:p,...g,children:(0,t.jsx)(o.R,{children:(0,t.jsx)(i.g,{children:(0,t.jsx)(d.Z,{addressValidation:Z,readOnly:x,required:_,setFormik:A,address:r,...g})})})})}},17454:function(e,a,r){"use strict";var t=r(52322),n=r(69387),s=r(27723),d=r(31389),l=r(33625),o=r(62362),i=r(50023),c=r(26612);a.Z=e=>{let{addressGridData:a,addAddress:r,delAddress:u,editAddress:m,paginationParameters:x,refetch:v,datasetId:h}=e,{labels:f,access:b}=(0,i.Z)({datasetId:c.i.Address,DatasetIdAccess:h}),I=[{field:"name",headerName:f.name,flex:1},{field:"street1",headerName:f.street1,flex:1},{field:"street2",headerName:f.street2,flex:1},{field:"city",headerName:f.city,flex:1},{field:"phone",headerName:f.phone,flex:1},{field:"email1",headerName:f.email1,flex:1},{field:"email2",headerName:f.email2,flex:1}];return(0,t.jsxs)(d.R,{children:[(0,t.jsx)(l.g,{children:(0,t.jsx)(s.Z,{onAdd:r,maxAccess:b})}),(0,t.jsx)(o.Q,{children:(0,t.jsx)(n.Z,{name:"address",columns:I,gridData:a,rowId:["recordId"],onEdit:m,onDelete:u,isLoading:!1,maxAccess:b,pageSize:50,refetch:v,paginationParameters:x,paginationType:"api"})})]})}},29326:function(e,a,r){"use strict";var t=r(52322);r(2784);var n=r(23925),s=r(13980),d=r.n(s),l=r(95291),o=r.n(l),i=r(65947);let c=e=>{var a,r,s;let{children:d,value:l,index:c,maxAccess:u,...m}=e,x="".concat(e.name||"tab",".").concat(c),{accessLevel:v}=null!==(s=(null!==(r=null==u?void 0:null===(a=u.record)||void 0===a?void 0:a.controls)&&void 0!==r?r:[]).find(e=>e.controlId===x))&&void 0!==s?s:{accessLevel:0};if(v===i.A1)return null;let h=l===c;return(0,t.jsx)(n.Z,{role:"tabpanel",hidden:!h,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(o().tabPanel," ").concat(h?o().active:o().hidden),...m,children:d})};c.propTypes={children:d().node,index:d().number.isRequired,value:d().number.isRequired},a.Z=c},9522:function(e,a,r){"use strict";r.d(a,{Y:function(){return m}});var t=r(52322),n=r(23925),s=r(54582),d=r(68696),l=r(44258),o=r(2784),i=r(99266),c=r(52614),u=r.n(c);let m=e=>{var a,r,c,m,x;let{tabs:v,activeTab:h,setActiveTab:f,maxAccess:b,name:I="tab"}=e,y=(null==b?void 0:null===(r=b.record)||void 0===r?void 0:null===(a=r.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(I,".")))}).map(e=>e.controlId.split(".")[1]))||[],p=null==v?void 0:null===(c=v.map((e,a)=>({...e,id:a})))||void 0===c?void 0:c.filter((e,a)=>!y.includes(String(a))),g=null===(m=p[h])||void 0===m?void 0:m.id,_=null===(x=p[h])||void 0===x?void 0:x.disabled;return(0,o.useEffect)(()=>{g>=0&&!_&&h!=g&&f(g)},[]),(0,t.jsx)(n.Z,{className:u().tabsContainer,children:(0,t.jsx)(n.Z,{className:u().tabsWrapper,children:(0,t.jsx)(s.Z,{value:h,onChange:(e,a)=>f(a),variant:"scrollable",scrollButtons:p.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==p?void 0:p.map(e=>(0,t.jsx)(d.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,t.jsxs)(n.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)("span",{children:e.label}),e.id===h&&(null==e?void 0:e.onRefetch)&&(0,t.jsx)(l.Z,{size:"small",className:u().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,t.jsx)(i.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[92515,2494,36908,13073,49774,92888,40179],function(){return e(e.s=71560)}),_N_E=e.O()}]);