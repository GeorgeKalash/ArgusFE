(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25720],{97828:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rs-labors",function(){return a(12813)}])},12813:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var r=a(52322),s=a(2784),l=a(62202),n=a(69387),d=a(27723),i=a(65950),o=a(71987),c=a(26612),u=a(31389),g=a(33625),p=a(62362),m=a(61802),h=a(19473),y=a(54736),x=a(60218),P=a(48601),T=a(82737),f=a(5088),q=a(80983),I=a(8661),v=a(19689),E=a(38449),R=a(84100),S=a(91406);function N(e){let{labels:t,maxAccess:a,recordId:n}=e,{getRequest:d,postRequest:g}=(0,s.useContext)(i.$),{platformLabels:m}=(0,s.useContext)(h.l),N=(0,o.E)({endpointId:y.m.RsLabors.page}),{formik:C}=(0,q.c)({initialValues:{recordId:null,reference:"",firstName:"",lastName:"",userId:null,positionId:null,allowLogIn:!1,activeStatus:null,rate:null},maxAccess:a,validationSchema:P.Ry({reference:P.Z_().required(),firstName:P.Z_().required(),lastName:P.Z_().required(),positionId:P.Rx().required(),activeStatus:P.Z_().required()}),onSubmit:async e=>{let t=await g({extension:y.m.RsLabors.set,record:JSON.stringify(e)});e.recordId||C.setFieldValue("recordId",t.recordId),l.ZP.success(e.recordId?m.Edited:m.Added),N()}}),L=!!C.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(n){let e=await d({extension:y.m.RsLabors.get,parameters:"_recordId=".concat(n)});C.setValues(e.record)}}()},[]),(0,r.jsx)(T.Z,{resourceId:c.i.RsLabors,form:C,maxAccess:a,editMode:L,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(p.Q,{children:(0,r.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{name:"reference",label:t.ref,value:C.values.reference,maxAccess:a,maxLength:"10",required:!0,onChange:C.handleChange,onClear:()=>C.setFieldValue("reference",""),error:C.touched.reference&&!!C.errors.reference})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{name:"firstName",label:t.firstName,value:C.values.firstName,required:!0,maxLength:"20",maxAccess:a,onChange:C.handleChange,onClear:()=>C.setFieldValue("firstName",""),error:C.touched.firstName&&!!C.errors.firstName})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{name:"lastName",label:t.lastName,value:C.values.lastName,required:!0,maxLength:"20",maxAccess:a,onChange:C.handleChange,onClear:()=>C.setFieldValue("lastName",""),error:C.touched.lastName&&!!C.errors.lastName})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.Z,{endpointId:y.m.JobPosition.qry,parameters:"_size=30&_startAt=0",name:"positionId",label:t.positionId,required:!0,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],maxAccess:a,values:C.values,onChange:(e,t)=>{C.setFieldValue("positionId",(null==t?void 0:t.recordId)||null)},error:C.touched.positionId&&!!C.errors.positionId})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.Z,{datasetId:R.v.ACTIVE_STATUS,name:"activeStatus",label:t.activeStatus,valueField:"key",displayField:"value",values:C.values,onChange:(e,t)=>{C.setFieldValue("activeStatus",t?t.key:null)},maxAccess:a,error:C.touched.activeStatus&&!!C.errors.activeStatus,required:!0})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{name:"allowLogIn",value:C.values.allowLogIn,onChange:e=>{C.setFieldValue("allowLogIn",e.target.checked),e.target.checked||C.setFieldValue("userId",null)},label:t.allowLogin,maxAccess:a})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.Z,{endpointId:E.r.Users.qry,parameters:"_startAt=0&_pageSize=100&_size=50&_sortBy=fullName&_filter=",name:"userId",readOnly:!C.values.allowLogIn,label:t.userId,valueField:"recordId",displayField:"email",values:C.values,maxAccess:a,onChange:(e,t)=>{C.setFieldValue("userId",(null==t?void 0:t.recordId)||null)},error:C.touched.userId&&!!C.errors.userId})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(S.Z,{name:"rate",label:t.rate,value:C.values.rate,onChange:C.handleChange,onClear:()=>C.setFieldValue("rate",null),decimalScale:2,maxLength:10})})]})})})})}var C=()=>{let{getRequest:e,postRequest:t}=(0,s.useContext)(i.$),{platformLabels:a}=(0,s.useContext)(h.l),{stack:x}=(0,m.zY)();async function P(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:r=50}=t;return{...await e({extension:y.m.RsLabors.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(r,"&filter=")}),_startAt:a}}let{query:{data:T},labels:f,refetch:q,invalidate:I,paginationParameters:v,access:E}=(0,o.J)({queryFn:P,endpointId:y.m.RsLabors.page,datasetId:c.i.RsLabors}),R=[{field:"reference",headerName:f.ref,flex:1},{field:"firstName",headerName:f.firstName,flex:1},{field:"lastName",headerName:f.lastName,flex:1}],S=async e=>{await t({extension:y.m.RsLabors.del,record:JSON.stringify(e)}),I(),l.ZP.success(a.Deleted)};function C(e){x({Component:N,props:{labels:f,recordId:e,maxAccess:E},width:600,height:500,title:f.labor})}return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(g.g,{children:(0,r.jsx)(d.Z,{onAdd:()=>{C()},maxAccess:E})}),(0,r.jsx)(p.Q,{children:(0,r.jsx)(n.Z,{name:"table",columns:R,gridData:T,rowId:["recordId"],onEdit:e=>{C(null==e?void 0:e.recordId)},onDelete:S,pageSize:50,paginationType:"api",maxAccess:E,refetch:q,paginationParameters:v})})]})}},54736:function(e,t,a){"use strict";a.d(t,{m:function(){return s}});let r="RS.asmx/",s={RepairName:{page:r+"pageRNA",qry:r+"qryRNA",get:r+"getRNA",set:r+"setRNA",del:r+"delRNA"},WorkOrderTypes:{page:r+"pageWOT",qry:r+"qryWOT",get:r+"getWOT",set:r+"setWOT",del:r+"delWOT"},RepairType:{page:r+"pageRT",get:r+"getRT",set:r+"setRT",del:r+"delRT"},SpareParts:{snapshot:r+"snapshotSP",page:r+"pageSP",get:r+"getSP",set:r+"setSP",del:r+"delSP"},InspectionTemplate:{get2:r+"get2ITE",page:r+"pageITE",set2:r+"set2ITE",del:r+"delITE"},Department:{page:r+"pageDEP",get:r+"getDEP",set:r+"setDEP",del:r+"delDEP"},Warehouse:{page:r+"pageWH",qry:r+"qryWH",set:r+"setWH",get:r+"getWH",del:r+"delWH"},PreventiveMaintenanceTasks:{qry:r+"qryPMT",page:r+"pagePMT",qry:r+"qryPMT",get:r+"getPMT",set:r+"setPMT",del:r+"delPMT"},Equipment:{qry:r+"qryEQP",page:r+"pageEQP",get:r+"getEQP",set:r+"setEQP",del:r+"delEQP",snapshot:r+"snapshotEQP"},SpManufacturer:{page:r+"pageSPM",get:r+"getSPM",set:r+"setSPM",del:r+"delSPM",qry:r+"qrySPM"},JobPosition:{page:r+"pagePOS",qry:r+"qryPOS",get:r+"getPOS",set:r+"setPOS",del:r+"delPOS"},SpCategory:{page:r+"pageSPC",get:r+"getSPC",set:r+"setSPC",del:r+"delSPC",qry:r+"qrySPC"},MaintenanceTemplates:{page:r+"pageMTE",get:r+"getMTE",set:r+"setMTE",del:r+"delMTE",qry:r+"qryMTE"},MaintenanceTemplateTask:{qry:r+"qryMTT",get:r+"getMTT",set:r+"setMTT",del:r+"delMTT"},RsLabors:{qry:r+"qryLBR",snapshot:r+"snapshotLBR",page:r+"pageLBR",set:r+"setLBR",get:r+"getLBR",del:r+"delLBR",qry:r+"qryLBR"},WorkOrder:{page:r+"qryWO",get:r+"getWO",set:r+"setWO",del:r+"delWO",post:r+"postWO"},WorkTask:{qry:r+"qryWTK",get:r+"getWTK",set:r+"setWTK",del:r+"delWTK"},EquipmentType:{qry:r+"qryEQT",get:r+"getEQT",set:r+"setEQT",del:r+"delEQT"},WorkOrderParts:{qry:r+"qryWOP",set2:r+"set2WOP"},WorkOrderLabors:{qry:r+"qryWOL",set2:r+"set2WOL"},RepairRequest:{page:r+"pageREQ",get:r+"getREQ",set:r+"setREQ",del:r+"delREQ"},Employee:{snapshot:r+"snapshotEMP"},RepairType:{qry:r+"qryRT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=97828)}),_N_E=e.O()}]);