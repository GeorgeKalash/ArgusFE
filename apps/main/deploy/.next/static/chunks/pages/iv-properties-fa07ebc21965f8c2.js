(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74453],{7142:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-properties",function(){return n(29869)}])},29869:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return D}});var a=n(52322),l=n(2784),s=n(8661),t=n(65950),d=n(38449),r=n(27723),u=n(69387),o=n(71987),c=n(60218),m=n(48601),v=n(26612),h=n(80983),x=n(31389),f=n(33625),p=n(62362),y=n(19473),_=n(62202),g=n(65215),V=n(61802),C=n(5088),j=n(91406),Z=n(54074);function w(e){let{labels:i,maxAccess:n,dimNum:s,id:d,window:r,fetchData:u}=e,{getRequest:o,postRequest:v}=(0,l.useContext)(t.$),{platformLabels:f}=(0,l.useContext)(y.l),{formik:V}=(0,h.c)({initialValues:{id:d||null,dimension:s,name:""},maxAccess:n,validateOnChange:!0,validationSchema:m.Ry({name:m.Z_().required(),id:m.Z_().required()}),onSubmit:async e=>{await v({extension:g.$.Dimension.set,record:JSON.stringify(e)}),_.ZP.success(f.Updated),u(),r.close()}});return(0,l.useEffect)(()=>{!async function(){if(d){let e=await o({extension:g.$.Dimension.get,parameters:"_dimension=".concat(s,"&_id=").concat(d)});V.setValues(e.record)}}()},[d]),(0,a.jsx)(Z.Z,{onSave:V.handleSubmit,maxAccess:n,children:(0,a.jsx)(x.R,{children:(0,a.jsx)(p.Q,{children:(0,a.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(c.ZP,{item:!0,xs:12,children:(0,a.jsx)(j.Z,{name:"id",label:i.id,value:V.values.id,required:!0,maxAccess:n,maxLength:"30",onChange:V.handleChange,onClear:()=>V.setFieldValue("id",""),error:V.touched.id&&!!V.errors.id})}),(0,a.jsx)(c.ZP,{item:!0,xs:12,children:(0,a.jsx)(C.Z,{name:"name",label:i.name,value:V.values.name,required:!0,maxAccess:n,onChange:V.handleChange,onClear:()=>V.setFieldValue("name",""),error:V.touched.name&&!!V.errors.name})})]})})})})}var D=()=>{let[e,i]=(0,l.useState)([]),{getRequest:n,postRequest:C}=(0,l.useContext)(t.$),{platformLabels:j,defaultsData:Z}=(0,l.useContext)(y.l),[D,S]=(0,l.useState)(0),{stack:q}=(0,V.zY)(),E=async()=>{var e,a,l;let s=null===(l=A.values)||void 0===l?void 0:null===(a=l.dimValue)||void 0===a?void 0:null===(e=a.match(/\d+$/))||void 0===e?void 0:e[0];if(S(s),!s){i([]);return}i(await n({extension:g.$.Dimension.qry,parameters:"_dimension=".concat(s)})||[])},{labels:b,access:k,refetch:N}=(0,o.J)({endpointId:g.$.Dimension.qry,queryFn:E,datasetId:v.i.IVDimension}),{formik:A}=(0,h.c)({initialValues:{dimValue:""},access:k,validateOnChange:!0,validationSchema:m.Ry({dimValue:m.Z_().required()})}),P=[{field:"id",headerName:b.id,flex:1},{field:"name",headerName:b.name,flex:1}];function $(e){q({Component:w,props:{labels:b,id:e,maxAccess:k,dimNum:D,fetchData:E},width:500,height:270,title:b.properties})}let F=async e=>{await C({extension:g.$.Dimension.del,record:JSON.stringify(e)}),E(),_.ZP.success(j.Deleted)};return(0,l.useEffect)(()=>{E()},[A.values.dimValue]),(0,l.useEffect)(()=>{!async function(){var e,i;let n={},a=null==Z?void 0:null===(e=Z.list)||void 0===e?void 0:e.filter(e=>e.key.startsWith("ivtDimension"));null==a||a.forEach(e=>n[e.key]=e.value?parseInt(e.value):null);let l=null==a?void 0:null===(i=a.find(e=>""!==e.value))||void 0===i?void 0:i.key;l&&A.setFieldValue("dimValue",l)}()},[]),(0,a.jsxs)(x.R,{children:[(0,a.jsx)(f.g,{children:(0,a.jsx)(r.Z,{onAdd:()=>{A.values.dimValue&&$()},maxAccess:k,middleSection:(0,a.jsx)(c.ZP,{item:!0,sx:{display:"flex",mr:2},children:(0,a.jsx)(s.Z,{endpointId:d.r.Defaults.qry,parameters:"_filter=ivtDimension",sx:{width:450},name:"dimValue",label:b.properties,valueField:"key",displayField:"value",values:A.values,onChange:(e,i)=>{A.setFieldValue("dimValue",i?i.key:"")},required:!0,maxAccess:k,filter:e=>""!==e.value,error:!A.values.dimValue})})})}),(0,a.jsx)(p.Q,{children:(0,a.jsx)(u.Z,{columns:P,gridData:e,rowId:["id"],pageSize:50,onEdit:e=>{$(null==e?void 0:e.id)},paginationType:"client",refetch:N,isLoading:!1,onDelete:F,maxAccess:k})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=7142)}),_N_E=e.O()}]);