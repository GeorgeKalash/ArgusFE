(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11169],{90144:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/print-labels",function(){return l(75523)}])},75523:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return S}});var r=l(52322),n=l(2784),a=l(60218),s=l(33625),d=l(62362),i=l(31389),o=l(27723),c=l(65950),u=l(38449),m=l(54074),p=l(48601),I=l(8661),y=l(80983),x=l(50023),h=l(61802),v=l(26612),b=l(84100),g=l(76426),T=l(22341),f=l(76399),q=l(65215),C=l(61072),S=()=>{let{getRequest:e}=(0,n.useContext)(c.$),{stack:t}=(0,h.zY)(),{labels:l,access:S}=(0,x.Z)({datasetId:v.i.PrintLabels}),{formik:j}=(0,y.c)({maxAccess:S,initialValues:{currencyId:null,labelTemplateId:null,format:null,plId:null,items:[{id:1,itemId:null,sku:"",itemName:"",qty:0}]},validationSchema:p.Ry({currencyId:p.Z_().required(),labelTemplateId:p.Z_().required(),format:p.Z_().required(),plId:p.Z_().required(),items:p.IX().of(p.Ry().shape({sku:p.Z_().required(),qty:p.Rx().nullable()}))}),onSubmit:async()=>{let e=await Z();t({Component:C.Z,props:{Print:Z,barcode:e},width:400,height:200})}}),k=j.values.currencyId&&j.values.labelTemplateId&&j.values.format&&j.values.plId,R=[{component:"resourcelookup",label:l.sku,name:"sku",props:{endpointId:q.$.Item.snapshot,valueField:"sku",displayField:"sku",mapping:[{from:"recordId",to:"itemId"},{from:"sku",to:"sku"},{from:"name",to:"itemName"}],columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"},{key:"flName",value:"FlName"}],readOnly:!k}},{component:"textfield",label:l.name,name:"itemName",props:{readOnly:!0}},{component:"numberfield",name:"qty",label:l.qty,props:{allowNegative:!1,readOnly:!k}}],D=()=>{k&&j.setFieldValue("items",j.initialValues.items)};async function Z(){var t;let l=j.values,r=await e({extension:q.$.LabelString.md,parameters:(()=>{let e=(l.items||[]).filter(e=>e&&e.itemId).map(e=>"".concat(e.itemId,",").concat(e.qty||0)).join(",");return"_templateId=".concat(l.labelTemplateId)+"&_currencyId=".concat(l.currencyId)+"&_printFormat=".concat(encodeURIComponent(l.format))+"&_plId=".concat(l.plId)+"&_items=".concat(e)})()});return null==r?void 0:null===(t=r.record)||void 0===t?void 0:t.data}return(0,r.jsx)(m.Z,{onPrint:j.handleSubmit,isSaved:!1,editMode:!0,maxAccess:S,children:(0,r.jsxs)(i.R,{children:[(0,r.jsx)(s.g,{children:(0,r.jsx)(o.Z,{leftSection:(0,r.jsx)(a.ZP,{item:!0,xs:4,children:(0,r.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(a.ZP,{item:!0,xs:6,children:(0,r.jsx)(I.Z,{endpointId:g.x.LabelTemplate.qry,name:"labelTemplateId",label:l.templateLabel,valueField:"recordId",displayField:"name",values:j.values,required:!0,maxAccess:S,onChange:(e,t)=>{D(),j.setFieldValue("labelTemplateId",(null==t?void 0:t.recordId)||null)},error:j.touched.labelTemplateId&&!!j.errors.labelTemplateId})}),(0,r.jsx)(a.ZP,{item:!0,xs:6,children:(0,r.jsx)(I.Z,{endpointId:u.r.Currency.qry,name:"currencyId",label:l.currency,valueField:"recordId",displayField:"name",required:!0,values:j.values,maxAccess:S,onChange:(e,t)=>{D(),j.setFieldValue("currencyId",(null==t?void 0:t.recordId)||null)},error:j.touched.currencyId&&!!j.errors.currencyId})}),(0,r.jsx)(a.ZP,{item:!0,xs:6,children:(0,r.jsx)(I.Z,{name:"format",datasetId:b.v.SC_LABEL_PRINT_FORMAT,label:l.format,valueField:"key",displayField:"value",required:!0,values:j.values,onChange:(e,t)=>{D(),j.setFieldValue("format",(null==t?void 0:t.key)||null)},error:j.touched.format&&!!j.errors.format,maxAccess:S})}),(0,r.jsx)(a.ZP,{item:!0,xs:6,children:(0,r.jsx)(I.Z,{endpointId:T.P.PriceLevel.qry,parameters:"_filter=",name:"plId",label:l.priceLevel,valueField:"recordId",displayField:"name",maxAccess:S,required:!0,values:j.values,onChange:(e,t)=>{D(),j.setFieldValue("plId",(null==t?void 0:t.recordId)||null)},error:j.touched.plId&&!!j.errors.plId})})]})})})}),(0,r.jsx)(d.Q,{children:(0,r.jsx)(f._,{name:"items",onChange:e=>j.setFieldValue("items",e),initialValues:j.initialValues.items[0],value:j.values.items,error:j.errors.items,columns:R,maxAccess:S,allowDelete:k})})]})})}},61072:function(e,t,l){"use strict";l.d(t,{Z:function(){return g}});var r=l(52322),n=l(2784),a=l(55648),s=l(60218),d=l(76385),i=l(19473),o=l(21326),c=l(61802),u=l(26612),m=l(5088),p=l(80983),I=l(31389),y=l(62362),x=l(33625),h=l(71987);function v(e){let{barcode:t,window:l}=e,{labels:n,access:d}=(0,h.J)({datasetId:u.i.Items}),{formik:i}=(0,p.c)({initialValues:{barcode:t},maxAccess:d,onSubmit:e=>{navigator.clipboard.writeText(e.barcode),l.close()}}),o=[{key:"Ok",condition:!0,onClick:i.handleSubmit,disabled:!1}];return(0,r.jsxs)(I.R,{children:[(0,r.jsx)(y.Q,{children:(0,r.jsx)(s.ZP,{container:!0,spacing:2,sx:{padding:2},children:(0,r.jsx)(s.ZP,{item:!0,xs:12,children:(0,r.jsx)(m.Z,{name:"barcode",label:n.label,value:i.values.barcode,onChange:i.handleChange,onClear:()=>i.setFieldValue("barcode",""),error:i.touched.barcode&&!!i.errors.barcode})})})}),(0,r.jsx)(x.g,{children:(0,r.jsx)(a.Z,{actions:o,smallBox:!0})})]})}var b=l(40234),g=(0,n.forwardRef)(e=>{let{window:t,Print:l,barcode:u}=e,{platformLabels:m}=(0,n.useContext)(i.l),{stack:p}=(0,c.zY)();(0,o.Z)({title:m.Confirmation,window:t});let h=(0,n.useRef)(),g=(0,b.useReactToPrint)({content:()=>h.current}),T=[{key:"Copy",condition:!0,onClick:()=>{l(),p({Component:v,props:{barcode:u},width:400,height:200,title:m.printLabel})},disabled:!1},{key:"Print",condition:!0,onClick:()=>{g(),t.close()},disabled:!1}];return(0,r.jsxs)(I.R,{children:[(0,r.jsx)(y.Q,{children:(0,r.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(s.ZP,{item:!0,xs:12,children:(0,r.jsx)(d.Z,{padding:4,children:m.printConfirmation})}),(0,r.jsx)("div",{style:{display:"none"},children:(0,r.jsx)("div",{ref:h,style:{padding:"20px"},children:(0,r.jsx)("p",{children:u})})})]})}),(0,r.jsx)(x.g,{children:(0,r.jsx)(a.Z,{actions:T,smallBox:!0})})]})})},76426:function(e,t,l){"use strict";l.d(t,{x:function(){return n}});let r="SC.asmx/",n={LabelTemplate:{qry:r+"qryLBT",set:r+"setLBT",get:r+"getLBT",del:r+"delLBT"},Item:{qry:r+"qryLBI",set:r+"setLBI",get:r+"getLBI",del:r+"delLBI"},Sites:{qry:r+"qrySIT",set:r+"setSIT",set2:r+"set2SIT",get:r+"getSIT",del:r+"delSIT",reopen:r+"reopenSIT",end:r+"endSIT"},Controller:{qry:r+"qryCRL"},StockCountControllerTab:{qry:r+"qryPHY",set2:r+"set2PHY",set:r+"setPHY",get:r+"getPHY",del:r+"delPHY"},StockCount:{page:r+"pageHDR",post:r+"postHDR",unpost:r+"unpostHDR",qry:r+"qryHDR",get:r+"getHDR",set:r+"setHDR",del:r+"delHDR",close:r+"closeHDR",reopen:r+"reopenHDR",snapshot:r+"snapshotHDR"},StockCountController:{page:r+"pageCRL",set:r+"setCRL",get:r+"getCRL",del:r+"delCRL"},DocumentTypeDefaults:{qry:r+"qryDTD",set:r+"setDTD",get:r+"getDTD",del:r+"delDTD"},StockCountItem:{qry:r+"qryITM",set:r+"setITM",get:r+"getITM",del:r+"delITM"},StockCountSerialSum:{qry:r+"qrySRS"},StockCountItemDetail:{qry:r+"qryITD",set:r+"setITD",get:r+"getITD",del:r+"delITD",set2:r+"set2ITD"},StockCountSerialDetail:{set2:r+"set2SRL",qry:r+"qrySRL",append:r+"appendSRL",del:r+"delSRL",batch:r+"batchSRL"}}}},function(e){e.O(0,[40234,49774,92888,40179],function(){return e(e.s=90144)}),_N_E=e.O()}]);