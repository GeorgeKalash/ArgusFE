(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6865],{41817:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-collections",function(){return r(88570)}])},88570:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return v}});var t=r(52322),a=r(2784),c=r(62202),s=r(69387),i=r(27723),o=r(65950),l=r(71987),d=r(26612),u=r(31389),f=r(33625),x=r(62362),h=r(61802),m=r(19473),g=r(65215),C=r(60218),p=r(48601),_=r(82737),j=r(5088),I=r(80983);function Z(e){let{labels:n,maxAccess:r,recordId:s}=e,{getRequest:i,postRequest:f}=(0,a.useContext)(o.$),{platformLabels:h}=(0,a.useContext)(m.l),Z=(0,l.E)({endpointId:g.$.Collections.page}),{formik:v}=(0,I.c)({initialValues:{recordId:null,reference:"",name:""},maxAccess:r,validateOnChange:!0,validationSchema:p.Ry({name:p.Z_().required(),reference:p.Z_().required()}),onSubmit:async e=>{let n=await f({extension:g.$.Collections.set,record:JSON.stringify(e)});e.recordId?c.ZP.success(h.Edited):(c.ZP.success(h.Added),v.setFieldValue("recordId",n.recordId)),Z()}}),w=!!v.values.recordId;return(0,a.useEffect)(()=>{!async function(){if(s){let e=await i({extension:g.$.Collections.get,parameters:"_recordId=".concat(s)});v.setValues(e.record)}}()},[]),(0,t.jsx)(_.Z,{resourceId:d.i.Collections,form:v,maxAccess:r,editMode:w,children:(0,t.jsx)(u.R,{children:(0,t.jsx)(x.Q,{children:(0,t.jsxs)(C.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(C.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{name:"reference",label:n.reference,value:v.values.reference,required:!0,maxLength:"10",maxAccess:r,onChange:v.handleChange,onClear:()=>v.setFieldValue("reference",""),error:v.touched.reference&&!!v.errors.reference})}),(0,t.jsx)(C.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{name:"name",label:n.name,value:v.values.name,required:!0,maxLength:"30",maxAccess:r,onChange:v.handleChange,onClear:()=>v.setFieldValue("name",""),error:v.touched.name&&!!v.errors.name})})]})})})})}var v=()=>{let{getRequest:e,postRequest:n}=(0,a.useContext)(o.$),{platformLabels:r}=(0,a.useContext)(m.l),{stack:C}=(0,h.zY)();async function p(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50}=n;return{...await e({extension:g.$.Collections.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(t)}),_startAt:r}}let{query:{data:_},labels:j,paginationParameters:I,refetch:v,access:w,invalidate:y}=(0,l.J)({queryFn:p,endpointId:g.$.Collections.page,datasetId:d.i.Collections}),A=[{field:"reference",headerName:j.reference,flex:1},{field:"name",headerName:j.name,flex:1}];function E(e){C({Component:Z,props:{labels:j,recordId:e,maxAccess:w},width:600,height:250,title:j.collections})}let N=async e=>{await n({extension:g.$.Collections.del,record:JSON.stringify(e)}),y(),c.ZP.success(r.Deleted)};return(0,t.jsxs)(u.R,{children:[(0,t.jsx)(f.g,{children:(0,t.jsx)(i.Z,{onAdd:()=>{E()},maxAccess:w})}),(0,t.jsx)(x.Q,{children:(0,t.jsx)(s.Z,{columns:A,gridData:_,rowId:["recordId"],onEdit:e=>{E(null==e?void 0:e.recordId)},onDelete:N,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:I,refetch:v,maxAccess:w})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=41817)}),_N_E=e.O()}]);