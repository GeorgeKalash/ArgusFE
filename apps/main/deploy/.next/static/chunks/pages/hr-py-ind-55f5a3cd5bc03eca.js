(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{23327:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-py-ind",function(){return t(15957)}])},15957:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var a=t(52322),l=t(2784),s=t(62202),i=t(69387),o=t(27723),r=t(65950),d=t(26612),c=t(31389),u=t(71987),m=t(61802),v=t(33625),p=t(62362),h=t(19473),g=t(83562),y=t(29326),b=t(9522),x=t(60218),f=t(78711),I=t(48601),_=t(82737),C=t(5088),S=t(8661),T=t(84100),j=t(91406);function q(e){var n;let{labels:t,maxAccess:i,store:o,setStore:m}=e,{recordId:v}=o,{platformLabels:y}=(0,l.useContext)(h.l),{getRequest:b,postRequest:q}=(0,l.useContext)(r.$),P=(0,u.E)({endpointId:g.m.IndemnitySchedule.page}),R=(0,f.TA)({initialValues:{recordId:null,name:"",calcMethod:null,minResignationDays:null},validationSchema:I.Ry({name:I.Z_().required(),calcMethod:I.Rx().required(),minResignationDays:I.Rx().max(32767).required()}),onSubmit:async e=>{let n=await q({extension:g.m.IndemnitySchedule.set,record:JSON.stringify(e)});e.recordId||(m({recordId:n.recordId}),R.setFieldValue("recordId",n.recordId)),s.ZP.success(e.recordId?y.Edited:y.Added),P()}}),E=!!R.values.recordId;return(0,l.useEffect)(()=>{!async function(){if(v){let e=await b({extension:g.m.IndemnitySchedule.get,parameters:"_recordId=".concat(v)});R.setValues(e.record)}}()},[]),(0,a.jsx)(_.Z,{resourceId:d.i.Indemnity,form:R,maxAccess:i,editMode:E,children:(0,a.jsx)(c.R,{children:(0,a.jsx)(p.Q,{children:(0,a.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(C.Z,{name:"name",label:t.name,value:R.values.name,required:!0,maxLength:"50",maxAccess:i,onChange:R.handleChange,onClear:()=>R.setFieldValue("name",""),error:R.touched.name&&!!R.errors.name})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(j.Z,{name:"minResignationDays",label:t.minResignationDays,value:null===(n=R.values)||void 0===n?void 0:n.minResignationDays,required:!0,maxLength:"7",onChange:R.handleChange,onClear:()=>R.setFieldValue("minResignationDays",null),maxAccess:i,error:R.touched.minResignationDays&&!!R.errors.minResignationDays})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(S.Z,{datasetId:T.v.INDEMNITY_CALC_METHOD,name:"calcMethod",label:t.calcMethode,required:!0,readOnly:E,maxAccess:i,valueField:"key",displayField:"value",values:R.values,onClear:()=>R.setFieldValue("calcMethod",null),onChange:(e,n)=>{R.setFieldValue("calcMethod",(null==n?void 0:n.key)||null)},error:R.touched.calcMethod&&!!R.errors.calcMethod})})]})})})})}var P=t(80983),R=t(76399);t(55648);var E=t(67920),A=t(54074),Z=e=>{var n;let{labels:t,maxAccess:i,store:o}=e,{getRequest:d,postRequest:m}=(0,l.useContext)(r.$),{platformLabels:v}=(0,l.useContext)(h.l),{recordId:y}=o,b=(0,u.E)({endpointId:g.m.IndemnityCompany.page}),{schema:x,requiredFields:f}=(0,E.m)({from:e=>(null==e?void 0:e.from)!=0&&(null==e?void 0:e.from)<(null==e?void 0:e.to)||!(null==e?void 0:e.from)&&(null==e?void 0:e.to),to:e=>(null==e?void 0:e.to)!=0&&(null==e?void 0:e.from)<(null==e?void 0:e.to)||!(null==e?void 0:e.to)&&(null==e?void 0:e.from),pct:e=>(null==e?void 0:e.pct)!=null&&(null==e?void 0:e.pct)<=100},!0,i,"items"),{formik:_}=(0,P.c)({maxAccess:i,initialValues:{items:[]},conditionSchema:["items"],validationSchema:I.Ry({items:I.IX().of(x)}),onSubmit:async e=>{var n;let t={inId:y,items:null===(n=e.items)||void 0===n?void 0:n.filter(e=>{var n;return null===(n=Object.values(f))||void 0===n?void 0:n.some(n=>n(e))}).map((e,n)=>({...e,inId:y,seqNo:n+1}))};await m({extension:g.m.IndemnityCompany.set2,record:JSON.stringify(t)}),s.ZP.success(v.Updated),b()}}),C=async()=>{var e;let n=await d({extension:g.m.IndemnityCompany.qry,parameters:"_inId=".concat(y)});(null===(e=n.list)||void 0===e?void 0:e.length)&&_.setValues({items:n.list.map((e,n)=>({id:n+1,...e}))})};(0,l.useEffect)(()=>{y&&C()},[y]);let S=[{component:"numberfield",label:t.from,name:"from"},{component:"numberfield",label:t.to,name:"to"},{component:"numberfield",label:t.percentage,name:"pct",props:{allowNegative:!1,maxLength:5,decimalScale:2}}];return(0,a.jsx)(A.Z,{onSave:_.handleSubmit,maxAccess:i,isParentWindow:!1,children:(0,a.jsx)(c.R,{children:(0,a.jsx)(p.Q,{children:(0,a.jsx)(R._,{name:"items",maxAccess:i,value:_.values.items,error:null===(n=_.errors)||void 0===n?void 0:n.items,columns:S,onChange:e=>_.setFieldValue("items",e)})})})})},D=e=>{var n;let{labels:t,maxAccess:i,store:o}=e,{getRequest:d,postRequest:m}=(0,l.useContext)(r.$),{platformLabels:v}=(0,l.useContext)(h.l),{recordId:y}=o,b=(0,u.E)({endpointId:g.m.IndemnityResignation.page}),{schema:x,requiredFields:f}=(0,E.m)({from:e=>(null==e?void 0:e.from)!=0&&(null==e?void 0:e.from)<(null==e?void 0:e.to)||!(null==e?void 0:e.from)&&(null==e?void 0:e.to),to:e=>(null==e?void 0:e.to)!=0&&(null==e?void 0:e.from)<(null==e?void 0:e.to)||!(null==e?void 0:e.to)&&(null==e?void 0:e.from),pct:e=>(null==e?void 0:e.pct)!=null&&(null==e?void 0:e.pct)<=100},!0,i,"resignation"),{formik:_}=(0,P.c)({maxAccess:i,initialValues:{resignation:[]},conditionSchema:["resignation"],validationSchema:I.Ry({resignation:I.IX().of(x)}),onSubmit:async e=>{let n={inId:y,items:e.resignation.filter(e=>{var n;return null===(n=Object.values(f))||void 0===n?void 0:n.some(n=>n(e))}).map((e,n)=>({...e,inId:y,seqNo:n+1}))};await m({extension:g.m.IndemnityResignation.set2,record:JSON.stringify(n)}),s.ZP.success(v.Updated),b()}}),C=async()=>{var e;let n=await d({extension:g.m.IndemnityResignation.qry,parameters:"_inId=".concat(y)});(null===(e=n.list)||void 0===e?void 0:e.length)&&_.setValues({resignation:n.list.map((e,n)=>({id:n+1,...e}))})};(0,l.useEffect)(()=>{y&&C()},[y]);let S=[{component:"numberfield",label:t.from,name:"from"},{component:"numberfield",label:t.to,name:"to"},{component:"numberfield",label:t.percentage,name:"pct",props:{allowNegative:!1,maxLength:5,decimalScale:2}}];return(0,a.jsx)(A.Z,{onSave:_.handleSubmit,maxAccess:i,isParentWindow:!1,children:(0,a.jsx)(c.R,{children:(0,a.jsx)(p.Q,{children:(0,a.jsx)(R._,{name:"resignation",maxAccess:i,value:_.values.resignation,error:null===(n=_.errors)||void 0===n?void 0:n.resignation,columns:S,onChange:e=>_.setFieldValue("resignation",e)})})})})},N=e=>{let{recordId:n,labels:t,maxAccess:s}=e,[i,o]=(0,l.useState)(0),[r,d]=(0,l.useState)({recordId:n}),c=[{label:t.payrollIndemnity},{label:t.company,disabled:!r.recordId},{label:t.resignation,disabled:!r.recordId}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Y,{tabs:c,activeTab:i,setActiveTab:o,maxAccess:s}),(0,a.jsx)(y.Z,{index:0,value:i,maxAccess:s,children:(0,a.jsx)(q,{labels:t,setStore:d,store:r,maxAccess:s})}),(0,a.jsx)(y.Z,{index:1,value:i,maxAccess:s,children:(0,a.jsx)(Z,{labels:t,maxAccess:s,store:r})}),(0,a.jsx)(y.Z,{index:2,value:i,maxAccess:s,children:(0,a.jsx)(D,{labels:t,maxAccess:s,store:r})})]})},w=()=>{let{getRequest:e,postRequest:n}=(0,l.useContext)(r.$),{platformLabels:t}=(0,l.useContext)(h.l),{stack:y}=(0,m.zY)(),{query:{data:b},labels:x,paginationParameters:f,invalidate:I,refetch:_,access:C}=(0,u.J)({queryFn:S,endpointId:g.m.IndemnitySchedule.page,datasetId:d.i.Indemnity});async function S(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:a=50}=n;return{...await e({extension:g.m.IndemnitySchedule.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(a,"&_filter=")}),_startAt:t}}let T=[{field:"name",headerName:x.name,flex:.5},{field:"minResignationDays",headerName:x.minResignationDays,flex:1,type:"number"}],j=async e=>{await n({extension:g.m.IndemnitySchedule.del,record:JSON.stringify(e)}),s.ZP.success(t.Deleted),I()};function q(e){y({Component:N,props:{labels:x,recordId:e,maxAccess:C},width:650,height:480,title:x.payrollIndemnity})}return(0,a.jsxs)(c.R,{children:[(0,a.jsx)(v.g,{children:(0,a.jsx)(o.Z,{onAdd:()=>{q()},maxAccess:C})}),(0,a.jsx)(p.Q,{children:(0,a.jsx)(i.Z,{name:"table",columns:T,gridData:b,rowId:["recordId"],paginationParameters:f,paginationType:"api",refetch:_,onEdit:e=>{q(null==e?void 0:e.recordId)},onDelete:j,pageSize:50,maxAccess:C})})]})}},83562:function(e,n,t){"use strict";t.d(n,{m:function(){return l}});let a="PY.asmx/",l={Payroll:{qry:a+"qryHE",page:a+"pageHE",get:a+"getHE",set:a+"setHE",del:a+"delHE",close:a+"closeHE",reopen:a+"reopenHE",post:a+"postHE",unpost:a+"unpostHE",snapshot:a+"snapshotHE"},BankTransferFilters:{qry:a+"qrySB",page:a+"pageSB",get:a+"getSB",set:a+"setSB",del:a+"delSB"},Paycode:{qry:a+"qryPC",set:a+"setPC",del:a+"delPC",get:a+"getPC"},SecuritySchedule:{qry:a+"qrySS"},IndemnitySchedule:{page:a+"pageIS",qry:a+"qryIS",get:a+"getIS",set:a+"setIS",del:a+"delIS"},LedgerGroup:{qry:a+"qryGLG",get:a+"getGLG",set:a+"setGLG",del:a+"delGLG"},Arguments:{page:a+"pageAR"},SalaryBatch:{page:a+"pageBAT",get:a+"getBAT",set:a+"setBAT",del:a+"delBAT"},TimeCodes:{page:a+"pageTC",qry:a+"qryTC",get:a+"getTC",set:a+"setTC",del:a+"delTC"},FinalSettlement:{page:a+"pageFS",get:a+"getFS",set:a+"setFS",del:a+"delFS",snapshot:a+"snapshotFS"},IndemnityCompany:{qry:a+"qryID",set2:a+"set2ID"},IndemnityResignation:{qry:a+"qryIR",set2:a+"set2IR"},PenaltyType:{page:a+"pagePT",qry:a+"qryPT",get:a+"getPT",set:a+"setPT",del:a+"delPT"},PenaltyDetail:{qry:a+"qryPD",set2:a+"set2PD"},GeneratePayroll:{gen:a+"genEM",page:a+"pageEM"},PayrollDetails:{qry:a+"qryED",set2:a+"set2ED"},SocialSecurity:{qry:a+"qryES"},FiscalYear:{qry:a+"qryYE"},Period:{qry:a+"qryPE"}}},67920:function(e,n,t){"use strict";t.d(n,{m:function(){return l}});var a=t(48601);function l(e,n,t){var l;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"items",i={...e};return null==t||null===(l=t.record)||void 0===l||l.controls.forEach(e=>{let{controlId:n,accessLevel:t}=e,[a,l]=null==n?void 0:n.split(".");a!==s||2!==t||l in i||(i[l]=e=>(null==e?void 0:e[l])!=null),(1===t||4===t)&&l in i&&delete i[l]}),{schema:a.Ry().shape({...Object.keys(i).reduce((e,t)=>(e[t]=a.nK().nullable().test(function(e){var a;let l=this.parent,[,s]=this.path.match(/^(\w+)\[(\d+)\]/)||[],o=(null===(a=this.options.context)||void 0===a?void 0:a[s])||[];if(n||!n&&o.length>1){if(null!==l[t]&&void 0!==l[t]&&0!==l[t]&&""!==i[t]&&!i[t](l))return!1;if(!Object.entries(i).some(e=>{let[,n]=e;return!!n(l)}))return!0}return!!i[t](l)&&void 0!==e}),e),{})}),requiredFields:i}}},29326:function(e,n,t){"use strict";var a=t(52322);t(2784);var l=t(23925),s=t(13980),i=t.n(s),o=t(95291),r=t.n(o),d=t(65947);let c=e=>{var n,t,s;let{children:i,value:o,index:c,maxAccess:u,...m}=e,v="".concat(e.name||"tab",".").concat(c),{accessLevel:p}=null!==(s=(null!==(t=null==u?void 0:null===(n=u.record)||void 0===n?void 0:n.controls)&&void 0!==t?t:[]).find(e=>e.controlId===v))&&void 0!==s?s:{accessLevel:0};if(p===d.A1)return null;let h=o===c;return(0,a.jsx)(l.Z,{role:"tabpanel",hidden:!h,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(r().tabPanel," ").concat(h?r().active:r().hidden),...m,children:i})};c.propTypes={children:i().node,index:i().number.isRequired,value:i().number.isRequired},n.Z=c},9522:function(e,n,t){"use strict";t.d(n,{Y:function(){return m}});var a=t(52322),l=t(23925),s=t(54582),i=t(68696),o=t(44258),r=t(2784),d=t(99266),c=t(52614),u=t.n(c);let m=e=>{var n,t,c,m,v;let{tabs:p,activeTab:h,setActiveTab:g,maxAccess:y,name:b="tab"}=e,x=(null==y?void 0:null===(t=y.record)||void 0===t?void 0:null===(n=t.controls)||void 0===n?void 0:n.filter(e=>{var n;return 4===e.accessLevel&&(null===(n=e.controlId)||void 0===n?void 0:n.startsWith("".concat(b,".")))}).map(e=>e.controlId.split(".")[1]))||[],f=null==p?void 0:null===(c=p.map((e,n)=>({...e,id:n})))||void 0===c?void 0:c.filter((e,n)=>!x.includes(String(n))),I=null===(m=f[h])||void 0===m?void 0:m.id,_=null===(v=f[h])||void 0===v?void 0:v.disabled;return(0,r.useEffect)(()=>{I>=0&&!_&&h!=I&&g(I)},[]),(0,a.jsx)(l.Z,{className:u().tabsContainer,children:(0,a.jsx)(l.Z,{className:u().tabsWrapper,children:(0,a.jsx)(s.Z,{value:h,onChange:(e,n)=>g(n),variant:"scrollable",scrollButtons:f.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==f?void 0:f.map(e=>(0,a.jsx)(i.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,a.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)("span",{children:e.label}),e.id===h&&(null==e?void 0:e.onRefetch)&&(0,a.jsx)(o.Z,{size:"small",className:u().refreshButton,onClick:n=>{n.stopPropagation(),e.onRefetch()},children:(0,a.jsx)(d.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=23327)}),_N_E=e.O()}]);