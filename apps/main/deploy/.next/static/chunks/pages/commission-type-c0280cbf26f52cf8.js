(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40059],{49710:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/commission-type",function(){return r(87703)}])},87703:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Z}});var a=r(52322),t=r(2784),s=r(62202),i=r(69387),o=r(65950),c=r(24074),d=r(71987),l=r(26612),u=r(31389),m=r(33625),p=r(62362),f=r(60218),x=r(48601),y=r(82737),h=r(5088),C=r(8661),g=r(84100),_=r(80983),v=r(19473);function j(e){let{labels:n,maxAccess:r,recordId:i}=e,{platformLabels:m}=(0,t.useContext)(v.l),{getRequest:j,postRequest:I}=(0,t.useContext)(o.$),T=(0,d.E)({endpointId:c.u.CommissionType.page}),{formik:Z}=(0,_.c)({initialValues:{recordId:null,reference:"",name:"",type:""},maxAccess:r,validateOnChange:!0,validationSchema:x.Ry({reference:x.Z_().required(),name:x.Z_().required(),type:x.Z_().required()}),onSubmit:async e=>{let n=e.recordId,r=await I({extension:c.u.CommissionType.set,record:JSON.stringify(e)});n||Z.setValues({...e,recordId:r.recordId}),s.ZP.success(e.recordId?m.Edited:m.Added),T()}}),w=!!Z.values.recordId;return(0,t.useEffect)(()=>{!async function(){if(i){let e=await j({extension:c.u.CommissionType.get,parameters:"_recordId=".concat(i)});Z.setValues(e.record)}}()},[]),(0,a.jsx)(y.Z,{resourceId:l.i.CommissionType,form:Z,maxAccess:r,editMode:w,children:(0,a.jsx)(u.R,{children:(0,a.jsx)(p.Q,{children:(0,a.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(f.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"reference",label:n.reference,value:Z.values.reference,required:!0,maxAccess:r,maxLength:"30",onChange:Z.handleChange,onClear:()=>Z.setFieldValue("reference",""),error:Z.touched.reference&&!!Z.errors.reference})}),(0,a.jsx)(f.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"name",label:n.name,value:Z.values.name,required:!0,maxAccess:r,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("name",""),error:Z.touched.name&&!!Z.errors.name})}),(0,a.jsx)(f.ZP,{item:!0,xs:12,children:(0,a.jsx)(C.Z,{datasetId:g.v.TYPE,name:"type",label:n.type,valueField:"key",displayField:"value",values:Z.values,required:!0,maxAccess:r,onChange:(e,n)=>{Z.setFieldValue("type",null==n?void 0:n.key)},error:Z.touched.type&&!!Z.errors.type})})]})})})})}var I=r(61802),T=r(36908),Z=()=>{let{getRequest:e,postRequest:n}=(0,t.useContext)(o.$),{stack:r}=(0,I.zY)(),{platformLabels:f}=(0,t.useContext)(v.l),{query:{data:x},labels:y,filterBy:h,paginationParameters:C,invalidate:g,access:_,refetch:Z}=(0,d.J)({queryFn:A,endpointId:c.u.CommissionType.page,datasetId:l.i.CommissionType,filter:{filterFn:w}});async function w(n){let{filters:r,pagination:a}=n;return(null==r?void 0:r.qry)?await e({extension:c.u.CommissionType.snapshot,parameters:"_filter=".concat(r.qry)}):A({_startAt:a._startAt||0,params:null==r?void 0:r.params})}async function A(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50,params:t}=n;return{...await e({extension:c.u.CommissionType.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a,"&_params=").concat(t||"")}),_startAt:r}}let N=[{field:"reference",headerName:y.reference,flex:1},{field:"name",headerName:y.name,flex:1},{field:"typeName",headerName:y.type,flex:1}],q=async e=>{await n({extension:c.u.CommissionType.del,record:JSON.stringify(e)}),g(),s.ZP.success(f.Deleted)};function E(e){r({Component:j,props:{labels:y,recordId:e,maxAccess:_},width:500,height:300,title:y.CommissionTypes})}return(0,a.jsxs)(u.R,{children:[(0,a.jsx)(m.g,{children:(0,a.jsx)(T.Z,{onAdd:()=>{E()},maxAccess:_,reportName:"CTCOM",filterBy:h})}),(0,a.jsx)(p.Q,{children:(0,a.jsx)(i.Z,{columns:N,gridData:x,rowId:["recordId"],onEdit:e=>{E(null==e?void 0:e.recordId)},onDelete:q,isLoading:!1,refetch:Z,pageSize:50,paginationParameters:C,maxAccess:_,paginationType:"api"})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=49710)}),_N_E=e.O()}]);