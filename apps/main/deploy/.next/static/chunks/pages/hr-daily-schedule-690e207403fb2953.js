(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78002],{35473:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-daily-schedule",function(){return l(10886)}])},10886:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return k}});var a=l(52322),r=l(2784),o=l(42721),n=l(67755),s=l(11978),d=l(41325),i=l(80760),c=l(11757),u=l(60218),m=l(62202),y=l(27423),p=l(92407),h=l(89330),g=l(69627),f=l(48601),x=l(65950),D=l(6035),S=l(80983),E=l(61802),I=l(54074),q=l(62362),v=l(31389),T=l(19473);function P(e){let{mode:t,labels:l,maxAccess:o,values:n,window:s}=e,{postRequest:d}=(0,r.useContext)(x.$),{platformLabels:i}=(0,r.useContext)(T.l),c=t===A.EXPORT,{formik:g}=(0,S.c)({maxAccess:o,initialValues:{fromEmployeeId:c?n.employeeId:null,fromEmployeeRef:c?n.employeeRef:null,fromEmployeeName:c?n.employeeName:null,toEmployeeId:c?null:n.employeeId,toEmployeeRef:c?null:n.employeeRef,toEmployeeName:c?null:n.employeeName,startDate:null,endDate:null},validationSchema:f.Ry({fromEmployeeId:f.Rx().required(),toEmployeeId:f.Rx().required(),startDate:f.hT().required(),endDate:f.hT().required()}),onSubmit:async e=>{let t={fromEmployeeId:e.fromEmployeeId,toEmployeeId:e.toEmployeeId,startDate:e.startDate,endDate:e.endDate};await d({extension:D.f.FlatSchedule.copyRange,record:JSON.stringify(t)}),m.ZP.success("".concat(c?i.Exported:i.Imported)),s.close()}});return(0,a.jsx)(I.Z,{onSave:g.handleSubmit,maxAccess:o,children:(0,a.jsx)(v.R,{children:(0,a.jsx)(q.Q,{children:(0,a.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(y.U,{endpointId:p.y.Employee.snapshot,parameters:{_branchId:0},form:g,valueField:"reference",displayField:"fullName",name:"fromEmployeeRef",label:l.fromEmployee,valueShow:"fromEmployeeRef",secondValueShow:"fromEmployeeName",displayFieldWidth:2,readOnly:c,maxAccess:o,required:!0,onChange:(e,t)=>{g.setFieldValue("fromEmployeeRef",(null==t?void 0:t.reference)||""),g.setFieldValue("fromEmployeeName",(null==t?void 0:t.fullName)||""),g.setFieldValue("fromEmployeeId",(null==t?void 0:t.recordId)||null)},error:g.touched.fromEmployeeId&&!!g.errors.fromEmployeeId})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(y.U,{endpointId:p.y.Employee.snapshot,parameters:{_branchId:0},form:g,valueField:"reference",displayField:"fullName",name:"toEmployeeRef",label:l.toEmployee,displayFieldWidth:2,required:!0,maxAccess:o,readOnly:!c,valueShow:"toEmployeeRef",secondValueShow:"toEmployeeName",onChange:(e,t)=>{g.setFieldValue("toEmployeeRef",(null==t?void 0:t.reference)||""),g.setFieldValue("toEmployeeName",(null==t?void 0:t.fullName)||""),g.setFieldValue("toEmployeeId",(null==t?void 0:t.recordId)||null)},error:g.touched.toEmployeeId&&!!g.errors.toEmployeeId})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"startDate",label:l.startDate,value:g.values.startDate,required:!0,maxAccess:o,onChange:g.setFieldValue,onClear:()=>g.setFieldValue("startDate",null),error:g.touched.startDate&&!!g.errors.startDate})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"endDate",label:l.endDate,value:g.values.endDate,required:!0,maxAccess:o,onChange:g.setFieldValue,onClear:()=>g.setFieldValue("endDate",null),error:g.touched.endDate&&!!g.errors.endDate})})]})})})})}var C=l(87559),R=l(8661),F=l(28298),j=l(28879),Z=l.n(j);function b(e){let{labels:t,maxAccess:l,employeeId:o,window:n,onSuccess:s}=e,{postRequest:d}=(0,r.useContext)(x.$),{platformLabels:i}=(0,r.useContext)(T.l),{formik:c}=(0,S.c)({maxAccess:l,initialValues:{employeeId:o,fromDayId:null,toDayId:null,dayTypeId:null,shiftStart:null,shiftEnd:null},validationSchema:f.Ry({employeeId:f.Rx().required(),fromDayId:f.hT().required(),toDayId:f.hT().required(),shiftStart:f.Z_().required(),shiftEnd:f.Z_().required()}),onSubmit:async e=>{await d({extension:D.f.FlatSchedule.range,record:JSON.stringify({employeeId:o,fromDayId:(0,C.Z)(new Date(e.fromDayId),"yyyyMMdd"),toDayId:(0,C.Z)(new Date(e.toDayId),"yyyyMMdd"),dayTypeId:e.dayTypeId,shiftStart:e.shiftStart?Z()(e.shiftStart).format("HH:mm"):"",shiftEnd:e.shiftEnd?Z()(e.shiftEnd).format("HH:mm"):""})}),"function"==typeof s&&s(),m.ZP.success(i.Generated),n.close()}});return(0,a.jsx)(I.Z,{onSave:c.handleSubmit,maxAccess:l,children:(0,a.jsx)(v.R,{children:(0,a.jsx)(q.Q,{children:(0,a.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"fromDayId",label:t.fromDate,value:c.values.fromDayId,required:!0,maxAccess:l,onChange:c.setFieldValue,onClear:()=>c.setFieldValue("fromDayId",null),error:c.touched.fromDayId&&!!c.errors.fromDayId})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(h.Z,{name:"toDayId",label:t.toDate,value:c.values.toDayId,required:!0,maxAccess:l,onChange:c.setFieldValue,onClear:()=>c.setFieldValue("toDayId",null),error:c.touched.toDayId&&!!c.errors.toDayId})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(R.Z,{endpointId:D.f.DayTypes.qry,name:"dayTypeId",label:t.dayType,valueField:"recordId",displayField:"name",values:c.values,maxAccess:l,onChange:(e,t)=>c.setFieldValue("dayTypeId",(null==t?void 0:t.recordId)||null),error:c.touched.dayTypeId&&!!c.errors.dayTypeId})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(F.Z,{label:t.shiftStart,name:"shiftStart",required:!0,value:c.values.shiftStart,onChange:c.setFieldValue,onClear:()=>c.setFieldValue("shiftStart",""),use24Hour:!0,maxAccess:l,error:c.touched.shiftStart&&!!c.errors.shiftStart,max:Z()(c.values.shiftStart,"HH:mm")})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(F.Z,{label:t.shiftEnd,name:"shiftEnd",required:!0,value:c.values.shiftEnd,onChange:c.setFieldValue,onClear:()=>c.setFieldValue("shiftEnd",""),use24Hour:!0,maxAccess:l,error:c.touched.shiftEnd&&!!c.errors.shiftEnd,max:Z()(c.values.shiftEnd,"HH:mm")})})]})})})})}var V=l(71987),N=l(26612),w=l(85325);let A={IMPORT:"import",EXPORT:"export"};function k(){let{postRequest:e,getRequest:t}=(0,r.useContext)(x.$),[l,C]=(0,r.useState)([]),{stack:R}=(0,E.zY)(),{platformLabels:F}=(0,r.useContext)(T.l),{user:j}=(0,r.useContext)(w.V),{labels:Z,access:k}=(0,V.J)({datasetId:N.i.DailySchedules}),L=e=>{if(!e)return"";let t=new Date(e),l=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(l).concat(a).concat(r)},O=e=>{let t=e.getUTCHours().toString().padStart(2,"0"),l=e.getUTCMinutes().toString().padStart(2,"0");return"".concat(t,":").concat(l)},{formik:B}=(0,S.c)({initialValues:{employeeId:null,fromDate:null,toDate:null},validationSchema:f.Ry({employeeId:f.Rx().required(),fromDate:f.hT().required(),toDate:f.hT().required()}),onSubmit:async e=>{let l=L(e.fromDate),a=L(e.toDate);C((await t({extension:D.f.FlatSchedule.qry2,parameters:"_employeeId=".concat(e.employeeId,"&fromDayId=").concat(l,"&toDayId=").concat(a)})).list.map(e=>{let t=new Date(parseInt(null==e?void 0:e.dtFrom.match(/\d+/)[0],10)),l=new Date(parseInt(e.dtTo.match(/\d+/)[0],10));return{title:"".concat(O(t)," - ").concat(O(l)),start:new Date(parseInt(e.dtFrom.match(/\d+/)[0])),end:new Date(parseInt(e.dtTo.match(/\d+/)[0])),allDay:!1,display:"block",backgroundColor:"#a5d6a7",borderColor:"#81c784",textColor:"#000"}}))}}),M=e=>{R({Component:P,props:{mode:e,values:B.values,labels:Z,maxAccess:k},width:500,height:350,title:e===A.IMPORT?F.import:F.Export})},H=async()=>{let{employeeId:e,fromDate:t,toDate:l}=B.values;R({Component:b,props:{employeeId:e,labels:Z,maxAccess:k,...t&&l?{onSuccess:()=>B.handleSubmit()}:{}},width:500,height:400,title:F.Generate})},_=async()=>{let t={employeeId:B.values.employeeId,startDate:B.values.fromDate,endDate:B.values.toDate};await e({extension:D.f.FlatSchedule.del,record:JSON.stringify(t)}),B.handleSubmit(),m.ZP.success(F.Deleted),window.close()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:"\n          .fc .fc-button-primary {\n            background-color: #000;\n            border-color: #000;\n            color: white;\n          }\n            \n          .fc-view-harness {\n            z-index: 0 !important;\n            position: relative !important;\n          }\n\n          .fc-header-toolbar {\n            position: sticky !important;\n            top: 0 !important;\n            z-index: 2 !important;\n            background: white;\n          }\n        "}),(0,a.jsx)(I.Z,{onSave:B.handleSubmit,isSaved:!1,children:(0,a.jsx)(v.R,{children:(0,a.jsxs)(q.Q,{children:[(0,a.jsxs)(u.ZP,{container:!0,spacing:2,paddingBottom:2,children:[(0,a.jsx)(u.ZP,{item:!0,xs:3,children:(0,a.jsx)(y.U,{endpointId:p.y.Employee.snapshot,parameters:{_branchId:0},form:B,valueField:"reference",displayField:"fullName",name:"employeeRef",label:Z.employee,maxAccess:k,valueShow:"employeeRef",secondValueShow:"employeeName",displayFieldWidth:2,required:!0,onChange:(e,t)=>{B.setFieldValue("employeeRef",(null==t?void 0:t.reference)||""),B.setFieldValue("employeeName",(null==t?void 0:t.fullName)||""),B.setFieldValue("employeeId",(null==t?void 0:t.recordId)||null)},error:B.touched.employeeId&&!!B.errors.employeeId})}),(0,a.jsx)(u.ZP,{item:!0,xs:2,children:(0,a.jsx)(h.Z,{name:"fromDate",label:Z.fromDate,value:B.values.fromDate,max:B.values.toDate,required:!0,maxAccess:k,onChange:B.setFieldValue,onClear:()=>B.setFieldValue("fromDate",null),error:B.touched.fromDate&&!!B.errors.fromDate})}),(0,a.jsx)(u.ZP,{item:!0,xs:2,children:(0,a.jsx)(h.Z,{name:"toDate",label:Z.toDate,value:B.values.toDate,required:!0,min:B.values.fromDate,maxAccess:k,onChange:B.setFieldValue,onClear:()=>B.setFieldValue("toDate",null),error:B.touched.toDate&&!!B.errors.toDate})}),(0,a.jsx)(u.ZP,{item:!0,children:(0,a.jsx)(g.Z,{onClick:B.handleSubmit,label:F.Preview,image:"preview.png",color:"primary"})}),(0,a.jsx)(u.ZP,{item:!0,xl:2,md:1}),(0,a.jsx)(u.ZP,{item:!0,children:(0,a.jsx)(g.Z,{onClick:()=>M(A.IMPORT),label:F.import,color:"primary",disabled:!B.values.employeeId})}),(0,a.jsx)(u.ZP,{item:!0,children:(0,a.jsx)(g.Z,{onClick:()=>M(A.EXPORT),label:F.Export,color:"primary",disabled:!B.values.employeeId})}),(0,a.jsx)(u.ZP,{item:!0,children:(0,a.jsx)(g.Z,{onClick:_,label:F.Delete,color:"primary",disabled:!B.values.employeeId||!B.values.fromDate||!B.values.toDate})}),(0,a.jsx)(u.ZP,{item:!0,children:(0,a.jsx)(g.Z,{onClick:H,label:F.Generate,color:"primary",disabled:!B.values.employeeId})})]}),(0,a.jsx)("div",{style:{height:"100vh",overflowY:"auto"},children:(0,a.jsx)(o.Z,{plugins:[n.Z,s.Z,c.ZP],initialView:"dayGridMonth",stickyHeaderDates:!0,hiddenDays:[],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},allDaySlot:!1,height:"100%",events:l,locale:(null==j?void 0:j.languageId)===2?d.Z:i.Z,direction:(null==j?void 0:j.languageId)===2?"rtl":"ltr",timeZone:"UTC",firstDay:1,eventDisplay:"block",eventContent:e=>(0,a.jsx)("div",{style:{backgroundColor:e.event.backgroundColor,color:e.event.textColor,padding:"4px",borderRadius:"6px",textAlign:"center",fontSize:"0.8rem"},children:e.event.title})})})]})})})]})}},92407:function(e,t,l){"use strict";l.d(t,{y:function(){return r}});let a="EP.asmx/",r={Employee:{snapshot:a+"snapshotEM",get1:a+"getEM1",set:a+"setEM",del:a+"delEM"},CertificateFilters:{qry:a+"qryCL",get:a+"getCL",set:a+"setCL",del:a+"delCL",page:a+"pageCL"},HRDocTypeFilters:{qry:a+"qryDT"},SalaryChangeReason:{qry:a+"qrySC",get:a+"getSC",set:a+"setSC",del:a+"delSC",page:a+"pageSC"},EmploymentStatusFilters:{qry:a+"qryST",page:a+"pageST",set:a+"setST",get:a+"getST",del:a+"delST"},SponsorFilters:{qry:a+"qrySP",page:a+"pageSP",set:a+"setSP",get:a+"getSP",del:a+"delSP"},RelationshipTypes:{page:a+"pageRT",set:a+"setRT",get:a+"getRT",del:a+"delRT"},BonusTypes:{get:a+"getBT",set:a+"setBT",page:a+"pageBT",del:a+"delBT"},BgCheck:{page:a+"pageCT",set:a+"setCT",get:a+"getCT",del:a+"delCT"},NoticePeriods:{get:a+"getNP",set:a+"setNP",del:a+"delNP",qry:a+"qryNP",page:a+"pageNP"},CustomProperties:{get:a+"getUP",set:a+"setUP",del:a+"delUP",page:a+"pageUP",qry:a+"qryUP"},ResignationRequest:{get:a+"getRR",set:a+"setRR",del:a+"delRR",page:a+"pageRR",close:a+"closeRR",reopen:a+"reopenRR"},TerminationReasons:{qry:a+"qryTR",get:a+"getTR",set:a+"setTR",del:a+"delTR",page:a+"pageTR"},JobInfo:{snapshot:a+"snapshotJI",page:a+"pageJI",close:a+"closeJI",reopen:a+"reopenJI",get:a+"getJI",set:a+"setJI",del:a+"delJI",qry:a+"qryJI"},QuickView:{get:a+"getQV"},EmployeePenalty:{page:a+"pagePE",close:a+"closePE",reopen:a+"reopenPE",get:a+"getPE",set:a+"setPE",del:a+"delPE"},EmployeeDeduction:{qry:a+"qryED",page:a+"pageED",del:a+"delED",get:a+"getED",set:a+"setED",snapshot:a+"snapshotED"},FullName:{sync:a+"syncFullName"},EmployeeChart:{page:a+"pageES",qry:a+"qryES",qry2:a+"qryES2"},EmployeeSalary:{qry:a+"qrySA",get:a+"getSA",set:a+"setSA",del:a+"delSA"},SalaryDetails:{qry:a+"qrySD",get:a+"getSD",set2:a+"set2SD",del:a+"delSD"},TerminationEmployee:{get:a+"getTE"},EmployementHistory:{qry:a+"qryEH",del:a+"delEH",get:a+"getEH",set:a+"setEH"},Hiring:{get:a+"getRE",set:a+"setRE"},Skills:{qry:a+"qryCE",del:a+"delCE",get:a+"getCE",set:a+"setCE"},UserDefined:{qry:a+"qryUV",set2:a+"set2UV"},Leaves:{set:a+"setLS",del:a+"delLS",get:a+"getLS"}}},6035:function(e,t,l){"use strict";l.d(t,{f:function(){return r}});let a="TA.asmx/",r={AttendanceScheduleFilters:{qry:a+"qrySD"},ProcessedShiftPunches:{retry:a+"retryPSP"},OvertimeProfiles:{page:a+"pageOTP",set:a+"setOTP",get:a+"getOTP",del:a+"delOTP",qry:a+"qryOTP"},PendingPunches:{page:a+"pagePP",del:a+"delPP",qry:a+"qryPP"},BiometricDevices:{page:a+"pageBM",qry:a+"qryBM",del:a+"delBM",set:a+"setBM",get:a+"getBM"},DSLReasons:{page:a+"pageLR",set:a+"setLR",get:a+"getLR",del:a+"delLR"},TimeVariation:{reset:a+"resetTV",qry:a+"qryTV",qry2:a+"qryTV2",snapshot:a+"snapshotTV",page:a+"pageTV",get:a+"getTV",set:a+"setTV",del:a+"delTV",gen:a+"genTV",close:a+"closeTV",reopen:a+"reopenTV",cancel:a+"cancelTV",override:a+"overrideTV"},ShitLeave:{page:a+"pageLQ",set:a+"setLQ",get:a+"getLQ",del:a+"delLQ",close:a+"closeLQ",reopen:a+"reopenLQ"},FlatSchedule:{qry:a+"qryFS",qry2:a+"qryFS2",copyRange:a+"copyRangeFS",range:a+"rangeFS",del:a+"delRangeFS"},DSLReason:{qry:a+"qryLR"},Calendar:{qry:a+"qryCA"},DayTypes:{page:a+"pageDT",qry:a+"qryDT",set:a+"setDT",get:a+"getDT",del:a+"delDT"},AttendanceDay:{qry:a+"qryAD"},Schedule:{qry:a+"qrySC"},FlatPunch:{qry:a+"qryFP"}}},28298:function(e,t,l){"use strict";var a=l(52322),r=l(2784),o=l(74143),n=l(44258),s=l(41633),d=l(45297),i=l(94918),c=l(26698),u=l(51909),m=l(90740),y=l(32827),p=l(81576),h=l(7087),g=l.n(h);t.Z=e=>{let{name:t,label:l,value:h,onChange:f,error:x=!1,helperText:D="",disabledRangeTime:S={},variant:E="outlined",size:I="small",fullWidth:q=!0,required:v=!1,autoFocus:T=!1,disabled:P=!1,disabledTime:C=null,readOnly:R=!1,editMode:F=!1,hasBorder:j=!0,hidden:Z=!1,use24Hour:b=!1,min:V=null,max:N=null,...w}=e,[A,k]=(0,r.useState)(!1),[L,O]=(0,r.useState)(!1),{_readOnly:B,_required:M,_hidden:H}=(0,p.W)(t,w.maxAccess,v,R,Z);return H?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(s._,{dateAdapter:m.y,children:(0,a.jsx)(u.j,{variant:E,size:I,value:h,label:l,fullWidth:q,ampm:!b,minTime:V,maxTime:N,onFocus:()=>O(!0),onBlur:()=>O(!1),autoFocus:T,onChange:e=>f(t,e),onClose:()=>k(!1),open:A,disabled:P,readOnly:B,clearable:!0,slotProps:{textField:{required:M,size:I,fullWidth:q,error:!!x,helperText:"string"==typeof x?x:D,InputProps:{classes:{root:g().outlinedRoot,notchedOutline:j?g().outlinedFieldset:g().outlinedNoBorder,input:g().inputBase},endAdornment:!(B||P)&&(0,a.jsxs)(o.Z,{position:"end",className:g().inputAdornment,children:[h&&(0,a.jsx)(n.Z,{tabIndex:-1,className:g().iconButton,onClick:()=>f(t,null),children:(0,a.jsx)(d.Z,{className:g().icon})}),(0,a.jsx)(n.Z,{tabIndex:-1,className:g().iconButton,onClick:()=>k(!0),children:(0,a.jsx)(i.Z,{className:g().icon})})]})},InputLabelProps:{className:L||h?g().inputLabelShrink:g().inputLabel}},actionBar:{actions:["accept"]}},slots:{actionBar:e=>(0,a.jsx)(c.Z,{...e,actions:["accept"]}),popper:e=>(0,a.jsx)(y.Z,{...e,matchAnchorWidth:!1,isDateTimePicker:!0})},...w})})}}},function(e){e.O(0,[36699,92515,43553,14834,49774,92888,40179],function(){return e(e.s=35473)}),_N_E=e.O()}]);