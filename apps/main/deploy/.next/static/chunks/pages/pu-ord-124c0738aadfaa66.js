(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36777],{44201:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pu-ord",function(){return a(14640)}])},14640:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(52322),n=a(70844),i=a(2784),o=a(33625),l=a(62202),d=a(31389),c=a(36908),s=a(19473),u=a(65950),f=a(2454),m=a(26612),h=a(61802),p=a(71987),y=a(69387),v=a(69952),x=a(98345),N=a(7121),b=()=>{let{postRequest:e,getRequest:t}=(0,i.useContext)(u.$),{platformLabels:a}=(0,i.useContext)(s.l),{stack:b}=(0,h.zY)(),{query:{data:_},filterBy:g,refetch:w,labels:I,access:j,paginationParameters:k,invalidate:O}=(0,p.J)({queryFn:P,endpointId:f.y.PurchaseOrder.page,datasetId:m.i.PurchaseTransactions,filter:{filterFn:C}}),{proxyAction:E}=(0,x.G)({functionId:N.J.PurchaseOrder,action:async()=>{L()}}),F=[{field:"reference",headerName:I.reference,flex:1},{field:"date",headerName:I.date,flex:1,type:"date"},{field:"vendorName",headerName:I.vendor,flex:1},{field:"currencyName",headerName:I.currency,flex:1},{field:"volume",headerName:I.volume,flex:1,type:"number"},{field:"qty",headerName:I.qty,flex:1,type:"number"},{field:"amount",headerName:I.net,flex:1,type:"number"},{field:"description",headerName:I.description,flex:2},{field:"statusName",headerName:I.status,flex:1},{field:"dsName",headerName:I.deliveryStatus,flex:1},{field:"rsName",headerName:I.releaseStatus,flex:1},{field:"wipName",headerName:I.wip,flex:1}];async function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:r=50,params:n=[]}=e;return{...await t({extension:f.y.PurchaseOrder.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(r,"&_sortby=recordId&&_params=").concat(n)}),_startAt:a}}async function C(e){let{filters:a,pagination:r}=e;return a.qry?await t({extension:f.y.PurchaseOrder.snapshot,parameters:"_filter=".concat(a.qry)}):P({_startAt:r._startAt||0,params:null==a?void 0:a.params})}async function L(e){b({Component:v.Z,props:{recordId:e}})}let A=async()=>{await E()},S=async t=>{await e({extension:f.y.PurchaseOrder.del,record:JSON.stringify(t)}),O(),l.ZP.success(a.Deleted)};return(0,r.jsxs)(d.R,{children:[(0,r.jsx)(o.g,{children:(0,r.jsx)(c.Z,{onAdd:A,maxAccess:j,reportName:"PUORD",filterBy:g})}),(0,r.jsx)(n.Z,{children:(0,r.jsx)(y.Z,{name:"table",columns:F,gridData:_,rowId:["recordId"],onEdit:e=>{L(null==e?void 0:e.recordId)},onDelete:S,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,paginationParameters:k,refetch:w,paginationType:"api",maxAccess:j})})]})}},67920:function(e,t,a){"use strict";a.d(t,{m:function(){return n}});var r=a(48601);function n(e,t,a){var n;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"items",o={...e};return null==a||null===(n=a.record)||void 0===n||n.controls.forEach(e=>{let{controlId:t,accessLevel:a}=e,[r,n]=null==t?void 0:t.split(".");r!==i||2!==a||n in o||(o[n]=e=>(null==e?void 0:e[n])!=null),(1===a||4===a)&&n in o&&delete o[n]}),{schema:r.Ry().shape({...Object.keys(o).reduce((e,a)=>(e[a]=r.nK().nullable().test(function(e){var r;let n=this.parent,[,i]=this.path.match(/^(\w+)\[(\d+)\]/)||[],l=(null===(r=this.options.context)||void 0===r?void 0:r[i])||[];if(t||!t&&l.length>1){if(null!==n[a]&&void 0!==n[a]&&0!==n[a]&&""!==o[a]&&!o[a](n))return!1;if(!Object.entries(o).some(e=>{let[,t]=e;return!!t(n)}))return!0}return!!o[a](n)&&void 0!==e}),e),{})}),requiredFields:o}}},39704:function(e,t,a){"use strict";var r=a(52322),n=a(2784),i=a(22341),o=a(65950),l=a(85325),d=a(21326),c=a(19473),s=a(35656),u=a(24868),f=a.n(u);let m=e=>{let{functionId:t,recordId:a,window:u}=e,{getRequest:m}=(0,n.useContext)(o.$),{languageId:h}=(0,n.useContext)(l.V),{platformLabels:p}=(0,n.useContext)(c.l),y=a+"-"+t;(0,d.Z)({title:p.WorkFlow,window:u});let{width:v}=(0,s.d)(),x=v<=1024,N=v>1024&&v<=1280,b=x?10:N?12:14,_=x?75:N?85:95,g=x?15:N?20:25,w=async()=>{var e="_functionId=".concat(t,"&_recordId=").concat(a);let r=await m({extension:i.P.WorkFlow.graph,parameters:e});return null==r?void 0:r.record},I=e=>{let t=[],a=[],r="",n="";return e.objects.forEach(e=>{t.push({functionName:e.functionName,reference:e.reference,date:e.date})}),e.workflow.forEach(t=>{e.objects.forEach(e=>{let a=e.functionName.split(" ").join("\r\n");t.parentId===e.recordId&&t.parentFunctionId===e.functionId&&(r=e.reference+"\r\n"+e.date+"\r\n"+a,t.parentId),t.childId===e.recordId&&t.childFunctionId===e.functionId&&(n=e.reference+"\r\n"+e.date+"\r\n"+a,t.childId)}),""===r||""===n||a.push({from:r,to:n,value:1,labelText:""}),r="",n=""}),a};return(0,n.useEffect)(()=>{!async function(){var e=await w();if(e){let t=(e,t)=>{let a=document.createElement("script");a.type="text/javascript",a.src=e,a.async=!0,a.onload=t,document.head.appendChild(a)};t("https://cdn.amcharts.com/lib/4/core.js",()=>{t("https://cdn.amcharts.com/lib/4/charts.js",()=>{t("https://cdn.amcharts.com/lib/4/themes/animated.js",()=>{am4core.ready(()=>{let t=am4core.create(y,am4charts.SankeyDiagram),a=I(e);t.data=a,t.dataFields.fromName="from",t.dataFields.toName="to",t.dataFields.value="value",t.paddingRight=2===h?0:40,t.paddingLeft=2===h?40:0,t.tooltip.label.fontSize=b;let r=t.nodes.template;r.draggable=!1,r.inert=!0,r.clickable=!1,r.width=_,r.height=g,r.nameLabel.label.fontSize=b,r.nameLabel.locationX=2===h?.85:0,r.nameLabel.height=void 0,r.nameLabel.label.fontWeight="bold";let n=t.links.template;n.middleLine.strokeOpacity=.3,n.middleLine.stroke=am4core.color("#555"),n.middleLine.strokeWidth=5,n.middleLine.hoverable=!1,n.fillOpacity=0,n.hoverable=!0,n.hoverOnFocus=!0,n.fill=am4core.color("#A8C686"),n.isHover=!0,t.appear(1e3,100)})})})})}}()},[]),(0,r.jsx)("div",{id:y,className:f().root})};m.width=950,t.Z=m},24868:function(e){e.exports={root:"WorkFlow_root__EINm1"}}},function(e){e.O(0,[92515,2494,36908,23352,69952,49774,92888,40179],function(){return e(e.s=44201)}),_N_E=e.O()}]);