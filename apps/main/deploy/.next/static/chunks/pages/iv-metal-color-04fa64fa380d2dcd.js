(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37959],{46994:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-metal-color",function(){return n(78838)}])},78838:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return j}});var t=n(52322),a=n(2784),o=n(62202),c=n(69387),s=n(27723),i=n(65950),l=n(71987),d=n(26612),u=n(31389),f=n(33625),x=n(62362),h=n(61802),C=n(19473),p=n(65215),m=n(60218),_=n(48601),g=n(82737),I=n(5088),y=n(80983);function w(e){let{labels:r,maxAccess:n,recordId:c}=e,{getRequest:s,postRequest:f}=(0,a.useContext)(i.$),{platformLabels:h}=(0,a.useContext)(C.l),w=(0,l.E)({endpointId:p.$.MetalColor.qry}),{formik:j}=(0,y.c)({initialValues:{recordId:null,reference:""},maxAccess:n,validateOnChange:!0,validationSchema:_.Ry({reference:_.Z_().required()}),onSubmit:async e=>{let r=await f({extension:p.$.MetalColor.set,record:JSON.stringify(e)});e.recordId?o.ZP.success(h.Edited):(o.ZP.success(h.Added),j.setFieldValue("recordId",r.recordId)),w()}}),v=!!j.values.recordId;return(0,a.useEffect)(()=>{!async function(){if(c){let e=await s({extension:p.$.MetalColor.get,parameters:"_recordId=".concat(c)});j.setValues(e.record)}}()},[]),(0,t.jsx)(g.Z,{resourceId:d.i.MetalColor,form:j,maxAccess:n,editMode:v,children:(0,t.jsx)(u.R,{children:(0,t.jsx)(x.Q,{children:(0,t.jsx)(m.ZP,{container:!0,spacing:2,children:(0,t.jsx)(m.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.Z,{name:"reference",label:r.reference,value:j.values.reference,required:!0,maxAccess:n,onChange:j.handleChange,onClear:()=>j.setFieldValue("reference",""),error:j.touched.reference&&!!j.errors.reference})})})})})})}var j=()=>{let{getRequest:e,postRequest:r}=(0,a.useContext)(i.$),{platformLabels:n}=(0,a.useContext)(C.l),{stack:m}=(0,h.zY)();async function _(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50}=r;return{...await e({extension:p.$.MetalColor.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t,"&filter=")}),_startAt:n}}let{query:{data:g},labels:I,paginationParameters:y,refetch:j,access:v,invalidate:M}=(0,l.J)({queryFn:_,endpointId:p.$.MetalColor.qry,datasetId:d.i.MetalColor}),Z=[{field:"reference",headerName:I.reference,flex:1}];function A(e){m({Component:w,props:{labels:I,recordId:e,maxAccess:v},width:500,height:250,title:I.MetalColor})}let E=async e=>{await r({extension:p.$.MetalColor.del,record:JSON.stringify(e)}),M(),o.ZP.success(n.Deleted)};return(0,t.jsxs)(u.R,{children:[(0,t.jsx)(f.g,{children:(0,t.jsx)(s.Z,{onAdd:()=>{A()},maxAccess:v})}),(0,t.jsx)(x.Q,{children:(0,t.jsx)(c.Z,{columns:Z,gridData:g,rowId:["recordId"],onEdit:e=>{A(null==e?void 0:e.recordId)},onDelete:E,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:y,refetch:j,maxAccess:v})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=46994)}),_N_E=e.O()}]);