(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83459],{14437:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(82870)}])},34340:function(e,n){"use strict";n.Z={src:"/_next/static/media/ArgusLogo.ad8ed04b.png",height:256,width:995,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAHlBMVEX///+8Exr//////Pz////9+fn////MSE7MU1f///+Usm9KAAAACnRSTlN1TEhhaJSgVUx8bp38CQAAAAlwSFlzAAAewQAAHsEBw2lUUwAAABpJREFUeJxjYORgY2ZiYmZgYGRnZWFgYOEEAAH2ADhmN33CAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2}},82870:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return H}});var a=t(52322),o=t(5088),s=t(76385),r=t(85325),i=t(2784),l=t(39097),d=t.n(l),c=t(34257),u=t(23925),m=t(23654),g=t(31461),p=t(7896),h=t(83214),v=t(69075),f=t(75596),x=t(44781),w=t(69222),Z=t(15672);function y(e){return(0,Z.ZP)("MuiCardMedia",e)}(0,w.Z)("MuiCardMedia",["root","media","img"]);let C=["children","className","component","image","src","style"],A=e=>{let{classes:n,isMediaComponent:t,isImageComponent:a}=e;return(0,v.Z)({root:["root",t&&"media",a&&"img"]},y,n)},P=(0,x.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e,{isMediaComponent:a,isImageComponent:o}=t;return[n.root,a&&n.media,o&&n.img]}})(e=>{let{ownerState:n}=e;return(0,p.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},n.isMediaComponent&&{width:"100%"},n.isImageComponent&&{objectFit:"cover"})}),j=["video","audio","picture","iframe","img"],N=["picture","img"],_=i.forwardRef(function(e,n){let t=(0,f.i)({props:e,name:"MuiCardMedia"}),{children:o,className:s,component:r="div",image:i,src:l,style:d}=t,c=(0,g.Z)(t,C),u=-1!==j.indexOf(r),m=!u&&i?(0,p.Z)({backgroundImage:'url("'.concat(i,'")')},d):d,v=(0,p.Z)({},t,{component:r,isMediaComponent:u,isImageComponent:-1!==N.indexOf(r)}),x=A(v);return(0,a.jsx)(P,(0,p.Z)({className:(0,h.Z)(x.root,s),as:r,role:!u&&i?"img":void 0,ref:n,style:m,ownerState:v,src:u?i||l:void 0},c,{children:o}))});var E=t(98401),b=t(60218),k=t(78502),S=t(9737),I=t(78711),R=t(48601),B=t(36055),M=t(21346),F=t(19473),T=t(61802),L=t(15153),O=t(60418),D=t(70919),U=t(70121),V=t.n(U),W=t(69627),z=t(7087),J=t.n(z);let Y=(0,x.ZP)(d())(e=>{let{theme:n}=e;return{fontSize:"0.7rem",textDecoration:"none",color:n.palette.primary.main}}),q=()=>{let[e,n]=(0,i.useState)(!1),[l,d]=(0,i.useState)(null),g=(0,k.Z)(),p=(0,c.a)(),{companyName:h,setCompanyName:v,deployHost:f,validCompanyName:x}=(0,i.useContext)(r.V),{platformLabels:w}=(0,i.useContext)(F.l),{stack:Z}=(0,T.zY)(),y=(0,I.TA)({initialValues:{username:"",password:"",rememberMe:!1,accountId:"",companyName:""},validationSchema:R.Ry({username:R.Z_().required(),password:R.Z_().required(),rememberMe:R.O7()}),onSubmit:e=>{p.login({...e},e=>{var n,t,a;let{loggedUser:o}=e;if(null==e?void 0:null===(n=e.signIn3)||void 0===n?void 0:n.forcePasswordReset){let n=async()=>{};C(e.username,o,n)}else if(null==e?void 0:null===(t=e.getUS2)||void 0===t?void 0:t.umcpnl){let n=async()=>{await j(o,null==e?void 0:e.getUS2)};C(e.username,o,n)}else(null==e?void 0:null===(a=e.getUS2)||void 0===a?void 0:a.is2FAEnabled)?Z({Component:D.Z,props:{formValidation:y,loggedUser:o,onClose:()=>p.EnableLogin(o)},expandable:!1,spacing:!1}):d(e)})}});function C(e,n,t){Z({Component:L.Z,props:{reopenLogin:!0,username:e,loggedUser:n,_labels:w,onClose:()=>t()},expandable:!1,closable:!1,draggable:!1,spacing:!1})}let{apiUrl:A,languageId:P}=(0,c.a)(),j=async(e,n)=>{try{let a=e.accessToken;if(!a)throw Error("Failed to retrieve access token");let o={...n,umcpnl:!1};var t=new FormData;t.append("record",JSON.stringify(o)),await (0,O.Z)({method:"POST",url:"".concat(A,"SY.asmx/setUS"),headers:{Authorization:"Bearer "+a,"Content-Type":"multipart/form-data",LanguageId:P},data:t})}catch(e){stackError({message:e.message})}};return(0,i.useEffect)(()=>{y.setFieldValue("companyName",h||"")},[h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.Z,{className:V().pageRoot,children:[(0,a.jsx)(u.Z,{className:V().centerZone,children:(0,a.jsxs)(m.Z,{className:V().loginCard,children:[(0,a.jsx)(u.Z,{className:V().loginCardHeader,sx:{backgroundColor:g.palette.primary.main},children:(0,a.jsx)(_,{component:"img",image:t(34340).Z.src,alt:"ArgusERP",sx:{height:"100%",maxWidth:"100%",objectFit:"contain"}})}),(0,a.jsxs)(E.Z,{className:V().cardContent,onKeyDown:e=>{"Enter"===e.key&&y.handleSubmit()},children:[(0,a.jsxs)(b.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(b.ZP,{item:!0,xs:12,children:(0,a.jsx)(o.Z,{name:"companyName",size:"small",fullWidth:!0,value:y.values.companyName,readOnly:!f||x,allowClear:f,label:(null==w?void 0:w.CompanyName)||"Company Name",onChange:y.handleChange,onKeyDown:e=>{"Enter"==e.key&&e.target.blur()},onBlur:f?e=>{var n;v((null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)||"")}:void 0,onClear:()=>{v(""),y.setFieldValue("companyName","")}})}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.ZP,{item:!0,xs:12,children:(0,a.jsx)(o.Z,{name:"username",size:"small",fullWidth:!0,label:null==w?void 0:w.Username,value:y.values.username,type:"text",onChange:y.handleChange,onClear:()=>y.setFieldValue("username",""),error:y.touched.username&&!!y.errors.username,helperText:y.touched.username&&y.errors.username})}),(0,a.jsx)(b.ZP,{item:!0,xs:12,children:(0,a.jsx)(o.Z,{name:"password",size:"small",fullWidth:!0,label:null==w?void 0:w.password,type:e?"text":"password",value:y.values.password,onChange:y.handleChange,error:y.touched.password&&y.errors.password,helperText:y.touched.password&&y.errors.password,endIcons:[(0,a.jsx)(S.Z,{className:J().icon,icon:e?"mdi:eye-outline":"mdi:eye-off-outline",onClick:()=>n(e=>!e),onMouseDown:e=>e.preventDefault()})]})})]})]}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y,{href:"/forget-password/reset",className:V().linksRow,children:null==w?void 0:w.ForgotPass}),(0,a.jsx)(W.Z,{fullWidth:!0,type:"submit",variant:"contained",onClick:y.handleSubmit,disabled:!x,label:null==w?void 0:w.Login})]})]})]})}),(0,a.jsx)(u.Z,{className:V().middleZone,children:(0,a.jsxs)(u.Z,{className:V().languageRow,children:[(0,a.jsx)(s.Z,{variant:"body2",className:V().offered,children:null==w?void 0:w.ArgusOfferedIn}),(0,a.jsxs)(u.Z,{className:V().languageLinks,children:[(0,a.jsx)(Y,{href:"/pages/auth/login-en",className:V().language,children:"English"}),(0,a.jsx)(Y,{href:"/pages/auth/login-fr",className:V().language,children:"Fran\xe7ais"}),(0,a.jsx)(Y,{href:"/pages/auth/login-ar",className:V().language,children:"عربي"})]})]})}),(0,a.jsx)(u.Z,{className:V().bottomZone,children:(0,a.jsxs)(u.Z,{component:"footer",className:V().footer,children:["\xa9 ",new Date().getFullYear()," Argus. All rights reserved. 3.1.8 API: 2.8.8"]})})]}),(0,a.jsx)(M.Z,{open:l,onClose:()=>d(null),message:l})]})};q.getLayout=e=>(0,a.jsx)(B.Z,{children:e}),q.guestGuard=!0;var H=q},23654:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var a=t(7896),o=t(31461),s=t(2784),r=t(83214),i=t(69075),l=t(44781),d=t(75596),c=t(34758),u=t(69222),m=t(15672);function g(e){return(0,m.ZP)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var p=t(52322);let h=["className","raised"],v=e=>{let{classes:n}=e;return(0,i.Z)({root:["root"]},g,n)},f=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({overflow:"hidden"}));var x=s.forwardRef(function(e,n){let t=(0,d.i)({props:e,name:"MuiCard"}),{className:s,raised:i=!1}=t,l=(0,o.Z)(t,h),c=(0,a.Z)({},t,{raised:i}),u=v(c);return(0,p.jsx)(f,(0,a.Z)({className:(0,r.Z)(u.root,s),elevation:i?8:void 0,ref:n,ownerState:c},l))})},98401:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var a=t(7896),o=t(31461),s=t(2784),r=t(83214),i=t(69075),l=t(44781),d=t(75596),c=t(69222),u=t(15672);function m(e){return(0,u.ZP)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var g=t(52322);let p=["className","component"],h=e=>{let{classes:n}=e;return(0,i.Z)({root:["root"]},m,n)},v=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var f=s.forwardRef(function(e,n){let t=(0,d.i)({props:e,name:"MuiCardContent"}),{className:s,component:i="div"}=t,l=(0,o.Z)(t,p),c=(0,a.Z)({},t,{component:i}),u=h(c);return(0,g.jsx)(v,(0,a.Z)({as:i,className:(0,r.Z)(u.root,s),ownerState:c,ref:n},l))})},62795:function(e,n,t){"use strict";t.d(n,{P:function(){return o}});let a="MA.asmx/",o={Identity:{set:a+"setID",get:a+"getID"},UserIdentity:{check:a+"check"},changePW:a+"changePW"}},1685:function(e,n,t){"use strict";t.d(n,{m:function(){return a}});let a=e=>{let n=window.sessionStorage.getItem(e);return n?JSON.parse(n):null}},15153:function(e,n,t){"use strict";var a=t(52322),o=t(2784),s=t(60218),r=t(44258),i=t(9737),l=t(5088),d=t(62362),c=t(31389),u=t(80983),m=t(62202),g=t(48601),p=t(34257),h=t(96026),v=t(85325),f=t(2422),x=t(19473),w=t(21326),Z=t(91406),y=t(62795),C=t(65950),A=t(1685),P=t(7087),j=t.n(P);let N=e=>{var n,P;let{_labels:N,reopenLogin:_=!1,loggedUser:E,window:b,username:k="",onClose:S}=e,[I,R]=(0,o.useState)(0),[B,M]=(0,o.useState)(!1),{stack:F}=(0,h.V)(),T=(0,p.a)(),{encryptePWD:L,getAccessToken:O}=(0,o.useContext)(v.V),{platformLabels:D}=(0,o.useContext)(x.l),{getIdentityRequest:U,postIdentityRequest:V}=(0,o.useContext)(C.$);(0,w.Z)({title:D.ChangePassword,window:b});let W=(0,A.m)("userData");(0,o.useEffect)(()=>{!async function(){if(!1==_){var e;let n=await U({extension:y.P.Identity.get,parameters:"_email=".concat(null==W?void 0:W.username)});z.setFieldValue("passwordExpiryDays",null===(e=n.record)||void 0===e?void 0:e.passwordExpiryDays)}}()},[_]);let{formik:z}=(0,u.c)({validateOnChange:!0,initialValues:{username:k||(null==T?void 0:null===(n=T.user)||void 0===n?void 0:n.username),password:"",newPassword:"",confirmPassword:""},validationSchema:g.Ry({newPassword:g.Z_().required(),confirmPassword:g.Z_().required()}),onSubmit:async()=>{if(z.values.newPassword===z.values.confirmPassword){let e;let n={userName:z.values.username,oldPW:L(z.values.password),newPW:L(z.values.newPassword)};if(!(e=E&&E.accessToken?E.accessToken:await O()))throw Error("Failed to retrieve access token");await V({extension:y.P.changePW,accessToken:e,record:JSON.stringify(n)}).then(e=>{m.ZP.success(N.passSuccess),z.setFieldValue("password",""),z.setFieldValue("newPassword",""),z.setFieldValue("confirmPassword",""),R(0)}),!0===_&&(b.close(),S())}else m.ZP.error(N.passNotMatching)}});return(0,a.jsx)(c.R,{children:(0,a.jsxs)(d.Q,{children:[(0,a.jsxs)(s.ZP,{container:!0,spacing:2,sx:{pl:"10px",pt:"10px",pr:"10px"},children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsx)(Z.Z,{name:"passwordExpiryDays",label:N.passwordExpiryDays,value:null===(P=z.values)||void 0===P?void 0:P.passwordExpiryDays,readOnly:!0,hidden:_})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,children:(0,a.jsx)(l.Z,{name:"password",fullWidth:!0,label:N.password,type:B?"text":"password",value:z.values.password,onChange:z.handleChange,error:z.touched.password&&z.errors.password,startIcons:[(0,a.jsx)("div",{className:j().iconButton,children:(0,a.jsx)("img",{className:j().iconImage,src:t(8440).Z.src})})],endIcons:[(0,a.jsx)(r.Z,{className:j().iconButton,onClick:()=>M(!B),onMouseDown:e=>e.preventDefault(),children:(0,a.jsx)(i.Z,{className:j().icon,icon:B?"mdi:eye-outline":"mdi:eye-off-outline"})})]})})]}),(0,a.jsx)(f.Z,{formik:z,labels:N,score:I,setScore:R})]})})};N.width=600,N.height=400,n.Z=N},70919:function(e,n,t){"use strict";var a=t(52322),o=t(2784),s=t(49864),r=t(93154),i=t.n(r),l=t(62202),d=t(60418),c=t(34257),u=t(96026),m=t(19473),g=t(95982),p=t(65950),h=t(21326);let v=e=>{let{loggedUser:n,onClose:t,window:r,PlantSupervisors:v=!1,values:f}=e,[x,w]=(0,o.useState)(["","","","","",""]),[Z,y]=(0,o.useState)(""),[C,A]=(0,o.useState)(0),{apiUrl:P,languageId:j}=(0,c.a)(),{platformLabels:N}=(0,o.useContext)(m.l),{postRequest:_}=(0,o.useContext)(p.$),E=(0,u.V)();async function b(e){E&&await E.stack(e)}(0,h.Z)({title:N.OTPVerification,window:r});let k=e=>{if(e.length>1){let o=n.accessToken;var a=new FormData;a.append("record",JSON.stringify({otp:e})),(0,d.Z)({method:"POST",url:P+g.y.checkOTP,headers:{Authorization:"Bearer "+o,"Content-Type":"multipart/form-data",LanguageId:j},data:a}).then(e=>{l.ZP.success(N.verificationCompleted),r.close(),t()}).catch(e=>{var n,t;b({message:e,height:(null===(n=e.response)||void 0===n?void 0:n.status)===404||(null===(t=e.response)||void 0===t?void 0:t.status)===500?400:""})})}else y(N.AllFieldsRequired)},S=async e=>{if(e.length>1){var n={plantId:f.plantId,otp:e};await _({extension:g.y.PlantSupervisors.verify,record:JSON.stringify(n)}).then(e=>{l.ZP.success(N.verificationCompleted),r.close(),t()})}else y(N.AllFieldsRequired)},I=(e,n)=>{document.getElementById("otp-input-".concat(e)).select();let t=n.target.value,a=[...x];isNaN(t)||""===t?"deleteContentBackward"===n.nativeEvent.inputType?(a[e]="",w(a),e>0&&""!==document.getElementById("otp-input-".concat(e-1)).value&&document.getElementById("otp-input-".concat(e)).focus()):""!==t&&""!==document.getElementById("otp-input-".concat(e)).value&&(document.getElementById("otp-input-".concat(e)).select(),a[e]=t,w(a)):(a[e]=t,w(a),e<x.length-1&&""!==t?(document.getElementById("otp-input-".concat(e+1)).focus(),document.getElementById("otp-input-".concat(e+1)).select()):e===x.length-1&&a.every(e=>""!==e)&&B(a))};(0,o.useEffect)(()=>{var e;A(0),e=0,x.map((n,t)=>""!==n&&e++),e>5&&A(e)},[x]);let R=(e,n)=>{var t,a,o,s,r;let i=n.target.value;"ArrowRight"==n.key&&e<6?(null===(t=document.getElementById("otp-input-".concat(e+1)))||void 0===t||t.focus(),null===(a=document.getElementById("otp-input-".concat(e+1)))||void 0===a||a.select()):"ArrowLeft"==n.key&&e>0?(null===(o=document.getElementById("otp-input-".concat(e-1)))||void 0===o||o.focus(),null===(s=document.getElementById("otp-input-".concat(e-1)))||void 0===s||s.select()):i===document.getElementById("otp-input-".concat(e)).value&&(null===(r=document.getElementById("otp-input-".concat(e)))||void 0===r||r.select())},B=e=>{let n=e?e.join(""):x.join("");v?S(n):k(n)};return(0,o.useEffect)(()=>{let e=setTimeout(()=>{let e=document.getElementById("otp-input-0");e&&(e.focus(),e.select())},0);return()=>clearTimeout(e)},[]),(0,a.jsx)("div",{width:500,height:300,onClose:t,children:(0,a.jsxs)(s.Z,{className:i().phoneVerificationContainer,children:[(0,a.jsx)("p",{children:N.TwoFactorAuthentication}),(0,a.jsx)(s.Z,{className:i().otpInputContainer,children:x.map((e,n)=>(0,a.jsx)("input",{className:i().inputText,type:"text",id:"otp-input-".concat(n),maxLength:"1",onKeyUp:e=>R(n,e),value:e,onChange:e=>I(n,e)},n))}),(0,a.jsx)("button",{className:i().verifyButton,onClick:B,disabled:C<5,children:N.verifyOTP}),Z&&(0,a.jsx)("p",{className:i().errorMessage,children:Z})]})})};v.width=400,v.height=400,n.Z=v},70121:function(e){e.exports={pageRoot:"LoginPage_pageRoot__0xq_3",centerZone:"LoginPage_centerZone__f54_j",loginCard:"LoginPage_loginCard__J33Ar",loginCardHeader:"LoginPage_loginCardHeader__6AKjE",cardContent:"LoginPage_cardContent__th6ci",linksRow:"LoginPage_linksRow__PBI6A",bottomZone:"LoginPage_bottomZone__npwkk",middleZone:"LoginPage_middleZone__UM_Oo",languageRow:"LoginPage_languageRow__Goxu7",languageLinks:"LoginPage_languageLinks__g1ra7",footer:"LoginPage_footer__kyWB6"}}},function(e){e.O(0,[41697,49774,92888,40179],function(){return e(e.s=14437)}),_N_E=e.O()}]);