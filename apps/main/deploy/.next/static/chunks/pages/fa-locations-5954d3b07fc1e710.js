(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55485],{847:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fa-locations",function(){return r(29422)}])},29422:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return _}});var t=r(52322),a=r(2784),s=r(27723),d=r(33625),l=r(62362),o=r(31389),i=r(69387),c=r(71987),u=r(19473),p=r(65950),m=r(68499),f=r(26612),x=r(61802),g=r(60218),h=r(48601),C=r(82737),I=r(62202),v=r(80983),y=r(5088),P=r(8661),q=r(38449),A=r(66361);function L(e){var n,r;let{labels:s,maxAccess:d,recordId:i}=e,{getRequest:x,postRequest:L}=(0,a.useContext)(p.$),{platformLabels:_}=(0,a.useContext)(u.l),D=(0,c.E)({endpointId:m.Y.Location.page}),{formik:E}=(0,v.c)({initialValues:{recordId:null,reference:null,name:"",costCenterId:null,plantId:null},maxAccess:d,validateOnChange:!0,validationSchema:h.Ry({reference:h.Z_().required(),name:h.Z_().required(),plantId:h.Z_().required()}),onSubmit:j});async function j(e){let n=await L({extension:m.Y.Location.set,record:JSON.stringify(e)});e.recordId||E.setFieldValue("recordId",n.recordId),I.ZP.success(e.recordId?_.Edited:_.Added),D()}return(0,a.useEffect)(()=>{(async()=>{if(i){let e=await x({extension:m.Y.Location.get,parameters:"_recordId=".concat(i)});E.setValues(e.record)}})()},[i]),(0,t.jsx)(C.Z,{resourceId:f.i.Location,form:E,maxAccess:d,editMode:!!i||!!E.values.recordId,children:(0,t.jsx)(o.R,{children:(0,t.jsx)(l.Q,{children:(0,t.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(g.ZP,{item:!0,xs:12,children:(0,t.jsx)(y.Z,{name:"reference",label:s.reference,value:null===(n=E.values)||void 0===n?void 0:n.reference,required:!0,maxAccess:d,onChange:E.handleChange,onClear:()=>E.setFieldValue("reference",""),error:E.touched.reference&&!!E.errors.reference,maxLength:10})}),(0,t.jsx)(g.ZP,{item:!0,xs:12,children:(0,t.jsx)(y.Z,{name:"name",label:s.name,value:null===(r=E.values)||void 0===r?void 0:r.name,required:!0,maxAccess:d,onChange:E.handleChange,onClear:()=>E.setFieldValue("name",""),error:E.touched.name&&!!E.errors.name,maxLength:30})}),(0,t.jsx)(g.ZP,{item:!0,xs:12,children:(0,t.jsx)(P.Z,{endpointId:q.r.Plant.qry,name:"plantId",label:_.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:E.values,required:!0,onChange:(e,n)=>{E.setFieldValue("plantId",(null==n?void 0:n.recordId)||"")},error:E.touched.plantId&&!!E.errors.plantId})}),(0,t.jsx)(g.ZP,{item:!0,xs:12,children:(0,t.jsx)(P.Z,{endpointId:A.x.CostCenter.qry,parameters:"_params=&_startAt=0&_pageSize=200",name:"costCenterId",label:s.costCenter,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:E.values,maxAccess:d,onChange:(e,n)=>{E&&E.setFieldValue("costCenterId",null==n?void 0:n.recordId)},error:E.touched.costCenterId&&!!E.errors.costCenterId})})]})})})})}var _=()=>{let{getRequest:e,postRequest:n}=(0,a.useContext)(p.$),{platformLabels:r}=(0,a.useContext)(u.l),{stack:g}=(0,x.zY)(),h=async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50}=n;return{...await e({extension:m.Y.Location.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(t,"&filter=")}),_startAt:r}},{query:{data:C},labels:v,access:y,invalidate:P,refetch:q,paginationParameters:A,isLoading:_}=(0,c.J)({queryFn:h,endpointId:m.Y.Location.page,datasetId:f.i.Location}),D=e=>{g({Component:L,props:{labels:v,recordId:e,maxAccess:y},width:600,height:400,title:null==v?void 0:v.location})},E=[{field:"reference",headerName:v.reference,flex:1},{field:"name",headerName:v.name,flex:1},{field:"plantName",headerName:v.plant,flex:1},{field:"costCenterName",headerName:v.costCenter,flex:1}],j=async e=>{await n({extension:m.Y.Location.del,record:JSON.stringify(e)}),P(),I.ZP.success(r.Deleted)};return(0,t.jsxs)(o.R,{children:[(0,t.jsx)(d.g,{children:(0,t.jsx)(s.Z,{onAdd:()=>{D()},maxAccess:y})}),(0,t.jsx)(l.Q,{children:(0,t.jsx)(i.Z,{columns:E,gridData:C,rowId:["recordId"],onEdit:e=>{D(null==e?void 0:e.recordId)},onDelete:j,isLoading:_,pageSize:50,paginationType:"api",paginationParameters:A,refetch:q,maxAccess:y})})]})}},68499:function(e,n,r){"use strict";r.d(n,{Y:function(){return a}});let t="FA.asmx/",a={Asset:{page:t+"pageCLS",qry:t+"qryCLS",get:t+"getCLS",set:t+"setCLS",del:t+"delCLS"},AssetGroup:{page:t+"pageGRP",qry:t+"qryGRP",get:t+"getGRP",set:t+"setGRP",del:t+"delGRP"},Location:{page:t+"pageLOC",qry:t+"qryLOC",get:t+"getLOC",set:t+"setLOC",del:t+"delLOC"},Assets:{qry:t+"qryAST",get:t+"getAST",set:t+"setAST",del:t+"delAST"},AssetsDescription:{qry:t+"qryDEP",get:t+"getDEP",set2:t+"set2DEP",set:t+"setDEP",del:t+"delDEP",snapshot:t+"snapshotDEP",preview:t+"previewDEP",post:t+"postDEP",unpost:t+"unpostDEP"},AssetsTableData:{qry:t+"qryDEA"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=847)}),_N_E=e.O()}]);