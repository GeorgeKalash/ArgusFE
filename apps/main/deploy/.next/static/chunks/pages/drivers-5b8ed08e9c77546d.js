(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30672],{78274:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/drivers",function(){return n(57114)}])},57114:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return O}});var t=n(52322),s=n(2784),a=n(62202),l=n(69387),o=n(27723),i=n(65950),d=n(71987),c=n(26612),u=n(31389),p=n(33625),g=n(62362),h=n(61802),R=n(19473),m=n(60218),v=n(48601),P=n(82737),I=n(5088),T=n(80983),x=n(30043),D=n(8661),f=n(38449);function y(e){let{labels:r,maxAccess:n,recordId:l}=e,{getRequest:o,postRequest:p}=(0,s.useContext)(i.$),{platformLabels:h}=(0,s.useContext)(R.l),y=(0,d.E)({endpointId:x.U.Driver.page}),{formik:O}=(0,T.c)({initialValues:{recordId:null,cellPhone:"",name:""},maxAccess:n,validateOnChange:!0,validationSchema:v.Ry({name:v.Z_().required(),cellPhone:v.Z_().required()}),onSubmit:async e=>{let r=await p({extension:x.U.Driver.set,record:JSON.stringify(e)});e.recordId?a.ZP.success(h.Edited):(a.ZP.success(h.Added),O.setFieldValue("recordId",r.recordId)),y()}}),q=!!O.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(l){let e=await o({extension:x.U.Driver.get,parameters:"_recordId=".concat(l)});O.setValues(e.record)}}()},[]),(0,t.jsx)(P.Z,{resourceId:c.i.Drivers,form:O,maxAccess:n,editMode:q,children:(0,t.jsx)(u.R,{children:(0,t.jsx)(g.Q,{children:(0,t.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(m.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.Z,{name:"name",label:r.name,value:O.values.name,required:!0,maxAccess:n,onChange:O.handleChange,onClear:()=>O.setFieldValue("name",""),error:O.touched.name&&!!O.errors.name})}),(0,t.jsx)(m.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.Z,{name:"cellPhone",label:r.cellPhone,value:O.values.cellPhone,required:!0,phone:!0,maxAccess:n,onChange:O.handleChange,onClear:()=>O.setFieldValue("cellPhone",""),error:O.touched.cellPhone&&!!O.errors.cellPhone})}),(0,t.jsx)(m.ZP,{item:!0,xs:12,children:(0,t.jsx)(D.Z,{endpointId:f.r.Plant.qry,name:"plantId",label:r.plant,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:O.values,maxAccess:n,onChange:(e,r)=>{O.setFieldValue("plantId",r?null==r?void 0:r.recordId:"")},error:O.touched.plantId&&!!O.errors.recordId})})]})})})})}var O=()=>{let{getRequest:e,postRequest:r}=(0,s.useContext)(i.$),{platformLabels:n}=(0,s.useContext)(R.l),{stack:m}=(0,h.zY)(),{query:{data:v},labels:P,paginationParameters:I,refetch:T,access:D,invalidate:f,search:O,clear:q}=(0,d.J)({queryFn:V,endpointId:x.U.Driver.page,datasetId:c.i.Drivers,search:{searchFn:E}});async function V(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50}=r;return{...await e({extension:x.U.Driver.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t,"&filter=")}),_startAt:n}}async function E(r){let{qry:n}=r;return await e({extension:x.U.Driver.snapshot,parameters:"_filter=".concat(n)})}let N=[{field:"name",headerName:P.name,flex:1},{field:"cellPhone",headerName:P.cellPhone,flex:1}];function C(e){m({Component:y,props:{labels:P,recordId:e,maxAccess:D},width:600,height:350,title:P.drivers})}let _=async e=>{await r({extension:x.U.Driver.del,record:JSON.stringify(e)}),f(),a.ZP.success(n.Deleted)};return(0,t.jsxs)(u.R,{children:[(0,t.jsx)(p.g,{children:(0,t.jsx)(o.Z,{onAdd:()=>{C()},maxAccess:D,onSearch:O,onSearchClear:q,labels:P,inputSearch:!0})}),(0,t.jsx)(g.Q,{children:(0,t.jsx)(l.Z,{name:"driverTable",columns:N,gridData:v,rowId:["recordId"],onEdit:e=>{C(null==e?void 0:e.recordId)},onDelete:_,pageSize:50,paginationType:"api",paginationParameters:I,refetch:T,maxAccess:D})})]})}},30043:function(e,r,n){"use strict";n.d(r,{U:function(){return s}});let t="DE.asmx/",s={Driver:{snapshot:t+"snapshotDRV",page:t+"pageDRV",set:t+"setDRV",get:t+"getDRV",qry:t+"qryDRV",del:t+"delDRV"},Vehicle:{page:t+"pageVEH",set:t+"setVEH",get:t+"getVEH",qry:t+"qryVEH",del:t+"delVEH"},Trip:{page:t+"pageTRP",set:t+"setTRP",get:t+"getTRP",qry:t+"qryTRP",del:t+"delTRP",snapshot:t+"snapshotTRP",snapshot2:t+"snapshot2TRP",reopen:t+"reopenTRP",post:t+"postTRP",unpost:t+"unpostTRP",close:t+"closeTRP",generate:t+"generateTRP",setTRP2:t+"setTRP2",assign:t+"assignTRP",unassign:t+"unassignedTRP"},TripOrderPack2:{set2:t+"set2TRO"},TripOrder:{qry:t+"qryTRO"},Reduild:{rebuild:t+"rebuildMW"},TRP:{flag:t+"flagTRP"},ExpenseTypes:{get:t+"getET",set:t+"setET",del:t+"delET",page:t+"pageET"},DeliveriesOrders:{qry:t+"qryORD",get:t+"getORD",snapshot:t+"snapshotORD",unpost:t+"unpostORD",gen:t+"genORD",post:t+"postORD",del:t+"delORD",cancel:t+"cancelORD",flag:t+"flagORD",set2:t+"set2ORD"},Invoice:{generate:t+"generateIVC2",generateInv:t+"generateIVC",preview:t+"previewIVC"},OrderItem:{qry:t+"qryORI",get:t+"getORI"},MW:{qry:t+"qryMW2"},GenerateTrip:{root:t+"rootSZ",firstLevel:t+"firstLevelSZ",undelivered2:t+"undeliveredSO2",previewTRP:t+"previewTRP"},DeliveryLeadTime:{get:t+"getLDT",page:t+"pageLDT",set:t+"setLDT",del:t+"delLDT"},Volume:{vol:t+"volZO"},AllocatedVolume:{qry:t+"qryVEH2"},InboundTransp:{pack:t+"getPackINB",page:t+"pageINB",set2:t+"set2INB",get:t+"getINB",get2:t+"get2INB",del:t+"delINB",snapshot:t+"snapshotINB",post:t+"postINB",unpost:t+"unpostINB"},InboundOrders:{qry:t+"qryINO"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=78274)}),_N_E=e.O()}]);