(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45827],{20671:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gl-cost-centers",function(){return n(24731)}])},24731:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return w}});var t=n(52322),a=n(2784),s=n(62202),c=n(69387);n(27723);var o=n(65950),i=n(66361),d=n(71987),l=n(26612),u=n(31389),m=n(33625),x=n(62362),f=n(61802),C=n(60218),h=n(48601),p=n(82737),g=n(8661),_=n(5088),I=n(80983),v=n(19473);function y(e){let{labels:r,maxAccess:n,recordId:c}=e,{getRequest:m,postRequest:f}=(0,a.useContext)(o.$),{platformLabels:y}=(0,a.useContext)(v.l),{formik:j}=(0,I.c)({initialValues:{recordId:c||null,reference:"",name:"",ccgId:null},maxAccess:n,validateOnChange:!0,validationSchema:h.Ry({reference:h.Z_().required(),name:h.Z_().required()}),onSubmit:async e=>{let r=await f({extension:i.x.CostCenter.set,record:JSON.stringify(e)});e.recordId||j.setValues({...e,recordId:r.recordId}),s.ZP.success(e.recordId?y.Edited:y.Added),w()}}),w=(0,d.E)({endpointId:i.x.CostCenter.page}),A=!!j.values.recordId;return(0,a.useEffect)(()=>{!async function(){if(c){let e=await m({extension:i.x.CostCenter.get,parameters:"_recordId=".concat(c)});j.setValues(e.record)}}()},[c]),(0,t.jsx)(p.Z,{resourceId:l.i.CostCenter,form:j,actions:[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!A}],maxAccess:n,editMode:A,children:(0,t.jsx)(u.R,{children:(0,t.jsx)(x.Q,{children:(0,t.jsxs)(C.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(C.ZP,{item:!0,xs:12,children:(0,t.jsx)(_.Z,{name:"reference",label:r.reference,value:j.values.reference,required:!0,maxAccess:n,maxLength:"10",onChange:j.handleChange,onClear:()=>j.setFieldValue("reference",""),error:j.touched.reference&&!!j.errors.reference})}),(0,t.jsx)(C.ZP,{item:!0,xs:12,children:(0,t.jsx)(_.Z,{name:"name",label:r.name,value:j.values.name,required:!0,maxLength:"30",maxAccess:n,onChange:j.handleChange,onClear:()=>j.setFieldValue("name",""),error:j.touched.name&&!!j.errors.name})}),(0,t.jsx)(C.ZP,{item:!0,xs:12,children:(0,t.jsx)(g.Z,{endpointId:i.x.CostCenterGroup.qry,parameters:"_startAt=0&_pageSize=100",name:"ccgId",label:r.costCenterGroup,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:j.values,maxAccess:n,onChange:(e,r)=>{j.setFieldValue("ccgId",null==r?void 0:r.recordId)},error:j.touched.ccgId&&!!j.errors.ccgId})})]})})})})}var j=n(36908),w=()=>{let{getRequest:e,postRequest:r}=(0,a.useContext)(o.$),{platformLabels:n}=(0,a.useContext)(v.l),{stack:C}=(0,f.zY)();async function h(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:t=50,params:a}=r;return{...await e({extension:i.x.CostCenter.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(t,"&_params=").concat(a||"")}),_startAt:n}}async function p(r){let{filters:n,pagination:t}=r;return(null==n?void 0:n.qry)?await e({extension:i.x.CostCenter.snapshot,parameters:"_filter=".concat(n.qry)}):h({_startAt:t._startAt||0,params:null==n?void 0:n.params})}let{query:{data:g},labels:_,paginationParameters:I,refetch:w,access:A,filterBy:Z,invalidate:N}=(0,d.J)({queryFn:h,endpointId:i.x.CostCenter.page,datasetId:l.i.CostCenter,filter:{filterFn:p}}),k=[{field:"reference",headerName:_.reference,flex:1},{field:"name",headerName:_.name,flex:1},{field:"ccgName",headerName:_.costCenterGroup,flex:1}],b=async e=>{await r({extension:i.x.CostCenter.del,record:JSON.stringify(e)}),N(),s.ZP.success(n.Deleted)};function q(e){C({Component:y,props:{labels:_,recordId:e,maxAccess:A,invalidate:N},width:600,height:300,title:_.costCenter})}return(0,t.jsxs)(u.R,{children:[(0,t.jsx)(m.g,{children:(0,t.jsx)(j.Z,{onAdd:()=>{q()},maxAccess:A,reportName:"GLCC",filterBy:Z,previewReport:l.i.CostCenter})}),(0,t.jsx)(x.Q,{children:(0,t.jsx)(c.Z,{columns:k,gridData:null!=g?g:{list:[]},rowId:["recordId"],onEdit:e=>{q(null==e?void 0:e.recordId)},onDelete:b,isLoading:!1,pageSize:50,paginationType:"api",maxAccess:A,refetch:w,paginationParameters:I})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=20671)}),_N_E=e.O()}]);