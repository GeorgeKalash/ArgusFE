(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87583],{94729:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-rebuild-aging",function(){return t(87802)}])},87802:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var i=t(52322),r=t(61802),c=t(26612),a=t(55405),s=()=>(0,i.jsx)(r.ut,{datasetId:c.i.RebuildAging,labelKey:"rebuildAging",Component:a.Z})},55405:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var i=t(52322),r=t(60218),c=t(76385),a=t(48601),s=t(2784),o=t(82737),l=t(62202),u=t(65950),d=t(26612),h=t(31389),f=t(62362),x=t(80983),p=t(27423),m=t(25870),b=t(19473),g=t(5088),v=t(61802),w=t(84309);function j(e){let{_labels:n,access:t,values:j}=e,{postRequest:P}=(0,s.useContext)(u.$),{platformLabels:Z}=(0,s.useContext)(b.l),{stack:I}=(0,v.zY)(),{formik:C}=(0,x.c)({initialValues:{rebuild:"",accountId:(null==j?void 0:j.accountId)||0,accountRef:(null==j?void 0:j.accountRef)||"",accountName:(null==j?void 0:j.accountName)||"",recordId:"N/A"},maxAccess:t,validateOnChange:!0,validationSchema:a.Ry({rebuild:a.Z_().test("is-rebuild",'Value must be "rebuild"',e=>"string"==typeof e&&"rebuild"===e.toLowerCase()).required()}),onSubmit:async e=>{let{recordId:n,...t}=e,i=await P({extension:m.H.AgingDoc.rebuild,record:JSON.stringify(t)});I({Component:w.R,props:{recordId:i.recordId},closable:!1}),l.ZP.success(Z.rebuild)}}),_=[{key:"Rebuild",condition:!0,onClick:C.handleSubmit,disabled:!1}];return(0,i.jsx)(o.Z,{resourceId:d.i.RebuildAging,form:C,actions:_,maxAccess:t,isSaved:!1,isCleared:!1,editMode:!0,children:(0,i.jsx)(h.R,{children:(0,i.jsx)(f.Q,{children:(0,i.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,children:(0,i.jsx)(c.Z,{variant:"body1",children:n.infoText})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,children:(0,i.jsx)(g.Z,{name:"rebuild",required:!0,label:n.rebuild,value:C.values.rebuild,onChange:C.handleChange,onClear:()=>C.setFieldValue("rebuild",""),error:C.touched.rebuild&&!!C.errors.rebuild,maxAccess:t})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,children:(0,i.jsx)(p.U,{endpointId:m.H.Account.snapshot,name:"accountId",label:n.account,valueField:"reference",displayField:"name",valueShow:"accountRef",displayFieldWidth:2,secondValueShow:"accountName",form:C,onChange:(e,n)=>{C.setFieldValue("accountId",(null==n?void 0:n.recordId)||0),C.setFieldValue("accountRef",(null==n?void 0:n.reference)||""),C.setFieldValue("accountName",(null==n?void 0:n.name)||"")},readOnly:null==j?void 0:j.accountId,error:C.touched.accountId&&!!C.errors.accountId,maxAccess:t})})]})})})})}j.height=460},84309:function(e,n,t){"use strict";t.d(n,{R:function(){return R}});var i=t(73235),r=t(52322),c=t(3854),a=t(2784),s=t(82737),o=t(65950),l=t(62362),u=t(31389),d=t(60218),h=t(21581),f=t(38449),x=t(5088),p=t(19473),m=t(21326);function b(){let e=(0,i._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return b=function(){return e},e}function g(){let e=(0,i._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return g=function(){return e},e}function v(){let e=(0,i._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return v=function(){return e},e}function w(){let e=(0,i._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return w=function(){return e},e}function j(){let e=(0,i._)(["\n  container-type: inline-size;\n"]);return j=function(){return e},e}function P(){let e=(0,i._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return P=function(){return e},e}let Z=c.ZP.div(b()),I=c.ZP.span(g()),C=c.ZP.span(v()),_=c.ZP.div(w()),y=c.ZP.div(j()),A=c.ZP.div(P());function N(e){let{label:n,topLabel:t,width:i}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(C,{children:[t,": "]}),(0,r.jsxs)(_,{children:[(0,r.jsx)(A,{style:{width:i}}),(0,r.jsx)(I,{children:n})]})]})}let R=e=>{let{recordId:n,onComplete:t,access:i,window:c}=e,{getRequest:b}=(0,a.useContext)(o.$),{platformLabels:g}=(0,a.useContext)(p.l);(0,m.Z)({title:g.Progress,window:c});let[v,w]=(0,a.useState)({recordId:n,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),j=async()=>(await b({extension:f.r.THD.get,parameters:"_recordId=".concat(n)})).record,P=v.currentPhase===v.phases&&v.completed===v.iterations,I=!!v.status&&v.status<0;(0,a.useEffect)(()=>{t&&(P||I)&&t()},[I,P]),(0,a.useEffect)(()=>{(async()=>{w(await j())})();let e=setInterval(async()=>{let n=await j();w(n);let t=n.currentPhase===n.phases&&n.completed===n.iterations,i=!!n.status&&n.status<0;(n.status&&n.status<0||t||i)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let C=v.phases?v.currentPhase/v.phases*100:0,_=v.iterations?v.completed/v.iterations*100:0;return(0,r.jsx)(s.Z,{form:v,maxAccess:i,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>c.close(),disabled:!P&&!I}],isSaved:!1,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(l.Q,{children:(0,r.jsxs)(Z,{children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(x.Z,{name:"phase",label:g.Phase,value:v.currentPhaseName,readOnly:!0,maxAccess:i})}),(0,r.jsxs)(y,{children:[(0,r.jsx)(N,{label:"".concat(g.Step," ").concat(v.currentPhase," of ").concat(v.phases,"..."),topLabel:g.currentPhase,width:"".concat(C,"%")}),(0,r.jsx)(N,{label:"".concat(g.Step," ").concat(v.completed," of ").concat(v.iterations,"..."),topLabel:g.Completed,width:"".concat(_,"%")})]}),(0,r.jsx)(h.Z,{name:"log",label:g.Log,value:v.logInfo,rows:4,maxAccess:i,readOnly:!0})]})})})})};R.width=500,R.height=450}},function(e){e.O(0,[3854,49774,92888,40179],function(){return e(e.s=94729)}),_N_E=e.O()}]);