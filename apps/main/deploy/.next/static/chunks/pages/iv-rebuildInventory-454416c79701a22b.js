(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56617],{78382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-rebuildInventory",function(){return t(41221)}])},41221:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return I}});var i=t(52322),s=t(61802),a=t(26612),r=t(60218),o=t(48601),c=t(2784),l=t(82737),d=t(62202),u=t(65950),h=t(31389),p=t(62362),m=t(80983),x=t(19473),f=t(89330),v=t(27423),b=t(65215),w=t(84309);function j(e){let{_labels:n,access:t}=e,{postRequest:j}=(0,c.useContext)(u.$),{platformLabels:I}=(0,c.useContext)(x.l),{stack:P}=(0,s.zY)(),{formik:g}=(0,m.c)({initialValues:{itemId:0,date:new Date,recordId:"N/A"},maxAccess:t,validateOnChange:!0,validationSchema:o.Ry({date:o.Z_().required()}),onSubmit:async e=>{let{recordId:n,...t}=e,i=await j({extension:b.$.RebuildInventory.rebuild,record:JSON.stringify(t)});d.ZP.success(I.rebuild),P({Component:w.R,props:{recordId:i.recordId},closable:!1})}}),y=()=>{g.handleSubmit()};return(0,i.jsx)(l.Z,{resourceId:a.i.RebuildInventory,form:g,actions:[{key:"Rebuild",condition:!0,onClick:()=>{y()},disabled:!1}],maxAccess:t,isSaved:!1,isCleared:!1,editMode:!0,children:(0,i.jsx)(h.R,{children:(0,i.jsx)(p.Q,{children:(0,i.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.U,{endpointId:b.$.Item.snapshot,name:"itemId",label:n.item,valueField:"sku",displayField:"name",valueShow:"itemRef",secondValueShow:"itemName",displayFieldWidth:2,form:g,onChange:(e,n)=>{g.setFieldValue("itemId",(null==n?void 0:n.recordId)||0),g.setFieldValue("itemName",(null==n?void 0:n.name)||""),g.setFieldValue("itemRef",(null==n?void 0:n.sku)||"")},maxAccess:t})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,children:(0,i.jsx)(f.Z,{name:"date",label:n.date,value:g.values.date,onChange:g.setFieldValue,required:!0,maxAccess:t,onClear:()=>g.setFieldValue("date",""),error:g.touched.date&&!!g.errors.date})})]})})})})}var I=()=>(0,i.jsx)(s.ut,{datasetId:a.i.RebuildInventory,labelKey:"rebuildItem",Component:j})},84309:function(e,n,t){"use strict";t.d(n,{R:function(){return R}});var i=t(73235),s=t(52322),a=t(3854),r=t(2784),o=t(82737),c=t(65950),l=t(62362),d=t(31389),u=t(60218),h=t(21581),p=t(38449),m=t(5088),x=t(19473),f=t(21326);function v(){let e=(0,i._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return v=function(){return e},e}function b(){let e=(0,i._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return b=function(){return e},e}function w(){let e=(0,i._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return w=function(){return e},e}function j(){let e=(0,i._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return j=function(){return e},e}function I(){let e=(0,i._)(["\n  container-type: inline-size;\n"]);return I=function(){return e},e}function P(){let e=(0,i._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return P=function(){return e},e}let g=a.ZP.div(v()),y=a.ZP.span(b()),_=a.ZP.span(w()),C=a.ZP.div(j()),Z=a.ZP.div(I()),k=a.ZP.div(P());function N(e){let{label:n,topLabel:t,width:i}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(_,{children:[t,": "]}),(0,s.jsxs)(C,{children:[(0,s.jsx)(k,{style:{width:i}}),(0,s.jsx)(y,{children:n})]})]})}let R=e=>{let{recordId:n,onComplete:t,access:i,window:a}=e,{getRequest:v}=(0,r.useContext)(c.$),{platformLabels:b}=(0,r.useContext)(x.l);(0,f.Z)({title:b.Progress,window:a});let[w,j]=(0,r.useState)({recordId:n,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),I=async()=>(await v({extension:p.r.THD.get,parameters:"_recordId=".concat(n)})).record,P=w.currentPhase===w.phases&&w.completed===w.iterations,y=!!w.status&&w.status<0;(0,r.useEffect)(()=>{t&&(P||y)&&t()},[y,P]),(0,r.useEffect)(()=>{(async()=>{j(await I())})();let e=setInterval(async()=>{let n=await I();j(n);let t=n.currentPhase===n.phases&&n.completed===n.iterations,i=!!n.status&&n.status<0;(n.status&&n.status<0||t||i)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let _=w.phases?w.currentPhase/w.phases*100:0,C=w.iterations?w.completed/w.iterations*100:0;return(0,s.jsx)(o.Z,{form:w,maxAccess:i,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>a.close(),disabled:!P&&!y}],isSaved:!1,children:(0,s.jsx)(d.R,{children:(0,s.jsx)(l.Q,{children:(0,s.jsxs)(g,{children:[(0,s.jsx)(u.ZP,{item:!0,xs:12,children:(0,s.jsx)(m.Z,{name:"phase",label:b.Phase,value:w.currentPhaseName,readOnly:!0,maxAccess:i})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(N,{label:"".concat(b.Step," ").concat(w.currentPhase," of ").concat(w.phases,"..."),topLabel:b.currentPhase,width:"".concat(_,"%")}),(0,s.jsx)(N,{label:"".concat(b.Step," ").concat(w.completed," of ").concat(w.iterations,"..."),topLabel:b.Completed,width:"".concat(C,"%")})]}),(0,s.jsx)(h.Z,{name:"log",label:b.Log,value:w.logInfo,rows:4,maxAccess:i,readOnly:!0})]})})})})};R.width=500,R.height=450}},function(e){e.O(0,[3854,49774,92888,40179],function(){return e(e.s=78382)}),_N_E=e.O()}]);