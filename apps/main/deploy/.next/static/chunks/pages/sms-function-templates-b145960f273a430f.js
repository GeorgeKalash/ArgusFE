(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62524],{17240:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sms-function-templates",function(){return n(49376)}])},49376:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var a=n(52322),s=n(2784),l=n(78711),r=n(62202),o=n(65950),i=n(38449),m=n(95982),d=n(71987),u=n(26612),p=n(76399),c=n(62362),f=n(31389),I=n(19473),w=n(54074),y=()=>{let{getRequest:e,postRequest:t}=(0,s.useContext)(o.$),{platformLabels:n}=(0,s.useContext)(I.l),y=async()=>{let t=await e({extension:i.r.SystemFunction.qry,parameters:""}),n=await e({extension:i.r.SMSFunctionTemplate.qry,parameters:""}),a=t.list.map(e=>{let t={functionId:parseInt(e.functionId),templateId:null,functionName:e.sfName,templateName:"",sgId:null,sgName:""},a=n.list.find(e=>t.functionId===e.functionId);return a&&(t.templateId=a.templateId,t.templateName=a.templateName,t.sgId=a.sgId,t.sgName=a.sgName),t});g.setValues({...g.values,rows:a.map((e,t)=>{let{...n}=e;return{id:t+1,...n}})})},{labels:N,access:S}=(0,d.J)({queryFn:y,datasetId:u.i.SmsFunctionTemplates}),g=(0,l.TA)({maxAccess:S,validateOnChange:!0,initialValues:{rows:[]},onSubmit:async e=>{await _(e.rows)}}),x=[{component:"textfield",label:N.FunctionId,name:"functionId",props:{readOnly:!0}},{component:"textfield",label:N.Name,name:"functionName",props:{readOnly:!0}},{component:"resourcelookup",label:N.SmsTemplates,name:"templateId",props:{endpointId:i.r.SMSTemplate.snapshot,displayField:"name",valueField:"recordId",columnsInDropDown:[{key:"name",value:"Name"},{key:"reference",value:"Reference"}],mapping:[{from:"recordId",to:"templateId"},{from:"name",to:"templateName"}]}},{component:"resourcecombobox",label:N.securityGrp,name:"sgId",propsReducer(e){let{row:t,props:n}=e;return{...n,readOnly:!(null==t?void 0:t.templateId)}},props:{endpointId:m.y.SecurityGroup.qry,parameters:"_startAt=0&_pageSize=1000",valueField:"recordId",displayField:"name",mapping:[{from:"recordId",to:"sgId"},{from:"name",to:"sgName"}],displayFieldWidth:1}}],_=async e=>{let a={smsFunctionTemplates:e.filter(e=>null!=e.templateId)};await t({extension:i.r.SMSFunctionTemplate.set,record:JSON.stringify(a)}),r.ZP.success(n.Updated)};return(0,a.jsx)(w.Z,{onSave:g.handleSubmit,maxAccess:S,fullSize:!0,children:(0,a.jsx)(f.R,{children:(0,a.jsx)(c.Q,{children:(0,a.jsx)(p._,{onChange:e=>g.setFieldValue("rows",e),name:"rows",value:g.values.rows,error:g.errors.rows,columns:x,allowDelete:!1,allowAddNewLine:!1,maxAccess:S})})})})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=17240)}),_N_E=e.O()}]);