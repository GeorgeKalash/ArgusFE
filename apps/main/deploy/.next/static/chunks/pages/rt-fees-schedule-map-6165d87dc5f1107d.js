(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81111],{1370:function(e,r,d){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rt-fees-schedule-map",function(){return d(75918)}])},75918:function(e,r,d){"use strict";d.r(r),d.d(r,{default:function(){return j}});var n=d(52322),c=d(2784),a=d(62202),s=d(69387),l=d(65950),t=d(71987),o=d(26612),u=d(31389),i=d(33625),I=d(62362),y=d(61802),h=d(19473),m=d(88469),p=d(60218),f=d(48601),x=d(82737),g=d(38449),v=d(80983),S=d(27423),N=d(8661),F=d(53621),_=d(84100);function w(e){let{labels:r,maxAccess:d,recordId:s,record:i}=e,{getRequest:y,postRequest:w}=(0,c.useContext)(l.$),{platformLabels:Z}=(0,c.useContext)(h.l),j=(0,t.E)({endpointId:m.N.FeeScheduleOutwards.page}),{formik:M}=(0,v.c)({initialValues:{recordId:s||null,corId:"",currencyId:"",countryId:"",dispersalMode:"",scheduleId:""},maxAccess:d,validateOnChange:!0,validationSchema:f.Ry({corId:f.Z_().required(),currencyId:f.Z_().required(),scheduleId:f.Z_().required(),dispersalMode:f.Z_().required(),countryId:f.Z_().required()}),onSubmit:async e=>{let r=M.values.currencyId,d=M.values.corId,n=M.values.dispersalMode,c=M.values.countryId;await w({extension:m.N.FeeScheduleOutwards.set,record:JSON.stringify(e)}),r||d||n||c?a.ZP.success(Z.Edited):a.ZP.success(Z.Added),M.setFieldValue("recordId",String(e.corId)+String(e.currencyId)+String(e.countryId)+String(e.dispersalMode)),j()}}),O=!!M.values.recordId||!!s;return(0,c.useEffect)(()=>{!async function(){try{if(i&&i.currencyId&&i.corId&&i.scheduleId&&i.countryId&&s){let e=await y({extension:m.N.FeeScheduleOutwards.get,parameters:"_currencyId=".concat(i.currencyId,"&_corId=").concat(i.corId,"&_dispersalMode=").concat(i.dispersalMode,"&_countryId=").concat(i.countryId)});M.setValues({...e.record,recordId:String(e.record.corId)+String(e.record.currencyId)+String(e.record.countryId)+String(e.record.dispersalMode)})}}catch(e){}}()},[]),(0,n.jsx)(x.Z,{resourceId:o.i.FeeScheduleMap,form:M,maxAccess:d,editMode:O,children:(0,n.jsx)(u.R,{children:(0,n.jsx)(I.Q,{children:(0,n.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(p.ZP,{item:!0,xs:12,children:(0,n.jsx)(S.U,{endpointId:F.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",readOnly:O,label:r.cor,form:M,required:!0,displayFieldWidth:2,valueShow:"corRef",secondValueShow:"corName",maxAccess:d,onChange:(e,r)=>{M.setFieldValue("corId",r?r.recordId:""),M.setFieldValue("corName",r?r.name:""),M.setFieldValue("corRef",r?r.reference:"")},error:M.touched.corId&&!!M.errors.corId})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,children:(0,n.jsx)(N.Z,{endpointId:g.r.Country.qry,name:"countryId",readOnly:O,label:r.country,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:M.values,onChange:(e,r)=>{M.setFieldValue("countryId",r?r.recordId:"")},error:M.touched.countryId&&!!M.errors.countryId,maxAccess:d,required:!0})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,children:(0,n.jsx)(N.Z,{endpointId:g.r.Currency.qry,name:"currencyId",label:r.currency,valueField:"recordId",readOnly:O,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:M.values,required:!0,maxAccess:d,onChange:(e,r)=>{M.setFieldValue("currencyId",(null==r?void 0:r.recordId)||null)},error:M.touched.currencyId&&!!M.errors.currencyId})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,children:(0,n.jsx)(N.Z,{name:"dispersalMode",label:r.dispersalMode,datasetId:_.v.RT_Dispersal_Type,valueField:"key",readOnly:O,displayField:"value",values:M.values,required:!0,onChange:(e,r)=>{M.setFieldValue("dispersalMode",null==r?void 0:r.key)},error:M.touched.dispersalMode&&!!M.errors.dispersalMode})}),(0,n.jsx)(p.ZP,{item:!0,xs:12,children:(0,n.jsx)(N.Z,{endpointId:m.N.FeeSchedule.qry,parameters:"_startAt=0&_pageSize=50&filter=",name:"scheduleId",label:r.schedule,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:M.values,required:!0,readOnly:!1,maxAccess:d,onChange:(e,r)=>{M.setFieldValue("scheduleId",(null==r?void 0:r.recordId)||null)},error:M.touched.scheduleId&&!!M.errors.scheduleId})})]})})})})}var Z=d(36908),j=()=>{let{getRequest:e,postRequest:r}=(0,c.useContext)(l.$),{platformLabels:d}=(0,c.useContext)(h.l),{stack:p}=(0,y.zY)();async function f(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:d=0,_pageSize:n=50,params:c}=r;return{...await e({extension:m.N.FeeScheduleOutwards.page,parameters:"_startAt=".concat(d,"&_pageSize=").concat(n,"&_params=").concat(c||"")}),_startAt:d}}async function x(e){let{filters:r,pagination:d}=e;return f({_startAt:d._startAt||0,params:null==r?void 0:r.params})}let{query:{data:g},labels:v,paginationParameters:S,filterBy:N,refetch:F,invalidate:_,access:j}=(0,t.J)({queryFn:f,extension:m.N.FeeScheduleOutwards.page,datasetId:o.i.FeeScheduleMap,filter:{filterFn:x}}),M=[{field:"corRef",headerName:v.corRef,flex:1},{field:"corName",headerName:v.corName,flex:1},{field:"currencyName",headerName:v.currency,flex:1},{field:"countryName",headerName:v.country,flex:1},{field:"dispersalModeName",headerName:v.dispersalMode,flex:1},{field:"scheduleName",headerName:v.schedule,flex:1}],O=async e=>{await r({extension:m.N.FeeScheduleOutwards.del,record:JSON.stringify(e)}),_(),a.ZP.success(d.Deleted)};function C(e){p({Component:w,props:{labels:v,record:e,maxAccess:j,recordId:e?String(e.corId)+String(e.currencyId)+String(e.countryId)+String(e.dispersalMode)+String(e.functionId):null},width:700,height:460,title:v.fsm})}return(0,n.jsxs)(u.R,{children:[(0,n.jsx)(i.g,{children:(0,n.jsx)(Z.Z,{labels:v,onAdd:()=>{C()},maxAccess:j,reportName:"RTFSO",filterBy:N,hasSearch:!1})}),(0,n.jsx)(I.Q,{children:(0,n.jsx)(s.Z,{name:"table",columns:M,gridData:g,rowId:["recordId"],onEdit:e=>{C(e)},onDelete:O,isLoading:!1,pageSize:50,paginationParameters:S,refetch:F,paginationType:"api",maxAccess:j})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=1370)}),_N_E=e.O()}]);