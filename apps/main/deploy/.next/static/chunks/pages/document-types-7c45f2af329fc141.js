(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9641],{99628:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/document-types",function(){return n(95656)}])},95656:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return Z}});var r=n(52322),t=n(2784),d=n(62202),i=n(69387),l=n(27723),s=n(65950),c=n(38449),o=n(26612),u=n(71987),m=n(31389),h=n(33625),f=n(62362),x=n(60218),p=n(48601),v=n(82737),g=n(8661),y=n(5088),I=n(27423),N=n(66361),F=n(84100),_=n(80983),C=n(19473);function S(e){let{labels:a,recordId:n,maxAccess:i}=e,{platformLabels:l}=(0,t.useContext)(C.l),{getRequest:h,postRequest:S}=(0,t.useContext)(s.$),j=(0,u.E)({endpointId:c.r.DocumentType.qry}),{formik:Z}=(0,_.c)({initialValues:{recordId:null,name:"",reference:"",dgId:"",dgName:"",ilId:"",ilName:"",activeStatusName:"",nraRef:"",nraDescription:"",nraId:""},maxAccess:i,validateOnChange:!0,validationSchema:p.Ry({reference:p.Z_().required(),name:p.Z_().required(),dgName:p.Z_().required(),activeStatusName:p.Z_().required()}),onSubmit:async e=>{let a=await S({extension:c.r.DocumentType.set,record:JSON.stringify(e)});e.recordId||Z.setValues({...e,recordId:a.recordId}),d.ZP.success(e.recordId?l.Edited:l.Added),j()}}),D=!!Z.values.recordId;return(0,t.useEffect)(()=>{!async function(){if(n){let e=await h({extension:c.r.DocumentType.get,parameters:"_recordId=".concat(n)});Z.setValues(e.record)}}()},[]),(0,r.jsx)(v.Z,{resourceId:o.i.DocumentTypes,form:Z,maxAccess:i,editMode:D,children:(0,r.jsx)(m.R,{children:(0,r.jsx)(f.Q,{children:(0,r.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"reference",label:a.reference,value:Z.values.reference,required:!0,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("reference",""),maxAccess:i,editMode:D,maxLength:10,error:Z.touched.reference&&!!Z.errors.reference})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"name",label:a.name,value:Z.values.name,required:!0,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("name",""),maxAccess:i,editMode:D,error:Z.touched.name&&!!Z.errors.name})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{datasetId:F.v.SYSTEM_FUNCTION,name:"dgId",label:a.sysFunction,valueField:"key",displayField:"value",values:Z.values,required:!0,maxAccess:i,onChange:(e,a)=>{Z.setFieldValue("dgId",null==a?void 0:a.key),Z.setFieldValue("dgName",null==a?void 0:a.value)},error:Z.touched.dgName&&!!Z.errors.dgName})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{endpointId:N.x.IntegrationLogic.qry,name:"ilId",label:a.intLogic,valueField:"recordId",displayField:"name",values:Z.values,maxAccess:i,onChange:(e,a)=>{Z.setFieldValue("ilId",null==a?void 0:a.recordId),Z.setFieldValue("ilName",null==a?void 0:a.name)},error:Z.touched.ilId&&!!Z.errors.ilId})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{datasetId:F.v.ACTIVE_STATUS,name:"activeStatus",label:a.activeStatusName,valueField:"key",displayField:"value",values:Z.values,required:!0,maxAccess:i,onChange:(e,a)=>{Z.setFieldValue("activeStatus",null==a?void 0:a.key),Z.setFieldValue("activeStatusName",null==a?void 0:a.value)},error:Z.touched.activeStatusName&&!!Z.errors.activeStatusName})}),(0,r.jsx)(x.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.U,{endpointId:c.r.NumberRange.snapshot,valueField:"reference",displayField:"description",name:"nraRef",label:a.nuRange,form:Z,secondDisplayField:!0,firstValue:Z.values.nraRef,secondValue:Z.values.nraDescription,onChange:(e,a)=>{a?(Z.setFieldValue("nraId",null==a?void 0:a.recordId),Z.setFieldValue("nraRef",null==a?void 0:a.reference),Z.setFieldValue("nraDescription",null==a?void 0:a.description)):(Z.setFieldValue("nraId",null),Z.setFieldValue("nraRef",null),Z.setFieldValue("nraDescription",null))},errorCheck:"nraId",maxAccess:i})})]})})})})}var j=n(61802),Z=()=>{let{getRequest:e,postRequest:a}=(0,t.useContext)(s.$),{stack:n}=(0,j.zY)(),{platformLabels:x}=(0,t.useContext)(C.l);async function p(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:r=50}=a;return{...await e({extension:c.r.DocumentType.qry,parameters:"_dgId=0&_startAt=".concat(n,"&_pageSize=").concat(r)}),_startAt:n}}async function v(a){let{qry:n}=a;return await e({extension:c.r.DocumentType.snapshot,parameters:"_filter=".concat(n)})}let{query:{data:g},labels:y,refetch:I,search:N,clear:F,paginationParameters:_,access:Z}=(0,u.J)({queryFn:p,endpointId:c.r.DocumentType.qry,datasetId:o.i.DocumentTypes,search:{endpointId:c.r.DocumentType.snapshot,searchFn:v}}),D=(0,u.E)({endpointId:c.r.DocumentType.qry}),T=[{field:"reference",headerName:y.reference,flex:1},{field:"name",headerName:y.name,flex:1},{field:"dgName",headerName:y.sysFunction,flex:1},{field:"ilName",headerName:y.intLogic,flex:1},{field:"activeStatusName",headerName:y.status,flex:1},{field:"nraRef",headerName:y.nuRange,flex:1}];function V(e){n({Component:S,props:{labels:y,recordId:e,maxAccess:Z},width:700,height:500,title:y.DocumentType})}let A=async e=>{await a({extension:c.r.DocumentType.del,record:JSON.stringify(e)}),D(),d.ZP.success(x.Deleted)};return(0,r.jsxs)(m.R,{children:[(0,r.jsx)(h.g,{children:(0,r.jsx)(l.Z,{name:"table",onAdd:()=>{V()},maxAccess:Z,onSearch:N,onSearchClear:F,inputSearch:!0,labels:y})}),(0,r.jsx)(f.Q,{children:(0,r.jsx)(i.Z,{columns:T,gridData:g,rowId:["recordId"],onEdit:e=>{V(null==e?void 0:e.recordId)},onDelete:A,isLoading:!1,pageSize:50,maxAccess:Z,refetch:I,paginationParameters:_,paginationType:"api"})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=99628)}),_N_E=e.O()}]);