(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21936],{80946:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pu-sync-trx",function(){return s(59113)}])},59113:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(52322),r=s(2784),n=s(61802),o=s(26612),l=s(60218),p=s(48601),d=s(62202),i=s(65950),g=s(31389),c=s(62362),u=s(80983),y=s(89330),h=s(19473),q=s(84309),S=s(39812),D=s(90587),C=s(27423),M=s(38449),T=s(7121),O=s(54074);function R(e){var t,s;let{_labels:o,access:R}=e,{postRequest:m}=(0,r.useContext)(i.$),{platformLabels:I}=(0,r.useContext)(h.l),{stack:P}=(0,n.zY)(),{formik:f}=(0,u.c)({initialValues:{startDate:null,endDate:null,batchId:0,batchRef:"",batchName:""},maxAccess:R,validateOnChange:!0,validationSchema:p.Ry({startDate:p.hT().required().test(function(e){let{endDate:t}=this.parent;return null===t||e.getTime()<=(null==t?void 0:t.getTime())}),endDate:p.hT().required().test(function(e){let{startDate:t}=this.parent;return null===t||e.getTime()>=(null==t?void 0:t.getTime())})}),onSubmit:async e=>{let t=await m({extension:D.u.MFJobOrder.sync,record:JSON.stringify({...e,startDate:(0,S.OZ)(new Date(e.startDate)),endDate:(0,S.OZ)(new Date(e.endDate))})});P({Component:q.R,props:{recordId:t.recordId},closable:!1}),d.ZP.success(I.Added),f.setValues(e),invalidate()}});return(0,a.jsx)(O.Z,{onSave:f.handleSubmit,actions:[{key:"Rebuild",condition:!0,onClick:()=>f.handleSubmit(),disabled:!1}],isSaved:!1,editMode:!0,children:(0,a.jsx)(g.R,{children:(0,a.jsx)(c.Q,{children:(0,a.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(y.Z,{name:"startDate",label:o.startDate,max:f.values.endDate,value:null===(t=f.values)||void 0===t?void 0:t.startDate,required:!0,maxAccess:R,onChange:f.setFieldValue,onClear:()=>f.setFieldValue("startDate",null),error:f.touched.startDate&&!!f.errors.startDate})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(y.Z,{name:"endDate",label:o.endDate,value:null===(s=f.values)||void 0===s?void 0:s.endDate,min:f.values.startDate,required:!0,onChange:f.setFieldValue,maxAccess:R,onClear:()=>f.setFieldValue("endDate",null),error:f.touched.endDate&&!!f.errors.endDate})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(C.U,{endpointId:M.r.Batch.snapshot,parameters:{_sortBy:"recordId desc",_functionId:T.J.PurchaseInvoice},name:"batchId",label:I.batch,valueField:"reference",displayFieldWidth:2,displayField:"name",valueShow:"batchRef",secondValueShow:"batchName",form:f,onChange:(e,t)=>{f.setFieldValue("batchRef",(null==t?void 0:t.reference)||""),f.setFieldValue("batchName",(null==t?void 0:t.name)||""),f.setFieldValue("batchId",(null==t?void 0:t.recordId)||0)},error:f.touched.batchId&&!!f.errors.batchId})})]})})})})}var m=()=>(0,a.jsx)(n.ut,{datasetId:o.i.SyncPurchaseTrx,labelKey:"syncPurchaseTrx",Component:R})},90587:function(e,t,s){"use strict";s.d(t,{u:function(){return r}});let a="MF.asmx/",r={DesignRawMaterial:{qry2:a+"qryDRM2",qry:a+"qryDRM",set2:a+"set2DRM"},JobOrdersItem:{qry:a+"qryJIT",set2:a+"set2JIT"},IssueOfMaterialsItems:{qry:a+"qryIMI",qry2:a+"qryIMI2"},LaborGroup:{snapshot:a+"snapshotLBG",page:a+"pageLBG",qry:a+"qryLBG",set:a+"setLBG",get:a+"getLBG",del:a+"delLBG"},ProductionLine:{page:a+"pageLIN",qry:a+"qryLIN",qry2:a+"qry2LIN",qry3:a+"qry3LIN",set:a+"setLIN",get:a+"getLIN",del:a+"delLIN"},CostGroup:{page:a+"pageCG",set:a+"setCG",get:a+"getCG",del:a+"delCG",qry:a+"qryCG"},WorkCenter:{page:a+"pageWCT",qry:a+"qryWCT",qry3:a+"qryWCT3",set:a+"setWCT",get:a+"getWCT",del:a+"delWCT",snapshot:a+"snapshotWCT"},Routing:{page:a+"pageRTN",qry:a+"qryRTN",set:a+"setRTN",get:a+"getRTN",del:a+"delRTN",snapshot2:a+"snapshot2RTN",snapshot:a+"snapshotRTN"},Operation:{snapshot:a+"snapshotOPR",qry:a+"qryOPR",page:a+"pageOPR",set:a+"setOPR",get:a+"getOPR",del:a+"delOPR"},Labor:{page:a+"pageLBR",qry:a+"qryLBR",qry2:a+"qry2LBR",set:a+"setLBR",get:a+"getLBR",del:a+"delLBR",snapshot:a+"snapshotLBR"},Machine:{page:a+"pageMAC",qry:a+"qryMAC",set:a+"setMAC",get:a+"getMAC",del:a+"delMAC",snapshot:a+"snapshotMAC"},MachineSpecification:{page:a+"pageMAS",qry:a+"qryMAS",set:a+"setMAS",get:a+"getMAS",del:a+"delMAS"},LeanProductionPlanning:{preview:a+"previewPQ",update:a+"updatePQ",snapshot:a+"snapshotPQ",del:a+"delPQ",cancel:a+"cancelPQ"},MaterialsAdjustment:{generate:a+"generateADJ"},ProductionClass:{page:a+"pageCLS",qry:a+"qryCLS",set:a+"setCLS",get:a+"getCLS",del:a+"delCLS",snapshot:a+"qryCLS"},ProductionStandard:{qry:a+"qrySTD",page:a+"pageSTD",set:a+"setSTD",get:a+"getSTD",del:a+"delSTD"},ProductionClassSemiFinished:{qry:a+"qryCSF",set:a+"setCSF",get:a+"getCSF",del:a+"delCSF",set2:a+"set2CSF"},RoutingSequence:{set2:a+"set2RTS",qry:a+"qryRTS"},Overhead:{qry:a+"qryOVH",set:a+"setOVH",get:a+"getOVH",del:a+"delOVH",page:a+"pageOVH",snapshot:a+"snapshotOVH"},Design:{qry:a+"qryDES",set:a+"setDES",get:a+"getDES",del:a+"delDES",snapshot:a+"snapshotDES",page:a+"pageDES"},MFJobOrder:{pack:a+"packJOB",qry:a+"qryJOB",qry2:a+"qryJOB2",set:a+"setJOB",get:a+"getJOB",get2:a+"get2JOB",del:a+"delJOB",snapshot:a+"snapshotJOB",snapshot2:a+"snapshotJOB2",snapshot3:a+"snapshotJOB3",cancel:a+"cancelJOB",post:a+"postJOB",start:a+"startJOB",stop:a+"stopJOB",wip:a+"wipJOB",sync:a+"syncJOB"},ProductionSheet:{page:a+"pagePST",qry:a+"qryPST",get:a+"getPST",set2:a+"set2PST",get2:a+"get2PST",del:a+"delPST",post:a+"postPST",unpost:a+"unpostPST",snapshot:a+"snapshotPST"},ProductionSheetItem:{qry:a+"qryPSI",set:a+"setPSI",get:a+"getPSI",del:a+"delPSI"},DocumentTypeDefault:{qry:a+"qryDTD",get:a+"getDTD",set:a+"setDTD",del:a+"delDTD",page:a+"pageDTD"},RawMaterialCategory:{qry:a+"qryRMC",get:a+"getRMC",set:a+"setRMC",del:a+"delRMC",page:a+"pageRMC"},WorksheetMaterials:{qry:a+"qryIMA",get:a+"getIMA",pack:a+"get2IMA",set:a+"setIMA",set2:a+"set2IMA",del:a+"delIMA",post:a+"postIMA"},ProductionSheetQueue:{qry:a+"qryPSQ"},Damage:{qry:a+"qryDMG",get:a+"getDMG",set:a+"setDMG",del:a+"delDMG",page:a+"pageDMG",snapshot:a+"snapshotDMG",post:a+"postDMG",get2:a+"get2DMG",set2:a+"set2DMG",preview:a+"previewDMG"},JobCategory:{qry:a+"qryJCA"},JobRouting:{qry:a+"qryJRO",get:a+"getJRO",set:a+"setJRO",set2:a+"set2JRO",del:a+"delJRO",sync:a+"syncJRO",close:a+"closeJRO",reopen:a+"reopenJRO"},Worksheet:{snapshot:a+"snapshotWST",get:a+"getWST",pack:a+"getPackWST",set:a+"setWST",del:a+"delWST",page:a+"pageWST",summary:a+"summaryWST",post:a+"postWST",qry2:a+"qryWST2",draft:a+"draftWST"},JobOverhead:{qry:a+"qryJOH",set2:a+"set2JOH",generate:a+"generateJOH"},JobMaterial:{qry:a+"qryJMA"},JobItemSize:{qry:a+"qryJSZ",set2:a+"set2JSZ"},MFSerial:{qry:a+"qrySRL",qry2:a+"qrySRL2",set2:a+"set2SRL",generate:a+"generateSRL"},SamplePack:{qry:a+"qrySPL",set2:a+"set2SPL"},DamageReturn:{get:a+"getDMR",set:a+"setDMR",del:a+"delDMR",page:a+"pageDMR",snapshot:a+"snapshotDMR",post:a+"postDMR"},ProductionOrder:{get2:a+"get2PO",set2:a+"set2PO",del:a+"delPO",page:a+"pagePO",snapshot:a+"snapshotPO",post:a+"postPO",gen:a+"genPO",close:a+"closePO"},BillOfMaterials:{get:a+"getBMA",qry2:a+"qry2BMA",set:a+"setBMA",del:a+"delBMA",page:a+"pageBMA",snapshot:a+"snapshotBMA"},Component:{get:a+"getBMI",qry:a+"qryBMI",del:a+"delBMI",set:a+"setBMI",set2:a+"set2BMI"},Assembly:{get:a+"getASM",set2:a+"set2ASM",del:a+"delASM",page:a+"pageASM",snapshot:a+"snapshotASM",post:a+"postASM",unpost:a+"unpostASM",generate:a+"genASM"},AssemblyItems:{qry:a+"qryASC"},AssemblyLot:{get:a+"getASL",set:a+"setASL"},AssemblyOverhead:{qry:a+"qryAOH",set2:a+"set2AOH"},MeasurementScheduleMap:{qry:a+"qryMSM",set:a+"setMSM",set2:a+"set2MSM",del:a+"delMSM"},JobCategory:{set:a+"setJCA",get:a+"getJCA",del:a+"delJCA",page:a+"pageJCA",qry:a+"qryJCA"},DesignGroup:{qry:a+"qryDEG",set:a+"setDEG",get:a+"getDEG",del:a+"delDEG",page:a+"pageDEG"},Components:{qry:a+"qryDEM",set2:a+"set2DEM"},DesignFamily:{qry:a+"qryDEF",set:a+"setDEF",get:a+"getDEF",del:a+"delDEF",page:a+"pageDEF"},ProductionShifts:{qry:a+"qrySHI",set:a+"setSHI",get:a+"getSHI",del:a+"delSHI",page:a+"pageSHI"},JobOrderWizard:{set2:a+"set2JOZ",get2:a+"get2JOZ",del:a+"delJOZ",page:a+"pageJOZ",snapshot:a+"snapshotJOZ",post:a+"postJOZ"},JobTransfer:{get2:a+"get2TFR",set2:a+"set2TFR",del:a+"delTFR",page:a+"pageTFR",snapshot:a+"snapshotTFR",post:a+"postTFR",close:a+"closeTFR",reopen:a+"reopenTFR",qry:a+"qryTFR"},JobWorkCenter:{qry:a+"qryJWC",close:a+"closeJWC",reopen:a+"reopenJWC",get:a+"getJWC",snapshot:a+"snapshotJWC",verify:a+"verifyJWC"},WorkCenterConsumption:{page:a+"pageCON",snapshot:a+"snapshotCON",del:a+"delCON",set2:a+"set2CON",get:a+"getCON",post:a+"postCON",unpost:a+"unpostCON",close:a+"closeCON",reopen:a+"reopenCON"},ConsumptionItemView:{qry:a+"qryCOI"},LineItemCapacity:{set2:a+"set2LIT",del:a+"delLIT",qry:a+"qryLIT",page:a+"pageLIT"},CostGroupOverhead:{set2:a+"set2CGV",qry:a+"qryCGV"},IssueOfMaterialDimension:{set:a+"setIMD",qry:a+"qryIMD"},JobOrder:{gen:a+"genORD"},RefreshPoItem:{refresh:a+"refreshPOI"},WorkCenterTransferMap:{qry:a+"qryWCTM",set2:a+"set2WCTM"},BatchWorksheet:{get2:a+"get2BWST",set2:a+"set2BWST",del:a+"delBWST",page:a+"pageBWST",snapshot:a+"snapshotBWST",post:a+"postBWST",gen:a+"genBWST",close:a+"closeBWST",reopen:a+"reopenBWST"},ProductionOrderFromSaleOrder:{gen:a+"generatePOFromSO"},BatchTransfer:{page:a+"pageBTFR",set2:a+"set2BTFR",del:a+"delBTFR",snapshot:a+"snapshotBTFR",get:a+"getBTFR",post:a+"postBTFR",unpost:a+"unpostBTFR"},BatchTransferJob:{qry:a+"qryBTFJ"},Disposal:{page:a+"pageDIS",snapshot:a+"snapshotDIS",get:a+"getDIS",set2:a+"set2DIS",del:a+"delDIS"},DisposalItem:{qry:a+"qryDII"},DisposalSerial:{qry:a+"qryDISRL"},MetalSetting:{page:a+"pageMTS",set:a+"setMTS",get:a+"getMTS",del:a+"delMTS"},DamageReason:{qry:a+"qryDRS",page:a+"pageDRS",set:a+"setDRS",get:a+"getDRS",del:a+"delDRS",snapshot:a+"snapshotDRS"},DamageCategory:{qry:a+"qryDCA",page:a+"pageDCA",set:a+"setDCA",get:a+"getDCA",del:a+"delDCA",snapshot:a+"snapshotDCA"}}},84309:function(e,t,s){"use strict";s.d(t,{R:function(){return B}});var a=s(73235),r=s(52322),n=s(3854),o=s(2784),l=s(82737),p=s(65950),d=s(62362),i=s(31389),g=s(60218),c=s(21581),u=s(38449),y=s(5088),h=s(19473),q=s(21326);function S(){let e=(0,a._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return S=function(){return e},e}function D(){let e=(0,a._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return D=function(){return e},e}function C(){let e=(0,a._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return C=function(){return e},e}function M(){let e=(0,a._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return M=function(){return e},e}function T(){let e=(0,a._)(["\n  container-type: inline-size;\n"]);return T=function(){return e},e}function O(){let e=(0,a._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return O=function(){return e},e}let R=n.ZP.div(S()),m=n.ZP.span(D()),I=n.ZP.span(C()),P=n.ZP.div(M()),f=n.ZP.div(T()),J=n.ZP.div(O());function A(e){let{label:t,topLabel:s,width:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(I,{children:[s,": "]}),(0,r.jsxs)(P,{children:[(0,r.jsx)(J,{style:{width:a}}),(0,r.jsx)(m,{children:t})]})]})}let B=e=>{let{recordId:t,onComplete:s,access:a,window:n}=e,{getRequest:S}=(0,o.useContext)(p.$),{platformLabels:D}=(0,o.useContext)(h.l);(0,q.Z)({title:D.Progress,window:n});let[C,M]=(0,o.useState)({recordId:t,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),T=async()=>(await S({extension:u.r.THD.get,parameters:"_recordId=".concat(t)})).record,O=C.currentPhase===C.phases&&C.completed===C.iterations,m=!!C.status&&C.status<0;(0,o.useEffect)(()=>{s&&(O||m)&&s()},[m,O]),(0,o.useEffect)(()=>{(async()=>{M(await T())})();let e=setInterval(async()=>{let t=await T();M(t);let s=t.currentPhase===t.phases&&t.completed===t.iterations,a=!!t.status&&t.status<0;(t.status&&t.status<0||s||a)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let I=C.phases?C.currentPhase/C.phases*100:0,P=C.iterations?C.completed/C.iterations*100:0;return(0,r.jsx)(l.Z,{form:C,maxAccess:a,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>n.close(),disabled:!O&&!m}],isSaved:!1,children:(0,r.jsx)(i.R,{children:(0,r.jsx)(d.Q,{children:(0,r.jsxs)(R,{children:[(0,r.jsx)(g.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"phase",label:D.Phase,value:C.currentPhaseName,readOnly:!0,maxAccess:a})}),(0,r.jsxs)(f,{children:[(0,r.jsx)(A,{label:"".concat(D.Step," ").concat(C.currentPhase," of ").concat(C.phases,"..."),topLabel:D.currentPhase,width:"".concat(I,"%")}),(0,r.jsx)(A,{label:"".concat(D.Step," ").concat(C.completed," of ").concat(C.iterations,"..."),topLabel:D.Completed,width:"".concat(P,"%")})]}),(0,r.jsx)(c.Z,{name:"log",label:D.Log,value:C.logInfo,rows:4,maxAccess:a,readOnly:!0})]})})})})};B.width=500,B.height=450}},function(e){e.O(0,[3854,49774,92888,40179],function(){return e(e.s=80946)}),_N_E=e.O()}]);