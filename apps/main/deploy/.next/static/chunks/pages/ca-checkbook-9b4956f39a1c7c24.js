(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56858],{94523:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ca-checkbook",function(){return s(96322)}])},96322:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return j}});var r=s(52322),t=s(2784),n=s(62202),c=s(69387),i=s(27723),o=s(65950),l=s(71987),d=s(26612),u=s(31389),h=s(33625),k=s(62362),C=s(61802),x=s(19473),f=s(2119),m=s(60218),N=s(48601),b=s(82737),A=s(5088),g=s(80983),p=s(89330),v=s(91406),I=s(39812),Z=s(8661);function _(e){var a;let{labels:s,maxAccess:c,recordId:i}=e,{getRequest:h,postRequest:C}=(0,t.useContext)(o.$),{platformLabels:_}=(0,t.useContext)(x.l),j=(0,l.E)({endpointId:f.G.CACheckbook.page}),{formik:D}=(0,g.c)({initialValues:{recordId:null,bankAccountId:null,size:"",firstCheckNo:"",lastCheckNo:"",issueDate:null},maxAccess:c,validateOnChange:!0,validationSchema:N.Ry({bankAccountId:N.Z_().required(),size:N.Rx().required(),firstCheckNo:N.Z_().required(),lastCheckNo:N.Z_().required(),issueDate:N.Z_().required()}),onSubmit:async e=>{let a={...e,issueDate:(0,I.ku)(e.issueDate)},s=await C({extension:f.G.CACheckbook.set,record:JSON.stringify(a)});i?n.ZP.success(_.Edited):n.ZP.success(_.Added),D.setValues({...e,recordId:s.recordId}),j()}}),y=!!D.values.recordId;return(0,t.useEffect)(()=>{!async function(){if(i){let e=await h({extension:f.G.CACheckbook.get,parameters:"_recordId=".concat(i)});D.setValues({...e.record,issueDate:(0,I.a1)(e.record.issueDate)})}}()},[]),(0,r.jsx)(b.Z,{resourceId:d.i.Checkbook,form:D,maxAccess:c,editMode:y,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(k.Q,{children:(0,r.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(Z.Z,{endpointId:f.G.CashAccount.qry,parameters:"_type=0",name:"bankAccountId",label:s.bank,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:D.values,required:!0,maxAccess:c,onChange:(e,a)=>{D.setFieldValue("bankAccountId",(null==a?void 0:a.recordId)||null)},error:D.touched.bankAccountId&&!!D.errors.bankAccountId})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(A.Z,{name:"firstCheckNo",label:s.firstCheckNo,value:D.values.firstCheckNo,required:!0,maxAccess:c,onChange:D.handleChange,onClear:()=>D.setFieldValue("firstCheckNo",""),error:D.touched.firstCheckNo&&!!D.errors.firstCheckNo})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(A.Z,{name:"lastCheckNo",label:s.lastCheckNo,value:D.values.lastCheckNo,required:!0,maxAccess:c,onChange:D.handleChange,onClear:()=>D.setFieldValue("lastCheckNo",""),error:D.touched.lastCheckNo&&!!D.errors.lastCheckNo})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{name:"size",required:!0,label:s.size,value:D.values.size,maxAccess:c,onChange:D.handleChange,onClear:()=>D.setFieldValue("size",""),error:D.touched.size&&!!D.errors.size,maxLength:2,decimalScale:0,allowNegative:!1})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsx)(p.Z,{name:"issueDate",label:s.issueDate,value:null===(a=D.values)||void 0===a?void 0:a.issueDate,required:!0,onChange:D.setFieldValue,onClear:()=>D.setFieldValue("issueDate",""),error:D.touched.issueDate&&!!D.errors.issueDate,maxAccess:c})})]})})})})}var j=()=>{let{getRequest:e,postRequest:a}=(0,t.useContext)(o.$),{platformLabels:s}=(0,t.useContext)(x.l),{stack:m}=(0,C.zY)();async function N(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:s=0,_pageSize:r=50}=a;return{...await e({extension:f.G.CACheckbook.page,parameters:"_startAt=".concat(s,"&_pageSize=").concat(r,"&filter=")}),_startAt:s}}let{query:{data:b},labels:A,paginationParameters:g,refetch:p,access:v,invalidate:I}=(0,l.J)({queryFn:N,endpointId:f.G.CACheckbook.page,datasetId:d.i.Checkbook}),Z=[{field:"bankAccountName",headerName:A.bankAccountName,flex:1},{field:"bankAccountRef",headerName:A.bankAccountRef,flex:1},{field:"size",headerName:A.size,flex:1},{field:"firstCheckNo",headerName:A.firstCheckNo,flex:1},{field:"lastCheckNo",headerName:A.lastCheckNo,flex:1},{field:"issueDate",headerName:A.issueDate,flex:1,type:"date"}];function j(e){m({Component:_,props:{labels:A,recordId:e,maxAccess:v},width:500,height:450,title:A.checkbook})}let D=async e=>{await a({extension:f.G.CACheckbook.del,record:JSON.stringify(e)}),I(),n.ZP.success(s.Deleted)};return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(h.g,{children:(0,r.jsx)(i.Z,{onAdd:()=>{j()},maxAccess:v})}),(0,r.jsx)(k.Q,{children:(0,r.jsx)(c.Z,{columns:Z,gridData:b,rowId:["recordId"],onEdit:e=>{j(null==e?void 0:e.recordId)},onDelete:D,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:g,refetch:p,maxAccess:v})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=94523)}),_N_E=e.O()}]);