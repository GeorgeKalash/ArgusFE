(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22200],{7553:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-materials-tfr",function(){return t(76904)}])},76904:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return g}});var i=t(52322),r=t(2784),n=t(62202),l=t(69387),d=t(65950),s=t(71987),f=t(26612),o=t(31389),c=t(33625),u=t(62362),m=t(61802),p=t(19473),x=t(98345),h=t(96026),N=t(36908),y=t(65215),_=t(30586),v=t(7121),g=()=>{var e,a;let{getRequest:t,postRequest:g}=(0,r.useContext)(d.$),{platformLabels:w,userDefaultsData:S}=(0,r.useContext)(p.l),{stack:I}=(0,h.V)(),{stack:T}=(0,m.zY)(),b=parseInt(null==S?void 0:null===(a=S.list)||void 0===a?void 0:null===(e=a.find(e=>"plantId"===e.key))||void 0===e?void 0:e.value);async function D(){var e;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:i=0,_pageSize:r=50,params:n}=a,l=await t({extension:y.$.MaterialsTransfer.page,parameters:"_filter=&_size=30&_startAt=".concat(i,"&_sortBy=recordId desc&_pageSize=").concat(r,"&_params=").concat(n||"")});return l.list=null==l?void 0:null===(e=l.list)||void 0===e?void 0:e.map(e=>({...e,isVerified:(null==e?void 0:e.isVerified)!==null&&(null==e?void 0:e.isVerified)})),{...l,_startAt:i}}async function k(e){let{filters:a,pagination:i}=e;return(null==a?void 0:a.qry)?await t({extension:y.$.MaterialsTransfer.snapshot,parameters:"_filter=".concat(a.qry)}):D({_startAt:i._startAt||0,params:null==a?void 0:a.params})}let{query:{data:A},labels:V,filterBy:q,paginationParameters:E,refetch:M,access:R,invalidate:j}=(0,s.J)({queryFn:D,endpointId:y.$.MaterialsTransfer.page,datasetId:f.i.MaterialsTransfer,filter:{filterFn:k}}),{proxyAction:C}=(0,x.G)({functionId:v.J.MaterialTransfer,action:z}),P=async()=>{await C()},$=[{field:"reference",headerName:V.reference,flex:1},{field:"date",headerName:V.date,flex:1,type:"date"},{field:"fromSiteRef",headerName:V.fromSiteRef,flex:1},{field:"fromSiteName",headerName:V.fromSite,flex:1},{field:"toSiteRef",headerName:V.toSiteRef,flex:1},{field:"toSiteName",headerName:V.toSite,flex:1},{field:"closedDate",headerName:V.shippingDate,flex:1,type:"date"},{field:"receivedDate",headerName:V.receivedDate,flex:1,type:"date"},{field:"pcs",headerName:V.pcs,flex:1,type:"number"},{field:"qty",headerName:V.qty,flex:1,type:"number"},{field:"statusName",headerName:V.status,flex:1},{field:"wipName",headerName:V.wip,flex:1},{field:"printStatusName",headerName:V.print,flex:1},{field:"notes",headerName:V.notes,flex:1},{field:"isVerified",headerName:V.isVerified,type:"checkbox",flex:1}];async function z(e){b||e?T({Component:_.Z,props:{recordId:e}}):I({message:w.noDefaultPlant})}let Z=async e=>{await g({extension:y.$.MaterialsTransfer.del,record:JSON.stringify(e)}),j(),n.ZP.success(w.Deleted)};return(0,i.jsxs)(o.R,{children:[(0,i.jsx)(c.g,{children:(0,i.jsx)(N.Z,{labels:V,onAdd:P,maxAccess:R,reportName:"IVTFR",filterBy:q})}),(0,i.jsx)(u.Q,{children:(0,i.jsx)(l.Z,{name:"table",columns:$,gridData:A,rowId:["recordId"],onEdit:e=>{z(null==e?void 0:e.recordId)},onDelete:Z,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:E,refetch:M,maxAccess:R})})]})}}},function(e){e.O(0,[92515,2494,36908,30586,49774,92888,40179],function(){return e(e.s=7553)}),_N_E=e.O()}]);