(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15884],{50031:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bp-roles",function(){return t(94909)}])},94909:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return L}});var a=t(52322),s=t(2784),n=t(62202),d=t(69387),l=t(27723),i=t(65950),o=t(253),c=t(71987),u=t(26612),g=t(31389),p=t(33625),y=t(62362),R=t(61802),h=t(60218),x=t(48601),m=t(82737),I=t(5088),q=t(21581),f=t(80983),C=t(19473),N=t(8661),P=t(84100);function A(e){let{labels:r,maxAccess:t,recordId:d}=e,{getRequest:l,postRequest:p}=(0,s.useContext)(i.$),{platformLabels:R}=(0,s.useContext)(C.l),A=(0,c.E)({endpointId:o.F.Role.page}),{formik:L}=(0,f.c)({initialValues:{recordId:null,reference:"",name:"",rcId:null,description:"",tpType:""},maxAccess:t,validateOnChange:!0,validationSchema:x.Ry({reference:x.Z_().required(),name:x.Z_().required(),rcId:x.Z_().required(),tpType:x.Z_().required()}),onSubmit:async e=>{let r=await p({extension:o.F.Role.set,record:JSON.stringify(e)});n.ZP.success(e.recordId?R.Edited:R.Added),L.setFieldValue("recordId",r.recordId),A()}}),v=!!L.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(d){let e=await l({extension:o.F.Role.get,parameters:"_recordId=".concat(d)});L.setValues(e.record)}}()},[]),(0,a.jsx)(m.Z,{resourceId:u.i.Roles,form:L,maxAccess:t,editMode:v,children:(0,a.jsx)(g.R,{children:(0,a.jsx)(y.Q,{children:(0,a.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsx)(I.Z,{name:"reference",label:r.reference,value:L.values.reference,required:!0,maxAccess:t,maxLength:"30",onChange:L.handleChange,onClear:()=>L.setFieldValue("reference",""),error:L.touched.reference&&!!L.errors.reference})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsx)(I.Z,{name:"name",label:r.name,value:L.values.name,required:!0,maxAccess:t,onChange:L.handleChange,onClear:()=>L.setFieldValue("name",""),error:L.touched.name&&!!L.errors.name})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsx)(q.Z,{name:"description",label:r.description,value:L.values.description,maxLength:"100",maxAccess:t,onChange:L.handleChange,onClear:()=>L.setFieldValue("description",""),error:L.touched.description&&!!L.errors.description})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsx)(N.Z,{endpointId:o.F.RoleCategory.qry,name:"rcId",label:r.roleCategory,valueField:"recordId",displayField:"name",values:L.values,required:!0,readOnly:v,maxAccess:t,onChange:(e,r)=>{L&&L.setFieldValue("rcId",null==r?void 0:r.recordId)},error:L.touched.rcId&&!!L.errors.rcId})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsx)(N.Z,{datasetId:P.v.THIRD_PARTY_TYPE,name:"tpType",label:r.thirdPartyType,valueField:"key",displayField:"value",required:!0,values:L.values,maxAccess:t,onChange:(e,r)=>{L.setFieldValue("tpType",null==r?void 0:r.key)},error:L.touched.tpType&&!!L.errors.tpType})})]})})})})}var L=()=>{let{getRequest:e,postRequest:r}=(0,s.useContext)(i.$),{platformLabels:t}=(0,s.useContext)(C.l);async function h(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:a=50}=r;return{...await e({extension:o.F.Role.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(a,"&filter=")}),_startAt:t}}let{stack:x}=(0,R.zY)(),{query:{data:m},labels:I,paginationParameters:q,refetch:f,access:N,invalidate:P}=(0,c.J)({queryFn:h,endpointId:o.F.Role.page,datasetId:u.i.Roles}),L=[{field:"reference",headerName:I.reference,flex:1},{field:"name",headerName:I.name,flex:1},{field:"description",headerName:I.description,flex:1}],v=async e=>{await r({extension:o.F.Role.del,record:JSON.stringify(e)}),P(),n.ZP.success(t.Deleted)};function G(e){x({Component:A,props:{labels:I,recordId:e,maxAccess:N},width:500,height:500,title:I.businessPartnerRole})}return(0,a.jsxs)(g.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(l.Z,{onAdd:()=>{G()},maxAccess:N})}),(0,a.jsx)(y.Q,{children:(0,a.jsx)(d.Z,{columns:L,gridData:m,rowId:["recordId"],onEdit:e=>{G(null==e?void 0:e.recordId)},onDelete:v,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:q,refetch:f,maxAccess:N})})]})}},253:function(e,r,t){"use strict";t.d(r,{F:function(){return s}});let a="BP.asmx/",s={LegalStatus:{qry:a+"qryLGS",page:a+"pageLGS",get:a+"getLGS",set:a+"setLGS",del:a+"delLGS"},GroupLegalDocument:{qry:a+"qryGIN",page:a+"pageGIN",get:a+"getGIN",set:a+"setGIN",del:a+"delGIN"},CategoryID:{qry:a+"qryINC",get:a+"getINC",page:a+"pageINC",set:a+"setINC",del:a+"delINC"},Group:{qry:a+"qryGRP",get:a+"getGRP",set:a+"setGRP",del:a+"delGRP"},MasterData:{qry:a+"qryMAS",qry2:a+"qryMAS2",get:a+"getMAS",set:a+"setMAS",del:a+"delMAS",snapshot:a+"snapshotMAS"},RelationTypes:{qry:a+"qryRLT",page:a+"pageRLT",get:a+"getRLT",set:a+"setRLT",del:a+"delRLT"},Groups:{qry:a+"qryGRP",page:a+"pageGRP",get:a+"getGRP",set:a+"setGRP",del:a+"delGRP"},MasterIDNum:{qry:a+"qryMIN",page:a+"pageMIN",get:a+"getMIN",set:a+"setMIN",del:a+"delMIN"},Relation:{qry:a+"qryREL",page:a+"pageREL",get:a+"getREL",set:a+"setREL",del:a+"delREL"},BPAddress:{qry:a+"qryADD",page:a+"pageADD",get:a+"getADD",set:a+"setADD",del:a+"delADD"},RoleCategory:{qry:a+"qryROC",get:a+"getROC",page:a+"pageROC",set:a+"setROC",del:a+"delROC"},Role:{qry:a+"qryROL",page:a+"pageROL",get:a+"getROL",set:a+"setROL",del:a+"delROL"},MasterDataRole:{qry:a+"qryMRO",del:a+"delMRO",get:a+"getMRO",set:a+"setMRO"},MasterSales:{get:a+"getSAL",set:a+"setSAL"},MasterPurchase:{get:a+"getPUR",set:a+"setPUR"},Bank:{qry:a+"qryBNK",get:a+"getBNK",set:a+"setBNK",del:a+"delBNK"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=50031)}),_N_E=e.O()}]);