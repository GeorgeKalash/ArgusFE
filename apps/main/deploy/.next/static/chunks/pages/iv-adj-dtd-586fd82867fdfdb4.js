(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71245],{5778:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-adj-dtd",function(){return n(97315)}])},97315:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var a=n(52322),d=n(2784),r=n(62202),s=n(69387),l=n(27723),i=n(65950),c=n(61802),o=n(71987),u=n(26612),m=n(31389),p=n(33625),f=n(62362),I=n(19473),x=n(65215),h=n(7121),y=n(60218),v=n(48601),D=n(82737),g=n(80983),j=n(38449),_=n(8661),A=n(19689);function T(e){var t;let{labels:n,maxAccess:s,recordId:l,window:c}=e,{platformLabels:p}=(0,d.useContext)(I.l),{getRequest:T,postRequest:N}=(0,d.useContext)(i.$),Z=(0,o.E)({endpointId:x.$.DocumentTypeDefaults.page}),{formik:k}=(0,g.c)({initialValues:{recordId:l,functionId:h.J.MaterialAdjustment,dtId:null,siteId:null,plantId:null,disableSKULookup:!1},maxAccess:s,validationSchema:v.Ry({dtId:v.Z_().required()}),onSubmit:async e=>{await N({extension:x.$.DocumentTypeDefaults.set,record:JSON.stringify(e)}),l?r.ZP.success(p.Edited):(k.setFieldValue("recordId",k.values.dtId),r.ZP.success(p.Added)),Z(),c.close()}}),w=!!k.values.recordId;return(0,d.useEffect)(()=>{!async function(){if(l){let e=await T({extension:x.$.DocumentTypeDefaults.get,parameters:"_dtId=".concat(l)});k.setValues({...e.record,recordId:e.record.dtId})}}()},[]),(0,a.jsx)(D.Z,{resourceId:u.i.MaterialTransferDTD,form:k,maxAccess:s,editMode:w,functionId:h.J.MaterialAdjustment,children:(0,a.jsx)(m.R,{children:(0,a.jsx)(f.Q,{children:(0,a.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(_.Z,{endpointId:j.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(h.J.MaterialAdjustment),name:"dtId",required:!0,label:n.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],readOnly:w,values:k.values,maxAccess:s,onChange:(e,t)=>{k.setFieldValue("dtId",null==t?void 0:t.recordId)},error:k.touched.dtId&&!!k.errors.dtId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(_.Z,{endpointId:x.$.Site.qry,name:"siteId",label:n.site,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:k.values,maxAccess:s,onChange:(e,t)=>{k.setFieldValue("siteId",null==t?void 0:t.recordId)},error:k.touched.siteId&&!!k.errors.siteId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(_.Z,{endpointId:j.r.Plant.qry,name:"plantId",label:n.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Ref"},{key:"name",value:"Name"}],values:k.values,maxAccess:s,onChange:(e,t)=>{k.setFieldValue("plantId",null==t?void 0:t.recordId)},error:k.touched.plantId&&!!k.errors.plantId})}),(0,a.jsx)(y.ZP,{item:!0,xs:12,children:(0,a.jsx)(A.Z,{name:"disableSKULookup",value:null===(t=k.values)||void 0===t?void 0:t.disableSKULookup,onChange:e=>k.setFieldValue("disableSKULookup",e.target.checked),label:n.dsl,maxAccess:s})})]})})})})}var N=()=>{let{getRequest:e,postRequest:t}=(0,d.useContext)(i.$),{platformLabels:n}=(0,d.useContext)(I.l),{stack:y}=(0,c.zY)();async function v(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50}=t;return{...await e({extension:x.$.DocumentTypeDefaults.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&_filter=&_functionId=").concat(h.J.MaterialAdjustment)}),_startAt:n}}let{query:{data:D},labels:g,invalidate:j,refetch:_,access:A,paginationParameters:N}=(0,o.J)({queryFn:v,endpointId:x.$.DocumentTypeDefaults.page,datasetId:u.i.MaterialTransferDTD}),Z=[{field:"dtName",headerName:g.documentType,flex:1},{field:"siteName",headerName:g.site,flex:1},{field:"plantName",headerName:g.plant,flex:1}],k=async e=>{await t({extension:x.$.DocumentTypeDefaults.del,record:JSON.stringify(e)}),j(),r.ZP.success(n.Deleted)};function w(e){y({Component:T,props:{labels:g,recordId:null==e?void 0:e.dtId,maxAccess:A},width:600,height:500,title:g.MaterialAdjustmentDTD})}return(0,a.jsxs)(m.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(l.Z,{onAdd:()=>{w()},maxAccess:A})}),(0,a.jsx)(f.Q,{children:(0,a.jsx)(s.Z,{columns:Z,gridData:D,rowId:["dtId"],onEdit:e=>{w(e)},onDelete:k,isLoading:!1,pageSize:50,refetch:_,paginationType:"api",paginationParameters:N,maxAccess:A})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=5778)}),_N_E=e.O()}]);