(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83450],{54257:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-post-draft-invoice",function(){return a(89638)}])},89638:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var n=a(52322),r=a(2784),i=a(71987),s=a(65950),l=a(69387),o=a(62202),c=a(61802),d=a(26612),f=a(31389),p=a(33625),u=a(62362),m=a(19473),h=a(22341),x=a(36908),N=a(43014),_=a(23925),g=a(44258),y=a(96577),w=a.n(y),I=a(23361),D=()=>{let{postRequest:e,getRequest:t}=(0,r.useContext)(s.$),{platformLabels:y}=(0,r.useContext)(m.l),{stack:D}=(0,c.zY)(),{query:{data:P},filterBy:v,refetch:j,labels:A,access:C,invalidate:S,paginationParameters:Z}=(0,i.J)({queryFn:b,endpointId:h.P.DraftInvoice.page2,datasetId:d.i.DraftSerialsInvoices,DatasetIdAccess:d.i.PostDraftSerials,filter:{filterFn:k}});async function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:n=50,params:r=[]}=e;return{...await t({extension:h.P.DraftInvoice.page2,parameters:"_startAt=".concat(a,"&_pageSize=").concat(n,"&_sortBy=recordId desc&_params=").concat(r,"&filter=")}),_startAt:a}}async function k(e){let{filters:a,pagination:n}=e;return a.qry?await t({extension:h.P.DraftInvoice.snapshot,parameters:"_filter=".concat(a.qry,"&_status=1&_spId=0")}):b({_startAt:n._startAt||0,params:null==a?void 0:a.params})}let E=[{field:"plantName",headerName:A.plant,flex:1},{field:"reference",headerName:A.reference,flex:1},{field:"date",headerName:A.date,flex:1,type:"date"},{field:"clientRef",headerName:A.clientRef,flex:1},{field:"clientName",headerName:A.clientName,flex:1},{field:"pcs",headerName:A.pcs,flex:1,type:"number"},{field:"weight",headerName:A.weight,flex:1,type:"number"},{field:"amount",headerName:A.net,flex:1,type:"number"},{field:"spName",headerName:A.salesPerson,flex:1},{field:"description",headerName:A.description,flex:1},{field:"statusName",headerName:A.status,flex:1},{field:"wipName",headerName:A.wip,flex:1},{field:"post",flex:.55,headerName:A.post,cellRenderer:e=>{if(2===e.data.wip)return(0,n.jsx)(_.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:(0,n.jsx)(g.Z,{size:"small",onClick:()=>q(e.data),children:(0,n.jsx)(w(),{src:a(63933).default.src,width:18,height:18,alt:"post.png"})})})}}];async function T(e){let{recordId:t}=e;D({Component:N.Z,props:{labels:A,access:C,recordId:t,invalidate:S},title:A.draftSerInv})}let q=e=>{D({Component:I.Z,props:{DialogText:A.postDialogText,okButtonAction:()=>z(e),fullScreen:!1,close:!0},width:450,height:140,title:y.Confirmation})},z=async t=>{await e({extension:h.P.DraftInvoice.post,record:JSON.stringify(t)})&&(o.ZP.success(y.Posted),S())};return(0,n.jsxs)(f.R,{children:[(0,n.jsx)(p.g,{children:(0,n.jsx)(x.Z,{maxAccess:C,reportName:"SADFT2",filterBy:v})}),(0,n.jsx)(u.Q,{children:(0,n.jsx)(l.Z,{name:"table",columns:E,gridData:P,rowId:["recordId"],refetch:j,onEdit:T,isLoading:!1,pageSize:50,maxAccess:C,paginationParameters:Z,paginationType:"api"})})]})}}},function(e){e.O(0,[92515,2494,36908,23352,43014,49774,92888,40179],function(){return e(e.s=54257)}),_N_E=e.O()}]);