(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18670],{96913:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ct-default",function(){return a(16078)}])},16078:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var l=a(52322),i=a(61802),n=a(26612),r=a(2784),c=a(60218),d=a(48601),s=a(62202),u=a(19473),o=a(65950),_=a(38449),p=a(1251),m=a(31389),v=a(62362),h=a(27423),y=a(8661),f=a(91406),x=a(58867),V=a(80983),F=a(24074),C=a(54074),I=e=>{let{_labels:t,access:a}=e,{getRequest:i,postRequest:n}=(0,r.useContext)(o.$),{platformLabels:I,defaultsData:j,updateDefaults:b}=(0,r.useContext)(u.l),g=["ct-nra-individual","ct-nra-corporate","ct_cash_sales_ratetype_id","ct_cash_purchase_ratetype_id","ct_credit_sales_ratetype_id","ct_credit_purchase_ratetype_id","ct_credit_eval_ratetype_id","ct_minOtp_CIVAmount","otp-expiry-time","ct-client-trial-days","ct_min_client_CIVAmount","ct_default_civ_client","ct_default_civ_clientRef","ct_default_civ_clientName"],{formik:A}=(0,V.c)({maxAccess:a,validateOnChange:!0,validationSchema:d.Ry({"otp-expiry-time":d.Rx().min(30).max(120).nullable(!0),"ct-client-trial-days":d.Rx().min(0).max(180).nullable(!0)}),initialValues:{"ct-nra-individual":null,"ct-nra-corporate":null,"otp-expiry-time":null,ct_cash_sales_ratetype_id:null,ct_cash_purchase_ratetype_id:null,ct_credit_sales_ratetype_id:null,ct_credit_purchase_ratetype_id:null,ct_credit_eval_ratetype_id:null,ct_minOtp_CIVAmount:null,"ct-client-trial-days":null,ct_min_client_CIVAmount:null,ct_default_civ_client:null,ct_default_civ_clientRef:null,ct_default_civ_clientName:null},onSubmit:async e=>{let t=Object.entries(e).filter(e=>{let[t]=e;return g.includes(t)}).map(e=>{let[t,a]=e;return{key:t,value:a}});await n({extension:F.u.Defaults.set2,record:JSON.stringify({sysDefaults:t})}),b(t),s.ZP.success(I.Updated)}});(0,r.useEffect)(()=>{Z()},[j]);let Z=()=>{let e={};j.list.forEach(t=>{if(g.includes(t.key)){let a=t.value?parseInt(t.value,10):null;A.values[t.key]!==a&&(e[t.key]=a,A.setFieldValue(t.key,a))}if(["ct_default_civ_clientName","ct_default_civ_clientRef"].includes(t.key)){let a=t.value||null;A.values[t.key]!==a&&(e[t.key]=a,A.setFieldValue(t.key,a))}}),["ct-nra-individual","ct-nra-corporate"].forEach(t=>{e[t]&&N(e[t],t)})},N=(e,t)=>{i({extension:_.r.NumberRange.get,parameters:"_filter=&_recordId=".concat(e)}).then(e=>{"ct-nra-individual"===t&&(A.setFieldValue("ct-nra-individual",e.record.recordId),A.setFieldValue("ct-nra-individual-ref",e.record.reference),A.setFieldValue("ct-nra-individual-description",e.record.description)),"ct-nra-corporate"===t&&(A.setFieldValue("ct-nra-corporate",e.record.recordId),A.setFieldValue("ct-nra-corporate-ref",e.record.reference),A.setFieldValue("ct-nra-corporate-description",e.record.description))})};return(0,l.jsx)(C.Z,{onSave:A.handleSubmit,maxAccess:a,children:(0,l.jsx)(m.R,{children:(0,l.jsx)(v.Q,{children:(0,l.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.U,{endpointId:_.r.NumberRange.snapshot,form:A,valueField:"reference",displayField:"description",name:"ct-nra-individual-ref",firstValue:A.values["ct-nra-individual-ref"],label:t["ct-nra-individual"],secondDisplayField:!0,secondValue:A.values["ct-nra-individual-description"],onChange:(e,t)=>{A.setFieldValue("ct-nra-individual",(null==t?void 0:t.recordId)||null),A.setFieldValue("ct-nra-individual-ref",(null==t?void 0:t.reference)||""),A.setFieldValue("ct-nra-individual-description",(null==t?void 0:t.description)||"")},error:A.touched["ct-nra-individual"]&&!!A.errors["ct-nra-individual"]})}),(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.U,{endpointId:_.r.NumberRange.snapshot,name:"ct-nra-corporate-ref",form:A,label:t["ct-nra-corporate"],valueField:"reference",displayField:"description",secondDisplayField:!0,firstValue:A.values["ct-nra-corporate-ref"],secondValue:A.values["ct-nra-corporate-description"],onChange:(e,t)=>{A.setFieldValue("ct-nra-corporate",(null==t?void 0:t.recordId)||null),A.setFieldValue("ct-nra-corporate-ref",(null==t?void 0:t.reference)||""),A.setFieldValue("ct-nra-corporate-description",(null==t?void 0:t.description)||"")},error:A.touched["ct-nra-corporate"]&&!!A.errors["ct-nra-corporate"]})}),[{name:"ct_cash_sales_ratetype_id",label:t.cash_sales_ratetype},{name:"ct_cash_purchase_ratetype_id",label:t.cash_purchase_ratetype},{name:"ct_credit_sales_ratetype_id",label:t.credit_sales_ratetype},{name:"ct_credit_purchase_ratetype_id",label:t.credit_purchase_ratetype},{name:"ct_credit_eval_ratetype_id",label:t.credit_eval_ratetype}].map(e=>(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(y.Z,{endpointId:p.q.RateType.qry,values:A.values,name:e.name,label:e.label,valueField:"recordId",displayField:"name",maxAccess:a,onChange:(t,a)=>{A.setFieldValue(e.name,(null==a?void 0:a.recordId)||null)},error:A.touched[e.name]&&!!A.errors[e.name]})},e.name)),(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{name:"otp-expiry-time",label:t["otp-expiry-time"],value:A.values["otp-expiry-time"],decimalScale:0,maxAccess:a,onChange:e=>A.setFieldValue("otp-expiry-time",e.target.value),onClear:()=>A.setFieldValue("otp-expiry-time",null),error:A.touched["otp-expiry-time"]&&!!A.errors["otp-expiry-time"]})}),(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{name:"ct-client-trial-days",label:t.phone,value:A.values["ct-client-trial-days"],maxAccess:a,onChange:e=>A.setFieldValue("ct-client-trial-days",e.target.value),onClear:()=>A.setFieldValue("ct-client-trial-days",null),error:A.touched["ct-client-trial-days"]&&!!A.errors["ct-client-trial-days"],allowNegative:!1})})]})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{name:"ct_minOtp_CIVAmount",label:t.minimumOtp,value:A.values.ct_minOtp_CIVAmount,maxAccess:a,onChange:e=>A.setFieldValue("ct_minOtp_CIVAmount",e.target.value),onClear:()=>A.setFieldValue("ct_minOtp_CIVAmount",""),error:A.touched.ct_minOtp_CIVAmount&&!!A.errors.ct_minOtp_CIVAmount})}),(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{name:"ct_min_client_CIVAmount",label:t.minMandatory,value:A.values.ct_min_client_CIVAmount,maxAccess:a,onChange:e=>A.setFieldValue("ct_min_client_CIVAmount",e.target.value),onClear:()=>A.setFieldValue("ct_min_client_CIVAmount",""),allowNegative:!1})}),(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.U,{endpointId:x.u.CtClientIndividual.snapshot,parameters:{_category:1},name:"ct_default_civ_client",label:t.client,valueField:"reference",displayField:"name",displayFieldWidth:2,valueShow:"ct_default_civ_clientRef",secondValueShow:"ct_default_civ_clientName",form:A,onChange:(e,t)=>{A.setFieldValue("ct_default_civ_client",t?t.recordId:""),A.setFieldValue("ct_default_civ_clientRef",t?t.reference:""),A.setFieldValue("ct_default_civ_clientName",t?t.name:"")},maxAccess:a})})]})})]})})})})},j=()=>(0,l.jsx)(i.ut,{datasetId:n.i.CtDefaults,labelKey:"rmd",Component:I,height:500,width:850})}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=96913)}),_N_E=e.O()}]);