(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38359],{79090:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-attendance-day",function(){return a(61591)}])},61591:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var n=a(52322),i=a(2784),r=a(87559),o=a(28879),c=a.n(o),l=a(69387),d=a(65950),s=a(26612),u=a(71987),m=a(31389),f=a(33625),p=a(62362),v=a(36908),y=a(6035),h=a(52190),_=a(61802),N=a(7121),x=()=>{let{getRequest:e}=(0,i.useContext)(d.$),{stack:t}=(0,_.zY)(),{query:{data:a},labels:o,filterBy:x,paginationParameters:g,access:b,refetch:A}=(0,u.J)({queryFn:w,endpointId:y.f.AttendanceDay.qry,datasetId:s.i.AttendanceDay,filter:{filterFn:C}});async function C(e){let{filters:t,pagination:a}=e;return w({_startAt:a._startAt||0,params:null==t?void 0:t.params})}let T=(0,r.Z)(new Date,"yyyyMMdd");async function w(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:n=30,params:i}=t,r=await e({extension:y.f.AttendanceDay.qry,parameters:"_filter=&_size=".concat(n,"&_startAt=").concat(a,"&_params=").concat(i||"6|".concat(T,"^7|").concat(T),"&_sortBy=dayId")});if(r&&(null==r?void 0:r.list)){var l;r.list=null==r?void 0:null===(l=r.list)||void 0===l?void 0:l.map(e=>{var t,a,n;return{...e,employee:'<div style="text-align:center;">\n             <b>'.concat(e.employeeName,"</b><br>\n             <b>").concat(c()(e.dayId).format("DD/MM/YYYY"),"</b><br>\n             ").concat(e.departmentName,"<br>\n             ").concat(e.positionName,"<br>\n             ").concat(e.branchName,"\n           </div>"),timeVariations:'<div style="text-align:center;">\n                   '.concat(null==e?void 0:null===(t=e.variationsList)||void 0===t?void 0:t.map(e=>{if(e.timeCodeName){let t=20===e.timeCode||41===e.timeCode?e.timeCodeName:"".concat(e.timeCodeName,": ").concat(e.duration," ").concat(o.minutes);return'<a href="#" data-id="'.concat(e.variationId,'" \n                                   class="approval-link" \n                                   style="color: black; text-decoration: underline;">\n                                   ').concat(t,"\n                                 </a>")}return""}).join("<br>"),"\n                 </div>"),effectiveTime:null==e?void 0:null===(n=e.scheduleList)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:a.effectiveTime}})}return{...r,_startAt:a}}let D=e=>{let{value:t}=e;return(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:t},onClick:e=>{"A"===e.target.tagName&&e.target.classList.contains("approval-link")&&(e.preventDefault(),k(e.target.getAttribute("data-id"),N.J.TimeVariation))},style:{cursor:"pointer"}})},k=(e,a)=>{t({Component:h.Z,props:{recordId:e,functionId:a}})},I=[{field:"employee",headerName:o.employeeName,flex:1,cellRenderer:D,autoHeight:!0},{field:"schedule",headerName:o.schedule,flex:1,centered:!0},{field:"attendance",headerName:o.attendance,flex:1},{field:"effectiveTime",headerName:o.effectiveTime,flex:1},{field:"timeVariations",headerName:o.timeVariations,flex:1,autoHeight:!0,cellRenderer:D}];return(0,n.jsxs)(m.R,{children:[(0,n.jsx)(f.g,{children:(0,n.jsx)(v.Z,{maxAccess:b,reportName:"TAAD",filterBy:x,hasSearch:!1})}),(0,n.jsx)(p.Q,{children:(0,n.jsx)(l.Z,{columns:I,gridData:a,rowId:["recordId"],paginationParameters:g,paginationType:"api",refetch:A,pageSize:50,maxAccess:b})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=79090)}),_N_E=e.O()}]);