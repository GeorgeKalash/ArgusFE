(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30097],{40851:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/number-range",function(){return r(82285)}])},82285:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return N}});var n=r(52322),t=r(2784),s=r(62202),d=r(69387),l=r(27723),i=r(65950),c=r(38449),u=r(71987),o=r(26612),x=r(31389),m=r(33625),h=r(62362),g=r(60218),f=r(48601),p=r(82737),v=r(89330),b=r(39812),Z=r(5088),C=r(80983),D=r(19473),R=r(19689);function j(e){var a,r;let{labels:d,maxAccess:l,recordId:m}=e,[j,_]=(0,t.useState)(!1),{platformLabels:N}=(0,t.useContext)(D.l),[y,q]=(0,t.useState)(!!m),{getRequest:A,postRequest:P}=(0,t.useContext)(i.$),V=(0,u.E)({endpointId:c.r.NumberRange.qry}),{formik:w}=(0,C.c)({initialValues:{recordId:null,reference:"",description:"",min:"",max:"",current:0,external:!1,dateRange:!1,startDate:"",endDate:""},maxAccess:l,validateOnChange:!0,validationSchema:f.Ry({reference:f.Z_().required(),description:f.Z_().required(),min:f.Z_().required(),max:f.Z_().required(),current:f.Z_().required(),startDate:j?f.Z_().required():f.hT().nullable(),endDate:j?f.Z_().required():f.hT().nullable()}),onSubmit:async e=>{let a={...e},r=e.recordId;j&&(a.startDate=(0,b.ku)(a.startDate),a.endDate=(0,b.ku)(a.endDate));let n=await P({extension:c.r.NumberRange.set,record:JSON.stringify(a)});r?s.ZP.success(N.Edited):(s.ZP.success(N.Added),w.setValues({...e,recordId:n.recordId})),q(!0),V()}});return(0,t.useEffect)(()=>{!async function(){if(m){let e=await A({extension:c.r.NumberRange.get,parameters:"_recordId=".concat(m)});e.record&&(e.record.startDate=(0,b.a1)(e.record.startDate),e.record.endDate=(0,b.a1)(e.record.endDate),w.setValues(e.record),_(e.record.dateRange))}}()},[]),(0,n.jsx)(p.Z,{resourceId:o.i.NumberRange,form:w,maxAccess:l,editMode:y,children:(0,n.jsx)(x.R,{children:(0,n.jsx)(h.Q,{children:(0,n.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"reference",label:d.reference,value:w.values.reference,required:!0,maxLength:"10",rows:2,maxAccess:l,onChange:w.handleChange,onClear:()=>w.setFieldValue("reference",""),error:w.touched.reference&&!!w.errors.reference})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"description",label:d.description,value:w.values.description,rows:2,required:!0,maxAccess:l,onChange:w.handleChange,onClear:()=>w.setFieldValue("description",""),error:w.touched.description&&!!w.errors.description})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"min",label:d.min,value:w.values.min,required:!0,type:"",maxLength:"15",maxAccess:l,onChange:w.handleChange,onClear:()=>w.setFieldValue("min",""),error:w.touched.max&&!!w.errors.min})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"max",label:d.max,value:w.values.max,required:!0,type:"",maxLength:"15",maxAccess:l,onChange:w.handleChange,onClear:()=>w.setFieldValue("max",""),error:w.touched.max&&!!w.errors.max})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{name:"current",label:d.current,value:w.values.current,required:!0,type:"number",maxAccess:l,onChange:w.handleChange,onClear:()=>w.setFieldValue("current",""),error:w.touched.current&&!!w.errors.current})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{name:"external",value:null===(a=w.values)||void 0===a?void 0:a.external,onChange:e=>w.setFieldValue("external",e.target.checked),label:d.external,maxAccess:l})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{name:"dateRange",value:null===(r=w.values)||void 0===r?void 0:r.dateRange,onChange:(e,a)=>{w.setFieldValue("dateRange",a),w.setFieldValue("startDate",null),w.setFieldValue("endDate",null),_(a),w.handleChange(e)},label:d.dateRange,maxAccess:l})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,sx:{opacity:w.values.dateRange?1:.4,pointerEvents:w.values.dateRange?"auto":"none"},children:(0,n.jsx)(v.Z,{name:"startDate",label:d.startDate,value:w.values.startDate,required:w.values.dateRange&&!0,readOnly:!w.values.dateRange,onChange:w.setFieldValue,maxAccess:l,onClear:()=>w.setFieldValue("startDate",""),error:!!j&&w.touched.startDate&&!!w.errors.startDate})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,sx:{opacity:w.values.dateRange?1:.4,pointerEvents:w.values.dateRange?"auto":"none"},children:(0,n.jsx)(v.Z,{name:"endDate",label:d.endDate,value:w.values.endDate,required:w.values.dateRange&&!0,readOnly:!w.values.dateRange,onChange:w.setFieldValue,maxAccess:l,onClear:()=>w.setFieldValue("endDate",""),error:!!j&&w.touched.endDate&&!!w.errors.endDate})})]})})})})}var _=r(61802),N=()=>{let{getRequest:e,postRequest:a}=(0,t.useContext)(i.$),{platformLabels:r}=(0,t.useContext)(D.l),{stack:g}=(0,_.zY)();async function f(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:n=50}=a;return{...await e({extension:c.r.NumberRange.qry,parameters:"_startAt=".concat(r,"&_pageSize=").concat(n,"&_filter=")}),_startAt:r}}let{query:{data:p},labels:v,paginationParameters:b,refetch:Z,access:C,search:R,clear:N}=(0,u.J)({queryFn:f,endpointId:c.r.NumberRange.qry,datasetId:o.i.NumberRange,search:{endpointId:c.r.NumberRange.snapshot,searchFn:y}});async function y(a){let{qry:r}=a;return await e({extension:c.r.NumberRange.snapshot,parameters:"_filter=".concat(r)})}let q=(0,u.E)({endpointId:c.r.NumberRange.qry}),A=[{field:"reference",headerName:v.reference,flex:1,editable:!1},{field:"description",headerName:v.description,flex:1,editable:!1},{field:"min",headerName:v.min,flex:1,editable:!1},{field:"max",headerName:v.max,flex:1,editable:!1},{field:"current",headerName:v.current,flex:1,editable:!1}];function P(e){g({Component:j,props:{labels:v,recordId:e,maxAccess:C},width:700,height:620,title:v.numberRange})}let V=async e=>{await a({extension:c.r.NumberRange.del,record:JSON.stringify(e)}),q(),s.ZP.success(r.Deleted)};return(0,n.jsxs)(x.R,{children:[(0,n.jsx)(m.g,{children:(0,n.jsx)(l.Z,{onAdd:()=>{P()},maxAccess:C,onSearch:R,onSearchClear:N,labels:v,inputSearch:!0})}),(0,n.jsx)(h.Q,{children:(0,n.jsx)(d.Z,{columns:A,gridData:p,rowId:["recordId"],onEdit:e=>{P(null==e?void 0:e.recordId)},onDelete:V,isLoading:!1,pageSize:50,refetch:Z,paginationParameters:b,paginationType:"api",maxAccess:C})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=40851)}),_N_E=e.O()}]);