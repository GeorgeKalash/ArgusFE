(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29540],{97176:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/release-codes",function(){return r(80345)}])},80345:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return j}});var a=r(52322),s=r(2784),t=r(62202),c=r(69387),d=r(27723),o=r(65950),i=r(71987),l=r(26612),u=r(68676),h=r(33625),f=r(31389),x=r(62362),m=r(19473),C=r(61802),p=r(60218),g=r(80983),y=r(48601),_=r(82737),w=r(5088);function I(e){let{labels:n,maxAccess:r,recordId:c}=e,{platformLabels:d}=(0,s.useContext)(m.l),{getRequest:h,postRequest:C}=(0,s.useContext)(o.$),I=(0,i.E)({endpointId:u.y.ReleaseCode.page}),{formik:j}=(0,g.c)({initialValues:{recordId:c||null,reference:"",name:""},validateOnChange:!0,validationSchema:y.Ry({reference:y.Z_().required(),name:y.Z_().required()}),onSubmit:async e=>{await C({extension:u.y.ReleaseCode.set,record:JSON.stringify(e)}).then(n=>{e.recordId?t.ZP.success(d.Edited):(t.ZP.success(d.Added),j.setFieldValue("recordId",n.recordId)),I()})}}),Z=!!j.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(c){let e=await h({extension:u.y.ReleaseCode.get,parameters:"_recordId=".concat(c)});j.setValues(e.record)}}()},[]),(0,a.jsx)(_.Z,{resourceId:l.i.ReleaseCodes,form:j,maxAccess:r,editMode:Z,children:(0,a.jsx)(f.R,{children:(0,a.jsx)(x.Q,{children:(0,a.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{name:"reference",label:n.reference,readOnly:Z,value:j.values.reference,required:!0,maxAccess:r,maxLength:"10",onChange:j.handleChange,onClear:()=>j.setFieldValue("reference",""),error:j.touched.reference&&!!j.errors.reference})}),(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{name:"name",label:n.name,maxLength:"30",value:j.values.name,required:!0,rows:2,maxAccess:r,onChange:j.handleChange,onClear:()=>j.setFieldValue("name",""),error:j.touched.name&&!!j.errors.name})})]})})})})}var j=()=>{let{getRequest:e,postRequest:n}=(0,s.useContext)(o.$),{platformLabels:r}=(0,s.useContext)(m.l),{stack:p}=(0,C.zY)();async function g(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50}=n;return await e({extension:u.y.ReleaseCode.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a)})}async function y(n){let{qry:r}=n;return await e({extension:u.y.ReleaseCode.snapshot,parameters:"_filter=".concat(r)})}let{query:{data:_},search:w,clear:j,labels:Z,invalidate:R,refetch:v,paginationParameters:A,access:E}=(0,i.J)({queryFn:g,endpointId:u.y.ReleaseCode.page,datasetId:l.i.ReleaseCodes,search:{searchFn:y}}),N=[{field:"reference",headerName:Z.reference,flex:1},{field:"name",headerName:Z.name,flex:1}];function P(e){p({Component:I,props:{labels:Z,recordId:e,maxAccess:E},width:500,height:300,title:Z.releaseCode})}let S=async e=>{await n({extension:u.y.ReleaseCode.del,record:JSON.stringify(e)}),R(),t.ZP.success(r.Deleted)};return(0,a.jsxs)(f.R,{children:[(0,a.jsx)(h.g,{children:(0,a.jsx)(d.Z,{onAdd:()=>{P()},maxAccess:E,onSearch:w,onSearchClear:j,labels:Z,inputSearch:!0})}),(0,a.jsx)(x.Q,{children:(0,a.jsx)(c.Z,{columns:N,gridData:_,rowId:["recordId"],onEdit:e=>{P(null==e?void 0:e.recordId)},onDelete:S,isLoading:!1,pageSize:50,refetch:v,paginationType:"api",paginationParameters:A,maxAccess:E})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=97176)}),_N_E=e.O()}]);