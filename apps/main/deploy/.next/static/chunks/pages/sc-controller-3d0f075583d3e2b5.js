(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55514],{23087:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sc-controller",function(){return n(32791)}])},32791:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(52322),o=n(2784),l=n(62202),s=n(69387),a=n(27723),d=n(65950),c=n(71987),i=n(26612),u=n(31389),p=n(33625),C=n(62362),I=n(61802),g=n(19473),m=n(76426),S=n(60218),x=n(48601),y=n(82737),h=n(5088),D=n(80983),f=n(8661),T=n(38449);function q(e){let{labels:t,maxAccess:n,recordId:s}=e,{getRequest:a,postRequest:p}=(0,o.useContext)(d.$),{platformLabels:I}=(0,o.useContext)(g.l),q=(0,c.E)({endpointId:m.x.StockCountController.page}),{formik:R}=(0,D.c)({initialValues:{recordId:null,plantId:null,name:""},maxAccess:n,validateOnChange:!0,validationSchema:x.Ry({name:x.Z_().required(),plantId:x.Z_().required()}),onSubmit:async e=>{let t=await p({extension:m.x.StockCountController.set,record:JSON.stringify(e)});e.recordId?l.ZP.success(I.Edited):(l.ZP.success(I.Added),R.setFieldValue("recordId",t.recordId)),q()}}),k=!!R.values.recordId;return(0,o.useEffect)(()=>{!async function(){if(s){let e=await a({extension:m.x.StockCountController.get,parameters:"_recordId=".concat(s)});R.setValues(e.record)}}()},[]),(0,r.jsx)(y.Z,{resourceId:i.i.StockCountControllers,form:R,maxAccess:n,editMode:k,children:(0,r.jsx)(u.R,{children:(0,r.jsx)(C.Q,{children:(0,r.jsxs)(S.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{name:"name",label:t.name,value:R.values.name,required:!0,maxAccess:n,onChange:R.handleChange,onClear:()=>R.setFieldValue("name",""),error:R.touched.name&&!!R.errors.name})}),(0,r.jsx)(S.ZP,{item:!0,xs:12,children:(0,r.jsx)(f.Z,{endpointId:T.r.Plant.qry,name:"plantId",required:!0,label:t.plant,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:R.values,maxAccess:n,onChange:(e,t)=>{R.setFieldValue("plantId",t?null==t?void 0:t.recordId:"")},error:R.touched.plantId&&!!R.errors.plantId})})]})})})})}var R=()=>{let{getRequest:e,postRequest:t}=(0,o.useContext)(d.$),{platformLabels:n}=(0,o.useContext)(g.l),{stack:S}=(0,I.zY)();async function x(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:r=50}=t;return{...await e({extension:m.x.StockCountController.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(r,"&filter=")}),_startAt:n}}let{query:{data:y},labels:h,paginationParameters:D,refetch:f,access:T,invalidate:R}=(0,c.J)({queryFn:x,endpointId:m.x.StockCountController.page,datasetId:i.i.StockCountControllers}),k=[{field:"name",headerName:h.name,flex:1},{field:"plantName",headerName:h.plant,flex:1}];function L(e){S({Component:q,props:{labels:h,recordId:e,maxAccess:T},width:600,height:300,title:h.stockCountController})}let _=async e=>{try{await t({extension:m.x.StockCountController.del,record:JSON.stringify(e)}),R(),l.ZP.success(n.Deleted)}catch(e){}};return(0,r.jsxs)(u.R,{children:[(0,r.jsx)(p.g,{children:(0,r.jsx)(a.Z,{onAdd:()=>{L()},maxAccess:T})}),(0,r.jsx)(C.Q,{children:(0,r.jsx)(s.Z,{columns:k,gridData:y,rowId:["recordId"],onEdit:e=>{L(null==e?void 0:e.recordId)},onDelete:_,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:D,refetch:f,maxAccess:T})})]})}},76426:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});let r="SC.asmx/",o={LabelTemplate:{qry:r+"qryLBT",set:r+"setLBT",get:r+"getLBT",del:r+"delLBT"},Item:{qry:r+"qryLBI",set:r+"setLBI",get:r+"getLBI",del:r+"delLBI"},Sites:{qry:r+"qrySIT",set:r+"setSIT",set2:r+"set2SIT",get:r+"getSIT",del:r+"delSIT",reopen:r+"reopenSIT",end:r+"endSIT"},Controller:{qry:r+"qryCRL"},StockCountControllerTab:{qry:r+"qryPHY",set2:r+"set2PHY",set:r+"setPHY",get:r+"getPHY",del:r+"delPHY"},StockCount:{page:r+"pageHDR",post:r+"postHDR",unpost:r+"unpostHDR",qry:r+"qryHDR",get:r+"getHDR",set:r+"setHDR",del:r+"delHDR",close:r+"closeHDR",reopen:r+"reopenHDR",snapshot:r+"snapshotHDR"},StockCountController:{page:r+"pageCRL",set:r+"setCRL",get:r+"getCRL",del:r+"delCRL"},DocumentTypeDefaults:{qry:r+"qryDTD",set:r+"setDTD",get:r+"getDTD",del:r+"delDTD"},StockCountItem:{qry:r+"qryITM",set:r+"setITM",get:r+"getITM",del:r+"delITM"},StockCountSerialSum:{qry:r+"qrySRS"},StockCountItemDetail:{qry:r+"qryITD",set:r+"setITD",get:r+"getITD",del:r+"delITD",set2:r+"set2ITD"},StockCountSerialDetail:{set2:r+"set2SRL",qry:r+"qrySRL",append:r+"appendSRL",del:r+"delSRL",batch:r+"batchSRL"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=23087)}),_N_E=e.O()}]);