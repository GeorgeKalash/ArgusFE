(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43683],{84849:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-cash-accounts",function(){return a(87238)}])},87238:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return R}});var r=a(52322),c=a(2784),t=a(62202),l=a(69387),o=a(27723),s=a(65950),d=a(2119),u=a(26612),i=a(71987),m=a(31389),h=a(33625),f=a(62362),p=a(60218),x=a(48601),I=a(82737),y=a(5088),v=a(8661),C=a(27423),A=a(38449),g=a(84100),N=a(25870),F=a(74898),k=a(80983),j=a(19473);function Z(e){let{labels:n,recordId:a,maxAccess:l}=e,{getRequest:o,postRequest:h}=(0,c.useContext)(s.$),{platformLabels:Z}=(0,c.useContext)(j.l),_=(0,i.E)({endpointId:d.G.CashAccount.qry}),{formik:R}=(0,k.c)({initialValues:{recordId:a||null,name:"",reference:"",accountNo:"",currencyId:null,plantId:null,activeStatus:null,groupId:null,accountName:"",accountRef:"",accountId:null,type:2},validateOnChange:!0,validationSchema:x.Ry({name:x.Z_().required(),reference:x.Z_().required(),activeStatus:x.Z_().required()}),onSubmit:async e=>{let n=e.recordId;e.accountNo=e.reference;let a=await h({extension:d.G.CashBox.set,record:JSON.stringify(e)});n?t.ZP.success(Z.Edited):(t.ZP.success(Z.Added),R.setValues({...e,recordId:a.recordId})),_()}}),S=!!R.values.recordId;(0,c.useEffect)(()=>{!async function(){if(a){let e=await o({extension:d.G.CashAccount.get,parameters:"_recordId=".concat(a)});R.setValues(e.record)}}()},[]);let V=[{key:"Integration Account",condition:!0,onClick:"onClickGIA",masterSource:F.N.CashAccount,disabled:!S},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!S},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!S}];return(0,r.jsx)(I.Z,{resourceId:u.i.CashAccounts,form:R,maxAccess:l,editMode:S,actions:V,children:(0,r.jsx)(m.R,{children:(0,r.jsx)(f.Q,{children:(0,r.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"name",label:n.name,value:R.values.name,required:!0,onChange:R.handleChange,onClear:()=>R.setFieldValue("name",""),maxLength:"40",maxAccess:l,error:R.touched.name&&!!R.errors.name})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"reference",label:n.reference,value:R.values.reference,required:!0,onChange:R.handleChange,onClear:()=>R.setFieldValue("reference",""),maxLength:"10",maxAccess:l,error:R.touched.reference&&!!R.errors.reference})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{endpointId:A.r.Currency.qry,name:"currencyId",label:n.currency,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:R.values,maxAccess:l,onClear:()=>R.setFieldValue("currencyId",""),onChange:(e,n)=>{R&&R.setFieldValue("currencyId",null==n?void 0:n.recordId)},error:R.touched.currencyId&&!!R.errors.currencyId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{endpointId:A.r.Plant.qry,name:"plantId",label:n.plant,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:R.values,maxAccess:l,onClear:()=>R.setFieldValue("plantId",""),onChange:(e,n)=>{R&&R.setFieldValue("plantId",null==n?void 0:n.recordId)},error:R.touched.plantId&&!!R.errors.plantId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{datasetId:g.v.ACTIVE_STATUS,name:"activeStatus",label:n.activeStatus,required:!0,valueField:"key",displayField:"value",values:R.values,onClear:()=>R.setFieldValue("activeStatus",""),onChange:(e,n)=>{R.setFieldValue("activeStatus",null==n?void 0:n.key)},error:R.touched.activeStatus&&!!R.errors.activeStatus})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(v.Z,{endpointId:d.G.CbCashGroup.qry,name:"groupId",label:n.groupId,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:R.values,maxAccess:l,onClear:()=>R.setFieldValue("groupId",""),onChange:(e,n)=>{R&&R.setFieldValue("groupId",null==n?void 0:n.recordId)},error:R.touched.groupId&&!!R.errors.groupId})}),(0,r.jsx)(p.ZP,{item:!0,xs:12,children:(0,r.jsx)(C.U,{endpointId:N.H.Account.snapshot,valueField:"reference",displayField:"name",name:"accountRef",label:n.account,form:R,secondDisplayField:!0,firstValue:R.values.accountRef,secondValue:R.values.accountName,errorCheck:"accountId",maxAccess:l,onChange:(e,n)=>{R.setFieldValue("accountId",(null==n?void 0:n.recordId)||""),R.setFieldValue("accountRef",(null==n?void 0:n.reference)||""),R.setFieldValue("accountName",(null==n?void 0:n.name)||"")}})})]})})})})}var _=a(61802),R=()=>{let{getRequest:e,postRequest:n}=(0,c.useContext)(s.$),{platformLabels:a}=(0,c.useContext)(j.l),{stack:p}=(0,_.zY)();async function x(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:r=50}=n;return{...await e({extension:d.G.CashAccount.qry,parameters:"_startAt=".concat(a,"&_pageSize=").concat(r,"&_type=2")}),_startAt:a}}let{query:{data:I},labels:y,refetch:v,search:C,clear:A,invalidate:g,access:N}=(0,i.J)({queryFn:x,endpointId:d.G.CashAccount.qry,datasetId:u.i.CashAccounts,search:{endpointId:d.G.CashAccount.snapshot,searchFn:F}});async function F(n){let{qry:a}=n;return await e({extension:d.G.CashAccount.snapshot,parameters:"_filter=".concat(a,"&_type=2")})}let k=[{field:"name",headerName:y.name,flex:1},{field:"reference",headerName:y.reference,flex:1},{field:"currencyName",headerName:y.currency,flex:1},{field:"plantName",headerName:y.plant,flex:1},{field:"statusName",headerName:y.status,flex:1},{field:"accountRef",headerName:y.accountRef,flex:1},{field:"accountName",headerName:y.accountName,flex:1},{field:"groupName",headerName:y.groupId,flex:1}],R=async e=>{await n({extension:d.G.CashAccount.del,record:JSON.stringify(e)}),g(),t.ZP.success(a.Deleted)};function S(e){p({Component:Z,props:{labels:y,recordId:e||null,maxAccess:N},width:600,height:500,title:y.cashAccount})}return(0,r.jsxs)(m.R,{children:[(0,r.jsx)(h.g,{children:(0,r.jsx)(o.Z,{onAdd:()=>{S()},maxAccess:N,onSearch:C,labels:y,onSearchClear:A,inputSearch:!0,previewReport:u.i.CashAccounts})}),(0,r.jsx)(f.Q,{children:(0,r.jsx)(l.Z,{columns:k,gridData:I,rowId:["recordId"],onEdit:e=>{S(null==e?void 0:e.recordId)},onDelete:R,isLoading:!1,pageSize:50,maxAccess:N,refetch:v,paginationType:"client"})})]})}},74898:function(e,n,a){"use strict";a.d(n,{N:function(){return r}});let r={Global:0,AccountGroup:10,Account:11,CashAccountGroup:20,CashAccount:21,ItemGroup:30,Item:31,ItemCategory:32,Site:33,ExpenseType:41,CostType:42,ProductionOverhead:51,TaxCode:12,PayrollGLGroup:61,PayrollEntitlementDeduction:62,AssetGroup:71,AssetClass:72}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=84849)}),_N_E=e.O()}]);