(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78755],{36230:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/release-indicators",function(){return r(77653)}])},77653:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return R}});var n=r(52322),d=r(2784),i=r(62202),s=r(69387),l=r(27723),t=r(65950),c=r(68676),o=r(71987),u=r(26612),h=r(31389),x=r(33625),m=r(62362),g=r(60218),f=r(48601),y=r(82737),I=r(8661),p=r(5088),v=r(84100),Z=r(80983),_=r(19473),b=r(19689);function j(e){var a;let{labels:r,maxAccess:s,recordId:l,window:x}=e,{getRequest:j,postRequest:C}=(0,d.useContext)(t.$),{platformLabels:R}=(0,d.useContext)(_.l),A=(0,o.E)({endpointId:c.y.ReleaseIndicator.page}),{formik:N}=(0,Z.c)({initialValues:{recordId:null,name:"",reference:"",changeability:"",isReleased:!1},maxAccess:s,validateOnChange:!0,validationSchema:f.Ry({name:f.Z_().required(),reference:f.Z_().required(),recordId:f.Z_().required(),changeability:f.Z_().required()}),onSubmit:async e=>{let a=await C({extension:c.y.ReleaseIndicator.set,record:JSON.stringify(e)});e.recordId?i.ZP.success(R.Edited):(i.ZP.success(R.Added),N.setFieldValue("recordId",a.recordId)),x.close(),A()}}),w=!!l||0===l;return(0,d.useEffect)(()=>{!async function(){try{if(l){let e=await j({extension:c.y.ReleaseIndicator.get,parameters:"_recordId=".concat(l)});N.setValues(e.record)}}catch(e){}}()},[]),(0,n.jsx)(y.Z,{resourceId:u.i.ReleaseIndicators,form:N,maxAccess:s,editMode:w,children:(0,n.jsx)(h.R,{children:(0,n.jsx)(m.Q,{children:(0,n.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{name:"reference",label:r.reference,readOnly:w,value:N.values.reference,required:!0,maxAccess:s,maxLength:"1",onChange:N.handleChange,onClear:()=>N.setFieldValue("reference",""),error:N.touched.reference&&!!N.errors.reference})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{name:"name",label:r.name,readOnly:w,value:N.values.name,required:!0,maxAccess:s,maxLength:"30",onChange:N.handleChange,onClear:()=>N.setFieldValue("name",""),error:N.touched.name&&!!N.errors.name})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{name:"recordId",label:r.id,readOnly:w,value:N.values.recordId,required:!0,maxAccess:s,maxLength:"30",onChange:N.handleChange,onClear:()=>N.setFieldValue("recordId",""),error:N.touched.recordId&&!!N.errors.recordId})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(I.Z,{readOnly:!1,datasetId:v.v.DR_CHANGEABILITY,name:"changeability",label:r.changeability,valueField:"key",displayField:"value",values:N.values,required:!0,maxAccess:s,onChange:(e,a)=>{N&&N.setFieldValue("changeability",null==a?void 0:a.key)},error:N.touched.changeability&&!!N.errors.changeability})}),(0,n.jsx)(g.ZP,{item:!0,xs:12,children:(0,n.jsx)(b.Z,{name:"isReleased",value:null===(a=N.values)||void 0===a?void 0:a.isReleased,onChange:e=>N.setFieldValue("isReleased",e.target.checked),label:r.isReleased,maxAccess:s})})]})})})})}var C=r(61802),R=()=>{let{stack:e}=(0,C.zY)(),{getRequest:a,postRequest:r}=(0,d.useContext)(t.$);async function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:n=50}=e;return{...await a({extension:c.y.ReleaseIndicator.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(n,"&filter=")}),_startAt:r}}let{query:{data:f},labels:y,paginationParameters:I,refetch:p,access:v}=(0,o.J)({queryFn:g,endpointId:c.y.ReleaseIndicator.page,datasetId:u.i.ReleaseIndicators}),Z=(0,o.E)({endpointId:c.y.ReleaseIndicator.page}),_=[{field:"reference",headerName:y.reference,flex:1},{field:"name",headerName:y.name,flex:1},{field:"recordId",headerName:y.id,flex:1,align:"right"},{field:"changeabilityName",headerName:y.changeability,flex:1}];function b(a){e({Component:j,props:{labels:y,recordId:a,maxAccess:v},width:600,height:420,title:y.releaseIndicator})}let R=async e=>{await r({extension:c.y.ReleaseIndicator.del,record:JSON.stringify(e)}),Z(),i.ZP.success("Record Deleted Successfully")};return(0,n.jsxs)(h.R,{children:[(0,n.jsxs)(x.g,{children:[(0,n.jsx)(l.Z,{onAdd:()=>{b()},maxAccess:v})," "]}),(0,n.jsx)(m.Q,{children:(0,n.jsx)(s.Z,{columns:_,gridData:f,rowId:["recordId"],onEdit:e=>{b(null==e?void 0:e.recordId)},onDelete:R,isLoading:!1,pageSize:50,paginationType:"api",paginationParameters:I,refetch:p,maxAccess:v})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=36230)}),_N_E=e.O()}]);