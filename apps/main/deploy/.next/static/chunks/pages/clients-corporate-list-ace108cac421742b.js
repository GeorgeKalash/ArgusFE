(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61473],{78781:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients-corporate-list",function(){return l(50632)}])},50632:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return k}});var t=l(52322),r=l(2784),n=l(69387),d=l(65950),i=l(27723),s=l(26612),o=l(58867),c=l(61802),u=l(60218),y=l(5088),x=l(13073),m=l(75991),p=l(89330),g=l(61084),h=l(24074),v=l(82737),f=l(48601),I=l(62202),C=l(39812),R=l(8661),N=l(38449),P=l(253),q=l(84100),j=l(91406),Z=l(31389),D=l(62362),b=l(19473),w=l(19689),A=l(80983);let O=e=>{var a,l,n,i,c,O,F,S,V,k,L;let{recordId:M,_labels:_,maxAccess:G,setErrorMessage:T}=e,{getRequest:E,postRequest:B}=(0,r.useContext)(d.$),[z,K]=(0,r.useState)(!0),{platformLabels:U}=(0,r.useContext)(b.l),[$,J]=(0,r.useState)({}),{formik:Q}=(0,A.c)({initialValues:{clientId:null,lgsId:null,industry:null,activityId:null,capital:null,trading:!1,outward:!1,inward:!1,category:null,reference:null,name:null,flName:null,keyword:null,nationalityId:null,expiryDate:null,addressId:null,category:null,createdDate:null,status:-1,addressId:null,plantId:null,cellPhone:null,cellPhoneRepeat:null,otp:null},maxAccess:$.maxAccess,validateOnChange:!0,validationSchema:f.Ry({...$.validate,reference:z&&f.Z_().required(),expiryDate:f.hT().required(),name1:f.Z_().required(),nationalityId:f.Rx().required(),cellPhone:f.Z_().required(),capital:f.Z_().required(),lgsId:f.Rx().required(),industry:f.Z_().required(),activityId:f.Rx().required()}),onSubmit:async e=>{await W(e)}}),W=async e=>{let a=new Date,l={clientId:0,lgsId:e.lgsId,industry:e.industry,activityId:e.activityId,capital:e.capital,trading:e.trading,outward:e.outward,inward:e.inward},t={category:2,reference:e.reference,name:e.name1,flName:e.flName,nationalityId:e.nationalityId,status:e.status,plantId:Q.values.plantId,cellPhone:e.cellPhone,oldReference:e.oldReference,otp:e.otpVerified,ExpiryDate:(0,C.ku)(e.expiryDate),createdDate:(0,C.ku)(a)},r={name:e.name,countryId:e.countryId,stateId:e.stateId,cityId:e.cityId,cityName:e.cityName,street1:e.street1,street2:e.street2,email1:e.email1,email2:e.email2,phone:e.phone,phone2:e.phone2,phone3:e.phone3,addressId:e.addressId,postalCode:e.postalCode,cityDistrictId:e.cityDistrictId,bldgNo:e.bldgNo,unitNo:e.unitNo,subNo:e.subNo,poBox:e.poBox},n=await B({extension:o.u.ClientCorporate.set2,record:JSON.stringify({clientMaster:t,clientCorporate:l,address:r})});I.ZP.success(U.Submit),await X(n.recordId)};async function X(e){if(e){let a=await E({extension:o.u.ClientCorporate.get,parameters:"_clientId=".concat(e)}),l=null==a?void 0:a.record;Q.setValues({...l.clientCorporate,...l.addressView,...l.clientMaster,expiryDate:l.clientMaster.expiryDate?(0,C.a1)(l.clientMaster.expiryDate):null,createdDate:l.clientMaster.createdDate?(0,C.a1)(l.clientMaster.createdDate):null,name1:l.clientMaster.name})}}let Y=!!Q.values.recordId;(0,r.useEffect)(()=>{X(M)},[M]);let H=[{key:"Client Relation",condition:!0,onClick:"onClientRelation",disabled:!Y},{key:"Add Client Relation",condition:!0,onClick:"onAddClientRelation",disabled:!Y},{key:"Client Balance",condition:!0,onClick:"onClientBalance",disabled:!Y}];return(0,t.jsx)(v.Z,{actions:H,form:Q,resourceId:s.i.ClientCorporate,maxAccess:G,recordId:M,disabledSubmit:Y,editMode:Y,setErrorMessage:T,children:(0,t.jsx)(Z.R,{children:(0,t.jsx)(D.Q,{children:(0,t.jsxs)(u.ZP,{container:!0,xs:12,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,xs:6,children:(0,t.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(g.B,{name:"reference",label:_.reference,value:null===(a=Q.values)||void 0===a?void 0:a.reference,endpointId:h.u.Defaults.get,param:"ct-nra-corporate",setReferenceRequired:K,onChange:Q.handleChange,maxLength:"10",editMode:Y,onClear:()=>Q.setFieldValue("reference",""),error:Q.touched.reference&&!!Q.errors.reference,helperText:Q.touched.reference&&Q.errors.reference,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{name:"expiryDate",label:_.expiryDate,value:null===(l=Q.values)||void 0===l?void 0:l.expiryDate,readOnly:Y,required:!0,onChange:Q.setFieldValue,onClear:()=>Q.setFieldValue("expiryDate",""),disabledDate:!Y&&"<",error:Q.touched.expiryDate&&!!Q.errors.expiryDate,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(u.ZP,{container:!0,xs:12,children:(0,t.jsx)(m.Z,{title:_.title,children:(0,t.jsxs)(u.ZP,{container:!0,xs:12,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(y.Z,{name:"cellPhone",phone:!0,label:_.cellPhone,value:null===(n=Q.values)||void 0===n?void 0:n.cellPhone,readOnly:Y,required:!0,onChange:Q.handleChange,maxLength:"15",onClear:()=>Q.setFieldValue("cellPhone",""),error:Q.touched.cellPhone&&!!Q.errors.cellPhone,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(y.Z,{name:"name1",label:_.name,value:null===(i=Q.values)||void 0===i?void 0:i.name1,required:!0,onChange:Q.handleChange,readOnly:Y,onClear:()=>Q.setFieldValue("name1",""),error:Q.touched.name1&&!!Q.errors.name1,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(y.Z,{name:"flName",label:_.ForeignName,value:null===(c=Q.values)||void 0===c?void 0:c.flName,onChange:Q.handleChange,maxLength:"10",readOnly:Y,onClear:()=>Q.setFieldValue("flName",""),error:Q.touched.flName&&!!Q.errors.flName,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(R.Z,{endpointId:N.r.Country.qry,name:"nationalityId",label:_.nationality,valueField:"recordId",displayField:["reference","name","flName"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],readOnly:Y,values:Q.values,required:!0,onChange:(e,a)=>{a?(Q.setFieldValue("nationalityId",null==a?void 0:a.recordId),Q.setFieldValue("nationalityName",null==a?void 0:a.name)):(Q.setFieldValue("nationalityId",""),Q.setFieldValue("nationalityName",""))},error:Q.touched.nationalityId&&!!Q.errors.nationalityId,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(R.Z,{name:"status",label:_.status,datasetId:q.v.ACTIVE_STATUS,values:Q.values,valueField:"key",displayField:"value",readOnly:!0,onChange:(e,a)=>{Q.setFieldValue("status",null==a?void 0:a.key)},error:Q.touched.status&&!!Q.errors.status,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(y.Z,{name:"oldReference",label:_.oldReference,value:null===(O=Q.values)||void 0===O?void 0:O.oldReference,readOnly:Y,onChange:Q.handleChange,maxLength:"10",onClear:()=>Q.setFieldValue("oldReference",""),error:Q.touched.oldReference&&!!Q.errors.oldReference,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(R.Z,{endpointId:P.F.LegalStatus.qry,parameters:"_pagesize=30&_startAt=0&_filter",name:"lgsId",label:_.legalStatus,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:Y,values:Q.values,required:!0,onChange:(e,a)=>{a?Q.setFieldValue("lgsId",null==a?void 0:a.recordId):Q.setFieldValue("lgsId","")},error:Q.touched.lgsId&&!!Q.errors.lgsId,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(R.Z,{datasetId:q.v.INDUSTRY,name:"industry",label:_.industry,valueField:"key",displayField:"value",readOnly:Y,values:Q.values,required:!0,onChange:(e,a)=>{a?Q.setFieldValue("industry",null==a?void 0:a.key):Q.setFieldValue("industry","")},error:Q.touched.industry&&!!Q.errors.industry,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(R.Z,{endpointId:h.u.Activity.qry,name:"activityId",label:_.activity,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:Y,values:Q.values,required:!0,onChange:(e,a)=>{a?Q.setFieldValue("activityId",null==a?void 0:a.recordId):Q.setFieldValue("activityId","")},error:Q.touched.activityId&&!!Q.errors.activityId,maxAccess:G})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,sx:{position:"relative",width:"100%"},children:(0,t.jsx)(j.Z,{name:"capital",label:_.capital,value:null===(F=Q.values)||void 0===F?void 0:F.capital,readOnly:Y,required:!0,onChange:Q.handleChange,onClear:()=>Q.setFieldValue("capital",""),maxAccess:G,error:Q.touched.capital&&!!Q.errors.capital})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(w.Z,{name:"trading",value:null===(S=Q.values)||void 0===S?void 0:S.trading,onChange:e=>Q.setFieldValue("trading",e.target.checked),label:null==_?void 0:_.trading,maxAccess:G,disabled:Y})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(w.Z,{name:"inward",value:null===(V=Q.values)||void 0===V?void 0:V.inward,onChange:e=>Q.setFieldValue("inward",e.target.checked),label:null==_?void 0:_.inward,maxAccess:G,disabled:Y})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(w.Z,{name:"outward",value:null===(k=Q.values)||void 0===k?void 0:k.outward,onChange:e=>Q.setFieldValue("outward",e.target.checked),label:null==_?void 0:_.outward,maxAccess:G,disabled:Y})})]})})})})]})}),(0,t.jsxs)(u.ZP,{item:!0,xs:6,children:[(0,t.jsx)(m.Z,{title:_.address,children:(0,t.jsx)(x.Z,{labels:_,access:G,addressValidation:Q,datasetId:s.i.ADDClientCorporate,setFormik:J,readOnly:Y})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(w.Z,{name:"OTPVerified",value:null===(L=Q.values)||void 0===L?void 0:L.OTPVerified,onChange:e=>Q.setFieldValue("OTPVerified",e.target.checked),label:null==_?void 0:_.OTPVerified,maxAccess:G,disabled:!0,readOnly:Y})})]})]})})})})};O.width=1100;var F=l(71987),S=l(33625),V=l(96026),k=()=>{var e,a;let{stack:l}=(0,c.zY)(),{getRequest:u}=(0,r.useContext)(d.$),{platformLabels:y,userDefaultsData:x}=(0,r.useContext)(b.l),{stack:m}=(0,V.V)(),[p,g]=(0,r.useState)(null),h=parseInt(null==x?void 0:null===(a=x.list)||void 0===a?void 0:null===(e=a.find(e=>{let{key:a}=e;return"plantId"===a}))||void 0===e?void 0:e.value),{query:{data:v},filterBy:f,clearFilter:I,labels:C,access:R}=(0,F.J)({datasetId:s.i.ClientCorporate,filter:{endpointId:o.u.ClientCorporate.snapshot,filterFn:N,default:{category:2}}});async function N(e){let{filters:a}=e;return a.qry&&await u({extension:o.u.ClientCorporate.snapshot,parameters:"_filter=".concat(a.qry,"&_category=2")})}let P=[{field:"reference",headerName:C.reference,flex:1,editable:!1},{field:"name",headerName:null==C?void 0:C.name,flex:1,editable:!1},{field:"cellPhone",headerName:C.cellPhone,flex:1,editable:!1},{field:"nationalityName",headerName:C.nationality,flex:1,editable:!1},{field:"statusName",headerName:C.status,flex:1,editable:!1},{field:"createdDate",headerName:C.createdDate,flex:1,editable:!1,type:"date"},{field:"expiryDate",headerName:C.expiryDate,flex:1,editable:!1,type:"date"}],q=async()=>{""!==h?j(""):m({message:y.noDefaultPlant})};function j(e){l({Component:O,props:{_labels:C,maxAccess:R,editMode:p,recordId:e||null},title:C.clientCorporate})}return(0,t.jsxs)(Z.R,{children:[(0,t.jsx)(S.g,{children:(0,t.jsx)(i.Z,{onAdd:q,maxAccess:R,onSearch:e=>{f("qry",e)},onSearchClear:()=>{I("qry")},labels:C,inputSearch:!0})}),(0,t.jsx)(D.Q,{children:(0,t.jsx)(n.Z,{columns:P,gridData:v||{list:[]},rowId:["recordId"],isLoading:!1,maxAccess:R,onEdit:e=>{g(!0),j(e.recordId)},pageSize:50,paginationType:"client"})})]})}},253:function(e,a,l){"use strict";l.d(a,{F:function(){return r}});let t="BP.asmx/",r={LegalStatus:{qry:t+"qryLGS",page:t+"pageLGS",get:t+"getLGS",set:t+"setLGS",del:t+"delLGS"},GroupLegalDocument:{qry:t+"qryGIN",page:t+"pageGIN",get:t+"getGIN",set:t+"setGIN",del:t+"delGIN"},CategoryID:{qry:t+"qryINC",get:t+"getINC",page:t+"pageINC",set:t+"setINC",del:t+"delINC"},Group:{qry:t+"qryGRP",get:t+"getGRP",set:t+"setGRP",del:t+"delGRP"},MasterData:{qry:t+"qryMAS",qry2:t+"qryMAS2",get:t+"getMAS",set:t+"setMAS",del:t+"delMAS",snapshot:t+"snapshotMAS"},RelationTypes:{qry:t+"qryRLT",page:t+"pageRLT",get:t+"getRLT",set:t+"setRLT",del:t+"delRLT"},Groups:{qry:t+"qryGRP",page:t+"pageGRP",get:t+"getGRP",set:t+"setGRP",del:t+"delGRP"},MasterIDNum:{qry:t+"qryMIN",page:t+"pageMIN",get:t+"getMIN",set:t+"setMIN",del:t+"delMIN"},Relation:{qry:t+"qryREL",page:t+"pageREL",get:t+"getREL",set:t+"setREL",del:t+"delREL"},BPAddress:{qry:t+"qryADD",page:t+"pageADD",get:t+"getADD",set:t+"setADD",del:t+"delADD"},RoleCategory:{qry:t+"qryROC",get:t+"getROC",page:t+"pageROC",set:t+"setROC",del:t+"delROC"},Role:{qry:t+"qryROL",page:t+"pageROL",get:t+"getROL",set:t+"setROL",del:t+"delROL"},MasterDataRole:{qry:t+"qryMRO",del:t+"delMRO",get:t+"getMRO",set:t+"setMRO"},MasterSales:{get:t+"getSAL",set:t+"setSAL"},MasterPurchase:{get:t+"getPUR",set:t+"setPUR"},Bank:{qry:t+"qryBNK",get:t+"getBNK",set:t+"setBNK",del:t+"delBNK"}}},75991:function(e,a,l){"use strict";var t=l(52322),r=l(60218),n=l(76385);a.Z=e=>{let{children:a,title:l,form:d=!1,...i}=e;return(0,t.jsxs)(r.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:l?{xs:.75,sm:1,md:1.25}:0,p:d?0:"clamp(8px, 0.8vw, 14px)",pt:d?0:l?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...i.sx},children:[!!l&&(0,t.jsx)(n.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:l}),a]})}},61084:function(e,a,l){"use strict";l.d(a,{B:function(){return o}});var t=l(52322),r=l(2784),n=l(5088),d=l(65950),i=l(38449);let s=async(e,a,l)=>{let t="_key="+l;try{var r;let l=await e({extension:a,parameters:t});if(null==l?void 0:null===(r=l.record)||void 0===r?void 0:r.value){let a=l.record.value;t="_recordId="+a;let r=await e({extension:i.r.NumberRange.get,parameters:t});if(r&&!r.record.external)return{readOnly:!0,mandatory:!1}}}catch(e){return{readOnly:!1,mandatory:!0,error:e}}return{readOnly:!1,mandatory:!0}},o=e=>{let{endpointId:a,param:l="",setReferenceRequired:i,editMode:o,...c}=e,{getRequest:u}=(0,r.useContext)(d.$),[y,x]=(0,r.useState)({readOnly:!1,mandatory:!0});return(0,r.useEffect)(()=>{i(!0);let e=async()=>{let e=await s(u,a,l);e.error||(x({readOnly:e.readOnly,mandatory:e.mandatory}),i(e.mandatory))};o?(i(!1),x({readOnly:!0,mandatory:!1})):e()},[l]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.Z,{required:y.mandatory,readOnly:o||y.readOnly,...c})})}}},function(e){e.O(0,[13073,49774,92888,40179],function(){return e(e.s=78781)}),_N_E=e.O()}]);