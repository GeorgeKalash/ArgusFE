(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65934],{52793:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rt-owrs",function(){return r(50977)}])},50977:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(52322),s=r(2784),a=r(71987),l=r(65950),d=r(61802),o=r(69387),u=r(31389),i=r(33625),c=r(62362),p=r(88469),g=r(26612),y=r(98345),I=r(7121),v=r(62202),m=r(27723),O=r(96026),h=r(19473),f=r(60218),q=r(48601),C=r(82737),S=r(38449),R=r(27423),w=r(80983),P=r(91406),x=r(5088),F=r(89330),W=r(39812),A=r(84141),N=r(77980),E=r(53621),D=r(8661);function T(e){var t,r,o,m,O,T,b,V,B,M,k,G;let{labels:_,access:j,recordId:Z,cashAccountId:U,plantId:X,form:L,window:J}=e,{getRequest:$,postRequest:z}=(0,s.useContext)(l.$),{platformLabels:H}=(0,s.useContext)(h.l),{stack:Q}=(0,d.zY)(),[Y,K]=(0,s.useState)({}),{documentType:ee,maxAccess:et}=(0,y.H)({functionId:I.J.OutwardReturnSettlement,access:j,enabled:!Z}),er=(0,a.E)({endpointId:p.N.OutwardReturnSettlement.page}),{formik:en}=(0,w.c)({maxAccess:et,documentType:{key:"dtId",value:null==ee?void 0:ee.dtId},validateOnChange:!0,initialValues:{recordId:null,plantId:parseInt(X),reference:"",accountId:null,date:new Date,dtId:null,amount:null,returnId:null,owrRef:"",status:1,corId:null,corRef:"",corName:"",otpVerified:!1,releaseStatus:1,clientId:null,cellPhone:null,cashAccountId:parseInt(U),wip:1,beneficiaryName:"",items:Y.initialValuePayment||[]},validationSchema:q.Ry({returnId:q.Z_().required(),items:null==Y?void 0:Y.paymentValidation}),onSubmit:async e=>{let t={...en.values};delete t.items;let r=en.values.items.map((e,t)=>({...e,id:t+1,seqNo:t+1,posStatus:1,cashAccountId:U}));if(en.values.items.reduce((e,t)=>e+parseFloat(t.amount||0),0).toFixed(2)!==en.values.amount.toFixed(2)){v.ZP.error("The total amount does not match the sum of amounts in the grid.");return}await z({extension:p.N.OutwardReturnSettlement.set2,record:JSON.stringify({header:t,items:r})}).then(async t=>{e.recordId||eo(await ec(null==t?void 0:t.recordId)),v.ZP.success(e.recordId?H.Edited:H.Added)}),er()}}),es=!!en.values.recordId,ea=(null==en?void 0:null===(t=en.values)||void 0===t?void 0:t.status)===3,el=(null==en?void 0:null===(r=en.values)||void 0===r?void 0:r.wip)===2,ed=null==en?void 0:null===(o=en.values)||void 0===o?void 0:o.otpVerified;function eo(e){let t=e.recordId||en.values.recordId;Q({Component:A.Z,props:{values:e||en.values,recordId:t,functionId:I.J.OutwardReturnSettlement,onSuccess:()=>{eu(t)}}})}let eu=e=>{let t=e||en.values.recordId;z({extension:p.N.OutwardReturnSettlement.close,record:JSON.stringify({recordId:t})}).then(async e=>{if(null==e?void 0:e.recordId){v.ZP.success(H.Closed),er();let t=await ec(null==e?void 0:e.recordId);4===t.status&&ei(t)}})},ei=async e=>{let t=e||en.values;await z({extension:p.N.OutwardReturnSettlement.post,record:JSON.stringify(t)})&&(v.ZP.success(H.Posted),J.close(),er(),ec())};async function ec(e){let t=e||Z||en.values.recordId;if(t){var r,n;let e=await $({extension:p.N.OutwardReturnSettlement.get2,parameters:"_recordId=".concat(t)});return en.setValues({...e.record.header,date:(0,W.a1)(null==e?void 0:null===(r=e.record)||void 0===r?void 0:r.header.date),items:(null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.length)!=0?e.record.items.map((e,t)=>({id:t+1,pos:(null==e?void 0:e.type)!=3,...e})):en.initialValues.items}),e.record}}(0,s.useEffect)(()=>{(async()=>{Z?await ec(Z):L&&en.setValues(e=>({...e,amount:L.values.amount,returnId:L.values.recordId,owrRef:L.values.reference,reference:L.values.reference,clientId:L.values.clientId,cellPhone:L.values.cellPhone,plantId:L.values.plantId}))})()},[Z,L]);let ep=[{key:"Unlocked",condition:!0,onClick:e=>ei(e.target.value),disabled:ea||!es||!ed||!el},{key:"Close",condition:!el,onClick:e=>eu(e.target.value),disabled:el||!es},{key:"Reopen",condition:el,onClick:async function(){let e=en.values;await z({extension:p.N.OutwardReturnSettlement.reopen,record:JSON.stringify(en.values)}).then(t=>{t.recordId&&(v.ZP.success(H.Reopened),er(),ec(null==e?void 0:e.recordId))})},disabled:!el||!es||(null==en?void 0:null===(m=en.values)||void 0===m?void 0:m.releaseStatus)===3},{key:"OTP",condition:!0,onClick:eo,disabled:!es},{key:"GL",condition:!0,onClick:"onClickGL",datasetId:g.i.GLOutwardReturnSettlement,disabled:!es}];return(0,n.jsx)(C.Z,{resourceId:g.i.OutwardReturnSettlement,functionId:I.J.OutwardReturnSettlement,form:en,actions:ep,maxAccess:et,editMode:es,previewReport:es,disabledSubmit:ea||el,children:(0,n.jsxs)(u.R,{children:[(0,n.jsx)(i.g,{children:(0,n.jsx)(f.ZP,{container:!0,spacing:2,children:(0,n.jsx)(f.ZP,{item:!0,xs:12,children:(0,n.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(x.Z,{name:"reference",label:_.reference,value:null==en?void 0:null===(O=en.values)||void 0===O?void 0:O.reference,readOnly:es,maxAccess:!es&&et,maxLength:"30",onChange:en.handleChange,onClear:()=>en.setFieldValue("reference",""),error:en.touched.reference&&!!en.errors.reference})}),(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(F.Z,{name:"date",label:_.date,readOnly:!0,value:null==en?void 0:null===(T=en.values)||void 0===T?void 0:T.date,maxAccess:et,error:en.touched.date&&!!en.errors.date})}),(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(D.Z,{endpointId:S.r.Plant.qry,name:"plantId",label:_.plant,valueField:"recordId",displayField:["reference","name"],values:en.values,readOnly:!0})}),(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(R.U,{endpointId:p.N.OutwardsReturn.snapshot,valueField:"reference",name:"returnId",label:_.outwards,form:en,secondDisplayField:!1,valueShow:"owrRef",formObject:en.values,readOnly:ea,required:!0,maxAccess:et,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"amount",value:"Amount"}],onChange:(e,t)=>{en.setFieldValue("returnId",t?t.recordId:null),en.setFieldValue("corId",t?t.corId:null),en.setFieldValue("corRef",t?t.corRef:""),en.setFieldValue("corName",t?t.corName:""),en.setFieldValue("owrRef",t?t.reference:""),en.setFieldValue("amount",t?t.amount:""),en.setFieldValue("clientId",t?t.clientId:null),en.setFieldValue("beneficiaryName",t?t.benName:"")}})}),(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(R.U,{endpointId:E.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",label:_.correspondent,form:en,formObject:en.values,required:!0,displayFieldWidth:2,valueShow:"corRef",secondValueShow:"corName",maxAccess:et,readOnly:!0})}),(0,n.jsx)(f.ZP,{item:!0,xs:6,children:(0,n.jsx)(P.Z,{name:"amount",label:_.amount,value:null==en?void 0:null===(b=en.values)||void 0===b?void 0:b.amount,readOnly:!0,maxAccess:et,onChange:e=>en.setFieldValue("amount",e.target.value),onClear:()=>{var e;en.setFieldValue("amount",""),(null==en?void 0:null===(e=en.values)||void 0===e?void 0:e.fcAmount)||(handleSelectedProduct(null,!0),en.setFieldValue("products",[]))},error:en.touched.amount&&!!en.errors.amount,maxLength:10})})]})})})}),(0,n.jsx)(c.Q,{children:(0,n.jsx)(N.Z,{onChange:e=>en.setFieldValue("items",e),value:en.values.items,error:en.errors.items,labels:_,maxAccess:et,allowDelete:!ea,allowAddNewLine:!ea,amount:en.values.amount,setFormik:K,data:{recordId:null===(V=en.values)||void 0===V?void 0:V.recordId,reference:null===(B=en.values)||void 0===B?void 0:B.reference,clientName:null===(M=en.values)||void 0===M?void 0:M.clientName,beneficiaryName:null===(k=en.values)||void 0===k?void 0:k.beneficiaryName,viewPosButtons:(null==en?void 0:null===(G=en.values)||void 0===G?void 0:G.wip)===2},name:"items"})})]})})}function b(){let{getRequest:e,postRequest:t}=(0,s.useContext)(l.$),{platformLabels:r,userDefaultsData:f}=(0,s.useContext)(h.l),{stack:q}=(0,d.zY)(),{stack:C}=(0,O.V)();async function S(){let e=["cashAccountId","plantId"],t=((null==f?void 0:f.list)||[]).reduce((t,r)=>{let{key:n,value:s}=r;return e.includes(n)&&(t[n]=s?parseInt(s):null),t},{});return{cashAccountId:parseInt(null==t?void 0:t.cashAccountId),plantId:parseInt(null==t?void 0:t.plantId)}}let{query:{data:R},filterBy:w,clearFilter:P,labels:x,access:F,paginationParameters:W,refetch:A,invalidate:N}=(0,a.J)({queryFn:b,endpointId:p.N.OutwardReturnSettlement.page,datasetId:g.i.OutwardReturnSettlement,filter:{filterFn:D}});async function E(e){let{cashAccountId:t,plantId:r}=await S();q({Component:T,props:{labels:x,access:F,recordId:e,cashAccountId:t,plantId:r},width:1200,height:500,title:x.outwardReturnSettlement})}async function D(t){let{filters:r,pagination:n}=t;return(null==r?void 0:r.qry)?await e({extension:p.N.OutwardReturnSettlement.snapshot,parameters:"_filter=".concat(r.qry)}):b({_startAt:n._startAt||0})}async function b(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:n=50}=t;return{...await e({extension:p.N.OutwardReturnSettlement.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(n)}),_startAt:r}}let{proxyAction:V}=(0,y.G)({functionId:I.J.OutwardReturnSettlement,action:E}),B=async()=>{let{plantId:e}=await S();if(""!==e)await V();else{C({message:r.mustHaveDefaultPlant});return}},M=async e=>{await t({extension:p.N.OutwardReturnSettlement.del,record:JSON.stringify(e)}),N(),v.ZP.success(r.Deleted)},k=[{field:"date",headerName:x.date,flex:1,type:"date"},{field:"reference",headerName:x.reference,flex:1},{field:"owrRef",headerName:x.outwardOrder,flex:1},{field:"amount",headerName:x.amount,flex:1},{field:"statusName",headerName:x.status,flex:1}];return(0,n.jsxs)(u.R,{children:[(0,n.jsx)(i.g,{children:(0,n.jsx)(m.Z,{onAdd:B,maxAccess:F,onSearch:e=>{w("qry",e)},onSearchClear:()=>{P("qry")},inputSearch:!0})}),(0,n.jsx)(c.Q,{children:(0,n.jsx)(o.Z,{columns:k,onEdit:e=>{E(e.recordId)},onDelete:M,gridData:R||{list:[]},rowId:["recordId"],isLoading:!1,refetch:A,paginationParameters:W,pageSize:50,paginationType:"api",maxAccess:F})})]})}},88469:function(e,t,r){"use strict";r.d(t,{N:function(){return s}});let n="RTOW.asmx/",s={Country:{qry:n+"qryPCO2"},DispersalType:{qry:n+"qryPMO2"},Currency:{qry:n+"qryPMO3"},Agent:{qry:n+"qryPDA2"},ProductDispersalEngine:{qry:n+"qryPDE"},OutwardsCash:{qry:n+"qryOWC"},OutwardsOrder:{qry:n+"qryOWO",qry2:n+"qryOWO2",page:n+"pageOWO",get:n+"getOWO",get2:n+"get2OWO",set:n+"setOWO",set2:n+"set2OWO",del:n+"delOWO",close:n+"closeOWO",reopen:n+"reopenOWO",post:n+"postOWO",snapshot:n+"snapshotOWO"},OutwardsRequest:{get:n+"getOWX"},InwardSettlement:{qry:n+"qryIWS",page:n+"pageIWS",get:n+"getIWS",set:n+"setIWS",del:n+"delIWS",close:n+"closeIWS",reopen:n+"reopenIWS",post:n+"postIWS",snapshot:n+"snapshotIWS"},InwardsTransfer:{get:n+"getIW",set:n+"setIW",del:n+"delIW",snapshot:n+"snapshotIW",snapshot2:n+"snapshotIW2",close:n+"closeIW",reopen:n+"reopenIW",post:n+"postIW",open:n+"openIW"},InwardGLInformation:{get:n+"getIWI"},Beneficiary:{qry:n+"qryBEN",qry2:n+"qryBEN2",qry3:n+"qryBEN3",get:n+"getBEN",del:n+"delBEN",snapshot:n+"snapshotBEN",snapshot2:n+"snapshotBEN2 "},BeneficiaryBank:{qry:n+"qryBEB",get:n+"getBEB",set:n+"set2BEB",del:n+"delBEB"},BeneficiaryCash:{qry:n+"qryBEC",get:n+"getBEC",set:n+"set2BEC",del:n+"delBEC"},FeeSchedule:{qry:n+"qryFSC",page:n+"pageFSC",snapshot:n+"snapshotFSC",get:n+"getFSC",set:n+"setFSC",del:n+"delFSC"},FeeScheduleDetail:{qry:n+"qryFSD",get:n+"getFSD",set2:n+"set2FSD",del:n+"delFSD"},FeeScheduleOutwards:{qry:n+"qryFSO",page:n+"pageFSO",get:n+"getFSO",set:n+"setFSO",del:n+"delFSO"},FeeScheduleInwards:{qry:n+"qryFSI",page:n+"pageFSI",get:n+"getFSI",set:n+"setFSI",del:n+"delFSI"},OutwardGLInformation:{get:n+"getOWI"},AutoPostExclusion:{qry:n+"qryAPX",get:n+"getAPX",set:n+"setAPX",del:n+"delAPX",get2:n+"get2APX",set2:n+"set2APX"},OutwardsModification:{qry:n+"qryOWM",page:n+"pageOWM",snapshot:n+"snapshotOWM",get:n+"getOWM",set2:n+"set2OWM",del:n+"delOWM",post:n+"postOWM",reopen:n+"reopenOWM",close:n+"closeOWM"},Postoutwards:{qry:n+"qryOWT3",post2:n+"post2OWT"},OutwardsReturn:{page:n+"pageOWR",qry2:n+"qryOWR2",get:n+"getOWR",set:n+"setOWR",close:n+"closeOWR",reopen:n+"reopenOWR",post:n+"postOWR",snapshot:n+"snapshotOWR"},CorrespondentOutwards:{qry:n+"qryACE",set:n+"setACE"},ReceiptVouchers:{qry:n+"qryRV",page:n+"pageRV",get:n+"getRV",set:n+"setRV",set2:n+"set2RV",del:n+"delRV",post:n+"postRV",close:n+"closeRV",reopen:n+"reopenRV",snapshot:n+"snapshotRV"},OutwardsTransfer:{get:n+"getOWT",snapshot:n+"snapshotOWT",qry2:n+"qryOWT2"},UnassignedCountry:{unassigned:n+"unassignedCOU"},UnassignedCurrency:{unassigned:n+"unassignedCU"},UnassignedDispersalType:{unassigned:n+"unassignedDT"},AssignedCountry:{assigned:n+"assignedCOU"},AssignedCurrency:{assigned:n+"assignedCU"},AssignedDispersalType:{assigned:n+"assignedDT"},OutwardReturnSettlement:{qry:n+"qryORS",page:n+"pageORS",get:n+"getORS",get2:n+"get2ORS",set:n+"setORS",set2:n+"set2ORS",del:n+"delORS",post:n+"postORS",close:n+"closeORS",reopen:n+"reopenORS",snapshot:n+"snapshotORS"},OutwardReturnReason:{page:n+"pageOWRR",snapshot:n+"snapshotOWRR",qry:n+"qryOWRR",get:n+"getOWRR",set:n+"setOWRR",del:n+"delOWRR"}}},53621:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});let n="RTSET.asmx/",s={Interface:{qry:n+"qryITF",page:n+"pageITF",get:n+"getITF",set:n+"setITF",del:n+"delITF"},ProductMaster:{qry:n+"qryPRO",page:n+"pagePRO",get:n+"getPRO",set:n+"setPRO",del:n+"delPRO",snapshot:n+"snapshotPRO"},ProductCountries:{qry:n+"qryPCO",set2:n+"set2PCO"},ProductMonetaries:{qry:n+"qryPMO",set2:n+"set2PMO"},ProductDispersal:{qry:n+"qryPDI",get:n+"getPDI",set:n+"setPDI",del:n+"delPDI"},ProductSchedules:{qry:n+"qryPSC",set2:n+"set2PSC"},ProductScheduleRanges:{qry:n+"qryPSR",set2:n+"set2PSR"},ProductScheduleFees:{qry:n+"qryPSF",set2:n+"set2PSF"},ProductDispersalAgents:{qry:n+"qryPDA",set2:n+"set2PDA"},Correspondent:{page:n+"pageCOR",qry:n+"qryCOR",qry2:n+"qry2COR",get:n+"getCOR",set:n+"setCOR",del:n+"delCOR",snapshot:n+"snapshotCOR"},CorrespondentCountry:{qry:n+"qryCCO",get:n+"getCCO",set2:n+"set2CCO",del:n+"delCCO"},CorrespondentCurrency:{qry:n+"qryCCU",get:n+"getCCU",set2:n+"set2CCU",del:n+"delCCU"},CorrespondentAgents:{qry:n+"qryAGT",page:n+"pageAGT",get:n+"getAGT",set:n+"setAGT",del:n+"delAGT"},CorrespondentAgentBranches:{qry:n+"qryABR",page:n+"pageABR",get:n+"getABR",set:n+"setABR",del:n+"delABR"},CorrespondentExchangeMap:{qry:n+"qryEXC",set2:n+"set2EXC"},CurrencyExchangeMap:{qry:n+"qryEXG",set2:n+"set2EXG"},CorrespondentExchangeBuyMap:{qry:n+"qryEXB",set2:n+"set2EXB"},ExchangeRates:{get:n+"getEXB",qry:n+"qryEXG2",set2:n+"set2EXB"},RtDefault:{qry:n+"qryDE",set2:n+"set2DE"},Profession:{qry:n+"qryPFN",page:n+"pagePFN",get:n+"getPFN",set:n+"setPFN",del:n+"delPFN",snapshot:n+"snapshotPFN"},ClientIndividual:{qry:n+"qryCLI"},SalaryRange:{qry:n+"qrySRA",page:n+"pageSRA",get:n+"getSRA",set:n+"setSRA",del:n+"delSRA"},SourceOfIncome:{qry:n+"qrySI",page:n+"pageSI",snapshot:n+"snapshotSI",get:n+"getSI",set:n+"setSI",del:n+"delSI"},CorrespondentControl:{qry:n+"qryCCL",set:n+"set2CCL"},InterfaceMaps:{qry:n+"qryIFM",get:n+"getIFM",set2:n+"set2IFM"},SourceOfIncomeType:{qry:n+"qrySIT",snapshot:n+"snapshotSIT",page:n+"pageSIT",get:n+"getSIT",set:n+"setSIT",del:n+"delSIT"},ProfessionGroups:{qry:n+"qryPFG",page:n+"pagePFG",snapshot:n+"snapshotPFG",get:n+"getPFG",set:n+"setPFG",del:n+"delPFG"},CorrespondentGroup:{qry:n+"qryCGP",page:n+"pageCGP",get:n+"getCGP",set:n+"setCGP",del:n+"delCGP"},ExtraIncome:{qry:n+"qryEI",get:n+"getEI",del:n+"delEI",page:n+"pageEI",snapshot:n+"snapshotEI",set:n+"setEI"},CountryRisk:{page:n+"pageCOU",get:n+"getCOU",set:n+"setCOU",del:n+"delCOU"},CorDispControl:{qry:n+"qryCDC",set2:n+"set2CDC"},CorrespondentDispersal:{qry:n+"qryCDM",get:n+"getCDM",del:n+"delCDM",set2:n+"set2CDM"},CorrespondentDispersalRate:{qry:n+"qryCDR",set2:n+"set2CDR"}}},1685:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});let n=e=>{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null}},98345:function(e,t,r){"use strict";r.d(t,{H:function(){return I},G:function(){return y}});var n=r(45300),s=r(2784),a=r(96026),l=r(38449);r(26612);var d=r(65947),o=r(1685);let u=async(e,t,r)=>{try{let n=await e({extension:t,parameters:r});return t.includes("qry")?n:n.record}catch(e){return null}},i=(e,t,r,n)=>{let s=(e=JSON.parse(JSON.stringify(e))).record.controls,a=s.find(e=>"reference"===e.controlId);return a?a.accessLevel=(null==t?void 0:t.mandatory)?d.$7:d.rr:(null==t?void 0:t.mandatory)?s.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.mandatory)?d.$7:d.rr}):(null==t?void 0:t.readOnly)?s.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","reference"),accessLevel:(null==t?void 0:t.readOnly)?d.rr:d.$7}):s=e.record.controls.filter(e=>"reference"!=e.controlId),r&&s.push({sgId:0,resourceId:"",controlId:"".concat(n?n+".":"","dtId"),accessLevel:d.$7}),{...e,record:{...e.record,controls:s}}},c=async(e,t,r)=>{let n,s;switch(r){case"dtId":let a=(0,o.m)("userData"),d=null==a?void 0:a.userId;s="_userId=".concat(d,"&_functionId=").concat(t),n=l.r.UserFunction.get;break;case"glbSysNumberRange":s="_recordId=".concat(t),n=l.r.SystemFunction.get;break;case"DocumentType":s="_dgId=".concat(t,"&_startAt=",0,"&_pageSize=",50),n=l.r.DocumentType.qry;break;case"DcTypNumberRange":s="_recordId=".concat(t),n=l.r.DocumentType.get;break;case"isExternal":s="_recordId=".concat(t),n=l.r.NumberRange.get;break;default:return null}return await u(e,n,s)},p=async function(e){let t,r,n,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],u=arguments.length>5?arguments[5]:void 0,p=void 0===d&&a&&await c(e,a,"dtId"),g=null==p?void 0:p.dtId,y="",I=!0;if(p&&void 0===d||"nraId"===d){if(g){let r=await c(e,g,"DcTypNumberRange");t=null==r?void 0:r.nraId,I=!((null==r?void 0:r.activeStatus)<0),t||(y="Assign the document type to a number range")}if((!g||!I)&&o&&a){var v;let t=await c(e,a,"DocumentType");s=(null==t?void 0:null===(v=t.list)||void 0===v?void 0:v.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===d||void 0===d)&&a){if((!g||g)&&!t||t&&!I){let r=await c(e,a,"glbSysNumberRange");(t=null==r?void 0:r.nraId)&&s&&(s=!1),I=!0}y=t||s?"":"Assign the system Function to a number range"}d>0&&!t&&(t=d),t&&I?(r={readOnly:null==(n=await c(e,t,"isExternal"))||!n.external,mandatory:null!=n&&!!n.external},l&&(l=await i(l,r,s,u))):!t&&l&&(l=await i(l,r,s,u));let m=u?"".concat(u,".reference"):"reference";return{dtId:g,resetReference:null==r?void 0:r.readOnly,dcTypeRequired:s,reference:{fieldName:m,isEmpty:(null==n?void 0:n.external)!==void 0&&(null==n||!n.external)},errorMessage:y,maxAccess:l,selectNraId:d}};var g=r(65950);function y(e){let{functionId:t,action:r,hasDT:n}=e,{getRequest:l}=(0,s.useContext)(g.$),{stack:d}=(0,a.V)();return{proxyAction:async()=>{let e=await p(l,t,"",void 0,n);(null==e?void 0:e.errorMessage)?d({message:null==e?void 0:e.errorMessage}):await r()}}}function I(e){var t;let{functionId:r,access:l,hasDT:d,enabled:o=!0,objectName:u=""}=e,{getRequest:i}=(0,s.useContext)(g.$),{stack:c}=(0,a.V)(),[y,I]=(0,s.useState)(),v=async e=>{let t=await p(i,r,l,e,d,u);if(!t.errorMessage)return t;c({message:null==t?void 0:t.errorMessage})},m=(0,n.a)({retry:!1,staleTime:0,enabled:o,queryKey:[r,y,!!l,o],queryFn:y||"nraId"===y?()=>v(y):()=>v()});return{documentType:m.data,maxAccess:(null==m?void 0:null===(t=m.data)||void 0===t?void 0:t.maxAccess)||l,changeDT(e){I((null==e?void 0:e.nraId)||"nraId")}}}}},function(e){e.O(0,[77980,49774,92888,40179],function(){return e(e.s=52793)}),_N_E=e.O()}]);