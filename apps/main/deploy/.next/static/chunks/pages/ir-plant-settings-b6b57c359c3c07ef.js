(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65232],{96843:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ir-plant-settings",function(){return t(79086)}])},79086:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var a=t(52322),r=t(2784),s=t(69387),l=t(65950),d=t(61802),i=t(71987),o=t(26612),c=t(31389),u=t(62362),p=t(38449),I=t(60218),g=t(48601),m=t(82737),f=t(62202),P=t(80983),R=t(8661),h=t(19473),y=t(65215),v=t(7121),x=t(58912);function q(e){let{labels:n,maxAccess:t,recordId:s,window:d}=e,{platformLabels:q}=(0,r.useContext)(h.l),{getRequest:D,postRequest:E}=(0,r.useContext)(l.$),T=(0,i.E)({endpointId:p.r.Plant.page}),{formik:_}=(0,P.c)({initialValues:{recordId:s,functionId:v.J.MaterialTransfer,dtId:null,siteId:null,plantId:s},maxAccess:t,validationSchema:g.Ry({dtId:g.Rx().required(),siteId:g.Rx().required(),plantId:g.Rx().required()}),validateOnChange:!0,onSubmit:async e=>{await E({extension:x.I.PlantSettings.set,record:JSON.stringify(e)}),f.ZP.success(q.Edited),T(),d.close()}});(0,r.useEffect)(()=>{!async function(){if(s){let e=await D({extension:x.I.PlantSettings.get,parameters:"_plantId=".concat(s)});_.setValues({..._.values,...(null==e?void 0:e.record)||{},recordId:s,plantId:s})}}()},[]);let M=[{key:"Clear",condition:!0,onClick:async()=>{await E({extension:x.I.PlantSettings.del,record:JSON.stringify(_.values)}),s&&_.setValues({recordId:s,plantId:s}),f.ZP.success(q.Deleted)},disabled:!_.values.siteId||!_.values.dtId}];return(0,a.jsx)(m.Z,{resourceId:o.i.IRPlantSettings,form:_,maxAccess:t,editMode:!0,actions:M,disabledSubmit:!_.values.siteId||!_.values.dtId,isCleared:!1,children:(0,a.jsx)(c.R,{children:(0,a.jsx)(u.Q,{children:(0,a.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(R.Z,{endpointId:p.r.Plant.qry,name:"plantId",label:n.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Ref"},{key:"name",value:"Name"}],required:!0,values:_.values,maxAccess:t,readOnly:!0,onChange:(e,n)=>{_.setFieldValue("plantId",(null==n?void 0:n.recordId)||null)},error:_.touched.plantId&&!!_.errors.plantId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(R.Z,{endpointId:p.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(v.J.MaterialTransfer),name:"dtId",required:!0,label:n.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:_.values,maxAccess:t,onChange:(e,n)=>{_.setFieldValue("dtId",(null==n?void 0:n.recordId)||null)},error:_.touched.dtId&&!!_.errors.dtId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(R.Z,{endpointId:y.$.Site.qry,name:"siteId",label:n.site,required:!0,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:_.values,maxAccess:t,onChange:(e,n)=>{_.setFieldValue("siteId",(null==n?void 0:n.recordId)||null)},error:_.touched.siteId&&!!_.errors.siteId})})]})})})})}var D=()=>{let{getRequest:e}=(0,r.useContext)(l.$),{stack:n}=(0,d.zY)();async function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:a=50}=n;return{...await e({extension:p.r.Plant.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(a,"&_params=")}),_startAt:t}}let{query:{data:I},labels:g,refetch:m,access:f,paginationParameters:P}=(0,i.J)({queryFn:t,endpointId:p.r.Plant.page,datasetId:o.i.IRPlantSettings}),R=[{field:"reference",headerName:g.reference,flex:1},{field:"name",headerName:g.name,flex:1},{field:"costCenterName",headerName:g.costCenter,flex:1}];return(0,a.jsx)(c.R,{children:(0,a.jsx)(u.Q,{children:(0,a.jsx)(s.Z,{name:"table",columns:R,gridData:I,rowId:["dtId"],onEdit:e=>{n({Component:q,props:{labels:g,recordId:null==e?void 0:e.recordId,maxAccess:f},width:600,height:500,title:g.PlantSettings})},isLoading:!1,pageSize:50,refetch:m,paginationType:"api",paginationParameters:P,maxAccess:f})})})}},58912:function(e,n,t){"use strict";t.d(n,{I:function(){return r}});let a="IR.asmx/",r={ReplenishmentGroups:{qry:a+"qryGRP",page:a+"pageGRP",get:a+"getGRP",set:a+"setGRP",del:a+"delGRP"},IvReplenishements:{qry:a+"qryHDR",page:a+"pageHDR",get:a+"getHDR",set:a+"setHDR"},IvReplenishementsList:{qry:a+"qryTRX"},GenerateIvReplenishements:{generate:a+"generateTFR"},MaterialReplenishment:{page:a+"pageREQ",del:a+"delREQ",get:a+"getREQ",set2:a+"set2REQ",snapshot:a+"snapshotREQ",close:a+"closeREQ",reopen:a+"reopenREQ",cancel:a+"cancelREQ",print:a+"printREQ"},OrderItem:{qry:a+"qryREI",open:a+"openREI"},MatPlanning:{page:a+"pageMPL",del:a+"delMPL",get:a+"getMPL",set2:a+"set2MPL",reopen:a+"reopenMPL",close:a+"closeMPL",qry:a+"qryMPL",snapshot:a+"snapshotMPL"},MatPlanningItem:{qry:a+"qryMPI",append:a+"appendMPI"},PurchaseRequest:{generate:a+"generatePR"},PlantSettings:{get:a+"getPLT",set:a+"setPLT",del:a+"delPLT"},DocumentTypeDefault:{get:a+"getDTD",set:a+"setDTD",del:a+"delDTD",page:a+"pageDTD"},materialPlaning:{preview:a+"previewMRP"},Transfer:{generate2:a+"generate2TFR"},ConsumptionOfTools:{generate:a+"generateMFCON"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=96843)}),_N_E=e.O()}]);