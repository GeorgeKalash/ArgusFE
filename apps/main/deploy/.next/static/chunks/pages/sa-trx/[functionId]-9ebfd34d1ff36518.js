(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85390],{25414:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-trx/[functionId]",function(){return t(94982)}])},94982:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var a=t(52322),r=t(70844),s=t(2784),i=t(33625),l=t(31389),c=t(36908),o=t(96026),d=t(98345),u=t(19473),f=t(65950),m=t(22341),p=t(26612),I=t(7121),x=t(61802),y=t(79590),N=t(71987),h=t(69387),S=t(62202),v=t(78618),_=t(63165),g=t(58276),C=()=>{let{postRequest:e,getRequest:n}=(0,s.useContext)(f.$),{platformLabels:t,defaultsData:C}=(0,s.useContext)(u.l),{stack:w,lockRecord:J}=(0,x.zY)(),{stack:R}=(0,o.V)(),{addLockedScreen:b}=(0,s.useContext)(g.Z),{functionId:A}=(0,_.F)(),T=e=>{switch(e){case I.J.SalesInvoice:return p.i.SalesInvoice;case I.J.SalesReturn:return p.i.SaleReturn;case I.J.ConsignmentIn:return p.i.ClientGOCIn;case I.J.ConsignmentOut:return p.i.ClientGOCOut;default:return null}},{query:{data:q},filterBy:O,refetch:P,labels:k,access:Z,paginationParameters:D,invalidate:E}=(0,N.J)({queryFn:G,endpointId:m.P.SalesTransaction.qry,datasetId:p.i.SalesInvoice,DatasetIdAccess:T(parseInt(A)),filter:{filterFn:L,default:{functionId:A}}}),j=[{field:"plantName",headerName:k.plant,flex:1},{field:"reference",headerName:k.reference,flex:1},{field:"date",headerName:k.date,flex:1,type:"date"},{field:"clientRef",headerName:k.clientRef,flex:1},{field:"clientName",headerName:k.clientName,flex:1},{field:"pcs",headerName:k.pcs,flex:1,type:"number"},{field:"qty",headerName:k.qty,flex:1,type:"number"},{field:"volume",headerName:k.volume,flex:1,type:"number"},{field:"amount",headerName:k.net,flex:1,type:{field:"number",decimal:2}},{field:"spName",headerName:k.salesPerson,flex:1},{field:"szName",headerName:k.saleZone,flex:1},{field:"printStatusName",headerName:k.printStatus,flex:1},{field:"description",headerName:k.description,flex:2},{field:"isVerified",headerName:k.isVerified,type:"checkbox"},{field:"statusName",headerName:k.status,flex:1}];async function G(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:a=50,params:r=[]}=e;return{...await n({extension:m.P.SalesTransaction.qry,parameters:"_startAt=".concat(t,"&_pageSize=").concat(a,"&_sortBy=recordId desc&_params=").concat(r,"&_dgId=").concat(A)}),_startAt:t}}async function L(e){let{filters:t,pagination:a}=e;return t.qry?await n({extension:m.P.SalesTransaction.snapshot,parameters:"_filter=".concat(t.qry,"&_dgId=").concat(A)}):G({_startAt:a._startAt||0,params:null==t?void 0:t.params})}async function z(){var e;let n=null==C?void 0:null===(e=C.list)||void 0===e?void 0:e.find(e=>{let{key:n}=e;return"currencyId"===n});return(null==n?void 0:n.value)?parseInt(n.value):null}let{proxyAction:F}=(0,d.G)({functionId:A,action:async()=>{await z()?Y():R({message:k.noSelectedCurrency})}}),V=e=>e===I.J.SalesInvoice?k.salesInvoice:e===I.J.SalesReturn?k.salesReturn:e===I.J.ConsignmentIn?k.consignmentIn:e===I.J.ConsignmentOut?k.consignmentOut:null,B=e=>{switch(Number(e)){case I.J.SalesInvoice:return p.i.GLSalesInvoice;case I.J.SalesReturn:return p.i.GLSalesReturn;default:return null}};function X(e){w({Component:y.Z,props:{labels:k,recordId:e,access:Z,functionId:A,lockRecord:J,getResourceId:T,getGLResource:B},title:V(parseInt(A))})}async function Y(e,n,a){e&&3!==a?await J({recordId:e,reference:n,resourceId:T(parseInt(A)),onSuccess:()=>{b({resourceId:T(parseInt(A)),recordId:e,reference:n}),X(e)},isAlreadyLocked:e=>{w({Component:v.Z,props:{DialogText:"".concat(t.RecordLocked," ").concat(e),title:t.Dialog}})}}):X(e)}let $=async()=>{await F()},H=async n=>{await e({extension:m.P.SalesTransaction.del,record:JSON.stringify(n)}),E(),S.ZP.success(t.Deleted)};return(0,a.jsxs)(l.R,{children:[(0,a.jsx)(i.g,{children:(0,a.jsx)(c.Z,{onAdd:$,maxAccess:Z,reportName:"SATR",filterBy:O})}),(0,a.jsx)(r.Z,{children:(0,a.jsx)(h.Z,{name:"table",columns:j,gridData:q,rowId:["recordId"],onEdit:e=>{Y(null==e?void 0:e.recordId,null==e?void 0:e.reference,null==e?void 0:e.status)},onDelete:H,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,paginationParameters:D,refetch:P,paginationType:"api",maxAccess:Z})})]})}},63165:function(e,n,t){"use strict";t.d(n,{F:function(){return s}});var a=t(5632),r=t(2784);let s=()=>{let e=(0,a.useRouter)(),[n,t]=(0,r.useState)(e.query);return n}}},function(e){e.O(0,[92515,2494,36908,23352,13073,53491,79590,49774,92888,40179],function(){return e(e.s=25414)}),_N_E=e.O()}]);