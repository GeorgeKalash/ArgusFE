(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35590],{80325:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iv-serials-tracking",function(){return t(15974)}])},15974:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var a=t(52322),l=t(61802),r=t(26612),s=t(2784),o=t(62202),i=t(65950),d=t(80983),u=t(19473),m=t(76399),c=t(65215),p=t(84100),v=t(54074);function y(e){let{_labels:n,access:t}=e,{getRequest:l,postRequest:r}=(0,s.useContext)(i.$),{platformLabels:y}=(0,s.useContext)(u.l),{formik:_}=(0,d.c)({initialValues:{recordId:null,rows:[]},access:t,validateOnChange:!0,onSubmit:async e=>{let n=e.rows.filter(e=>!!e.type).map(e=>({msId:e.msId,type:e.type}));await r({extension:c.$.MeasurementSerial.set2,record:JSON.stringify({items:n})}),o.ZP.success(y.Updated),f()}}),f=async()=>{var e;let[n,t]=await Promise.all([l({extension:c.$.Measurement.qry,parameters:"_name="}),l({extension:c.$.MeasurementSerial.qry,parameters:"_msId=0"})]),a=(null==n?void 0:null===(e=n.list)||void 0===e?void 0:e.map((e,n)=>{var a;let l=null==t?void 0:null===(a=t.list)||void 0===a?void 0:a.find(n=>n.msId===e.recordId);return{id:n+1,msId:e.recordId,name:e.name,typeName:(null==l?void 0:l.typeName)||"",type:null==l?void 0:l.type}}))||[];_.setFieldValue("rows",a)};(0,s.useEffect)(()=>{f()},[]);let w=[{component:"textfield",label:null==n?void 0:n.ms,name:"name",props:{readOnly:!0}},{component:"resourcecombobox",name:"typeName",label:n.type,props:{datasetId:p.v.IV_MEASUREMENT_SERIAL_MAP,valueField:"key",displayField:"value",mapping:[{from:"value",to:"typeName"},{from:"key",to:"type"}]}}];return(0,a.jsx)(v.Z,{onSave:_.handleSubmit,maxAccess:t,editMode:!1,children:(0,a.jsx)(m._,{name:"rows",onChange:e=>{_.setFieldValue("rows",e)},value:_.values.rows,error:_.errors.rows,columns:w,allowDelete:!1,allowAddNewLine:!1})})}var _=()=>(0,a.jsx)(l.ut,{datasetId:r.i.SerialsTrackings,labelKey:"SerialsTracking",Component:y})}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=80325)}),_N_E=e.O()}]);