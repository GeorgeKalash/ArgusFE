(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70947],{71693:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sa-clients",function(){return n(58140)}])},58140:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return X}});var l=n(52322),r=n(2784),s=n(62202),t=n(69387),d=n(65950),i=n(26612),c=n(29326),o=n(9522),u=n(60218),m=n(48601),x=n(5088),v=n(82737),h=n(8661),p=n(71987),I=n(25870),y=n(22341),f=n(84100),b=n(80983),g=n(74898),j=n(31389),A=n(62362),C=n(19473),Z=n(27423),P=n(65215),N=n(89330),_=n(39812),F=n(253),D=n(243),w=n(19689),S=e=>{var a,n,t,c;let{labels:o,maxAccess:S,setStore:T,store:R}=e,{postRequest:V,getRequest:O}=(0,r.useContext)(d.$),{platformLabels:q}=(0,r.useContext)(C.l),{recordId:k}=R,{changeDT:E,maxAccess:z}=(0,D.r)({access:S,readOnlyOnEditMode:!1,name:"reference"}),L=(0,p.E)({endpointId:y.P.Client.page}),{formik:G}=(0,b.c)({initialValues:{recordId:null,cgId:"",gpName:"",reference:null,name:"",keywords:null,flName:"",accountId:null,accountRef:"",accountName:"",bpId:null,BpRef:null,szId:null,spId:null,acquisitionDate:new Date,isSubjectToVAT:null,vatNumber:"",taxId:null,isInactive:!1},maxAccess:z,validateOnChange:!0,validationSchema:m.Ry({name:m.Z_().required(),cgId:m.Z_().required()}),onSubmit:async e=>{let a=await V({extension:y.P.Client.set,record:JSON.stringify(e)});e.recordId?s.ZP.success(q.Edited):(G.setFieldValue("recordId",a.recordId),s.ZP.success(q.Added)),await $(a.recordId),L()}});(0,r.useEffect)(()=>{!async function(){await $(k)}()},[]);let $=async e=>{if(e){var a;let n=await O({extension:y.P.Client.get,parameters:"_recordId=".concat(e)});G.setValues({...n.record,acquisitionDate:(0,_.a1)(null==n?void 0:null===(a=n.record)||void 0===a?void 0:a.acquisitionDate)}),T(e=>({...e,record:n.record,recordId:n.record.recordId}))}},J=!!G.values.recordId,B=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!J},{key:"Integration Account",condition:!0,onClick:"onClickGIA",disabled:!J}];return(0,l.jsx)(v.Z,{resourceId:i.i.Client,form:G,maxAccess:z,editMode:J,actions:B,masterSource:g.N.Account,children:(0,l.jsx)(j.R,{children:(0,l.jsx)(A.Q,{children:(0,l.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:y.P.ClientGroups.qry,name:"cgId",readOnly:J,maxAccess:z,required:!0,label:o.cGroup,valueField:"recordId",displayField:"name",values:G.values,onChange:(e,a)=>{G.setFieldValue("cgId",(null==a?void 0:a.recordId)||""),E(a)},error:G.touched.cgId&&!!G.errors.cgId})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{name:"reference",readOnly:J,label:o.reference,value:G.values.reference,maxAccess:z,maxLength:"10",onChange:G.handleChange,onClear:()=>G.setFieldValue("reference",""),error:G.touched.reference&&!!G.errors.reference})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{name:"name",label:o.name,value:G.values.name,required:!0,maxAccess:z,maxLength:"70",onChange:G.handleChange,onClear:()=>G.setFieldValue("name",""),error:G.touched.name&&!!G.errors.name})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{name:"keywords",label:o.keyWords,value:G.values.keywords,maxAccess:z,maxLength:"30",onChange:G.handleChange,onClear:()=>G.setFieldValue("keywords",""),error:G.touched.keywords&&!!G.errors.keywords})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{name:"flName",label:o.foreignLanguage,value:G.values.flName,maxAccess:z,maxLength:"70",onChange:G.handleChange,onClear:()=>G.setFieldValue("flName",""),error:G.touched.flName&&!!G.errors.flName})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(Z.U,{endpointId:I.H.Account.snapshot,name:"accountId",label:o.account,valueField:"reference",displayField:"name",valueShow:"accountRef",secondValueShow:"accountName",form:G,onChange:(e,a)=>{G.setFieldValue("accountId",(null==a?void 0:a.recordId)||""),G.setFieldValue("accountRef",(null==a?void 0:a.reference)||""),G.setFieldValue("accountName",(null==a?void 0:a.name)||"")},error:G.touched.accountId&&!!G.errors.accountId,maxAccess:z})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:y.P.SalesPerson.qry,name:"spId",label:o.salesPerson,columnsInDropDown:[{key:"spRef",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:"name",values:G.values,onChange:(e,a)=>{a?G.setFieldValue("spId",null==a?void 0:a.recordId):G.setFieldValue("spId","")},error:G.touched.spId&&!!G.errors.spId})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:y.P.SalesZone.qry,parameters:'_startAt=0&_pageSize=1000&_sortField="recordId"&_filter=',name:"szId",label:o.saleZone,columnsInDropDown:[{key:"name",value:"Name"}],valueField:"recordId",displayField:"name",values:G.values,onChange:(e,a)=>{a?G.setFieldValue("szId",null==a?void 0:a.recordId):G.setFieldValue("szId","")},error:G.touched.szId&&!!G.errors.szId})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{datasetId:f.v.LANGUAGE,name:"languageId",label:o.language,valueField:"key",displayField:"value",values:G.values,onChange:(e,a)=>{var n;G.setFieldValue("languageId",null!==(n=null==a?void 0:a.key)&&void 0!==n?n:"")},error:G.touched.languageId&&!!G.errors.languageId})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(N.Z,{name:"acquisitionDate",label:o.acquisitionDate,value:G.values.acquisitionDate,onChange:G.setFieldValue,maxAccess:z,onClear:()=>G.setFieldValue("acquisitionDate",""),error:G.touched.acquisitionDate&&!!G.errors.acquisitionDate})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(w.Z,{name:"isSubjectToVAT",value:null===(a=G.values)||void 0===a?void 0:a.isSubjectToVAT,onChange:e=>{G.setFieldValue("isSubjectToVAT",e.target.checked),e.target.checked||(G.setFieldValue("vatNumber",""),G.setFieldValue("taxId",""))},label:o.vat,maxAccess:z})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{name:"vatNumber",label:o.vatNo,value:G.values.vatNumber,readOnly:!(null===(n=G.values)||void 0===n?void 0:n.isSubjectToVAT),maxAccess:z,maxLength:"30",onChange:G.handleChange,onClear:()=>G.setFieldValue("vatNumber",""),error:G.touched.vatNumber&&!!G.errors.vatNumber})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:P.$.Items.pack,reducer:e=>{var a;return null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.taxSchedules},values:G.values,name:"taxId",label:o.tax,valueField:"recordId",displayField:"name",displayFieldWidth:1,maxAccess:z,readOnly:!(null===(t=G.values)||void 0===t?void 0:t.isSubjectToVAT),onChange:(e,a)=>{G.setFieldValue("taxId",(null==a?void 0:a.recordId)||"")},error:G.touched.taxId&&G.errors.taxId})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(Z.U,{endpointId:F.F.MasterData.snapshot,name:"bpRef",label:o.bpRef,valueField:"reference",valueShow:"bpRef",secondDisplayField:!1,form:G,onChange:(e,a)=>{G.setValues({...G.values,bpId:(null==a?void 0:a.recordId)||"",bpRef:(null==a?void 0:a.reference)||""})},maxAccess:z})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(w.Z,{name:"isInactive",value:null===(c=G.values)||void 0===c?void 0:c.isInactive,onChange:e=>G.setFieldValue("isInactive",e.target.checked),label:o.inactive,maxAccess:z})})]})})})})},T=n(38449),R=n(91406);function V(e){var a,n,t;let{labels:c,maxAccess:o,store:x}=e,{postRequest:p}=(0,r.useContext)(d.$),{platformLabels:I}=(0,r.useContext)(C.l),{formik:f}=(0,b.c)({initialValues:{...x.record},enableReinitialize:!0,validateOnChange:!0,validationSchema:m.Ry({tdPct:m.Rx().max(99.9).nullable().transform((e,a)=>""===a?null:e).test(function(e){let{maxDiscount:a}=this.parent;return null==e||null==a||e<=a}),maxDiscount:m.Rx().max(100).nullable().transform((e,a)=>""===a?null:e)}),onSubmit:async e=>{await p({extension:y.P.Client.set,record:JSON.stringify(e)}),s.ZP.success(I.Saved)}}),g=!!(null==f?void 0:null===(a=f.values)||void 0===a?void 0:a.recordId);return(0,l.jsx)(v.Z,{resourceId:i.i.ClientGroups,form:f,maxAccess:o,editMode:g,children:(0,l.jsx)(j.R,{children:(0,l.jsx)(A.Q,{children:(0,l.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:y.P.PaymentTerms.qry,name:"ptId",label:c.paymentTerm,valueField:"recordId",displayField:["reference","name"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:null==f?void 0:f.values,maxAccess:o,onChange:(e,a)=>{f.setFieldValue("ptId",null==a?void 0:a.recordId)}})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{values:f.values,endpointId:T.r.Currency.qry,name:"currencyId",label:c.currency,valueField:"recordId",displayField:"name",onChange:(e,a)=>{f.setFieldValue("currencyId",(null==a?void 0:a.recordId)||"")},error:f.touched.currencyId&&!!f.errors.currencyId,maxAccess:o})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:y.P.PriceLevel.qry,name:"plId",label:c.priceLevel,valueField:"recordId",displayField:["reference","name"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:null==f?void 0:f.values,maxAccess:o,onChange:(e,a)=>{f.setFieldValue("plId",null==a?void 0:a.recordId)}})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"tdPct",label:c.discount+" %",value:null===(n=f.values)||void 0===n?void 0:n.tdPct,maxAccess:o,onChange:e=>{f.handleChange(e)},onBlur:e=>{f.values.maxDiscount||f.setFieldValue("maxDiscount",e.target.value)},onClear:()=>f.setFieldValue("tdPct",""),error:f.touched.tdPct&&!!f.errors.tdPct})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"maxDiscount",label:c.maxDiscount,value:null===(t=f.values)||void 0===t?void 0:t.maxDiscount,maxAccess:o,onChange:f.handleChange,onClear:()=>f.setFieldValue("maxDiscount",""),error:f.touched.maxDiscount&&!!f.errors.maxDiscount})})]})})})})}var O=n(17454),q=n(61802),k=n(45937),E=e=>{let{store:a,window:n,setStore:t,...c}=e,{recordId:o}=a,{getRequest:u,postRequest:m}=(0,r.useContext)(d.$),{stack:x}=(0,q.zY)(),{platformLabels:v}=(0,r.useContext)(C.l),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:n=50}=e;return{...await u({extension:y.P.Address.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(n,"&_params=1|").concat(o)}),_startAt:a}},{query:{data:I,refetch:f},paginationParameters:b}=(0,p.J)({enabled:!!o,queryFn:h,endpointId:y.P.Address.page,datasetId:i.i.Address}),g=async e=>{let a={clientId:o,addressId:e.recordId};await m({extension:y.P.Address.del,record:JSON.stringify(a)}),s.ZP.success(v.Deleted),f()},j=async e=>{let n=a.recordId,l=await u({extension:y.P.Client.get,parameters:"_recordId=".concat(n)}).then(e=>e.record),r=(null==l?void 0:l.billAddressId)===e,d=(null==l?void 0:l.shipAddressId)===e,c=async a=>{let i={...l=await u({extension:y.P.Client.get,parameters:"_recordId=".concat(n)}).then(e=>e.record),["".concat("bill"===a?"billAddressId":"shipAddressId")]:e};await m({extension:y.P.Client.set,record:JSON.stringify(i)}),t(e=>({...e,record:i})),s.ZP.success(v.Updated),r=i.billAddressId===e,d=i.shipAddressId===e};x({Component:k.Z,props:{recordId:e,isSavedClear:!1,datasetId:i.i.ADDClient,onSubmit:async(e,a)=>{if(e){let l={clientId:n,address:e,addressId:e.recordId};await m({extension:y.P.Address.set,record:JSON.stringify(l)}),s.ZP.success(e.recordId?v.Edited:v.Added),f(),a.close()}},actions:[{key:"DefaultBilling",condition:!0,onClick:async()=>{await c("bill")},get disabled(){return!e||r}},{key:"DefaultShipping",condition:!0,onClick:async()=>{await c("ship")},get disabled(){return!e||d}}]}})},A={...I,list:((null==I?void 0:I.list)||[]).map(e=>e.address)};return(0,l.jsx)(O.Z,{addressGridData:A,addAddress:()=>{j()},delAddress:g,editAddress:e=>{j(e.recordId)},paginationParameters:b,datasetId:i.i.ADDClient,refetch:f,...c})},z=n(27723),L=n(33625),G=n(54074);function $(e){let{labels:a,maxAccess:n,obj:t,recordId:i,window:c,fetchGridData:o}=e,{getRequest:x,postRequest:v}=(0,r.useContext)(d.$),{platformLabels:p}=(0,r.useContext)(C.l),{formik:I}=(0,b.c)({initialValues:{clientId:i,categoryId:null,currencyId:null,priceType:"",value:""},enableReinitialize:!0,validateOnChange:!0,validationSchema:m.Ry({categoryId:m.Z_().required(),currencyId:m.Z_().required(),value:m.Rx().required(),priceType:m.Z_().required()}),onSubmit:async e=>{await v({extension:y.P.Price.set,record:JSON.stringify(e)}),s.ZP.success(p.Updated),c.close(),o()}}),g=!!I.values.recordId;return(0,r.useEffect)(()=>{!async function(){if(null==t?void 0:t.clientId){let e=await x({extension:y.P.Price.get,parameters:"_clientId=".concat(t.clientId,"&_categoryId=").concat(t.categoryId,"&_currencyId=").concat(t.currencyId,"&_priceType=").concat(t.priceType)});I.setValues(e.record)}}()},[]),(0,l.jsx)(G.Z,{onSave:I.handleSubmit,maxAccess:n,editMode:g,children:(0,l.jsx)(j.R,{children:(0,l.jsx)(A.Q,{children:(0,l.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:P.$.Category.qry,parameters:"_pagesize=30&_startAt=0&_name=",name:"categoryId",label:a.category,valueField:"recordId",displayField:"name",displayFieldWidth:1,required:!0,values:null==I?void 0:I.values,maxAccess:n,onChange:(e,a)=>{I.setFieldValue("categoryId",(null==a?void 0:a.recordId)||null)},error:I.touched.categoryId&&!!I.errors.categoryId})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:T.r.Currency.qry,name:"currencyId",label:a.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],values:I.values,required:!0,maxAccess:n,onChange:(e,a)=>{I.setFieldValue("currencyId",(null==a?void 0:a.recordId)||null)},error:I.touched.currencyId&&!!I.errors.currencyId})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{datasetId:f.v.PRICE_TYPE,name:"priceType",label:a.priceType,valueField:"key",required:!0,displayField:"value",values:I.values,maxAccess:n,onChange:(e,a)=>{I.setFieldValue("priceType",null==a?void 0:a.key)},error:I.touched.priceType&&!!I.errors.priceType})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"value",label:a.value,value:I.values.value,required:!0,maxAccess:n,allowNegative:!1,onChange:I.handleChange,onClear:()=>I.setFieldValue("value",""),error:I.touched.value&&!!I.errors.value})})]})})})})}var J=e=>{let{labels:a,maxAccess:n,store:i}=e,{getRequest:c,postRequest:o}=(0,r.useContext)(d.$),{recordId:u}=i,{stack:m}=(0,q.zY)(),{platformLabels:x}=(0,r.useContext)(C.l),[v,h]=(0,r.useState)([]),p=[{field:"categoryName",headerName:a.category,flex:1},{field:"ptName",headerName:a.priceType,flex:1},{field:"currencyName",headerName:a.currency,flex:1},{field:"value",headerName:a.value,flex:1}];async function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:n=50}=e,l="_startAt=".concat(a,"&_pageSize=").concat(n,"&_clientId=").concat(u),r=await c({extension:y.P.Price.qry,parameters:l});return h(r),{...r,_startAt:a}}function f(e){m({Component:$,props:{labels:a,obj:e,maxAccess:n,recordId:u,fetchGridData:I},width:500,height:400,title:a.editPrice})}(0,r.useEffect)(()=>{u&&I()},[]);let b=async e=>{await o({extension:y.P.Price.del,record:JSON.stringify(e)}),I(),s.ZP.success(x.Deleted)};return(0,l.jsx)(j.R,{children:(0,l.jsxs)(A.Q,{children:[(0,l.jsx)(L.g,{children:(0,l.jsx)(z.Z,{onAdd:()=>{f()},maxAccess:n})}),(0,l.jsx)(t.Z,{name:"price",columns:p,gridData:v,rowId:["clientId","categoryId","currencyId","priceType"],onEdit:e=>{f(e)},onDelete:b,isLoading:!1,maxAccess:n,pagination:!1})]})})},B=e=>{let{height:a,recordId:n,labels:s,maxAccess:t}=e,[d,i]=(0,r.useState)(0),[u,m]=(0,r.useState)({recordId:n||null,record:null}),x=[{label:s.clients},{label:s.sales,disabled:!u.recordId},{label:s.address,disabled:!u.recordId},{label:s.price,disabled:!u.recordId}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Y,{tabs:x,activeTab:d,setActiveTab:i,maxAccess:t}),(0,l.jsx)(c.Z,{height:a,index:0,value:d,maxAccess:t,children:(0,l.jsx)(S,{store:u,setStore:m,labels:s,maxAccess:t})}),(0,l.jsx)(c.Z,{height:a,index:1,value:d,maxAccess:t,children:(0,l.jsx)(V,{store:u,labels:s,maxAccess:t})}),(0,l.jsx)(c.Z,{height:a,index:2,value:d,maxAccess:t,children:(0,l.jsx)(E,{store:u,setStore:m})}),(0,l.jsx)(c.Z,{height:a,index:3,value:d,maxAccess:t,children:(0,l.jsx)(J,{store:u,labels:s,maxAccess:t})})]})},W=n(36908),M=n(23925),Q=n(44258),U=n(21581);function Y(e){let{labels:a,maxAccess:n,clientId:s}=e,{getRequest:t}=(0,r.useContext)(d.$),[i,c]=(0,r.useState)({address:""});async function o(){var e;let a=new Date,n=await t({extension:y.P.Client.preview,parameters:"_clientId=".concat(s,"&_asOfDate=").concat((0,_.Uf)(a))}),l=(await t({extension:y.P.Address.qry,parameters:"_params=1|".concat(s)})).list.find(e=>e.clientId===s);if(!(null==l?void 0:l.addressId))return;let r=await t({extension:T.r.Address.format,parameters:"_addressId=".concat(null==l?void 0:l.addressId)}),d=null==r?void 0:null===(e=r.record)||void 0===e?void 0:e.formattedAddress.replace(/(\r\n|\r|\n)+/g,"\r\n");c({...n.record,address:d,lastInvoiceDate:(0,_.a1)(n.record.lastInvoiceDate),lastReceiptDate:(0,_.a1)(n.record.lastReceiptDate)})}return(0,r.useEffect)(()=>{!async function(){await o()}()},[]),(0,l.jsx)(j.R,{children:(0,l.jsx)(A.Q,{children:(0,l.jsxs)(u.ZP,{container:!0,spacing:2,sx:{p:3},children:[(0,l.jsx)(u.ZP,{item:!0,xs:4,spacing:2,children:(0,l.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"yearOpenAmount",value:null==i?void 0:i.yearOpenAmount,label:a.yearOpenAmount,readOnly:!0})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"invoicedAmount",value:null==i?void 0:i.invoicedAmount,label:a.invoicedAmount,readOnly:!0})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"saleReturnAmount",value:null==i?void 0:i.saleReturnAmount,label:a.saleReturnAmount,readOnly:!0})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"receivedAmount",value:null==i?void 0:i.receivedAmount,label:a.receivedAmount,readOnly:!0})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"balance",value:null==i?void 0:i.balance,label:a.balance,readOnly:!0})})]})}),(0,l.jsx)(u.ZP,{item:!0,xs:4,spacing:2,children:(0,l.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(N.Z,{name:"lastInvoiceDate",label:a.lastInvoiceDate,value:null==i?void 0:i.lastInvoiceDate,readOnly:!0,maxAccess:n})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(N.Z,{name:"lastReceiptDate",label:a.lastReceiptDate,value:null==i?void 0:i.lastReceiptDate,readOnly:!0,maxAccess:n})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"debitNoteAmount",value:null==i?void 0:i.debitNoteAmount,label:a.debitNoteAmount,readOnly:!0})}),(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"creditNoteAmount",value:null==i?void 0:i.creditNoteAmount,label:a.creditNoteAmount,readOnly:!0})})]})}),(0,l.jsx)(u.ZP,{item:!0,xs:4,spacing:2,children:(0,l.jsx)(u.ZP,{container:!0,spacing:2,children:(0,l.jsx)(u.ZP,{item:!0,xs:12,children:(0,l.jsx)(U.Z,{name:"address",label:a.address,value:i.address,rows:6,readOnly:!0})})})})]})})})}var X=()=>{let{getRequest:e,postRequest:a}=(0,r.useContext)(d.$),{platformLabels:c}=(0,r.useContext)(C.l),{stack:o}=(0,q.zY)(),{query:{data:u},labels:m,filterBy:x,paginationParameters:v,invalidate:h,access:I,refetch:f}=(0,p.J)({queryFn:g,endpointId:y.P.Client.page,datasetId:i.i.Client,filter:{filterFn:b}});async function b(a){let{filters:n,pagination:l}=a;return(null==n?void 0:n.qry)?await e({extension:y.P.Client.snapshot,parameters:"_filter=".concat(n.qry)}):g({_startAt:l._startAt||0,params:null==n?void 0:n.params})}async function g(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:l=50,params:r}=a,s="_startAt=".concat(n,"&_pageSize=").concat(l,"&_params=").concat(r||"","&_sortField=recordId asc");return{...await e({extension:y.P.Client.page,parameters:s}),_startAt:n}}let Z=[{field:"reference",headerName:m.reference,flex:1},{field:"name",headerName:m.name,flex:1},{field:"flName",headerName:m.foreignLanguage,flex:1},,{field:"cgName",headerName:m.cGroup,flex:1},{field:"ptName",headerName:m.paymentTerm,flex:1},{field:"currencyName",headerName:m.currency,flex:1},{field:"plName",headerName:m.priceLevel,flex:1},{field:"spName",headerName:m.salesPerson,flex:1},{field:"szName",headerName:m.saleZone,flex:1},{field:"acquisitionDate",headerName:m.acquisitionDate,flex:1,type:"date"},{field:"preview",flex:.5,headerName:"",cellRenderer:e=>(0,l.jsx)(M.Z,{sx:{display:"flex",width:"100%",justifyContent:"center"},children:(0,l.jsx)(Q.Z,{size:"small",onClick:()=>P(e.data.recordId,e.data.addressId),children:(0,l.jsx)("img",{src:n(54499).default.src,alt:"preview"})})})}],P=(e,a)=>{o({Component:Y,props:{labels:m,maxAccess:I,clientId:e,addressId:a},width:800,height:400,title:m.preview})},N=async e=>{await a({extension:y.P.Client.del,record:JSON.stringify(e)}),h(),s.ZP.success(c.Deleted)};function _(e){o({Component:B,props:{labels:m,recordId:e||null,maxAccess:I},width:700,height:700,title:m.clients})}return(0,l.jsxs)(j.R,{children:[(0,l.jsx)(L.g,{children:(0,l.jsx)(W.Z,{onAdd:()=>{_()},maxAccess:I,reportName:"FIACC",filterBy:x})}),(0,l.jsx)(A.Q,{children:(0,l.jsx)(t.Z,{columns:Z,gridData:u,rowId:["recordId"],paginationParameters:v,paginationType:"api",refetch:f,onEdit:e=>{_(null==e?void 0:e.recordId)},onDelete:N,isLoading:!1,pageSize:50,maxAccess:I})})]})}},74898:function(e,a,n){"use strict";n.d(a,{N:function(){return l}});let l={Global:0,AccountGroup:10,Account:11,CashAccountGroup:20,CashAccount:21,ItemGroup:30,Item:31,ItemCategory:32,Site:33,ExpenseType:41,CostType:42,ProductionOverhead:51,TaxCode:12,PayrollGLGroup:61,PayrollEntitlementDeduction:62,AssetGroup:71,AssetClass:72}},243:function(e,a,n){"use strict";n.d(a,{r:function(){return m}});var l=n(45300),r=n(2784),s=n(38449),t=n(65947);let d=async(e,a,n)=>{try{let l=await e({extension:a,parameters:n});return a.includes("qry")?l:l.record}catch(e){return null}},i=(e,a,n)=>{let l=(e=JSON.parse(JSON.stringify(e))).record.controls,r=l.find(e=>e.controlId===n);return r?r.accessLevel=(null==a?void 0:a.mandatory)?t.$7:t.rr:(null==a?void 0:a.mandatory)?l.push({sgId:18,resourceId:"",controlId:n,accessLevel:(null==a?void 0:a.mandatory)?t.$7:t.rr}):(null==a?void 0:a.readOnly)?l.push({sgId:18,resourceId:"",controlId:n,accessLevel:(null==a?void 0:a.readOnly)?t.rr:t.$7}):l=e.record.controls.filter(e=>e.controlId!==n),{...e,record:{...e.record,controls:l}}},c=async(e,a,n)=>{let l,r;return"isExternal"!==n?null:(r="_recordId=".concat(a),l=s.r.NumberRange.get,await d(e,l,r))},o=async function(e,a){let n,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"reference",t={readOnly:!1,mandatory:!1};return t=l?{readOnly:null==(n=await c(e,l,"isExternal"))||!n.external,mandatory:null!=n&&!!n.external}:{readOnly:!1,mandatory:!0},r&&(t={readOnly:!0,mandatory:!1}),a&&t&&(a=await i(a,t,s)),{type:t,maxAccess:a,selectNraId:l}};var u=n(65950);function m(e){var a;let{access:n,readOnlyOnEditMode:s,name:t}=e,{getRequest:d}=(0,r.useContext)(u.$),[i,c]=(0,r.useState)(),m=async e=>await o(d,n,e,s,t),x=(0,l.a)({retry:!1,enabled:!0,staleTime:0,queryKey:[i,!!n],queryFn:()=>m(i)});return{refBehavior:x.data,maxAccess:null==x?void 0:null===(a=x.data)||void 0===a?void 0:a.maxAccess,changeDT(e){c(null==e?void 0:e.nraId)}}}},45937:function(e,a,n){"use strict";var l=n(52322),r=n(38449),s=n(93894),t=n(2784),d=n(65950),i=n(19473),c=n(21326);let o=e=>{let{recordId:a,editMode:n,onSubmit:o=()=>{},window:u,actions:m=[],address:x,setAddress:v,required:h=!0,...p}=e,{getRequest:I,postRequest:y}=(0,t.useContext)(d.$),{platformLabels:f}=(0,t.useContext)(i.l),[b,g]=(0,t.useState)(a||null),[j,A]=(0,t.useState)(null),C=!!x&&!!v,Z=C?x:j,P=C?v:A;(0,c.Z)({title:f.Address,window:u});let N=async e=>{if(!h){P(e),o(e,u);return}let a={...e,recordId:b||(null==Z?void 0:Z.recordId)||null},n=await y({extension:r.r.Address.set,record:JSON.stringify(a)}),l=(null==n?void 0:n.recordId)||b||null,s={...a,recordId:l,addressId:l};g(l),P(s),o(s,u)};return(0,t.useEffect)(()=>{!C&&b&&(async()=>{let e=await I({extension:r.r.Address.get,parameters:"_filter=&_recordId=".concat(b)});A((null==e?void 0:e.record)||null)})()},[b,C]),(0,l.jsx)(s.O,{editMode:n,setAddress:P,address:Z,onSubmit:N,actions:m,window:u,...p})};o.width=600,o.height=500,a.Z=o},93894:function(e,a,n){"use strict";n.d(a,{O:function(){return u}});var l=n(52322),r=n(2784),s=n(82737),t=n(13073),d=n(80983),i=n(31389),c=n(33625),o=n(48601);let u=e=>{let{setAddress:a,address:n,editMode:u,window:m,readOnly:x,allowPost:v=!0,optional:h=!1,onSubmit:p,isSavedClear:I=!0,isCleared:y=!0,changeClear:f=!1,actions:b=[],...g}=e,[j,A]=(0,r.useState)(!h),[C,Z]=(0,r.useState)({}),{formik:P}=(0,d.c)({maxAccess:C.maxAccess,initialValues:{recordId:null,name:"",countryId:null,countryName:"",stateId:null,stateName:"",cityId:null,city:"",street1:"",street2:"",email1:"",email2:"",phone:"",phone2:"",phone3:"",addressId:null,postalCode:"",cityDistrictId:null,cityDistrict:"",bldgNo:"",unitNo:"",subNo:"",poBox:""},validateOnChange:!0,validateOnBlur:!0,validationSchema:o.Ry({...C.validate}),onSubmit:e=>{a(e),v?p(e,m):m.close()}});return(0,r.useEffect)(()=>{h&&(P.values.name||P.values.street1||P.values.countryId||P.values.cityId)&&A(!0),!h||P.values.name||P.values.street1||P.values.countryId||P.values.cityId||A(!1)},[P.values]),(0,l.jsx)(s.Z,{form:P,maxAccess:C.maxAccess,isInfo:!1,disabledSubmit:x,editMode:u,isSavedClear:I,isCleared:y,onClear:f?()=>{P.resetForm({values:P.initialValues})}:void 0,actions:b,...g,children:(0,l.jsx)(i.R,{children:(0,l.jsx)(c.g,{children:(0,l.jsx)(t.Z,{addressValidation:P,readOnly:x,required:j,setFormik:Z,address:n,...g})})})})}},17454:function(e,a,n){"use strict";var l=n(52322),r=n(69387),s=n(27723),t=n(31389),d=n(33625),i=n(62362),c=n(50023),o=n(26612);a.Z=e=>{let{addressGridData:a,addAddress:n,delAddress:u,editAddress:m,paginationParameters:x,refetch:v,datasetId:h}=e,{labels:p,access:I}=(0,c.Z)({datasetId:o.i.Address,DatasetIdAccess:h}),y=[{field:"name",headerName:p.name,flex:1},{field:"street1",headerName:p.street1,flex:1},{field:"street2",headerName:p.street2,flex:1},{field:"city",headerName:p.city,flex:1},{field:"phone",headerName:p.phone,flex:1},{field:"email1",headerName:p.email1,flex:1},{field:"email2",headerName:p.email2,flex:1}];return(0,l.jsxs)(t.R,{children:[(0,l.jsx)(d.g,{children:(0,l.jsx)(s.Z,{onAdd:n,maxAccess:I})}),(0,l.jsx)(i.Q,{children:(0,l.jsx)(r.Z,{name:"address",columns:y,gridData:a,rowId:["recordId"],onEdit:m,onDelete:u,isLoading:!1,maxAccess:I,pageSize:50,refetch:v,paginationParameters:x,paginationType:"api"})})]})}},29326:function(e,a,n){"use strict";var l=n(52322);n(2784);var r=n(23925),s=n(13980),t=n.n(s),d=n(95291),i=n.n(d),c=n(65947);let o=e=>{var a,n,s;let{children:t,value:d,index:o,maxAccess:u,...m}=e,x="".concat(e.name||"tab",".").concat(o),{accessLevel:v}=null!==(s=(null!==(n=null==u?void 0:null===(a=u.record)||void 0===a?void 0:a.controls)&&void 0!==n?n:[]).find(e=>e.controlId===x))&&void 0!==s?s:{accessLevel:0};if(v===c.A1)return null;let h=d===o;return(0,l.jsx)(r.Z,{role:"tabpanel",hidden:!h,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),className:"".concat(i().tabPanel," ").concat(h?i().active:i().hidden),...m,children:t})};o.propTypes={children:t().node,index:t().number.isRequired,value:t().number.isRequired},a.Z=o},9522:function(e,a,n){"use strict";n.d(a,{Y:function(){return m}});var l=n(52322),r=n(23925),s=n(54582),t=n(68696),d=n(44258),i=n(2784),c=n(99266),o=n(52614),u=n.n(o);let m=e=>{var a,n,o,m,x;let{tabs:v,activeTab:h,setActiveTab:p,maxAccess:I,name:y="tab"}=e,f=(null==I?void 0:null===(n=I.record)||void 0===n?void 0:null===(a=n.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(y,".")))}).map(e=>e.controlId.split(".")[1]))||[],b=null==v?void 0:null===(o=v.map((e,a)=>({...e,id:a})))||void 0===o?void 0:o.filter((e,a)=>!f.includes(String(a))),g=null===(m=b[h])||void 0===m?void 0:m.id,j=null===(x=b[h])||void 0===x?void 0:x.disabled;return(0,i.useEffect)(()=>{g>=0&&!j&&h!=g&&p(g)},[]),(0,l.jsx)(r.Z,{className:u().tabsContainer,children:(0,l.jsx)(r.Z,{className:u().tabsWrapper,children:(0,l.jsx)(s.Z,{value:h,onChange:(e,a)=>p(a),variant:"scrollable",scrollButtons:b.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==b?void 0:b.map(e=>(0,l.jsx)(t.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,l.jsxs)(r.Z,{display:"flex",alignItems:"center",children:[(0,l.jsx)("span",{children:e.label}),e.id===h&&(null==e?void 0:e.onRefetch)&&(0,l.jsx)(d.Z,{size:"small",className:u().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,l.jsx)(c.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[92515,2494,36908,13073,49774,92888,40179],function(){return e(e.s=71693)}),_N_E=e.O()}]);