(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68888],{59687:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-balance-tfr-dtd/[functionId]",function(){return a(59417)}])},59417:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return w}});var t=a(52322),d=a(2784),r=a(62202),l=a(69387),s=a(27723),c=a(65950),o=a(71987),i=a(26612),u=a(31389),p=a(33625),f=a(62362),I=a(61802),m=a(19473),v=a(63165),x=a(25870),y=a(60218),h=a(48601),D=a(82737),g=a(8661),F=a(80983),_=a(38449),A=a(19689),T=a(22341);function j(e){var n,a,l,s,p;let{labels:I,maxAccess:v,recordId:j,functionId:w}=e,{getRequest:N,postRequest:Z}=(0,d.useContext)(c.$),{platformLabels:P,userDefaultsData:k}=(0,d.useContext)(m.l),C=(0,o.E)({endpointId:x.H.FIDocTypeDefaults.page}),b=parseInt(null==k?void 0:null===(a=k.list)||void 0===a?void 0:null===(n=a.find(e=>"spId"===e.key))||void 0===n?void 0:n.value),{formik:E}=(0,F.c)({initialValues:{dtId:"",plantId:"",spId:b,crossAccountBalanceTransfer:!1,recordId:j},maxAccess:v,validateOnChange:!0,validationSchema:h.Ry({dtId:h.Z_().required()}),onSubmit:async e=>{await Z({extension:x.H.FIDocTypeDefaults.set,record:JSON.stringify(e)}),e.recordId||E.setFieldValue("recordId",e.dtId),r.ZP.success(e.dtId?P.Edited:P.Added),C()}}),R=!!E.values.recordId;return(0,d.useEffect)(()=>{!async function(){if(j){let e=await N({extension:x.H.FIDocTypeDefaults.get,parameters:"_dtId=".concat(j)});E.setValues({...e.record,recordId:j})}}()},[]),(0,t.jsx)(D.Z,{resourceId:i.i.FIDocTypeDefaults,form:E,maxAccess:v,editMode:R,children:(0,t.jsx)(u.R,{children:(0,t.jsx)(f.Q,{children:(0,t.jsxs)(y.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(y.ZP,{item:!0,xs:12,children:(0,t.jsx)(g.Z,{endpointId:_.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(w),name:"dtId",required:!0,label:I.doctype,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:R,valueField:"recordId",displayField:["reference","name"],values:E.values,maxAccess:v,onChange:(e,n)=>{E.setFieldValue("dtId",(null==n?void 0:n.recordId)||null)},error:E.touched.dtId&&!!E.errors.dtId})}),(0,t.jsx)(y.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{name:"crossAccountBalanceTransfer",value:null===(l=E.values)||void 0===l?void 0:l.crossAccountBalanceTransfer,onChange:e=>E.setFieldValue("crossAccountBalanceTransfer",e.target.checked),label:I.crossAccountBalanceTransfer,maxAccess:v})}),(0,t.jsx)(y.ZP,{item:!0,xs:12,children:(0,t.jsx)(g.Z,{endpointId:_.r.Plant.qry,name:"plantId",label:I.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:E.values,maxAccess:v,onChange:(e,n)=>{E.setFieldValue("plantId",(null==n?void 0:n.recordId)||null)},error:E.touched.plantId&&!!E.errors.plantId})}),(0,t.jsx)(y.ZP,{item:!0,xs:12,children:(0,t.jsx)(g.Z,{endpointId:T.P.SalesPerson.qry,name:"spId",label:I.salesPerson,valueField:"recordId",columnsInDropDown:[{key:"spRef",value:"Reference"},{key:"name",value:"Name"}],displayField:["spRef","name"],values:E.values,onChange:(e,n)=>{E.setFieldValue("spId",(null==n?void 0:n.recordId)||null)},maxAccess:v,error:(null==E?void 0:null===(s=E.touched)||void 0===s?void 0:s.spId)&&!!(null==E?void 0:null===(p=E.errors)||void 0===p?void 0:p.spId)})})]})})})})}var w=()=>{let{getRequest:e,postRequest:n}=(0,d.useContext)(c.$),{platformLabels:a}=(0,d.useContext)(m.l),{stack:y}=(0,I.zY)(),{functionId:h}=(0,v.F)();async function D(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pagination:{_startAt:a=0,_pageSize:t=50}}=n;return{...await e({extension:x.H.FIDocTypeDefaults.page,parameters:"_startAt=".concat(a,"&_pageSize=").concat(t,"&_functionId=").concat(h)}),_startAt:a}}let{query:{data:g},labels:F,access:_,paginationParameters:A,invalidate:T,refetch:w}=(0,o.J)({endpointId:x.H.FIDocTypeDefaults.page,datasetId:i.i.FIDocTypeDefaults,filter:{filterFn:D,default:{functionId:h}}}),N=[{field:"dtName",headerName:F.doctype,flex:1},{field:"crossAccountBalanceTransfer",headerName:F.crossAccountBalanceTransfer,type:"checkbox",flex:1},{field:"plantName",headerName:F.plant,flex:1}],Z=async e=>{await n({extension:x.H.FIDocTypeDefaults.del,record:JSON.stringify(e)}),T(),r.ZP.success(a.Deleted)};function P(e){y({Component:j,props:{labels:F,functionId:h,recordId:e,maxAccess:_},width:500,height:360,title:F.doctypeDefault})}return(0,t.jsxs)(u.R,{children:[(0,t.jsx)(p.g,{children:(0,t.jsx)(s.Z,{onAdd:()=>{P()},maxAccess:_})}),(0,t.jsx)(f.Q,{children:(0,t.jsx)(l.Z,{columns:N,gridData:g,rowId:["dtId"],onEdit:e=>{P(null==e?void 0:e.dtId)},onDelete:Z,isLoading:!1,pageSize:50,paginationParameters:A,refetch:w,paginationType:"api",maxAccess:_})})]})}},63165:function(e,n,a){"use strict";a.d(n,{F:function(){return r}});var t=a(5632),d=a(2784);let r=()=>{let e=(0,t.useRouter)(),[n,a]=(0,d.useState)(e.query);return n}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=59687)}),_N_E=e.O()}]);