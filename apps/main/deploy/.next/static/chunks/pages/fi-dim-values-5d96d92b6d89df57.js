(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36169],{30677:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-dim-values",function(){return i(5252)}])},5252:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return V}});var a=i(52322),s=i(2784),l=i(62202),r=i(69387),t=i(27723),d=i(65950),o=i(26612),u=i(71987),c=i(31389),m=i(33625),x=i(62362),f=i(61802),h=i(19473),y=i(25870),v=i(38449),p=i(60218),g=i(48601),q=i(82737),_=i(5088),j=i(80983),Z=i(91406);function C(e){var n;let{labels:i,maxAccess:r,recordId:t,dimValue:m}=e,{getRequest:f,postRequest:v}=(0,s.useContext)(d.$),{platformLabels:C}=(0,s.useContext)(h.l),w="string"==typeof m?null===(n=m.match(/\d+/))||void 0===n?void 0:n[0]:null,V=(0,u.E)({endpointId:y.H.DimensionValue.qry}),{formik:D}=(0,j.c)({initialValues:{id:null,name:"",dimension:w},maxAccess:r,validateOnChange:!0,validationSchema:g.Ry({name:g.Z_().required(),id:g.Z_().required()}),onSubmit:async e=>{await v({extension:y.H.DimensionValue.set,record:JSON.stringify(e)}),l.ZP.success(e.id?C.Edited:C.Added),V()}});return(0,s.useEffect)(()=>{!async function(){if(D.values.dimension&&t){let e=await f({extension:y.H.DimensionValue.get,parameters:"_Id=".concat(t,"&_dimension=").concat(D.values.dimension)});D.setValues(e.record)}}()},[]),(0,a.jsx)(q.Z,{resourceId:o.i.DimensionsValues,form:D,maxAccess:r,isInfo:!1,children:(0,a.jsx)(c.R,{children:(0,a.jsx)(x.Q,{children:(0,a.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(Z.Z,{name:"id",label:i.id,value:D.values.id,required:!0,maxAccess:r,onChange:D.handleChange,onClear:()=>D.setFieldValue("id",""),error:D.touched.id&&!!D.errors.id})}),(0,a.jsx)(p.ZP,{item:!0,xs:12,children:(0,a.jsx)(_.Z,{name:"name",label:i.name,value:D.values.name,required:!0,rows:2,maxAccess:r,onChange:D.handleChange,onClear:()=>D.setFieldValue("name",""),error:D.touched.name&&!!D.errors.name})})]})})})})}var w=i(3191),V=()=>{let{getRequest:e,postRequest:n}=(0,s.useContext)(d.$),{platformLabels:i}=(0,s.useContext)(h.l),{stack:g}=(0,f.zY)(),[q,_]=(0,s.useState)([]),{query:{data:j},labels:Z,paginationParameters:V,refetch:D,invalidate:P,filters:E,filterBy:b,clearFilter:A,access:I}=(0,u.J)({datasetId:o.i.DimensionsValues,endpointId:y.H.DimensionValue.qry,filter:{filterFn:N}});async function N(n){var i;let{filters:a}=n;return await e({extension:y.H.DimensionValue.qry,parameters:"_filter=".concat(a.qry,"&_dimension=").concat(null===(i=a.qry.match(/\d+/))||void 0===i?void 0:i[0])})}let k=[{field:"id",headerName:Z.id,flex:1},{field:"name",headerName:Z.name,flex:1}],H=async e=>{await n({extension:y.H.DimensionValue.del,record:JSON.stringify(e)}),P(),l.ZP.success(i.Deleted)};function S(e){g({Component:C,props:{labels:Z,recordId:e,maxAccess:I,invalidate:P,dimValue:null==E?void 0:E.qry},width:600,height:500,title:Z.dimValues})}return(0,s.useEffect)(()=>{(async()=>{let n=await e({extension:v.r.Defaults.qry,parameters:"_filter=tpaDimension"});if(n){var i;let e=n.list.filter(e=>e.value);_(e),b("qry",null===(i=e[0])||void 0===i?void 0:i.key)}})()},[]),(0,a.jsxs)(c.R,{children:[(0,a.jsx)(m.g,{children:(0,a.jsxs)(p.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,a.jsx)(p.ZP,{item:!0,children:(0,a.jsx)(t.Z,{onAdd:()=>{E.qry&&S()},maxAccess:I,labels:Z})}),(0,a.jsx)(p.ZP,{item:!0,xs:4,children:(0,a.jsx)(w.Z,{label:Z.dimensions,valueField:"key",displayField:["value"],store:q,value:null==E?void 0:E.qry,maxAccess:I,onChange:(e,n)=>{(null==n?void 0:n.key)?b("qry",null==n?void 0:n.key):A("qry")},error:!E.qry})})]})}),(0,a.jsx)(x.Q,{children:(0,a.jsx)(r.Z,{columns:k,gridData:E.qry?j:{list:[],count:0},rowId:["id"],onEdit:e=>{S(null==e?void 0:e.id)},onDelete:H,pageSize:50,maxAccess:I,refetch:D,paginationParameters:V,paginationType:"api"})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=30677)}),_N_E=e.O()}]);