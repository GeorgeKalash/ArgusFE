(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94696,47441,84622,57981],{10264:function(e){var a;a=function(){"use strict";var e="minute",a=/[+-]\d\d(?::?\d\d)?/g,t=/([+-]|\d\d)/g;return function(l,n,r){var s=n.prototype;r.utc=function(e){var a={date:e,utc:!0,args:arguments};return new n(a)},s.utc=function(a){var t=r(this.toDate(),{locale:this.$L,utc:!0});return a?t.add(this.utcOffset(),e):t},s.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var d=s.parse;s.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),d.call(this,e)};var o=s.init;s.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else o.call(this)};var i=s.utcOffset;s.utcOffset=function(l,n){var r=this.$utils().u;if(r(l))return this.$u?0:r(this.$offset)?i.call(this):this.$offset;if("string"==typeof l&&null===(l=function(e){void 0===e&&(e="");var l=e.match(a);if(!l)return null;var n=(""+l[0]).match(t)||["-",0,0],r=n[0],s=60*+n[1]+ +n[2];return 0===s?0:"+"===r?s:-s}(l)))return this;var s=16>=Math.abs(l)?60*l:l;if(0===s)return this.utc(n);var d=this.clone();if(n)return d.$offset=s,d.$u=!1,d;var o=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(d=this.local().add(s+o,e)).$offset=s,d.$x.$localOffset=o,d};var c=s.format;s.format=function(e){var a=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,a)},s.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var u=s.toDate;s.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var m=s.diff;s.diff=function(e,a,t){if(e&&this.$u===e.$u)return m.call(this,e,a,t);var l=this.local(),n=r(e).local();return m.call(l,n,a,t)}}},e.exports=a()},32256:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/default",function(){return t(77193)}])},77193:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var l=t(52322);t(2784);var n=t(35138),r=t(15755),s=t(23371),d=()=>{let{dashboardId:e}=JSON.parse(window.sessionStorage.getItem("userData"));return(0,l.jsx)(l.Fragment,{children:(()=>{switch(e){case 1:return(0,l.jsx)(n.Z,{});case 2:return(0,l.jsx)(s.Z,{});case 3:return(0,l.jsx)(r.Z,{});default:return null}})()})}},15755:function(e,a,t){"use strict";var l=t(73235),n=t(52322),r=t(2784),s=t(3854),d=t(65950),o=t(30043),i=t(13781),c=t(26612),u=t(50023),m=t(54073),v=t.n(m),p=t(19473);function y(){let e=(0,l._)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  width: 100%;\n  height: 100%;\n"]);return y=function(){return e},e}function h(){let e=(0,l._)(["\n  width: 100%;\n  height: auto;\n  padding: 10px;\n  background: rgb(204, 204, 204);\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));\n  gap: 10px;\n"]);return h=function(){return e},e}function f(){let e=(0,l._)(["\n  background: white;\n  border-radius: 10px;\n  padding: 10px;\n  height: auto;\n  display: flex;\n  flex-direction: column;\n"]);return f=function(){return e},e}function x(){let e=(0,l._)(["\n  margin-bottom: 10px;\n  text-align: center;\n"]);return x=function(){return e},e}let I=s.ZP.div(y()),g=s.ZP.div(h()),C=s.ZP.div(f()),D=s.ZP.h2(x());a.Z=()=>{let{getRequest:e,LoadingOverlay:a}=(0,r.useContext)(d.$),{defaultsData:t}=(0,r.useContext)(p.l),[l,s]=(0,r.useState)([]),[m,y]=(0,r.useState)(!0),{labels:h}=(0,u.Z)({datasetId:c.i.UserDashboard}),f=v()(()=>y(!1),200),x=async()=>{var a;y(!0);let l=await e({extension:o.U.GenerateTrip.root}),n=l.list.map(async a=>{var t,l,n;let r=await e({extension:o.U.Volume.vol,parameters:"_parentId=".concat(a.recordId)});return{zoneName:a.zoneName,volumes:null!==(n=null==r?void 0:null===(l=r.record)||void 0===l?void 0:null===(t=l.saleZoneOrderVolumeSummaries)||void 0===t?void 0:t.map(e=>{var a;return{subZone:null!==(a=e.zoneName)&&void 0!==a?a:"",volume:e.volume}}))&&void 0!==n?n:[]}}),r=await Promise.all(n),d=null==t?void 0:null===(a=t.list)||void 0===a?void 0:a.find(e=>"minZoneVolumeDB"===e.key),i=d&&void 0!==d.value&&Number(d.value)||1/0;s(r.map((e,a)=>{var t,n;return{zoneName:null!==(n=null===(t=l.list[a])||void 0===t?void 0:t.name)&&void 0!==n?n:"Unknown Zone",volumes:e.volumes.filter(e=>e.subZone).slice(0,i)}})),f()};return((0,r.useEffect)(()=>{x();let e=setInterval(x,3e5);return()=>clearInterval(e)},[t]),m)?(0,n.jsx)(a,{}):(0,n.jsx)(I,{children:(0,n.jsx)(g,{children:l.map((e,a)=>(0,n.jsxs)(C,{children:[(0,n.jsxs)(D,{children:[h.deliveryVolumes," - ",e.zoneName]}),(0,n.jsx)(i.xe,{labels:e.volumes.map(e=>e.subZone),data:e.volumes.map(e=>e.volume),label:h.deliveryVolumes})]},a))})})}},35138:function(e,a,t){"use strict";t.d(a,{Z:function(){return R}});var l=t(52322),n=t(2784),r=t(65950),s=t(38449),d=t(13781),o=t(1685),i=t(57590),c=t(26612),u=t(50023),m=t(54073),v=t.n(m);let p={NEW_CUSTOMERS_YTD:1,SALES_YTD:2,PROFIT_YTD:3,TODAYS_TOTAL_RETAIL_SALES:13,TODAYS_TOTAL_SALES_ORDERS:14,RETAIL_SALES_YTD:15,CREDIT_SALES_YTD:16,CREDIT_SALES_RETURNS_YTD:17,OPEN_SALES_ORDERS:18};var y=t(69387),h=t(23925),f=t(9522),x=t(29326),I=t(6035),g=t(84100),C=t(39812),D=t(38836),b=t(19505),S=t.n(b),R=()=>{var e,a,t,m,b,R,q,w,j,P,T,Z,N,F,k,O,A,V,_,L,M,E,B,J,H,U,Y,G,W,Q,$,z,K,X,ee,ea,et,el,en,er,es,ed,eo,ei,ec,eu,em,ev,ep,ey,eh,ef,ex,eI,eg,eC,eD,eb,eS,eR,eq,ew,ej,eP,eT,eZ,eN,eF,ek,eO,eA,eV,e_,eL,eM,eE,eB,eJ,eH,eU,eY,eG,eW,eQ,e$,ez,eK,eX,e0,e2,e1,e3,e8,e6,e9,e4,e5,e7,ae,aa,at,al,an,ar,as,ad,ao,ai,ac,au,am,av,ap,ay,ah,af,ax,aI,ag,aC,aD,ab,aS,aR,aq,aw,aj,aP,aT,aZ,aN,aF;let{getRequest:ak,LoadingOverlay:aO}=(0,n.useContext)(r.$),[aA,aV]=(0,n.useState)(null),[a_,aL]=(0,n.useState)(null),[aM,aE]=(0,n.useState)(!0),[aB,aJ]=(0,n.useState)(0),aH=(0,o.m)("userData"),aU=aH.userId,aY=aH.languageId,aG=n.useRef(ak);(0,n.useEffect)(()=>{aG.current=ak},[ak]);let aW=n.useRef(null);aW.current||(aW.current=v()(()=>{aE(!1)},500)),(0,n.useEffect)(()=>()=>{aW.current&&aW.current.cancel()},[]);let{labels:aQ,access:a$}=(0,u.Z)({datasetId:c.i.UserDashboard});if((0,n.useEffect)(()=>{let e=!1;return(async()=>{try{aE(!0);let a=await aG.current({extension:s.r.DynamicDashboard.qry,parameters:"_userId=".concat(aU)});if(e)return;aL(a.list);let[t,l,n,r]=await Promise.all([aG.current({extension:i.T.dashboard}),aG.current({extension:i.T.SalesPersonDashboard.spDB}),aG.current({extension:I.f.TimeVariation.qry2,parameters:"_dayId=".concat((0,C.Uf)(new Date))}),aG.current({extension:s.r.KeyValueStore,parameters:"_dataset=".concat(g.v.TIME_CODE,"&_language=").concat(aY)})]);if(e)return;let d=new Set((n.list||[]).map(e=>e.timeCode)),o=(r.list||[]).filter(e=>d.has(Number(e.key))).map(e=>({label:e.value,timeCode:Number(e.key),disabled:!1})),c=o.reduce((e,a)=>(e[a.timeCode]={list:(n.list||[]).filter(e=>e.timeCode===a.timeCode)},e),{});aV({dashboard:null==t?void 0:t.record,sp:null==l?void 0:l.record,hr:{timeVariationDetails:n.list||[],tabs:o,groupedData:c}}),aW.current&&aW.current()}catch(a){e||aE(!1)}})(),()=>{e=!0}},[aU,aY]),aM)return(0,l.jsx)(aO,{});let az=e=>!!Array.isArray(a_)&&a_.some(a=>a.appletId===e);return(0,l.jsx)("div",{className:S().frame,children:(0,l.jsxs)("div",{className:S().container,children:[az(c.i.TodayRetailOrders)&&(0,l.jsx)("div",{className:S().topRow,children:(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsxs)("div",{className:S().summaryCard,children:[(0,l.jsx)("h2",{className:S().title,children:aQ.retailSales}),(0,l.jsx)("strong",{className:S().strong,children:(null!==(ag=null==aA?void 0:null===(t=aA.dashboard)||void 0===t?void 0:null===(a=t.summaryFigures)||void 0===a?void 0:null===(e=a.find(e=>e.itemId===p.TODAYS_TOTAL_RETAIL_SALES))||void 0===e?void 0:e.amount)&&void 0!==ag?ag:0).toLocaleString()})]}),(0,l.jsx)(d.Tq,{labels:(null==aA?void 0:null===(b=aA.dashboard)||void 0===b?void 0:null===(m=b.todaysRetailSales)||void 0===m?void 0:m.map(e=>e.posRef))||[],data:(null==aA?void 0:null===(q=aA.dashboard)||void 0===q?void 0:null===(R=q.todaysRetailSales)||void 0===R?void 0:R.map(e=>e.sales))||[],label:aQ.retailSales})]})}),az(c.i.MyYearlySalesPerformance)&&(0,l.jsx)("div",{className:S().topRow,children:(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.myYearlySalesPerformance})}),(0,l.jsx)(d.tK,{labels:(null==aA?void 0:null===(j=aA.sp)||void 0===j?void 0:null===(w=j.myYearlySalesPerformanceList)||void 0===w?void 0:w.map(e=>e.year))||[],data1:(null==aA?void 0:null===(T=aA.sp)||void 0===T?void 0:null===(P=T.myYearlySalesPerformanceList)||void 0===P?void 0:P.map(e=>e.sales))||[],data2:(null==aA?void 0:null===(N=aA.sp)||void 0===N?void 0:null===(Z=N.myYearlySalesPerformanceList)||void 0===Z?void 0:Z.map(e=>e.target))||[],label1:aQ.sales,label2:aQ.target})]})}),az(c.i.MyMonthlySalesPerformance)&&(0,l.jsx)("div",{className:S().topRow,children:(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.myMonthlySalesPerformance})}),(0,l.jsx)(d.tK,{labels:(null==aA?void 0:null===(k=aA.sp)||void 0===k?void 0:null===(F=k.myMonthlySalesPerformanceList)||void 0===F?void 0:F.map(e=>e.monthName))||[],data1:(null==aA?void 0:null===(A=aA.sp)||void 0===A?void 0:null===(O=A.myMonthlySalesPerformanceList)||void 0===O?void 0:O.map(e=>e.sales))||[],data2:(null==aA?void 0:null===(_=aA.sp)||void 0===_?void 0:null===(V=_.myMonthlySalesPerformanceList)||void 0===V?void 0:V.map(e=>e.target))||[],label1:aQ.sales,label2:aQ.target})]})}),az(c.i.SalesTeamOrdersSummary)&&(0,l.jsx)("div",{className:S().topRow,children:(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.salesTeamOrdersSummary})}),(0,l.jsx)(d.tK,{labels:(null==aA?void 0:null===(M=aA.dashboard)||void 0===M?void 0:null===(L=M.salesTeamOrdersSummaries)||void 0===L?void 0:L.map(e=>e.spRef))||[],data1:(null==aA?void 0:null===(B=aA.dashboard)||void 0===B?void 0:null===(E=B.salesTeamOrdersSummaries)||void 0===E?void 0:E.map(e=>e.amount))||[],data2:(null==aA?void 0:null===(H=aA.dashboard)||void 0===H?void 0:null===(J=H.salesTeamOrdersSummaries)||void 0===J?void 0:J.map(e=>e.orderCount))||[],label1:aQ.amount,label2:aQ.orderCount,hasLegend:!0,rotation:-90})]})}),(0,l.jsxs)("div",{className:S().middleRow,children:[az(c.i.MyYearlyUnitsSoldList)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.myYearlyUnitsSoldList})}),(0,l.jsx)(d.zg,{labels:(null==aA?void 0:null===(Y=aA.sp)||void 0===Y?void 0:null===(U=Y.myYearlyUnitsSoldList)||void 0===U?void 0:U.map(e=>e.year))||[],data:(null==aA?void 0:null===(W=aA.sp)||void 0===W?void 0:null===(G=W.myYearlyUnitsSoldList)||void 0===G?void 0:G.map(e=>e.qty))||[],label:aQ.qty})]}),az(c.i.MyYearlyGrowthInUnitsSoldList)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.myYearlyGrowthInUnitsSoldList})}),(0,l.jsx)(d.zg,{labels:(null==aA?void 0:null===($=aA.sp)||void 0===$?void 0:null===(Q=$.myYearlyGrowthInUnitsSoldList)||void 0===Q?void 0:Q.map(e=>e.year))||[],data:(null==aA?void 0:null===(K=aA.sp)||void 0===K?void 0:null===(z=K.myYearlyGrowthInUnitsSoldList)||void 0===z?void 0:z.map(e=>e.qty))||[],label:aQ.qty})]}),az(c.i.MyYearlyClientsAcquiredList)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.myYearlyClientsAcquiredList})}),(0,l.jsx)(d.zg,{labels:(null==aA?void 0:null===(ee=aA.sp)||void 0===ee?void 0:null===(X=ee.myYearlyClientsAcquiredList)||void 0===X?void 0:X.map(e=>e.year))||[],data:(null==aA?void 0:null===(et=aA.sp)||void 0===et?void 0:null===(ea=et.myYearlyClientsAcquiredList)||void 0===ea?void 0:ea.map(e=>e.qty))||[],label:aQ.qty})]}),az(c.i.MyYearlyGrowthInClientsAcquiredList)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.myYearlyGrowthInClientsAc})}),(0,l.jsx)(d.zg,{labels:(null==aA?void 0:null===(en=aA.sp)||void 0===en?void 0:null===(el=en.myYearlyGrowthInClientsAcquiredList)||void 0===el?void 0:el.map(e=>e.year))||[],data:(null==aA?void 0:null===(es=aA.sp)||void 0===es?void 0:null===(er=es.myYearlyGrowthInClientsAcquiredList)||void 0===er?void 0:er.map(e=>e.qty))||[],label:aQ.qty})]})]}),az(c.i.TodayPlantSales)&&(0,l.jsx)("div",{className:S().topRow,children:(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsxs)("div",{className:S().summaryCard,children:[(0,l.jsx)("h2",{className:S().title,children:aQ.todayPlantSales}),(0,l.jsx)("strong",{className:S().strong,children:((null==aA?void 0:null===(eo=aA.dashboard)||void 0===eo?void 0:null===(ed=eo.todaysCreditSales)||void 0===ed?void 0:ed.map(e=>e.sales).reduce((e,a)=>e+a,0))||0).toLocaleString()})]}),(0,l.jsx)(d.Tq,{labels:(null==aA?void 0:null===(ec=aA.dashboard)||void 0===ec?void 0:null===(ei=ec.todaysCreditSales)||void 0===ei?void 0:ei.map(e=>e.plantRef))||[],data:(null==aA?void 0:null===(em=aA.dashboard)||void 0===em?void 0:null===(eu=em.todaysCreditSales)||void 0===eu?void 0:eu.map(e=>e.sales))||[],label:aQ.todayPlantSales,ratio:5})]})}),(0,l.jsxs)("div",{className:S().middleRow,children:[(az(c.i.NewCustomers)||az(c.i.GlobalSalesYTD))&&(0,l.jsxs)("div",{className:S().summaryGrid,children:[az(c.i.GlobalSalesYTD)&&(0,l.jsx)(l.Fragment,{children:[{title:aQ.todaysSale,rows:[{label:aQ.hoSalesOrders,value:null!==(aC=null==aA?void 0:null===(ey=aA.dashboard)||void 0===ey?void 0:null===(ep=ey.summaryFigures)||void 0===ep?void 0:null===(ev=ep.find(e=>e.itemId===p.TODAYS_TOTAL_SALES_ORDERS))||void 0===ev?void 0:ev.amount)&&void 0!==aC?aC:0},{label:aQ.retailSales,value:null!==(aD=null==aA?void 0:null===(ex=aA.dashboard)||void 0===ex?void 0:null===(ef=ex.summaryFigures)||void 0===ef?void 0:null===(eh=ef.find(e=>e.itemId===p.TODAYS_TOTAL_RETAIL_SALES))||void 0===eh?void 0:eh.amount)&&void 0!==aD?aD:0},{label:aQ.total,value:(null!==(ab=null==aA?void 0:null===(eC=aA.dashboard)||void 0===eC?void 0:null===(eg=eC.summaryFigures)||void 0===eg?void 0:null===(eI=eg.find(e=>e.itemId===p.TODAYS_TOTAL_SALES_ORDERS))||void 0===eI?void 0:eI.amount)&&void 0!==ab?ab:0)+(null!==(aS=null==aA?void 0:null===(eS=aA.dashboard)||void 0===eS?void 0:null===(eb=eS.summaryFigures)||void 0===eb?void 0:null===(eD=eb.find(e=>e.itemId===p.TODAYS_TOTAL_RETAIL_SALES))||void 0===eD?void 0:eD.amount)&&void 0!==aS?aS:0)}]},{title:aQ.globalSales,rows:[{label:aQ.hoSales,value:null!==(aR=null==aA?void 0:null===(ew=aA.dashboard)||void 0===ew?void 0:null===(eq=ew.summaryFigures)||void 0===eq?void 0:null===(eR=eq.find(e=>e.itemId===p.CREDIT_SALES_YTD))||void 0===eR?void 0:eR.amount)&&void 0!==aR?aR:0},{label:aQ.retailSales,value:null!==(aq=null==aA?void 0:null===(eT=aA.dashboard)||void 0===eT?void 0:null===(eP=eT.summaryFigures)||void 0===eP?void 0:null===(ej=eP.find(e=>e.itemId===p.RETAIL_SALES_YTD))||void 0===ej?void 0:ej.amount)&&void 0!==aq?aq:0},{label:aQ.total,value:(null!==(aw=null==aA?void 0:null===(eF=aA.dashboard)||void 0===eF?void 0:null===(eN=eF.summaryFigures)||void 0===eN?void 0:null===(eZ=eN.find(e=>e.itemId===p.CREDIT_SALES_YTD))||void 0===eZ?void 0:eZ.amount)&&void 0!==aw?aw:0)+(null!==(aj=null==aA?void 0:null===(eA=aA.dashboard)||void 0===eA?void 0:null===(eO=eA.summaryFigures)||void 0===eO?void 0:null===(ek=eO.find(e=>e.itemId===p.RETAIL_SALES_YTD))||void 0===ek?void 0:ek.amount)&&void 0!==aj?aj:0)}]},{title:aQ.miscData,rows:[{label:aQ.openSo,value:null!==(aP=null==aA?void 0:null===(eL=aA.dashboard)||void 0===eL?void 0:null===(e_=eL.summaryFigures)||void 0===e_?void 0:null===(eV=e_.find(e=>e.itemId===p.OPEN_SALES_ORDERS))||void 0===eV?void 0:eV.amount)&&void 0!==aP?aP:0},{label:aQ.returnSales,value:null!==(aT=null==aA?void 0:null===(eB=aA.dashboard)||void 0===eB?void 0:null===(eE=eB.summaryFigures)||void 0===eE?void 0:null===(eM=eE.find(e=>e.itemId===p.CREDIT_SALES_RETURNS_YTD))||void 0===eM?void 0:eM.amount)&&void 0!==aT?aT:0}]},{title:aQ.generalRevenue,rows:[{label:aQ.revenues,value:null!==(aZ=null==aA?void 0:null===(eU=aA.dashboard)||void 0===eU?void 0:null===(eH=eU.summaryFigures)||void 0===eH?void 0:null===(eJ=eH.find(e=>e.itemId===p.SALES_YTD))||void 0===eJ?void 0:eJ.amount)&&void 0!==aZ?aZ:0},{label:aQ.profit,value:null!==(aN=null==aA?void 0:null===(eW=aA.dashboard)||void 0===eW?void 0:null===(eG=eW.summaryFigures)||void 0===eG?void 0:null===(eY=eG.find(e=>e.itemId===p.PROFIT_YTD))||void 0===eY?void 0:eY.amount)&&void 0!==aN?aN:0}]}].map((e,a)=>(0,l.jsxs)("div",{className:S().summaryItem,children:[(0,l.jsx)("div",{className:S().redCenter,children:e.title}),(0,l.jsx)("div",{className:S().innerGrid,children:e.rows.map((e,a)=>(0,l.jsxs)(n.Fragment,{children:[(0,l.jsxs)("div",{className:S().label,children:[e.label,":"]}),(0,l.jsx)("div",{className:S().value,children:e.value.toLocaleString(void 0,{maximumFractionDigits:0})})]},a))})]},a))}),az(c.i.NewCustomers)&&(0,l.jsx)("div",{className:S().summaryItem,style:{gridColumn:"1 / 3"},children:(0,l.jsxs)("div",{className:S().redCenter,children:[aQ.newCostumers,":"," ",(null!==(aF=null==aA?void 0:null===(ez=aA.dashboard)||void 0===ez?void 0:null===(e$=ez.summaryFigures)||void 0===e$?void 0:null===(eQ=e$.find(e=>e.itemId===p.NEW_CUSTOMERS_YTD))||void 0===eQ?void 0:eQ.amount)&&void 0!==aF?aF:0).toLocaleString()]})})]}),az(c.i.WeeklySalesYTD)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsxs)("div",{className:S().summaryCard,children:[(0,l.jsxs)("h2",{className:S().title,children:[" ",aQ.avWeeklySales]}),(0,l.jsx)("strong",{className:S().strong,children:(((null==aA?void 0:null===(eX=aA.dashboard)||void 0===eX?void 0:null===(eK=eX.weeklySales)||void 0===eK?void 0:eK.map(e=>e.sales).reduce((e,a)=>e+a,0))||0)/((null==aA?void 0:null===(e2=aA.dashboard)||void 0===e2?void 0:null===(e0=e2.weeklySales)||void 0===e0?void 0:e0.length)||1)).toLocaleString()})]}),(0,l.jsx)(d.Tq,{labels:(null==aA?void 0:null===(e3=aA.dashboard)||void 0===e3?void 0:null===(e1=e3.weeklySales)||void 0===e1?void 0:e1.map(e=>e.weekName))||[],data:(null==aA?void 0:null===(e6=aA.dashboard)||void 0===e6?void 0:null===(e8=e6.weeklySales)||void 0===e8?void 0:e8.map(e=>e.sales))||[],label:aQ.weeklySales})]}),az(c.i.MonthlySalesYTD)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsxs)("div",{className:S().summaryCard,children:[(0,l.jsx)("h2",{className:S().title,children:aQ.avMonthlySales}),(0,l.jsx)("strong",{className:S().strong,children:(((null==aA?void 0:null===(e4=aA.dashboard)||void 0===e4?void 0:null===(e9=e4.monthlySales)||void 0===e9?void 0:e9.map(e=>e.sales).reduce((e,a)=>e+a,0))||0)/((null==aA?void 0:null===(e7=aA.dashboard)||void 0===e7?void 0:null===(e5=e7.monthlySales)||void 0===e5?void 0:e5.length)||1)).toLocaleString()})]}),(0,l.jsx)(d.Tq,{labels:(null==aA?void 0:null===(aa=aA.dashboard)||void 0===aa?void 0:null===(ae=aa.monthlySales)||void 0===ae?void 0:ae.map(e=>"".concat(e.year,"/").concat(e.month)))||[],data:(null==aA?void 0:null===(al=aA.dashboard)||void 0===al?void 0:null===(at=al.monthlySales)||void 0===at?void 0:at.map(e=>e.sales))||[],label:aQ.monthlySales})]}),az(c.i.AccumulatedRevenuesYTD)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.accRevenues})}),(0,l.jsx)(d.Tq,{labels:(null==aA?void 0:null===(ar=aA.dashboard)||void 0===ar?void 0:null===(an=ar.accumulatedMonthlySales)||void 0===an?void 0:an.map(e=>e.monthName))||[],data:(null==aA?void 0:null===(ad=aA.dashboard)||void 0===ad?void 0:null===(as=ad.accumulatedMonthlySales)||void 0===as?void 0:as.map(e=>e.sales))||[],label:aQ.accRevenues,color:"#ff6c02",hoverColor:"#fec106"})]}),az(c.i.Receivables)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.receivables})}),(0,l.jsx)(d.xe,{labels:Object.keys((null==aA?void 0:null===(ao=aA.dashboard)||void 0===ao?void 0:ao.receivables)||{}),data:Object.values((null==aA?void 0:null===(ai=aA.dashboard)||void 0===ai?void 0:ai.receivables)||{}).map(e=>"number"==typeof e?Math.ceil(e):0),label:aQ.receivables,color:"#6e87b6",hoverColor:"#818181"})]}),az(c.i.TopCustomers)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.topCostumers})}),(0,l.jsx)(d.xe,{labels:(null==aA?void 0:null===(au=aA.dashboard)||void 0===au?void 0:null===(ac=au.topCustomers)||void 0===ac?void 0:ac.map(e=>e.clientName))||[],data:(null==aA?void 0:null===(av=aA.dashboard)||void 0===av?void 0:null===(am=av.topCustomers)||void 0===am?void 0:am.map(e=>e.amount))||[],label:aQ.revenue,color:"#d5b552",hoverColor:"#818181"})]}),az(c.i.AverageRevenuePerItem)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.averageRevenuePerItem})}),(0,l.jsx)(d.wW,{labels:(null==aA?void 0:null===(ay=aA.dashboard)||void 0===ay?void 0:null===(ap=ay.avgUnitSales)||void 0===ap?void 0:ap.map(e=>e.itemName))||[],data:(null==aA?void 0:null===(af=aA.dashboard)||void 0===af?void 0:null===(ah=af.avgUnitSales)||void 0===ah?void 0:ah.map(e=>e.avgPrice))||[],label:aQ.averageRevenue})]}),az(c.i.TodaysTimeVariationsDetails)&&(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.todaysTimeVariationsDetails})}),(0,l.jsx)(f.Y,{tabs:(null==aA?void 0:null===(ax=aA.hr)||void 0===ax?void 0:ax.tabs)||[],activeTab:aB,setActiveTab:aJ}),((null==aA?void 0:null===(aI=aA.hr)||void 0===aI?void 0:aI.tabs)||[]).map((e,a)=>{var t,n;return(0,l.jsx)(x.Z,{index:a,value:aB,children:(0,l.jsx)(h.Z,{sx:{display:"flex",height:"350px"},children:(0,l.jsx)(y.Z,{name:"TVtable",columns:[{field:"employeeName",headerName:aQ.employeeName,flex:3},{field:"branchName",headerName:aQ.branchName,flex:3},{field:"departmentName",headerName:aQ.departmentName,flex:3},{field:"duration",headerName:aQ.duration,flex:2,type:"number"}],gridData:(null==aA?void 0:null===(n=aA.hr)||void 0===n?void 0:null===(t=n.groupedData)||void 0===t?void 0:t[e.timeCode])||{list:[]},rowId:["recordId"],pagination:!1,maxAccess:a$})})},a)})]})]}),az(c.i.PendingAuthorizationRequests)&&(0,l.jsx)("div",{className:S().topRow,children:(0,l.jsxs)("div",{className:S().chartCard,children:[(0,l.jsx)("div",{className:S().summaryCard,children:(0,l.jsx)("h2",{className:S().title,children:aQ.authorization})}),(0,l.jsx)(h.Z,{sx:{display:"flex",height:"350px"},children:(0,l.jsx)(D.Z,{pageSize:10})})]})})]})})}},23371:function(e,a,t){"use strict";t.d(a,{Z:function(){return q}});var l=t(52322),n=t(2784),r=t(65950),s=t(57590),d=t(21744),o=t.n(d);let i=e=>{let{number:a,name:t,isPercentage:n=!1}=e;return(0,l.jsxs)("div",{className:o().circleItemContainer,children:[(0,l.jsx)("div",{className:o().circleIcon,children:(0,l.jsxs)("div",{className:o().circleIconContent,children:[a,n?"%":""]})}),(0,l.jsx)("span",{className:o().span,children:t})]})};var c=t(59301),u=t.n(c);let m=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),v=e=>{let{data:a,list:t}=e;return(0,l.jsx)("div",{className:u().circleContainer,children:t.map((e,t)=>(0,l.jsx)(i,{name:e.name,number:m(a[e.key].toFixed(0)),isPercentage:e.isPercentage},t))})};var p=t(13781),y=t(54982),h=t.n(y),f=e=>{let{label:a,percentage:t}=e;return(0,l.jsxs)("div",{className:h().progressBarContainer,children:[(0,l.jsxs)("span",{className:h().progressBarLabel,children:[a,":"]}),(0,l.jsxs)("span",{className:h().progressBarLabel,children:[t.toFixed(0),"%"]}),(0,l.jsx)("div",{className:h().progressBarBackground,children:(0,l.jsx)("div",{className:h().progressBar,style:{width:"".concat(t,"%")}})})]})},x=t(96422),I=t.n(x),g=e=>{let{data:a,label:t}=e;return(0,l.jsxs)("div",{className:I().timelineWrapper,children:[(0,l.jsx)("h2",{className:I().timelineTitle,children:t}),(0,l.jsxs)("div",{className:I().timelineContainer,children:[(0,l.jsx)("div",{className:I().timelineArrow}),a.map((e,a)=>(0,l.jsxs)("div",{className:I().timelineItem,children:[a%2==0?(0,l.jsx)("div",{className:"".concat(I().timelineContent," ").concat(I().timelineContentTop),children:e.spRef}):(0,l.jsx)("div",{className:"".concat(I().timelineContent," ").concat(I().timelineContentBottom),children:e.spRef}),(0,l.jsx)("div",{className:I().timelineIcon})]},a))]})]})},C=t(26612),D=t(50023),b=t(31428),S=t.n(b);let R=e=>{let{imageUrl:a}=e;return(0,l.jsxs)("div",{className:S().avatar,children:[(0,l.jsx)("div",{className:S().circle}),(0,l.jsx)("div",{className:S().circle}),(0,l.jsx)("div",{className:S().pic,style:{backgroundImage:"url(".concat(a,")")}})]})};var q=()=>{let{labels:e}=(0,D.Z)({datasetId:C.i.UserDashboard}),{getRequest:a}=(0,n.useContext)(r.$),[t,d]=(0,n.useState)({imageUrl:"",myYearlyGrowthInUnitsSoldList:[],myYearlyGrowthInClientsAcquiredList:[],pctToTarget:0,unitsSold:0,performanceVsTeamAverage:0,receivables:0,teamPctToTarget:0,newClientsAcquired:0,distanceToNextCommissionLeg:0,commissionAcquired:0,name:"",teamRace:[],aging:[]}),[o,i]=(0,n.useState)({pctToTarget:0,teamPctToTarget:0});(0,n.useEffect)(()=>{c()},[]),(0,n.useEffect)(()=>{(t.pctToTarget>0||t.teamPctToTarget>0)&&i({pctToTarget:t.pctToTarget,teamPctToTarget:t.teamPctToTarget})},[t.pctToTarget,t.teamPctToTarget]);let c=()=>{a({extension:s.T.SalesPersonDashboard.spDB}).then(e=>{var a,t,l,n,r,s,o,i,c,u,m,v,p,y,h;d({imageUrl:(null===(a=e.record)||void 0===a?void 0:a.imageUrl)||"",myYearlyGrowthInUnitsSoldList:(null===(t=e.record)||void 0===t?void 0:t.myYearlyGrowthInUnitsSoldList)||[],myYearlyGrowthInClientsAcquiredList:(null===(l=e.record)||void 0===l?void 0:l.myYearlyGrowthInClientsAcquiredList)||[],pctToTarget:(null===(n=e.record)||void 0===n?void 0:n.pctToTarget)||0,unitsSold:(null===(r=e.record)||void 0===r?void 0:r.unitsSold)||0,performanceVsTeamAverage:(null===(s=e.record)||void 0===s?void 0:s.performanceVsTeamAverage)||0,teamPctToTarget:(null===(o=e.record)||void 0===o?void 0:o.teamPctToTarget)||0,newClientsAcquired:(null===(i=e.record)||void 0===i?void 0:i.newClientsAcquired)||0,distanceToNextCommissionLeg:(null===(c=e.record)||void 0===c?void 0:c.distanceToNextCommissionLeg)||0,commissionAcquired:(null===(u=e.record)||void 0===u?void 0:u.commissionAcquired)||0,receivables:(null===(m=e.record)||void 0===m?void 0:m.receivables)||0,name:(null===(p=e.record)||void 0===p?void 0:null===(v=p.salesPerson)||void 0===v?void 0:v.name)||"",teamRace:(null===(y=e.record)||void 0===y?void 0:y.teamRace)||[],aging:(null===(h=e.record)||void 0===h?void 0:h.aging)||[]})})},u=[{name:e.unitsSold,key:"unitsSold"},{name:e.newClientsAcquired,key:"newClientsAcquired"},{name:e.receivables,key:"receivables"}],m=[{name:e.distanceToNextCommissionLeg,key:"distanceToNextCommissionLeg"},{name:e.commissionAcquired,key:"commissionAcquired"}];return(0,l.jsx)("div",{className:S().frame,children:(0,l.jsxs)("div",{className:S().card,children:[(0,l.jsxs)("div",{className:S().bodyCard,children:[(0,l.jsxs)("div",{className:S().sideData,children:[(0,l.jsx)("div",{className:S().dataHalf,children:(0,l.jsx)(v,{data:t,list:u})}),(0,l.jsx)("div",{className:S().dataHalf,children:(0,l.jsx)("div",{className:S().compositeBarContainer,children:(0,l.jsx)(p.x3,{labels:Object.keys(t.aging),data:Object.values(t.aging),label:e.aging})})})]}),(0,l.jsxs)("div",{className:S().sideData,children:[(0,l.jsxs)("div",{className:S().profile,children:[(0,l.jsx)(R,{imageUrl:t.imageUrl}),(0,l.jsx)("span",{className:"".concat(S().span," ").concat(S().big),children:t.name})]}),(0,l.jsx)("div",{className:S().dataHalf,children:(0,l.jsx)(v,{data:t,list:m})})]}),(0,l.jsxs)("div",{className:S().sideData,children:[(0,l.jsx)("div",{className:S().dataHalf,children:(0,l.jsx)("div",{className:S().compositeBarContainer,children:(0,l.jsx)(p.x3,{labels:t.myYearlyGrowthInUnitsSoldList.map(e=>e.year),data:t.myYearlyGrowthInUnitsSoldList.map(e=>e.qty),label:e.unitsSold})})}),(0,l.jsx)("div",{className:S().dataHalf,children:(0,l.jsx)("div",{className:S().compositeBarContainer,children:(0,l.jsx)(p.x3,{labels:t.myYearlyGrowthInClientsAcquiredList.map(e=>e.year),data:t.myYearlyGrowthInClientsAcquiredList.map(e=>e.qty),label:e.clientsAcquired})})}),(0,l.jsx)("div",{className:S().dataHalf,children:(0,l.jsxs)("div",{className:S().progressBarsWrapper,children:[(0,l.jsx)(f,{label:e.percentageToTarget,percentage:o.pctToTarget}),(0,l.jsx)(f,{label:e.teamPercentageToTarget,percentage:o.teamPctToTarget})]})})]})]}),(0,l.jsx)("div",{className:S().footerCard,children:(0,l.jsx)("div",{className:S().sideData,children:(0,l.jsx)("div",{className:S().dataHalf,children:(0,l.jsx)(g,{data:t.teamRace,label:e.teamRace})})})})]})})}},57393:function(e,a,t){"use strict";t.d(a,{s:function(){return n}});let l="CC.asmx/",n={CashCountTransaction:{snapshot:l+"snapshotTRX",qry:l+"qryTRX",get2:l+"get2TRX",set2:l+"set2TRX",post:l+"postTRX",close:l+"closeTRX",reopen:l+"reopenTRX",del:l+"delTRX"},Generate:{generate:l+"generateTFR"},CcCashNotes:{qry:l+"qryNOT",get:l+"getNOT",set:l+"setNOT",del:l+"delNOT",page:l+"pageNOT"}}},57590:function(e,a,t){"use strict";t.d(a,{T:function(){return n}});let l="DB.asmx/",n={dashboard:l+"dashboard",SalesPersonDashboard:{spDB:l+"spDB"}}},30043:function(e,a,t){"use strict";t.d(a,{U:function(){return n}});let l="DE.asmx/",n={Driver:{snapshot:l+"snapshotDRV",page:l+"pageDRV",set:l+"setDRV",get:l+"getDRV",qry:l+"qryDRV",del:l+"delDRV"},Vehicle:{page:l+"pageVEH",set:l+"setVEH",get:l+"getVEH",qry:l+"qryVEH",del:l+"delVEH"},Trip:{page:l+"pageTRP",set:l+"setTRP",get:l+"getTRP",qry:l+"qryTRP",del:l+"delTRP",snapshot:l+"snapshotTRP",snapshot2:l+"snapshot2TRP",reopen:l+"reopenTRP",post:l+"postTRP",unpost:l+"unpostTRP",close:l+"closeTRP",generate:l+"generateTRP",setTRP2:l+"setTRP2",assign:l+"assignTRP",unassign:l+"unassignedTRP"},TripOrderPack2:{set2:l+"set2TRO"},TripOrder:{qry:l+"qryTRO"},Reduild:{rebuild:l+"rebuildMW"},TRP:{flag:l+"flagTRP"},ExpenseTypes:{get:l+"getET",set:l+"setET",del:l+"delET",page:l+"pageET"},DeliveriesOrders:{qry:l+"qryORD",get:l+"getORD",snapshot:l+"snapshotORD",unpost:l+"unpostORD",gen:l+"genORD",post:l+"postORD",del:l+"delORD",cancel:l+"cancelORD",flag:l+"flagORD",set2:l+"set2ORD"},Invoice:{generate:l+"generateIVC2",generateInv:l+"generateIVC",preview:l+"previewIVC"},OrderItem:{qry:l+"qryORI",get:l+"getORI"},MW:{qry:l+"qryMW2"},GenerateTrip:{root:l+"rootSZ",firstLevel:l+"firstLevelSZ",undelivered2:l+"undeliveredSO2",previewTRP:l+"previewTRP"},DeliveryLeadTime:{get:l+"getLDT",page:l+"pageLDT",set:l+"setLDT",del:l+"delLDT"},Volume:{vol:l+"volZO"},AllocatedVolume:{qry:l+"qryVEH2"},InboundTransp:{pack:l+"getPackINB",page:l+"pageINB",set2:l+"set2INB",get:l+"getINB",get2:l+"get2INB",del:l+"delINB",snapshot:l+"snapshotINB",post:l+"postINB",unpost:l+"unpostINB"},InboundOrders:{qry:l+"qryINO"}}},92407:function(e,a,t){"use strict";t.d(a,{y:function(){return n}});let l="EP.asmx/",n={Employee:{snapshot:l+"snapshotEM",get1:l+"getEM1",set:l+"setEM",del:l+"delEM"},CertificateFilters:{qry:l+"qryCL",get:l+"getCL",set:l+"setCL",del:l+"delCL",page:l+"pageCL"},HRDocTypeFilters:{qry:l+"qryDT"},SalaryChangeReason:{qry:l+"qrySC",get:l+"getSC",set:l+"setSC",del:l+"delSC",page:l+"pageSC"},EmploymentStatusFilters:{qry:l+"qryST",page:l+"pageST",set:l+"setST",get:l+"getST",del:l+"delST"},SponsorFilters:{qry:l+"qrySP",page:l+"pageSP",set:l+"setSP",get:l+"getSP",del:l+"delSP"},RelationshipTypes:{page:l+"pageRT",set:l+"setRT",get:l+"getRT",del:l+"delRT"},BonusTypes:{get:l+"getBT",set:l+"setBT",page:l+"pageBT",del:l+"delBT"},BgCheck:{page:l+"pageCT",set:l+"setCT",get:l+"getCT",del:l+"delCT"},NoticePeriods:{get:l+"getNP",set:l+"setNP",del:l+"delNP",qry:l+"qryNP",page:l+"pageNP"},CustomProperties:{get:l+"getUP",set:l+"setUP",del:l+"delUP",page:l+"pageUP",qry:l+"qryUP"},ResignationRequest:{get:l+"getRR",set:l+"setRR",del:l+"delRR",page:l+"pageRR",close:l+"closeRR",reopen:l+"reopenRR"},TerminationReasons:{qry:l+"qryTR",get:l+"getTR",set:l+"setTR",del:l+"delTR",page:l+"pageTR"},JobInfo:{snapshot:l+"snapshotJI",page:l+"pageJI",close:l+"closeJI",reopen:l+"reopenJI",get:l+"getJI",set:l+"setJI",del:l+"delJI",qry:l+"qryJI"},QuickView:{get:l+"getQV"},EmployeePenalty:{page:l+"pagePE",close:l+"closePE",reopen:l+"reopenPE",get:l+"getPE",set:l+"setPE",del:l+"delPE"},EmployeeDeduction:{qry:l+"qryED",page:l+"pageED",del:l+"delED",get:l+"getED",set:l+"setED",snapshot:l+"snapshotED"},FullName:{sync:l+"syncFullName"},EmployeeChart:{page:l+"pageES",qry:l+"qryES",qry2:l+"qryES2"},EmployeeSalary:{qry:l+"qrySA",get:l+"getSA",set:l+"setSA",del:l+"delSA"},SalaryDetails:{qry:l+"qrySD",get:l+"getSD",set2:l+"set2SD",del:l+"delSD"},TerminationEmployee:{get:l+"getTE"},EmployementHistory:{qry:l+"qryEH",del:l+"delEH",get:l+"getEH",set:l+"setEH"},Hiring:{get:l+"getRE",set:l+"setRE"},Skills:{qry:l+"qryCE",del:l+"delCE",get:l+"getCE",set:l+"setCE"},UserDefined:{qry:l+"qryUV",set2:l+"set2UV"},Leaves:{set:l+"setLS",del:l+"delLS",get:l+"getLS"}}},58912:function(e,a,t){"use strict";t.d(a,{I:function(){return n}});let l="IR.asmx/",n={ReplenishmentGroups:{qry:l+"qryGRP",page:l+"pageGRP",get:l+"getGRP",set:l+"setGRP",del:l+"delGRP"},IvReplenishements:{qry:l+"qryHDR",page:l+"pageHDR",get:l+"getHDR",set:l+"setHDR"},IvReplenishementsList:{qry:l+"qryTRX"},GenerateIvReplenishements:{generate:l+"generateTFR"},MaterialReplenishment:{page:l+"pageREQ",del:l+"delREQ",get:l+"getREQ",set2:l+"set2REQ",snapshot:l+"snapshotREQ",close:l+"closeREQ",reopen:l+"reopenREQ",cancel:l+"cancelREQ",print:l+"printREQ"},OrderItem:{qry:l+"qryREI",open:l+"openREI"},MatPlanning:{page:l+"pageMPL",del:l+"delMPL",get:l+"getMPL",set2:l+"set2MPL",reopen:l+"reopenMPL",close:l+"closeMPL",qry:l+"qryMPL",snapshot:l+"snapshotMPL"},MatPlanningItem:{qry:l+"qryMPI",append:l+"appendMPI"},PurchaseRequest:{generate:l+"generatePR"},PlantSettings:{get:l+"getPLT",set:l+"setPLT",del:l+"delPLT"},DocumentTypeDefault:{get:l+"getDTD",set:l+"setDTD",del:l+"delDTD",page:l+"pageDTD"},materialPlaning:{preview:l+"previewMRP"},Transfer:{generate2:l+"generate2TFR"},ConsumptionOfTools:{generate:l+"generateMFCON"}}},50496:function(e,a,t){"use strict";t.d(a,{U:function(){return n}});let l="LM.asmx/",n={IndemnityAccuralsFilters:{qry:l+"qryLT"},LeaveScheduleFilters:{qry:l+"qryLS",page:l+"pageLS",set:l+"setLS",get:l+"getLS",del:l+"delLS"},OpeningBalances:{page:l+"pageOBA",set:l+"setOBA",get:l+"getOBA",del:l+"delOBA",qry:l+"qryOBA"},BalanceAdjustment:{page:l+"pageBA",set:l+"setBA",get:l+"getBA",del:l+"delBA",snapshot:l+"snapshotBA"},EarnedLeave:{page:l+"pageEL",set2:l+"set2EL",get2:l+"get2EL",del:l+"delEL",preview:l+"previewEL",post:l+"postEL"},LeavePeriod:{qry:l+"qryLP",del:l+"delLP",get:l+"getLP",set:l+"setLP"},LeaveRequest:{page:l+"pageLR",qry:l+"qryLR",set:l+"setLR",get:l+"getLR",del:l+"delLR",snapshot:l+"snapshotLR",close:l+"closeLR",reopen:l+"reopenLR",set2:l+"set2LR",get2:l+"get2LR"},LeaveReturn:{page:l+"pageRE",set:l+"setRE",get:l+"getRE",del:l+"delRE",snapshot:l+"snapshotRE",close:l+"closeRE",reopen:l+"reopenRE"},PreviewDays:{preview:l+"previewLD"},Leaves:{qry:l+"qryELB"}}},73581:function(e,a,t){"use strict";t.d(a,{h:function(){return n}});let l="LT.asmx/",n={LoanType:{get:l+"getLT",set:l+"setLT",del:l+"delLT",qry:l+"qryLT",page:l+"pageLT"},Loans:{get:l+"getLR",set:l+"setLR",del:l+"delLR",page:l+"pageLR",close:l+"closeLR",reopen:l+"reopenLR"},LoanDeduction:{page:l+"pageLD",get:l+"getLD",set:l+"setLD",del:l+"delLD"}}},90587:function(e,a,t){"use strict";t.d(a,{u:function(){return n}});let l="MF.asmx/",n={DesignRawMaterial:{qry2:l+"qryDRM2",qry:l+"qryDRM",set2:l+"set2DRM"},JobOrdersItem:{qry:l+"qryJIT",set2:l+"set2JIT"},IssueOfMaterialsItems:{qry:l+"qryIMI",qry2:l+"qryIMI2"},LaborGroup:{snapshot:l+"snapshotLBG",page:l+"pageLBG",qry:l+"qryLBG",set:l+"setLBG",get:l+"getLBG",del:l+"delLBG"},ProductionLine:{page:l+"pageLIN",qry:l+"qryLIN",qry2:l+"qry2LIN",qry3:l+"qry3LIN",set:l+"setLIN",get:l+"getLIN",del:l+"delLIN"},CostGroup:{page:l+"pageCG",set:l+"setCG",get:l+"getCG",del:l+"delCG",qry:l+"qryCG"},WorkCenter:{page:l+"pageWCT",qry:l+"qryWCT",qry3:l+"qryWCT3",set:l+"setWCT",get:l+"getWCT",del:l+"delWCT",snapshot:l+"snapshotWCT"},Routing:{page:l+"pageRTN",qry:l+"qryRTN",set:l+"setRTN",get:l+"getRTN",del:l+"delRTN",snapshot2:l+"snapshot2RTN",snapshot:l+"snapshotRTN"},Operation:{snapshot:l+"snapshotOPR",qry:l+"qryOPR",page:l+"pageOPR",set:l+"setOPR",get:l+"getOPR",del:l+"delOPR"},Labor:{page:l+"pageLBR",qry:l+"qryLBR",qry2:l+"qry2LBR",set:l+"setLBR",get:l+"getLBR",del:l+"delLBR",snapshot:l+"snapshotLBR"},Machine:{page:l+"pageMAC",qry:l+"qryMAC",set:l+"setMAC",get:l+"getMAC",del:l+"delMAC",snapshot:l+"snapshotMAC"},MachineSpecification:{page:l+"pageMAS",qry:l+"qryMAS",set:l+"setMAS",get:l+"getMAS",del:l+"delMAS"},LeanProductionPlanning:{preview:l+"previewPQ",update:l+"updatePQ",snapshot:l+"snapshotPQ",del:l+"delPQ",cancel:l+"cancelPQ"},MaterialsAdjustment:{generate:l+"generateADJ"},ProductionClass:{page:l+"pageCLS",qry:l+"qryCLS",set:l+"setCLS",get:l+"getCLS",del:l+"delCLS",snapshot:l+"qryCLS"},ProductionStandard:{qry:l+"qrySTD",page:l+"pageSTD",set:l+"setSTD",get:l+"getSTD",del:l+"delSTD"},ProductionClassSemiFinished:{qry:l+"qryCSF",set:l+"setCSF",get:l+"getCSF",del:l+"delCSF",set2:l+"set2CSF"},RoutingSequence:{set2:l+"set2RTS",qry:l+"qryRTS"},Overhead:{qry:l+"qryOVH",set:l+"setOVH",get:l+"getOVH",del:l+"delOVH",page:l+"pageOVH",snapshot:l+"snapshotOVH"},Design:{qry:l+"qryDES",set:l+"setDES",get:l+"getDES",del:l+"delDES",snapshot:l+"snapshotDES",page:l+"pageDES"},MFJobOrder:{pack:l+"packJOB",qry:l+"qryJOB",qry2:l+"qryJOB2",set:l+"setJOB",get:l+"getJOB",get2:l+"get2JOB",del:l+"delJOB",snapshot:l+"snapshotJOB",snapshot2:l+"snapshotJOB2",snapshot3:l+"snapshotJOB3",cancel:l+"cancelJOB",post:l+"postJOB",start:l+"startJOB",stop:l+"stopJOB",wip:l+"wipJOB",sync:l+"syncJOB"},ProductionSheet:{page:l+"pagePST",qry:l+"qryPST",get:l+"getPST",set2:l+"set2PST",get2:l+"get2PST",del:l+"delPST",post:l+"postPST",unpost:l+"unpostPST",snapshot:l+"snapshotPST"},ProductionSheetItem:{qry:l+"qryPSI",set:l+"setPSI",get:l+"getPSI",del:l+"delPSI"},DocumentTypeDefault:{qry:l+"qryDTD",get:l+"getDTD",set:l+"setDTD",del:l+"delDTD",page:l+"pageDTD"},RawMaterialCategory:{qry:l+"qryRMC",get:l+"getRMC",set:l+"setRMC",del:l+"delRMC",page:l+"pageRMC"},WorksheetMaterials:{qry:l+"qryIMA",get:l+"getIMA",pack:l+"get2IMA",set:l+"setIMA",set2:l+"set2IMA",del:l+"delIMA",post:l+"postIMA"},ProductionSheetQueue:{qry:l+"qryPSQ"},Damage:{qry:l+"qryDMG",get:l+"getDMG",set:l+"setDMG",del:l+"delDMG",page:l+"pageDMG",snapshot:l+"snapshotDMG",post:l+"postDMG",get2:l+"get2DMG",set2:l+"set2DMG",preview:l+"previewDMG"},JobCategory:{qry:l+"qryJCA"},JobRouting:{qry:l+"qryJRO",get:l+"getJRO",set:l+"setJRO",set2:l+"set2JRO",del:l+"delJRO",sync:l+"syncJRO",close:l+"closeJRO",reopen:l+"reopenJRO"},Worksheet:{snapshot:l+"snapshotWST",get:l+"getWST",pack:l+"getPackWST",set:l+"setWST",del:l+"delWST",page:l+"pageWST",summary:l+"summaryWST",post:l+"postWST",qry2:l+"qryWST2",draft:l+"draftWST"},JobOverhead:{qry:l+"qryJOH",set2:l+"set2JOH",generate:l+"generateJOH"},JobMaterial:{qry:l+"qryJMA"},JobItemSize:{qry:l+"qryJSZ",set2:l+"set2JSZ"},MFSerial:{qry:l+"qrySRL",qry2:l+"qrySRL2",set2:l+"set2SRL",generate:l+"generateSRL"},SamplePack:{qry:l+"qrySPL",set2:l+"set2SPL"},DamageReturn:{get:l+"getDMR",set:l+"setDMR",del:l+"delDMR",page:l+"pageDMR",snapshot:l+"snapshotDMR",post:l+"postDMR"},ProductionOrder:{get2:l+"get2PO",set2:l+"set2PO",del:l+"delPO",page:l+"pagePO",snapshot:l+"snapshotPO",post:l+"postPO",gen:l+"genPO",close:l+"closePO"},BillOfMaterials:{get:l+"getBMA",qry2:l+"qry2BMA",set:l+"setBMA",del:l+"delBMA",page:l+"pageBMA",snapshot:l+"snapshotBMA"},Component:{get:l+"getBMI",qry:l+"qryBMI",del:l+"delBMI",set:l+"setBMI",set2:l+"set2BMI"},Assembly:{get:l+"getASM",set2:l+"set2ASM",del:l+"delASM",page:l+"pageASM",snapshot:l+"snapshotASM",post:l+"postASM",unpost:l+"unpostASM",generate:l+"genASM"},AssemblyItems:{qry:l+"qryASC"},AssemblyLot:{get:l+"getASL",set:l+"setASL"},AssemblyOverhead:{qry:l+"qryAOH",set2:l+"set2AOH"},MeasurementScheduleMap:{qry:l+"qryMSM",set:l+"setMSM",set2:l+"set2MSM",del:l+"delMSM"},JobCategory:{set:l+"setJCA",get:l+"getJCA",del:l+"delJCA",page:l+"pageJCA",qry:l+"qryJCA"},DesignGroup:{qry:l+"qryDEG",set:l+"setDEG",get:l+"getDEG",del:l+"delDEG",page:l+"pageDEG"},Components:{qry:l+"qryDEM",set2:l+"set2DEM"},DesignFamily:{qry:l+"qryDEF",set:l+"setDEF",get:l+"getDEF",del:l+"delDEF",page:l+"pageDEF"},ProductionShifts:{qry:l+"qrySHI",set:l+"setSHI",get:l+"getSHI",del:l+"delSHI",page:l+"pageSHI"},JobOrderWizard:{set2:l+"set2JOZ",get2:l+"get2JOZ",del:l+"delJOZ",page:l+"pageJOZ",snapshot:l+"snapshotJOZ",post:l+"postJOZ"},JobTransfer:{get2:l+"get2TFR",set2:l+"set2TFR",del:l+"delTFR",page:l+"pageTFR",snapshot:l+"snapshotTFR",post:l+"postTFR",close:l+"closeTFR",reopen:l+"reopenTFR",qry:l+"qryTFR"},JobWorkCenter:{qry:l+"qryJWC",close:l+"closeJWC",reopen:l+"reopenJWC",get:l+"getJWC",snapshot:l+"snapshotJWC",verify:l+"verifyJWC"},WorkCenterConsumption:{page:l+"pageCON",snapshot:l+"snapshotCON",del:l+"delCON",set2:l+"set2CON",get:l+"getCON",post:l+"postCON",unpost:l+"unpostCON",close:l+"closeCON",reopen:l+"reopenCON"},ConsumptionItemView:{qry:l+"qryCOI"},LineItemCapacity:{set2:l+"set2LIT",del:l+"delLIT",qry:l+"qryLIT",page:l+"pageLIT"},CostGroupOverhead:{set2:l+"set2CGV",qry:l+"qryCGV"},IssueOfMaterialDimension:{set:l+"setIMD",qry:l+"qryIMD"},JobOrder:{gen:l+"genORD"},RefreshPoItem:{refresh:l+"refreshPOI"},WorkCenterTransferMap:{qry:l+"qryWCTM",set2:l+"set2WCTM"},BatchWorksheet:{get2:l+"get2BWST",set2:l+"set2BWST",del:l+"delBWST",page:l+"pageBWST",snapshot:l+"snapshotBWST",post:l+"postBWST",gen:l+"genBWST",close:l+"closeBWST",reopen:l+"reopenBWST"},ProductionOrderFromSaleOrder:{gen:l+"generatePOFromSO"},BatchTransfer:{page:l+"pageBTFR",set2:l+"set2BTFR",del:l+"delBTFR",snapshot:l+"snapshotBTFR",get:l+"getBTFR",post:l+"postBTFR",unpost:l+"unpostBTFR"},BatchTransferJob:{qry:l+"qryBTFJ"},Disposal:{page:l+"pageDIS",snapshot:l+"snapshotDIS",get:l+"getDIS",set2:l+"set2DIS",del:l+"delDIS"},DisposalItem:{qry:l+"qryDII"},DisposalSerial:{qry:l+"qryDISRL"},MetalSetting:{page:l+"pageMTS",set:l+"setMTS",get:l+"getMTS",del:l+"delMTS"},DamageReason:{qry:l+"qryDRS",page:l+"pageDRS",set:l+"setDRS",get:l+"getDRS",del:l+"delDRS",snapshot:l+"snapshotDRS"},DamageCategory:{qry:l+"qryDCA",page:l+"pageDCA",set:l+"setDCA",get:l+"getDCA",del:l+"delDCA",snapshot:l+"snapshotDCA"}}},83562:function(e,a,t){"use strict";t.d(a,{m:function(){return n}});let l="PY.asmx/",n={Payroll:{qry:l+"qryHE",page:l+"pageHE",get:l+"getHE",set:l+"setHE",del:l+"delHE",close:l+"closeHE",reopen:l+"reopenHE",post:l+"postHE",unpost:l+"unpostHE",snapshot:l+"snapshotHE"},BankTransferFilters:{qry:l+"qrySB",page:l+"pageSB",get:l+"getSB",set:l+"setSB",del:l+"delSB"},Paycode:{qry:l+"qryPC",set:l+"setPC",del:l+"delPC",get:l+"getPC"},SecuritySchedule:{qry:l+"qrySS"},IndemnitySchedule:{page:l+"pageIS",qry:l+"qryIS",get:l+"getIS",set:l+"setIS",del:l+"delIS"},LedgerGroup:{qry:l+"qryGLG",get:l+"getGLG",set:l+"setGLG",del:l+"delGLG"},Arguments:{page:l+"pageAR"},SalaryBatch:{page:l+"pageBAT",get:l+"getBAT",set:l+"setBAT",del:l+"delBAT"},TimeCodes:{page:l+"pageTC",qry:l+"qryTC",get:l+"getTC",set:l+"setTC",del:l+"delTC"},FinalSettlement:{page:l+"pageFS",get:l+"getFS",set:l+"setFS",del:l+"delFS",snapshot:l+"snapshotFS"},IndemnityCompany:{qry:l+"qryID",set2:l+"set2ID"},IndemnityResignation:{qry:l+"qryIR",set2:l+"set2IR"},PenaltyType:{page:l+"pagePT",qry:l+"qryPT",get:l+"getPT",set:l+"setPT",del:l+"delPT"},PenaltyDetail:{qry:l+"qryPD",set2:l+"set2PD"},GeneratePayroll:{gen:l+"genEM",page:l+"pageEM"},PayrollDetails:{qry:l+"qryED",set2:l+"set2ED"},SocialSecurity:{qry:l+"qryES"},FiscalYear:{qry:l+"qryYE"},Period:{qry:l+"qryPE"}}},63518:function(e,a,t){"use strict";t.d(a,{z:function(){return n}});let l="PM.asmx/",n={Designer:{page:l+"pageDSR",get:l+"getDSR",set:l+"setDSR",del:l+"delDSR",snapshot:l+"snapshotDSR",qry:l+"qryDSR"},ThreeDDesign:{page:l+"page3DD",get:l+"get3DD",set:l+"set3DD",del:l+"del3DD",post:l+"post3DD",close:l+"close3DD",reopen:l+"reopen3DD",snapshot:l+"snapshot3DD"},Sketch:{page:l+"pageSKH",get:l+"getSKH",set:l+"setSKH",del:l+"delSKH",close:l+"closeSKH",reopen:l+"reopenSKH",snapshot:l+"snapshotSKH",snapshot2:l+"snapshot2SKH",snapshot3:l+"snapshot3SKH",post:l+"postSKH"},ModelMaker:{snapshot:l+"snapshotMDL",snapshot2:l+"snapshot2MDL",page:l+"pageMDL",get:l+"getMDL",set:l+"setMDL",del:l+"delMDL",post:l+"postMDL",close:l+"closeMDL",reopen:l+"reopenMDL"},ModellingMaterial:{qry:l+"qryMDLM",set2:l+"set2MDLM"},Printing:{page:l+"page3DP",get:l+"get3DP",set:l+"set3DP",del:l+"del3DP",start:l+"start3DP",snapshot:l+"snapshot3DP",snapshot2:l+"snapshot3DP2",post:l+"post3DP",qry:l+"qry3DP"},ThreeDDrawing:{snapshot:l+"snapshot3DD",snapshot2:l+"snapshot23DD",get:l+"get3DD",snapshot3DD2:l+"snapshot3DD2"},Rubber:{page:l+"pageRBR",get:l+"getRBR",set:l+"setRBR",del:l+"delRBR",snapshot:l+"snapshotRBR",post:l+"postRBR",start:l+"startRBR"},Modeling:{qry:l+"qryMDL"},Casting:{page:l+"pageCAS",get:l+"getCAS",set:l+"setCAS",del:l+"delCAS",snapshot:l+"snapshotCAS",post:l+"postCAS"},DocumentTypeDefault:{page:l+"pageDTD",get:l+"getDTD",set:l+"setDTD",del:l+"delDTD"},Samples:{page:l+"pageSPL",get2:l+"get2SPL",set:l+"setSPL",del:l+"delSPL",snapshot:l+"snapshotSPL",set2:l+"set2SPL",close:l+"closeSPL",reopen:l+"reopenSPL",post:l+"postSPL"}}},2454:function(e,a,t){"use strict";t.d(a,{y:function(){return n}});let l="PU.asmx/",n={VendorGroups:{qry:l+"qryGRP",page:l+"pageGRP",get:l+"getGRP",set:l+"setGRP",del:l+"delGRP"},PriceList:{qry:l+"qryPRI",del:l+"delPRI",get:l+"getPRI",set:l+"setPRI"},PUOrderStatus:{qry:l+"qryPOS",page:l+"pagePOS",get:l+"getPOS",set:l+"setPOS",del:l+"delPOS"},DeliveryMethods:{qry:l+"qryDM",page:l+"pageDM",get:l+"getDM",set:l+"setDM",del:l+"delDM"},PaymentTerms:{qry:l+"qryPT",page:l+"pagePT",get:l+"getPT",set:l+"setPT",del:l+"delPT"},Vendor:{snapshot:l+"snapshotVEN",qry:l+"qryVEN",page:l+"pageVEN",get:l+"getVEN",set:l+"setVEN",del:l+"delVEN"},Address:{qry:l+"qryAD",page:l+"pageAD",get:l+"getAD",set:l+"setAD",del:l+"delAD"},DocumentTypeDefault:{qry:l+"qryDTD",get:l+"getDTD",set:l+"setDTD",del:l+"delDTD",page:l+"pageDTD"},PurchaseInvoiceHeader:{qry:l+"qryIVC",get:l+"getIVC",get2:l+"get2IVC",level2_PU:l+"level2_PU",set:l+"setIVC",del:l+"delIVC",snapshot:l+"snapshotIVC",set2:l+"set2IVC",post:l+"postIVC",unpost:l+"unpostIVC",generate:l+"generateIVC",preview:l+"previewIVC",sync:l+"syncIVC",verify:l+"verifyIVC"},Invoice:{snapshot:l+"snapshotINV"},PurchaseReturnHeader:{set2:l+"set2IVR",post:l+"postIVR",unpost:l+"unpostIVR",del:l+"delIVR",qry:l+"qryIVR",snapshot:l+"snapshotIVR"},VendorPrice:{get:l+"getPRI2"},ItemCostHistory:{qry:l+"qryIPH"},ItemPromotion:{qry:l+"qryIVIM"},Serials:{qry:l+"qrySRL",import:l+"importSRL",last:l+"lastSRL",sync:l+"syncSRL"},Shipment:{get:l+"getSHP",set2:l+"set2SHP",del:l+"delSHP",page:l+"pageSHP",snapshot:l+"snapshotSHP",post:l+"postSHP",unpost:l+"unpostSHP",gen:l+"genSHP"},ShipmentItem:{qry:l+"qrySHI"},UnpostedOrderPack:{get:l+"openORD",snapshot:l+"snapshotORD"},PurchaseOrder:{page:l+"pageORD",snapshot:l+"snapshotORD",del:l+"delORD",set2:l+"set2ORD",get2:l+"get2ORD",close:l+"closeORD",reopen:l+"reopenORD",terminate:l+"terminateORD",transfer:l+"transfer1ORD"},PurchaseRequisition:{snapshot:l+"snapshotREQ",page:l+"pageREQ",get:l+"getREQ",set:l+"setREQ",del:l+"delREQ",cancel:l+"cancelREQ",reopen:l+"reopenREQ",close:l+"closeREQ"},RequisitionDetail:{qry:l+"qryREI",set:l+"setREI",get:l+"getREI",del:l+"delREI"},QuotationItem:{preview:l+"previewQTI",qry:l+"qryQTI"},OrderItem:{qry:l+"qryORI",set2:l+"set2ORI"},PUDraftReturn:{set2:l+"set2DRE",get:l+"getDRE",page:l+"pageDRE",snapshot:l+"snapshotDRE",del:l+"delDRE",post:l+"postDRE"},PUDraftReturnSerial:{get2:l+"get2DRS",qry:l+"qryDRS",del:l+"delDRS",append:l+"appendDRS",batch:l+"batchDRS"},FinancialGroup:{qry:l+"qryFII",set2:l+"set2FII"},PUInvoiceRetBalance:{balance:l+"balanceRET"},ItemLastPurchaseInfo:{last:l+"lastIVI"},PurchaseQuotation:{page:l+"pageQTN",set2:l+"set2QTN",get:l+"getQTN",del:l+"delQTN",snapshot:l+"snapshotQTN"},GenerateQTNPRPack:{gen:l+"genQTN"},GeneratePOPRPack:{gen:l+"genPO",gen2:l+"gen2PO"}}},76426:function(e,a,t){"use strict";t.d(a,{x:function(){return n}});let l="SC.asmx/",n={LabelTemplate:{qry:l+"qryLBT",set:l+"setLBT",get:l+"getLBT",del:l+"delLBT"},Item:{qry:l+"qryLBI",set:l+"setLBI",get:l+"getLBI",del:l+"delLBI"},Sites:{qry:l+"qrySIT",set:l+"setSIT",set2:l+"set2SIT",get:l+"getSIT",del:l+"delSIT",reopen:l+"reopenSIT",end:l+"endSIT"},Controller:{qry:l+"qryCRL"},StockCountControllerTab:{qry:l+"qryPHY",set2:l+"set2PHY",set:l+"setPHY",get:l+"getPHY",del:l+"delPHY"},StockCount:{page:l+"pageHDR",post:l+"postHDR",unpost:l+"unpostHDR",qry:l+"qryHDR",get:l+"getHDR",set:l+"setHDR",del:l+"delHDR",close:l+"closeHDR",reopen:l+"reopenHDR",snapshot:l+"snapshotHDR"},StockCountController:{page:l+"pageCRL",set:l+"setCRL",get:l+"getCRL",del:l+"delCRL"},DocumentTypeDefaults:{qry:l+"qryDTD",set:l+"setDTD",get:l+"getDTD",del:l+"delDTD"},StockCountItem:{qry:l+"qryITM",set:l+"setITM",get:l+"getITM",del:l+"delITM"},StockCountSerialSum:{qry:l+"qrySRS"},StockCountItemDetail:{qry:l+"qryITD",set:l+"setITD",get:l+"getITD",del:l+"delITD",set2:l+"set2ITD"},StockCountSerialDetail:{set2:l+"set2SRL",qry:l+"qrySRL",append:l+"appendSRL",del:l+"delSRL",batch:l+"batchSRL"}}},6035:function(e,a,t){"use strict";t.d(a,{f:function(){return n}});let l="TA.asmx/",n={AttendanceScheduleFilters:{qry:l+"qrySD"},ProcessedShiftPunches:{retry:l+"retryPSP"},OvertimeProfiles:{page:l+"pageOTP",set:l+"setOTP",get:l+"getOTP",del:l+"delOTP",qry:l+"qryOTP"},PendingPunches:{page:l+"pagePP",del:l+"delPP",qry:l+"qryPP"},BiometricDevices:{page:l+"pageBM",qry:l+"qryBM",del:l+"delBM",set:l+"setBM",get:l+"getBM"},DSLReasons:{page:l+"pageLR",set:l+"setLR",get:l+"getLR",del:l+"delLR"},TimeVariation:{reset:l+"resetTV",qry:l+"qryTV",qry2:l+"qryTV2",snapshot:l+"snapshotTV",page:l+"pageTV",get:l+"getTV",set:l+"setTV",del:l+"delTV",gen:l+"genTV",close:l+"closeTV",reopen:l+"reopenTV",cancel:l+"cancelTV",override:l+"overrideTV"},ShitLeave:{page:l+"pageLQ",set:l+"setLQ",get:l+"getLQ",del:l+"delLQ",close:l+"closeLQ",reopen:l+"reopenLQ"},FlatSchedule:{qry:l+"qryFS",qry2:l+"qryFS2",copyRange:l+"copyRangeFS",range:l+"rangeFS",del:l+"delRangeFS"},DSLReason:{qry:l+"qryLR"},Calendar:{qry:l+"qryCA"},DayTypes:{page:l+"pageDT",qry:l+"qryDT",set:l+"setDT",get:l+"getDT",del:l+"delDT"},AttendanceDay:{qry:l+"qryAD"},Schedule:{qry:l+"qrySC"},FlatPunch:{qry:l+"qryFP"}}},70104:function(e,a,t){"use strict";t.d(a,{K:function(){return n}});let l="CS.asmx/",n={DivisionFilters:{qry:l+"qryDI"},BranchFilters:{qry:l+"qryBR"},CompanyPositions:{qry:l+"qryPO"},DepartmentFilters:{qry:l+"qryDE"}}},93883:function(e,a,t){"use strict";var l=t(52322),n=t(2784),r=t(74143),s=t(44258),d=t(41633),o=t(45297),i=t(73980),c=t(11886),u=t(26698),m=t(32827),v=t(2494),p=t(81576),y=t(7087),h=t.n(y);a.Z=e=>{let{name:a,label:t,value:y,onChange:f,error:x,disabledRangeDate:I={},max:g=null,min:C=null,variant:D="outlined",size:b="small",views:S=["year","month","day","hours","minutes"],fullWidth:R=!0,required:q=!1,autoFocus:w=!1,disabled:j=!1,disabledDate:P=null,readOnly:T=!1,editMode:Z=!1,hasBorder:N=!0,hidden:F=!1,formatTime:k="hh:mm aa",defaultValue:O,...A}=e,V="".concat(window.localStorage.getItem("default")&&JSON.parse(window.localStorage.getItem("default")).dateFormat," ").concat(k),[_,L]=(0,n.useState)(!1),{_readOnly:M,_required:E,_hidden:B}=(0,p.W)(a,A.maxAccess,q,T,F),J=new Date(I.date);J.setDate(J.getDate()+I.day);let H=void 0===y?(()=>{let e;switch(O){case"today":e=new Date;break;case"yesterday":(e=new Date).setDate(e.getDate()-1);break;case"boy":e=new Date(new Date().getFullYear(),0,1);break;default:e=null}return e})():y;return B?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(d._,{dateAdapter:c.H,children:(0,l.jsx)(v.x,{variant:D,size:b,value:H,label:t,views:S,minDate:C||I.date,maxDate:g||J,fullWidth:R,autoFocus:w,format:V,onChange:e=>f(a,e),onClose:()=>L(!1),open:_,disabled:j,readOnly:M,clearable:!0,shouldDisableDate:P&&(e=>{let a=new Date(e),t=new Date;return(t.setDate(t.getDate()),a.setDate(a.getDate()),">="===P)?a>=t:"<"===P?a<t:">"===P&&a>t}),slotProps:{popper:{disablePortal:!0},textField:{required:E,size:b,fullWidth:R,error:x,inputProps:{tabIndex:M?-1:0},InputProps:{classes:{root:h().outlinedRoot,notchedOutline:N?h().outlinedFieldset:h().outlinedNoBorder,input:h().inputBase},endAdornment:!(M||j)&&(0,l.jsxs)(r.Z,{position:"end",className:h().inputAdornment,children:[H&&(0,l.jsx)(s.Z,{tabIndex:-1,edge:"start",onClick:()=>f(a,null),className:h().iconButton,children:(0,l.jsx)(o.Z,{className:h().icon})}),(0,l.jsx)(s.Z,{tabIndex:-1,onClick:()=>L(!0),className:h().iconButton,children:(0,l.jsx)(i.Z,{className:h().icon})})]})},InputLabelProps:{classes:{root:h().inputLabel,shrink:h().inputLabelShrink}}},actionBar:{actions:["accept","today"]}},slots:{actionBar:e=>(0,l.jsx)(u.Z,{...e,actions:["accept","today"]}),popper:e=>(0,l.jsx)(m.Z,{isDateTimePicker:!0,...e})}})})}},28298:function(e,a,t){"use strict";var l=t(52322),n=t(2784),r=t(74143),s=t(44258),d=t(41633),o=t(45297),i=t(94918),c=t(26698),u=t(51909),m=t(90740),v=t(32827),p=t(81576),y=t(7087),h=t.n(y);a.Z=e=>{let{name:a,label:t,value:y,onChange:f,error:x=!1,helperText:I="",disabledRangeTime:g={},variant:C="outlined",size:D="small",fullWidth:b=!0,required:S=!1,autoFocus:R=!1,disabled:q=!1,disabledTime:w=null,readOnly:j=!1,editMode:P=!1,hasBorder:T=!0,hidden:Z=!1,use24Hour:N=!1,min:F=null,max:k=null,...O}=e,[A,V]=(0,n.useState)(!1),[_,L]=(0,n.useState)(!1),{_readOnly:M,_required:E,_hidden:B}=(0,p.W)(a,O.maxAccess,S,j,Z);return B?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(d._,{dateAdapter:m.y,children:(0,l.jsx)(u.j,{variant:C,size:D,value:y,label:t,fullWidth:b,ampm:!N,minTime:F,maxTime:k,onFocus:()=>L(!0),onBlur:()=>L(!1),autoFocus:R,onChange:e=>f(a,e),onClose:()=>V(!1),open:A,disabled:q,readOnly:M,clearable:!0,slotProps:{textField:{required:E,size:D,fullWidth:b,error:!!x,helperText:"string"==typeof x?x:I,InputProps:{classes:{root:h().outlinedRoot,notchedOutline:T?h().outlinedFieldset:h().outlinedNoBorder,input:h().inputBase},endAdornment:!(M||q)&&(0,l.jsxs)(r.Z,{position:"end",className:h().inputAdornment,children:[y&&(0,l.jsx)(s.Z,{tabIndex:-1,className:h().iconButton,onClick:()=>f(a,null),children:(0,l.jsx)(o.Z,{className:h().icon})}),(0,l.jsx)(s.Z,{tabIndex:-1,className:h().iconButton,onClick:()=>V(!0),children:(0,l.jsx)(i.Z,{className:h().icon})})]})},InputLabelProps:{className:_||y?h().inputLabelShrink:h().inputLabel}},actionBar:{actions:["accept"]}},slots:{actionBar:e=>(0,l.jsx)(c.Z,{...e,actions:["accept"]}),popper:e=>(0,l.jsx)(v.Z,{...e,matchAnchorWidth:!1,isDateTimePicker:!0})},...O})})}},38836:function(e,a,t){"use strict";t.d(a,{Z:function(){return ey}});var l=t(52322),n=t(2784),r=t(23925),s=t(44258),d=t(9737),o=t(69387),i=t(27723),c=t(65950),u=t(68676),m=t(60218),v=t(78711),p=t(62202),y=t(71987),h=t(19473),f=t(23361),x=t(21326);let I=e=>{let{window:a,w:t,responseValue:r,onConfirm:s,fullScreen:d}=e,{platformLabels:o}=(0,n.useContext)(h.l);return(0,x.Z)({title:o.Confirmation,window:a}),(0,l.jsx)(f.Z,{DialogText:2===r?o.ApproveDoc:o.RejectDoc,okButtonAction:()=>{s(),a.close(),t.close()},fullScreen:d,cancelButtonAction:()=>{a.close()}})};I.width=450,I.height=170;var g=t(5088),C=t(21581),D=t(89330),b=t(39812);let S={DocumentsOnHold:{set:"CTDR.asmx/setTRX"}};var R=t(31389),q=t(62362),w=t(61802),j=t(7121),P=t(1883),T=t(54074);function Z(e){let{labels:a,maxAccess:t,functionId:r,seqNo:s,recordId:d,window:o}=e,[i,f]=(0,n.useState)(null),{platformLabels:x}=(0,n.useContext)(h.l),{getRequest:Z,postRequest:N}=(0,n.useContext)(c.$),F=(0,y.E)({endpointId:u.y.DocumentsOnHold.qry}),{stack:k}=(0,w.zY)(),O=(0,v.TA)({initialValues:{recordId:null,reference:"",indicatorId:null,functionId:null,seqNo:"",thirdParty:"",date:null,notes:"",responseDate:null,strategyName:""},validateOnChange:!0,onSubmit:async e=>{let a={...e,date:(0,b.ku)(e.date),response:i},t=(0,j.x)(r);t===P.Y.CurrencyTrading||t===P.Y.Remittance?await N({extension:S.DocumentsOnHold.set,record:JSON.stringify(a)}):await N({extension:u.y.DocumentsOnHold.set,record:JSON.stringify(a)}),p.ZP.success(r||s||e.recordId||null===i?x.Edited:x.Added),F()}});function A(e){f(e),k({Component:I,props:{fullScreen:!1,responseValue:e,w:o,onConfirm:()=>{console.log("submit"),O.submitForm()}}})}return(0,n.useEffect)(()=>{!async function(){var e;let a=await Z({extension:u.y.DocumentsOnHold.get,parameters:"_functionId=".concat(r,"&_seqNo=").concat(s,"&_recordId=").concat(d)});O.setValues({...a.record,date:(0,b.a1)(null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.date)})}()},[]),(0,l.jsx)(T.Z,{actions:[{key:"Reject",condition:!0,onClick:()=>{A(-1)},disabled:!1},{key:"Approve",condition:!0,onClick:()=>{A(2)},disabled:!1}],isSaved:!1,maxAccess:t,children:(0,l.jsx)(R.R,{children:(0,l.jsx)(q.Q,{children:(0,l.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"reference",label:a.reference,value:O.values.reference,readOnly:!0,maxAccess:t,maxLength:"30"})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"thirdParty",label:a.thirdParty,value:O.values.thirdParty,readOnly:!0,maxAccess:t})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"date",label:a.date,onChange:O.setFieldValue,value:O.values.date,readOnly:!0,maxAccess:t})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"strategyName",label:a.strategy,value:O.values.strategyName,readOnly:!0,maxAccess:t})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"notes",label:a.notes,value:O.values.notes,maxLength:"100",rows:2,maxAccess:t,onChange:O.handleChange,onClear:()=>O.setFieldValue("notes",""),error:O.touched.notes&&!!O.errors.notes})})]})})})})}var N=t(26612),F=t(47441),k=t(58974),O=t(25991),A=t(38449),V=t(60352),_=t(53137),L=t(33625),M=t(93741),E=t(57981),B=t(74456),J=t(99090),H=t(69549),U=t(8324),Y=t(99471),G=t(44129),W=t(38096),Q=t(58669),$=t(40300),z=t(89764),K=t(69952),X=t(20899),ee=t(41451),ea=t(73470),et=t(51682),el=t(43933),en=t(21379),er=t(30032),es=t(23427),ed=t(1838),eo=t(86557),ei=t(58583),ec=t(27603),eu=t(32304),em=t(84622),ev=t(35934),ep=t(23476),ey=e=>{let{pageSize:a=50}=e,{getRequest:t}=(0,n.useContext)(c.$),{stack:m}=(0,w.zY)();async function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:l=0}=e;return{...await t({extension:u.y.DocumentsOnHold.qry,parameters:"_startAt=".concat(l,"&_reference=&_sortBy=reference desc&_pageSize=").concat(a)}),_startAt:l}}let{query:{data:p},labels:h,filterBy:f,clearFilter:x,refetch:I,paginationParameters:g,access:C}=(0,y.J)({queryFn:v,endpointId:u.y.DocumentsOnHold.qry,datasetId:N.i.DocumentsOnHold,filter:{endpointId:u.y.DocumentsOnHold.qry,filterFn:D}});async function D(e){let{options:l={},filters:n}=e,{_startAt:r=0}=l;return n.qry&&await t({extension:u.y.DocumentsOnHold.qry,parameters:"&_reference=".concat(n.qry,"&_sortBy=reference desc&_pageSize=").concat(a,"&_startAt=").concat(r)})}let b=async e=>{try{var a;let l=await t({extension:A.r.UserDefaults.get,parameters:"_userId=".concat(e&&e.userId,"&_key=plantId")});return null==l?void 0:null===(a=l.record)||void 0===a?void 0:a.value}catch(e){return""}},S=async e=>{let a;let l=e.recordId;switch(e.functionId){case j.J.CurrencyCreditOrderSale:case j.J.CurrencyCreditOrderPurchase:a=F.Z;break;case j.J.CreditInvoiceSales:case j.J.CreditInvoicePurchase:a=k.Z;break;case j.J.CashCountTransaction:a=M.Z;break;case j.J.CurrencyPurchase:case j.J.CurrencySale:a=O.Z;break;case j.J.KYC:await t({extension:_.L.CtClientIndividual.get,parameters:"_recordId=".concat(e.recordId)}).then(e=>{l=e.record.clientId}),a=V.Z;break;case j.J.ResignationRequest:a=ea.Z;break;case j.J.LeaveRequest:a=et.Z;break;case j.J.Samples:a=el.Z;break;case j.J.PayrollList:a=en.Z;break;case j.J.OutwardsOrder:a=Y.Z;break;case j.J.CashTransfer:a=E.Z;break;case j.J.OutwardsModification:a=B.Z;break;case j.J.OutwardsReturn:a=J.Z;break;case j.J.InwardTransfer:a=H.Z;break;case j.J.InwardSettlement:a=U.Z;break;case j.J.Sketch:a=G.Z;break;case j.J.SalesOrder:a=Q.Z;break;case j.J.ThreeDDesign:a=W.Z;break;case j.J.LoanRequest:a=z.Z;break;case j.J.PurchaseRequisition:a=$.Z;break;case j.J.PurchaseOrder:a=K.Z;break;case j.J.MaterialRequest:a=X.Z;break;case j.J.CostAllocation:a=ee.Z;break;case j.J.MRP:a=er.Z;break;case j.J.ReturnFromLeave:a=es.Z;break;case j.J.Penalty:a=ed.Z;break;case j.J.TimeVariation:a=eo.Z;break;case j.J.DuringShiftLeave:a=ei.Z;break;case j.J.JobInfo:a=ec.Z;break;case j.J.PaymentOrder:a=eu.Z;break;case j.J.WorkCenterConsumption:a=em.Z;break;case j.J.ProductionOrder:a=ev.Z;break;case j.J.StockCount:a=ep.Z}if(a){let e=window.sessionStorage.getItem("userData")?JSON.parse(window.sessionStorage.getItem("userData")):null,t=await b(e);m({Component:a,props:{recordId:l,plantId:t,userData:e}})}},P=async e=>{await S(e)},T=[{field:"reference",headerName:h.reference,flex:2},{field:"functionName",headerName:h.functionName,flex:2},{field:"thirdParty",headerName:h.thirdParty,flex:2},{field:"strategyName",headerName:h.strategy,flex:2},{field:"date",headerName:h.date,flex:2,type:"date"},{field:"approval",flex:1,cellRenderer:e=>(0,l.jsx)(r.Z,{sx:{display:"flex",width:"100%",justifyContent:"center"},children:(0,l.jsx)(s.Z,{size:"small",onClick:()=>ey(e.data),children:(0,l.jsx)(d.Z,{icon:"mdi:application-edit-outline",fontSize:18})})})}],ey=e=>{m({Component:Z,props:{labels:h,maxAccess:h,maxAccess:C,recordId:e.recordId,functionId:e.functionId,seqNo:e.seqNo}})};return(0,l.jsxs)(R.R,{children:[(0,l.jsx)(L.g,{children:(0,l.jsx)(i.Z,{maxAccess:C,onSearch:e=>{f("qry",e)},onSearchClear:()=>{x("qry")},labels:h,inputSearch:!0})}),(0,l.jsx)(q.Q,{children:(0,l.jsx)(o.Z,{columns:T,gridData:p,rowId:["functionId","seqNo","recordId"],onEdit:P,isLoading:!1,pageSize:a,refetch:I,paginationParameters:g,paginationType:"api",maxAccess:C})})]})}},93741:function(e,a,t){"use strict";t.d(a,{Z:function(){return L}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(65950),c=t(26612),u=t(5088),m=t(31389),v=t(80983),p=t(27423),y=t(2119),h=t(8661),f=t(38449),x=t(89330),I=t(76399),g=t(33625),C=t(62362),D=t(91406),b=t(57393),S=t(54074);function R(e){var a,t;let{labels:d,maxAccess:o,recordId:c,forceNoteCount:p,row:y,updateRow:h,readOnly:f,window:x}=e,{getRequest:R}=(0,r.useContext)(i.$),{formik:q}=(0,v.c)({maxAccess:o,initialValues:{total:0,currencyNotes:[{id:1,seqNo:"",cashCountId:0,note:"",qty:"",subTotal:""}]},validateOnChange:!0,validationSchema:s.Ry({currencyNotes:s.IX().of(s.Ry().shape({note:s.Z_().required()})).required("Operations array is required")}),onSubmit:async e=>{var a;let t=null===(a=e.currencyNotes.filter(e=>e.qty>0))||void 0===a?void 0:a.map(e=>{let{id:a,seqNo:t,cashCountId:l,qty:n,qty1:r,qty100:s,qty1000:d,...o}=e;return{seqNo:y.id,qty:n,qty1:r||0,qty100:s||0,qty1000:d||0,cashCountId:(null==y?void 0:y.cashCountId)<1?0:null==y?void 0:y.cashCountId,...o}}),l=e.currencyNotes.reduce((e,a)=>{let{subTotal:t}=a;return e+(Number(t)||0)},0);p?h({changes:{counted:l,currencyNotes:t,variation:l-(y.system||0),flag:y.system===l}}):h({changes:{currencyNotes:t}}),x.close()}});(0,r.useEffect)(()=>{(null==y?void 0:y.id)&&w()},[c]);let w=async()=>{var e;let a="_currencyId="+y.currencyId,{list:t}=await R({extension:b.s.CcCashNotes.qry,parameters:a}),l=null===(e=y.currencyNotes)||void 0===e?void 0:e.map((e,a)=>{let{id:t,qty:l,note:n,...r}=e;return{id:a+1,qty:l,note:n,subTotal:l*n,...r}}),n=(null==t?void 0:t.map((e,a)=>{let{...t}=e;return{id:a+1,...t}})).map(e=>{let a={id:e.id,note:e.note,seqNo:null,qty:"",subTotal:0},t=null==l?void 0:l.find(e=>a.note===e.note);return t&&(a.qty=t.qty,a.qty1=t.qty1||"",a.qty100=t.qty100||"",a.qty1000=t.qty1000||"",a.seqNo=t.seqNo,a.subTotal=t.subTotal),a});q.setFieldValue("currencyNotes",n)},j=null===(t=q.values)||void 0===t?void 0:null===(a=t.currencyNotes)||void 0===a?void 0:a.reduce((e,a)=>{let{subTotal:t}=a;return e+(Number(t)||0)},0);function P(e){let{update:a,newRow:t}=e,l=(null==t?void 0:t.note)||0,n=((null==t?void 0:t.qty1)||0)+100*((null==t?void 0:t.qty100)||0)+1e3*((null==t?void 0:t.qty1000)||0);a({qty:n,subTotal:n*l})}return(0,l.jsx)(S.Z,{onSave:q.handleSubmit,maxAccess:o,children:(0,l.jsxs)(m.R,{children:[(0,l.jsx)(g.g,{children:(0,l.jsx)(n.ZP,{container:!0,xs:6,children:(0,l.jsx)(u.Z,{name:"reference",label:d.currency,value:y.currencyRef,readOnly:!0})})}),(0,l.jsx)(C.Q,{children:(0,l.jsx)(I._,{onChange:e=>q.setFieldValue("currencyNotes",e),value:q.values.currencyNotes,error:q.errors.currencyNotes,columns:[{component:"numberfield",label:d.currencyNote,name:"note",props:{readOnly:!0}},{component:"numberfield",label:d.qty1,name:"qty1",props:{readOnly:f,decimalScale:0,maxLength:2,allowNegative:!1},async onChange(e){let{row:a}=e;P(a)}},{component:"numberfield",label:d.qty100,name:"qty100",props:{readOnly:f,decimalScale:0,maxLength:3,allowNegative:!1},async onChange(e){let{row:a}=e;P(a)}},{component:"numberfield",label:d.qty1000,name:"qty1000",props:{readOnly:f,decimalScale:0,allowNegative:!1},async onChange(e){let{row:a}=e;P(a)}},{component:"numberfield",label:d.qty,name:"qty",props:{readOnly:!0},async onChange(e){let{row:{update:a,newRow:t}}=e,l=(null==t?void 0:t.note)||0;a({subTotal:((null==t?void 0:t.qty)||0)*l})}},{component:"numberfield",label:d.subTotal,name:"subTotal",props:{readOnly:!0}}],allowDelete:!1,allowAddNewLine:!1})}),(0,l.jsx)(g.g,{children:(0,l.jsx)(n.ZP,{container:!0,spacing:2,sx:{mb:3,display:"flex",justifyContent:"right"},children:(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(D.Z,{name:"total",label:d.total,value:j,readOnly:!0})})})})]})})}var q=t(61802),w=t(39812),j=t(7121),P=t(1685),T=t(71987),Z=t(39704),N=t(19473);function F(e){let{cashCountId:a,fromPlantId:t,labels:d,maxAccess:c}=e,{postRequest:u}=(0,r.useContext)(i.$),{platformLabels:x}=(0,r.useContext)(N.l),{formik:I}=(0,v.c)({maxAccess:c,initialValues:{cashCountId:a,fromPlantId:t,toPlantId:"",toAccountId:""},validateOnChange:!0,validationSchema:s.Ry({toPlantId:s.Z_().required(" "),toAccountId:s.Z_().required(" ")}),onSubmit:async e=>{console.log(e);let l={cashCountId:a,fromPlantId:t,toPlantId:e.toPlantId,toAccountId:e.toAccountId};try{await u({extension:b.s.Generate.generate,record:JSON.stringify(l)}),o.ZP.success(x.Generated)}catch(e){}}});return(0,l.jsx)(S.Z,{onSave:I.handleSubmit,maxAccess:c,children:(0,l.jsx)(m.R,{children:(0,l.jsx)(g.g,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:f.r.Plant.qry,name:"toPlantId",label:d.toPlant,values:I.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,maxAccess:c,onChange:(e,a)=>{I&&I.setFieldValue("toPlantId",null==a?void 0:a.recordId),I.setFieldValue("toAccountId",null),I.setFieldValue("fromCARef",null),I.setFieldValue("fromCAName",null)},error:I.touched.toPlantId&&!!I.errors.toPlantId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.U,{endpointId:y.G.CashAccount.snapshot,parameters:{_type:0},filter:{plantId:I.values.toPlantId},firstFieldWidth:5,valueField:"accountNo",displayField:"name",name:"toAccountId",displayFieldWidth:2,required:!0,label:d.toCashAccount,form:I,valueShow:"fromCARef",secondValueShow:"fromCAName",onChange:(e,a)=>{I.setFieldValue("toAccountId",a?a.recordId:null),I.setFieldValue("fromCARef",a?a.accountNo:null),I.setFieldValue("fromCAName",a?a.name:null)},error:I.touched.toAccountId&&!!I.errors.toAccountId,maxAccess:c})})]})})})})}var k=t(98345),O=t(19689),A=t(50023),V=t(21326);let _=e=>{var a,t,D,S,_;let{recordId:L,window:M}=e,{postRequest:E,getRequest:B}=(0,r.useContext)(i.$),{platformLabels:J}=(0,r.useContext)(N.l),[H,U]=(0,r.useState)(!!L),{stack:Y}=(0,q.zY)(),[G,W]=(0,r.useState)(!1),[Q,$]=(0,r.useState)(!1),z=async()=>{let e=(0,P.m)("userData").userId,a="_userId=".concat(e,"&_functionId=").concat(j.J.CashCountTransaction),{record:t}=await B({extension:f.r.UserFunction.get,parameters:a});t&&et.setFieldValue("dtId",t.dtId);let{record:l}=await B({extension:f.r.UserDefaults.get,parameters:"_userId=".concat(e,"&_key=cashAccountId")}),n=null==l?void 0:l.value;if(n){let{record:e}=await B({extension:y.G.CbBankAccounts.get,parameters:"_recordId=".concat(n)});et.setFieldValue("cashAccountId",n),et.setFieldValue("cashAccountRef",e.reference),et.setFieldValue("cashAccountName",e.name)}let{record:r}=await B({extension:f.r.UserDefaults.get,parameters:"_userId=".concat(e,"&_key=plantId")});r&&et.setFieldValue("plantId",parseInt(r.value))},K=(0,T.E)({endpointId:b.s.CashCountTransaction.qry}),{labels:X,access:ee}=(0,A.Z)({datasetId:c.i.CashCountTransaction,editMode:!!L});(0,V.Z)({title:X.cashCount,window:M});let{maxAccess:ea}=(0,k.H)({functionId:j.J.CashCountTransaction,access:ee,hasDT:!1,enabled:!H}),{formik:et}=(0,v.c)({maxAccess:ea,initialValues:{recordId:null,plantId:null,reference:"",cashAccountId:"",cashAccountRef:"",cashAccountName:"",forceNoteCount:!1,wip:1,status:1,releaseStatus:"",date:new Date,startTime:"",endTime:"",items:[{id:1,cashCountId:"",seqNo:1,currencyId:"",currencyName:"",currencyRef:"",counted:"",system:"",variation:"",flag:"",currencyNotes:[]}]},validateOnChange:!0,validationSchema:s.Ry({cashAccountRef:s.Z_().required(),plantId:s.Z_().required(),items:s.IX().of(s.Ry().shape({currencyId:s.Z_().required(),counted:s.Z_().required()})).required()}),onSubmit:async e=>{let a={header:{recordId:e.recordId,dtId:e.dtId,plantId:e.plantId,shiftId:e.shiftId,currencyId:e.currencyId,cashAccountId:e.cashAccountId,forceNoteCount:e.forceNoteCount,reference:e.reference,date:(0,w.ku)(new Date),startTime:e.startTime,endTime:e.endTime,status:e.status,wip:e.wip,releaseStatus:e.releaseStatus},items:e.items.map((e,a)=>{let{id:t,flag:l,enabled:n,cashCountId:r,currencyNotes:s,...d}=e;return{seqNo:a+1,cashCountId:r||0,currencyNotes:s||[],...d}})},t=(await E({extension:b.s.CashCountTransaction.set2,record:JSON.stringify(a)})).recordId;e.recordId?o.ZP.success(J.Edited):(o.ZP.success(J.Added),el(t)),U(!0),K()}});(0,r.useEffect)(()=>{H||z(),es()},[]),(0,r.useEffect)(()=>{el(L)},[L]);let el=async e=>{if(e){let{record:{header:a,items:t}}=await B({extension:b.s.CashCountTransaction.get2,parameters:"_recordId=".concat(e)});W(2===a.wip),$(3===a.status),et.setValues({recordId:a.recordId,plantId:a.plantId,reference:a.reference,cashAccountId:a.cashAccountId,cashAccountRef:a.cashAccountRef,cashAccountName:a.cashAccountName,forceNoteCount:a.forceNoteCount,wip:a.wip,status:a.status,releaseStatus:a.releaseStatus,date:(0,w.a1)(a.date),startTime:a.startTime&&(0,w.s4)(a.startTime),endTime:a.endTime&&(0,w.s4)(a.endTime),items:t.map((e,a)=>{let{seqNo:t,variation:l,...n}=e;return{id:t,seqNo:t,variation:l,flag:0===l,...n}})})}};async function en(){let e=et.values,a={recordId:e.recordId,dtId:e.dtId,plantId:e.plantId,shiftId:e.shiftId,currencyId:e.currencyId,cashAccountId:e.cashAccountId,reference:e.reference,date:e.date,startTime:e.startTime,status:e.status,wip:e.wip,releaseStatus:e.releaseStatus},t=await E({extension:b.s.CashCountTransaction.reopen,record:JSON.stringify(a)}).then(()=>{t.recordId&&(o.ZP.success(J.Reopened),K(),el(null==e?void 0:e.recordId))})}let er=[{key:"Bulk",condition:!0,onClick:function(){Y({Component:F,props:{labels:X,cashCountId:et.values.recordId,fromPlantId:et.values.plantId,maxAccess:ea},width:600,height:300,title:X.bulk})},disabled:!Q},{key:"WorkFlow",condition:!0,onClick:async()=>{Y({Component:Z.Z,props:{functionId:j.J.CashCountTransaction,recordId:et.values.recordId}})},disabled:!H},{key:"Locked",condition:!0,onClick:()=>{E({extension:b.s.CashCountTransaction.post,record:JSON.stringify(et.values)}).then(e=>{(null==e?void 0:e.recordId)&&(o.ZP.success(J.Posted),K(),$(!0))})},disabled:!H||4!==et.values.status||Q},{key:"Close",condition:!G,onClick:()=>{E({extension:b.s.CashCountTransaction.close,record:JSON.stringify(et.values)}).then(e=>{(null==e?void 0:e.recordId)&&(o.ZP.success(J.Closed),K(),el(null==e?void 0:e.recordId))})},disabled:G||!H},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!G},{key:"Reopen",condition:G,onClick:en,disabled:!G||!H||3===et.values.releaseStatus},{key:"Account Balance",condition:!0,onClick:"onClickAC",disabled:!1}],es=async()=>{var e;let{record:a}=await B({extension:null===(e=f.r.TimeZone)||void 0===e?void 0:e.get,parameters:""});a&&(H||et.setFieldValue("startTime",(0,w.s4)(null==a?void 0:a.utcDate,"utc")))},ed=async e=>{var a,t;let l=null===(a=et.values)||void 0===a?void 0:a.cashAccountId;if(e&&l){let{record:a}=await B({extension:y.G.AccountBalance.get,parameters:"_currencyId="+e+"&_cashAccountId="+(null===(t=et.values)||void 0===t?void 0:t.cashAccountId)});if(a)return a.balance}};return(0,l.jsx)(d.Z,{actions:er,resourceId:c.i.CashCountTransaction,form:et,maxAccess:ea,editMode:H,functionId:j.J.CashCountTransaction,disabledSubmit:G,previewReport:H,children:(0,l.jsxs)(m.R,{children:[(0,l.jsx)(g.g,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(p.U,{endpointId:y.G.CashAccount.snapshot,parameters:{_type:2},name:"cashAccountRef",required:!0,label:X.cashAccount,readOnly:Q||G,valueField:"reference",displayField:"name",valueShow:"cashAccountRef",secondValueShow:"cashAccountName",form:et,onChange:(e,a)=>{et.setValues({...et.values,cashAccountId:(null==a?void 0:a.recordId)||"",cashAccountRef:(null==a?void 0:a.reference)||"",cashAccountName:(null==a?void 0:a.name)||""})},maxAccess:ea})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{name:"date",label:X.date,value:et.values.date,onChange:et.setFieldValue,readOnly:!0,maxAccess:ea})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{endpointId:f.r.Plant.qry,name:"plantId",label:X.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:et.values,required:!0,readOnly:Q||G,maxAccess:ea,onChange:(e,a)=>{let t=(null==a?void 0:a.recordId)||"";et.setFieldValue("plantId",t)},error:et.touched.plantId&&!!et.errors.plantId})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(u.Z,{name:"startTime",label:X.startTime,value:et.values.startTime,readOnly:!0,maxAccess:ea})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(u.Z,{name:"reference",label:X.reference,value:et.values.reference,readOnly:H,maxAccess:ea,onChange:e=>{et.handleChange(e)},onClear:()=>et.setFieldValue("reference",""),error:et.touched.reference&&!!et.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(u.Z,{name:"endTime",label:X.endTime,value:et.values.endTime,readOnly:!0,maxAccess:ea})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(O.Z,{name:"forceNoteCount",value:null===(a=et.values)||void 0===a?void 0:a.forceNoteCount,onChange:e=>et.setFieldValue("forceNoteCount",e.target.checked),label:X.forceNotesCount,maxAccess:ea,disabled:et.values.items&&((null===(D=et.values)||void 0===D?void 0:null===(t=D.items[0])||void 0===t?void 0:t.currencyId)||(null===(_=et.values)||void 0===_?void 0:null===(S=_.items[0])||void 0===S?void 0:S.currencyId))})})]})}),(0,l.jsx)(C.Q,{children:(0,l.jsx)(I._,{onChange:e=>et.setFieldValue("items",e),value:et.values.items,error:et.errors.items,name:"currency",maxAccess:ea,columns:[{component:"resourcecombobox",label:X.currency,name:"currencyId",props:{readOnly:Q||G,endpointId:f.r.Currency.qry,valueField:"recordId",displayField:"reference",mapping:[{from:"recordId",to:"currencyId"},{from:"reference",to:"currencyRef"},{from:"name",to:"currencyName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:2},propsReducer(e){var a;let{row:t,props:l}=e;return{...l,readOnly:(null===(a=t.currencyNotes)||void 0===a?void 0:a.length)>0}},async onChange(e){let{row:{update:a,newRow:t}}=e;(null==t?void 0:t.currencyId)&&a({system:await ed(null==t?void 0:t.currencyId)})}},{component:"numberfield",name:"counted",label:X.count,props:{readOnly:et.values.forceNoteCount||Q||G},async onChange(e){let{row:{update:a,newRow:t}}=e,l=t.counted||0,n=t.system||0;a({variation:l-n,flag:n===l})}},{component:"numberfield",label:X.system,name:"system",props:{readOnly:!0}},{component:"icon",label:X.flag,name:"flag"},{component:"button",name:"enabled",label:X.currencyNotes,props:{onCondition:e=>({disabled:!(null==e?void 0:e.currencyId)})},onClick:(e,a,t,l)=>{Y({Component:R,props:{readOnly:Q||G,labels:X,maxAccess:ea,forceNoteCount:et.values.forceNoteCount,row:a,updateRow:l},width:700,title:null==X?void 0:X.currencyNotes})}}],allowDelete:!G||!Q&&!G})})]})})};_.width=1100,_.height=700;var L=_},57981:function(e,a,t){"use strict";var l=t(52322),n=t(2784),r=t(60218),s=t(48601),d=t(5088),o=t(82737),i=t(26612),c=t(8661),u=t(2119),m=t(65950),v=t(38449),p=t(71987),y=t(89330),h=t(62202),f=t(96026),x=t(7121),I=t(91088),g=t(76399),C=t(21581),D=t(30390),b=t(39812),S=t(31389),R=t(33625),q=t(62362),w=t(61802),j=t(80983),P=t(1251),T=t(26553),Z=t(30657),N=t(39704),F=t(98345),k=t(50023),O=t(21326);let A=e=>{var a,t,A,V;let{recordId:_,plantId:L,cashAccountId:M,dtId:E,refetch:B,window:J}=e,[H,U]=(0,n.useState)(!!_),{getRequest:Y,postRequest:G}=(0,n.useContext)(m.$),{stack:W}=(0,f.V)(),{stack:Q}=(0,w.zY)(),[$,z]=(0,n.useState)(!1),[K,X]=(0,n.useState)(!0),ee=(0,p.E)({endpointId:u.G.CashTransfer.page}),{labels:ea,access:et}=(0,k.Z)({datasetId:i.i.CashTransfer,editMode:!!_});(0,O.Z)({title:ea.cashTransfer,window:J});let[el,en]=(0,n.useState)({recordId:_||null,dtId:parseInt(E),reference:"",date:new Date,toPlantId:parseInt(L),fromPlantId:parseInt(L),fromCashAccountId:parseInt(M),toCashAccountId:"",baseAmount:"",notes:"",wip:"",status:"",statusName:"",releaseStatus:"",rsName:"",wipName:"",transfers:[{id:1,transferId:_||0,seqNo:"",currencyId:"",currencyName:"",currencyRef:"",amount:"",baseAmount:"",exRate:"",rateCalcMethod:"",balance:0}]}),{maxAccess:er}=(0,F.H)({functionId:x.J.CashTransfer,access:et,enabled:!_,hasDT:!1}),{formik:es}=(0,j.c)({maxAccess:er,initialValues:el,validateOnChange:!0,validationSchema:s.Ry({fromCashAccountId:s.Z_().required(),fromPlantId:s.Z_().required(),date:s.Z_().required(),toPlantId:s.Z_().required(),toCashAccountId:s.Z_().nullable().test("",function(e){let{fromPlantId:a,toPlantId:t}=this.parent;return a!=t||!!e}),transfers:s.IX().of(s.Ry().shape({currencyName:s.Z_().required(),amount:s.Z_().nullable().required()})).required()}),onSubmit:async e=>{let a={...e};delete a.transfers,a.date=(0,b.ku)(a.date),a.status=""===a.status?1:a.status,a.wip=""===a.wip?1:a.wip,a.baseAmount=ed;let t=es.values.transfers.map((e,a)=>({...e,seqNo:a+1,transferId:es.values.recordId||0}));if(1===t.length&&""===t[0].currencyId){W({message:"Grid not filled. Please fill the grid before saving."});return}let l=await G({extension:u.G.CashTransfer.set,record:JSON.stringify({header:a,items:t})});if(l.recordId){h.ZP.success("Record Updated Successfully"),es.setFieldValue("recordId",l.recordId),U(!0);let e=await Y({extension:u.G.CashTransfer.get,parameters:"_recordId=".concat(l.recordId)});es.setFieldValue("reference",e.record.reference),ee()}}}),ed=es.values.transfers.reduce((e,a)=>{var t;return e+(parseFloat(null===(t=a.baseAmount)||void 0===t?void 0:t.toString().replace(/,/g,""))||0)},0),eo=async()=>{let{transfers:e,...a}=es.values,t={...a};if(t.date=(0,b.ku)(t.date),t.wip=""===t.wip?1:t.wip,t.status=""===t.status?1:t.status,t.baseAmount=ed,(await G({extension:u.G.CashTransfer.close,record:JSON.stringify(t)})).recordId){var l;h.ZP.success("Record Closed Successfully"),ee(),z(!0);let e=await Y({extension:u.G.CashTransfer.get,parameters:"_recordId=".concat(es.values.recordId)});(null==e?void 0:null===(l=e.record)||void 0===l?void 0:l.status)==4&&X(!1)}},ei=async()=>{let{transfers:e,...a}=es.values,t={...a};t.date=(0,b.ku)(t.date),t.wip=""===t.wip?1:t.wip,t.status=""===t.status?1:t.status,t.baseAmount=ed,(await G({extension:u.G.CashTransfer.reopen,record:JSON.stringify(t)})).recordId&&(h.ZP.success("Record Closed Successfully"),ee(),B&&(B(),J.close()),z(!1),X(!0))},ec=async(e,a)=>{let t=(await Y({extension:u.G.CurrencyTransfer.qry,parameters:"_transferId=".concat(e)})).list.map(e=>{var a;return{...e,id:e.seqNo,amount:parseFloat(e.amount).toFixed(2),balance:null!==(a=parseFloat(null==e?void 0:e.balance).toFixed(2))&&void 0!==a?a:0}});es.setValues({...a,transfers:t})},eu=async()=>{if(M){let e=await Y({extension:u.G.CashAccount.get,parameters:"_recordId=".concat(M)});e.record&&(es.setFieldValue("fromCARef",e.record.accountNo),es.setFieldValue("fromCAName",e.record.name))}};(0,n.useEffect)(()=>{!async function(){if(_){let e=await Y({extension:u.G.CashTransfer.get,parameters:"_recordId=".concat(_)});e.record.date=(0,b.a1)(e.record.date),z(2===e.record.wip),X(4!==e.record.status),await ec(_,e.record)}else eu()}()},[]);let em=[{key:"WorkFlow",condition:!0,onClick:async()=>{Q({Component:N.Z,props:{functionId:x.J.CashTransfer,recordId:es.values.recordId}})},disabled:!H},{key:"Close",condition:!$,onClick:eo,disabled:$||!H},{key:"Reopen",condition:$,onClick:ei,disabled:!$||!H||3===es.values.releaseStatus&&3===es.values.status},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!$},{key:"Shipment",condition:!0,onClick:()=>{Q({Component:I.u,props:{recordId:es.values.recordId,functionId:x.J.CashTransfer,editMode:$,totalBaseAmount:ed}})},disabled:H&&es.values.fromPlantId==es.values.toPlantId||!H},{key:"Account Balance",condition:!0,onClick:"onClickAC",disabled:!1},{key:"Cash Transaction",condition:!0,onClick:"transactionClicked",disabled:!H}];return(0,l.jsx)(o.Z,{resourceId:i.i.CashTransfer,form:es,editMode:H,maxAccess:er,functionId:x.J.CashTransfer,actions:em,disabledSubmit:$,children:(0,l.jsxs)(S.R,{children:[(0,l.jsx)(R.g,{children:(0,l.jsxs)(r.ZP,{container:!0,children:[(0,l.jsxs)(r.ZP,{container:!0,rowGap:2,xs:6,sx:{px:2},spacing:2,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(d.Z,{name:"reference",label:ea.reference,value:null==es?void 0:null===(a=es.values)||void 0===a?void 0:a.reference,maxAccess:er,maxLength:"15",readOnly:H,error:es.touched.reference&&!!es.errors.reference})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(c.Z,{endpointId:v.r.Plant.qry,name:"fromPlantId",label:ea.fromPlant,values:es.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:!0,required:!0,maxAccess:er,onChange:(e,a)=>{es&&es.setFieldValue("fromPlantId",null==a?void 0:a.recordId)},error:es.touched.fromPlantId&&!!es.errors.fromPlantId})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(c.Z,{endpointId:u.G.CashAccount.qry,parameters:"_type=0",name:"fromCashAccountId",label:ea.fromCashAcc,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:es.values,readOnly:!0,required:!0,maxAccess:er,onChange:(e,a)=>{es.setFieldValue("fromCashAccountId",(null==a?void 0:a.recordId)||null)},error:es.touched.fromCashAccountId&&!!es.errors.fromCashAccountId})})]}),(0,l.jsxs)(r.ZP,{container:!0,rowGap:2,xs:6,sx:{px:2},spacing:2,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(y.Z,{name:"date",required:!0,readOnly:$,label:ea.date,value:null==es?void 0:null===(t=es.values)||void 0===t?void 0:t.date,onChange:es.setFieldValue,editMode:H,maxAccess:er,onClear:()=>es.setFieldValue("date",""),error:es.touched.date&&!!es.errors.date})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(c.Z,{endpointId:v.r.Plant.qry,name:"toPlantId",label:ea.toPlant,values:es.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:$,maxAccess:er,onChange:(e,a)=>{es.setFieldValue("toPlantId",a?a.recordId:null),es.setFieldValue("toCashAccountId",null),es.setFieldValue("toCARef",null),es.setFieldValue("toCAName",null)},error:es.touched.toPlantId&&!!es.errors.toPlantId})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(c.Z,{endpointId:u.G.CashAccount.qry,parameters:"_type=0",name:"toCashAccountId",label:ea.toCashAcc,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:es.values,required:es.values.fromPlantId===es.values.toPlantId,filter:e=>e.plantId===es.values.toPlantId,readOnly:!es.values.toPlantId||$,maxAccess:er,onChange:(e,a)=>{es.setFieldValue("toCashAccountId",(null==a?void 0:a.recordId)||null)},error:es.touched.toCashAccountId&&!!es.errors.toCashAccountId})})]})]})}),(0,l.jsx)(q.Q,{children:(0,l.jsx)(g._,{onChange:e=>es.setFieldValue("transfers",e),value:es.values.transfers,error:es.errors.transfers,allowDelete:!$,allowAddNewLine:!$,maxAccess:er,initialValues:null==es?void 0:null===(V=es.initialValues)||void 0===V?void 0:null===(A=V.transfers)||void 0===A?void 0:A[0],name:"currencies",columns:[{component:"resourcecombobox",label:ea.currency,name:"currencyName",props:{disabled:$,endpointId:v.r.Currency.qry,displayField:"reference",valueField:"recordId",mapping:[{from:"recordId",to:"currencyId"},{from:"name",to:"currencyName"},{from:"reference",to:"currencyRef"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}]},widthDropDown:200,displayFieldWidth:2,async onChange(e){let{row:{update:a,newRow:t}}=e;if((null==t?void 0:t.currencyId)&&t.currencyId){var l,n,r;let e=await (r=null==t?void 0:t.currencyId,Y({extension:P.q.Currency.get,parameters:"_currencyId=".concat(r,"&_date=").concat((0,b.Uf)(es.values.date),"&_rateDivision=").concat(T.B.FINANCIALS)}));a({exRate:null===(l=e.record)||void 0===l?void 0:l.exRate,rateCalcMethod:null===(n=e.record)||void 0===n?void 0:n.rateCalcMethod})}}},{component:"numberfield",label:ea.amount,name:"amount",props:{readOnly:$},async onChange(e){let{row:{update:a,newRow:t}}=e;(null==t?void 0:t.amount)&&(null==t?void 0:t.amount)&&a({baseAmount:(0,Z.fB)({amount:null==t?void 0:t.amount,exRate:null==t?void 0:t.exRate,baseAmount:null==t?void 0:t.baseAmount,rateCalcMethod:null==t?void 0:t.rateCalcMethod,dirtyField:Z.H9}).baseAmount})}},{component:"numberfield",label:ea.baseAmount,name:"baseAmount",props:{readOnly:!0}},{component:"numberfield",name:"balance",label:ea.balance,props:{readOnly:!0}}]})}),(0,l.jsx)(R.g,{children:(0,l.jsx)(D.Z,{container:!0,rowGap:1,xs:7,style:{marginTop:"10px"},children:(0,l.jsx)(C.Z,{name:"notes",label:ea.note,value:es.values.notes,rows:3,readOnly:$,maxLength:"100",editMode:H,maxAccess:er,onChange:e=>es.setFieldValue("notes",e.target.value),onClear:()=>es.setFieldValue("notes","")})})})]})})};A.width=1100,A.height=650,a.Z=A},47441:function(e,a,t){"use strict";var l=t(52322),n=t(89330),r=t(39812),s=t(60218),d=t(95453),o=t(37691),i=t(6640),c=t(2784),u=t(96026),m=t(48601),v=t(82737),p=t(62202),y=t(65950),h=t(71987),f=t(26612),x=t(5088),I=t(21581),g=t(8661),C=t(38449),D=t(7121),b=t(53621),S=t(17627),R=t(24074),q=t(27423),w=t(61802),j=t(58974),P=t(50023),T=t(23361),Z=t(80983),N=t(30390),F=t(39704),k=t(76399),O=t(31389),A=t(33625),V=t(62362),_=t(19473),L=t(98345),M=t(96333),E=t(91088),B=t(21326),J=t(67920),H=t(91406),U=t(1685);let Y=e=>{var a,t,Y,G,W,Q,$,z,K,X,ee,ea,et,el,en;let{recordId:er,window:es}=e,{platformLabels:ed,userDefaultsData:eo}=(0,c.useContext)(_.l),{getRequest:ei,postRequest:ec}=(0,c.useContext)(y.$),{stack:eu}=(0,u.V)(),[em,ev]=(0,c.useState)(D.J.CurrencyCreditOrderPurchase),[ep,ey]=(0,c.useState)(null),{stack:eh}=(0,w.zY)(),ef=(0,U.m)("userData").userId,ex=parseInt(null==eo?void 0:null===(t=eo.list)||void 0===t?void 0:null===(a=t.find(e=>{let{key:a}=e;return"plantId"===a}))||void 0===a?void 0:a.value),{labels:eI,access:eg}=(0,P.Z)({datasetId:f.i.CreditOrder,editMode:!!er});(0,B.Z)({title:eI.creditOrder,window:es});let{maxAccess:eC}=(0,L.H)({functionId:em,access:eg,enabled:!er,hasDT:!1}),eD=(0,h.E)({endpointId:S.s.CreditOrder.page}),{schema:eb,requiredFields:eS}=(0,J.m)({currencyRef:e=>null==e?void 0:e.currencyRef,currencyName:e=>null==e?void 0:e.currencyName,qty:e=>null==e?void 0:e.qty,exRate:e=>null==e?void 0:e.exRate,amount:e=>null==e?void 0:e.amount},!0,eC,"rows"),{formik:eR}=(0,Z.c)({maxAccess:eC,initialValues:{recordId:er,currencyId:null,currencyRef:"",date:new Date,functionId:D.J.CurrencyCreditOrderPurchase,deliveryDate:new Date,reference:"",dtId:null,plantId:parseInt(ex),corId:null,corRef:"",corName:"",wip:1,status:1,releaseStatus:"",notes:"",amount:0,baseAmount:0,exRate:1,rateCalcMethod:"",rateType:"",isTFRClicked:!1,rows:[{id:1,orderId:er||null,seqNo:"",currencyId:null,qty:"",rateCalcMethod:"",exRate:"",minRate:"",maxRate:"",defaultRate:"",amount:"",baseAmount:"",notes:"",goc:!1}]},validateOnChange:!0,validationSchema:m.Ry({date:m.Z_().required(),plantId:m.Z_().required(),corId:m.Z_().required(),rows:m.IX().of(eb)}),onSubmit:async e=>{var a;let t={...e,date:(0,r.ku)(e.date),deliveryDate:(0,r.ku)(e.deliveryDate),amount:eN,baseAmount:eF};delete t.rows;let l=null===(a=eR.values.rows.filter(e=>{var a;return null===(a=Object.values(eS))||void 0===a?void 0:a.every(a=>a(e))}))||void 0===a?void 0:a.map((e,a)=>({...e,seqNo:a+1,orderId:eR.values.recordId||0})),n=await ec({extension:S.s.CreditOrder.set,record:JSON.stringify({header:t,items:l})}),s=e.recordId?ed.Edited:ed.Added;p.ZP.success(s),await eU(null==n?void 0:n.recordId),eD()}}),eq=2==eR.values.wip,ew=3===eR.values.releaseStatus&&3!==eR.values.status,ej=!!eR.values.recordId,eP=async()=>{let e=await ec({extension:S.s.CreditOrder.close,record:JSON.stringify(eR.values)});p.ZP.success(ed.Closed),eD(),eU(null==e?void 0:e.recordId)},eT=async()=>{let e=await ec({extension:S.s.CreditOrder.reopen,record:JSON.stringify(eR.values)});p.ZP.success(ed.Closed),eD(),eU(null==e?void 0:e.recordId)},eZ=async()=>{let e=await ec({extension:S.s.CreditOrder.tfr,record:JSON.stringify(eR.values)});p.ZP.success(ed.Generated),eD(),await eU(eR.values.recordId),es.close(),eh({Component:j.Z,props:{recordId:null==e?void 0:e.recordId}})},eN=(null==eR?void 0:null===(G=eR.values)||void 0===G?void 0:null===(Y=G.rows)||void 0===Y?void 0:Y.length)?eR.values.rows.reduce((e,a)=>{var t;return e+(parseFloat(null===(t=a.amount)||void 0===t?void 0:t.toString().replace(/,/g,""))||0)},0):0,eF=(null==eR?void 0:null===(Q=eR.values)||void 0===Q?void 0:null===(W=Q.rows)||void 0===W?void 0:W.length)?eR.values.rows.reduce((e,a)=>{var t;return e+(parseFloat(null===(t=a.baseAmount)||void 0===t?void 0:t.toString().replace(/,/g,""))||0)},0):0,ek=async(e,a,t)=>{var l,n,r,s;if(!e)return;let d=await ei({extension:b.d.Correspondent.get,parameters:"_recordId=".concat(e)});eR.setFieldValue("currencyId",(null==d?void 0:null===(l=d.record)||void 0===l?void 0:l.currencyId)||null),eR.setFieldValue("currencyRef",(null==d?void 0:null===(n=d.record)||void 0===n?void 0:n.currencyRef)||"");let o=await ei({extension:R.u.Defaults.get,parameters:"_key=ct_credit_eval_ratetype_id"});eA(t,null==d?void 0:null===(r=d.record)||void 0===r?void 0:r.currencyId,a,null==o?void 0:null===(s=o.record)||void 0===s?void 0:s.value)},eO=async e=>{var a;let t=await ei({extension:C.r.UserFunction.get,parameters:"_userId=".concat(ef,"&_functionId=").concat(e)});eR.setFieldValue("dtId",null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.dtId)};async function eA(e,a,t,l){var n,r,s,d,o;if(!e||!a||!l||!t){e||eu({message:eI.emptyPlant}),a||(eR.setFieldValue("corId",null),eR.setFieldValue("corRef",""),eR.setFieldValue("corName",""),eu({message:eI.emptyToCurrency})),l||eu({message:eI.emptyRate}),t||eu({message:eI.emptyFromCurrency});return}let i=await ei({extension:R.u.ExchangeMap.get,parameters:"_plantId=".concat(e,"&_currencyId=").concat(a,"&_raCurrencyId=").concat(t,"&_rateTypeId=").concat(l)});if(!(null==i?void 0:null===(n=i.record)||void 0===n?void 0:n.rate)){eu({message:eI.undefinedCorRate});return}eR.setFieldValue("currencyId",a),eR.setFieldValue("exRate",null==i?void 0:null===(r=i.record)||void 0===r?void 0:r.rate),eR.setFieldValue("rateCalcMethod",null==i?void 0:null===(s=i.record)||void 0===s?void 0:s.rateCalcMethod),eR.setFieldValue("minRate",null==i?void 0:null===(d=i.record)||void 0===d?void 0:d.minRate),eR.setFieldValue("maxRate",null==i?void 0:null===(o=i.record)||void 0===o?void 0:o.maxRate)}async function eV(e){for(let a in e)if(!e[a]){eu({message:"".concat(a," ").concat(eI.empty)});return}let a=await ei({extension:R.u.ExchangeMap.get,parameters:"_plantId=".concat(e.plantId,"&_currencyId=").concat(e.fromCurrency,"&_raCurrencyId=").concat(e.toCurrency,"&_rateTypeId=").concat(e.rateType)});return null==a?void 0:a.record}let e_=[{component:"resourcecombobox",label:eI.currency,name:"currencyRef",flex:2,props:{endpointId:C.r.Currency.qry,displayField:"reference",valueField:"recordId",mapping:[{from:"recordId",to:"currencyId"},{from:"reference",to:"currencyRef"},{from:"name",to:"currencyName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:3},async onChange(e){var a,t,l;let{row:{update:n,oldRow:r,newRow:s}}=e;if(!(null==s?void 0:s.currencyId))return;let d=await eV({plantId:ex||eR.values.plantId,toCurrency:null==eR?void 0:null===(a=eR.values)||void 0===a?void 0:a.currencyId,fromCurrency:null==s?void 0:s.currencyId,rateType:null==eR?void 0:null===(t=eR.values)||void 0===t?void 0:t.rateType});if(!(null==d?void 0:d.rate)){n({exRate:0,defaultRate:0,amount:0,baseAmount:0}),eu({message:"".concat(eI.undefinedRate," ").concat(null==s?void 0:s.currencyRef,".")});return}let o=0,i=0;if(null==s?void 0:s.qty){let e=parseFloat(null==s?void 0:null===(l=s.qty)||void 0===l?void 0:l.toString().replace(/,/g,""))||0,a=1===d.rateCalcMethod?e*d.rate:2===d.rateCalcMethod?e/d.rate:0;o=parseFloat(a).toFixed(2),i=parseFloat(1===eR.values.rateCalcMethod?a*eR.values.exRate:2===eR.values.rateCalcMethod?a/eR.values.exRate:0).toFixed(2)}let c=await eL(null==s?void 0:s.currencyId);n({currencyId:d.currencyId,currencyName:d.currencyName,exRate:d.rate.toFixed(7),defaultRate:d.rate.toFixed(7),rateCalcMethod:d.rateCalcMethod,minRate:d.minRate,maxRate:d.maxRate,goc:(null==c?void 0:c.goc)||!1,amount:o,baseAmount:i})}},{component:"textfield",label:eI.name,name:"currencyName",props:{readOnly:!0},flex:3},{component:"numberfield",label:eI.quantity,name:"qty",flex:2,updateOn:"blur",async onChange(e){var a,t;let{row:{update:l,newRow:n}}=e,r=n.rateCalcMethod,s=1===r?parseFloat(null==n?void 0:null===(a=n.qty)||void 0===a?void 0:a.toString().replace(/,/g,""))*(null==n?void 0:n.exRate):2===r?parseFloat(null==n?void 0:null===(t=n.qty)||void 0===t?void 0:t.toString().replace(/,/g,""))/(null==n?void 0:n.exRate):0,d=1===eR.values.rateCalcMethod?parseFloat(s)*eR.values.exRate:2===r?parseFloat(s)/eR.values.exRate:0;l({amount:parseFloat(s).toFixed(2),baseAmount:parseFloat(d).toFixed(2),qty:parseFloat(null==n?void 0:n.qty).toFixed(2)})}},{component:"numberfield",label:eI.defaultRate,name:"defaultRate",props:{readOnly:!0},flex:2},{component:"numberfield",label:eI.exRate,name:"exRate",props:{decimalScale:7},flex:2,updateOn:"blur",async onChange(e){let{row:{update:a,newRow:t}}=e;if(!t.currencyId||!t.exRate){a({exRate:"",defaultRate:"",amount:0,baseAmount:0});return}let l=e=>parseFloat(null==e?void 0:e.toString().replace(/,/g,""))||0,n=l(t.exRate);if(n>0){let e=l(t.minRate),r=l(t.maxRate);if(n>=e&&n<=r){let e=l(t.qty),r=t.rateCalcMethod,s=1===r?e*n:2===r?e/n:0,d=1===eR.values.rateCalcMethod?s*eR.values.exRate:2===eR.values.rateCalcMethod?s/eR.values.exRate:0;a({exRate:n.toFixed(7),amount:s.toFixed(2),baseAmount:d.toFixed(2)})}else eu({message:"".concat(n," ").concat(eI.invalidRange," [").concat(e,"-").concat(r,"]")}),a({exRate:"",amount:0,baseAmount:0})}}},{component:"numberfield",label:"".concat(eI.total," ").concat(eR.values.currencyRef||""),name:"amount",props:{readOnly:!0},flex:2}];async function eL(e){if(!e)return;let a=await ei({extension:b.d.CorrespondentCurrency.get,parameters:"_corId=".concat(eR.values.corId,"&_currencyId=").concat(e)});return null==a?void 0:a.record}let eM=async e=>{var a;let t=await ei({extension:S.s.CreditOrderItem.qry,parameters:"_orderId=".concat(e)});return(null==t?void 0:null===(a=t.list)||void 0===a?void 0:a.length)>0?t.list.map((e,a)=>({...e,id:a+1,qty:parseFloat(null==e?void 0:e.qty).toFixed(2),amount:parseFloat(null==e?void 0:e.amount).toFixed(2),baseAmount:parseFloat(null==e?void 0:e.baseAmount).toFixed(2),exRate:parseFloat(null==e?void 0:e.exRate).toFixed(7),defaultRate:parseFloat(null==e?void 0:e.defaultRate).toFixed(7)})):eR.initialValues.rows};async function eE(e){if(e==D.J.CurrencyCreditOrderPurchase||e==D.J.CurrencyCreditOrderSale){var a;let t=await ei({extension:R.u.Defaults.get,parameters:e==D.J.CurrencyCreditOrderPurchase?"_key=ct_credit_purchase_ratetype_id":e==D.J.CurrencyCreditOrderSale?"_key=ct_credit_sales_ratetype_id":""});eR.setFieldValue("rateType",null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.value),eR.setFieldValue("functionId",e)}}async function eB(){var e,a;let t=await ei({extension:C.r.Defaults.get,parameters:"_key=baseCurrencyId"});return await eJ(null==t?void 0:null===(e=t.record)||void 0===e?void 0:e.value),null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.value}let eJ=async e=>{ei({extension:C.r.Currency.get,parameters:"_recordId=".concat(e)}).then(e=>{var a;ey(null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.reference)})};async function eH(e){return await await ei({extension:S.s.CreditOrder.get,parameters:"_recordId=".concat(e)})}async function eU(e){let a=await eH(e),t=await eM(e);eR.setValues(e=>{var l;return{...e,...a.record,date:(0,r.a1)(a.record.date),deliveryDate:(null==a?void 0:null===(l=a.record)||void 0===l?void 0:l.deliveryDate)?(0,r.a1)(a.record.deliveryDate):null,rows:t}}),await eE(a.record.functionId)}let eY=async()=>{eh({Component:F.Z,props:{functionId:eR.values.functionId,recordId:eR.values.recordId}})},eG=[{key:"Close",condition:!eq,onClick:eP,disabled:eq||!ej},{key:"Reopen",condition:eq,onClick:eT,disabled:!eq||!ej||3===eR.values.releaseStatus&&3===eR.values.status},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!eq},{key:"Invoice",condition:eZ,onClick:()=>{eh({Component:T.Z,props:{DialogText:eI.transferMessage,fullScreen:!1,okButtonAction:eZ},width:400,height:150,title:""})},disabled:!ew},{key:"WorkFlow",condition:!0,onClick:eY,disabled:!ej},{key:"Shipment",condition:!0,onClick:()=>{eh({Component:E.u,props:{recordId:eR.values.recordId,functionId:eR.values.functionId,editMode:1!=eR.values.status,totalBaseAmount:eF}})},disabled:!ej},{key:"Transportation",condition:!0,onClick:()=>{eh({Component:M.R,props:{recordId:eR.values.recordId,functionId:eR.values.functionId,editMode:1!=eR.values.status}})},disabled:!ej}];return(0,c.useEffect)(()=>{!async function(){er?(await eU(er),await eB()):(await eE(D.J.CurrencyCreditOrderPurchase),await eO(D.J.CurrencyCreditOrderPurchase))}()},[]),(0,l.jsx)(v.Z,{resourceId:f.i.CreditOrder,form:eR,maxAccess:eC,editMode:ej,actions:eG,previewReport:ej,disabledSubmit:eq,children:(0,l.jsxs)(O.R,{children:[(0,l.jsx)(A.g,{children:(0,l.jsxs)(s.ZP,{container:!0,xs:12,spacing:2,children:[(0,l.jsx)(N.Z,{hideonempty:!0,item:!0,xs:4,children:(0,l.jsx)(n.Z,{name:"date",required:!0,readOnly:eq,label:eI.date,value:null==eR?void 0:null===($=eR.values)||void 0===$?void 0:$.date,onChange:eR.setFieldValue,maxAccess:eC,onClear:()=>eR.setFieldValue("date",null),error:eR.touched.date&&!!eR.errors.date})}),(0,l.jsx)(s.ZP,{item:!0,xs:4,children:(0,l.jsx)(g.Z,{endpointId:C.r.Plant.qry,name:"plantId",label:eI.plant,readOnly:!0,values:eR.values,valueField:"recordId",displayField:["reference","name"],required:!0,maxAccess:eC,onChange:(e,a)=>{eR.setFieldValue("plantId",(null==a?void 0:a.recordId)||null)},error:eR.touched.plantId&&!!eR.errors.plantId})}),(0,l.jsx)(s.ZP,{item:!0,xs:4,children:(0,l.jsx)(x.Z,{name:"reference",label:eI.reference,value:null==eR?void 0:null===(z=eR.values)||void 0===z?void 0:z.reference,maxAccess:eC,maxLength:"30",readOnly:ej,onChange:eR.handleChange,onClear:()=>eR.setFieldValue("reference",""),error:eR.touched.reference&&!!eR.errors.reference})}),(0,l.jsx)(s.ZP,{item:!0,xs:8,children:(0,l.jsx)(q.U,{endpointId:b.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",label:eI.correspondent,form:eR,required:!0,firstFieldWidth:4,displayFieldWidth:3,valueShow:"corRef",secondValueShow:"corName",readOnly:eq||(null==eR?void 0:null===(X=eR.values)||void 0===X?void 0:null===(K=X.rows)||void 0===K?void 0:K.some(e=>!!e.currencyId)),maxAccess:eC,onChange:async(e,a)=>{if(a){let e=await eB();ek(null==a?void 0:a.recordId,e,eR.values.plantId)}eR.setFieldValue("corName",a?a.name:""),eR.setFieldValue("corRef",a?a.reference:""),eR.setFieldValue("corId",a?a.recordId:null)},errorCheck:"corId"})}),(0,l.jsx)(s.ZP,{item:!0,xs:4,children:(0,l.jsx)(n.Z,{name:"deliveryDate",readOnly:eq,label:eI.deliveryDate,value:null==eR?void 0:null===(ee=eR.values)||void 0===ee?void 0:ee.deliveryDate,onChange:eR.setFieldValue,maxAccess:eC,disabledRangeDate:{date:eR.values.date,day:30},onClear:()=>eR.setFieldValue("deliveryDate",null),error:eR.touched.deliveryDate&&!!eR.errors.deliveryDate})}),(0,l.jsx)(s.ZP,{item:!0,xs:6,children:(0,l.jsxs)(d.Z,{row:!0,value:eR.values.functionId,defaultValue:D.J.CurrencyCreditOrderPurchase,onChange:async e=>{await eE(e.target.value),await eO(e.target.value),ev(e.target.value),eR.setFieldValue("reference","")},children:[(0,l.jsx)(o.Z,{value:D.J.CurrencyCreditOrderPurchase,control:(0,l.jsx)(i.Z,{}),label:eI.purchase,disabled:null==eR?void 0:null===(et=eR.values)||void 0===et?void 0:null===(ea=et.rows)||void 0===ea?void 0:ea.some(e=>!!e.currencyId)}),(0,l.jsx)(o.Z,{value:D.J.CurrencyCreditOrderSale,control:(0,l.jsx)(i.Z,{}),label:eI.sale,disabled:null==eR?void 0:null===(en=eR.values)||void 0===en?void 0:null===(el=en.rows)||void 0===el?void 0:el.some(e=>!!e.currencyId)})]})})]})}),(0,l.jsx)(V.Q,{children:(0,l.jsx)(k._,{onChange:e=>eR.setFieldValue("rows",e),disabled:!eR.values.corId||eq,value:eR.values.rows,name:"rows",error:eR.errors.rows,columns:e_,allowAddNewLine:!eq,maxAccess:eC,allowDelete:!eq,bg:eR.values.functionId&&(eR.values.functionId!=D.J.CurrencyCreditOrderPurchase?"#C7F6C7":"rgb(245, 194, 193)")})}),(0,l.jsx)(A.g,{children:(0,l.jsxs)(s.ZP,{container:!0,spacing:2,xs:12,children:[(0,l.jsx)(N.Z,{item:!0,xs:8,children:(0,l.jsx)(I.Z,{name:"notes",label:eI.notes,value:eR.values.notes,rows:3,maxAccess:eC,readOnly:eq,onChange:e=>eR.setFieldValue("notes",e.target.value),onClear:()=>eR.setFieldValue("notes",""),error:eR.touched.notes&&!!eR.errors.notes})}),(0,l.jsx)(s.ZP,{item:!0,xs:4,children:(0,l.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(H.Z,{name:"totalCUR",label:"".concat(eI.total," ").concat(eR.values.currencyRef||""),value:eN,readOnly:!0,align:"right"})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(H.Z,{name:"baseAmount",label:"".concat(eI.total," ").concat(ep||""),value:eF,readOnly:!0,align:"right"})})]})})]})})]})})};Y.width=1e3,Y.height=650,a.Z=Y},23476:function(e,a,t){"use strict";t.d(a,{Z:function(){return B}});var l=t(52322),n=t(29326),r=t(9522),s=t(2784),d=t(60218),o=t(48601),i=t(82737),c=t(62202),u=t(65950),m=t(26612),v=t(80983),p=t(62362),y=t(31389),h=t(19473),f=t(71987),x=t(76426),I=t(8661),g=t(38449),C=t(21581),D=t(84100),b=t(27423),S=t(22341),R=t(89330),q=t(98345),w=t(7121),j=t(5088),P=t(39704),T=t(39812),Z=t(61802),N=t(19689);function F(e){var a,t,n,r;let{labels:F,maxAccess:k,setStore:O,store:A,plantId:V}=e,{recordId:_}=A,{getRequest:L,postRequest:M}=(0,s.useContext)(u.$),{platformLabels:E}=(0,s.useContext)(h.l),{stack:B}=(0,Z.zY)(),J=!!A.recordId,H=(0,f.E)({endpointId:x.x.StockCount.qry}),{documentType:U,maxAccess:Y,changeDT:G}=(0,q.H)({functionId:w.J.StockCount,access:k}),{formik:W}=(0,v.c)({documentType:{key:"dtId",value:null==U?void 0:U.dtId},initialValues:{recordId:_||null,reference:null,dtId:null,date:new Date,plantId:parseInt(V),notes:"",type:1,clientId:null,currencyId:null,genVar:1,wip:1,status:1,disableItemDuplicate:!1},maxAccess:Y,validateOnChange:!0,validationSchema:o.Ry({genVar:o.Z_().required(),plantId:o.Rx().required(),clientId:o.Z_().nullable().test("",function(e){let{type:a}=this.parent;return 2!==a&&"2"!==a||!!e}),currencyId:o.Z_().nullable().test("",function(e){let{type:a}=this.parent;return 2!==a&&"2"!==a||!!e})}),onSubmit:async e=>{let a=await M({extension:x.x.StockCount.set,record:JSON.stringify(e)});if(e.recordId)c.ZP.success(E.Edited);else{O(e=>({...e,recordId:a.recordId})),c.ZP.success(E.Added),W.setFieldValue("recordId",a.recordId);let e=await $(a.recordId);W.setValues({...e.record,date:(0,T.a1)(e.record.date)})}H()}}),Q=async()=>{B({Component:P.Z,props:{functionId:w.J.StockCount,recordId:W.values.recordId}})};async function $(e){return await L({extension:x.x.StockCount.get,parameters:"_recordId=".concat(e)})}async function z(e){let a=await $(e);return a.record.date=(0,T.a1)(a.record.date),a}let K=2===W.values.wip,X=3===W.values.status,ee=async e=>{let a=await M({extension:x.x.StockCount.close,record:JSON.stringify({recordId:e})});c.ZP.success(E.Closed),H();let t=await z(a.recordId);W.setValues(t.record),O(e=>({...e,isClosed:2===t.record.wip}))},ea=[{key:"WorkFlow",condition:!0,onClick:Q,disabled:!J},{key:"Close",condition:!K,onClick:()=>ee(W.values.recordId),disabled:X||K||!J},{key:"Reopen",condition:K,onClick:async function(){let e=await M({extension:x.x.StockCount.reopen,record:JSON.stringify(W.values)});c.ZP.success(E.Reopened),H();let a=await z(e.recordId);W.setValues(a.record),O(e=>({...e,isClosed:2===a.record.wip}))},disabled:!K||X},{key:"Unlocked",condition:!X,onClick:async()=>{let e={...W.values};e.date=(0,T.ku)(e.date);let a=await M({extension:x.x.StockCount.post,record:JSON.stringify(e)});c.ZP.success(E.Posted),H();let t=await z(a.recordId);W.setValues(t.record),O(e=>({...e,isPosted:3===t.record.status}))},disabled:!J||!K},{key:"Locked",condition:X,onClick:"onUnpostConfirmation",onSuccess:async()=>{let e={...W.values};e.date=(0,T.ku)(e.date);let a=await M({extension:x.x.StockCount.unpost,record:JSON.stringify(e)});c.ZP.success(E.Unposted),H();let t=await z(a.recordId);W.setValues(t.record),O(e=>({...e,isPosted:3!==t.record.status}))},disabled:!J||!K}];return(0,s.useEffect)(()=>{!async function(){if(_){let e=await $(_);O(a=>({...a,isPosted:3===e.record.status,isClosed:2===e.record.wip})),W.setValues({...e.record,date:(0,T.a1)(e.record.date)})}}()},[]),(0,l.jsx)(i.Z,{resourceId:m.i.StockCounts,form:W,maxAccess:Y,editMode:J,actions:ea,disabledSubmit:X||K,disableSubmitAndClear:X||K,children:(0,l.jsx)(y.R,{children:(0,l.jsx)(p.Q,{children:(0,l.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:g.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(w.J.StockCount),name:"dtId",readOnly:J||X||K,label:F.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:W.values,maxAccess:Y,onChange:(e,a)=>{G(a),W&&W.setFieldValue("dtId",null==a?void 0:a.recordId)},error:W.touched.dtId&&!!W.errors.dtId})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(j.Z,{name:"reference",label:F.reference,value:null==W?void 0:null===(a=W.values)||void 0===a?void 0:a.reference,maxAccess:!J&&Y,maxLength:"30",readOnly:J||X||K,onChange:W.handleChange,error:W.touched.reference&&!!W.errors.reference})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"date",label:F.date,value:null===(t=W.values)||void 0===t?void 0:t.date,onChange:W.setFieldValue,onClear:()=>W.setFieldValue("date",""),readOnly:J||X||K,error:W.touched.date&&!!W.errors.date,maxAccess:Y})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:g.r.Plant.qry,name:"plantId",label:F.plant,required:!0,valueField:"recordId",readOnly:J||X||K,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:W.values,onChange:(e,a)=>{W.setFieldValue("plantId",a?null==a?void 0:a.recordId:null)},error:W.touched.plantId&&!!W.errors.plantId})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"notes",type:"text",label:F.notes,value:null===(n=W.values)||void 0===n?void 0:n.notes,rows:3,readOnly:X||K,maxAccess:Y,onChange:e=>W.setFieldValue("notes",e.target.value),onClear:()=>W.setFieldValue("notes",""),error:W.touched.notes&&!!W.errors.notes})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{datasetId:D.v.SC_TYPE,name:"type",label:F.type,values:W.values,valueField:"key",displayField:"value",readOnly:J||X||K,maxAccess:Y,onChange:(e,a)=>{W&&W.setFieldValue("type",a?a.key:"")},error:W.touched.type&&!!W.errors.type})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.U,{endpointId:S.P.Client.snapshot,parameters:{_category:0},valueField:"reference",displayField:"name",name:"clientId",label:F.client,form:W,readOnly:J||X||K||"1"===W.values.type||1===W.values.type,required:"2"===W.values.type||2===W.values.type,displayFieldWidth:2,valueShow:"clientRef",secondValueShow:"clientName",maxAccess:Y,columnsInDropDown:[{key:"reference",value:"Ref."},{key:"name",value:"Name"}],onChange:async(e,a)=>{W.setFieldValue("clientId",a?a.recordId:""),W.setFieldValue("clientName",a?a.name:""),W.setFieldValue("clientRef",a?a.reference:"")},errorCheck:"clientId"})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:g.r.Currency.qry,name:"currencyId",label:F.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:W.values,readOnly:J||X||K||"1"===W.values.type||1===W.values.type,required:"2"===W.values.type||2===W.values.type,maxAccess:Y,onChange:(e,a)=>{W.setFieldValue("currencyId",(null==a?void 0:a.recordId)||0)},error:W.touched.currencyId&&!!W.errors.currencyId})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{datasetId:D.v.GENERATE_VARIATIONS,name:"genVar",label:F.generateVariations,values:W.values,valueField:"key",displayField:"value",readOnly:J||X||K,maxAccess:Y,onChange:(e,a)=>{W&&W.setFieldValue("genVar",a?a.key:"")},required:!0,error:W.touched.genVar&&!!W.errors.genVar})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(N.Z,{name:"disableItemDuplicate",value:null===(r=W.values)||void 0===r?void 0:r.disableItemDuplicate,onChange:e=>W.setFieldValue("disableItemDuplicate",e.target.checked),label:F.disableItemDuplicate,maxAccess:Y})})]})})})})}var k=t(33625),O=t(76399),A=t(54074),V=e=>{let{store:a,maxAccess:t,labels:n,setRefreshController:r,refreshController:d}=e,{recordId:o,isPosted:i,isClosed:m}=a,{getRequest:f,postRequest:I}=(0,s.useContext)(u.$),{platformLabels:g}=(0,s.useContext)(h.l),{formik:C}=(0,v.c)({maxAccess:t,validateOnChange:!0,initialValues:{search:"",rows:[]},onSubmit:async()=>{let e=C.values.rows.map((e,a)=>({...e,id:a+1,status:e.status||1})).filter(e=>e.isChecked);await I({extension:x.x.Sites.set2,record:JSON.stringify({stockCountId:o,sites:e})}),await D(o),r(!d),c.ZP.success(g.Updated),C.setFieldValue("search","")}}),D=async e=>{if(e){let a=(await f({extension:x.x.Sites.qry,parameters:"_stockCountId=".concat(e)})).list.map((e,a)=>({...e,id:a+1}));C.setValues({rows:a})}},b=C.values.search?C.values.rows.filter(e=>e.siteRef&&e.siteRef.toString().includes(C.values.search.toLowerCase())||e.siteName&&e.siteName.toLowerCase().includes(C.values.search.toLowerCase())):C.values.rows,S=[{component:"checkbox",label:" ",name:"isChecked",flex:1,props:{disabled:i||m}},{component:"textfield",name:"siteRef",label:n.siteRef,flex:1,props:{readOnly:!0}},{component:"textfield",name:"siteName",label:n.name,flex:1,props:{readOnly:!0}},{component:"textfield",name:"statusName",label:n.statusName,flex:1,props:{readOnly:!0}},{component:"textfield",name:"notes",label:n.notes,flex:2,props:{readOnly:!1},propsReducer(e){let{row:a,props:t}=e;return{...t,readOnly:"Processed"===a.statusName||i||m}}}];return(0,s.useEffect)(()=>{!async function(){o&&await D(o)}()},[o]),(0,l.jsx)(A.Z,{onSave:C.handleSubmit,maxAccess:t,disabledSubmit:m,children:(0,l.jsx)(y.R,{children:(0,l.jsxs)(p.Q,{children:[(0,l.jsx)(k.g,{children:(0,l.jsx)(j.Z,{name:"search",value:C.values.search,label:n.search,readOnly:i||m,onClear:()=>{C.setFieldValue("search",""),D()},sx:{width:"30%"},onChange:e=>{let{value:a}=e.target;C.setFieldValue("search",a)}})}),(0,l.jsx)(p.Q,{children:(0,l.jsx)(O._,{onChange:e=>(function(e){let a=C.values.rows.map(a=>e.find(e=>e.id===a.id)||a);C.setFieldValue("rows",a)})(e),value:b,error:C.errors.rows,columns:S,allowAddNewLine:!1,allowDelete:!1})})]})})})},_=e=>{let{store:a,maxAccess:t,labels:n}=e,{recordId:r,isPosted:d,isClosed:i}=a,{getRequest:m,postRequest:f}=(0,s.useContext)(u.$),{platformLabels:g}=(0,s.useContext)(h.l),{formik:C}=(0,v.c)({maxAccess:t,validateOnChange:!0,initialValues:{stockCountId:"",siteId:null,rows:[]},validationSchema:o.Ry({siteId:o.Rx().required()}),onSubmit:async()=>{let e=C.values.rows.map((e,a)=>({...e,id:a+1,status:e.status||1,controllerId:e.recordId,siteId:C.values.siteId,stockCountId:r})).filter(e=>e.isChecked),a={stockCountId:r,siteId:C.values.siteId,items:e};if(await f({extension:x.x.StockCountControllerTab.set2,record:JSON.stringify(a)}),c.ZP.success(g.Updated),C.values.siteId){let e=await D(r,C.values.siteId);C.setValues({rows:e.list})}}}),D=async(e,a)=>{var t;let l=await m({extension:x.x.Controller.qry,parameters:"_siteId=".concat(a)}),n=await m({extension:x.x.StockCountControllerTab.qry,parameters:"_siteId=".concat(a,"&_stockCountId=").concat(e)});l.list.map((e,a)=>{let t=n.list.find(a=>a.controllerId===e.recordId);return t&&(e.isChecked=!0,e.statusName=t.statusName,e.status=t.status),{...e,id:a+1}}),l.list=null==l?void 0:null===(t=l.list)||void 0===t?void 0:t.map((e,a)=>({...e,id:a,isChecked:(null==e?void 0:e.isChecked)!==void 0&&(null==e?void 0:e.isChecked)})),C.setFieldValue("stockCountId",e),C.setValues({rows:l.list}),C.setFieldValue("siteId",a)},b=[{component:"checkbox",label:" ",name:"isChecked",flex:.2,props:{disabled:d||i}},{component:"textfield",name:"name",label:n.name,flex:1,props:{readOnly:!0}},{component:"textfield",name:"statusName",label:n.statusName,flex:1,props:{readOnly:!0}}];return(0,l.jsx)(A.Z,{onSave:C.handleSubmit,maxAccess:t,disabledSubmit:d||i,children:(0,l.jsx)(y.R,{children:(0,l.jsxs)(p.Q,{children:[(0,l.jsx)(k.g,{children:(0,l.jsx)(I.Z,{name:"siteId",endpointId:x.x.Sites.qry,parameters:r?"_stockCountId=".concat(r):"",label:n.sites,filter:e=>e.isChecked,valueField:"siteId",required:!0,displayField:"siteName",values:C.values,onChange:async(e,a)=>{(null==a?void 0:a.siteId)&&(C.setFieldValue("siteId",a?null==a?void 0:a.siteId:null),await D(r,null==a?void 0:a.siteId))},error:C.touched.siteId&&!!C.errors.siteId,maxAccess:t})}),(0,l.jsx)(O._,{onChange:e=>(function(e){let a=C.values.rows.map(a=>e.find(e=>e.id===a.id)||a);C.setFieldValue("rows",a)})(e),value:C.values.rows,error:C.errors.rows,columns:b,allowAddNewLine:!1,allowDelete:!1})]})})})},L=t(50023),M=t(21326);let E=e=>{let{recordId:a,plantId:t,window:d}=e,[o,i]=(0,s.useState)(0),[c,u]=(0,s.useState)({recordId:a||null,isPosted:!1,isClosed:!1}),{labels:v,access:p}=(0,L.Z)({datasetId:m.i.StockCounts,editMode:!!a});(0,M.Z)({title:v.cycleCounts,window:d});let[y,h]=(0,s.useState)(!1),f=!!c.recordId,x=[{label:v.cycleCounts},{label:v.sites,disabled:!f},{label:v.controller,disabled:!f}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Y,{tabs:x,activeTab:o,setActiveTab:i,maxAccess:p}),(0,l.jsx)(n.Z,{index:0,value:o,maxAccess:p,children:(0,l.jsx)(F,{labels:v,setStore:u,store:c,maxAccess:p,plantId:t})}),(0,l.jsx)(n.Z,{index:1,value:o,maxAccess:p,children:(0,l.jsx)(V,{labels:v,maxAccess:p,store:c,setRefreshController:h,refreshController:y})}),(0,l.jsx)(n.Z,{index:2,value:o,maxAccess:p,children:(0,l.jsx)(_,{labels:v,maxAccess:p,store:c},y)})]})};E.width=650,E.height=750;var B=E},1838:function(e,a,t){"use strict";t.d(a,{Z:function(){return P}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(65950),c=t(71987),u=t(26612),m=t(8661),v=t(5088),p=t(80983),y=t(31389),h=t(62362),f=t(19473),x=t(39812),I=t(89330),g=t(91406),C=t(21581),D=t(27423),b=t(92407),S=t(98345),R=t(7121),q=t(83562),w=t(21326),j=t(50023);function P(e){var a;let{recordId:t,window:P}=e,{getRequest:T,postRequest:Z}=(0,r.useContext)(i.$),{platformLabels:N}=(0,r.useContext)(f.l),{labels:F,access:k}=(0,j.Z)({datasetId:u.i.EmployeePenalties,editMode:!!t});(0,w.Z)({title:F.empPenalty,window:P});let{maxAccess:O}=(0,S.H)({functionId:R.J.Penalty,access:k,enabled:!t}),{formik:A}=(0,p.c)({initialValues:{recordId:t||null,reference:"",penaltyId:null,employeeId:null,employeeRef:"",employeeName:"",date:new Date,amount:null,notes:"",status:1,wip:1},maxAccess:O,validateOnChange:!0,validationSchema:s.Ry({date:s.hT().required().test(function(e){return e<=new Date}),penaltyId:s.Rx().required(),amount:s.Rx().required(),employeeId:s.Rx().required()}),onSubmit:async e=>{let{employeeName:a,employeeRef:t,date:l,...n}=e,r=await Z({extension:b.y.EmployeePenalty.set,record:JSON.stringify({...n,date:(0,x.ku)(l)})});o.ZP.success(n.recordId?N.Edited:N.Added),M(r.recordId),V()}}),V=(0,c.E)({endpointId:b.y.EmployeePenalty.page}),_=!!A.values.recordId,L=2===A.values.wip;async function M(e){if(e){let{record:a}=await T({extension:b.y.EmployeePenalty.get,parameters:"_recordId=".concat(e)});A.setValues({...a,date:(0,x.a1)(a.date)})}}(0,r.useEffect)(()=>{M(t)},[]);let{employeeName:E,employeeRef:B,date:J,...H}=A.values,U=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!_},{key:"Close",condition:!L,onClick:async()=>{await Z({extension:b.y.EmployeePenalty.close,record:JSON.stringify({...H,date:(0,x.ku)(J)})}),o.ZP.success(N.Closed),M(A.values.recordId),V()},disabled:L||!_},{key:"Reopen",condition:L,onClick:async()=>{await Z({extension:b.y.EmployeePenalty.reopen,record:JSON.stringify({...H,date:(0,x.ku)(J)})}),o.ZP.success(N.Reopened),M(A.values.recordId),V()},disabled:!L},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!L}];return(0,l.jsx)(d.Z,{resourceId:u.i.EmployeePenalties,functionId:R.J.Penalty,form:A,actions:U,maxAccess:O,editMode:_,children:(0,l.jsx)(y.R,{children:(0,l.jsx)(h.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(v.Z,{name:"reference",label:F.ref,value:A.values.reference,maxAccess:O,readOnly:_,maxLength:"10",onChange:A.handleChange,onClear:()=>A.setFieldValue("reference",""),error:A.touched.reference&&!!A.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{name:"date",required:!0,label:F.date,value:null===(a=A.values)||void 0===a?void 0:a.date,onChange:A.setFieldValue,onClear:()=>A.setFieldValue("date",null),error:A.touched.date&&!!A.errors.date,maxAccess:O,readOnly:L,max:new Date})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{endpointId:q.m.PenaltyType.qry,name:"penaltyId",label:F.penalty,required:!0,valueField:"recordId",readOnly:L,displayField:"name",values:A.values,maxAccess:O,onChange:(e,a)=>{A.setFieldValue("penaltyId",(null==a?void 0:a.recordId)||null)},error:A.touched.penaltyId&&!!A.errors.penaltyId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.U,{endpointId:b.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:L,label:F.employee,secondFieldLabel:F.empName,form:A,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:O,onChange:async(e,a)=>{A.setFieldValue("employeeRef",(null==a?void 0:a.reference)||""),A.setFieldValue("employeeName",(null==a?void 0:a.fullName)||""),A.setFieldValue("employeeId",(null==a?void 0:a.recordId)||null)},errorCheck:"employeeId"})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"amount",label:F.amount,value:A.values.amount,maxAccess:O,readOnly:L,required:!0,onChange:A.handleChange,onClear:()=>A.setFieldValue("amount",null),error:A.touched.amount&&!!A.errors.amount})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"notes",label:F.notes,value:A.values.notes,rows:3,readOnly:L,maxAccess:O,onChange:e=>A.setFieldValue("notes",e.target.value),onClear:()=>A.setFieldValue("notes",""),error:A.touched.notes&&!!A.errors.notes})})]})})})})}P.width=600,P.height=470},51682:function(e,a,t){"use strict";t.d(a,{Z:function(){return P}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(65950),c=t(71987),u=t(26612),m=t(5088),v=t(80983),p=t(19473),y=t(31389),h=t(62362),f=t(50496),x=t(27423),I=t(92407),g=t(89330),C=t(91406),D=t(21581),b=t(39812),S=t(7121),R=t(98345),q=t(8661),w=t(50023),j=t(21326);function P(e){var a,t,P;let{recordId:T,window:Z}=e,{getRequest:N,postRequest:F}=(0,r.useContext)(i.$),{platformLabels:k}=(0,r.useContext)(p.l),{labels:O,access:A}=(0,w.Z)({datasetId:u.i.LeaveRequest,editMode:!!T});(0,j.Z)({title:O.title,window:Z});let V=(0,c.E)({endpointId:f.U.LeaveRequest.page}),{maxAccess:_}=(0,R.H)({functionId:S.J.LeaveRequest,access:A,enabled:!T}),{formik:L}=(0,v.c)({initialValues:{recordId:null,name:"",startDate:null,endDate:null,date:new Date,employeeId:null,justification:"",destination:"",ltId:null,status:1,reference:"",hours:null,multiDayLeave:1,wip:1},maxAccess:_,validateOnChange:!0,validationSchema:s.Ry({hours:s.Rx().required(),startDate:s.hT().required(),date:s.hT().required(),destination:s.Z_().required(),employeeId:s.Rx().required(),ltId:s.Rx().required(),justification:s.Z_().required()}),onSubmit:async e=>{let a=await F({extension:f.U.LeaveRequest.set,record:JSON.stringify({...e,date:(0,b.ku)(e.date),startDate:(0,b.ku)(e.startDate),endDate:(0,b.ku)(e.endDate)})});o.ZP.success(e.recordId?k.Edited:k.Added),B(a.recordId),V()}}),M=!!L.values.recordId,E=(null==L?void 0:null===(a=L.values)||void 0===a?void 0:a.wip)===2;async function B(e){if(e){let{record:a}=await N({extension:f.U.LeaveRequest.get,parameters:"_recordId=".concat(e)});L.setValues({...a,date:(0,b.a1)(a.date),startDate:(0,b.a1)(a.startDate),endDate:(0,b.a1)(a.endDate)})}}(0,r.useEffect)(()=>{B(T)},[]);let J=[{key:"Close",condition:!E,onClick:async()=>{await F({extension:f.U.LeaveRequest.close,record:JSON.stringify({...L.values,date:(0,b.ku)(L.values.date),startDate:(0,b.ku)(L.values.startDate),endDate:(0,b.ku)(L.values.endDate)})}),o.ZP.success(k.Closed),B(L.values.recordId),V()},disabled:E||!M},{key:"Reopen",condition:E,onClick:async()=>{await F({extension:f.U.LeaveRequest.reopen,record:JSON.stringify({...L.values,date:(0,b.ku)(L.values.date),startDate:(0,b.ku)(L.values.startDate),endDate:(0,b.ku)(L.values.endDate)})}),o.ZP.success(k.Reopened),B(L.values.recordId),V()},disabled:!E||!M||3===L.values.releaseStatus},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!E}];return(0,l.jsx)(d.Z,{resourceId:u.i.LeaveRequest,functionId:S.J.LeaveRequest,previewReport:M,form:L,maxAccess:_,editMode:M,actions:J,children:(0,l.jsx)(y.R,{children:(0,l.jsx)(h.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{name:"reference",label:O.ref,value:L.values.reference,maxAccess:_,maxLength:"30",readOnly:E,onChange:L.handleChange,onClear:()=>L.setFieldValue("reference",""),error:L.touched.reference&&!!L.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.U,{endpointId:I.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,label:O.employee,secondFieldLabel:O.employeeName,form:L,readOnly:E,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:_,onChange:async(e,a)=>{L.setFieldValue("employeeRef",(null==a?void 0:a.reference)||""),L.setFieldValue("employeeName",(null==a?void 0:a.fullName)||""),L.setFieldValue("employeeId",(null==a?void 0:a.recordId)||null)},errorCheck:"employeeId"})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"date",label:O.date,value:null===(t=L.values)||void 0===t?void 0:t.date,required:!0,readOnly:E,onChange:(e,a)=>{L.setFieldValue("date",a||null)},onClear:()=>L.setFieldValue("date",null),error:L.touched.date&&!!L.errors.date,maxAccess:_})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"startDate",label:O.startDate,value:null===(P=L.values)||void 0===P?void 0:P.startDate,required:!0,readOnly:E,onChange:(e,a)=>{L.setFieldValue("startDate",a||null),L.setFieldValue("endDate",a||null)},onClear:()=>{L.setFieldValue("startDate",null),L.setFieldValue("endDate",null)},error:L.touched.startDate&&!!L.errors.startDate,maxAccess:_})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"hours",label:O.hours,value:L.values.hours,maxAccess:_,readOnly:E,required:!0,onChange:e=>L.setFieldValue("hours",e.target.value),onClear:()=>L.setFieldValue("hours",null),error:L.touched.hours&&!!L.errors.hours,decimalScale:2})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"justification",label:O.justification,value:L.values.justification,rows:3,required:!0,readOnly:E,maxAccess:_,onChange:L.handleChange,onClear:()=>L.setFieldValue("justification",""),error:L.touched.justification&&!!L.errors.justification})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{name:"destination",label:O.destination,value:L.values.destination,onChange:L.handleChange,required:!0,readOnly:E,maxLength:100,maxAccess:_,onClear:()=>L.setFieldValue("destination",""),error:L.touched.destination&&!!L.errors.destination})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(q.Z,{endpointId:f.U.IndemnityAccuralsFilters.qry,name:"ltId",label:O.leaveType,valueField:"recordId",values:L.values,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:M,maxAccess:_,onChange:(e,a)=>{L.setFieldValue("ltId",null==a?void 0:a.recordId)},error:L.touched.ltId&&!!L.errors.ltId})})]})})})})}P.width=800,P.height=500},23427:function(e,a,t){"use strict";t.d(a,{Z:function(){return P}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(65950),c=t(71987),u=t(26612),m=t(5088),v=t(80983),p=t(19473),y=t(31389),h=t(62362),f=t(50496),x=t(27423),I=t(92407),g=t(89330),C=t(21581),D=t(39812),b=t(7121),S=t(98345),R=t(8661),q=t(84100),w=t(50023),j=t(21326);function P(e){var a,t,P,T;let{recordId:Z,window:N}=e,{getRequest:F,postRequest:k}=(0,r.useContext)(i.$),{platformLabels:O}=(0,r.useContext)(p.l),A=(0,c.E)({endpointId:f.U.LeaveReturn.page}),{labels:V,access:_}=(0,w.Z)({datasetId:u.i.LeaveReturn,editMode:!!Z});(0,j.Z)({title:V.title,window:N});let{maxAccess:L}=(0,S.H)({functionId:b.J.ReturnFromLeave,access:_,enabled:!Z}),{formik:M}=(0,v.c)({initialValues:{recordId:null,date:null,employeeId:null,employeeRef:"",employeeName:"",justification:"",leaveId:null,status:1,reference:"",returnType:null,wip:1,minDate:null,maxDate:null},maxAccess:L,validateOnChange:!0,validationSchema:s.Ry({date:s.hT().typeError().required().test(function(e){let{minDate:a,maxDate:t}=this.parent;return!e||!(a&&e<=new Date(a)||t&&e>=new Date(t))}),leaveId:s.Rx().required(),returnType:s.Rx().required(),justification:s.Z_().required()}),onSubmit:async e=>{let{minDate:a,maxDate:t,employeeName:l,date:n,...r}=e,s=await k({extension:f.U.LeaveReturn.set,record:JSON.stringify({...r,date:(0,D.ku)(n)})});o.ZP.success(e.recordId?O.Edited:O.Added),J(s.recordId),A()}}),E=!!M.values.recordId,B=(null==M?void 0:null===(a=M.values)||void 0===a?void 0:a.wip)===2;async function J(e){if(e){let{record:a}=await F({extension:f.U.LeaveReturn.get,parameters:"_recordId=".concat(e)}),t=await $(a.returnType,a.leaveId);M.setValues({...a,date:(0,D.a1)(a.date),minDate:t.minDate,maxDate:t.maxDate})}}(0,r.useEffect)(()=>{J(Z)},[]);let{minDate:H,maxDate:U,employeeName:Y,date:G,...W}=M.values,Q=[{key:"Close",condition:!B,onClick:async()=>{await k({extension:f.U.LeaveReturn.close,record:JSON.stringify({...W,date:(0,D.ku)(G)})}),o.ZP.success(O.Closed),J(W.recordId),A()},disabled:B||!E},{key:"Reopen",condition:B,onClick:async()=>{await k({extension:f.U.LeaveReturn.reopen,record:JSON.stringify({...W,date:(0,D.ku)(G)})}),o.ZP.success(O.Reopened),J(W.recordId),A()},disabled:!B},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!B}];async function $(e,a){let t={date:null,minDate:null,maxDate:null};if(!a||!e)return;let{record:l}=await F({extension:f.U.LeaveRequest.get,parameters:"_recordId=".concat(a)});switch(e){case"1":t.date=(0,D.a1)(l.startDate);break;case"2":t.minDate=(0,D.a1)(l.startDate),t.endDate=(0,D.a1)(l.endDate),t.date=new Date;break;case"3":let n=new Date((0,D.a1)(l.endDate));n.setDate(n.getDate()+1),t.date=n;break;case"4":t.date=new Date,t.minDate=l.startDate}return t}return(0,l.jsx)(d.Z,{resourceId:u.i.LeaveReturn,functionId:b.J.ReturnFromLeave,previewReport:E,form:M,maxAccess:L,editMode:E,actions:Q,disabledSubmit:B,children:(0,l.jsx)(y.R,{children:(0,l.jsx)(h.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{name:"reference",label:V.reference,value:M.values.reference,maxAccess:L,maxLength:"30",readOnly:B,onChange:M.handleChange,onClear:()=>M.setFieldValue("reference",""),error:M.touched.reference&&!!M.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.U,{endpointId:I.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",label:V.employee,secondFieldLabel:V.employeeName,form:M,readOnly:B,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:L,onChange:async(e,a)=>{M.setFieldValue("employeeRef",(null==a?void 0:a.reference)||""),M.setFieldValue("employeeName",(null==a?void 0:a.fullName)||""),M.setFieldValue("employeeId",(null==a?void 0:a.recordId)||null)},errorCheck:"employeeId"})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{endpointId:M.values.employeeId&&f.U.LeaveRequest.qry,parameters:"_filter=&_multiDayLeave=2&_params=1|".concat(M.values.employeeId,"&_sortBy=recordId&_startAt=0&_size=100"),filter:e=>4==e.status,displayField:["reference",{name:"startDate",type:"date"},{name:"endDate",type:"date"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"startDate",value:"Start Date",type:"date"},{key:"endDate",value:"End date",type:"date"}],name:"leaveId",label:V.leave,valueField:"recordId",required:!0,values:M.values,onChange:(e,a)=>{M.setFieldValue("leaveId",(null==a?void 0:a.recordId)||null)},readOnly:B,maxAccess:L,error:(null==M?void 0:null===(t=M.touched)||void 0===t?void 0:t.leaveId)&&!!(null==M?void 0:null===(P=M.errors)||void 0===P?void 0:P.leaveId)})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{datasetId:q.v.LEAVE_RETURN_TYPE,name:"returnType",label:V.returnType,valueField:"key",displayField:"value",values:M.values,required:!0,readOnly:B,maxAccess:L,onChange:async(e,a)=>{let t=await $(null==a?void 0:a.key,M.values.leaveId);M.setValues({...M.values,maxDate:(null==t?void 0:t.maxDate)||null,minDate:(null==t?void 0:t.minDate)||null,date:(null==t?void 0:t.date)||null,returnType:(null==a?void 0:a.key)||null})},error:M.touched.returnType&&!!M.errors.returnType})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"date",label:V.date,value:null===(T=M.values)||void 0===T?void 0:T.date,required:!0,readOnly:B||"1"==M.values.returnType||"3"==M.values.returnType,onChange:(e,a)=>{M.setFieldValue("date",a||null)},min:M.values.minDate,max:M.values.maxDate,onClear:()=>M.setFieldValue("date",null),error:M.touched.date&&!!M.errors.date,maxAccess:L})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"justification",label:V.justification,value:M.values.justification,rows:3,required:!0,readOnly:B,maxAccess:L,onChange:M.handleChange,onClear:()=>M.setFieldValue("justification",""),error:M.touched.justification&&!!M.errors.justification})})]})})})})}P.width=800,P.height=500},89764:function(e,a,t){"use strict";t.d(a,{Z:function(){return B}});var l=t(52322),n=t(29326),r=t(9522),s=t(2784),d=t(60218),o=t(48601),i=t(82737),c=t(62202),u=t(65950),m=t(71987),v=t(26612),p=t(5088),y=t(80983),h=t(19473),f=t(31389),x=t(33625),I=t(8661),g=t(84100),C=t(73581),D=t(91406),b=t(27423),S=t(92407),R=t(70104),q=t(38449),w=t(89330),j=t(21581),P=t(39812),T=t(7121);function Z(e){var a,t,n,r,Z,N,F,k,O,A;let{labels:V,maxAccess:_,store:L,setStore:M,window:E}=e,{getRequest:B,postRequest:J}=(0,s.useContext)(u.$),{platformLabels:H,defaultsData:U}=(0,s.useContext)(h.l),{recordId:Y}=L,G=(0,m.E)({endpointId:C.h.Loans.page}),W=null==U?void 0:null===(t=U.list)||void 0===t?void 0:null===(a=t.find(e=>{let{key:a}=e;return"currencyId"===a}))||void 0===a?void 0:a.value,Q=null==U?void 0:null===(r=U.list)||void 0===r?void 0:null===(n=r.find(e=>{let{key:a}=e;return"ldMethod"===a}))||void 0===n?void 0:n.value,$=null==U?void 0:null===(N=U.list)||void 0===N?void 0:null===(Z=N.find(e=>{let{key:a}=e;return"ldValue"===a}))||void 0===Z?void 0:Z.value,{formik:z}=(0,y.c)({initialValues:{recordId:null,status:1,releaseStatus:null,wip:1,reference:"",date:new Date,employeeId:null,branchId:null,departmentName:"",positionName:"",ltId:null,ltName:"",loanBalance:null,currencyId:parseInt(W),amount:null,purpose:"",effectiveDate:new Date,ldMethod:parseInt(Q),ldmName:"",ldValue:parseInt($),disableEditing:!1},maxAccess:_,validationSchema:o.Ry({reference:o.Z_().required(),employeeId:o.Rx().required(),date:o.hT().required(),ltId:o.Rx().required(),currencyId:o.Rx().required(),amount:o.Rx().min(1).required(),purpose:o.Z_().required(),ldValue:o.Rx().min(1).required(),effectiveDate:o.hT().required(),ldMethod:o.Rx().required()}),onSubmit:async e=>{let a={...e,date:(0,P.ku)(e.date),effectiveDate:(0,P.ku)(e.effectiveDate)};await J({extension:C.h.Loans.set,record:JSON.stringify(a)}),c.ZP.success(e.recordId?H.Edited:H.Added),G(),E.close()}}),K=!!(null==z?void 0:null===(F=z.values)||void 0===F?void 0:F.recordId),X=2==z.values.wip;(0,s.useEffect)(()=>{Y&&ee(Y)},[]);let ee=async e=>{let a=await B({extension:C.h.Loans.get,parameters:"_recordId=".concat(e)});if(null==a?void 0:a.record){let{record:e}=a;z.setValues({...e,date:(0,P.a1)(e.date),effectiveDate:(0,P.a1)(e.effectiveDate)}),M(t=>{var l;return{...t,isClosed:2===e.wip,loanAmount:null!==(l=e.amount)&&void 0!==l?l:0,effectiveDate:(0,P.a1)(a.record.effectiveDate)}}),await ea(e.employeeId)}return a},ea=async e=>{if(!e){et();return}let{record:a}=await B({extension:S.y.QuickView.get,parameters:"_recordId=".concat(e,"&_asOfDate=").concat((0,P.uQ)(new Date))});z.setValues(t=>{var l;return{...t,employeeId:e,employeeRef:(null==a?void 0:a.reference)||"",employeeName:(null==a?void 0:a.fullName)||"",positionName:(null==a?void 0:a.positionName)||"",departmentName:(null==a?void 0:a.departmentName)||"",loanBalance:null!==(l=null==a?void 0:a.loanBalance)&&void 0!==l?l:0,branchId:(null==a?void 0:a.branchId)||null}})},et=()=>{z.setValues(e=>({...e,employeeId:null,employeeRef:"",employeeName:"",positionName:"",departmentName:"",loanBalance:0,branchId:null}))},el=async e=>{let a=await ee(e);(null==a?void 0:a.record)&&(z.setValues(e=>({...e,...a.record,date:(0,P.a1)(a.record.date),effectiveDate:(0,P.a1)(a.record.effectiveDate)})),M(e=>({...e,isClosed:2===a.record.wip,effectiveDate:(0,P.a1)(a.record.effectiveDate)})))},en=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!K},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!X||!K},{key:"Close",condition:!X,onClick:async()=>{let e=await J({extension:C.h.Loans.close,record:JSON.stringify(z.values)});c.ZP.success(H.Closed),G(),el(e.recordId)},disabled:X||!K},{key:"Reopen",condition:X,onClick:async()=>{let e=await J({extension:C.h.Loans.reopen,record:JSON.stringify(z.values)});c.ZP.success(H.Reopened),G(),el(e.recordId)},disabled:!X||!K}];return(0,l.jsx)(i.Z,{resourceId:v.i.Loans,form:z,maxAccess:_,editMode:K,actions:en,disabledSubmit:X,functionId:T.J.LoanRequest,children:(0,l.jsx)(f.R,{children:(0,l.jsx)(x.g,{children:(0,l.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"reference",label:V.reference,value:z.values.reference,required:!0,readOnly:K,maxAccess:_,maxLength:"20",onChange:z.handleChange,onClear:()=>z.setFieldValue("reference",""),error:z.touched.reference&&!!z.errors.reference})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(w.Z,{name:"date",required:!0,max:z.values.effectiveDate,readOnly:X,label:V.date,value:null==z?void 0:null===(k=z.values)||void 0===k?void 0:k.date,onChange:z.setFieldValue,maxAccess:_,onClear:()=>z.setFieldValue("date",null),error:z.touched.date&&!!z.errors.date})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.U,{endpointId:S.y.Employee.snapshot,parameters:{_branchId:0},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:X,displayFieldWidth:2,label:V.employeeName,form:z,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:_,onChange:(e,a)=>{ea((null==a?void 0:a.recordId)||null)},errorCheck:"employeeId"})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:R.K.BranchFilters.qry,name:"branchId",label:V.branch,readOnly:!0,valueField:"recordId",displayField:["reference","name"],values:z.values,maxAccess:_,onChange:(e,a)=>z.setFieldValue("branchId",(null==a?void 0:a.recordId)||null),error:z.touched.branchId&&!!z.errors.branchId})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"departmentName",label:V.department,value:z.values.departmentName,readOnly:!0,maxAccess:_,error:z.touched.departmentName&&!!z.errors.departmentName})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"positionName",label:V.position,value:z.values.positionName,readOnly:!0,maxAccess:_,error:z.touched.positionName&&!!z.errors.positionName})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:C.h.LoanType.qry,name:"ltId",label:V.ltype,required:!0,readOnly:X,valueField:"recordId",displayField:"name",values:z.values,onChange:(e,a)=>{z.setFieldValue("disableEditing",(null==a?void 0:a.disableEditing)||!1),z.setFieldValue("ldMethod",(null==a?void 0:a.ldMethod)||null),z.setFieldValue("ldValue",(null==a?void 0:a.ldValue)||0),z.setFieldValue("ltId",(null==a?void 0:a.recordId)||null)},error:z.touched.ltId&&!!z.errors.ltId})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"loanBalance",label:V.loanBalance,value:null==z?void 0:null===(O=z.values)||void 0===O?void 0:O.loanBalance,maxAccess:_,readOnly:!0})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:q.r.Currency.qry,filter:e=>1===e.currencyType,name:"currencyId",label:V.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:z.values,required:!0,readOnly:X,maxAccess:_,onChange:async(e,a)=>{z.setFieldValue("currencyName",(null==a?void 0:a.name)||""),z.setFieldValue("currencyRef",(null==a?void 0:a.reference)||""),z.setFieldValue("currencyId",(null==a?void 0:a.recordId)||null)},error:z.touched.currencyId&&!!z.errors.currencyId})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"amount",label:V.amount,value:z.values.amount,required:!0,readOnly:X,maxAccess:_,onChange:e=>z.setFieldValue("amount",e.target.value),onClear:async()=>{z.setFieldValue("amount",null)},error:z.touched.amount&&!!z.errors.amount,maxLength:10})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(j.Z,{name:"purpose",label:V.purpose,required:!0,rows:2,readOnly:X,value:z.values.purpose,maxAccess:_,onChange:e=>z.setFieldValue("purpose",e.target.value),onClear:()=>z.setFieldValue("purpose",""),error:z.touched.purpose&&!!z.errors.purpose})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(w.Z,{name:"effectiveDate",label:V.effectiveDate,value:null==z?void 0:null===(A=z.values)||void 0===A?void 0:A.effectiveDate,required:!0,min:z.values.date,readOnly:X,onChange:z.setFieldValue,maxAccess:_,onClear:()=>z.setFieldValue("effectiveDate",null),error:z.touched.effectiveDate&&!!z.errors.effectiveDate})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{datasetId:g.v.LOAN_DEDUCTION_METHOD,name:"ldMethod",label:V.ldMethod,required:!0,readOnly:X||z.values.disableEditing,valueField:"key",displayField:"value",values:z.values,maxAccess:_,onChange:(e,a)=>z.setFieldValue("ldMethod",(null==a?void 0:a.key)||null),onClear:async()=>{z.setFieldValue("ldMethod",null),z.setFieldValue("ldValue",null)},error:z.touched.ldMethod&&!!z.errors.ldMethod})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"ldValue",label:V.ldValue,value:z.values.ldValue,required:!0,readOnly:X||z.values.disableEditing,maxAccess:_,onChange:e=>z.setFieldValue("ldValue",e.target.value),onClear:()=>z.setFieldValue("ldValue",null),error:z.touched.ldValue&&!!z.errors.ldValue,maxLength:10})})]})})})})}var N=t(69387),F=t(62362),k=t(27723),O=t(61802),A=t(19689);function V(e){var a,t;let{labels:n,recordId:r,store:p,maxAccess:x,loanAmount:b,window:S}=e,{getRequest:R,postRequest:q}=(0,s.useContext)(u.$),{platformLabels:T}=(0,s.useContext)(h.l),Z=(0,m.E)({endpointId:C.h.LoanDeduction.page}),{formik:N}=(0,y.c)({maxAccess:x,initialValues:{loanId:p.recordId,recordId:null,payrollDeduction:!1,amount:null,date:new Date,type:null,notes:""},validationSchema:o.Ry({amount:o.Rx().required().max(b),date:o.hT().required(),type:o.Z_().required()}),onSubmit:e=>{let a={...e,date:(0,P.ku)(e.date),payrollDeduction:1===e.type};q({extension:C.h.LoanDeduction.set,record:JSON.stringify(a)}).then(a=>{c.ZP.success(e.recordId?T.Edited:T.Added),N.setFieldValue("recordId",a.recordId),Z(),S.close()})}}),k=!!N.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(r){var e;let a=await R({extension:C.h.LoanDeduction.get,parameters:"_recordId=".concat(r)});N.setValues({...null==a?void 0:a.record,date:(0,P.a1)(null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.date)})}}()},[]),(0,l.jsx)(i.Z,{resourceId:v.i.Loans,form:N,maxAccess:x,disabledSubmit:!p.isClosed||N.values.payrollDeduction,editMode:k,isInfo:!1,isCleared:!1,children:(0,l.jsx)(f.R,{children:(0,l.jsx)(F.Q,{children:(0,l.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(A.Z,{name:"payrollDeduction",value:null===(a=N.values)||void 0===a?void 0:a.payrollDeduction,readOnly:!0,label:n.payrollDeduction,maxAccess:x})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"amount",label:n.deductionAmount,value:N.values.amount,required:!0,readOnly:!p.isClosed||N.values.payrollDeduction,maxAccess:x,onChange:async e=>{var a;N.setFieldValue("amount",(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.value)||null)},onClear:async()=>{N.setFieldValue("amount",null)},error:N.touched.amount&&!!N.errors.amount,maxLength:10})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(w.Z,{name:"date",label:n.date,required:!0,min:p.effectiveDate,readOnly:!p.isClosed||N.values.payrollDeduction,value:null==N?void 0:null===(t=N.values)||void 0===t?void 0:t.date,onChange:N.setFieldValue,maxAccess:x,onClear:()=>N.setFieldValue("date",null),error:N.touched.date&&!!N.errors.date})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{datasetId:g.v.LOAN_TYPE,name:"type",label:n.type,required:!0,readOnly:!p.isClosed||N.values.payrollDeduction,valueField:"key",displayField:"value",values:N.values,maxAccess:x,onChange:(e,a)=>{N.setFieldValue("type",(null==a?void 0:a.key)||null)},error:N.touched.type&&!!N.errors.type})}),(0,l.jsx)(d.ZP,{item:!0,xs:12,children:(0,l.jsx)(j.Z,{name:"notes",label:n.notes,readOnly:!p.isClosed||N.values.payrollDeduction,value:N.values.notes,maxLength:"100",maxAccess:x,onChange:e=>N.setFieldValue("notes",e.target.value),onClear:()=>N.setFieldValue("notes",""),error:N.touched.notes&&!!N.errors.notes})})]})})})})}var _=e=>{var a;let{store:t,labels:n}=e,{recordId:r}=t,{getRequest:o,postRequest:i}=(0,s.useContext)(u.$),{platformLabels:p}=(0,s.useContext)(h.l),{stack:y}=(0,O.zY)(),I=[{field:"payrollDeduction",headerName:n.payrollDeduction,type:"checkbox",flex:1},{field:"amount",headerName:n.amount,flex:1,type:"number"},{field:"date",headerName:n.date,flex:1,type:"date"},{field:"typeName",headerName:n.type,flex:1},{field:"notes",headerName:n.notes,flex:1}];async function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:a=0,_pageSize:t=50}=e;return{...await o({extension:C.h.LoanDeduction.page,parameters:"_loanId=".concat(r,"&_pageSize=").concat(t,"&_startAt=").concat(a)}),_startAt:a}}let{query:{data:b},access:S,invalidate:R,paginationParameters:q,refetch:w}=(0,m.J)({queryFn:g,endpointId:C.h.LoanDeduction.page,datasetId:v.i.Loans,enabled:!!r}),j=parseFloat((null==b?void 0:null===(a=b.list)||void 0===a?void 0:a.reduce((e,a)=>e+(a.amount||0),0))||0).toFixed(2),P=parseFloat((t.loanAmount||0)-j).toFixed(2);function T(e){y({Component:V,props:{labels:n,store:t,maxAccess:S,loanAmount:t.loanAmount,recordId:e},width:600,height:500,title:n.Deduction})}let Z=async e=>{await i({extension:C.h.LoanDeduction.del,record:JSON.stringify(e)}),R(),c.ZP.success(p.Deleted)};return(0,l.jsxs)(f.R,{children:[(0,l.jsx)(x.g,{children:(0,l.jsx)(k.Z,{disableAdd:!t.isClosed,onAdd:()=>T(),maxAccess:S})}),(0,l.jsx)(F.Q,{children:(0,l.jsx)(N.Z,{name:"deductionTable",columns:I,gridData:b,rowId:"recordId",onEdit:e=>T(e.recordId),onDelete:t.isClosed&&Z,actionCondition:(e,a)=>"delete"!==a||!1===e.payrollDeduction,pageSize:50,paginationType:"api",paginationParameters:q,refetch:w,maxAccess:S})}),(0,l.jsx)(x.g,{children:(0,l.jsxs)(d.ZP,{container:!0,sx:{p:2},spacing:2,children:[(0,l.jsx)(d.ZP,{item:!0,xs:4,children:(0,l.jsx)(D.Z,{name:"loanAmount",label:n.loanAmount,value:parseFloat(t.loanAmount).toFixed(2),readOnly:!0})}),(0,l.jsx)(d.ZP,{item:!0,xs:4,children:(0,l.jsx)(D.Z,{name:"deductedAmount",label:n.deductedAmount,value:j,readOnly:!0})}),(0,l.jsx)(d.ZP,{item:!0,xs:4,children:(0,l.jsx)(D.Z,{name:"remainingBalance",label:n.remainingBalance,value:P,readOnly:!0})})]})})]})},L=t(21326),M=t(50023);let E=e=>{let{recordId:a,window:t}=e,[d,o]=(0,s.useState)(0),[i,c]=(0,s.useState)({recordId:a,isClosed:!1,loanAmount:0,effectiveDate:null}),{labels:u,access:m}=(0,M.Z)({datasetId:v.i.Loans,editMode:!!a});(0,L.Z)({title:u.Loans,window:t});let p=[{label:u.LoanInfo},{label:u.Deduction,disabled:!i.recordId}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Y,{tabs:p,activeTab:d,setActiveTab:o}),(0,l.jsx)(n.Z,{index:0,value:d,children:(0,l.jsx)(Z,{labels:u,setStore:c,store:i,maxAccess:m,window:t})}),(0,l.jsx)(n.Z,{index:1,value:d,children:(0,l.jsx)(_,{labels:u,store:i})})]})};E.width=800,E.height=600;var B=E},20899:function(e,a,t){"use strict";t.d(a,{Z:function(){return V}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(76399),c=t(65950),u=t(71987),m=t(26612),v=t(5088),p=t(80983),y=t(19473),h=t(31389),f=t(62362),x=t(89330),I=t(8661),g=t(38449),C=t(7121),D=t(21581),b=t(98345),S=t(39812),R=t(39704),q=t(61802),w=t(65215),j=t(96026),P=t(70104),T=t(58912),Z=t(92407),N=t(33625),F=t(27423),k=t(90587),O=t(21326),A=t(50023);function V(e){var a,t,V,_,L,M,E,B;let{recordId:J,window:H}=e,{getRequest:U,postRequest:Y}=(0,r.useContext)(c.$),{platformLabels:G,defaultsData:W}=(0,r.useContext)(y.l),{stack:Q}=(0,q.zY)(),{stack:$}=(0,j.V)(),[z,K]=(0,r.useState)([]),X=(0,r.useRef)([]),{labels:ee,access:ea}=(0,A.Z)({datasetId:m.i.MaterialReplenishment,editMode:!!J});(0,O.Z)({title:ee.MaterialRequest,window:H});let{documentType:et,maxAccess:el,changeDT:en}=(0,b.H)({functionId:C.J.MaterialRequest,access:ea,enabled:!J}),er=(0,u.E)({endpointId:T.I.MaterialReplenishment.page});async function es(){if(!ev&&(null==et||!et.dtId)){var e;let a=null==W?void 0:null===(e=W.list)||void 0===e?void 0:e.find(e=>{let{key:a}=e;return"de_siteId"===a});(null==a?void 0:a.value)&&ei.setFieldValue("fromSiteId",parseInt(null==a?void 0:a.value))}}let ed=null===(a=JSON.parse(window.sessionStorage.getItem("userData")))||void 0===a?void 0:a.userId,eo=async()=>{var e,a;let t=await U({extension:g.r.Users.get,parameters:"_recordId=".concat(ed)});if(null==t?void 0:null===(e=t.record)||void 0===e?void 0:e.employeeId){let e=await U({extension:Z.y.Employee.get1,parameters:"_recordId=".concat(null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.employeeId)});ei.setFieldValue("departmentId",e.record.departmentId)}},{formik:ei}=(0,p.c)({documentType:{key:"dtId",value:null==et?void 0:et.dtId},initialValues:{recordId:null,functionId:C.J.MaterialRequest,reference:"",dtId:null,siteId:null,siteName:"",date:new Date,fromSiteId:"",departmentId:null,departmentName:"",statusName:"",rsName:"",wipName:"",notes:"",workCenterId:null,wcName:"",wcRef:"",status:1,wip:1,items:[{id:1,requestId:J||0,seqNo:1,sku:"",itemName:null,itemId:null,qty:null,notes:"",onHandSite:0,onHandGlobal:null,deliveredQty:null,deliveryStatus:"",muId:null,muQty:"",muRef:"",muName:"",msId:null}]},maxAccess:el,validateOnChange:!0,validationSchema:s.Ry({date:s.hT().required(),fromSiteId:s.Z_().required(),items:s.IX().of(s.Ry().shape({sku:s.Z_().required(),qty:s.Z_().required().min(1)})).required()}),onSubmit:async e=>{let a={...e,date:(0,S.ku)(null==e?void 0:e.date)||null};delete a.items;let t=null==e?void 0:e.items.map((a,t)=>({...a,seqNo:t+1,requestId:e.recordId||0}));if(e.fromSiteId===e.siteId){$({message:ee.errorMessage});return}let l=await Y({extension:T.I.MaterialReplenishment.set2,record:JSON.stringify({header:a,items:t})});if(e.recordId)o.ZP.success(G.Edited);else{o.ZP.success(G.Added),ei.setFieldValue("recordId",l.recordId);let e=await ex(l.recordId),a=await eb(l.recordId);ei.setValues({...e.record,items:a}),er()}}});async function ec(e){var a,t;if(!e)return;let l=null===(t=ei.values.items)||void 0===t?void 0:null===(a=t.find(a=>parseInt(a.itemId)===e))||void 0===a?void 0:a.msId,n=(null==z?void 0:z.filter(e=>e.msId===l))||[];X.current=n}let eu=2===ei.values.wip,em=-1==ei.values.status,ev=!!ei.values.recordId,ep=async()=>await U({extension:w.$.MeasurementUnit.qry,parameters:"_msId=0"});async function ey(e){let a=await U({extension:w.$.Item.get,parameters:"_recordId=".concat(e)});return null==a?void 0:a.record}async function eh(e){let a=await U({extension:w.$.Availability.qry,parameters:"_siteId=".concat(ei.values.fromSiteId||0,"&_itemId=").concat(e,"&_startAt=0&_pageSize=1000")}),t=(null==a?void 0:a.count)>0,l=t&&0!==a.list[0].siteId;return t&&l?(ei.setFieldValue("onHandSite",a.list[0].onhand),a.list[0].onhand):(ei.setFieldValue("onHandSite",0),null)}let ef=[{component:"resourcelookup",label:ee.sku,name:"sku",props:{endpointId:w.$.Item.snapshot,valueField:"sku",displayField:"sku",mandatory:!0,readOnly:eu||em,displayFieldWidth:3,mapping:[{from:"recordId",to:"itemId"},{from:"msId",to:"msId"},{from:"onHandGlobal",to:"onHandGlobal"},{from:"deliveredQty",to:"deliveredQty"},{from:"sku",to:"sku"},{from:"name",to:"itemName"},{from:"isInactive",to:"isInactive"}],columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"},{key:"flName",value:"flName"}]},async onChange(e){let{row:{update:a,newRow:t}}=e;if(!(null==t?void 0:t.itemId)){a({details:!1});return}if(t.isInactive){a({...ei.initialValues.items[0],id:t.id}),$({message:ee.inactiveItem});return}if(null==t?void 0:t.itemId){var l,n,r;let e=await ey(t.itemId);ec(null==t?void 0:t.itemId);let s=null==z?void 0:z.filter(a=>a.msId===(null==e?void 0:e.msId)),d=null!==(r=await eh(null==t?void 0:t.itemId))&&void 0!==r?r:0;a({msId:null==e?void 0:e.msId,onHandSite:d,muRef:null==s?void 0:null===(l=s[0])||void 0===l?void 0:l.reference,muId:null==s?void 0:null===(n=s[0])||void 0===n?void 0:n.recordId})}}},{component:"textfield",label:ee.itemName,name:"itemName",props:{readOnly:!0}},{component:"resourcecombobox",label:ee.muId,name:"muRef",props:{store:null==X?void 0:X.current,displayField:"reference",valueField:"recordId",readOnly:eu||em,mapping:[{from:"reference",to:"muRef"},{from:"recordId",to:"muId"}]},async onChange(e){var a;let{row:{update:t,newRow:l}}=e,n=null==X?void 0:X.current.filter(e=>e.recordId===(null==l?void 0:l.muId));t({qtyInBase:(null==l?void 0:l.qty)*(null==n?void 0:n.muQty),muQty:null==l?void 0:l.muQty})},propsReducer(e){let{row:a,props:t}=e;return{...t,store:null==X?void 0:X.current}}},{component:"numberfield",label:ee.qty,name:"qty",props:{readOnly:eu||em,mandatory:!0},async onChange(e){let{row:{update:a,newRow:t}}=e;if(t){var l;a({qtyInBase:(null==t?void 0:t.qty)*(null==t?void 0:t.muQty)})}}},{component:"numberfield",label:ee.onHandSite,name:"onHandSite",props:{readOnly:!0}},{component:"textfield",label:ee.notes,name:"notes",props:{readOnly:eu||em}}];async function ex(e){var a;let t=await U({extension:T.I.MaterialReplenishment.get,parameters:"_requestId=".concat(e,"&_params=")});return t.record.date=(0,S.a1)(null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.date),t}let eI=async e=>{await Y({extension:T.I.MaterialReplenishment.close,record:JSON.stringify({recordId:e})}),o.ZP.success(G.Closed),er();let a=await ex(e),t=await eb(e);ei.setValues({...a.record,items:t})},eg=async e=>{var a;let t={...ei.values,date:(0,S.ku)(null===(a=ei.values)||void 0===a?void 0:a.date)||null};delete t.items,await Y({extension:T.I.MaterialReplenishment.reopen,record:JSON.stringify(t)}),o.ZP.success(G.Reopened),er();let l=await ex(e),n=await eb(e);ei.setValues({...l.record,items:n})},eC=async e=>{var a;let t={...ei.values,date:(0,S.ku)(null===(a=ei.values)||void 0===a?void 0:a.date)||null};delete t.items,await Y({extension:T.I.MaterialReplenishment.cancel,record:JSON.stringify(t)}),o.ZP.success(G.Cancelled),er();let l=await ex(e),n=await eb(e);ei.setValues({...l.record,items:n})},eD=[{key:"Approval",condition:!0,onClick:"onApproval",disabled:!eu},{key:"Close",condition:!eu,onClick:()=>eI(ei.values.recordId),disabled:!ev||em},{key:"Reopen",condition:eu,onClick:()=>eg(ei.values.recordId),disabled:!ev||em},{key:"WorkFlow",condition:!0,onClick:async()=>{Q({Component:R.Z,props:{functionId:C.J.MaterialRequest,recordId:ei.values.recordId}})},disabled:!ev},{key:"Cancel",condition:!0,onClick:()=>eC(ei.values.recordId),disabled:!ev||em||eu}];async function eb(e){var a,t;let l=await U({extension:T.I.OrderItem.qry,parameters:"_requestId=".concat(e,"&_functionId=").concat(C.J.MaterialRequest,"&_params=&_startAt=0")});return(null==l?void 0:null===(a=l.list)||void 0===a?void 0:a.length)?await Promise.all(null==l?void 0:null===(t=l.list)||void 0===t?void 0:t.map(async e=>({...e,id:e.seqNo,onHandSite:e.onhandSite}))):[]}return(0,r.useEffect)(()=>{!async function(){let e=await ep();K(null==e?void 0:e.list),es(),await eo()}()},[]),(0,r.useEffect)(()=>{!async function(){if(J&&z){let e=await ex(J),a=await eb(J);ei.setValues({...e.record,items:a})}}()},[J,z]),(0,l.jsx)(d.Z,{resourceId:m.i.MaterialReplenishment,form:ei,maxAccess:el,editMode:ev,previewReport:ev,actions:eD,functionId:C.J.MaterialRequest,disabledSubmit:eu||em,children:(0,l.jsxs)(h.R,{children:[(0,l.jsx)(N.g,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:g.r.DocumentType.qry,parameters:"_dgId=".concat(C.J.MaterialRequest,"&_startAt=0&_pageSize=50"),filter:ev?void 0:e=>1===e.activeStatus,name:"dtId",label:ee.documentType,readOnly:eu||em,valueField:"recordId",displayField:"name",values:null==ei?void 0:ei.values,onChange:async(e,a)=>{ei.setFieldValue("dtId",(null==a?void 0:a.recordId)||null),en(a)},error:ei.touched.dtId&&!!ei.errors.dtId,maxAccess:el})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(v.Z,{name:"reference",label:ee.reference,value:null==ei?void 0:null===(t=ei.values)||void 0===t?void 0:t.reference,readOnly:ev,maxAccess:!ev&&el,onChange:ei.handleChange,onClear:()=>ei.setFieldValue("reference",""),error:ei.touched.reference&&!!ei.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{name:"date",label:ee.date,value:null==ei?void 0:null===(V=ei.values)||void 0===V?void 0:V.date,required:!0,onChange:ei.setFieldValue,onClear:()=>ei.setFieldValue("date",null),readOnly:eu||em,error:ei.touched.date&&!!ei.errors.date,maxAccess:el})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:P.K.DepartmentFilters.qry,parameters:"_filter=&_size=1000&_startAt=0&_type=0&_activeStatus=0&_sortBy=recordId",name:"departmentId",readOnly:eu||em,label:ee.department,values:ei.values,displayField:"name",maxAccess:el,onChange:(e,a)=>{ei.setFieldValue("departmentId",(null==a?void 0:a.recordId)||null)},error:ei.touched.departmentId&&!!ei.errors.departmentId})})]})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(F.U,{endpointId:k.u.WorkCenter.snapshot,name:"workCenterId",label:ee.workCenter,valueField:"reference",displayField:"name",valueShow:"wcRef",secondValueShow:"wcName",displayFieldWidth:2,form:ei,onChange:(e,a)=>{ei.setFieldValue("workCenterId",(null==a?void 0:a.recordId)||null),ei.setFieldValue("wcRef",(null==a?void 0:a.reference)||""),ei.setFieldValue("wcName",(null==a?void 0:a.name)||"")},error:ei.touched.workCenterId&&!!ei.errors.workCenterId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:w.$.Site.qry,name:"siteId",readOnly:eu||em,refresh:ev,label:ee.site,values:ei.values,displayField:"name",maxAccess:el,onChange:(e,a)=>{ei.setFieldValue("siteId",(null==a?void 0:a.recordId)||null)},error:ei.touched.siteId&&!!ei.errors.siteId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{endpointId:w.$.Site.qry,name:"fromSiteId",readOnly:eu||em||(null==ei?void 0:null===(L=ei.values)||void 0===L?void 0:null===(_=L.items)||void 0===_?void 0:_.some(e=>e.sku)),label:ee.fromSite,values:ei.values,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:1,required:!0,maxAccess:el,onChange:(e,a)=>{ei.setFieldValue("fromSiteId",(null==a?void 0:a.recordId)||null)},error:ei.touched.fromSiteId&&!!ei.errors.fromSiteId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"notes",label:ee.notes,value:null==ei?void 0:null===(M=ei.values)||void 0===M?void 0:M.notes,readOnly:eu||em,maxLength:"200",maxAccess:el,onChange:ei.handleChange,onClear:()=>ei.setFieldValue("notes",""),error:ei.touched.notes&&!!ei.errors.notes})})]})})]})}),(0,l.jsx)(f.Q,{children:(0,l.jsx)(i._,{onChange:e=>{let a=null==e?void 0:e.map(e=>({...e,details:!1,qtyInBase:0}));null==ei||ei.setFieldValue("items",a)},onSelectionChange:(e,a,t)=>{"muRef"==t&&ec(null==e?void 0:e.itemId)},name:"items",maxAccess:el,value:null==ei?void 0:null===(E=ei.values)||void 0===E?void 0:E.items,error:null==ei?void 0:null===(B=ei.errors)||void 0===B?void 0:B.items,columns:ef,allowDelete:!eu&&!em})})]})})}V.width=1e3,V.height=680},74456:function(e,a,t){"use strict";var l=t(52322),n=t(60218),r=t(48601),s=t(2784),d=t(5088),o=t(82737),i=t(89330),c=t(88469),u=t(65950),m=t(26612),v=t(80983),p=t(31389),y=t(62362),h=t(91406),f=t(27423),x=t(39812),I=t(75991),g=t(46553),C=t(17720),D=t(62202),b=t(7121),S=t(98345),R=t(84141),q=t(61802),w=t(19473),j=t(71987),P=t(33625),T=t(8661),Z=t(84100),N=t(50023),F=t(21326);let k=e=>{var a,t,k,O,A,V,_,L,M,E,B,J;let{recordId:H,window:U}=e,{getRequest:Y,postRequest:G}=(0,s.useContext)(u.$),{stack:W}=(0,q.zY)(),{platformLabels:Q}=(0,s.useContext)(w.l),[$,z]=(0,s.useState)(!1),[K,X]=(0,s.useState)(!1),[ee,ea]=(0,s.useState)(!1),{labels:et,access:el}=(0,N.Z)({datasetId:m.i.OutwardsModification,editMode:!!H});(0,F.Z)({title:et.outwardsModification,window:U});let{maxAccess:en}=(0,S.H)({functionId:b.J.OutwardsModification,access:el,hasDT:!1}),er=(0,j.E)({endpointId:c.N.OutwardsModification.page}),{formik:es}=(0,v.c)({maxAccess:en,initialValues:{recordId:null,reference:"",date:new Date,outwardsDate:null,owoId:"",owRef:"",ttNo:"",productName:"",clientId:"",currencyId:"",clientRef:"",clientName:"",cellPhone:"",dispersalType:"",countryId:"",headerBenId:"",headerBenName:"",headerBenSeqNo:"",newBeneficiaryId:"",newBeneficiarySeqNo:"",corId:"",oldBeneficiaryId:"",oldBeneficiarySeqNo:"",oldBeneficiarySeqName:"",wip:"",releaseStatus:"",status:"",otpVerified:!1,owtId:"",owtRef:"",plantId:"",seqNo:"",modificationType:"",beneficiaryData:{}},validateOnChange:!0,validationSchema:r.Ry({owRef:r.Z_().required(),date:r.Z_().required(),modificationType:r.Z_().required()}),onSubmit:async()=>{X(!0)}}),ed=!!es.values.recordId,eo=2===es.values.wip,ei=4===es.values.status,ec=es.values.dispersalType;async function eu(e){return await Y({extension:c.N.OutwardsModification.get,parameters:"_recordId=".concat(e)})}let em=async e=>{let a=await G({extension:c.N.OutwardsModification.close,record:JSON.stringify({recordId:e})});H&&D.ZP.success(Q.Closed),er(),await eI(a.recordId)};function ev(e){es.setValues({...es.values,beneficiaryData:e})}function ep(e){for(let[a,t]of Object.entries(e))es.setFieldValue(a,null!=t?t:"")}async function ey(e){var a,t,l,n;ep(e);let{headerView:r,ttNo:s}=(await Y({extension:c.N.OutwardsOrder.get2,parameters:"_recordId=".concat(null==e?void 0:e.owoId)})).record;ep({outwardsDate:(0,x.a1)(r.date),amount:r.amount,productName:r.productName,clientId:r.clientId,currencyId:r.currencyId,clientRef:r.clientRef,clientName:r.clientName,cellPhone:r.cellPhone,ttNo:s,dispersalType:r.dispersalType,countryId:r.countryId,corId:r.corId,modificationType:null==e?void 0:e.modificationType}),ef({headerBenId:null!==(a=e.newBeneficiaryId)&&void 0!==a?a:"",headerBenName:null!==(t=e.newBeneficiaryName)&&void 0!==t?t:"",headerBenSeqNo:null!==(l=e.newBeneficiarySeqNo)&&void 0!==l?l:"",dispersalType:null!==(n=r.dispersalType)&&void 0!==n?n:""})}function eh(){es.resetForm(),z(!0)}async function ef(e){es.setFieldValue("newBeneficiaryId",e.headerBenId),es.setFieldValue("newBeneficiarySeqNo",e.headerBenSeqNo),es.setFieldValue("dispersalType",e.dispersalType)}let ex=[{key:"Close",condition:!eo,onClick:()=>em(es.values.recordId),disabled:eo||!ed},{key:"Reopen",condition:eo,onClick:async()=>{let e=await G({extension:c.N.OutwardsModification.reopen,record:JSON.stringify({recordId:es.values.recordId})});D.ZP.success(Q.Reopened),er(),await eI(e.recordId)},disabled:!eo},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!eo},{key:"Locked",condition:!0,onClick:async()=>{let e=await G({extension:c.N.OutwardsModification.post,record:JSON.stringify({recordId:es.values.recordId})});D.ZP.success(Q.Posted),er(),await eI(e.recordId)},disabled:!ei}];async function eI(e){let a=await eu(e);a.record.date=(0,x.a1)(a.record.date),await ey(a.record)}async function eg(e){if(e)return await Y({extension:c.N.OutwardsOrder.get,parameters:"_recordId=".concat(e)})}return(0,s.useEffect)(()=>{!async function(){if(ee){var e;X(!1),ea(!1);let a={owoId:es.values.owoId,modificationType:es.values.modificationType,owtId:es.values.owtId,beneficiaryCashPack:1===ec?es.values.beneficiaryData:null,beneficiaryBankPack:2===ec?es.values.beneficiaryData:null},t=await G({extension:c.N.OutwardsModification.set2,record:JSON.stringify(a)}),l=ed?Q.Edited:Q.Added;D.ZP.success(l),await eI(t.recordId),er(),H||(e=t.recordId,W({Component:R.Z,props:{values:es.values,recordId:e,functionId:b.J.OutwardsModification,onSuccess:()=>{em(e)}}}))}}()},[ee]),(0,s.useEffect)(()=>{!async function(){H&&await eI(H)}()},[]),(0,l.jsx)(o.Z,{resourceId:m.i.OutwardsModification,form:es,maxAccess:en,editMode:ed,disabledSubmit:ed,onClose:em,isClosed:eo,actions:ex,functionId:b.J.OutwardsModification,previewReport:ed,children:(0,l.jsx)(p.R,{children:(0,l.jsx)(y.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(P.g,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(d.Z,{name:"reference",label:et.reference,value:es.values.reference,maxAccess:en,readOnly:!0})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(i.Z,{name:"date",required:!0,readOnly:ed,label:et.date,value:es.values.date,editMode:ed,maxAccess:en,onChange:es.setFieldValue,onClear:()=>es.setFieldValue("date",""),error:es.touched.date&&!!es.errors.date})}),(0,l.jsx)(n.ZP,{item:!0,xs:2,children:(0,l.jsx)(f.U,{endpointId:c.N.OutwardsOrder.snapshot,valueField:"reference",displayField:"reference",name:"owRef",secondDisplayField:!1,required:!0,readOnly:ed||es.values.owtRef,label:et.outwardOrder,form:es,onChange:(e,a)=>{(null==a?void 0:a.recordId)?ey({owoId:null==a?void 0:a.recordId,owRef:null==a?void 0:a.reference,oldBeneficiaryId:null==a?void 0:a.beneficiaryId,oldBeneficiarySeqNo:null==a?void 0:a.beneficiarySeqNo,oldBeneficiaryName:null==a?void 0:a.beneficiaryName,newBeneficiaryId:null==a?void 0:a.beneficiaryId,newBeneficiarySeqNo:null==a?void 0:a.beneficiarySeqNo,newBeneficiaryName:null==a?void 0:a.beneficiaryName,dispersalType:null==a?void 0:a.dispersalType}):eh()},error:es.touched.owRef&&!!es.errors.owRef,maxAccess:en})}),(0,l.jsx)(n.ZP,{item:!0,xs:2,children:(0,l.jsx)(f.U,{endpointId:c.N.OutwardsTransfer.snapshot,valueField:"reference",displayField:"reference",name:"owtRef",secondDisplayField:!1,readOnly:ed||es.values.owRef,label:et.outwardTransfer,form:es,onChange:async(e,a)=>{var t,l,n,r,s,d,o,i;(null==a?void 0:a.recordId)||eh();let c=await eg(null==a?void 0:a.owoId);await ey({owoId:null==a?void 0:a.owoId,owRef:null==c?void 0:null===(t=c.record)||void 0===t?void 0:t.reference,owtId:null==a?void 0:a.recordId,owtRef:null==a?void 0:a.reference,oldBeneficiaryId:null==c?void 0:null===(l=c.record)||void 0===l?void 0:l.beneficiaryId,oldBeneficiarySeqNo:null==c?void 0:null===(n=c.record)||void 0===n?void 0:n.beneficiarySeqNo,oldBeneficiaryName:null==c?void 0:null===(r=c.record)||void 0===r?void 0:r.beneficiaryName,newBeneficiaryId:null==c?void 0:null===(s=c.record)||void 0===s?void 0:s.beneficiaryId,newBeneficiarySeqNo:null==c?void 0:null===(d=c.record)||void 0===d?void 0:d.beneficiarySeqNo,newBeneficiaryName:null==c?void 0:null===(o=c.record)||void 0===o?void 0:o.beneficiaryName,dispersalType:null==c?void 0:null===(i=c.record)||void 0===i?void 0:i.dispersalType})},error:es.touched.owtRef&&!!es.errors.owtRef,maxAccess:en})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(d.Z,{name:"ttNo",label:et.ttNo,value:es.values.ttNo,readOnly:!0,error:es.touched.ttNo&&!!es.errors.ttNo,maxAccess:en})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(i.Z,{name:"outwardsDate",label:et.outwardsDate,value:es.values.outwardsDate,editMode:ed,maxAccess:en,readOnly:!0,error:es.touched.outwardsDate&&!!es.errors.outwardsDate})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(d.Z,{name:"productName",label:et.product,value:es.values.productName,readOnly:!0,error:es.touched.ttNo&&!!es.errors.productName,maxAccess:en})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(h.Z,{name:"amount",label:et.amount,value:es.values.amount,maxAccess:en,readOnly:!0,error:es.touched.amount&&!!es.errors.amount})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(T.Z,{datasetId:Z.v.OW_MODIFICATION_TYPE,name:"modificationType",label:et.modificationType,values:es.values,valueField:"key",displayField:"value",required:!0,readOnly:ed,maxAccess:en,onChange:(e,a)=>{es.setFieldValue("modificationType",null==a?void 0:a.key),(null==a?void 0:a.key)==3&&(z(!0),es.setFieldValue("newBeneficiaryId",""),es.setFieldValue("newBeneficiarySeqNo",""),es.setFieldValue("headerBenName",""))},error:es.touched.modificationType&&!!es.errors.modificationType})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsx)(f.U,{endpointId:c.N.Beneficiary.snapshot2,parameters:{_clientId:es.values.clientId,_dispersalType:es.values.dispersalType,_currencyId:es.values.currencyId},valueField:"name",displayField:"name",name:"headerBenName",label:et.beneficiary,form:es,readOnly:!es.values.clientId||!es.values.dispersalType||ed||ei||2!=es.values.modificationType,maxAccess:en,editMode:ed,secondDisplayField:!1,onChange:async(e,a)=>{(null==a?void 0:a.beneficiaryId)?ef({headerBenId:null==a?void 0:a.beneficiaryId,headerBenName:null==a?void 0:a.name,headerBenSeqNo:null==a?void 0:a.seqNo,dispersalType:null==a?void 0:a.dispersalType}):(es.setFieldValue("headerBenId",""),es.setFieldValue("headerBenName",""),es.setFieldValue("headerBenSeqNo",""))},errorCheck:"headerBenId"})})]})})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(y.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsxs)(I.Z,{title:et.benOld,form:!0,children:[2===ec&&(0,l.jsx)(C.Z,{client:{clientId:es.values.clientId,clientName:es.values.clientName,clientRef:es.values.clientRef},beneficiary:{beneficiaryId:es.values.oldBeneficiaryId,beneficiarySeqNo:es.values.oldBeneficiarySeqNo},dispersalType:es.values.dispersalType,countryId:es.values.countryId,corId:es.values.corId,recordId:(null===(a=es.values)||void 0===a?void 0:a.clientId)&&(null===(t=es.values)||void 0===t?void 0:t.oldBeneficiaryId)&&(null===(k=es.values)||void 0===k?void 0:k.oldBeneficiarySeqNo)?(100*es.values.clientId).toString()+(10*es.values.oldBeneficiaryId).toString()+es.values.oldBeneficiarySeqNo:null,viewBtns:!1}),1===ec&&(0,l.jsx)(g.Z,{client:{clientId:es.values.clientId,clientName:es.values.clientName,clientRef:es.values.clientRef},beneficiary:{beneficiaryId:es.values.oldBeneficiaryId,beneficiarySeqNo:es.values.oldBeneficiarySeqNo},dispersalType:es.values.dispersalType,countryId:es.values.countryId,corId:es.values.corId,recordId:(null===(O=es.values)||void 0===O?void 0:O.clientId)&&(null===(A=es.values)||void 0===A?void 0:A.oldBeneficiaryId)&&(null===(V=es.values)||void 0===V?void 0:V.oldBeneficiarySeqNo)?(100*es.values.clientId).toString()+(10*es.values.oldBeneficiaryId).toString()+es.values.oldBeneficiarySeqNo:null,viewBtns:!1})]})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsxs)(I.Z,{title:et.benNew,form:!0,children:[2===ec&&(0,l.jsx)(C.Z,{viewBtns:!1,resetForm:$,setResetForm:z,onChange:ev,submitted:K,setSubmitted:X,setValidSubmit:ea,forceEdit:ed,client:{clientId:es.values.clientId,clientName:es.values.clientName,clientRef:es.values.clientRef},beneficiary:{beneficiaryId:es.values.newBeneficiaryId,beneficiarySeqNo:es.values.newBeneficiarySeqNo},dispersalType:es.values.dispersalType,corId:es.values.corId,recordId:(null===(_=es.values)||void 0===_?void 0:_.clientId)&&(null===(L=es.values)||void 0===L?void 0:L.newBeneficiaryId)&&(null===(M=es.values)||void 0===M?void 0:M.newBeneficiarySeqNo)?(100*es.values.clientId).toString()+(10*es.values.newBeneficiaryId).toString()+es.values.newBeneficiarySeqNo:null,submitMainForm:!1}),1===ec&&(0,l.jsx)(g.Z,{viewBtns:!1,forceEdit:ed,resetForm:$,setResetForm:z,onChange:ev,submitted:K,setSubmitted:X,setValidSubmit:ea,client:{clientId:es.values.clientId,clientName:es.values.clientName,clientRef:es.values.clientRef},beneficiary:{beneficiaryId:es.values.newBeneficiaryId,beneficiarySeqNo:es.values.newBeneficiarySeqNo},dispersalType:es.values.dispersalType,countryId:es.values.countryId,corId:es.values.corId,recordId:(null===(E=es.values)||void 0===E?void 0:E.clientId)&&(null===(B=es.values)||void 0===B?void 0:B.newBeneficiaryId)&&(null===(J=es.values)||void 0===J?void 0:J.newBeneficiarySeqNo)?(100*es.values.clientId).toString()+(10*es.values.newBeneficiaryId).toString()+es.values.newBeneficiarySeqNo:null,submitMainForm:!1})]})})]})})})]})})})})};k.width=1200,k.height=650,a.Z=k},21379:function(e,a,t){"use strict";t.d(a,{Z:function(){return P}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(62202),o=t(39812),i=t(65950),c=t(19473),u=t(71987),m=t(83562),v=t(7121),p=t(98345),y=t(80983),h=t(26612),f=t(82737),x=t(31389),I=t(62362),g=t(8661),C=t(38449),D=t(5088),b=t(89330),S=t(84100),R=t(91406),q=t(21581),w=t(50023),j=t(21326);function P(e){var a,t,P,T,Z,N,F,k,O,A,V;let{recordId:_,window:L}=e,{getRequest:M,postRequest:E}=(0,r.useContext)(i.$),{platformLabels:B,defaultsData:J}=(0,r.useContext)(c.l),H=parseInt(null==J?void 0:null===(t=J.list)||void 0===t?void 0:null===(a=t.find(e=>{let{key:a}=e;return"pytvStartDate"===a}))||void 0===a?void 0:a.value)||null,U=parseInt(null==J?void 0:null===(T=J.list)||void 0===T?void 0:null===(P=T.find(e=>{let{key:a}=e;return"pytvEndDate"===a}))||void 0===P?void 0:P.value)||null,Y=(0,u.E)({endpointId:m.m.Payroll.page}),{labels:G,access:W}=(0,w.Z)({datasetId:h.i.PayrollHeader,editMode:!!_});(0,j.Z)({title:G.payrollList,window:L});let{documentType:Q,maxAccess:$,changeDT:z}=(0,p.H)({functionId:v.J.PayrollList,access:W,enabled:!_}),{formik:K}=(0,y.c)({maxAccess:$,documentType:{key:"dtId",value:null==Q?void 0:Q.dtId,reference:null==Q?void 0:Q.reference},initialValues:{recordId:null,dtId:null,reference:"",fiscalYear:null,salaryType:5,date:new Date,payDate:null,startDate:null,endDate:null,taStartDate:null,taEndDate:null,calendarDays:null,periodId:null,notes:"",status:1},validationSchema:s.Ry({periodId:s.Rx().required(),date:s.hT().required(),payDate:s.hT().required(),startDate:s.hT().required(),endDate:s.hT().required(),fiscalYear:s.Rx().required()}),onSubmit:async e=>{await E({extension:m.m.Payroll.set,record:JSON.stringify(e)}),d.ZP.success(e.recordId?B.Edited:B.Added),Y(),L.close()}}),X=!!K.values.recordId,ee=2==K.values.wip,ea=3===K.values.status,et=async e=>{if(e){let a=await M({extension:m.m.Payroll.get,parameters:"_recordId=".concat(e)});K.setValues({...a.record,date:(0,o.a1)(a.record.date),payDate:(0,o.a1)(a.record.payDate),startDate:(0,o.a1)(a.record.startDate),endDate:(0,o.a1)(a.record.endDate),taStartDate:(0,o.a1)(a.record.taStartDate),taEndDate:(0,o.a1)(a.record.taEndDate)})}};(0,r.useEffect)(()=>{et(_)},[]);let el=async()=>{let e=await E({extension:m.m.Payroll.close,record:JSON.stringify({...K.values,date:(0,o.ku)(K.values.date),payDate:(0,o.ku)(K.values.payDate),startDate:(0,o.ku)(K.values.startDate),endDate:(0,o.ku)(K.values.endDate),taStartDate:(0,o.ku)(K.values.taStartDate),taEndDate:(0,o.ku)(K.values.taEndDate)})});d.ZP.success(B.Closed),et(null==e?void 0:e.recordId),Y()},en=async()=>{await E({extension:m.m.Payroll.post,record:JSON.stringify({...K.values,date:(0,o.ku)(K.values.date),payDate:(0,o.ku)(K.values.payDate),startDate:(0,o.ku)(K.values.startDate),endDate:(0,o.ku)(K.values.endDate),taStartDate:(0,o.ku)(K.values.taStartDate),taEndDate:(0,o.ku)(K.values.taEndDate)})}),d.ZP.success(B.Posted),et(_),Y()},er=async()=>{let e=await E({extension:m.m.Payroll.unpost,record:JSON.stringify({...K.values,date:(0,o.ku)(K.values.date),payDate:(0,o.ku)(K.values.payDate),startDate:(0,o.ku)(K.values.startDate),endDate:(0,o.ku)(K.values.endDate),taStartDate:(0,o.ku)(K.values.taStartDate),taEndDate:(0,o.ku)(K.values.taEndDate)})});d.ZP.success(B.Unposted),et(null==e?void 0:e.recordId),Y()},es=async()=>{let e=await E({extension:m.m.Payroll.reopen,record:JSON.stringify({...K.values,date:(0,o.ku)(K.values.date),payDate:(0,o.ku)(K.values.payDate),startDate:(0,o.ku)(K.values.startDate),endDate:(0,o.ku)(K.values.endDate),taStartDate:(0,o.ku)(K.values.taStartDate),taEndDate:(0,o.ku)(K.values.taEndDate)})});d.ZP.success(B.Reopened),et(null==e?void 0:e.recordId),Y()},ed=[{key:"GL",condition:!0,onClick:"onClickGL",datasetId:h.i.GLPayrollList,disabled:!X},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!ee},{key:"Close",condition:!ee,onClick:el,disabled:ee||!X},{key:"Reopen",condition:ee,onClick:es,disabled:!ee||ea},{key:"Unlocked",condition:!ea,onClick:en,disabled:!X||!ee},{key:"Locked",condition:ea,onClick:"onUnpostConfirmation",onSuccess:er,disabled:!X||!ee}],eo=(e,a,t,l)=>{if(!e||!a)return{};let n=new Date(e),r=new Date(a),s=new Date(r.getFullYear(),r.getMonth(),l),d=n.getMonth(),o=n.getFullYear();return t>n.getDate()&&(d-=1)<0&&(d=11,o-=1),{taStartDate:new Date(o,d,t),taEndDate:s}};return(0,l.jsx)(f.Z,{resourceId:h.i.PayrollHeader,form:K,maxAccess:$,editMode:X,actions:ed,functionId:v.J.PayrollList,disabledSubmit:ee,children:(0,l.jsx)(x.R,{children:(0,l.jsx)(I.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{endpointId:C.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(v.J.PayrollList),name:"dtId",label:G.docType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:X,valueField:"recordId",displayField:["reference","name"],values:K.values,maxAccess:$,onChange:async(e,a)=>{await z(a),K.setFieldValue("dtId",(null==a?void 0:a.recordId)||null)},error:K.touched.dtId&&!!K.errors.dtId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"reference",label:G.reference,value:null==K?void 0:null===(Z=K.values)||void 0===Z?void 0:Z.reference,maxAccess:!X&&$,readOnly:X,onChange:K.handleChange,onClear:()=>K.setFieldValue("reference",""),error:K.touched.reference&&!!K.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.Z,{name:"date",required:!0,label:G.date,value:null==K?void 0:null===(N=K.values)||void 0===N?void 0:N.date,maxAccess:$,readOnly:ee,onChange:K.setFieldValue,onClear:()=>K.setFieldValue("date",null),error:K.touched.date&&!!K.errors.date})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{endpointId:m.m.FiscalYear.qry,name:"fiscalYear",label:G.fiscalYear,valueField:"fiscalYear",displayField:"fiscalYear",values:K.values,readOnly:ee,required:!0,maxAccess:$,onChange:(e,a)=>{K.setFieldValue("fiscalYear",(null==a?void 0:a.fiscalYear)||null)},error:K.touched.fiscalYear&&!!K.errors.fiscalYear})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{datasetId:S.v.SALARY_TYPE,name:"salaryType",label:G.salaryType,valueField:"key",displayField:"value",values:K.values,maxAccess:$,readOnly:!0,onChange:(e,a)=>K.setFieldValue("salaryType",(null==a?void 0:a.key)||null),error:K.touched.salaryType&&!!K.errors.salaryType})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{endpointId:m.m.Period.qry,parameters:K.values.fiscalYear&&K.values.salaryType&&"_year=".concat(K.values.fiscalYear,"&_salaryType=").concat(K.values.salaryType,"&_status=0"),name:"periodId",label:G.period,valueField:"periodId",required:!0,displayField:"periodName",values:K.values,readOnly:ee,maxAccess:$,onChange:(e,a)=>K.setFieldValue("periodId",(null==a?void 0:a.periodId)||null),error:K.touched.periodId&&!!K.errors.periodId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.Z,{name:"payDate",required:!0,label:G.payDate,value:null==K?void 0:null===(F=K.values)||void 0===F?void 0:F.payDate,maxAccess:$,readOnly:ee,onChange:(e,a)=>{if(a&&5===K.values.salaryType){let e=new Date(a),t=new Date(e.getFullYear(),e.getMonth(),1),l=new Date(e.getFullYear(),e.getMonth()+1,0),n=l.getTime()-t.getTime();if(K.setFieldValue("calendarDays",n/864e5+1),K.setFieldValue("startDate",t),K.setFieldValue("endDate",l),K.setFieldTouched("startDate",!1,!1),K.setFieldTouched("endDate",!1,!1),H&&U){let{taStartDate:e,taEndDate:a}=eo(t,l,H,U);K.setFieldValue("taStartDate",e),K.setFieldValue("taEndDate",a)}}K.setFieldValue("payDate",a)},onClear:()=>{K.setFieldValue("payDate",null),K.setFieldValue("calendarDays",""),K.setFieldValue("startDate",null),K.setFieldValue("endDate",null),K.setFieldValue("taStartDate",null),K.setFieldValue("taEndDate",null)},error:K.touched.payDate&&!!K.errors.payDate})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.Z,{name:"startDate",label:G.startDate,value:null==K?void 0:null===(k=K.values)||void 0===k?void 0:k.startDate,maxAccess:$,readOnly:!0,required:!0,onChange:K.setFieldValue,onClear:()=>K.setFieldValue("startDate",null),error:K.touched.startDate&&!!K.errors.startDate})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.Z,{name:"endDate",label:G.endDate,value:null==K?void 0:null===(O=K.values)||void 0===O?void 0:O.endDate,onChange:K.setFieldValue,maxAccess:$,readOnly:!0,required:!0,onClear:()=>K.setFieldValue("endDate",null),error:K.touched.endDate&&!!K.errors.endDate})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.Z,{name:"taStartDate",label:G.taStartDate,value:null==K?void 0:null===(A=K.values)||void 0===A?void 0:A.taStartDate,onChange:K.setFieldValue,maxAccess:$,readOnly:!0,onClear:()=>K.setFieldValue("taStartDate",null),error:K.touched.taStartDate&&!!K.errors.taStartDate})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(b.Z,{name:"taEndDate",label:G.taEndDate,value:null==K?void 0:null===(V=K.values)||void 0===V?void 0:V.taEndDate,onChange:K.setFieldValue,maxAccess:$,readOnly:!0,onClear:()=>K.setFieldValue("taEndDate",null),error:K.touched.taEndDate&&!!K.errors.taEndDate})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{name:"calendarDays",label:G.calendarDays,value:K.values.calendarDays,onChange:K.handleChange,onClear:()=>K.setFieldValue("calendarDays",""),readOnly:!0,maxAccess:$,error:K.touched.calendarDays&&!!K.errors.calendarDays})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(q.Z,{name:"notes",label:G.notes,value:K.values.notes,maxAccess:$,readOnly:ee,rows:3,maxLength:"128",onChange:e=>K.setFieldValue("notes",e.target.value),onClear:()=>K.setFieldValue("notes",""),error:K.touched.notes&&!!K.errors.notes})})]})})})})}P.width=850,P.height=700},73470:function(e,a,t){"use strict";t.d(a,{Z:function(){return T}});var l=t(52322),n=t(89330),r=t(39812),s=t(60218),d=t(2784),o=t(48601),i=t(82737),c=t(62202),u=t(65950),m=t(71987),v=t(26612),p=t(5088),y=t(21581),h=t(8661),f=t(7121),x=t(27423),I=t(62362),g=t(31389),C=t(91406),D=t(80983),b=t(19473),S=t(92407),R=t(75991),q=t(68676),w=t(96026),j=t(21326),P=t(50023);function T(e){var a,t,T,Z,N,F,k,O,A;let{recordId:V,window:_}=e,{getRequest:L,postRequest:M}=(0,d.useContext)(u.$),{platformLabels:E}=(0,d.useContext)(b.l),{stack:B}=(0,w.V)(),{labels:J,access:H}=(0,P.Z)({datasetId:v.i.ResignationRequest,editMode:!!V});(0,j.Z)({title:J.ResignationReq,window:_});let U=(0,m.E)({endpointId:S.y.ResignationRequest.page}),{formik:Y}=(0,D.c)({maxAccess:H,initialValues:{recordId:V||null,reference:"",date:new Date,effectiveDate:null,employeeId:null,department:null,position:null,branch:null,hireDate:null,serviceDuration:null,netSalary:null,explanation:"",status:1,wip:1,reasonId:null,releaseStatus:null},validateOnChange:!0,validationSchema:o.Ry({employeeId:o.Rx().required(),effectiveDate:o.hT().required(),date:o.hT().required(),reasonId:o.Rx().required()}),onSubmit:async e=>{let{hireDate:a,department:t,position:l,branch:n,serviceDuration:s,netSalary:d,...o}=e;M({extension:S.y.ResignationRequest.set,record:JSON.stringify({...o,date:(0,r.OZ)(new Date(e.date)),effectiveDate:(0,r.OZ)(new Date(e.effectiveDate))})}).then(async e=>{c.ZP.success(V?E.Edited:E.Added),Y.setFieldValue("recordId",e.recordId),await G(e.recordId),U()})}});function G(e){L({extension:S.y.ResignationRequest.get,parameters:"_recordId=".concat(e)}).then(e=>{!function(e){L({extension:S.y.QuickView.get,parameters:"_recordId=".concat(null==e?void 0:e.employeeId,"&_asOfDate=").concat((0,r.Uf)((0,r.a1)(null==e?void 0:e.date)))}).then(a=>{var t,l,n,s,d,o;Y.setValues({...Y.values,...e,effectiveDate:(0,r.a1)(null==e?void 0:e.effectiveDate),date:(0,r.a1)(null==e?void 0:e.date),hireDate:(0,r.a1)(null==a?void 0:null===(t=a.record)||void 0===t?void 0:t.hireDate),department:null==a?void 0:null===(l=a.record)||void 0===l?void 0:l.departmentName,position:null==a?void 0:null===(n=a.record)||void 0===n?void 0:n.positionName,branch:null==a?void 0:null===(s=a.record)||void 0===s?void 0:s.branchName,serviceDuration:null==a?void 0:null===(d=a.record)||void 0===d?void 0:d.serviceDuration,netSalary:null==a?void 0:null===(o=a.record)||void 0===o?void 0:o.salary})})}(e.record)})}async function W(e){if(e){var a;await L({extension:S.y.QuickView.get,parameters:"_recordId=".concat(e,"&_asOfDate=").concat((0,r.Uf)(null==Y?void 0:null===(a=Y.values)||void 0===a?void 0:a.date))}).then(e=>{var a,t,l,n,s,d;Y.setFieldValue("hireDate",(0,r.a1)(null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.hireDate)||null),Y.setFieldValue("department",(null==e?void 0:null===(t=e.record)||void 0===t?void 0:t.departmentName)||null),Y.setFieldValue("position",(null==e?void 0:null===(l=e.record)||void 0===l?void 0:l.positionName)||null),Y.setFieldValue("branch",(null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.branchName)||null),Y.setFieldValue("serviceDuration",(null==e?void 0:null===(s=e.record)||void 0===s?void 0:s.serviceDuration)||null),Y.setFieldValue("netSalary",(null==e?void 0:null===(d=e.record)||void 0===d?void 0:d.salary)||0)})}else Y.setFieldValue("hireDate",null),Y.setFieldValue("department",null),Y.setFieldValue("position",null),Y.setFieldValue("branch",null),Y.setFieldValue("serviceDuration",null),Y.setFieldValue("netSalary",null)}let Q=!!Y.values.recordId,$=2===Y.values.wip;async function z(){var e,a;let{hireDate:t,department:l,position:n,branch:s,serviceDuration:d,netSalary:o,...i}=null==Y?void 0:Y.values;await M({extension:S.y.ResignationRequest.reopen,record:JSON.stringify({...i,date:(0,r.OZ)(new Date(null==Y?void 0:null===(e=Y.values)||void 0===e?void 0:e.date)),effectiveDate:(0,r.OZ)(new Date(null==Y?void 0:null===(a=Y.values)||void 0===a?void 0:a.effectiveDate))})}).then(()=>{var e;c.ZP.success(E.Reopened),U(),G(null==Y?void 0:null===(e=Y.values)||void 0===e?void 0:e.recordId)})}let K=[{key:"Close",condition:!$,onClick:async function(){var e,a;let{hireDate:t,department:l,position:n,branch:s,serviceDuration:d,netSalary:o,...i}=null==Y?void 0:Y.values;await M({extension:S.y.ResignationRequest.close,record:JSON.stringify({...i,date:(0,r.OZ)(new Date(null==Y?void 0:null===(e=Y.values)||void 0===e?void 0:e.date)),effectiveDate:(0,r.OZ)(new Date(null==Y?void 0:null===(a=Y.values)||void 0===a?void 0:a.effectiveDate))})}).then(()=>{var e;c.ZP.success(E.Closed),U(),G(null==Y?void 0:null===(e=Y.values)||void 0===e?void 0:e.recordId)})},disabled:$||!Q},{key:"Reopen",condition:$,onClick:async function(){var e,a;(null==Y?void 0:null===(e=Y.values)||void 0===e?void 0:e.releaseStatus)?await L({extension:q.y.ReleaseIndicator.get,parameters:"_recordId=".concat(null==Y?void 0:null===(a=Y.value)||void 0===a?void 0:a.releaseStatus)}).then(e=>{var a;(null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.isReleased)?B({message:J.documentReleasedError}):z()}):z()},disabled:!$||!Q},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!$}];return(0,d.useEffect)(()=>{V&&G(V)},[]),(0,l.jsx)(i.Z,{resourceId:v.i.ResignationRequest,functionId:f.J.ResignationRequest,form:Y,maxAccess:H,actions:K,editMode:Q,isClosed:$,disabledSubmit:$,children:(0,l.jsx)(g.R,{children:(0,l.jsx)(I.Q,{children:(0,l.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(s.ZP,{item:!0,xs:6,children:(0,l.jsx)(p.Z,{name:"reference",label:J.reference,value:null==Y?void 0:null===(a=Y.values)||void 0===a?void 0:a.reference,maxAccess:H,readOnly:!Q||$,onChange:Y.handleChange,onClear:()=>Y.setFieldValue("reference",""),error:Y.touched.reference&&!!Y.errors.reference})}),(0,l.jsx)(s.ZP,{item:!0,xs:6,children:(0,l.jsx)(n.Z,{name:"effectiveDate",required:!0,label:J.effectiveDate,value:null==Y?void 0:null===(t=Y.values)||void 0===t?void 0:t.effectiveDate,onChange:Y.setFieldValue,readOnly:$,maxAccess:H,onClear:()=>Y.setFieldValue("effectiveDate",null),error:Y.touched.effectiveDate&&!!Y.errors.effectiveDate})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.U,{endpointId:S.y.Employee.snapshot,parameters:{_branchId:0},required:!0,form:Y,filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeRef",readOnly:$,label:J.employee,secondFieldLabel:J.name,secondDisplayField:!0,secondValue:Y.values.employeeName,onChange:(e,a)=>{Y.setFieldValue("employeeId",(null==a?void 0:a.recordId)||null),Y.setFieldValue("employeeRef",(null==a?void 0:a.reference)||null),Y.setFieldValue("employeeName",(null==a?void 0:a.fullName)||null),W(null==a?void 0:a.recordId)},error:Y.touched.employeeId&&!!Y.errors.employeeId})}),(0,l.jsx)(s.ZP,{item:!0,xs:6,children:(0,l.jsx)(n.Z,{name:"date",required:!0,readOnly:$,label:J.date,value:null==Y?void 0:null===(T=Y.values)||void 0===T?void 0:T.date,onChange:Y.setFieldValue,maxAccess:H,onClear:()=>Y.setFieldValue("date",null),error:Y.touched.date&&!!Y.errors.date})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsxs)(R.Z,{title:J.jobInfo,children:[(0,l.jsx)(s.ZP,{item:!0,xs:6,children:(0,l.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"department",label:J.department,value:null==Y?void 0:null===(Z=Y.values)||void 0===Z?void 0:Z.department,maxAccess:H,readOnly:!0})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"position",label:J.position,value:null==Y?void 0:null===(N=Y.values)||void 0===N?void 0:N.position,maxAccess:H,readOnly:!0})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"branch",label:J.branch,value:null==Y?void 0:null===(F=Y.values)||void 0===F?void 0:F.branch,maxAccess:H,readOnly:!0})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(n.Z,{name:"hireDate",label:J.hireDate,value:null==Y?void 0:null===(k=Y.values)||void 0===k?void 0:k.hireDate,readOnly:!0,maxAccess:H})})]})}),(0,l.jsx)(s.ZP,{item:!0,xs:6,children:(0,l.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"serviceDuration",label:J.YIS,value:null==Y?void 0:null===(O=Y.values)||void 0===O?void 0:O.serviceDuration,maxAccess:H,readOnly:!0})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"netSalary",label:J.netSalary,value:null==Y?void 0:null===(A=Y.values)||void 0===A?void 0:A.netSalary,maxAccess:H,readOnly:!0})})]})})]})}),(0,l.jsx)(s.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{endpointId:S.y.TerminationReasons.qry,name:"reasonId",label:J.reason,valueField:"recordId",required:!0,displayField:"name",readOnly:$,values:Y.values,onChange:(e,a)=>{Y.setFieldValue("reasonId",(null==a?void 0:a.recordId)||null)},error:Y.touched.reasonId&&!!Y.errors.reasonId,maxAccess:H})}),(0,l.jsx)(s.ZP,{item:!0,xs:7,children:(0,l.jsx)(y.Z,{name:"explanation",label:J.explanation,value:Y.values.explanation,rows:3,readOnly:$,maxAccess:H,onChange:e=>Y.setFieldValue("explanation",e.target.value),onClear:()=>Y.setFieldValue("explanation",""),error:Y.touched.explanation&&!!Y.errors.explanation})})]})})})})}T.width=850,T.height=630},58583:function(e,a,t){"use strict";t.d(a,{Z:function(){return T}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(65950),c=t(71987),u=t(26612),m=t(5088),v=t(31389),p=t(80983),y=t(8661),h=t(89330),f=t(39812),x=t(7121),I=t(98345),g=t(19473),C=t(21581),D=t(27423),b=t(92407),S=t(6035),R=t(28298),q=t(28879),w=t.n(q),j=t(21326),P=t(50023);function T(e){var a,t,q,T,Z;let{recordId:N,window:F}=e,{platformLabels:k}=(0,r.useContext)(g.l),{getRequest:O,postRequest:A}=(0,r.useContext)(i.$),{labels:V,access:_}=(0,P.Z)({datasetId:u.i.ShiftLeave,editMode:!!N});(0,j.Z)({title:V.duringShiftLeave,window:F});let{maxAccess:L}=(0,I.H)({functionId:x.J.DuringShiftLeave,access:_,enabled:!N}),M=(0,c.E)({endpointId:S.f.ShitLeave.page}),{formik:E}=(0,p.c)({initialValues:{recordId:null,employeeId:null,employeeRef:"",employeeName:"",reference:"",date:new Date,leaveDate:null,reasonId:null,fromTime:null,toTime:null,realDuration:null,destination:null,notes:"",status:1,wip:1,departmentRef:"",departmentName:"",reportToRef:"",reportToName:"",departmentHeadName:"",departmentHeadRef:"",position:"",schedule:""},maxAccess:L,validateOnChange:!0,validationSchema:s.Ry({employeeId:s.Rx().required(),reasonId:s.Rx().required(),duration:s.Z_().required(),destination:s.Z_().required(),leaveDate:s.hT().required(),fromTime:s.Z_().required(),toTime:s.Z_().required()}),onSubmit:async e=>{let{date:a,leaveDate:t,fromTime:l,toTime:n,returnTime:r,statusName:s,rsName:d,wipName:i,employeeRef:c,employeeName:u,departmentRef:m,departmentName:v,reportToRef:p,reportToName:y,departmentHeadName:h,departmentHeadRef:x,position:I,schedule:g,...C}=e,D=await A({extension:S.f.ShitLeave.set,record:JSON.stringify({...C,date:(0,f.ku)(a),leaveDate:(0,f.ku)(t),fromTime:w()(l).format("HH:mm"),toTime:w()(n).format("HH:mm"),returnTime:w()(r).format("HH:mm")})});o.ZP.success(e.recordId?k.Edited:k.Added),eu(D.recordId),M()}}),B=!!(null===(a=E.values)||void 0===a?void 0:a.recordId),J=(null==E?void 0:null===(t=E.values)||void 0===t?void 0:t.wip)===2,{date:H,leaveDate:U,fromTime:Y,toTime:G,returnTime:W,statusName:Q,rsName:$,wipName:z,employeeRef:K,employeeName:X,departmentRef:ee,departmentName:ea,reportToRef:et,reportToName:el,departmentHeadName:en,departmentHeadRef:er,position:es,schedule:ed,...eo}=E.values,ei=async()=>{await A({extension:S.f.ShitLeave.close,record:JSON.stringify({...eo,date:(0,f.ku)(H),leaveDate:(0,f.ku)(U),fromTime:w()(Y).format("HH:mm"),toTime:w()(G).format("HH:mm"),returnTime:w()(W).format("HH:mm")})}),o.ZP.success(k.Closed),eu(E.values.recordId),M()},ec=async()=>{await A({extension:S.f.ShitLeave.reopen,record:JSON.stringify({...eo,date:(0,f.ku)(H),leaveDate:(0,f.ku)(U),fromTime:w()(Y).format("HH:mm"),toTime:w()(G).format("HH:mm"),returnTime:w()(W).format("HH:mm")})}),o.ZP.success(k.Reopened),eu(E.values.recordId),M()};async function eu(e){var a;let{record:t}=await O({extension:S.f.ShitLeave.get,parameters:"_recordId=".concat(e)});return E.setValues({...t,date:(0,f.a1)(t.date),leaveDate:(0,f.a1)(t.leaveDate),fromTime:w()(t.fromTime,"HH:mm"),toTime:w()(t.toTime,"HH:mm"),returnTime:(null==t?void 0:null===(a=t.returnTime)||void 0===a?void 0:a.trim())?w()(null==t?void 0:t.returnTime,"HH:mm"):null}),ey(t.employeeId),t}(0,r.useEffect)(()=>{N&&eu(N)},[]);let em=[{key:"Close",condition:!J,onClick:ei,disabled:J||!B},{key:"Reopen",condition:J,onClick:ec,disabled:!J},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!J}],ev=e=>{let a=new Date(e),t=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return"".concat(t).concat(l).concat(n)};(0,r.useEffect)(()=>{!async function(){if(E.values.leaveDate&&E.values.employeeId){let{list:e}=await O({extension:S.f.FlatSchedule.qry,parameters:"_params=1|"+E.values.employeeId+"^2|"+ev(E.values.leaveDate)+"^3|"+ev(E.values.leaveDate)}),a=null==e?void 0:e.map(e=>{let a=w()((0,f.a1)(e.dtFrom)).format("HH:mm"),t=w()((0,f.a1)(e.dtTo)).format("HH:mm");return"[".concat(a,"..").concat(t,"]")}).join(" ");E.setFieldValue("schedule",a)}}()},[E.values.employeeId,E.values.leaveDate]),(0,r.useEffect)(()=>{let e=ep(w()(E.values.fromTime).format("HH:mm"),w()(E.values.toTime).format("HH:mm"));E.setFieldValue("duration",e||0)},[E.values.fromTime,E.values.toTime]),(0,r.useEffect)(()=>{if(E.values.returnTime){let e=ep(w()(E.values.fromTime).format("HH:mm"),w()(E.values.returnTime).format("HH:mm"));E.setFieldValue("realDuration",e||0)}else E.setFieldValue("realDuration",null)},[E.values.fromTime,E.values.returnTime]);let ep=(e,a)=>{if(!e||!a||"Invalid Date"===a||"Invalid Date"===e)return;let[t,l]=e.split(":").map(Number),[n,r]=a.split(":").map(Number),s=new Date(0,0,0,t,l),d=(new Date(0,0,0,n,r)-s)/6e4;return d<0&&(d+=1440),Number((d/60).toFixed(2))};async function ey(e){if(e){let{record:a}=await O({extension:b.y.QuickView.get,parameters:"_recordId=".concat(e,"&_asOfDate=").concat((0,f.Uf)(E.values.date))});E.setFieldValue("departmentRef",null==a?void 0:a.departmentRef),E.setFieldValue("departmentName",null==a?void 0:a.departmentName),E.setFieldValue("departmentHeadRef",null==a?void 0:a.departmentHeadRef),E.setFieldValue("departmentHeadName",null==a?void 0:a.departmentHeadName),E.setFieldValue("reportToRef",null==a?void 0:a.reportToRef),E.setFieldValue("reportToName",null==a?void 0:a.reportToName),E.setFieldValue("position","".concat((null==a?void 0:a.positionName)||"").concat((null==a?void 0:a.positionRef)?" ".concat(a.positionRef):""))}}return(0,l.jsx)(d.Z,{form:E,resourceId:u.i.ShiftLeave,functionId:x.J.DuringShiftLeave,maxAccess:L,editMode:B,previewReport:B,actions:em,disabledSubmit:J,children:(0,l.jsx)(v.R,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:8,children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(m.Z,{name:"reference",label:V.ref,value:E.values.reference,maxAccess:L,maxLength:"30",readOnly:B,onChange:E.handleChange,onClear:()=>E.setFieldValue("reference",""),error:E.touched.reference&&!!E.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:6}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"date",label:V.date,value:E.values.date,onChange:E.setFieldValue,maxAccess:_,readOnly:!0,onClear:()=>E.setFieldValue("date",""),error:E.touched.date&&!!E.errors.date})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.U,{endpointId:b.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:J,label:V.employee,secondFieldLabel:V.employee,form:E,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:L,onChange:async(e,a)=>{await ey(null==a?void 0:a.recordId),E.setFieldValue("employeeRef",(null==a?void 0:a.reference)||""),E.setFieldValue("employeeName",(null==a?void 0:a.fullName)||""),E.setFieldValue("employeeId",(null==a?void 0:a.recordId)||null)},errorCheck:"employeeId"})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.U,{name:"department",readOnly:!0,label:V.department,secondFieldLabel:V.department,form:E,valueShow:"departmentRef",secondValueShow:"departmentName",maxAccess:L})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.U,{name:"reportTo",readOnly:!0,label:V.reportTo,secondFieldLabel:V.reportTo,form:E,valueShow:"reportToRef",secondValueShow:"reportToName",maxAccess:L})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.U,{name:"depManager",readOnly:!0,label:V.depManager,secondFieldLabel:V.depManager,form:E,valueShow:"departmentHeadRef",secondValueShow:"departmentHeadName",maxAccess:L})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(m.Z,{name:"position",label:V.empPosition,value:E.values.position,readOnly:!0,maxAccess:L})}),(0,l.jsx)(n.ZP,{item:!0,xs:6}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(m.Z,{name:"schedule",label:V.schedule,value:E.values.schedule,readOnly:!0,maxAccess:L})})]})}),(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{name:"leaveDate",label:V.dateOfLeave,value:null===(q=E.values)||void 0===q?void 0:q.leaveDate,required:!0,readOnly:J,onBlur:(e,a)=>{E.setFieldValue("leaveDate",a||null)},onAccept:e=>{E.setFieldValue("leaveDate",e||null)},onClear:()=>E.setFieldValue("leaveDate",null),error:E.touched.leaveDate&&!!E.errors.leaveDate,maxAccess:L})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{label:V.from,name:"fromTime",required:!0,use24Hour:!0,readOnly:J,value:E.values.fromTime,onChange:E.setFieldValue,onClear:()=>E.setFieldValue("fromTime",""),maxAccess:L,error:E.touched.fromTime&&!!E.errors.fromTime})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{label:V.to,name:"toTime",readOnly:J,use24Hour:!0,required:!0,value:E.values.toTime,onChange:E.setFieldValue,onClear:()=>E.setFieldValue("toTime",""),maxAccess:L,error:E.touched.toTime&&!!E.errors.toTime})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{name:"duration",label:V.leaveDuration,value:E.values.duration,readOnly:!0,required:!0,maxAccess:L,error:E.touched.duration&&!!E.errors.duration})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(y.Z,{endpointId:S.f.DSLReason.qry,name:"reasonId",label:V.dsltype,valueField:"recordId",displayField:"name",required:!0,values:E.values,onChange:(e,a)=>{E.setFieldValue("reasonId",(null==a?void 0:a.recordId)||null)},readOnly:J,maxAccess:L,error:(null==E?void 0:null===(T=E.touched)||void 0===T?void 0:T.reasonId)&&!!(null==E?void 0:null===(Z=E.errors)||void 0===Z?void 0:Z.reasonId)})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(R.Z,{label:V.returnTime,name:"returnTime",use24Hour:!0,readOnly:J,value:E.values.returnTime,onChange:E.setFieldValue,onClear:()=>E.setFieldValue("returnTime",""),maxAccess:L,error:E.touched.returnTime&&!!E.errors.returnTime})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{name:"realDuration",label:V.duration,value:E.values.realDuration,readOnly:!0,maxAccess:L})})]})}),(0,l.jsx)(n.ZP,{item:!0,xs:8,children:(0,l.jsx)(m.Z,{name:"destination",label:V.destination,value:E.values.destination,onChange:E.handleChange,required:!0,maxLength:100,readOnly:J,maxAccess:L,onClear:()=>E.setFieldValue("destination",""),error:E.touched.destination&&!!E.errors.destination})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"notes",label:V.notes,value:E.values.notes,rows:2,readOnly:J,maxAccess:L,onChange:E.handleChange,onClear:()=>E.setFieldValue("notes",""),error:E.touched.notes&&!!E.errors.notes})})]})})})}T.width=1e3,T.height=500},86557:function(e,a,t){"use strict";t.d(a,{Z:function(){return k}});var l=t(52322),n=t(60218),r=t(5088),s=t(8661),d=t(82737),o=t(26612),i=t(65950),c=t(2784),u=t(48601),m=t(62202),v=t(71987),p=t(80983),y=t(19473),h=t(21581),f=t(6035),x=t(50023),I=t(21326),g=t(62362),C=t(31389),D=t(27423),b=t(92407),S=t(89330),R=t(84100),q=t(91406),w=t(39812),j=t(28879),P=t.n(j),T=t(10264),Z=t.n(T),N=t(3191),F=t(7121);function k(e){var a,t,j,T,k,O;let{recordId:A,window:V}=e,{getRequest:_,postRequest:L}=(0,c.useContext)(i.$),{platformLabels:M}=(0,c.useContext)(y.l),E=(0,c.useRef)([]);P().extend(Z());let{labels:B,access:J}=(0,x.Z)({datasetId:o.i.TimeVariation,editMode:!!A});(0,I.Z)({title:null==B?void 0:B.timeVariation,window:V});let H=(0,v.E)({endpointId:f.f.TimeVariation.page}),{formik:U}=(0,p.c)({maxAccess:J,initialValues:{recordId:A,reference:"",date:new Date,employeeId:null,dataSource:2,timeCode:20,clockDuration:X(0),duration:0,damageLevel:null,justification:"",releaseStatus:null,wip:1,status:1},validationSchema:u.Ry({employeeId:u.Rx().required(),date:u.hT().required(),timeCode:u.Rx().required(),damageLevel:u.Rx().required()}),onSubmit:async e=>{await L({extension:f.f.TimeVariation.gen,record:JSON.stringify({...e,clockDuration:0,date:(0,w.ku)(e.date)})}),m.ZP.success(e.recordId?M.Edited:M.Added),H(),V.close()}}),Y=!!U.values.recordId,G=2==U.values.wip,W=-1==U.values.status,Q=[{key:"Approval",condition:!0,onClick:"onApproval",disabled:!G},{key:"Close",condition:!G,onClick:"onCloseConfirmation",action:$,disabled:W||G||!Y},{key:"Reopen",condition:G,onClick:"onOpenConfirmation",action:z,disabled:W||!G||!Y},{key:"Cancel",condition:!0,onClick:K,disabled:!Y||G||W}];async function $(){var e;let a=await L({extension:f.f.TimeVariation.close,record:JSON.stringify({...U.values,date:(0,w.ku)(null===(e=U.values)||void 0===e?void 0:e.date),clockDuration:0})});m.ZP.success(M.Closed),H(),er(a.recordId)}async function z(){var e;let a=await L({extension:f.f.TimeVariation.reopen,record:JSON.stringify({...U.values,date:(0,w.ku)(null===(e=U.values)||void 0===e?void 0:e.date),clockDuration:0})});m.ZP.success(M.Reopened),H(),er(a.recordId)}async function K(){var e;let a=await L({extension:f.f.TimeVariation.cancel,record:JSON.stringify({...U.values,date:(0,w.ku)(null===(e=U.values)||void 0===e?void 0:e.date),clockDuration:0})});m.ZP.success(M.Cancelled),H(),er(a.recordId)}function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0==e)return"00:00";let a=Math.abs(e),t=String(Math.floor(a/60)).padStart(2,"0"),l=String(a%60).padStart(2,"0");return(e<0?"-":"")+"".concat(t,":").concat(l)}async function ee(e,a){let{list:t}=await _({extension:f.f.FlatSchedule.qry,parameters:"_params=1|"+e+"^2|"+P()(a).format("YYYYMMDD")+"^3|"+P()(a).format("YYYYMMDD")}),l=null==t?void 0:t.map(e=>{let a=P().utc((0,w.a1)(e.dtFrom)).format("hh:mm A"),t=P().utc((0,w.a1)(e.dtTo)).format("hh:mm A");return{...e,dtRange:"".concat(a," - ").concat(t)}});return E.current=l||[],l||[]}async function ea(e,a,t){if(!e){el();return}let l=await ee(e,a);if(!(null==l?void 0:l.length)){el();return}let{recordId:n,duration:r}=l[0];20!=t&&(U.setFieldValue("shiftId",n),U.setFieldValue("duration",r),U.setFieldValue("clockDuration",X(r)))}async function et(e){var a;if(!e){U.setFieldValue("terminationDate",null);return}let t=await _({extension:b.y.QuickView.get,parameters:"_recordId=".concat(e,"&_asOfDate=").concat((0,w.uQ)(new Date))});U.setFieldValue("terminationDate",(null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.terminationDate)||null)}function el(){U.setFieldValue("shiftId",null),U.setFieldValue("duration",0),U.setFieldValue("clockDuration",X(0))}async function en(e){if(e)return await _({extension:f.f.TimeVariation.get,parameters:"_recordId=".concat(e)})}async function er(e){var a,t;let l=await en(e);U.setValues({...l.record,date:(0,w.a1)(null==l?void 0:null===(a=l.record)||void 0===a?void 0:a.date),clockDuration:X(null==l?void 0:null===(t=l.record)||void 0===t?void 0:t.duration)})}return(0,c.useEffect)(()=>{!async function(){if(A){var e,a,t,l;let n=await en(A);await ee(null==n?void 0:null===(e=n.record)||void 0===e?void 0:e.employeeId,(0,w.a1)(null==n?void 0:null===(a=n.record)||void 0===a?void 0:a.date)),U.setValues({...n.record,date:(0,w.a1)(null==n?void 0:null===(t=n.record)||void 0===t?void 0:t.date),clockDuration:X(null==n?void 0:null===(l=n.record)||void 0===l?void 0:l.duration)})}}()},[]),(0,l.jsx)(d.Z,{form:U,resourceId:o.i.TimeVariation,maxAccess:J,editMode:Y,actions:Q,isCleared:!1,functionId:F.J.TimeVariation,disabledSubmit:W||G,children:(0,l.jsx)(C.R,{children:(0,l.jsx)(g.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(r.Z,{name:"reference",label:null==B?void 0:B.reference,value:null===(a=U.values)||void 0===a?void 0:a.reference,readOnly:!0,maxAccess:J,onChange:U.handleChange,onClear:()=>U.setFieldValue("reference",""),error:U.touched.reference&&!!U.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.U,{endpointId:b.y.Employee.snapshot,parameters:{_branchId:0},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:W||G,label:B.employee,form:U,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:J,onChange:async(e,a)=>{await ea(null==a?void 0:a.recordId,U.values.date,U.values.timeCode),await et(null==a?void 0:a.recordId),U.setFieldValue("employeeRef",(null==a?void 0:a.reference)||""),U.setFieldValue("employeeName",(null==a?void 0:a.fullName)||""),U.setFieldValue("employeeId",(null==a?void 0:a.recordId)||null)},errorCheck:"employeeId"})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(S.Z,{name:"date",required:!0,label:B.date,value:null===(t=U.values)||void 0===t?void 0:t.date,onChange:async(e,a)=>{var t,l;await ea(null===(t=U.values)||void 0===t?void 0:t.employeeId,a,null===(l=U.values)||void 0===l?void 0:l.timeCode),U.setFieldValue("date",a)},onClear:()=>{el(),U.setFieldValue("date",null)},error:U.touched.date&&!!U.errors.date,maxAccess:J,readOnly:W||G})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(s.Z,{datasetId:R.v.TIME_CODE,name:"timeCode",readOnly:W||Y,label:B.timeCode,valueField:"key",displayField:"value",required:!0,values:U.values,maxAccess:J,onChange:async(e,a)=>{var t,l;a&&(null==a?void 0:a.key)!=20||el(),await ea(null===(t=U.values)||void 0===t?void 0:t.employeeId,null===(l=U.values)||void 0===l?void 0:l.date,null==a?void 0:a.key),U.setFieldValue("timeCode",(null==a?void 0:a.key)||null)},error:U.touched.timeCode&&!!U.errors.timeCode})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(N.Z,{name:"shiftId",label:B.shift,valueField:"recordId",displayField:"dtRange",store:null==E?void 0:E.current,value:U.values.shiftId,readOnly:W||G||(null===(j=U.values)||void 0===j?void 0:j.timeCode)==20,onChange:(e,a)=>U.setFieldValue("shiftId",(null==a?void 0:a.recordId)||null),error:U.touched.shiftId&&!!U.errors.shiftId,maxAccess:J})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(r.Z,{name:"clockDuration",label:null==B?void 0:B.clockDuration,value:null===(T=U.values)||void 0===T?void 0:T.clockDuration,readOnly:!0,onChange:U.handleChange,onClear:()=>U.setFieldValue("clockDuration",X(0)),error:U.touched.clockDuration&&!!U.errors.clockDuration,maxAccess:J})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(q.Z,{name:"duration",label:B.duration,value:U.values.duration,maxAccess:J,readOnly:W||G||(null===(k=U.values)||void 0===k?void 0:k.timeCode)==20||(null===(O=U.values)||void 0===O?void 0:O.timeCode)==21,min:20==U.values.timeCode||21==U.values.timeCode?0:1,onChange:U.handleChange,onClear:()=>U.setFieldValue("duration",null),error:U.touched.duration&&!!U.errors.duration})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(s.Z,{name:"damageLevel",label:B.damage,datasetId:R.v.DAMAGE_LEVEL,values:U.values,valueField:"key",displayField:"value",required:!0,readOnly:W||G,maxAccess:J,onChange:(e,a)=>U.setFieldValue("damageLevel",(null==a?void 0:a.key)||null),error:U.touched.damageLevel&&!!U.errors.damageLevel})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{name:"justification",label:B.justification,value:U.values.justification,rows:2,readOnly:W||G,maxAccess:J,onChange:U.handleChange,onClear:()=>U.setFieldValue("justification",""),error:U.touched.justification&&!!U.errors.justification})})]})})})})}k.width=550,k.height=550},84622:function(e,a,t){"use strict";t.d(a,{Z:function(){return O}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(65950),c=t(71987),u=t(26612),m=t(5088),v=t(31389),p=t(62362),y=t(80983),h=t(38449),f=t(8661),x=t(89330),I=t(39812),g=t(91406),C=t(7121),D=t(98345),b=t(19473),S=t(65215),R=t(76399),q=t(90587),w=t(33625),j=t(21581),P=t(27423),T=t(96026),Z=t(61802),N=t(9657),F=t(21326),k=t(50023);function O(e){var a,t,O,A,V,_,L,M,E,B,J,H,U,Y,G,W,Q,$,z,K,X,ee,ea,et,el,en,er,es;let{recordId:ed,window:eo}=e,{stack:ei}=(0,Z.zY)(),{platformLabels:ec}=(0,r.useContext)(b.l),{getRequest:eu,postRequest:em}=(0,r.useContext)(i.$),ev=(0,r.useRef)([]),{stack:ep}=(0,T.V)(),[ey,eh]=(0,r.useState)([]),[ef,ex]=(0,r.useState)(!1),{labels:eI,access:eg}=(0,k.Z)({datasetId:u.i.WorkCenterConsumptions,editMode:!!ed});(0,F.Z)({title:eI.workCenterConsumption,window:eo});let{documentType:eC,maxAccess:eD,changeDT:eb}=(0,D.H)({functionId:C.J.WorkCenterConsumption,access:eg,enabled:!ed,objectName:"header"}),eS=(0,c.E)({endpointId:q.u.WorkCenterConsumption.page});function eR(e){return("qty"===e?s.Rx().nullable().max(999999999.999," "):s.nK()).test(function(e){let{sku:a,qty:t,itemName:l}=this.parent;return!a&&!t&&!l||!!e})}let eq=s.Ry({itemName:eR("itemName"),sku:eR("sku"),qty:eR("qty")}),{formik:ew}=(0,y.c)({documentType:{key:"header.dtId",value:null==eC?void 0:eC.dtId,reference:null==eC?void 0:eC.reference},initialValues:{recordId:ed,header:{recordId:null,reference:"",dtId:null,date:new Date,plantId:null,siteId:null,workCenterId:null,WcRef:"",WcName:"",weight:0,totalQty:0,description:"",status:1,wip:1},items:[{id:1,seqNo:1,itemId:null,consumptionId:ed,qty:0,unitCost:0,muId:null,msId:null,itemName:"",totalCost:0,baseQty:null}]},maxAccess:eD,validateOnChange:!0,validationSchema:s.Ry({header:s.Ry({date:s.hT().required(),workCenterId:s.Rx().required()}),items:s.IX().of(eq)}),onSubmit:async e=>{var a;let{items:t,header:l}=e,n=null==t?void 0:null===(a=t.filter(e=>e.sku))||void 0===a?void 0:a.map((a,t)=>({...a,seqNo:t+1,consumptionId:e.recordId||0})),r=await em({extension:q.u.WorkCenterConsumption.set2,record:JSON.stringify({header:l,items:n})}),s=e.recordId?ec.Edited:ec.Added;o.ZP.success(s),eE(r.recordId),eS()}}),ej=!!(null===(a=ew.values)||void 0===a?void 0:a.recordId),eP=(null==ew?void 0:null===(O=ew.values)||void 0===O?void 0:null===(t=O.header)||void 0===t?void 0:t.status)===3,eT=(null==ew?void 0:null===(V=ew.values)||void 0===V?void 0:null===(A=V.header)||void 0===A?void 0:A.wip)===2,eZ=ew.values.items.reduce((e,a)=>e+(Number(null==a?void 0:a.totalCost)||0),0),eN=ef?ew.values.items.reduce((e,a)=>e+(Number(null==a?void 0:a.qty)||0),0):(null===(_=ew.values)||void 0===_?void 0:_.header.totalQty)||0,eF=async()=>await eu({extension:S.$.MeasurementUnit.qry,parameters:"_msId=0"});async function ek(e,a){if(!e)return;let t=(null==ey?void 0:ey.filter(e=>e.msId==a))||[];ev.current=t}let eO=async e=>{if(!e)return;let a=await eu({extension:q.u.WorkCenterConsumption.get,parameters:"_recordId=".concat(e)});return{...null==a?void 0:a.record,date:(0,I.a1)(null==a?void 0:a.record.date)}},eA=async e=>{var a;if(!e)return;let t=await eu({extension:q.u.ConsumptionItemView.qry,parameters:"_consumptionId=".concat(e)});return(null==t?void 0:null===(a=t.list)||void 0===a?void 0:a.length)>0?t.list.map((e,a)=>({...e,id:a+1,seqNo:a+1})):ew.values.items},eV=async()=>{await em({extension:q.u.WorkCenterConsumption.post,record:JSON.stringify(ew.values.header)}),o.ZP.success(ec.Posted),eS(),eo.close()},e_=async()=>{await em({extension:q.u.WorkCenterConsumption.unpost,record:JSON.stringify(ew.values.header)}),eE(ew.values.recordId),o.ZP.success(ec.Unposted),eS()},eL=async()=>{await em({extension:q.u.WorkCenterConsumption.close,record:JSON.stringify(ew.values.header)}),o.ZP.success(ec.Closed),eE(ew.values.recordId),eS()},eM=async()=>{await em({extension:q.u.WorkCenterConsumption.reopen,record:JSON.stringify(ew.values.header)}),o.ZP.success(ec.Reopened),eE(ew.values.recordId),eS()};async function eE(e){let a=await eO(e),t=await eA(e);ew.setValues({...ew.values,recordId:a.recordId,header:{...ew.values.header,...a},items:t})}let eB=async e=>{var a;let t=await eu({extension:S.$.CurrentCost.get,parameters:"_itemId=".concat(e)});return null==t?void 0:null===(a=t.record)||void 0===a?void 0:a.currentCost},eJ=[{component:"resourcelookup",label:eI.sku,name:"sku",props:{endpointId:S.$.Item.snapshot,valueField:"sku",displayField:"sku",mandatory:!0,readOnly:eT,displayFieldWidth:3,mapping:[{from:"recordId",to:"itemId"},{from:"msId",to:"msId"},{from:"sku",to:"sku"},{from:"name",to:"itemName"}],columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}]},async onChange(e){let{row:{update:a,newRow:t}}=e;if(!(null==t?void 0:t.itemId)){ev.current=[],a({muRef:null,muId:null,baseQty:0,muQty:0,qty:0,totalCost:0});return}if(t.isInactive){a({...ew.initialValues.items[0],id:t.id}),ep({message:eI.inactiveItem});return}if(null==t?void 0:t.itemId){var l,n,r,s,d,o,i,c;ek(null==t?void 0:t.itemId,t.msId),a({unitCost:((null==t?void 0:t.itemId)?await eB(null==t?void 0:t.itemId):0)||0,muRef:(null==ev?void 0:null===(n=ev.current)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.reference)||null,muId:(null==ev?void 0:null===(s=ev.current)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:r.recordId)||null,muQty:(null==ev?void 0:null===(o=ev.current)||void 0===o?void 0:null===(d=o[0])||void 0===d?void 0:d.qty)||0,baseQty:(null==ev?void 0:null===(c=ev.current)||void 0===c?void 0:null===(i=c[0])||void 0===i?void 0:i.qty)||(null==t?void 0:t.qty),qty:(null==t?void 0:t.qty)||0})}}},{component:"textfield",label:eI.itemName,name:"itemName",flex:2,props:{readOnly:!0}},{component:"resourcecombobox",label:eI.MU,name:"muRef",props:{store:null==ev?void 0:ev.current,displayField:"reference",valueField:"recordId",readOnly:eT,mapping:[{from:"reference",to:"muRef"},{from:"name",to:"muName"},{from:"qty",to:"muQty"},{from:"recordId",to:"muId"}]},async onChange(e){let{row:{update:a,newRow:t}}=e;ex(!0),t&&a(t.muId?{baseQty:(null==t?void 0:t.qty)?(null==t?void 0:t.qty)*(null==t?void 0:t.muQty):null==t?void 0:t.muQty}:{baseQty:0})},propsReducer(e){let{row:a,props:t}=e;return{...t,store:null==ev?void 0:ev.current}}},{component:"numberfield",name:"qty",label:eI.qty,async onChange(e){let{row:{update:a,newRow:t}}=e;ex(!0),a({totalCost:parseFloat((null==t?void 0:t.unitCost)*(null==t?void 0:t.qty)).toFixed(2),baseQty:(null==t?void 0:t.muQty)?(null==t?void 0:t.muQty)*(null==t?void 0:t.qty):null==t?void 0:t.qty})},props:{decimalScale:2,readOnly:eT}},{component:"numberfield",name:"unitCost",label:eI.unitCost,props:{decimalScale:2,readOnly:!0}},{component:"numberfield",name:"totalCost",label:eI.totalCost,props:{decimalScale:2,readOnly:!0}}];async function eH(){ei({Component:N.Z,props:{resourceId:u.i.WCConsumptionImport,access:eD,onSuccess:async e=>{var a;if(null==ew?void 0:null===(a=ew.values)||void 0===a?void 0:a.recordId){let e=await eO(null==ew?void 0:ew.values.recordId),a=await eA(null==ew?void 0:ew.values.recordId);ew.setValues({...ew.values,recordId:e.recordId,header:{...ew.values.header,...e},items:a}),eS()}}}})}let eU=[{key:"Locked",condition:eP,onClick:"onUnpostConfirmation",onSuccess:e_,disabled:!eT},{key:"Unlocked",condition:!eP,onClick:eV,disabled:!eT},{key:"Close",condition:!eT,onClick:eL,disabled:eT||!ej},{key:"Reopen",condition:eT,onClick:eM,disabled:!eT||eP},{key:"GL",condition:!0,onClick:"onClickGL",valuesPath:{...ew.values.header,notes:ew.values.header.description},datasetId:u.i.WorkCenterConsumptions,disabled:!ej},{key:"Import",condition:!0,onClick:eH,disabled:!ej||ew.values.items.some(e=>e.itemId)||eT}];return(0,r.useEffect)(()=>{ew.setFieldValue("header.totalQty",parseFloat(eN).toFixed(2)),ew.setFieldValue("header.totalCostField",parseFloat(eZ).toFixed(2))},[eN,eZ]),(0,r.useEffect)(()=>{!async function(){let e=await eF();eh(null==e?void 0:e.list),ed&&eE(ed)}()},[]),(0,l.jsx)(d.Z,{form:ew,resourceId:u.i.WorkCenterConsumptions,functionId:C.J.WorkCenterConsumption,maxAccess:eD,actions:eU,editMode:ej,previewReport:ej,disabledSubmit:eT,children:(0,l.jsxs)(v.R,{children:[(0,l.jsx)(w.g,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,xs:12,children:[(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{endpointId:h.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(C.J.WorkCenterConsumption),name:"header.dtId",label:eI.docType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:ej,valueField:"recordId",displayField:["reference","name"],values:ew.values.header,maxAccess:eD,onChange:(e,a)=>{ew.setFieldValue("header.dtId",(null==a?void 0:a.recordId)||null),eb(a)},error:(null===(L=ew.touched.header)||void 0===L?void 0:L.dtId)&&!!(null===(M=ew.errors.header)||void 0===M?void 0:M.dtId)})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{name:"header.reference",label:eI.reference,value:null==ew?void 0:null===(B=ew.values)||void 0===B?void 0:null===(E=B.header)||void 0===E?void 0:E.reference,maxAccess:!ej&&eD,readOnly:ej,onChange:ew.handleChange,onClear:()=>ew.setFieldValue("header.reference",""),error:(null===(J=ew.touched.header)||void 0===J?void 0:J.reference)&&!!(null===(H=ew.errors.header)||void 0===H?void 0:H.reference)})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{name:"header.date",required:!0,readOnly:eT,label:eI.date,value:null==ew?void 0:null===(Y=ew.values)||void 0===Y?void 0:null===(U=Y.header)||void 0===U?void 0:U.date,maxAccess:eD,onChange:ew.setFieldValue,onClear:()=>ew.setFieldValue("header.date",null),error:(null===(W=ew.touched)||void 0===W?void 0:null===(G=W.header)||void 0===G?void 0:G.date)&&!!(null===($=ew.errors)||void 0===$?void 0:null===(Q=$.header)||void 0===Q?void 0:Q.date)})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{endpointId:h.r.Plant.qry,name:"header.plantId",readOnly:eT,label:eI.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:ew.values.header,maxAccess:eD,onChange:(e,a)=>{ew.setFieldValue("header.plantId",(null==a?void 0:a.recordId)||null)},error:(null===(z=ew.touched.header)||void 0===z?void 0:z.plantId)&&!!(null===(K=ew.errors.header)||void 0===K?void 0:K.plantId)})})]})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(P.U,{endpointId:q.u.WorkCenter.snapshot,valueField:"reference",displayField:"name",name:"header.workCenterId",secondFieldLabel:eI.name,label:eI.workCenter,valueShow:"WcRef",secondValueShow:"WcName",maxAccess:eD,formObject:ew.values.header,form:ew,displayFieldWidth:2,required:!0,readOnly:eT,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"siteName",value:"Site Name"}],onSecondValueChange:(e,a)=>{ew.setFieldValue("header.WcName",a)},onChange:(e,a)=>{ew.setFieldValue("header.WcRef",(null==a?void 0:a.isInactive)?"":null==a?void 0:a.reference),ew.setFieldValue("header.WcName",(null==a?void 0:a.isInactive)?"":null==a?void 0:a.name),ew.setFieldValue("header.siteId",(null==a?void 0:a.isInactive)?null:null==a?void 0:a.siteId),ew.setFieldValue("header.siteRef",(null==a?void 0:a.isInactive)?"":null==a?void 0:a.siteRef),ew.setFieldValue("header.siteName",(null==a?void 0:a.isInactive)?"":null==a?void 0:a.siteName),ew.setFieldValue("header.workCenterId",(null==a?void 0:a.isInactive)?null:null==a?void 0:a.recordId),(null==a?void 0:a.isInactive)&&ep({message:eI.inactiveWorkCenter})},error:(null===(X=ew.touched.header)||void 0===X?void 0:X.workCenterId)&&!!(null===(ee=ew.errors.header)||void 0===ee?void 0:ee.workCenterId)})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(m.Z,{name:"header.siteRef",label:eI.siteRef,value:null===(ea=ew.values.header)||void 0===ea?void 0:ea.siteRef,readOnly:!0})}),(0,l.jsx)(n.ZP,{item:!0,xs:6,children:(0,l.jsx)(m.Z,{name:"header.reference",label:eI.siteName,value:null===(et=ew.values.header)||void 0===et?void 0:et.siteName,readOnly:!0,maxAccess:eD,error:(null===(el=ew.touched.header)||void 0===el?void 0:el.siteName)&&!!(null===(en=ew.errors.header)||void 0===en?void 0:en.siteName)})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(j.Z,{name:"header.description",label:eI.description,value:ew.values.header.description,rows:2.5,readOnly:eT,maxAccess:eD,onChange:e=>ew.setFieldValue("header.description",e.target.value),onClear:()=>ew.setFieldValue("header.description",""),error:(null===(er=ew.touched.header)||void 0===er?void 0:er.description)&&!!(null===(es=ew.errors.header)||void 0===es?void 0:es.description)})})]})})]})}),(0,l.jsx)(p.Q,{children:(0,l.jsx)(R._,{onChange:(e,a)=>{ew.setFieldValue("items",e),"delete"===a&&ex(!0)},onSelectionChange:(e,a,t)=>{"muRef"==t&&ek(null==e?void 0:e.itemId,null==e?void 0:e.msId)},value:ew.values.items,error:ew.errors.items,allowDelete:!eT,name:"items",columns:eJ,maxAccess:eD})}),(0,l.jsx)(w.g,{children:(0,l.jsx)(n.ZP,{container:!0,spacing:2,xs:12,children:(0,l.jsx)(n.ZP,{item:!0,xs:4,children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"totalQty",maxAccess:eD,label:eI.totalQty,value:eN,decimalScale:2,readOnly:!0})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(g.Z,{name:"totalCost",maxAccess:eD,label:eI.totalCost,value:eZ,decimalScale:2,readOnly:!0})})]})})})})]})})}O.width=1200,O.height=700},27603:function(e,a,t){"use strict";t.d(a,{Z:function(){return j}});var l=t(52322),n=t(60218),r=t(2784),s=t(48601),d=t(82737),o=t(62202),i=t(65950),c=t(71987),u=t(26612),m=t(5088),v=t(80983),p=t(62362),y=t(31389),h=t(19473),f=t(8661),x=t(92407),I=t(27423),g=t(70104),C=t(21581),D=t(89330),b=t(39812),S=t(98345),R=t(7121),q=t(21326),w=t(50023);function j(e){var a;let{recordId:t,window:j}=e,{getRequest:P,postRequest:T}=(0,r.useContext)(i.$),{platformLabels:Z}=(0,r.useContext)(h.l),{labels:N,access:F}=(0,w.Z)({datasetId:u.i.JobInfos,editMode:!!t});(0,q.Z)({title:N.jobInfo,window:j});let{maxAccess:k}=(0,S.H)({functionId:R.J.JobInfo,access:F,enabled:!t}),O=(0,c.E)({endpointId:x.y.JobInfo.page}),{formik:A}=(0,v.c)({initialValues:{recordId:null,reference:"",employeeId:null,employeeName:"",employeeRef:"",date:new Date,departmentId:null,branchId:null,divisionId:null,positionId:null,reportToId:null,reportToName:"",reportToRef:"",notes:"",status:1,wip:1},validateOnChange:!0,validationSchema:s.Ry({employeeId:s.Rx().required(),date:s.hT().max(new Date,"Date cannot be in the future").required(),departmentId:s.Rx().required(),branchId:s.Rx().required(),positionId:s.Rx().required()}),onSubmit:async e=>{await T({extension:x.y.JobInfo.set,record:JSON.stringify({...e,date:(0,b.ku)(e.date)})}),o.ZP.success(e.recordId?Z.Edited:Z.Added),j.close(),O()}}),V=!!A.values.recordId,_=2==A.values.wip;async function L(e){if(e){let a=await P({extension:x.y.JobInfo.get,parameters:"_recordId=".concat(e)});A.setValues({...a.record,date:(0,b.a1)(a.record.date)})}}(0,r.useEffect)(()=>{L(t)},[]);let M=[{key:"Close",condition:!_,onClick:async()=>{await T({extension:x.y.JobInfo.close,record:JSON.stringify({...A.values,date:(0,b.ku)(A.values.date)})}),o.ZP.success(Z.Closed),L(t),O()},disabled:_||!V},{key:"Reopen",condition:_,onClick:async()=>{await T({extension:x.y.JobInfo.reopen,record:JSON.stringify({...A.values,date:(0,b.ku)(A.values.date)})}),o.ZP.success(Z.Reopened),L(t),O()},disabled:!_},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!_}];return(0,l.jsx)(d.Z,{resourceId:u.i.JobInfos,functionId:R.J.JobInfo,form:A,maxAccess:k,editMode:V,actions:M,disabledSubmit:_,children:(0,l.jsx)(y.R,{children:(0,l.jsx)(p.Q,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(m.Z,{name:"reference",label:N.ref,value:A.values.reference,maxAccess:k,readOnly:V,maxLength:"30",onChange:A.handleChange,onClear:()=>A.setFieldValue("reference",""),error:A.touched.reference&&!!A.errors.reference})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.U,{endpointId:x.y.Employee.snapshot,parameters:{_branchId:0},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,displayFieldWidth:2,readOnly:_,label:N.employee,secondFieldLabel:N.employee,form:A,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:k,onChange:(e,a)=>{A.setFieldValue("employeeName",(null==a?void 0:a.fullName)||""),A.setFieldValue("employeeId",(null==a?void 0:a.recordId)||null)},errorCheck:"employeeId"})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(D.Z,{name:"date",label:N.date,value:null===(a=A.values)||void 0===a?void 0:a.date,readOnly:_,required:!0,max:new Date,onChange:A.setFieldValue,onClear:()=>A.setFieldValue("date",null),error:A.touched.date&&!!A.errors.date,maxAccess:k})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{endpointId:g.K.DepartmentFilters.qry,parameters:"_filter=&_size=1000&_startAt=0&_type=0&_activeStatus=0&_sortBy=recordId",name:"departmentId",label:N.department,values:A.values,columnsInDropDown:[{key:"departmentRef",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:_,displayField:["departmentRef","name"],maxAccess:k,onChange:(e,a)=>{A.setFieldValue("departmentId",(null==a?void 0:a.recordId)||null)},error:A.touched.departmentId&&!!A.errors.departmentId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{endpointId:g.K.BranchFilters.qry,name:"branchId",label:N.branch,columnsInDropDown:[{key:"branchRef",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["branchRef","name"],values:A.values,maxAccess:k,onChange:(e,a)=>{A.setFieldValue("branchId",(null==a?void 0:a.recordId)||null)},required:!0,readOnly:_,error:A.touched.branchId&&!!A.errors.branchId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{endpointId:g.K.DivisionFilters.qry,name:"divisionId",label:N.division,valueField:"recordId",displayField:"name",maxAccess:k,readOnly:_,values:A.values,onChange:(e,a)=>{A.setFieldValue("divisionId",(null==a?void 0:a.recordId)||null)},error:A.touched.divisionId&&!!A.errors.divisionId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{endpointId:g.K.CompanyPositions.qry,parameters:"_filter=&_size=1000&_startAt=0&_sortBy=recordId",name:"positionId",label:N.position,required:!0,valueField:"recordId",displayField:["positionRef","name"],columnsInDropDown:[{key:"positionRef",value:"Reference"},{key:"name",value:"Name"}],maxAccess:k,readOnly:_,values:A.values,onChange:(e,a)=>{A.setFieldValue("positionId",(null==a?void 0:a.recordId)||null)},error:A.touched.positionId&&!!A.errors.positionId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.U,{endpointId:x.y.Employee.snapshot,parameters:{_branchId:0},secondFieldLabel:N.reportsTo,valueField:"reference",displayField:"fullName",name:"reportToId",displayFieldWidth:2,label:N.reportsTo,form:A,readOnly:_,valueShow:"reportToRef",secondValueShow:"reportToName",maxAccess:k,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],onChange:(e,a)=>{A.setFieldValue("reportToName",(null==a?void 0:a.fullName)||""),A.setFieldValue("reportToId",(null==a?void 0:a.recordId)||null)},errorCheck:"reportToId"})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(C.Z,{name:"notes",label:N.notes,value:A.values.notes,rows:2,readOnly:_,maxAccess:k,onChange:A.handleChange,onClear:()=>A.setFieldValue("notes",""),error:A.touched.notes&&!!A.errors.notes})})]})})})})}j.width=600,j.height=520},30032:function(e,a,t){"use strict";t.d(a,{Z:function(){return Z}});var l=t(52322),n=t(89330),r=t(39812),s=t(60218),d=t(2784),o=t(48601),i=t(82737),c=t(62202),u=t(65950),m=t(71987),v=t(26612),p=t(5088),y=t(21581),h=t(8661),f=t(38449),x=t(7121),I=t(62362),g=t(31389),C=t(80983),D=t(19473),b=t(98345),S=t(61802),R=t(58912),q=t(76399),w=t(33625),j=t(39704),P=t(50023),T=t(21326);function Z(e){var a,t,Z,N,F,k,O,A,V,_,L,M;let{recordId:E,window:B}=e,{getRequest:J,postRequest:H}=(0,d.useContext)(u.$),{platformLabels:U}=(0,d.useContext)(D.l),{stack:Y}=(0,S.zY)(),{labels:G,access:W}=(0,P.Z)({datasetId:v.i.MaterialReqPlannings,editMode:!!E}),{documentType:Q,maxAccess:$,changeDT:z}=(0,b.H)({functionId:x.J.MRP,access:W,enabled:!E,objectName:"header"});(0,T.Z)({title:G.materialRequestPlaning,window:B});let K=(0,m.E)({endpointId:R.I.MatPlanning.page}),{formik:X}=(0,C.c)({maxAccess:$,documentType:{key:"header.dtId",value:null==Q?void 0:Q.dtId},initialValues:{recordId:E,header:{recordId:E,dtId:null,reference:"",date:new Date,notes:"",status:1,releaseStatus:null,wip:1},items:[]},validateOnChange:!0,validationSchema:o.Ry({header:o.Ry({date:o.hT().required()}),items:o.IX().of(o.Ry({qty:o.Rx().required()}))}),onSubmit:async e=>{let a=await H({extension:R.I.MatPlanning.set2,record:JSON.stringify({header:{...e.header,date:(0,r.ku)(e.header.date)},items:e.items})});c.ZP.success(e.recordId?U.Edited:U.Added),el(a.recordId),K()}}),ee=!!X.values.recordId,ea=4==X.values.header.status,et=2===X.values.header.wip;async function el(e){let{record:a}=await J({extension:R.I.MatPlanning.get,parameters:"_requestId=".concat(e)}),{list:t}=await J({extension:R.I.MatPlanningItem.qry,parameters:"_mrpId=".concat(e)});X.setValues({recordId:a.recordId,header:{...a,date:(0,r.a1)(null==a?void 0:a.date)},items:null==t?void 0:t.map((e,a)=>({...e,id:a+1,seqNo:a+1,date:(0,r.a1)(e.date)}))})}let en=[{key:"Reopen",condition:et,onClick:async function(){await H({extension:R.I.MatPlanning.reopen,record:JSON.stringify({...X.values.header,date:(0,r.ku)(X.values.header.date)})}),c.ZP.success(U.Reopened),K(),el(X.values.recordId)},disabled:!et},{key:"Close",condition:!et,onClick:async function(){await H({extension:R.I.MatPlanning.close,record:JSON.stringify({...X.values.header,date:(0,r.ku)(X.values.header.date)})}),c.ZP.success(U.Closed),K(),el(X.values.recordId)},disabled:et||!ee},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!ee},{key:"WorkFlow",condition:!0,onClick:async function(){Y({Component:j.Z,props:{functionId:x.J.MRP,recordId:X.values.recordId}})},disabled:!ee},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!et},{key:"generate",condition:!0,onClick:async()=>{await H({extension:R.I.PurchaseRequest.generate,record:JSON.stringify({...X.values.header,date:(0,r.ku)(X.values.header.date)})}),c.ZP.success(U.Generated),K(),el(X.values.recordId)},disabled:!ee||!ea}];(0,d.useEffect)(()=>{E&&el(E)},[]);let er=[{component:"textfield",label:G.sku,name:"sku",width:100,props:{readOnly:!0}},{component:"textfield",label:G.name,name:"itemName",width:150,props:{readOnly:!0}},{component:"numberfield",label:G.onHand,name:"onhand",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.openPr,name:"openPR",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.openPo,name:"openPO",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.leadTime,name:"leadTime",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.safetyStock,name:"safetyStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.reorderPoint,name:"reorderPoint",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.min,name:"minStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.max,name:"maxStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.amcShortTerm,name:"amcShortTerm",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.amcLongTerm,name:"amcLongTerm",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.siteCoverageStock,name:"siteCoverageStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.totalCoverageStock,name:"totalStockCoverage",width:100,props:{readOnly:!0}},{component:"textfield",label:G.mu,name:"msRef",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.unitCost,name:"unitCost",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.totalCost,name:"totalCost",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.sugQty,name:"suggestedPRQty",width:100,props:{readOnly:!0}},{component:"numberfield",label:G.reqQty,name:"qty",width:100,props:{decimalScale:2}}];return(0,l.jsx)(i.Z,{resourceId:v.i.MaterialReqPlannings,functionId:x.J.MRP,form:X,maxAccess:$,actions:en,editMode:ee,previewReport:ee,disabledSubmit:et,children:(0,l.jsxs)(g.R,{children:[(0,l.jsx)(w.g,{children:(0,l.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(s.ZP,{item:!0,xs:4,children:(0,l.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{endpointId:f.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(x.J.MRP),name:"header.dtId",label:G.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:ee,valueField:"recordId",displayField:["reference","name"],values:X.values.header,maxAccess:$,onChange:(e,a)=>{X.setFieldValue("header.dtId",(null==a?void 0:a.recordId)||null),z(a)},error:(null===(a=X.touched.header)||void 0===a?void 0:a.dtId)&&!!(null===(t=X.errors.header)||void 0===t?void 0:t.dtId)})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(n.Z,{name:"header.date",label:G.date,value:null===(Z=X.values)||void 0===Z?void 0:Z.header.date,readOnly:et,required:!0,onChange:X.setFieldValue,onClear:()=>X.setFieldValue("header.date",null),error:(null===(N=X.touched.header)||void 0===N?void 0:N.date)&&!!(null===(F=X.errors.header)||void 0===F?void 0:F.date),maxAccess:$})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(p.Z,{name:"header.reference",label:G.reference,value:null==X?void 0:null===(k=X.values)||void 0===k?void 0:k.header.reference,maxAccess:!ee&&$,readOnly:ee,onChange:X.handleChange,onClear:()=>X.setFieldValue("header.reference",""),error:(null===(O=X.touched.header)||void 0===O?void 0:O.reference)&&!!(null===(A=X.errors.header)||void 0===A?void 0:A.reference)})})]})}),(0,l.jsx)(s.ZP,{item:!0,xs:4,children:(0,l.jsx)(y.Z,{name:"header.notes",label:G.notes,value:X.values.header.notes,rows:3,readOnly:et,maxAccess:$,onChange:e=>X.setFieldValue("header.notes",e.target.value),onClear:()=>X.setFieldValue("header.notes",""),error:(null===(V=X.touched.header)||void 0===V?void 0:V.notes)&&!!(null===(_=X.errors.header)||void 0===_?void 0:_.notes)})})]})}),(0,l.jsx)(I.Q,{children:(0,l.jsx)(q._,{onChange:e=>{X.setFieldValue("items",e)},value:null==X?void 0:null===(L=X.values)||void 0===L?void 0:L.items,error:null==X?void 0:null===(M=X.errors)||void 0===M?void 0:M.items,columns:er,maxAccess:$,name:"items",allowDelete:!et,allowAddNewLine:!1,disabled:et})})]})})}Z.width=1300,Z.height=600},19505:function(e){e.exports={frame:"DynamicDashboard_frame__LiDOD",container:"DynamicDashboard_container__alGWv",topRow:"DynamicDashboard_topRow__QYtYS",title:"DynamicDashboard_title__QPkf7",summaryCard:"DynamicDashboard_summaryCard__wkUPv",summaryGrid:"DynamicDashboard_summaryGrid__KEkjf",summaryItem:"DynamicDashboard_summaryItem__yOvgM",middleRow:"DynamicDashboard_middleRow__S8stN",innerGrid:"DynamicDashboard_innerGrid___0c_6",chartCard:"DynamicDashboard_chartCard__IBIVJ",redCenter:"DynamicDashboard_redCenter__ebbJh",label:"DynamicDashboard_label__f6Txq",value:"DynamicDashboard_value__gxMix",strong:"DynamicDashboard_strong__pyBUJ"}},31428:function(e){e.exports={frame:"SalesPersonDashboardStyles_frame__qy0oJ",card:"SalesPersonDashboardStyles_card__bdgl4",bodyCard:"SalesPersonDashboardStyles_bodyCard__LvIyB",footerCard:"SalesPersonDashboardStyles_footerCard__f1SUs",sideData:"SalesPersonDashboardStyles_sideData__RGMfs",dataHalf:"SalesPersonDashboardStyles_dataHalf__6r6jj",profile:"SalesPersonDashboardStyles_profile___q7oT",avatar:"SalesPersonDashboardStyles_avatar__F_Vgn",circle:"SalesPersonDashboardStyles_circle__Fybzy",pic:"SalesPersonDashboardStyles_pic__d9cKG",span:"SalesPersonDashboardStyles_span__dVVvK",big:"SalesPersonDashboardStyles_big__jEI0p",compositeBarContainer:"SalesPersonDashboardStyles_compositeBarContainer__SgIQT",progressBarsWrapper:"SalesPersonDashboardStyles_progressBarsWrapper___ZK5U"}},96422:function(e){e.exports={timelineWrapper:"HorizontalTimeline_timelineWrapper__A6fHE",timelineTitle:"HorizontalTimeline_timelineTitle__qRbU_",timelineContainer:"HorizontalTimeline_timelineContainer__1BIf8",timelineArrow:"HorizontalTimeline_timelineArrow__Ix_kH",timelineItem:"HorizontalTimeline_timelineItem__c4eTQ",timelineContent:"HorizontalTimeline_timelineContent__sqf7I",timelineContentTop:"HorizontalTimeline_timelineContentTop___IfZ9",timelineContentBottom:"HorizontalTimeline_timelineContentBottom__WykRc",timelineIcon:"HorizontalTimeline_timelineIcon__z8PRk"}},54982:function(e){e.exports={progressBarContainer:"ProgressBar_progressBarContainer__SGz7z",progressBarLabel:"ProgressBar_progressBarLabel__0g9Bh",progressBarBackground:"ProgressBar_progressBarBackground__CGHcR",progressBar:"ProgressBar_progressBar__AQblq"}},59301:function(e){e.exports={circleContainer:"CircularData_circleContainer__ZPh5G"}},21744:function(e){e.exports={span:"CircularItem_span__WNdV0",big:"CircularItem_big___ALy_",small:"CircularItem_small__cbfZ0",circleItemContainer:"CircularItem_circleItemContainer__ScS0f",circleIcon:"CircularItem_circleIcon__5BTf7",circleIconContent:"CircularItem_circleIconContent__joWLd"}}},function(e){e.O(0,[96767,92515,2494,3854,43553,72683,86558,28996,23352,13073,44129,17720,46553,38096,78451,77980,94828,58974,13781,35934,60352,25991,69952,99090,32304,99471,58669,8324,69549,40300,41451,43933,49774,92888,40179],function(){return e(e.s=32256)}),_N_E=e.O()}]);