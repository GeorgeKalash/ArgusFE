(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5477],{76442:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mf-work-centers",function(){return n(74170)}])},74170:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return A}});var a=n(52322),l=n(2784),t=n(62202),s=n(69387),i=n(65950),d=n(90587),o=n(71987),c=n(33625),u=n(62362),m=n(31389),f=n(26612),x=n(36908),p=n(19473),v=n(61802),I=n(60218),h=n(78711),C=n(48601),y=n(82737),g=n(8661),N=n(5088),_=n(65215),k=n(38449),Z=n(66361),j=n(19689);function F(e){var r,n;let{labels:s,maxAccess:c,recordId:x}=e,{platformLabels:v}=(0,l.useContext)(p.l),{getRequest:F,postRequest:A}=(0,l.useContext)(i.$),w=(0,o.E)({endpointId:d.u.WorkCenter.page}),q=(0,h.TA)({initialValues:{recordId:null,reference:"",name:"",supervisorId:null,siteId:null,plantId:null,costCenterId:null,lineId:null,isSerialCreator:!1,isInactive:!1},validationSchema:C.Ry({reference:C.Z_().required(),name:C.Z_().required(),siteId:C.Z_().required(),plantId:C.Z_().required()}),onSubmit:async e=>{let r=await A({extension:d.u.WorkCenter.set,record:JSON.stringify(e)});t.ZP.success(e.recordId?v.Edited:v.Added),q.setFieldValue("recordId",null==r?void 0:r.recordId),w()}}),P=!!q.values.recordId;return(0,l.useEffect)(()=>{!async function(){if(x){let e=await F({extension:d.u.WorkCenter.get,parameters:"_recordId=".concat(x)});q.setValues({...e.record})}}()},[]),(0,a.jsx)(y.Z,{resourceId:f.i.WorkCenters,form:q,maxAccess:c,editMode:P,children:(0,a.jsx)(m.R,{children:(0,a.jsx)(u.Q,{children:(0,a.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(N.Z,{name:"reference",label:s.reference,value:q.values.reference,required:!0,maxAccess:c,maxLength:"6",onChange:q.handleChange,onClear:()=>q.setFieldValue("reference",""),error:q.touched.reference&&!!q.errors.reference})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(N.Z,{name:"name",label:s.name,value:q.values.name,maxLength:"40",required:!0,maxAccess:c,onChange:q.handleChange,onClear:()=>q.setFieldValue("name",""),error:q.touched.name&&!!q.errors.name})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{endpointId:d.u.Labor.qry,parameters:"_startAt=0&_pageSize=100&_params=",name:"supervisorId",label:s.supervisor,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:q.values,maxAccess:c,onChange:(e,r)=>q.setFieldValue("supervisorId",null==r?void 0:r.recordId),error:q.touched.supervisorId&&!!q.errors.supervisorId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{endpointId:_.$.Site.qry,name:"siteId",label:s.site,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:q.values,maxAccess:c,onChange:(e,r)=>q.setFieldValue("siteId",(null==r?void 0:r.recordId)||null),required:!0,error:q.touched.siteId&&!!q.errors.siteId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{endpointId:k.r.Plant.qry,name:"plantId",label:s.plantName,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:q.values,maxAccess:c,onChange:(e,r)=>q.setFieldValue("plantId",(null==r?void 0:r.recordId)||null),required:!0,error:q.touched.plantId&&!!q.errors.plantId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{endpointId:Z.x.CostCenter.qry,parameters:"_params=&_startAt=0&_pageSize=200",name:"costCenterId",label:s.costCenter,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:q.values,maxAccess:c,onChange:(e,r)=>q.setFieldValue("costCenterId",(null==r?void 0:r.recordId)||null),error:q.touched.costCenterId&&!!q.errors.costCenterId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{endpointId:d.u.ProductionLine.qry,name:"lineId",label:s.productionLine,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:q.values,maxAccess:c,onChange:(e,r)=>q.setFieldValue("lineId",(null==r?void 0:r.recordId)||null),error:q.touched.lineId&&!!q.errors.lineId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(j.Z,{name:"isSerialCreator",value:null===(r=q.values)||void 0===r?void 0:r.isSerialCreator,onChange:e=>q.setFieldValue("isSerialCreator",e.target.checked),label:s.isSerialCreator,maxAccess:c})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(j.Z,{name:"isInactive",value:null===(n=q.values)||void 0===n?void 0:n.isInactive,onChange:e=>q.setFieldValue("isInactive",e.target.checked),label:s.inactive,maxAccess:c})})]})})})})}var A=()=>{let{getRequest:e,postRequest:r}=(0,l.useContext)(i.$),{platformLabels:n}=(0,l.useContext)(p.l),{stack:I}=(0,v.zY)();async function h(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50,params:l=[]}=r;return{...await e({extension:d.u.WorkCenter.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&filter=&_params=").concat(l||"")}),_startAt:n}}let{query:{data:C},filterBy:y,labels:g,access:N,paginationParameters:_,refetch:k,invalidate:Z}=(0,o.J)({queryFn:h,endpointId:d.u.WorkCenter.page,datasetId:f.i.WorkCenters,filter:{filterFn:j}});async function j(r){let{filters:n,pagination:a}=r;return n.qry?await e({extension:d.u.WorkCenter.snapshot,parameters:"_filter=".concat(n.qry,"&_status=0")}):h({_startAt:a._startAt||0,params:null==n?void 0:n.params})}let A=[{field:"reference",headerName:g.reference,flex:1},{field:"name",headerName:g.name,flex:1},{field:"siteName",headerName:g.sitename,flex:1},{field:"siteRef",headerName:g.siteRef,flex:1},{field:"plantName",headerName:g.plantName,flex:1},{field:"supervisorName",headerName:g.supervisor,flex:1},{field:"lineRef",headerName:g.productionLine,flex:1},{field:"lineName",headerName:g.productionLine,flex:1},{field:"costCenterName",headerName:g.costCenter,flex:1},{field:"isSerialCreator",headerName:g.isSerialCreator,flex:1,type:"checkbox"},{field:"isInactive",headerName:g.inactive,flex:1,type:"checkbox"}];function w(e){I({Component:F,props:{labels:g,recordId:null==e?void 0:e.recordId,maxAccess:N},width:600,height:550,title:g.workCenter})}let q=async e=>{await r({extension:d.u.WorkCenter.del,record:JSON.stringify(e)}),Z(),t.ZP.success(n.Deleted)};return(0,a.jsxs)(m.R,{children:[(0,a.jsx)(c.g,{children:(0,a.jsx)(x.Z,{onAdd:()=>{w()},maxAccess:N,filterBy:y,reportName:"MFWCT",previewReport:f.i.WorkCenters})}),(0,a.jsx)(u.Q,{children:(0,a.jsx)(s.Z,{columns:A,gridData:C,rowId:["recordId"],paginationParameters:_,paginationType:"api",refetch:k,onEdit:e=>{w(e)},onDelete:q,pageSize:50,maxAccess:N})})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=76442)}),_N_E=e.O()}]);