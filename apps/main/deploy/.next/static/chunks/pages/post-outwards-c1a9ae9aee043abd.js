(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51857],{32495:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post-outwards",function(){return s(47537)}])},47537:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var r=s(52322),a=s(2784),n=s(8661),o=s(65950),l=s(88469),d=s(69387),u=s(71987),c=s(60218),i=s(26612),y=s(80983),p=s(31389),g=s(33625),m=s(62362),q=s(27423),C=s(53621),O=s(19473),I=s(62202),h=s(89330),f=s(91406),R=s(54074),F=()=>{var e,t;let[s,F]=(0,a.useState)({}),{getRequest:S,postRequest:P}=(0,a.useContext)(o.$),{platformLabels:v}=(0,a.useContext)(O.l),x=e=>{if(!e)return"1-1-1970";let t=new Date(e),s=t.getMonth()+1,r=t.getDate(),a=t.getFullYear();return"".concat(s,"-").concat(r,"-").concat(a)},A=async e=>{let t=x(w.values.fromDate),s="1-1-1970"===x(w.values.toDate)?"1-1-2050":x(w.values.toDate),r=await S({extension:l.N.Postoutwards.qry,parameters:"_countryId=".concat(w.values.countryId,"&_currencyId=").concat(w.values.currencyId||0,"&_corId=").concat(w.values.corId||0,"&_dispersalType=").concat(w.values.dispersalType||0,"&_fromAmount=").concat(w.values.fromAmount||0,"&_toAmount=").concat(w.values.toAmount||0,"&_fromDate=").concat(t,"&_todate=").concat(s)});if(!e)return r;F(r)},{labels:W,access:D,query:{data:E},refetch:N}=(0,u.J)({queryFn:A,endpointId:l.N.Postoutwards.qry,datasetId:i.i.PostOutwards}),T=s||E,{formik:w}=(0,y.c)({initialValues:{countryId:0,currencyId:"",fromAmount:"",corId:"",dispersalType:"",totalFc:"",totalAm:"",fromDate:"",toDate:""},access:D,validateOnChange:!0,onSubmit:async e=>{var t;let s=null===(t=T.list)||void 0===t?void 0:t.filter(e=>e.checked).map(e=>e.recordId);s.length>0&&await P({extension:l.N.Postoutwards.post2,record:JSON.stringify({ids:s})}),A(!0),I.ZP.success(v.Posted)}}),B=[{field:"reference",headerName:W.reference,flex:1},{field:"date",headerName:W.date,flex:1,type:"date"},{field:"countryRef",headerName:W.country,flex:1},{field:"currencyRef",headerName:W.currency,flex:1},{field:"dispersalName",headerName:W.dispersal,flex:1},{field:"corName",headerName:W.cor,flex:1},{field:"clientName",headerName:W.client,flex:1},{field:"timeToPost",headerName:W.timeToPost,flex:1},{field:"fcAmount",headerName:W.fcAmount,flex:1,type:"number"},{field:"amount",headerName:W.amount,flex:1,type:"number"}];return(0,a.useEffect)(()=>{A(!0),w.setFieldValue("totalAm",0),w.setFieldValue("totalFc",0)},[w.values.countryId,w.values.currencyId,w.values.corId,w.values.dispersalType,w.values.fromDate,w.values.toDate,w.values.fromAmount,w.values.toAmount]),(0,r.jsx)(R.Z,{onSave:w.handleSubmit,maxAccess:D,children:(0,r.jsxs)(p.R,{children:[(0,r.jsx)(g.g,{children:(0,r.jsx)(c.ZP,{container:!0,spacing:2,children:(0,r.jsx)(c.ZP,{item:!0,xs:12,children:(0,r.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(n.Z,{endpointId:l.N.AssignedCountry.assigned,name:"countryId",label:W.country,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],values:w.values,valueField:"recordId",displayField:["reference","name","flName"],maxAccess:D,onChange:(e,t)=>{t?w.setFieldValue("countryId",t.recordId):w.setFieldValue("countryId",0),w.setFieldValue("currencyId",""),w.setFieldValue("dispersalType","")},error:w.touched.countryId&&!!w.errors.countryId})}),(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(n.Z,{endpointId:l.N.AssignedCurrency.assigned,parameters:w.values.countryId&&"_countryId=".concat(w.values.countryId||0),name:"currencyId",label:W.currency,readOnly:!w.values.countryId,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],values:w.values,maxAccess:D,onChange:(e,t)=>{w.setFieldValue("currencyId",(null==t?void 0:t.recordId)||null),w.setFieldValue("dispersalType","")},error:w.touched.currencyId&&!!w.errors.currencyId})}),(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(n.Z,{endpointId:l.N.AssignedDispersalType.assigned,parameters:w.values.currencyId&&"_countryId=".concat(w.values.countryId||0,"&_currencyId=").concat(w.values.currencyId||0),name:"dispersalType",label:W.dispersal,readOnly:!w.values.currencyId,valueField:"key",displayField:"value",values:w.values,onChange:(e,t)=>{w.setFieldValue("dispersalType",null==t?void 0:t.key)}})}),(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(q.U,{endpointId:C.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",label:W.cor,form:w,displayFieldWidth:2,valueShow:"corRef",secondValueShow:"corName",maxAccess:D,onChange:(e,t)=>{w.setFieldValue("corId",t?t.recordId:""),w.setFieldValue("corName",t?t.name:""),w.setFieldValue("corRef",t?t.reference:"")}})}),(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(f.Z,{name:"fromAmount",label:W.fromAmount,value:w.values.fromAmount,onBlur:w.handleChange,onClear:()=>w.setFieldValue("fromAmount",""),decimalScale:2})}),(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(f.Z,{name:"toAmount",label:W.toAmount,value:w.values.toAmount,onBlur:w.handleChange,onClear:()=>w.setFieldValue("toAmount",""),decimalScale:2})}),(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(h.Z,{name:"fromDate",max:w.values.toDate,label:W.fromDate,value:null==w?void 0:null===(e=w.values)||void 0===e?void 0:e.fromDate,onChange:w.setFieldValue,onClear:()=>w.setFieldValue("fromDate",""),error:!1})}),(0,r.jsx)(c.ZP,{item:!0,xs:3,children:(0,r.jsx)(h.Z,{name:"toDate",min:w.values.fromDate,label:W.toDate,value:null==w?void 0:null===(t=w.values)||void 0===t?void 0:t.toDate,onChange:w.setFieldValue,onClear:()=>w.setFieldValue("toDate",""),error:!1})})]})})})}),(0,r.jsx)(m.Q,{children:(0,r.jsx)(d.Z,{columns:B,gridData:T,rowId:["recordId"],pageSize:50,pagination:!0,paginationType:"client",refetch:N,isLoading:!1,maxAccess:D,handleCheckboxChange:function(){var e,t;let s=w.values.countryId&&w.values.currencyId?null==T?void 0:null===(e=T.list)||void 0===e?void 0:e.reduce((e,t)=>{let s=0;return t.checked&&(s=parseFloat(t.fcAmount.toString().replace(/,/g,""))||0),e+s},0):0,r=null==T?void 0:null===(t=T.list)||void 0===t?void 0:t.reduce((e,t)=>{let s=0;return t.checked&&(s=parseFloat(t.amount.toString().replace(/,/g,""))||0),e+s},0);w.setFieldValue("totalFc",s),w.setFieldValue("totalAm",r)},showCheckboxColumn:!0})}),(0,r.jsx)(g.g,{children:(0,r.jsxs)(c.ZP,{container:!0,justifyContent:"flex-end",spacing:2,sx:{px:2},children:[(0,r.jsx)(c.ZP,{item:!0,xs:1,children:(0,r.jsx)(f.Z,{name:"totalFc",label:W.totalFc,value:w.values.totalFc,readOnly:!0,hidden:!(w.values.countryId&&w.values.currencyId)})}),(0,r.jsx)(c.ZP,{item:!0,xs:1,children:(0,r.jsx)(f.Z,{name:"totalAm",label:W.totalAm,value:w.values.totalAm,readOnly:!0})})]})})]})})}},88469:function(e,t,s){"use strict";s.d(t,{N:function(){return a}});let r="RTOW.asmx/",a={Country:{qry:r+"qryPCO2"},DispersalType:{qry:r+"qryPMO2"},Currency:{qry:r+"qryPMO3"},Agent:{qry:r+"qryPDA2"},ProductDispersalEngine:{qry:r+"qryPDE"},OutwardsCash:{qry:r+"qryOWC"},OutwardsOrder:{qry:r+"qryOWO",qry2:r+"qryOWO2",page:r+"pageOWO",get:r+"getOWO",get2:r+"get2OWO",set:r+"setOWO",set2:r+"set2OWO",del:r+"delOWO",close:r+"closeOWO",reopen:r+"reopenOWO",post:r+"postOWO",snapshot:r+"snapshotOWO"},OutwardsRequest:{get:r+"getOWX"},InwardSettlement:{qry:r+"qryIWS",page:r+"pageIWS",get:r+"getIWS",set:r+"setIWS",del:r+"delIWS",close:r+"closeIWS",reopen:r+"reopenIWS",post:r+"postIWS",snapshot:r+"snapshotIWS"},InwardsTransfer:{get:r+"getIW",set:r+"setIW",del:r+"delIW",snapshot:r+"snapshotIW",snapshot2:r+"snapshotIW2",close:r+"closeIW",reopen:r+"reopenIW",post:r+"postIW",open:r+"openIW"},InwardGLInformation:{get:r+"getIWI"},Beneficiary:{qry:r+"qryBEN",qry2:r+"qryBEN2",qry3:r+"qryBEN3",get:r+"getBEN",del:r+"delBEN",snapshot:r+"snapshotBEN",snapshot2:r+"snapshotBEN2 "},BeneficiaryBank:{qry:r+"qryBEB",get:r+"getBEB",set:r+"set2BEB",del:r+"delBEB"},BeneficiaryCash:{qry:r+"qryBEC",get:r+"getBEC",set:r+"set2BEC",del:r+"delBEC"},FeeSchedule:{qry:r+"qryFSC",page:r+"pageFSC",snapshot:r+"snapshotFSC",get:r+"getFSC",set:r+"setFSC",del:r+"delFSC"},FeeScheduleDetail:{qry:r+"qryFSD",get:r+"getFSD",set2:r+"set2FSD",del:r+"delFSD"},FeeScheduleOutwards:{qry:r+"qryFSO",page:r+"pageFSO",get:r+"getFSO",set:r+"setFSO",del:r+"delFSO"},FeeScheduleInwards:{qry:r+"qryFSI",page:r+"pageFSI",get:r+"getFSI",set:r+"setFSI",del:r+"delFSI"},OutwardGLInformation:{get:r+"getOWI"},AutoPostExclusion:{qry:r+"qryAPX",get:r+"getAPX",set:r+"setAPX",del:r+"delAPX",get2:r+"get2APX",set2:r+"set2APX"},OutwardsModification:{qry:r+"qryOWM",page:r+"pageOWM",snapshot:r+"snapshotOWM",get:r+"getOWM",set2:r+"set2OWM",del:r+"delOWM",post:r+"postOWM",reopen:r+"reopenOWM",close:r+"closeOWM"},Postoutwards:{qry:r+"qryOWT3",post2:r+"post2OWT"},OutwardsReturn:{page:r+"pageOWR",qry2:r+"qryOWR2",get:r+"getOWR",set:r+"setOWR",close:r+"closeOWR",reopen:r+"reopenOWR",post:r+"postOWR",snapshot:r+"snapshotOWR"},CorrespondentOutwards:{qry:r+"qryACE",set:r+"setACE"},ReceiptVouchers:{qry:r+"qryRV",page:r+"pageRV",get:r+"getRV",set:r+"setRV",set2:r+"set2RV",del:r+"delRV",post:r+"postRV",close:r+"closeRV",reopen:r+"reopenRV",snapshot:r+"snapshotRV"},OutwardsTransfer:{get:r+"getOWT",snapshot:r+"snapshotOWT",qry2:r+"qryOWT2"},UnassignedCountry:{unassigned:r+"unassignedCOU"},UnassignedCurrency:{unassigned:r+"unassignedCU"},UnassignedDispersalType:{unassigned:r+"unassignedDT"},AssignedCountry:{assigned:r+"assignedCOU"},AssignedCurrency:{assigned:r+"assignedCU"},AssignedDispersalType:{assigned:r+"assignedDT"},OutwardReturnSettlement:{qry:r+"qryORS",page:r+"pageORS",get:r+"getORS",get2:r+"get2ORS",set:r+"setORS",set2:r+"set2ORS",del:r+"delORS",post:r+"postORS",close:r+"closeORS",reopen:r+"reopenORS",snapshot:r+"snapshotORS"},OutwardReturnReason:{page:r+"pageOWRR",snapshot:r+"snapshotOWRR",qry:r+"qryOWRR",get:r+"getOWRR",set:r+"setOWRR",del:r+"delOWRR"}}},53621:function(e,t,s){"use strict";s.d(t,{d:function(){return a}});let r="RTSET.asmx/",a={Interface:{qry:r+"qryITF",page:r+"pageITF",get:r+"getITF",set:r+"setITF",del:r+"delITF"},ProductMaster:{qry:r+"qryPRO",page:r+"pagePRO",get:r+"getPRO",set:r+"setPRO",del:r+"delPRO",snapshot:r+"snapshotPRO"},ProductCountries:{qry:r+"qryPCO",set2:r+"set2PCO"},ProductMonetaries:{qry:r+"qryPMO",set2:r+"set2PMO"},ProductDispersal:{qry:r+"qryPDI",get:r+"getPDI",set:r+"setPDI",del:r+"delPDI"},ProductSchedules:{qry:r+"qryPSC",set2:r+"set2PSC"},ProductScheduleRanges:{qry:r+"qryPSR",set2:r+"set2PSR"},ProductScheduleFees:{qry:r+"qryPSF",set2:r+"set2PSF"},ProductDispersalAgents:{qry:r+"qryPDA",set2:r+"set2PDA"},Correspondent:{page:r+"pageCOR",qry:r+"qryCOR",qry2:r+"qry2COR",get:r+"getCOR",set:r+"setCOR",del:r+"delCOR",snapshot:r+"snapshotCOR"},CorrespondentCountry:{qry:r+"qryCCO",get:r+"getCCO",set2:r+"set2CCO",del:r+"delCCO"},CorrespondentCurrency:{qry:r+"qryCCU",get:r+"getCCU",set2:r+"set2CCU",del:r+"delCCU"},CorrespondentAgents:{qry:r+"qryAGT",page:r+"pageAGT",get:r+"getAGT",set:r+"setAGT",del:r+"delAGT"},CorrespondentAgentBranches:{qry:r+"qryABR",page:r+"pageABR",get:r+"getABR",set:r+"setABR",del:r+"delABR"},CorrespondentExchangeMap:{qry:r+"qryEXC",set2:r+"set2EXC"},CurrencyExchangeMap:{qry:r+"qryEXG",set2:r+"set2EXG"},CorrespondentExchangeBuyMap:{qry:r+"qryEXB",set2:r+"set2EXB"},ExchangeRates:{get:r+"getEXB",qry:r+"qryEXG2",set2:r+"set2EXB"},RtDefault:{qry:r+"qryDE",set2:r+"set2DE"},Profession:{qry:r+"qryPFN",page:r+"pagePFN",get:r+"getPFN",set:r+"setPFN",del:r+"delPFN",snapshot:r+"snapshotPFN"},ClientIndividual:{qry:r+"qryCLI"},SalaryRange:{qry:r+"qrySRA",page:r+"pageSRA",get:r+"getSRA",set:r+"setSRA",del:r+"delSRA"},SourceOfIncome:{qry:r+"qrySI",page:r+"pageSI",snapshot:r+"snapshotSI",get:r+"getSI",set:r+"setSI",del:r+"delSI"},CorrespondentControl:{qry:r+"qryCCL",set:r+"set2CCL"},InterfaceMaps:{qry:r+"qryIFM",get:r+"getIFM",set2:r+"set2IFM"},SourceOfIncomeType:{qry:r+"qrySIT",snapshot:r+"snapshotSIT",page:r+"pageSIT",get:r+"getSIT",set:r+"setSIT",del:r+"delSIT"},ProfessionGroups:{qry:r+"qryPFG",page:r+"pagePFG",snapshot:r+"snapshotPFG",get:r+"getPFG",set:r+"setPFG",del:r+"delPFG"},CorrespondentGroup:{qry:r+"qryCGP",page:r+"pageCGP",get:r+"getCGP",set:r+"setCGP",del:r+"delCGP"},ExtraIncome:{qry:r+"qryEI",get:r+"getEI",del:r+"delEI",page:r+"pageEI",snapshot:r+"snapshotEI",set:r+"setEI"},CountryRisk:{page:r+"pageCOU",get:r+"getCOU",set:r+"setCOU",del:r+"delCOU"},CorDispControl:{qry:r+"qryCDC",set2:r+"set2CDC"},CorrespondentDispersal:{qry:r+"qryCDM",get:r+"getCDM",del:r+"delCDM",set2:r+"set2CDM"},CorrespondentDispersalRate:{qry:r+"qryCDR",set2:r+"set2CDR"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=32495)}),_N_E=e.O()}]);