(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74444],{37377:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/damages",function(){return t(12344)}])},12344:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return D}});var n=t(52322),r=t(2784),i=t(71987),s=t(65950),d=t(69387),o=t(62202),c=t(61802),l=t(26612),u=t(31389),f=t(33625),m=t(62362),g=t(19473),p=t(90587),h=t(74550),x=t(36908),y=t(98345),_=t(7121),N=t(78618),w=t(58276),D=()=>{let{postRequest:e,getRequest:a}=(0,r.useContext)(s.$),{platformLabels:t}=(0,r.useContext)(g.l),{stack:D,lockRecord:j}=(0,c.zY)(),{addLockedScreen:b}=(0,r.useContext)(w.Z),{query:{data:I},filterBy:A,refetch:v,labels:C,access:Z,paginationParameters:k,invalidate:R}=(0,i.J)({queryFn:E,endpointId:p.u.Damage.page,datasetId:l.i.Damages,filter:{filterFn:P}}),q=[{field:"reference",headerName:C.reference,flex:1},{field:"date",headerName:C.date,flex:1,type:"date"},{field:"jobRef",headerName:C.jobRef,flex:1},{field:"damagedQty",headerName:C.damagedQty,flex:1,type:"number"},{field:"damagedPcs",headerName:C.damagedPcs,flex:1,type:"number"},{field:"reasonRef",headerName:C.damageReason,flex:1},{field:"routingSeqNo",headerName:C.routingSeqNo,flex:1,type:"number"},{field:"statusName",headerName:C.status,flex:1},{field:"notes",headerName:C.remarks,flex:1}];async function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:n=50,params:r=[]}=e;return{...await a({extension:p.u.Damage.page,parameters:"_startAt=".concat(t,"&_pageSize=").concat(n,"&_params=").concat(r,"&_jobId=0&filter=")}),_startAt:t}}async function P(e){let{filters:t,pagination:n}=e;return(null==t?void 0:t.qry)?await a({extension:p.u.Damage.snapshot,parameters:"_filter=".concat(t.qry,"&_jobId=0")}):E({_startAt:n._startAt||0,params:null==t?void 0:t.params})}let{proxyAction:S}=(0,y.G)({functionId:_.J.Damage,action:z}),T=async()=>{await S()};async function Q(e){D({Component:h.Z,props:{recordId:e,lockRecord:j},width:1150,height:580,title:C.damage})}async function z(e,a,n){e&&3!==n?await j({recordId:e,reference:a,resourceId:l.i.Damages,onSuccess:()=>{b({resourceId:l.i.Damages,recordId:e,reference:a}),Q(e,a)},isAlreadyLocked:e=>{D({Component:N.Z,props:{DialogText:"".concat(t.RecordLocked," ").concat(e),width:600,height:200,title:t.Dialog}})}}):Q(e,a)}let F=async a=>{await e({extension:p.u.Damage.del,record:JSON.stringify(a)}),R(),o.ZP.success(t.Deleted)};return(0,n.jsxs)(u.R,{children:[(0,n.jsx)(f.g,{children:(0,n.jsx)(x.Z,{onAdd:T,maxAccess:Z,reportName:"MFDMG",filterBy:A})}),(0,n.jsx)(m.Q,{children:(0,n.jsx)(d.Z,{name:"table",columns:q,gridData:I,rowId:["recordId"],onEdit:e=>{z(null==e?void 0:e.recordId,null==e?void 0:e.reference,null==e?void 0:e.status)},refetch:v,onDelete:F,deleteConfirmationType:"strict",isLoading:!1,pageSize:50,maxAccess:Z,paginationParameters:k,paginationType:"api"})})]})}},78618:function(e,a,t){"use strict";var n=t(52322),r=t(23925),i=t(31389),s=t(62362);let d=e=>{let{DialogText:a,bottomSection:t}=e;return(0,n.jsxs)(i.R,{children:[(0,n.jsx)(s.Q,{children:(0,n.jsx)(r.Z,{sx:{p:12},textAlign:"center",children:a})}),t]})};d.width=600,d.height=200,a.Z=d}},function(e){e.O(0,[92515,2494,36908,74550,49774,92888,40179],function(){return e(e.s=37377)}),_N_E=e.O()}]);