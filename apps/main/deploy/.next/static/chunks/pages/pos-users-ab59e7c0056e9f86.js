(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29354],{11260:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pos-users",function(){return r(84511)}])},84511:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return A}});var t=r(52322),n=r(2784),a=r(62202),d=r(69387),l=r(27723),o=r(65950),i=r(81510),u=r(60218),c=r(48601),p=r(82737),I=r(71987),m=r(26612),f=r(80983),x=r(31389),P=r(62362),h=r(8661),y=r(38449),g=r(22341),S=r(19473);function v(e){let{labels:s,maxAccess:r,recordId:d,record:l,window:v}=e,{getRequest:_,postRequest:q}=(0,n.useContext)(o.$),{platformLabels:A}=(0,n.useContext)(S.l),C=(0,I.E)({endpointId:i.A.PosUsers.qry}),{formik:D}=(0,f.c)({initialValues:{recordId:d,userId:null,posId:null,spId:null},maxAccess:r,validateOnChange:!0,validationSchema:c.Ry({userId:c.Z_().required(),posId:c.Z_().required()}),onSubmit:async e=>{await q({extension:i.A.PosUsers.set,record:JSON.stringify(e)}),a.ZP.success(A.Saved),v.close(),C()}}),R=!!D.values.recordId&&!!d;return(0,n.useEffect)(()=>{!async function(){if(l&&l.userId&&d){let e=await _({extension:i.A.PosUsers.get,parameters:"_userId=".concat(l.userId)});D.setValues({...e.record,recordId:e.record.userId})}}()},[]),(0,t.jsx)(p.Z,{resourceId:m.i.POSUsers,form:D,maxAccess:r,editMode:R,children:(0,t.jsx)(x.R,{children:(0,t.jsx)(P.Q,{children:(0,t.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(h.Z,{endpointId:y.r.PosUsers.qry,name:"userId",label:s.user,valueField:"recordId",parameters:"_size=1000&_filter=&_startAt=0&_sortBy=fullName",displayField:["email"],columnsInDropDown:[{key:"email",value:"email"}],values:D.values,required:!0,maxAccess:r,readOnly:R,onChange:(e,s)=>{D.setFieldValue("userId",null==s?void 0:s.recordId)},error:D.touched.userId&&!!D.errors.userId})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(h.Z,{endpointId:i.A.PointOfSales.qry,name:"posId",label:s.pos,valueField:"recordId",displayField:["reference"],columnsInDropDown:[{key:"reference",value:"reference"}],values:D.values,required:!0,maxAccess:r,onChange:(e,s)=>{D.setFieldValue("posId",(null==s?void 0:s.recordId)||"")},error:D.touched.posId&&!!D.errors.posId})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(h.Z,{endpointId:g.P.SalesPerson.qry,name:"spId",label:s.spName,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"name",value:"name"}],values:D.values,maxAccess:r,onChange:(e,s)=>{D.setFieldValue("spId",null==s?void 0:s.recordId)},error:D.touched.spId&&!!D.errors.spId})})]})})})})}var _=r(61802),q=r(33625),A=()=>{let{getRequest:e,postRequest:s}=(0,n.useContext)(o.$),{platformLabels:r}=(0,n.useContext)(S.l),{stack:u}=(0,_.zY)();async function c(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50}=s;return{...await e({extension:i.A.PosUsers.qry,parameters:"_startAt=".concat(r,"&_pageSize=").concat(t,"&_posId=0&_params=")}),_startAt:r}}let{query:{data:p},labels:f,paginationParameters:h,refetch:y,access:g,invalidate:A}=(0,I.J)({queryFn:c,endpointId:i.A.PosUsers.qry,datasetId:m.i.POSUsers}),C=[{field:"email",headerName:f.email,flex:1},{field:"posRef",headerName:f.posRef,flex:1},{field:"spName",headerName:f.spName,flex:1}],D=async e=>{await s({extension:i.A.PosUsers.del,record:JSON.stringify(e)}),A(),a.ZP.success(r.Deleted)};function R(e){u({Component:v,props:{labels:f,record:e,recordId:null==e?void 0:e.userId,maxAccess:g},width:600,height:300,title:f.PosUsers})}return(0,t.jsxs)(x.R,{children:[(0,t.jsx)(q.g,{children:(0,t.jsx)(l.Z,{onAdd:()=>{R()},maxAccess:g})}),(0,t.jsx)(P.Q,{children:(0,t.jsx)(d.Z,{columns:C,gridData:p,rowId:["userId"],onEdit:e=>{R(e)},onDelete:D,isLoading:!1,pageSize:50,paginationType:"api",maxAccess:g,refetch:y,paginationParameters:h})})]})}},81510:function(e,s,r){"use strict";r.d(s,{A:function(){return n}});let t="PS.asmx/",n={PosUsers:{qry:t+"qryUSR",get:t+"getUSR",set:t+"setUSR",del:t+"delUSR",page:t+"pageUSR",set2:t+"set2USR"},PointOfSales:{page:t+"pagePOS",qry:t+"qryPOS",get:t+"getPOS",set:t+"setPOS",del:t+"delPOS"},SalesPerson:{qry:t+"qrySP",set2:t+"set2SP"},CashAccount:{qry:t+"qryCA",set2:t+"set2CA"},DocumentTypeDefault:{qry:t+"qryDTD",get:t+"getDTD",set:t+"setDTD",del:t+"delDTD"},RetailInvoice:{qry:t+"qryIVC",del:t+"delIVC",get:t+"getIVC",get2:t+"get2IVC",snapshot:t+"snapshotIVC",level:t+"level2_IVC",set2:t+"set2IVC",post:t+"postIVC",unpost:t+"unpostIVC"},RetailPurchase:{set2:t+"set2IVP"},RetailPurchaseReturn:{set2:t+"set2IPR"},RetailReturn:{set2:t+"set2IVR"},PUItems:{snapshot:t+"snapshotIT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=11260)}),_N_E=e.O()}]);