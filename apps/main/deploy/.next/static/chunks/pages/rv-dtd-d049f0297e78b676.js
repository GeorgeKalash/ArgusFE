(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10927],{23120:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rv-dtd",function(){return t(88539)}])},88539:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var a=t(52322),r=t(2784),c=t(62202),d=t(69387),s=t(27723),l=t(65950),o=t(71987),i=t(26612),u=t(31389),p=t(33625),I=t(62362),f=t(61802),h=t(25870),m=t(60218),y=t(48601),x=t(82737),v=t(8661),D=t(80983),_=t(7121);t(27423);var A=t(2119),F=t(38449),g=t(19473);function N(e){let{labels:n,maxAccess:t,recordId:d}=e,{getRequest:s,postRequest:p}=(0,r.useContext)(l.$),f=(0,o.E)({endpointId:h.H.FIDocTypeDefaults.qry}),{platformLabels:N}=(0,r.useContext)(g.l),{formik:j}=(0,D.c)({initialValues:{cashAccountId:"",plantId:"",dtId:"",recordId:d||null},maxAccess:t,validateOnChange:!0,validationSchema:y.Ry({dtId:y.Z_().required(),cashAccountId:y.Rx().required()}),onSubmit:async e=>{await p({extension:h.H.FIDocTypeDefaults.set,record:JSON.stringify(e)}),j.values.recordId||j.setFieldValue("recordId",j.values.dtId),c.ZP.success(N.Submit),f()}}),w=!!j.values.recordId;return(0,r.useEffect)(()=>{!async function(){try{if(d){let e=await s({extension:h.H.FIDocTypeDefaults.get,parameters:"_dtId=".concat(d)});j.setValues({...e.record,recordId:d})}}catch(e){}}()},[]),(0,a.jsx)(x.Z,{resourceId:i.i.FIDocTypeDefaults,form:j,maxAccess:t,editMode:w,children:(0,a.jsx)(u.R,{children:(0,a.jsx)(I.Q,{children:(0,a.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:F.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(_.J.ReceiptVoucher),name:"dtId",required:!0,label:n.doctype,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:j.values,maxAccess:t,onChange:(e,n)=>{j&&j.setFieldValue("dtId",(null==n?void 0:n.recordId)||"")},error:j.touched.dtId&&!!j.errors.dtId})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:A.G.CashAccount.qry,parameters:"_type=0",required:!0,name:"cashAccountId",label:n.cashAccount,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:j.values,onChange:(e,n)=>{j.setFieldValue("cashAccountId",(null==n?void 0:n.recordId)||null)},error:j.touched.cashAccountId&&!!j.errors.cashAccountId,maxAccess:t})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{endpointId:F.r.Plant.qry,name:"plantId",label:n.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:j.values,maxAccess:t,onChange:(e,n)=>{let t=(null==n?void 0:n.recordId)||"";j.setFieldValue("plantId",t)},error:j.touched.plantId&&!!j.errors.plantId})})]})})})})}var j=()=>{let{getRequest:e,postRequest:n}=(0,r.useContext)(l.$),{platformLabels:t}=(0,r.useContext)(g.l),{stack:m}=(0,f.zY)();async function y(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:a=50}=n;return{...await e({extension:h.H.FIDocTypeDefaults.qry,parameters:"_startAt=".concat(t,"&_pageSize=").concat(a,"&filter=&_functionId=").concat(_.J.ReceiptVoucher)}),_startAt:t}}let{query:{data:x},labels:v,paginationParameters:D,refetch:A,access:F}=(0,o.J)({queryFn:y,endpointId:h.H.FIDocTypeDefaults.qry,datasetId:i.i.FIDocTypeDefaults}),j=(0,o.E)({endpointId:h.H.FIDocTypeDefaults.qry}),w=[{field:"dtName",headerName:v.doctype,flex:1},{field:"cashAccountName",headerName:v.cashAccount,flex:1},{field:"plantName",headerName:v.plant,flex:1}],q=async e=>{await n({extension:h.H.FIDocTypeDefaults.del,record:JSON.stringify(e)}),j(),c.ZP.success(t.Deleted)};function T(e){m({Component:N,props:{labels:v,recordId:null==e?void 0:e.dtId,maxAccess:F},width:500,height:360,title:v.doctypeDefault})}return(0,a.jsxs)(u.R,{children:[(0,a.jsx)(p.g,{children:(0,a.jsx)(s.Z,{onAdd:()=>{T()},maxAccess:F})}),(0,a.jsx)(I.Q,{children:(0,a.jsx)(d.Z,{columns:w,gridData:x,rowId:["dtId"],onEdit:e=>{T(e)},onDelete:q,isLoading:!1,pageSize:50,refetch:A,paginationParameters:D,paginationType:"api",maxAccess:F})})]})}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=23120)}),_N_E=e.O()}]);