(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73204],{82189:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-account-groups",function(){return r(60743)}])},60743:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return P}});var t=r(52322),a=r(2784),i=r(62202),s=r(69387),o=r(27723),c=r(65950),l=r(25870),d=r(71987),u=r(26612),p=r(31389),f=r(33625),m=r(62362),x=r(60218),h=r(48601),y=r(82737),g=r(19473),I=r(27423),C=r(8661),v=r(84100),A=r(5088),_=r(38449),F=r(74898),G=r(80983);function j(e){let{labels:n,maxAccess:r,recordId:s}=e,{getRequest:o,postRequest:f}=(0,a.useContext)(c.$),{platformLabels:j}=(0,a.useContext)(g.l),Z=(0,d.E)({endpointId:l.H.Group.qry}),{formik:P}=(0,G.c)({initialValues:{recordId:s||null,reference:"",name:"",type:"",nraRef:"",nraDescription:"",nraId:""},maxAccess:r,validateOnChange:!0,validationSchema:h.Ry({reference:h.Z_().required(),name:h.Z_().required(),type:h.Z_().required()}),onSubmit:async e=>{let n=await f({extension:l.H.Group.set,record:JSON.stringify(e)});e.recordId||P.setFieldValue("recordId",n.recordId),i.ZP.success(e.recordId?j.Edited:j.Added),Z()}}),b=!!P.values.recordId;(0,a.useEffect)(()=>{!async function(){if(s){let e=await o({extension:l.H.Group.get,parameters:"_recordId=".concat(s)});P.setValues(e.record)}}()},[]);let N=[{key:"Integration Account",condition:!0,onClick:"onClickGIA",masterSource:F.N.AccountGroup,disabled:!b}];return(0,t.jsx)(y.Z,{resourceId:u.i.FlAccountGroups,form:P,maxAccess:r,editMode:b,actions:N,children:(0,t.jsx)(p.R,{children:(0,t.jsx)(m.Q,{children:(0,t.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{name:"reference",label:n.reference,value:P.values.reference,required:!0,maxAccess:r,maxLength:"10",onChange:P.handleChange,onClear:()=>P.setFieldValue("reference",""),error:P.touched.reference&&!!P.errors.reference})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(A.Z,{name:"name",label:n.name,value:P.values.name,required:!0,maxLength:"50",maxAccess:r,onChange:P.handleChange,onClear:()=>P.setFieldValue("name",""),error:P.touched.name&&!!P.errors.name})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(I.U,{endpointId:_.r.NumberRange.snapshot,form:P,valueField:"reference",displayField:"description",name:"nraRef",label:n.numberRange,secondDisplayField:!0,secondValue:P.values.nraDescription,onChange:(e,n)=>{n?(P.setFieldValue("nraId",null==n?void 0:n.recordId),P.setFieldValue("nraRef",null==n?void 0:n.reference),P.setFieldValue("nraDescription",null==n?void 0:n.description)):(P.setFieldValue("nraId",null),P.setFieldValue("nraRef",""),P.setFieldValue("nraDescription",""))}})}),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(C.Z,{datasetId:v.v.FI_GROUP_TYPE,name:"type",label:n.type,valueField:"key",required:!0,displayField:"value",values:P.values,onChange:(e,n)=>{P.setFieldValue("type",(null==n?void 0:n.key)||"")},error:P.touched.type&&!!P.errors.type})})]})})})})}var Z=r(61802),P=()=>{let{getRequest:e,postRequest:n}=(0,a.useContext)(c.$),{platformLabels:r}=(0,a.useContext)(g.l),{stack:x}=(0,Z.zY)();async function h(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:t=50}=n;return await e({extension:l.H.Group.qry,parameters:"_startAt=".concat(r,"&_pageSize=").concat(t,"&filter=")})}let{query:{data:y},labels:I,paginationParameters:C,refetch:v,access:A,invalidate:_}=(0,d.J)({queryFn:h,endpointId:l.H.Group.qry,datasetId:u.i.FlAccountGroups}),F=[{field:"reference",headerName:I.reference,flex:1},{field:"name",headerName:I.name,flex:1},{field:"nraDescription",headerName:I.numberRange,flex:1}],G=async e=>{await n({extension:l.H.Group.del,record:JSON.stringify(e)}),_(),i.ZP.success(r.Deleted)};function P(e){x({Component:j,props:{labels:I,recordId:e,maxAccess:A},width:600,height:400,title:I.accountGroups})}return(0,t.jsxs)(p.R,{children:[(0,t.jsx)(f.g,{children:(0,t.jsx)(o.Z,{onAdd:()=>{P()},maxAccess:A})}),(0,t.jsx)(m.Q,{children:(0,t.jsx)(s.Z,{columns:F,gridData:y,rowId:["recordId"],onEdit:e=>{P(null==e?void 0:e.recordId)},onDelete:G,isLoading:!1,pageSize:50,refetch:v,paginationParameters:C,paginationType:"client",maxAccess:A})})]})}},74898:function(e,n,r){"use strict";r.d(n,{N:function(){return t}});let t={Global:0,AccountGroup:10,Account:11,CashAccountGroup:20,CashAccount:21,ItemGroup:30,Item:31,ItemCategory:32,Site:33,ExpenseType:41,CostType:42,ProductionOverhead:51,TaxCode:12,PayrollGLGroup:61,PayrollEntitlementDeduction:62,AssetGroup:71,AssetClass:72}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=82189)}),_N_E=e.O()}]);