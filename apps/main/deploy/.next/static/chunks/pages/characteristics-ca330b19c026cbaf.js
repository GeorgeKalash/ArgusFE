(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94666],{51616:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/characteristics",function(){return t(65774)}])},65774:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var s=t(52322),l=t(2784),r=t(62202),n=t(69387),i=t(27723),d=t(65950),o=t(26612),c=t(29326),u=t(9522),m=t(60218),h=t(48601),x=t(78711),v=t(89330),b=t(5088),p=t(82737),_=t(8661),C=t(71987),g=t(39812),f=t(68676),y=t(84100),j=t(31389),Z=t(62362),N=t(19473),F=t(19689),T=e=>{let{labels:a,editMode:t,maxAccess:n,setEditMode:i,setStore:c,store:u}=e,{postRequest:T,getRequest:I}=(0,l.useContext)(d.$),{platformLabels:A}=(0,l.useContext)(N.l),{recordId:S}=u,P=(0,C.E)({endpointId:f.y.CharacteristicsGeneral.qry}),V=(0,x.TA)({validateOnChange:!0,initialValues:{recordId:null,name:null,dataType:null,propertyName:null,isRange:!1,isMultiple:!1,allowNegative:!1,caseSensitive:!1,textSize:"",validFrom:null},validationSchema:h.Ry({name:h.Z_().required(),dataType:h.Z_().required(),propertyName:h.Z_().required(),validFrom:h.Z_().required()}),onSubmit:async e=>{await q(e)}}),q=async e=>{let a=(null==e?void 0:e.recordId)||"",t=(null==e?void 0:e.validFrom)&&(0,g.ku)(null==e?void 0:e.validFrom),s={...e,validFrom:t};await T({extension:f.y.CharacteristicsGeneral.set,record:JSON.stringify(s)}).then(e=>{a?(P(),r.ZP.success(A.Edited)):(i(!0),c(a=>({...a,recordId:e.recordId})),V.setFieldValue("recordId",e.recordId),V.setFieldValue("validFrom",(0,g.a1)(e.validFrom)),r.ZP.success(A.Added),P())})};(0,l.useEffect)(()=>{S&&w(S)},[S]);let w=e=>{I({extension:f.y.CharacteristicsGeneral.get,parameters:"_recordId=".concat(e)}).then(e=>{e.record.validFrom=(0,g.a1)(e.record.validFrom),V.setValues(e.record),i(!0)})};return(0,s.jsx)(p.Z,{form:V,resourceId:o.i.Characteristics,maxAccess:n,editMode:t,children:(0,s.jsx)(j.R,{children:(0,s.jsx)(Z.Q,{children:(0,s.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(b.Z,{name:"name",label:a.name,value:V.values.name,required:!0,maxLength:"50",maxAccess:n,onChange:V.handleChange,onClear:()=>V.setFieldValue("name",""),error:V.touched.name&&!!V.errors.name})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(_.Z,{datasetId:y.v.DR_CHA_DATA_TYPE,name:"dataType",label:a.dataType,required:!0,valueField:"key",displayField:"value",values:V.values,onClear:()=>V.setFieldValue("dataType",""),onChange:(e,a)=>{V.setFieldValue("dataType",(null==a?void 0:a.key)||"")},error:V.touched.dataType&&!!V.errors.dataType})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(b.Z,{name:"propertyName",label:a.propertyName,value:V.values.propertyName,required:!0,onChange:V.handleChange,maxLength:"20",maxAccess:n,onClear:()=>V.setFieldValue("propertyName",""),error:V.touched.propertyName&&!!V.errors.propertyName})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"isRange",value:V.values.isRange,onChange:e=>V.setFieldValue("isRange",e.target.checked),label:a.isRange,maxAccess:n})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"isMultiple",value:V.values.isMultiple,onChange:e=>V.setFieldValue("isMultiple",e.target.checked),label:a.isMultiple,maxAccess:n})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"allowNegative",value:V.values.allowNegative,onChange:e=>V.setFieldValue("allowNegative",e.target.checked),label:a.allowNegative,maxAccess:n})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(F.Z,{name:"caseSensitive",value:V.values.caseSensitive,onChange:e=>V.setFieldValue("caseSensitive",e.target.checked),label:a.caseSensitive,maxAccess:n})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(b.Z,{name:"textSize",label:a.textSize,value:V.values.textSize,onChange:V.handleChange,maxAccess:n,type:"number",onClear:()=>V.setFieldValue("textSize",""),error:V.touched.textSize&&!!V.errors.textSize})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(v.Z,{name:"validFrom",label:a.validFrom,required:!0,value:V.values.validFrom,onChange:V.setFieldValue,maxAccess:n,onClear:()=>V.setFieldValue("validFrom",""),error:V.touched.validFrom&&!!V.errors.validFrom})})]})})})})},I=t(54074),A=e=>{let{labels:a,maxAccess:t,getValueGridData:n,recordId:i,seqNo:o,window:c,chId:u}=e,{postRequest:v,getRequest:p}=(0,l.useContext)(d.$),{platformLabels:_}=(0,l.useContext)(N.l),C=(0,x.TA)({initialValues:{value:null},validateOnChange:!0,validationSchema:h.Ry({value:h.Z_().required()}),onSubmit:async e=>{await y(e)}}),y=async e=>{e.chId=u,e.seqNo=o,await v({extension:f.y.CharacteristicsValues.set,record:JSON.stringify(e)}).then(a=>{n(u),r.ZP.success(e.recordId?_.Edited:_.Added),c.close()})};(0,l.useEffect)(()=>{i&&F(i)},[i]);let F=e=>{console.log(e);let a="_chId=".concat(e,"&_seqNo=").concat(o);p({extension:f.y.CharacteristicsValues.get,parameters:a}).then(e=>{e.record.validFrom=(0,g.a1)(e.record.validFrom),C.setValues(e.record)})};return(0,s.jsx)(I.Z,{onSave:C.handleSubmit,maxAccess:t,children:(0,s.jsx)(j.R,{children:(0,s.jsx)(Z.Q,{children:(0,s.jsx)(m.ZP,{container:!0,spacing:2,children:(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(b.Z,{name:"value",label:a.values,value:C.values.value,required:!0,maxLength:"50",maxAccess:t,onChange:C.handleChange,onClear:()=>C.setFieldValue("value",""),error:C.touched.value&&!!C.errors.value})})})})})})},S=t(61802),P=e=>{let{labels:a,store:t,maxAccess:o}=e,{getRequest:c,postRequest:u}=(0,l.useContext)(d.$),{platformLabels:m}=(0,l.useContext)(N.l),[h,x]=(0,l.useState)(0),[v,b]=(0,l.useState)(),{stack:p}=(0,S.zY)(),{recordId:_}=t,C=[{field:"value",headerName:a.value,flex:1}];function g(e,s){p({Component:A,props:{labels:a,chId:t.recordId,recordId:e,seqNo:s,maxAccess:o,getValueGridData:y},width:400,height:400,title:a.values})}let y=e=>{c({extension:f.y.CharacteristicsValues.qry,parameters:"_chId=".concat(e)}).then(e=>{b(e),x(Math.max(...e.list.map(e=>e.seqNo),0))})};return(0,l.useEffect)(()=>{_&&y(_)},[_]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{onAdd:()=>{g("",h+1)},maxAccess:o}),(0,s.jsx)(n.Z,{columns:C,gridData:v,rowId:["seqNo"],onEdit:e=>{g(null==e?void 0:e.chId,null==e?void 0:e.seqNo)},onDelete:e=>{u({extension:f.y.CharacteristicsValues.del,record:JSON.stringify(e)}).then(e=>{y(_),r.ZP.success(m.Deleted)})},isLoading:!1,maxAccess:o,pagination:!1})]})},V=e=>{let{height:a,recordId:t,labels:r,maxAccess:n}=e,[i,d]=(0,l.useState)(0),[o,m]=(0,l.useState)(t),[h,x]=(0,l.useState)({recordId:t||null,countries:[]}),v=[{label:r.characteristics},{label:r.values,disabled:!h.recordId}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Y,{tabs:v,activeTab:i,setActiveTab:d,maxAccess:n}),(0,s.jsx)(c.Z,{height:a,index:0,value:i,maxAccess:n,children:(0,s.jsx)(T,{labels:r,setEditMode:m,setStore:x,store:h,editMode:o,maxAccess:n})}),(0,s.jsx)(c.Z,{height:a,index:1,value:i,maxAccess:n,children:(0,s.jsx)(P,{labels:r,setEditMode:m,setStore:x,maxAccess:n,store:h})})]})},q=t(33625),w=()=>{let{getRequest:e,postRequest:a}=(0,l.useContext)(d.$),{platformLabels:t}=(0,l.useContext)(N.l),{stack:c}=(0,S.zY)(),{query:{data:u},labels:m,paginationParameters:h,invalidate:x,refetch:v,access:b}=(0,C.J)({queryFn:p,endpointId:f.y.CharacteristicsGeneral.qry,datasetId:o.i.Characteristics});async function p(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:t=0,_pageSize:s=50}=a,l="_startAt=".concat(t,"&_pageSize=").concat(s);return{...await e({extension:f.y.CharacteristicsGeneral.qry,parameters:l}),_startAt:t}}let _=[{field:"name",headerName:m.name,flex:1},{field:"textSize",headerName:m.textSize,flex:1},{field:"validFrom",headerName:m.validFrom,type:"date",flex:1}];function g(e){c({Component:V,props:{labels:m,recordId:e||null,maxAccess:b},width:600,title:m.characteristics})}return(0,s.jsxs)(j.R,{children:[(0,s.jsx)(q.g,{children:(0,s.jsx)(i.Z,{onAdd:()=>{g()},maxAccess:b})}),(0,s.jsx)(Z.Q,{children:(0,s.jsx)(n.Z,{columns:_,gridData:u,rowId:["recordId"],paginationParameters:h,paginationType:"api",refetch:v,onEdit:e=>{g(null==e?void 0:e.recordId)},onDelete:e=>{a({extension:f.y.CharacteristicsGeneral.del,record:JSON.stringify(e)}).then(e=>{r.ZP.success(t.Deleted),x()})},isLoading:!1,pageSize:50,maxAccess:b})})]})}},29326:function(e,a,t){"use strict";var s=t(52322);t(2784);var l=t(23925),r=t(13980),n=t.n(r),i=t(95291),d=t.n(i),o=t(65947);let c=e=>{var a,t,r;let{children:n,value:i,index:c,maxAccess:u,...m}=e,h="".concat(e.name||"tab",".").concat(c),{accessLevel:x}=null!==(r=(null!==(t=null==u?void 0:null===(a=u.record)||void 0===a?void 0:a.controls)&&void 0!==t?t:[]).find(e=>e.controlId===h))&&void 0!==r?r:{accessLevel:0};if(x===o.A1)return null;let v=i===c;return(0,s.jsx)(l.Z,{role:"tabpanel",hidden:!v,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(d().tabPanel," ").concat(v?d().active:d().hidden),...m,children:n})};c.propTypes={children:n().node,index:n().number.isRequired,value:n().number.isRequired},a.Z=c},9522:function(e,a,t){"use strict";t.d(a,{Y:function(){return m}});var s=t(52322),l=t(23925),r=t(54582),n=t(68696),i=t(44258),d=t(2784),o=t(99266),c=t(52614),u=t.n(c);let m=e=>{var a,t,c,m,h;let{tabs:x,activeTab:v,setActiveTab:b,maxAccess:p,name:_="tab"}=e,C=(null==p?void 0:null===(t=p.record)||void 0===t?void 0:null===(a=t.controls)||void 0===a?void 0:a.filter(e=>{var a;return 4===e.accessLevel&&(null===(a=e.controlId)||void 0===a?void 0:a.startsWith("".concat(_,".")))}).map(e=>e.controlId.split(".")[1]))||[],g=null==x?void 0:null===(c=x.map((e,a)=>({...e,id:a})))||void 0===c?void 0:c.filter((e,a)=>!C.includes(String(a))),f=null===(m=g[v])||void 0===m?void 0:m.id,y=null===(h=g[v])||void 0===h?void 0:h.disabled;return(0,d.useEffect)(()=>{f>=0&&!y&&v!=f&&b(f)},[]),(0,s.jsx)(l.Z,{className:u().tabsContainer,children:(0,s.jsx)(l.Z,{className:u().tabsWrapper,children:(0,s.jsx)(r.Z,{value:v,onChange:(e,a)=>b(a),variant:"scrollable",scrollButtons:g.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==g?void 0:g.map(e=>(0,s.jsx)(n.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,s.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,s.jsx)("span",{children:e.label}),e.id===v&&(null==e?void 0:e.onRefetch)&&(0,s.jsx)(i.Z,{size:"small",className:u().refreshButton,onClick:a=>{a.stopPropagation(),e.onRefetch()},children:(0,s.jsx)(o.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=51616)}),_N_E=e.O()}]);