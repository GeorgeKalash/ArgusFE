(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11089],{59213:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/spare-parts",function(){return r(54325)}])},54325:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(52322),s=r(2784),n=r(62202),l=r(69387),d=r(27723),o=r(65950),i=r(61802),p=r(71987),c=r(26612),g=r(31389),u=r(33625),y=r(62362),P=r(19473),m=r(54736),I=r(60218),h=r(48601),R=r(82737),q=r(5088),v=r(80983),T=r(8661),S=r(2454),x=r(19689),E=r(27423),D=r(65215);function f(e){var t,r,l,d;let{labels:i,maxAccess:u,recordId:f,window:N}=e,{getRequest:O,postRequest:V}=(0,s.useContext)(o.$),{platformLabels:C}=(0,s.useContext)(P.l),k=(0,p.E)({endpointId:m.m.SpareParts.page}),{formik:Q}=(0,v.c)({maxAccess:u,initialValues:{recordId:null,partNo:"",name:"",categoryId:null,vendorId:null,manufacturerId:null,vendorPartNo:"",barcode:"",trackInventory:!1,itemId:null,sku:"",itemName:""},validationSchema:h.Ry({name:h.Z_().required(),partNo:h.Z_().required(),itemId:h.Z_().nullable().when("trackInventory",{is:!0,then:e=>e.required(),otherwise:e=>e.nullable()})}),onSubmit:async e=>{let t=await V({extension:m.m.SpareParts.set,record:JSON.stringify(e)});n.ZP.success(e.recordId?C.Edited:C.Added),Q.setFieldValue("recordId",t.recordId),k(),N.close()}}),M=!!Q.values.recordId;return(0,s.useEffect)(()=>{!async function(){if(f){let e=await O({extension:m.m.SpareParts.get,parameters:"_recordId=".concat(f)});Q.setValues(e.record)}}()},[]),(0,a.jsx)(R.Z,{resourceId:c.i.SpareParts,form:Q,maxAccess:u,editMode:M,children:(0,a.jsx)(g.R,{children:(0,a.jsx)(y.Q,{children:(0,a.jsxs)(I.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(q.Z,{name:"partNo",label:i.partNo,value:null==Q?void 0:null===(t=Q.values)||void 0===t?void 0:t.partNo,maxAccess:u,maxLength:24,required:!0,onChange:Q.handleChange,onClear:()=>Q.setFieldValue("partNo",""),error:Q.touched.partNo&&!!Q.errors.partNo})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(q.Z,{name:"name",label:i.name,value:Q.values.name,required:!0,maxAccess:u,maxLength:"50",onChange:Q.handleChange,onClear:()=>Q.setFieldValue("name",""),error:Q.touched.name&&!!Q.errors.name})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:m.m.SpCategory.qry,name:"categoryId",label:i.categoryId,values:Q.values,valueField:"recordId",displayField:"name",maxAccess:u,onChange:(e,t)=>{Q.setFieldValue("categoryId",(null==t?void 0:t.recordId)||null)},error:Q.touched.categoryId&&!!Q.errors.categoryId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:S.y.Vendor.qry,parameters:"_sortField=reference&_params=&_startAt=0&_pageSize=1000",name:"vendorId",label:i.vendorId,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:Q.values,valueField:"recordId",displayField:["reference","name"],maxAccess:u,onChange:(e,t)=>{Q.setFieldValue("vendorId",(null==t?void 0:t.recordId)||null)},error:Q.touched.vendorId&&!!Q.errors.vendorId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(T.Z,{endpointId:m.m.SpManufacturer.qry,name:"manufacturerId",label:i.manufacturerId,values:Q.values,valueField:"recordId",displayField:"name",maxAccess:u,onChange:(e,t)=>{Q.setFieldValue("manufacturerId",(null==t?void 0:t.recordId)||null)},error:Q.touched.manufacturerId&&!!Q.errors.manufacturerId})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(q.Z,{name:"vendorPartNo",label:i.vendorPartNo,value:null==Q?void 0:null===(r=Q.values)||void 0===r?void 0:r.vendorPartNo,maxAccess:u,maxLength:24,onChange:Q.handleChange,onClear:()=>Q.setFieldValue("vendorPartNo",""),error:Q.touched.vendorPartNo&&!!Q.errors.vendorPartNo})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(q.Z,{name:"barcode",label:i.barcode,value:null==Q?void 0:null===(l=Q.values)||void 0===l?void 0:l.barcode,maxAccess:u,onChange:Q.handleChange,onClear:()=>Q.setFieldValue("barcode",""),error:Q.touched.barcode&&!!Q.errors.barcode})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(x.Z,{name:"trackInventory",value:null===(d=Q.values)||void 0===d?void 0:d.trackInventory,onChange:e=>{e.target.checked||(Q.setFieldValue("itemId",null),Q.setFieldValue("sku",""),Q.setFieldValue("itemName","")),Q.setFieldValue("trackInventory",e.target.checked)},label:i.trackInventory,maxAccess:u})}),(0,a.jsx)(I.ZP,{item:!0,xs:12,children:(0,a.jsx)(E.U,{endpointId:D.$.Item.snapshot,name:"itemId",label:i.sku,valueField:"sku",displayField:"name",readOnly:!Q.values.trackInventory,required:Q.values.trackInventory,valueShow:"sku",secondValueShow:"itemName",form:Q,columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}],onChange:(e,t)=>{Q.setFieldValue("itemName",(null==t?void 0:t.name)||""),Q.setFieldValue("sku",(null==t?void 0:t.sku)||""),Q.setFieldValue("itemId",(null==t?void 0:t.recordId)||null)},displayFieldWidth:2,errorCheck:"itemId",maxAccess:u})})]})})})})}var N=()=>{let{getRequest:e,postRequest:t}=(0,s.useContext)(o.$),{platformLabels:r}=(0,s.useContext)(P.l),{stack:I}=(0,i.zY)();async function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50}=t;return{...await e({extension:m.m.SpareParts.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a,"&_filter=")}),_startAt:r}}let{query:{data:R},labels:q,invalidate:v,paginationParameters:T,refetch:S,access:x}=(0,p.J)({queryFn:h,endpointId:m.m.SpareParts.page,datasetId:c.i.SpareParts}),E=[{field:"name",headerName:q.name,flex:1},{field:"vendorPartNo",headerName:q.vendorPartNo,flex:1},{field:"barcode",headerName:q.barcode,flex:1}],D=async e=>{await t({extension:m.m.SpareParts.del,record:JSON.stringify(e)}),v(),n.ZP.success(r.Deleted)};function N(e){I({Component:f,props:{labels:q,recordId:e,maxAccess:x},width:700,height:500,title:q.SpareParts})}return(0,a.jsxs)(g.R,{children:[(0,a.jsx)(u.g,{children:(0,a.jsx)(d.Z,{onAdd:()=>{N()},maxAccess:x})}),(0,a.jsx)(y.Q,{children:(0,a.jsx)(l.Z,{name:"table",columns:E,gridData:R,rowId:["recordId"],onEdit:e=>{N(null==e?void 0:e.recordId)},onDelete:D,deleteConfirmationType:"strict",pageSize:50,refetch:S,paginationParameters:T,paginationType:"api",maxAccess:x})})]})}},2454:function(e,t,r){"use strict";r.d(t,{y:function(){return s}});let a="PU.asmx/",s={VendorGroups:{qry:a+"qryGRP",page:a+"pageGRP",get:a+"getGRP",set:a+"setGRP",del:a+"delGRP"},PriceList:{qry:a+"qryPRI",del:a+"delPRI",get:a+"getPRI",set:a+"setPRI"},PUOrderStatus:{qry:a+"qryPOS",page:a+"pagePOS",get:a+"getPOS",set:a+"setPOS",del:a+"delPOS"},DeliveryMethods:{qry:a+"qryDM",page:a+"pageDM",get:a+"getDM",set:a+"setDM",del:a+"delDM"},PaymentTerms:{qry:a+"qryPT",page:a+"pagePT",get:a+"getPT",set:a+"setPT",del:a+"delPT"},Vendor:{snapshot:a+"snapshotVEN",qry:a+"qryVEN",page:a+"pageVEN",get:a+"getVEN",set:a+"setVEN",del:a+"delVEN"},Address:{qry:a+"qryAD",page:a+"pageAD",get:a+"getAD",set:a+"setAD",del:a+"delAD"},DocumentTypeDefault:{qry:a+"qryDTD",get:a+"getDTD",set:a+"setDTD",del:a+"delDTD",page:a+"pageDTD"},PurchaseInvoiceHeader:{qry:a+"qryIVC",get:a+"getIVC",get2:a+"get2IVC",level2_PU:a+"level2_PU",set:a+"setIVC",del:a+"delIVC",snapshot:a+"snapshotIVC",set2:a+"set2IVC",post:a+"postIVC",unpost:a+"unpostIVC",generate:a+"generateIVC",preview:a+"previewIVC",sync:a+"syncIVC",verify:a+"verifyIVC"},Invoice:{snapshot:a+"snapshotINV"},PurchaseReturnHeader:{set2:a+"set2IVR",post:a+"postIVR",unpost:a+"unpostIVR",del:a+"delIVR",qry:a+"qryIVR",snapshot:a+"snapshotIVR"},VendorPrice:{get:a+"getPRI2"},ItemCostHistory:{qry:a+"qryIPH"},ItemPromotion:{qry:a+"qryIVIM"},Serials:{qry:a+"qrySRL",import:a+"importSRL",last:a+"lastSRL",sync:a+"syncSRL"},Shipment:{get:a+"getSHP",set2:a+"set2SHP",del:a+"delSHP",page:a+"pageSHP",snapshot:a+"snapshotSHP",post:a+"postSHP",unpost:a+"unpostSHP",gen:a+"genSHP"},ShipmentItem:{qry:a+"qrySHI"},UnpostedOrderPack:{get:a+"openORD",snapshot:a+"snapshotORD"},PurchaseOrder:{page:a+"pageORD",snapshot:a+"snapshotORD",del:a+"delORD",set2:a+"set2ORD",get2:a+"get2ORD",close:a+"closeORD",reopen:a+"reopenORD",terminate:a+"terminateORD",transfer:a+"transfer1ORD"},PurchaseRequisition:{snapshot:a+"snapshotREQ",page:a+"pageREQ",get:a+"getREQ",set:a+"setREQ",del:a+"delREQ",cancel:a+"cancelREQ",reopen:a+"reopenREQ",close:a+"closeREQ"},RequisitionDetail:{qry:a+"qryREI",set:a+"setREI",get:a+"getREI",del:a+"delREI"},QuotationItem:{preview:a+"previewQTI",qry:a+"qryQTI"},OrderItem:{qry:a+"qryORI",set2:a+"set2ORI"},PUDraftReturn:{set2:a+"set2DRE",get:a+"getDRE",page:a+"pageDRE",snapshot:a+"snapshotDRE",del:a+"delDRE",post:a+"postDRE"},PUDraftReturnSerial:{get2:a+"get2DRS",qry:a+"qryDRS",del:a+"delDRS",append:a+"appendDRS",batch:a+"batchDRS"},FinancialGroup:{qry:a+"qryFII",set2:a+"set2FII"},PUInvoiceRetBalance:{balance:a+"balanceRET"},ItemLastPurchaseInfo:{last:a+"lastIVI"},PurchaseQuotation:{page:a+"pageQTN",set2:a+"set2QTN",get:a+"getQTN",del:a+"delQTN",snapshot:a+"snapshotQTN"},GenerateQTNPRPack:{gen:a+"genQTN"},GeneratePOPRPack:{gen:a+"genPO",gen2:a+"gen2PO"}}},54736:function(e,t,r){"use strict";r.d(t,{m:function(){return s}});let a="RS.asmx/",s={RepairName:{page:a+"pageRNA",qry:a+"qryRNA",get:a+"getRNA",set:a+"setRNA",del:a+"delRNA"},WorkOrderTypes:{page:a+"pageWOT",qry:a+"qryWOT",get:a+"getWOT",set:a+"setWOT",del:a+"delWOT"},RepairType:{page:a+"pageRT",get:a+"getRT",set:a+"setRT",del:a+"delRT"},SpareParts:{snapshot:a+"snapshotSP",page:a+"pageSP",get:a+"getSP",set:a+"setSP",del:a+"delSP"},InspectionTemplate:{get2:a+"get2ITE",page:a+"pageITE",set2:a+"set2ITE",del:a+"delITE"},Department:{page:a+"pageDEP",get:a+"getDEP",set:a+"setDEP",del:a+"delDEP"},Warehouse:{page:a+"pageWH",qry:a+"qryWH",set:a+"setWH",get:a+"getWH",del:a+"delWH"},PreventiveMaintenanceTasks:{qry:a+"qryPMT",page:a+"pagePMT",qry:a+"qryPMT",get:a+"getPMT",set:a+"setPMT",del:a+"delPMT"},Equipment:{qry:a+"qryEQP",page:a+"pageEQP",get:a+"getEQP",set:a+"setEQP",del:a+"delEQP",snapshot:a+"snapshotEQP"},SpManufacturer:{page:a+"pageSPM",get:a+"getSPM",set:a+"setSPM",del:a+"delSPM",qry:a+"qrySPM"},JobPosition:{page:a+"pagePOS",qry:a+"qryPOS",get:a+"getPOS",set:a+"setPOS",del:a+"delPOS"},SpCategory:{page:a+"pageSPC",get:a+"getSPC",set:a+"setSPC",del:a+"delSPC",qry:a+"qrySPC"},MaintenanceTemplates:{page:a+"pageMTE",get:a+"getMTE",set:a+"setMTE",del:a+"delMTE",qry:a+"qryMTE"},MaintenanceTemplateTask:{qry:a+"qryMTT",get:a+"getMTT",set:a+"setMTT",del:a+"delMTT"},RsLabors:{qry:a+"qryLBR",snapshot:a+"snapshotLBR",page:a+"pageLBR",set:a+"setLBR",get:a+"getLBR",del:a+"delLBR",qry:a+"qryLBR"},WorkOrder:{page:a+"qryWO",get:a+"getWO",set:a+"setWO",del:a+"delWO",post:a+"postWO"},WorkTask:{qry:a+"qryWTK",get:a+"getWTK",set:a+"setWTK",del:a+"delWTK"},EquipmentType:{qry:a+"qryEQT",get:a+"getEQT",set:a+"setEQT",del:a+"delEQT"},WorkOrderParts:{qry:a+"qryWOP",set2:a+"set2WOP"},WorkOrderLabors:{qry:a+"qryWOL",set2:a+"set2WOL"},RepairRequest:{page:a+"pageREQ",get:a+"getREQ",set:a+"setREQ",del:a+"delREQ"},Employee:{snapshot:a+"snapshotEMP"},RepairType:{qry:a+"qryRT"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=59213)}),_N_E=e.O()}]);