(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57755],{70120:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/correspondent-control",function(){return s(79838)}])},79838:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return R}});var t=s(52322),o=s(60218),l=s(2784),n=s(71987),d=s(65950),a=s(26612),c=s(8661),i=s(84100),u=s(38449),p=s(78711),y=s(48601),I=s(27423),C=s(53621),g=s(76399),q=s(62202),m=s(31389),P=s(33625),v=s(62362),h=s(19473),F=s(54074),R=()=>{let{postRequest:e,getRequest:r}=(0,l.useContext)(d.$),{platformLabels:s}=(0,l.useContext)(h.l),R={countryId:"",dispersalType:"",corId:0,rows:[{id:1,controlId:"",controlName:"",accessLevel:"",accessLevelName:"",corId:"",countryId:"",resourceId:""}]},S=(0,p.TA)({initialValues:R,validateOnChange:!0,validationSchema:y.Ry({countryId:y.Z_().required(),dispersalType:y.Z_().required()}),onSubmit:async r=>{let t={countryId:r.countryId,dispersalType:r.dispersalType,corId:r.corId},o=r.rows.filter(e=>e.accessLevel).map(e=>({controlId:e.controlId,controlName:e.controlName,accessLevel:e.accessLevel,corId:r.corId,resourceId:r.dispersalType,countryId:r.countryId}));await e({extension:C.d.CorrespondentControl.set,record:JSON.stringify({header:t,items:o})})&&q.ZP.success(s.Updated)}});async function f(e){let{filters:s}=e,t=null==s?void 0:s.countryId,o=null==s?void 0:s.dispersalType,l=(null==s?void 0:s.corId)==null?0:null==s?void 0:s.corId;if(!s||!t||!o)return{list:[]};if(""!==o&&""!==l){let e=await r({extension:u.r.ResourceControl.qry,parameters:"_resourceId=".concat(o)}),s=await r({extension:C.d.CorrespondentControl.qry,parameters:"_countryId=".concat(t,"&_corId=").concat(l,"&_resourceId=").concat(o)}),n=e.list.map(e=>{let r={controlId:e.id,controlName:e.name,accessLevel:null,accessLevelName:null},t=s.list.find(e=>r.controlId===e.controlId);return t&&(r.accessLevel=t.accessLevel,r.accessLevelName=t.accessLevelName),r});return S.setValues({...S.values,rows:n.map((e,r)=>({id:r+1,...e}))}),{list:n}}}let{labels:E,filterBy:O,access:T,filters:N}=(0,n.J)({datasetId:a.i.CorrespondentControl,filter:{endpointId:u.r.ResourceControl.qry,filterFn:f}}),x=(e,r)=>{console.log(e,r),r&&("countryId"===e&&O("countryId",r),"dispersalType"===e&&O("dispersalType",r),"corId"===e&&O("corId",r))};return(0,t.jsx)(F.Z,{onSave:S.handleSubmit,initialValues:R,maxAccess:T,fullSize:!0,children:(0,t.jsxs)(m.R,{children:[(0,t.jsx)(P.g,{children:(0,t.jsxs)(o.ZP,{container:!0,spacing:2,p:2,children:[(0,t.jsx)(o.ZP,{item:!0,xs:2,children:(0,t.jsx)(c.Z,{endpointId:u.r.Country.qry,name:"countryId",label:E.country,valueField:"recordId",required:!0,displayField:["name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],values:S.values,displayFieldWidth:1.75,onChange:(e,r)=>{r&&(S.setFieldValue("countryId",null==r?void 0:r.recordId),x("countryId",null==r?void 0:r.recordId))},error:S.touched.countryId&&!!S.errors.countryId,maxAccess:T})}),(0,t.jsx)(o.ZP,{item:!0,xs:2,children:(0,t.jsx)(c.Z,{datasetId:i.v.BENEFICIARY_RESOURCEIDS,label:E.dispersalType,required:!0,name:"dispersalType",valueField:"key",displayField:"value",values:S.values,onChange:(e,r)=>{r&&(x("dispersalType",null==r?void 0:r.key),S.values.corId?x("corId",S.values.corId):x("corId",0),S.setFieldValue("dispersalType",null==r?void 0:r.key))},error:S.touched.dispersalType&&!!S.errors.dispersalType})}),(0,t.jsx)(o.ZP,{item:!0,xs:4,children:(0,t.jsx)(I.U,{endpointId:C.d.Correspondent.snapshot,valueField:"reference",displayField:"name",name:"corId",label:E.correspondent,form:S,displayFieldWidth:2,firstFieldWidth:5,valueShow:"corRef",secondValueShow:"corName",maxAccess:T,onChange:async(e,r)=>{r?(x("corId",null==r?void 0:r.recordId),S.setFieldValue("corId",null==r?void 0:r.recordId),S.setFieldValue("corName",(null==r?void 0:r.name)||""),S.setFieldValue("corRef",(null==r?void 0:r.reference)||"")):(x("corId",0),S.setFieldValue("corId",0),S.setFieldValue("corName",""),S.setFieldValue("corRef",""))},onClear:()=>{x("corId",0),S.setFieldValue("corId",0),S.setFieldValue("corName",""),S.setFieldValue("corRef","")},errorCheck:"corId"})})]})}),(0,t.jsx)(v.Q,{children:(0,t.jsx)(g._,{onChange:e=>S.setFieldValue("rows",e),value:S.values.rows,error:S.errors.rows,allowDelete:!1,columns:[{component:"textfield",name:"controlId",label:E.controlId,props:{readOnly:!0}},{component:"textfield",name:"controlName",label:E.controlName,props:{readOnly:!0}},{component:"resourcecombobox",label:E.accessLevel,name:"accesslevelName",props:{datasetId:i.v.AU_RESOURCE_CONTROL_ACCESS_LEVEL,displayField:"value",valueField:"key",mapping:[{from:"key",to:"accessLevel"},{from:"value",to:"accessLevelName"}]}}]})})]})})}},53621:function(e,r,s){"use strict";s.d(r,{d:function(){return o}});let t="RTSET.asmx/",o={Interface:{qry:t+"qryITF",page:t+"pageITF",get:t+"getITF",set:t+"setITF",del:t+"delITF"},ProductMaster:{qry:t+"qryPRO",page:t+"pagePRO",get:t+"getPRO",set:t+"setPRO",del:t+"delPRO",snapshot:t+"snapshotPRO"},ProductCountries:{qry:t+"qryPCO",set2:t+"set2PCO"},ProductMonetaries:{qry:t+"qryPMO",set2:t+"set2PMO"},ProductDispersal:{qry:t+"qryPDI",get:t+"getPDI",set:t+"setPDI",del:t+"delPDI"},ProductSchedules:{qry:t+"qryPSC",set2:t+"set2PSC"},ProductScheduleRanges:{qry:t+"qryPSR",set2:t+"set2PSR"},ProductScheduleFees:{qry:t+"qryPSF",set2:t+"set2PSF"},ProductDispersalAgents:{qry:t+"qryPDA",set2:t+"set2PDA"},Correspondent:{page:t+"pageCOR",qry:t+"qryCOR",qry2:t+"qry2COR",get:t+"getCOR",set:t+"setCOR",del:t+"delCOR",snapshot:t+"snapshotCOR"},CorrespondentCountry:{qry:t+"qryCCO",get:t+"getCCO",set2:t+"set2CCO",del:t+"delCCO"},CorrespondentCurrency:{qry:t+"qryCCU",get:t+"getCCU",set2:t+"set2CCU",del:t+"delCCU"},CorrespondentAgents:{qry:t+"qryAGT",page:t+"pageAGT",get:t+"getAGT",set:t+"setAGT",del:t+"delAGT"},CorrespondentAgentBranches:{qry:t+"qryABR",page:t+"pageABR",get:t+"getABR",set:t+"setABR",del:t+"delABR"},CorrespondentExchangeMap:{qry:t+"qryEXC",set2:t+"set2EXC"},CurrencyExchangeMap:{qry:t+"qryEXG",set2:t+"set2EXG"},CorrespondentExchangeBuyMap:{qry:t+"qryEXB",set2:t+"set2EXB"},ExchangeRates:{get:t+"getEXB",qry:t+"qryEXG2",set2:t+"set2EXB"},RtDefault:{qry:t+"qryDE",set2:t+"set2DE"},Profession:{qry:t+"qryPFN",page:t+"pagePFN",get:t+"getPFN",set:t+"setPFN",del:t+"delPFN",snapshot:t+"snapshotPFN"},ClientIndividual:{qry:t+"qryCLI"},SalaryRange:{qry:t+"qrySRA",page:t+"pageSRA",get:t+"getSRA",set:t+"setSRA",del:t+"delSRA"},SourceOfIncome:{qry:t+"qrySI",page:t+"pageSI",snapshot:t+"snapshotSI",get:t+"getSI",set:t+"setSI",del:t+"delSI"},CorrespondentControl:{qry:t+"qryCCL",set:t+"set2CCL"},InterfaceMaps:{qry:t+"qryIFM",get:t+"getIFM",set2:t+"set2IFM"},SourceOfIncomeType:{qry:t+"qrySIT",snapshot:t+"snapshotSIT",page:t+"pageSIT",get:t+"getSIT",set:t+"setSIT",del:t+"delSIT"},ProfessionGroups:{qry:t+"qryPFG",page:t+"pagePFG",snapshot:t+"snapshotPFG",get:t+"getPFG",set:t+"setPFG",del:t+"delPFG"},CorrespondentGroup:{qry:t+"qryCGP",page:t+"pageCGP",get:t+"getCGP",set:t+"setCGP",del:t+"delCGP"},ExtraIncome:{qry:t+"qryEI",get:t+"getEI",del:t+"delEI",page:t+"pageEI",snapshot:t+"snapshotEI",set:t+"setEI"},CountryRisk:{page:t+"pageCOU",get:t+"getCOU",set:t+"setCOU",del:t+"delCOU"},CorDispControl:{qry:t+"qryCDC",set2:t+"set2CDC"},CorrespondentDispersal:{qry:t+"qryCDM",get:t+"getCDM",del:t+"delCDM",set2:t+"set2CDM"},CorrespondentDispersalRate:{qry:t+"qryCDR",set2:t+"set2CDR"}}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=70120)}),_N_E=e.O()}]);