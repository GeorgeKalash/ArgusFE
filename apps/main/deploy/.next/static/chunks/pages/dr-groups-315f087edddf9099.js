(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82095],{97560:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dr-groups",function(){return n(11181)}])},11181:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(52322),o=n(2784),s=n(62202),r=n(69387),c=n(27723),d=n(65950),i=n(68676),l=n(21346),u=n(71987),f=n(61802),m=n(26612),p=n(29326),b=n(9522),x=n(60218),h=n(48601),v=n(5088),_=n(82737),y=n(78711),I=n(31389),g=n(62362),C=n(19473),j=e=>{let{labels:t,editMode:n,maxAccess:r,setStore:c,store:l}=e,{postRequest:f,getRequest:p}=(0,o.useContext)(d.$),{recordId:b}=l,{platformLabels:j}=(0,o.useContext)(C.l),Z=(0,u.E)({endpointId:i.y.DRGroup.qry}),R=(0,y.TA)({validateOnChange:!0,initialValues:{recordId:null,name:null,reference:null},validationSchema:h.Ry({reference:h.Z_().required(),name:h.Z_().required()}),onSubmit:async e=>{await T(e)}}),T=async e=>{let t=!(null==e?void 0:e.recordId),n=await f({extension:i.y.DRGroup.set,record:JSON.stringify(e)}),a=t?j.Added:j.Edited;s.ZP.success(a),t&&(R.setFieldValue("recordId",n.recordId),c(e=>({...e,recordId:n.recordId}))),Z()};(0,o.useEffect)(()=>{b&&S(b)},[b]);let S=e=>{p({extension:i.y.DRGroup.get,parameters:"_recordId=".concat(e)}).then(e=>{R.setValues(e.record)})};return(0,a.jsx)(_.Z,{form:R,resourceId:m.i.DRGroups,maxAccess:r,editMode:n,children:(0,a.jsx)(I.R,{children:(0,a.jsx)(g.Q,{children:(0,a.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{name:"reference",label:t.reference,value:R.values.reference,required:!0,onChange:R.handleChange,maxLength:"10",maxAccess:r,onClear:()=>R.setFieldValue("reference",""),error:R.touched.reference&&!!R.errors.reference})}),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{name:"name",label:t.name,value:R.values.name,required:!0,maxLength:"50",maxAccess:r,onChange:R.handleChange,onClear:()=>R.setFieldValue("name",""),error:R.touched.name&&!!R.errors.name})})]})})})})},Z=n(76183),R=n(8661),T=n(80983),S=e=>{let{labels:t,editMode:n,maxAccess:r,recordId:c,store:l}=e,{postRequest:f,getRequest:p}=(0,o.useContext)(d.$),{recordId:b}=l,v=(0,u.E)({endpointId:i.y.GroupCode.qry}),{formik:y}=(0,T.c)({initialValues:{codeId:"",groupId:b},validationSchema:h.Ry({codeId:h.Z_().required()}),onSubmit:async e=>{await j(e)},validateOnChange:!0,maxAccess:r});(0,o.useEffect)(()=>{c&&C(c)},[c]);let C=async()=>{let e=await p({extension:i.y.GroupCode.get,parameters:"_groupId=".concat(c)});y.setValues({...y.values,codeId:e.record.codeId,groupId:e.record.groupId})},j=async e=>{await f({extension:i.y.GroupCode.set,record:JSON.stringify(e)}),s.ZP.success("Record Successfully Updated"),v()};return(0,a.jsx)(_.Z,{form:y,isInfo:!1,resourceId:m.i.DRGroups,maxAccess:r,editMode:n,children:(0,a.jsx)(I.R,{children:(0,a.jsx)(g.Q,{children:(0,a.jsx)(x.ZP,{container:!0,spacing:2,children:(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(R.Z,{endpointId:i.y.ReleaseCode.qry,parameters:"_startAt=".concat(0,"&_pageSize=",100),name:"codeId",label:t.code,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:y.values,required:!0,readOnly:n,maxAccess:r,onChange:(e,t)=>{y.setFieldValue("codeId",null==t?void 0:t.recordId)},error:y.touched.codeId&&!!y.errors.codeId})})})})})})},A=n(33625),N=e=>{let{store:t,labels:n,maxAccess:s}=e,{getRequest:l,postRequest:p}=(0,o.useContext)(d.$),{recordId:b}=t,{stack:x}=(0,f.zY)();async function h(){return await l({extension:i.y.GroupCode.qry,parameters:"_filter=&_groupId=".concat(b)})}let{query:{data:v},labels:_,refetch:y}=(0,u.J)({enabled:!!b,datasetId:m.i.DRGroups,queryFn:h,endpointId:i.y.GroupCode.qry}),C=[{field:"codeRef",headerName:n.reference,flex:1},{field:"codeName",headerName:n.name,flex:1}],j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;x({Component:S,props:{labels:n,recordId:e,maxAccess:s,store:t},width:500,height:400,title:n.approver})},R=async e=>{try{await p({extension:i.y.GroupCode.del,record:JSON.stringify(e)}),y(),Z.toast.success("Record Deleted Successfully")}catch(e){}};return(0,a.jsxs)(I.R,{children:[(0,a.jsx)(A.g,{children:(0,a.jsx)(c.Z,{onAdd:()=>j(),maxAccess:s})}),(0,a.jsx)(g.Q,{children:(0,a.jsx)(r.Z,{name:"approver",columns:C,gridData:v,rowId:["codeId"],pageSize:50,pagination:!1,onDelete:e=>R(e),maxAccess:s,height:200})})]})},D=e=>{let{height:t,recordId:n,labels:s,maxAccess:r}=e,[c,d]=(0,o.useState)(0),[i,l]=(0,o.useState)(n),[u,f]=(0,o.useState)({recordId:n||null}),m=[{label:s.group},{label:s.approver,disabled:!u.recordId}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Y,{tabs:m,activeTab:c,setActiveTab:d,maxAccess:r}),(0,a.jsx)(p.Z,{height:t,index:0,value:c,maxAccess:r,children:(0,a.jsx)(j,{labels:s,setEditMode:l,setStore:f,store:u,editMode:i,maxAccess:r})}),(0,a.jsx)(p.Z,{height:t,index:1,value:c,maxAccess:r,children:(0,a.jsx)(N,{labels:s,setEditMode:l,setStore:f,maxAccess:r,store:u})})]})},w=()=>{let{stack:e}=(0,f.zY)(),{getRequest:t,postRequest:n}=(0,o.useContext)(d.$),[p,b]=(0,o.useState)(null),[x,h]=(0,o.useState)(!1),[v,_]=(0,o.useState)(null);async function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:a=50}=e;return await t({extension:i.y.DRGroup.qry,parameters:"_startAt=".concat(n,"&_pageSize=").concat(a,"&filter=")})}let{query:{data:C},labels:j,paginationParameters:Z,refetch:R,access:T}=(0,u.J)({queryFn:y,endpointId:i.y.DRGroup.qry,datasetId:m.i.DRGroups}),S=(0,u.E)({endpointId:i.y.DRGroup.qry}),N=[{field:"reference",headerName:j.reference,flex:1},{field:"name",headerName:j.name,flex:1}];function w(t){e({Component:D,props:{labels:j,recordId:t||null,maxAccess:T},width:600,height:400,title:j.group})}let P=async e=>{await n({extension:i.y.DRGroup.del,record:JSON.stringify(e)}),S(),s.ZP.success("Record Deleted Successfully")};return(0,a.jsxs)(I.R,{children:[(0,a.jsxs)(A.g,{children:[(0,a.jsx)(c.Z,{onAdd:()=>{w()},maxAccess:T})," "]}),(0,a.jsx)(g.Q,{children:(0,a.jsx)(r.Z,{columns:N,gridData:C,rowId:["recordId"],onEdit:e=>{w(e.recordId)},onDelete:P,isLoading:!1,pageSize:50,refetch:R,paginationParameters:Z,paginationType:"api",maxAccess:T})}),x&&(0,a.jsx)(D,{onClose:()=>{h(!1),b(null)},labels:j,maxAccess:T,recordId:p,setSelectedRecordId:b}),(0,a.jsx)(l.Z,{open:v,onClose:()=>_(null),message:v})]})}},76183:function(e,t,n){"use strict";var a=n(49374);n.o(a,"toast")&&n.d(t,{toast:function(){return a.toast}});var o=n(21191);n.o(o,"toast")&&n.d(t,{toast:function(){return o.toast}});var s=n(83287);n.o(s,"toast")&&n.d(t,{toast:function(){return s.toast}});var r=n(64522);n.o(r,"toast")&&n.d(t,{toast:function(){return r.toast}});var c=n(93856);n.o(c,"toast")&&n.d(t,{toast:function(){return c.toast}});var d=n(36184);n.o(d,"toast")&&n.d(t,{toast:function(){return d.toast}});var i=n(99689);n.o(i,"toast")&&n.d(t,{toast:function(){return i.toast}});var l=n(92110);n.o(l,"toast")&&n.d(t,{toast:function(){return l.toast}});var u=n(59712);n.o(u,"toast")&&n.d(t,{toast:function(){return u.toast}});var f=n(3643);n.o(f,"toast")&&n.d(t,{toast:function(){return f.toast}});var m=n(61058);n.o(m,"toast")&&n.d(t,{toast:function(){return m.toast}});var p=n(17761);n.o(p,"toast")&&n.d(t,{toast:function(){return p.toast}});var b=n(20223);n.o(b,"toast")&&n.d(t,{toast:function(){return b.toast}});var x=n(66627);n.o(x,"toast")&&n.d(t,{toast:function(){return x.toast}});var h=n(43961);n.o(h,"toast")&&n.d(t,{toast:function(){return h.toast}});var v=n(68150);n.o(v,"toast")&&n.d(t,{toast:function(){return v.toast}});var _=n(71745);n.o(_,"toast")&&n.d(t,{toast:function(){return _.toast}});var y=n(62010);n.o(y,"toast")&&n.d(t,{toast:function(){return y.toast}});var I=n(65637);n.o(I,"toast")&&n.d(t,{toast:function(){return I.toast}})},49374:function(){},21191:function(){},83287:function(){},62010:function(){},93856:function(){},36184:function(){},99689:function(){},92110:function(){},59712:function(){},3643:function(){},61058:function(){},17761:function(){},20223:function(){},14522:function(){},64522:function(e,t,n){"use strict";var a=n(14522);n.o(a,"toast")&&n.d(t,{toast:function(){return a.toast}})},71745:function(){},65637:function(){},66627:function(){},43961:function(){},68150:function(){},29326:function(e,t,n){"use strict";var a=n(52322);n(2784);var o=n(23925),s=n(13980),r=n.n(s),c=n(95291),d=n.n(c),i=n(65947);let l=e=>{var t,n,s;let{children:r,value:c,index:l,maxAccess:u,...f}=e,m="".concat(e.name||"tab",".").concat(l),{accessLevel:p}=null!==(s=(null!==(n=null==u?void 0:null===(t=u.record)||void 0===t?void 0:t.controls)&&void 0!==n?n:[]).find(e=>e.controlId===m))&&void 0!==s?s:{accessLevel:0};if(p===i.A1)return null;let b=c===l;return(0,a.jsx)(o.Z,{role:"tabpanel",hidden:!b,id:"simple-tabpanel-".concat(l),"aria-labelledby":"simple-tab-".concat(l),className:"".concat(d().tabPanel," ").concat(b?d().active:d().hidden),...f,children:r})};l.propTypes={children:r().node,index:r().number.isRequired,value:r().number.isRequired},t.Z=l},9522:function(e,t,n){"use strict";n.d(t,{Y:function(){return f}});var a=n(52322),o=n(23925),s=n(54582),r=n(68696),c=n(44258),d=n(2784),i=n(99266),l=n(52614),u=n.n(l);let f=e=>{var t,n,l,f,m;let{tabs:p,activeTab:b,setActiveTab:x,maxAccess:h,name:v="tab"}=e,_=(null==h?void 0:null===(n=h.record)||void 0===n?void 0:null===(t=n.controls)||void 0===t?void 0:t.filter(e=>{var t;return 4===e.accessLevel&&(null===(t=e.controlId)||void 0===t?void 0:t.startsWith("".concat(v,".")))}).map(e=>e.controlId.split(".")[1]))||[],y=null==p?void 0:null===(l=p.map((e,t)=>({...e,id:t})))||void 0===l?void 0:l.filter((e,t)=>!_.includes(String(t))),I=null===(f=y[b])||void 0===f?void 0:f.id,g=null===(m=y[b])||void 0===m?void 0:m.disabled;return(0,d.useEffect)(()=>{I>=0&&!g&&b!=I&&x(I)},[]),(0,a.jsx)(o.Z,{className:u().tabsContainer,children:(0,a.jsx)(o.Z,{className:u().tabsWrapper,children:(0,a.jsx)(s.Z,{value:b,onChange:(e,t)=>x(t),variant:"scrollable",scrollButtons:y.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==y?void 0:y.map(e=>(0,a.jsx)(r.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,a.jsxs)(o.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)("span",{children:e.label}),e.id===b&&(null==e?void 0:e.onRefetch)&&(0,a.jsx)(c.Z,{size:"small",className:u().refreshButton,onClick:t=>{t.stopPropagation(),e.onRefetch()},children:(0,a.jsx)(i.Z,{className:u().refreshIcon})})]})},e.id))})})})}},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}},function(e){e.O(0,[49774,92888,40179],function(){return e(e.s=97560)}),_N_E=e.O()}]);