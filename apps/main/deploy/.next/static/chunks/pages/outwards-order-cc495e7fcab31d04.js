(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55822],{39558:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/outwards-order",function(){return r(17048)}])},17048:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(52322),n=r(2784),l=r(69387),s=r(65950),d=r(38449),o=r(26612),i=r(71987),c=r(61802),u=r(99471),p=r(88469),f=r(62202),m=r(31389),v=r(33625),x=r(62362),y=r(98345),w=r(7121),g=r(1685),h=r(19473),I=r(36908),N=()=>{let{postRequest:e,getRequest:t}=(0,n.useContext)(s.$),{stack:r}=(0,c.zY)(),{platformLabels:N}=(0,n.useContext)(h.l),_=(0,g.m)("userData");async function O(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:r=0,_pageSize:a=50,params:n}=e;return n?{...await t({extension:p.N.OutwardsOrder.page,parameters:"_startAt=".concat(r,"&_pageSize=").concat(a,"&filter=&_params=").concat(n||"")}),_startAt:r}:{list:[],_startAt:0}}let{query:{data:b},filterBy:S,refetch:A,labels:D,access:T,invalidate:k,paginationParameters:R}=(0,i.J)({endpointId:p.N.OutwardsOrder.snapshot,datasetId:o.i.OutwardsOrder,queryFn:O,filter:{endpointId:p.N.OutwardsOrder.snapshot,filterFn:C}});async function C(e){let{filters:r,pagination:a}=e;return r.qry?await t({extension:p.N.OutwardsOrder.snapshot,parameters:"_filter=".concat(r.qry)}):O({_startAt:a._startAt||0,params:null==r?void 0:r.params})}let E=async()=>{var e;let r=await t({extension:d.r.UserDefaults.get,parameters:"_userId=".concat(_&&_.userId,"&_key=plantId")});return null==r?void 0:null===(e=r.record)||void 0===e?void 0:e.value};async function F(e){let t=await E();r({Component:u.Z,props:{plantId:t,userId:null==_?void 0:_.userId,recordId:e}})}let Z=[{field:"reference",headerName:D.reference,flex:1},{field:"date",headerName:D.date,flex:1,type:"date"},{field:"countryRef",headerName:D.CountryRef,flex:1},{field:"dispersalName",headerName:D.DispersalName,flex:1},,{field:"currencyRef",headerName:D.Currency,flex:1},{field:"rsName",headerName:D.ReleaseStatus,flex:1},{field:"statusName",headerName:D.Status,flex:1},{field:"wipName",headerName:D.WIP,flex:1},{field:"wfStatusName",headerName:D.wfStatus,flex:1}],j=async t=>{await e({extension:p.N.OutwardsOrder.del,record:JSON.stringify(t)}),k(),f.ZP.success(N.Deleted)},{proxyAction:q}=(0,y.G)({functionId:w.J.OutwardsOrder,action:F,hasDT:!1}),P=async()=>{await q()};return(0,a.jsxs)(m.R,{children:[(0,a.jsx)(v.g,{children:(0,a.jsx)(I.Z,{onAdd:P,maxAccess:T,reportName:"RTOWO",labels:D,inputSearch:!0,refetch:A,filterBy:S})}),(0,a.jsx)(x.Q,{children:(0,a.jsx)(l.Z,{name:"owoTable",columns:Z,gridData:b,rowId:["recordId"],onEdit:e=>{F(e.recordId)},onDelete:j,pageSize:50,paginationParameters:R,paginationType:"api",maxAccess:T,refetch:A})})]})}},1685:function(e,t,r){"use strict";r.d(t,{m:function(){return a}});let a=e=>{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null}},98345:function(e,t,r){"use strict";r.d(t,{H:function(){return v},G:function(){return m}});var a=r(45300),n=r(2784),l=r(96026),s=r(38449);r(26612);var d=r(65947),o=r(1685);let i=async(e,t,r)=>{try{let a=await e({extension:t,parameters:r});return t.includes("qry")?a:a.record}catch(e){return null}},c=(e,t,r,a)=>{let n=(e=JSON.parse(JSON.stringify(e))).record.controls,l=n.find(e=>"reference"===e.controlId);return l?l.accessLevel=(null==t?void 0:t.mandatory)?d.$7:d.rr:(null==t?void 0:t.mandatory)?n.push({sgId:0,resourceId:"",controlId:"".concat(a?a+".":"","reference"),accessLevel:(null==t?void 0:t.mandatory)?d.$7:d.rr}):(null==t?void 0:t.readOnly)?n.push({sgId:0,resourceId:"",controlId:"".concat(a?a+".":"","reference"),accessLevel:(null==t?void 0:t.readOnly)?d.rr:d.$7}):n=e.record.controls.filter(e=>"reference"!=e.controlId),r&&n.push({sgId:0,resourceId:"",controlId:"".concat(a?a+".":"","dtId"),accessLevel:d.$7}),{...e,record:{...e.record,controls:n}}},u=async(e,t,r)=>{let a,n;switch(r){case"dtId":let l=(0,o.m)("userData"),d=null==l?void 0:l.userId;n="_userId=".concat(d,"&_functionId=").concat(t),a=s.r.UserFunction.get;break;case"glbSysNumberRange":n="_recordId=".concat(t),a=s.r.SystemFunction.get;break;case"DocumentType":n="_dgId=".concat(t,"&_startAt=",0,"&_pageSize=",50),a=s.r.DocumentType.qry;break;case"DcTypNumberRange":n="_recordId=".concat(t),a=s.r.DocumentType.get;break;case"isExternal":n="_recordId=".concat(t),a=s.r.NumberRange.get;break;default:return null}return await i(e,a,n)},p=async function(e){let t,r,a,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=arguments.length>5?arguments[5]:void 0,p=void 0===d&&l&&await u(e,l,"dtId"),f=null==p?void 0:p.dtId,m="",v=!0;if(p&&void 0===d||"nraId"===d){if(f){let r=await u(e,f,"DcTypNumberRange");t=null==r?void 0:r.nraId,v=!((null==r?void 0:r.activeStatus)<0),t||(m="Assign the document type to a number range")}if((!f||!v)&&o&&l){var x;let t=await u(e,l,"DocumentType");n=(null==t?void 0:null===(x=t.list)||void 0===x?void 0:x.filter(e=>(null==e?void 0:e.activeStatus)===1).length)>0}}if(("nraId"===d||void 0===d)&&l){if((!f||f)&&!t||t&&!v){let r=await u(e,l,"glbSysNumberRange");(t=null==r?void 0:r.nraId)&&n&&(n=!1),v=!0}m=t||n?"":"Assign the system Function to a number range"}d>0&&!t&&(t=d),t&&v?(r={readOnly:null==(a=await u(e,t,"isExternal"))||!a.external,mandatory:null!=a&&!!a.external},s&&(s=await c(s,r,n,i))):!t&&s&&(s=await c(s,r,n,i));let y=i?"".concat(i,".reference"):"reference";return{dtId:f,resetReference:null==r?void 0:r.readOnly,dcTypeRequired:n,reference:{fieldName:y,isEmpty:(null==a?void 0:a.external)!==void 0&&(null==a||!a.external)},errorMessage:m,maxAccess:s,selectNraId:d}};var f=r(65950);function m(e){let{functionId:t,action:r,hasDT:a}=e,{getRequest:s}=(0,n.useContext)(f.$),{stack:d}=(0,l.V)();return{proxyAction:async()=>{let e=await p(s,t,"",void 0,a);(null==e?void 0:e.errorMessage)?d({message:null==e?void 0:e.errorMessage}):await r()}}}function v(e){var t;let{functionId:r,access:s,hasDT:d,enabled:o=!0,objectName:i=""}=e,{getRequest:c}=(0,n.useContext)(f.$),{stack:u}=(0,l.V)(),[m,v]=(0,n.useState)(),x=async e=>{let t=await p(c,r,s,e,d,i);if(!t.errorMessage)return t;u({message:null==t?void 0:t.errorMessage})},y=(0,a.a)({retry:!1,staleTime:0,enabled:o,queryKey:[r,m,!!s,o],queryFn:m||"nraId"===m?()=>x(m):()=>x()});return{documentType:y.data,maxAccess:(null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.maxAccess)||s,changeDT(e){v((null==e?void 0:e.nraId)||"nraId")}}}},75991:function(e,t,r){"use strict";var a=r(52322),n=r(60218),l=r(76385);t.Z=e=>{let{children:t,title:r,form:s=!1,...d}=e;return(0,a.jsxs)(n.ZP,{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:r?{xs:.75,sm:1,md:1.25}:0,p:s?0:"clamp(8px, 0.8vw, 14px)",pt:s?0:r?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...d.sx},children:[!!r&&(0,a.jsx)(l.Z,{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:r}),t]})}},30390:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(52322),n=r(60218);function l(e){let{hideonempty:t=!1,children:r,...l}=e;return(0,a.jsx)(n.ZP,{...l,className:t?"__hide-on-empty":"",children:r})}}},function(e){e.O(0,[92515,2494,36908,17720,46553,77980,99471,49774,92888,40179],function(){return e(e.s=39558)}),_N_E=e.O()}]);