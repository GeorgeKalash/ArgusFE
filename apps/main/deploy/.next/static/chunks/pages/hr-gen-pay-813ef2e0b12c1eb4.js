(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60410],{46039:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hr-gen-pay",function(){return n(6390)}])},6390:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(52322),s=n(26612),a=n(61802),l=n(2784),o=n(60218),i=n(48601),d=n(62202),c=n(65950),p=n(19473),u=n(80983),y=n(84309),g=n(54074),m=n(31389),h=n(62362),I=n(27423),f=n(83562),q=n(92407),P=n(8661),S=n(70104);function x(e){let{_labels:t,access:n}=e,{postRequest:s}=(0,l.useContext)(c.$),{platformLabels:x}=(0,l.useContext)(p.l),{stack:E}=(0,a.zY)(),{formik:C}=(0,u.c)({initialValues:{payId:null,employeeId:null,departmentId:null,branchId:null,positionId:null},maxAccess:n,validationSchema:i.Ry({payId:i.Rx().required()}),onSubmit:async e=>{let t=await s({extension:f.m.GeneratePayroll.gen,record:JSON.stringify({payId:e.payId,employeeId:e.employeeId,departmentId:e.departmentId,branchId:e.branchId,positionId:e.positionId})});E({Component:y.R,props:{recordId:t.recordId},closable:!1}),d.ZP.success(x.Added)}}),R=[{key:"generate",condition:!0,onClick:()=>C.handleSubmit()}];return(0,r.jsx)(g.Z,{onSave:C.handleSubmit,actions:R,isSaved:!1,maxAccess:n,children:(0,r.jsx)(m.R,{children:(0,r.jsx)(h.Q,{children:(0,r.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.U,{endpointId:f.m.Payroll.snapshot,valueField:"reference",displayField:"reference",secondDisplayField:!1,firstValue:C.values.payRef,name:"payId",required:!0,label:t.payroll,form:C,maxAccess:n,onChange:(e,t)=>{C.setFieldValue("payRef",(null==t?void 0:t.reference)||""),C.setFieldValue("payId",(null==t?void 0:t.recordId)||null)},errorCheck:"payId"})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.U,{endpointId:q.y.Employee.snapshot,parameters:{_branchId:0},valueField:"reference",displayField:"fullName",name:"employeeId",displayFieldWidth:2,label:t.employee,form:C,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:n,onChange:(e,t)=>{C.setFieldValue("employeeName",(null==t?void 0:t.fullName)||""),C.setFieldValue("employeeId",(null==t?void 0:t.recordId)||null)},errorCheck:"employeeId"})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(P.Z,{endpointId:S.K.DepartmentFilters.qry,parameters:"_filter=&_size=1000&_startAt=0&_type=0&_activeStatus=0&_sortBy=recordId",name:"departmentId",label:t.department,values:C.values,columnsInDropDown:[{key:"departmentRef",value:"Reference"},{key:"name",value:"Name"}],displayField:["departmentRef","name"],maxAccess:n,onChange:(e,t)=>C.setFieldValue("departmentId",(null==t?void 0:t.recordId)||null),error:C.touched.departmentId&&!!C.errors.departmentId})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(P.Z,{endpointId:S.K.BranchFilters.qry,name:"branchId",label:t.branch,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:C.values,maxAccess:n,onChange:(e,t)=>C.setFieldValue("branchId",(null==t?void 0:t.recordId)||null),error:C.touched.branchId&&!!C.errors.branchId})}),(0,r.jsx)(o.ZP,{item:!0,xs:12,children:(0,r.jsx)(P.Z,{endpointId:S.K.CompanyPositions.qry,parameters:"_filter=&_size=1000&_startAt=0&_sortBy=recordId",name:"positionId",label:t.position,valueField:"recordId",displayField:["positionRef","name"],columnsInDropDown:[{key:"positionRef",value:"Reference"},{key:"name",value:"Name"}],maxAccess:n,values:C.values,onChange:(e,t)=>C.setFieldValue("positionId",(null==t?void 0:t.recordId)||null),error:C.touched.positionId&&!!C.errors.positionId})})]})})})})}var E=()=>(0,r.jsx)(a.ut,{datasetId:s.i.GeneratePayroll,labelKey:"generatePayroll",Component:x})},92407:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});let r="EP.asmx/",s={Employee:{snapshot:r+"snapshotEM",get1:r+"getEM1",set:r+"setEM",del:r+"delEM"},CertificateFilters:{qry:r+"qryCL",get:r+"getCL",set:r+"setCL",del:r+"delCL",page:r+"pageCL"},HRDocTypeFilters:{qry:r+"qryDT"},SalaryChangeReason:{qry:r+"qrySC",get:r+"getSC",set:r+"setSC",del:r+"delSC",page:r+"pageSC"},EmploymentStatusFilters:{qry:r+"qryST",page:r+"pageST",set:r+"setST",get:r+"getST",del:r+"delST"},SponsorFilters:{qry:r+"qrySP",page:r+"pageSP",set:r+"setSP",get:r+"getSP",del:r+"delSP"},RelationshipTypes:{page:r+"pageRT",set:r+"setRT",get:r+"getRT",del:r+"delRT"},BonusTypes:{get:r+"getBT",set:r+"setBT",page:r+"pageBT",del:r+"delBT"},BgCheck:{page:r+"pageCT",set:r+"setCT",get:r+"getCT",del:r+"delCT"},NoticePeriods:{get:r+"getNP",set:r+"setNP",del:r+"delNP",qry:r+"qryNP",page:r+"pageNP"},CustomProperties:{get:r+"getUP",set:r+"setUP",del:r+"delUP",page:r+"pageUP",qry:r+"qryUP"},ResignationRequest:{get:r+"getRR",set:r+"setRR",del:r+"delRR",page:r+"pageRR",close:r+"closeRR",reopen:r+"reopenRR"},TerminationReasons:{qry:r+"qryTR",get:r+"getTR",set:r+"setTR",del:r+"delTR",page:r+"pageTR"},JobInfo:{snapshot:r+"snapshotJI",page:r+"pageJI",close:r+"closeJI",reopen:r+"reopenJI",get:r+"getJI",set:r+"setJI",del:r+"delJI",qry:r+"qryJI"},QuickView:{get:r+"getQV"},EmployeePenalty:{page:r+"pagePE",close:r+"closePE",reopen:r+"reopenPE",get:r+"getPE",set:r+"setPE",del:r+"delPE"},EmployeeDeduction:{qry:r+"qryED",page:r+"pageED",del:r+"delED",get:r+"getED",set:r+"setED",snapshot:r+"snapshotED"},FullName:{sync:r+"syncFullName"},EmployeeChart:{page:r+"pageES",qry:r+"qryES",qry2:r+"qryES2"},EmployeeSalary:{qry:r+"qrySA",get:r+"getSA",set:r+"setSA",del:r+"delSA"},SalaryDetails:{qry:r+"qrySD",get:r+"getSD",set2:r+"set2SD",del:r+"delSD"},TerminationEmployee:{get:r+"getTE"},EmployementHistory:{qry:r+"qryEH",del:r+"delEH",get:r+"getEH",set:r+"setEH"},Hiring:{get:r+"getRE",set:r+"setRE"},Skills:{qry:r+"qryCE",del:r+"delCE",get:r+"getCE",set:r+"setCE"},UserDefined:{qry:r+"qryUV",set2:r+"set2UV"},Leaves:{set:r+"setLS",del:r+"delLS",get:r+"getLS"}}},83562:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});let r="PY.asmx/",s={Payroll:{qry:r+"qryHE",page:r+"pageHE",get:r+"getHE",set:r+"setHE",del:r+"delHE",close:r+"closeHE",reopen:r+"reopenHE",post:r+"postHE",unpost:r+"unpostHE",snapshot:r+"snapshotHE"},BankTransferFilters:{qry:r+"qrySB",page:r+"pageSB",get:r+"getSB",set:r+"setSB",del:r+"delSB"},Paycode:{qry:r+"qryPC",set:r+"setPC",del:r+"delPC",get:r+"getPC"},SecuritySchedule:{qry:r+"qrySS"},IndemnitySchedule:{page:r+"pageIS",qry:r+"qryIS",get:r+"getIS",set:r+"setIS",del:r+"delIS"},LedgerGroup:{qry:r+"qryGLG",get:r+"getGLG",set:r+"setGLG",del:r+"delGLG"},Arguments:{page:r+"pageAR"},SalaryBatch:{page:r+"pageBAT",get:r+"getBAT",set:r+"setBAT",del:r+"delBAT"},TimeCodes:{page:r+"pageTC",qry:r+"qryTC",get:r+"getTC",set:r+"setTC",del:r+"delTC"},FinalSettlement:{page:r+"pageFS",get:r+"getFS",set:r+"setFS",del:r+"delFS",snapshot:r+"snapshotFS"},IndemnityCompany:{qry:r+"qryID",set2:r+"set2ID"},IndemnityResignation:{qry:r+"qryIR",set2:r+"set2IR"},PenaltyType:{page:r+"pagePT",qry:r+"qryPT",get:r+"getPT",set:r+"setPT",del:r+"delPT"},PenaltyDetail:{qry:r+"qryPD",set2:r+"set2PD"},GeneratePayroll:{gen:r+"genEM",page:r+"pageEM"},PayrollDetails:{qry:r+"qryED",set2:r+"set2ED"},SocialSecurity:{qry:r+"qryES"},FiscalYear:{qry:r+"qryYE"},Period:{qry:r+"qryPE"}}},70104:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});let r="CS.asmx/",s={DivisionFilters:{qry:r+"qryDI"},BranchFilters:{qry:r+"qryBR"},CompanyPositions:{qry:r+"qryPO"},DepartmentFilters:{qry:r+"qryDE"}}},84309:function(e,t,n){"use strict";n.d(t,{R:function(){return b}});var r=n(73235),s=n(52322),a=n(3854),l=n(2784),o=n(82737),i=n(65950),d=n(62362),c=n(31389),p=n(60218),u=n(21581),y=n(38449),g=n(5088),m=n(19473),h=n(21326);function I(){let e=(0,r._)(["\n  container-type: inline-size;\n  font-size: clamp(12px, 3.2cqw, 16px);\n"]);return I=function(){return e},e}function f(){let e=(0,r._)(["\n  font-size: clamp(10px, 2.2cqw, 12px);\n  font-weight: 600;\n  color: #888888;\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return f=function(){return e},e}function q(){let e=(0,r._)(["\n  font-size: clamp(11px, 2.4cqw, 13px);\n  font-weight: 600;\n  margin-bottom: 3px;\n  margin-top: 5px;\n  color: #000;\n"]);return q=function(){return e},e}function P(){let e=(0,r._)(["\n  width: 100%;\n  height: clamp(28px, 7cqw, 35px);\n  background-color: #f0f0f0;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 10px 0;\n  position: relative;\n"]);return P=function(){return e},e}function S(){let e=(0,r._)(["\n  container-type: inline-size;\n"]);return S=function(){return e},e}function x(){let e=(0,r._)(["\n  height: 100%;\n  background-color: #cce6ff;\n  transition: width 1.5s ease-in-out;\n"]);return x=function(){return e},e}let E=a.ZP.div(I()),C=a.ZP.span(f()),R=a.ZP.span(q()),v=a.ZP.div(P()),T=a.ZP.div(S()),D=a.ZP.div(x());function F(e){let{label:t,topLabel:n,width:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(R,{children:[n,": "]}),(0,s.jsxs)(v,{children:[(0,s.jsx)(D,{style:{width:r}}),(0,s.jsx)(C,{children:t})]})]})}let b=e=>{let{recordId:t,onComplete:n,access:r,window:a}=e,{getRequest:I}=(0,l.useContext)(i.$),{platformLabels:f}=(0,l.useContext)(m.l);(0,h.Z)({title:f.Progress,window:a});let[q,P]=(0,l.useState)({recordId:t,iterations:0,completed:0,phases:0,currentPhase:0,currentPhaseName:"",logInfo:"",status:0}),S=async()=>(await I({extension:y.r.THD.get,parameters:"_recordId=".concat(t)})).record,x=q.currentPhase===q.phases&&q.completed===q.iterations,C=!!q.status&&q.status<0;(0,l.useEffect)(()=>{n&&(x||C)&&n()},[C,x]),(0,l.useEffect)(()=>{(async()=>{P(await S())})();let e=setInterval(async()=>{let t=await S();P(t);let n=t.currentPhase===t.phases&&t.completed===t.iterations,r=!!t.status&&t.status<0;(t.status&&t.status<0||n||r)&&clearInterval(e)},2e3);return()=>clearInterval(e)},[]);let R=q.phases?q.currentPhase/q.phases*100:0,v=q.iterations?q.completed/q.iterations*100:0;return(0,s.jsx)(o.Z,{form:q,maxAccess:r,isInfo:!1,editMode:!0,isCleared:!1,actions:[{key:"Cancel",condition:!0,onClick:()=>a.close(),disabled:!x&&!C}],isSaved:!1,children:(0,s.jsx)(c.R,{children:(0,s.jsx)(d.Q,{children:(0,s.jsxs)(E,{children:[(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(g.Z,{name:"phase",label:f.Phase,value:q.currentPhaseName,readOnly:!0,maxAccess:r})}),(0,s.jsxs)(T,{children:[(0,s.jsx)(F,{label:"".concat(f.Step," ").concat(q.currentPhase," of ").concat(q.phases,"..."),topLabel:f.currentPhase,width:"".concat(R,"%")}),(0,s.jsx)(F,{label:"".concat(f.Step," ").concat(q.completed," of ").concat(q.iterations,"..."),topLabel:f.Completed,width:"".concat(v,"%")})]}),(0,s.jsx)(u.Z,{name:"log",label:f.Log,value:q.logInfo,rows:4,maxAccess:r,readOnly:!0})]})})})})};b.width=500,b.height=450}},function(e){e.O(0,[3854,49774,92888,40179],function(){return e(e.s=46039)}),_N_E=e.O()}]);