(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89609],{11060:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fi-opening-balances",function(){return n(33843)}])},33843:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return _}});var r=n(52322),l=n(2784),c=n(62202),t=n(69387),s=n(65950),d=n(25870),u=n(60218),i=n(48601),o=n(82737),m=n(71987),f=n(26612),p=n(38449),x=n(8661),h=n(27423),I=n(80983),y=n(91406),v=n(31389),g=n(62362),F=n(19473);function N(e){let{labels:a,maxAccess:n,recordId:t}=e,{getRequest:N,postRequest:A}=(0,l.useContext)(s.$),{platformLabels:b}=(0,l.useContext)(F.l),_=(0,m.E)({endpointId:d.H.FiOpeningBalance.page}),{formik:Z}=(0,I.c)({initialValues:{recordId:null,accountId:null,fiscalYear:null,amount:null,baseAmount:null,currencyId:null,plantId:null},maxAccess:n,validateOnChange:!0,validationSchema:i.Ry({fiscalYear:i.Z_().required(),accountId:i.Z_().required(),currencyId:i.Z_().required(),amount:i.Z_().required(),baseAmount:i.Z_().required()}),onSubmit:async e=>{let a=await A({extension:d.H.FiOpeningBalance.set,record:JSON.stringify(e)});e.recordId||Z.setValues({...e,recordId:a.recordId}),c.ZP.success(e.recordId?b.Edited:b.Added),_()}}),j=!!Z.values.recordId;return(0,l.useEffect)(()=>{!async function(){if(t){let e=await N({extension:d.H.FiOpeningBalance.get,parameters:"_recordId=".concat(t)});Z.setValues(e.record)}}()},[]),(0,r.jsx)(o.Z,{resourceId:f.i.FiOpeningBalances,form:Z,maxAccess:n,editMode:j,children:(0,r.jsx)(v.R,{children:(0,r.jsx)(g.Q,{children:(0,r.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(x.Z,{endpointId:p.r.FiscalYears.qry,name:"fiscalYear",label:a.fiscalYear,valueField:"fiscalYear",displayField:"fiscalYear",values:Z.values,required:!0,readOnly:j,maxAccess:n,onChange:(e,a)=>{Z.setFieldValue("fiscalYear",(null==a?void 0:a.fiscalYear)||null)},error:Z.touched.fiscalYear&&!!Z.errors.fiscalYear})}),(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.U,{endpointId:d.H.Account.snapshot,valueField:"recordId",displayField:"name",name:"reference",label:a.accountName,required:!0,readOnly:j,form:Z,firstValue:Z.values.accountRef,secondValue:Z.values.accountName,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:(e,a)=>{a?(Z.setFieldValue("accountId",null==a?void 0:a.recordId),Z.setFieldValue("accountRef",null==a?void 0:a.reference),Z.setFieldValue("accountName",null==a?void 0:a.name)):(Z.setFieldValue("accountId",""),Z.setFieldValue("accountRef",null),Z.setFieldValue("accountName",null))},errorCheck:"accountId",maxAccess:n})}),(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(x.Z,{endpointId:p.r.Currency.qry,name:"currencyId",label:a.currencyName,valueField:"recordId",displayField:["reference","name","flName"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"flName"}],values:Z.values,required:!0,readOnly:j,maxAccess:n,onChange:(e,a)=>{Z.setFieldValue("currencyId",(null==a?void 0:a.recordId)||null)},error:Z.touched.currencyId&&!!Z.errors.currencyId})}),(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(x.Z,{endpointId:p.r.Plant.qry,name:"plantId",label:a.plant,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:Z.values,maxAccess:n,onChange:(e,a)=>{a?Z.setFieldValue("plantId",null==a?void 0:a.recordId):Z.setFieldValue("plantId","")},error:Z.touched.plantId&&!!Z.errors.recordId})}),(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"amount",type:"text",label:a.amount,value:Z.values.amount,required:!0,maxAccess:n,onChange:e=>Z.setFieldValue("amount",e.target.value),onClear:()=>Z.setFieldValue("amount",""),error:Z.touched.amount&&!!Z.errors.amount,maxLength:15})}),(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(y.Z,{name:"baseAmount",type:"text",label:a.baseAmount,value:Z.values.baseAmount,required:!0,maxAccess:n,onChange:e=>Z.setFieldValue("baseAmount",e.target.value),onClear:()=>Z.setFieldValue("baseAmount",""),error:Z.touched.baseAmount&&!!Z.errors.baseAmount,maxLength:15})})]})})})})}var A=n(61802),b=n(36908),_=()=>{let{getRequest:e,postRequest:a}=(0,l.useContext)(s.$),{stack:n}=(0,A.zY)();async function u(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_startAt:n=0,_pageSize:r=50,params:l}=a;return{...await e({extension:d.H.FiOpeningBalance.page,parameters:"_startAt=".concat(n,"&_pageSize=").concat(r,"&_params=").concat(l||"")}),_startAt:n}}async function i(e){let{filters:a,pagination:n}=e;return u({_startAt:n._startAt||0,params:null==a?void 0:a.params})}let{query:{data:o},labels:p,paginationParameters:x,filterBy:h,refetch:I,invalidate:y,access:g}=(0,m.J)({queryFn:u,endpointId:d.H.FiOpeningBalance.page,datasetId:f.i.FiOpeningBalances,filter:{filterFn:i}}),F=[{field:"fiscalYear",headerName:p.fiscalYear,flex:1},{field:"accountRef",headerName:p.accountRef,flex:1},{field:"accountName",headerName:p.accountName,flex:1},{field:"currencyName",headerName:p.currencyName,flex:1},{field:"amount",headerName:p.amount,flex:1,type:"number"},{field:"plantRef",headerName:p.plantRef,flex:1},{field:"plantName",headerName:p.plantName,flex:1},{field:"baseAmount",headerName:p.baseAmount,flex:1,type:"number"}],_=async e=>{await a({extension:d.H.FiOpeningBalance.del,record:JSON.stringify(e)}),y(),c.ZP.success("Record Deleted Successfully")};function Z(e){n({Component:N,props:{labels:p,recordId:e||null,maxAccess:g},width:600,height:500,title:p.openingBalance})}return(0,r.jsxs)(v.R,{children:[(0,r.jsx)(b.Z,{hasSearch:!1,onAdd:()=>{Z()},maxAccess:g,filterBy:h,reportName:"FIOBA"}),(0,r.jsx)(t.Z,{columns:F,gridData:o,rowId:["recordId"],onEdit:e=>{Z(null==e?void 0:e.recordId)},onDelete:_,isLoading:!1,pageSize:50,paginationParameters:x,paginationType:"api",maxAccess:g,refetch:I})]})}}},function(e){e.O(0,[92515,2494,36908,49774,92888,40179],function(){return e(e.s=11060)}),_N_E=e.O()}]);