(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25991],{84705:function(e,l,a){"use strict";var t=a(52322);a(2784);var n=a(95453),i=a(37691),d=a(6640),r=a(81576),o=a(81119),s=a.n(o),u=a(7087),c=a.n(u);l.Z=e=>{let{options:l=[],value:a,onChange:o,row:u=!0,maxAccess:m,name:v,readOnly:p,hidden:h,required:f=!1,...y}=e,{_readOnly:I,_required:x,_hidden:N}=(0,r.W)(v,m,f,p,h),g=I||N;return N?null:(0,t.jsx)(n.Z,{row:u,value:a,onChange:o,className:s().radioGroup,...y,children:l.map(e=>{let{label:l,value:a,disabled:n=!1}=e;return(0,t.jsx)(i.Z,{value:a,disabled:g||n,required:x,label:l,classes:{label:c().inputLabel},control:(0,t.jsx)(d.Z,{className:s().radio,classes:{root:c().outlinedRoot}})},a)})})}},25991:function(e,l,a){"use strict";a.d(l,{Z:function(){return Q}});var t=a(52322),n=a(60218),i=a(19689),d=a(2784),r=a(62202),o=a(89330),s=a(5088),u=a(6988),c=a(75991),m=a(7121),v=a(8661),p=a(96026),h=a(39812),f=a(65950),y=a(58867),I=a(24074),x=a(53137),N=a(38449),g=a(61802),C=a(48601),V=a(91084),F=a(71987),_=a(78711),Z=a(82737),w=a(31389),P=a(62362);function b(e){var l,a;let{formik:i,labels:d,window:r}=e,o=(0,_.TA)({validateOnChange:!0,initialValues:{idNo:i.values.idNo,cellPhone:i.values.cellPhone,idNoRepeat:"",cellPhoneRepeat:""},validate:e=>{let l={};return i.values.clientId||e.cellPhoneRepeat||e.idNoRepeat?!i.values.clientId&&e.cellPhoneRepeat&&e.cellPhone!==e.cellPhoneRepeat&&(l.cellPhoneRepeat="Cell Phone must match"):l.cellPhoneRepeat="Cell Phone Confirm is required",e.idNoRepeat||e.cellPhoneRepeat?e.idNoRepeat&&e.idNo.toString()!=e.idNoRepeat.toString()&&(l.idNoRepeat="Id Number must match"):l.idNoRepeat="Id number Confirm is required",l},onSubmit:e=>{i.setFieldValue("cellPhoneConfirm",null==e?void 0:e.cellPhoneRepeat),i.setFieldValue("idNoConfirm",null==e?void 0:e.idNoRepeat),i.handleSubmit(),r.close()}});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(Z.Z,{form:o,isInfo:!1,children:(0,t.jsx)(w.R,{children:(0,t.jsx)(P.Q,{children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:12,sx:{position:"relative",width:"100%"},children:(0,t.jsx)(s.Z,{name:"idNoRepeat",label:d.confirmIdNumber,value:null===(l=o.values)||void 0===l?void 0:l.idNoRepeat,onChange:o.handleChange,maxLength:"15",onClear:()=>{o.setFieldValue("idNoRepeat","")},error:o.touched.idNoRepeat&&!!o.errors.idNoRepeat,helperText:o.touched.idNoRepeat&&o.errors.idNoRepeat})}),!i.values.clientId&&(0,t.jsx)(n.ZP,{item:!0,xs:12,sx:{position:"relative",width:"100%"},children:(0,t.jsx)(s.Z,{name:"cellPhoneRepeat",label:d.cellPhoneConfirm,value:null===(a=o.values)||void 0===a?void 0:a.cellPhoneRepeat,onChange:o.handleChange,maxLength:"15",onClear:()=>{o.setFieldValue("cellPhoneRepeat","")},error:o.touched.cellPhoneRepeat&&!!o.errors.cellPhoneRepeat,helperText:o.touched.cellPhoneRepeat&&o.errors.cellPhoneRepeat})})]})})})})})}var j=a(76399),R=a(17627),A=a(30390),k=a(91406),D=a(53621),T=a(26612),O=a(98345),S=a(80983),q=a(84141),E=a(19473),B=a(38509),M=a(77980),L=a(84100),J=a(70919),U=a(84705),Y=a(50023),G=a(21326),K=a(13409),z=a(69627);let H=e=>{var l,a,_,H,Q,W,$,X,ee,el,ea,et,en,ei,ed,er,eo;let{recordId:es,plantId:eu,window:ec}=e,{getRequest:em,postRequest:ev}=(0,d.useContext)(f.$),[ep,eh]=(0,d.useState)(!1),[ef,ey]=(0,d.useState)(!1),{stack:eI}=(0,p.V)(),{stack:ex}=(0,g.zY)(),[eN,eg]=(0,d.useState)([]),[eC]=(0,V.Z)(),[eV,eF]=(0,d.useState)(null),[e_,eZ]=(0,d.useState)(null),[ew,eP]=(0,d.useState)(null),[eb,ej]=(0,d.useState)(m.J.CurrencyPurchase),{platformLabels:eR}=(0,d.useContext)(E.l),[eA,ek]=(0,d.useState)({});async function eD(e){e||eM.setFieldValue("id_type","");let l=await eC(e);l&&eM.setFieldValue("id_type",l.recordId)}let eT=(0,F.E)({endpointId:R.s.CurrencyTrading.snapshot}),{labels:eO,access:eS}=(0,Y.Z)({datasetId:T.i.CashInvoice,editMode:!!es});(0,G.Z)({title:null==eO?void 0:eO.cashInvoice,window:ec});let eq={recordId:null,reference:null,operations:[{id:1,currencyId:"",oldNote:!1,fcAmount:"",defaultRate:"",exRate:"",lcAmount:"",minRate:"",maxRate:""}],amount:eA.initialValuePayment||[],date:"",clientId:null,clientName:null,clientType:"1",firstName:null,lastName:null,middleName:null,fl_firstName:null,fl_lastName:null,fl_middleName:null,birthDate:null,resident:!1,professionId:null,sponsorName:"",idNo:null,id_type:null,expiryDate:null,remarks:null,purpose_of_exchange:null,nationalityId:null,nationalityType:null,cellPhone:null,status:"1",type:-1,wip:1,functionId:m.J.CurrencyPurchase,idNoConfirm:"",cellPhoneConfirm:"",otp:!1,search:null},{maxAccess:eE}=(0,O.H)({functionId:eb,access:eS,hasDT:!1,enabled:!es});async function eB(e){var l,a,t,n,i,d,r,o,s,u,c,m,v,p,f,y,I;let{key:N}=e,g=await em({extension:x.L.CtClientIndividual.get3,parameters:"_key=".concat(N)});return ey(!1),eM.setFieldValue("idNo",null==g?void 0:null===(l=g.record)||void 0===l?void 0:l.clientIDView.idNo),eM.setFieldValue("firstName",null==g?void 0:null===(a=g.record)||void 0===a?void 0:a.clientIndividual.firstName),eM.setFieldValue("clientId",null==g?void 0:null===(t=g.record)||void 0===t?void 0:t.clientId),eM.setFieldValue("middleName",null==g?void 0:null===(n=g.record)||void 0===n?void 0:n.clientIndividual.middleName),eM.setFieldValue("lastName",null==g?void 0:null===(i=g.record)||void 0===i?void 0:i.clientIndividual.lastName),eM.setFieldValue("fl_firstName",null==g?void 0:null===(d=g.record)||void 0===d?void 0:d.clientIndividual.fl_firstName),eM.setFieldValue("fl_lastName",null==g?void 0:null===(r=g.record)||void 0===r?void 0:r.clientIndividual.fl_lastName),eM.setFieldValue("fl_middleName",null==g?void 0:null===(o=g.record)||void 0===o?void 0:o.clientIndividual.fl_middleName),eM.setFieldValue("birthDate",(0,h.a1)(null==g?void 0:null===(s=g.record)||void 0===s?void 0:s.clientIndividual.birthDate)),eM.setFieldValue("resident",null==g?void 0:null===(u=g.record)||void 0===u?void 0:u.clientIndividual.isResident),eM.setFieldValue("professionId",null==g?void 0:null===(c=g.record)||void 0===c?void 0:c.clientMaster.professionId),eM.setFieldValue("sponsorName",null==g?void 0:null===(m=g.record)||void 0===m?void 0:m.clientIndividual.sponsorName),eM.setFieldValue("id_type",null==g?void 0:null===(v=g.record)||void 0===v?void 0:v.clientIDView.idtId),eM.setFieldValue("nationalityId",null==g?void 0:null===(p=g.record)||void 0===p?void 0:p.clientMaster.nationalityId),eM.setFieldValue("nationalityType",(null==g?void 0:null===(f=g.record)||void 0===f?void 0:f.clientMaster.nationalityId)===195?1:2),eM.setFieldValue("cellPhone",null==g?void 0:null===(y=g.record)||void 0===y?void 0:y.clientMaster.cellPhone),eM.setFieldValue("expiryDate",(0,h.a1)(null==g?void 0:null===(I=g.record)||void 0===I?void 0:I.clientIDView.idExpiryDate)),ey(!0),g.record}let{formik:eM}=(0,S.c)({maxAccess:eE,initialValues:eq,validateOnChange:!0,validateOnBlur:!0,validate:e=>{let l={},a=eL(e.operations);return a&&!e.id_type&&(l.id_type=" "),a&&!e.idNo&&(l.idNo=" "),a&&!e.birthDate&&(l.birthDate=" "),a&&!e.firstName&&(l.firstName=" "),a&&!e.lastName&&(l.lastName=" "),a&&!e.expiryDate&&(l.expiryDate=" "),a&&!e.nationalityId&&(l.nationalityId=" "),a&&!e.cellPhone&&(l.cellPhone=" "),a&&!e.professionId&&(l.professionId=" "),l},validationSchema:C.Ry({date:C.Z_().required(),nationalityType:C.Rx().required(),operations:C.IX().of(C.Ry().shape({currencyId:C.Z_().test({name:"currencyId-last-row-check",message:"currencyId is required",test(e,l){let{parent:a}=l;return 1==a.id&&!!e||(1!=a.id||!!e)&&(a.id>1&&(!a.fcAmount||0==a.fcAmount)&&(!a.lcAmount||0==a.lcAmount)&&(!a.exRate||0==a.exRate)||e)}}),exRate:C.Z_().test({name:"exRate-last-row-check",message:"exRate is required",test(e,l){let{parent:a}=l;return 1==a.id&&!!e||(1!=a.id||!!e)&&(a.id>1&&!a.currencyId&&(!a.lcAmount||0==a.lcAmount)&&(!a.fcAmount||0==a.fcAmount)||e)}}),fcAmount:C.Z_().test({name:"fcAmount-last-row-check",message:"fcAmount is required",test(e,l){let{parent:a}=l;return 1==a.id&&!!e||(1!=a.id||!!e)&&(a.id>1&&!a.currencyId&&(!a.lcAmount||0==a.lcAmount)&&(!a.exRate||0==a.exRate)||e)}}),lcAmount:C.Z_().test({name:"fcAmount-last-row-check",message:"lcAmount is required",test(e,l){let{parent:a}=l;return 1==a.id&&!!e||(1!=a.id||!!e)&&(a.id>1&&!a.currencyId&&(!a.fcAmount||0==a.fcAmount)&&(!a.exRate||0==a.exRate)||e)}})})).required(),amount:null==eA?void 0:eA.paymentValidation}),onSubmit:async e=>{let l=e.operations[e.operations.length-1],a=!l.currencyId&&!l.currencyId&&!l.exRate&&!l.fcAmount,t=e.operations;if(a){var n;t=null===(n=e.operations)||void 0===n?void 0:n.filter((l,a)=>a!==e.operations.length-1)}if(((null==e?void 0:e.idNoConfirm)||null==e||!e.clientId)&&((null==e?void 0:e.clientId)||e.cellPhoneConfirm||(null==e?void 0:e.idNoConfirm))||eY||(null==e?void 0:e.idNo)===null){let{record:l}=await em({extension:N.r.UserFunction.get,parameters:"_userId=".concat(e1,"&_functionId=").concat(e.functionId)}),{dtId:a}=l,{record:n}=await em({extension:N.r.UserDefaults.get,parameters:"_userId=".concat(e1,"&_key=cashAccountId")}),{record:i}=await em({extension:I.u.Defaults.get,parameters:"_key=ct_minOtp_CIVAmount"}),d=e.clientId||0;console.log(eM.values.amount);let o={header:{recordId:(null==e?void 0:e.recordId)||null,dtId:a,reference:e.reference,nationalityId:e.nationalityId,nationalityType:e.nationalityType,status:e.status,date:(0,h.ku)(e.date),functionId:e.functionId,plantId:eu||e.plantId,clientId:e5<5e3&&!d?-1:d,cashAccountId:n.value,poeId:e.purpose_of_exchange,wip:e.wip,amount:e5,notes:e.remarks},items:t.map(e=>{let{id:l,...a}=e;return{seqNo:l,...a}}),clientMaster:{category:e.clientType,reference:null,name:null,flName:null,keyword:null,nationalityId:e.nationalityId,nationalityType:e.nationalityType,status:1,addressId:null,cellPhone:e.cellPhone,oldReference:null,otp:!1,createdDate:(0,h.ku)(e.date),expiryDate:e.expiryDate,professionId:e.professionId},clientIndividual:{clientId:e5<5e3&&!d?-1:d,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,fl_firstName:e.fl_firstName,fl_lastName:e.fl_lastName,fl_middleName:e.fl_middleName,birthDate:(0,h.ku)(e.birthDate),isResident:e.resident,sponsorName:e.sponsorName},clientID:{idNo:e.idNo,clientId:e5<5e3&&!d?-1:d,idtId:e.id_type,idExpiryDate:(0,h.ku)(e.expiryDate),idIssueDate:null,idCityId:null,isDiplomat:!1},cash:eM.values.amount.length>0&&eM.values.amount.map(e=>{let{seqNo:l,types:a,cashAccountId:t,...i}=e;return{seqNo:l,cashAccountId:n.value,...i}})};if(e.idNo){let l=await eB({key:e.idNo});if(e5>i.value&&!es){if(!(null==l?void 0:l.clientRemittance)){eI({message:"You need to create full KYC file for this client."});return}}else if((null==l?void 0:l.clientId)&&parseInt((await em({extension:R.s.CurrencyTrading.get3,parameters:"_clientId=".concat(l.clientId)})).record.baseAmount)+parseInt(e5)>i.value&&!l.clientRemittance&&!es){eI({message:"You need to create full KYC file for this client."});return}}let s=await ev({extension:R.s.CurrencyTrading.set2,record:JSON.stringify(o)}),u=es?eR.Added:eR.Edited;r.ZP.success(u),eM.setFieldValue("recordId",s.recordId);let c=await e0(s.recordId);(e5>i.value||totalBaseAmount>i.value)&&!es&&e6(s.recordId,c),eT()}else ex({Component:b,props:{formik:eM,labels:eO},title:eO.confirmation,width:400,height:400})}}),eL=e=>e.reduce((e,l)=>{var a,t;return e+(parseFloat(null===(t=l.lcAmount)||void 0===t?void 0:null===(a=t.toString())||void 0===a?void 0:a.replace(/,/g,""))||0)},0)>=5e3,eJ=eM.values.operations.filter(e=>1!==e.id&&!e.currencyId&&!e.currencyRef&&!e.exRate&&(!e.fcAmount||0==e.fcAmount)&&(!e.lcAmount||0==e.lcAmount)),eU=async e=>{var l,a,t,n,i,d,o,s,u,c,m,v,p;let h=await em({extension:R.s.CurrencyTrading.get2,parameters:"_recordId=".concat(null!==(p=eM.values.recordId)&&void 0!==p?p:e)}),f=null==h?void 0:h.record,y={recordId:null===(l=f.headerView)||void 0===l?void 0:l.recordId,reference:null===(a=f.headerView)||void 0===a?void 0:a.reference,nationalityId:null===(t=f.headerView)||void 0===t?void 0:t.nationalityId,nationalityType:null===(n=f.headerView)||void 0===n?void 0:n.nationalityType,status:null===(i=f.headerView)||void 0===i?void 0:i.status,functionId:null===(d=f.headerView)||void 0===d?void 0:d.functionId,plantId:null===(o=f.headerView)||void 0===o?void 0:o.plantId,clientId:null===(s=f.headerView)||void 0===s?void 0:s.clientId,cashAccountId:f.headerView.cashAccountId,poeId:null===(u=f.headerView)||void 0===u?void 0:u.poeId,wip:null===(c=f.headerView)||void 0===c?void 0:c.wip,otpVerified:null===(m=f.headerView)||void 0===m?void 0:m.otpVerified,amount:String(e5||"").replaceAll(",",""),notes:null===(v=f.headerView)||void 0===v?void 0:v.notes},I=await ev({extension:R.s.CurrencyTrading.close,record:JSON.stringify(y)});if(I.recordId){es&&r.ZP.success(eR.Closed),eM.setFieldValue("recordId",I.recordId);let e=await e0(I.recordId);ez&&e6(I.recordId,e)}eT()},eY=!!eM.values.recordId,eG=2===eM.values.wip,eK=3===eM.values.status,ez=4===eM.values.status;async function eH(e){if(e){var l;let a=await em({extension:N.r.Defaults.get,parameters:e===m.J.CurrencyPurchase?"_key=ct_cash_purchase_ratetype_id":e===m.J.CurrencySale?"_key=ct_cash_sales_ratetype_id":""});(null===(l=a.record)||void 0===l?void 0:l.value)?eF(a.record.value):eI({message:eR.rateTypeUndefined}),eM.setFieldValue("functionId",e)}}let[eQ,eW]=(0,d.useState)(!1),[e$,eX]=(0,d.useState)(!1);async function e0(e){let l=(await em({extension:R.s.CurrencyTrading.get2,parameters:"_recordId=".concat(e)})).record;if(l){var a,t,n,i,d,r,o,s,u,c,m,v,p,f;return eM.setFieldValue("recordId",l.headerView.recordId),eM.setFieldValue("reference",l.headerView.reference),eM.setFieldValue("nationalityId",l.headerView.nationalityId),eM.setFieldValue("nationalityType",195===l.headerView.nationalityId?1:2),eM.setFieldValue("operations",l.items.map(e=>{let{seqNo:l,...a}=e;return{id:l,...a}})),eM.setFieldValue("amount",(null==l?void 0:null===(a=l.cash)||void 0===a?void 0:a.length)!=0?null===(t=l.cash)||void 0===t?void 0:t.map((e,l)=>({id:l+1,pos:(null==e?void 0:e.type)!=3,...e})):eM.initialValues.amount),eM.setFieldValue("clientType",l.clientMaster.category),eM.setFieldValue("date",(0,h.a1)(l.headerView.date)),eM.setFieldValue("clientId",null===(n=l.clientIndividual)||void 0===n?void 0:n.clientId),eM.setFieldValue("clientName",l.headerView.clientName),eM.setFieldValue("functionId",l.headerView.functionId),eM.setFieldValue("plantId",l.headerView.plantId),eM.setFieldValue("wip",l.headerView.wip),eM.setFieldValue("firstName",null===(i=l.clientIndividual)||void 0===i?void 0:i.firstName),eM.setFieldValue("lastName",null===(d=l.clientIndividual)||void 0===d?void 0:d.lastName),eM.setFieldValue("middleName",null===(r=l.clientIndividual)||void 0===r?void 0:r.middleName),eM.setFieldValue("fl_firstName",null===(o=l.clientIndividual)||void 0===o?void 0:o.fl_firstName),eM.setFieldValue("fl_lastName",null===(s=l.clientIndividual)||void 0===s?void 0:s.fl_lastName),eM.setFieldValue("fl_middleName",null===(u=l.clientIndividual)||void 0===u?void 0:u.fl_middleName),eM.setFieldValue("birthDate",(0,h.a1)(null==l?void 0:null===(c=l.clientIndividual)||void 0===c?void 0:c.birthDate)),eM.setFieldValue("resident",null==l?void 0:null===(m=l.clientIndividual)||void 0===m?void 0:m.isResident),eM.setFieldValue("professionId",null===(v=l.clientMaster)||void 0===v?void 0:v.professionId),eM.setFieldValue("sponsorName",null===(p=l.clientIndividual)||void 0===p?void 0:p.sponsorName),eM.setFieldValue("idNo",l.clientIDView.idNo),eM.setFieldValue("id_type",l.clientIDView.idtId),eM.setFieldValue("expiryDate",(0,h.a1)(l.clientIDView.idExpiryDate)),eM.setFieldValue("remarks",l.headerView.notes),eM.setFieldValue("purpose_of_exchange",l.headerView.poeId),eM.setFieldValue("nationalityId",l.clientMaster.nationalityId),eM.setFieldValue("cellPhone",l.clientMaster.cellPhone),eM.setFieldValue("status",l.headerView.status),eM.setFieldValue("cashAccountId",l.headerView.cashAccountId),eM.setFieldValue("otp",l.headerView.otpVerified),eH(l.headerView.functionId),null==l?void 0:null===(f=l.clientIndividual)||void 0===f?void 0:f.clientId}}(0,d.useEffect)(()=>{!async function(){eH(eM.values.functionId),es&&await e0(es),es||eM.setFieldValue("date",new Date)}()},[]);let{userId:e1}=JSON.parse(null===(a=window)||void 0===a?void 0:null===(l=a.sessionStorage)||void 0===l?void 0:l.getItem("userData"));async function e2(e){let{currencyId:l}=e;if(l){let e=await em({extension:N.r.Defaults.get,parameters:"_key=baseCurrencyId"});return(await em({extension:I.u.ExchangeMap.get,parameters:"_plantId=".concat(eu||eM.values.plantId,"&_currencyId=").concat(l,"&_rateTypeId=").concat(eV,"&_racurrencyId=").concat(e.record.value)})).record}}async function e3(){let e=eM.values,{record:l}=await em({extension:N.r.UserDefaults.get,parameters:"_userId=".concat(e1,"&_key=cashAccountId")}),a={recordId:(null==e?void 0:e.recordId)||null,date:(0,h.ku)(e.date),reference:e.reference,nationalityId:e.nationalityId,nationalityType:e.nationalityType,status:e.status,functionId:e.functionId,plantId:eu||e.plantId,clientId:e.clientId,cashAccountId:l.value,poeId:e.purpose_of_exchange,wip:e.wip,otpVerified:e.otp,amount:String(e5||"").replaceAll(",",""),notes:e.remarks},t=await ev({extension:R.s.CurrencyTrading.reopen,record:JSON.stringify(a)});t.recordId&&(r.ZP.success(eR.Reopened),await e0(t.recordId)),eT()}let e5=eM.values.operations.reduce((e,l)=>{var a,t;return e+(parseFloat(null===(t=l.lcAmount)||void 0===t?void 0:null===(a=t.toString())||void 0===a?void 0:a.replace(/,/g,""))||0)},0),e9=eM.values.amount.reduce((e,l)=>{var a;let{amount:t}=l;return e+parseFloat(null==t?void 0:null===(a=t.toString())||void 0===a?void 0:a.replace(/,/g,""))||0},0),e4=e5-e9;function e6(e,l){ex({Component:q.Z,props:{values:eM.values,recordId:e,clientId:l,functionId:eM.values.functionId,onSuccess:()=>{eU(e)}}})}async function e8(e){let{numberId:l}=e,a=await em({extension:y.u.CtClientIndividual.get2,parameters:"_numberId=".concat(l)});eh(!1);let t=a&&a.record;t&&(eM.setFieldValue("clientId",t.clientIndividual.clientId),eM.setFieldValue("firstName",t.clientIndividual.firstName),eM.setFieldValue("middleName",t.clientIndividual.middleName),eM.setFieldValue("lastName",t.clientIndividual.lastName),eM.setFieldValue("fl_firstName",t.clientIndividual.fl_firstName),eM.setFieldValue("fl_lastName",t.clientIndividual.fl_lastName),eM.setFieldValue("fl_middleName",t.clientIndividual.fl_middleName),eM.setFieldValue("birthDate",(0,h.a1)(t.clientIndividual.birthDate)),eM.setFieldValue("resident",t.clientIndividual.isResident),eM.setFieldValue("sponsorName",t.clientIndividual.sponsorName),eM.setFieldValue("expiryDate",(0,h.a1)(t.client.expiryDate)),eM.setFieldValue("professionId",t.client.professionId),eM.setFieldValue("nationalityId",t.client.nationalityId),eM.setFieldValue("nationalityType",195===t.client.nationalityId?1:2),eM.setFieldValue("cellPhone",t.client.cellPhone),eh(!0))}let e7=async()=>{let e=eM.values,l={recordId:(null==e?void 0:e.recordId)||null,date:(0,h.ku)(e.date),reference:e.reference,nationalityId:e.nationalityId,nationalityType:e.nationalityType,status:e.status,functionId:e.functionId,plantId:eu||e.plantId,clientId:e.clientId,cashAccountId:e.cashAccountId,poeId:e.purpose_of_exchange,wip:e.wip,otpVerified:e.otp,amount:String(e5||"").replaceAll(",",""),notes:e.remarks},a=await ev({extension:R.s.CurrencyTrading.post,record:JSON.stringify(l)});a&&(r.ZP.success(eR.Posted),await e0(a.recordId),eT())},le=[{key:"Locked",condition:!0,onClick:()=>{if(eM.values.otp)e7();else{ex({Component:J.Z,props:{values:eM.values,PlantSupervisors:!0,onClose:()=>e7()},expandable:!1,spacing:!1});return}},disabled:!eY||eK},{key:"Close",condition:!eG,onClick:eU,disabled:eG||!eY},{key:"Reopen",condition:eG,onClick:e3,disabled:!eG},{key:"OTP",condition:!0,onClick:e6,disabled:!eY||eK&&!ez},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!eG},{key:"Account Balance",condition:!0,onClick:"onClickAC",disabled:!1}];return(0,t.jsx)(Z.Z,{actions:le,form:eM,initialValues:eq,setIDInfoAutoFilled:()=>{ey(!1),eh(!1)},resourceId:T.i.CashInvoice,editMode:eY,isClosed:eG,disabledSubmit:e4>0,previewReport:eY,isParentWindow:!1,maxAccess:eE,children:(0,t.jsx)(w.R,{children:(0,t.jsx)(P.Q,{children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(c.Z,{title:"Transaction",children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:3,children:(0,t.jsx)(s.Z,{name:"reference",label:eO.reference,value:eM.values.reference,readOnly:eY,maxLength:"20",onChange:eM.handleChange,onClear:()=>eM.setFieldValue("reference",""),error:eM.touched.reference&&!!eM.errors.reference,maxAccess:eE})}),(0,t.jsx)(A.Z,{hideonempty:!0,item:!0,xs:3,children:(0,t.jsx)(o.Z,{name:"date",label:eO.date,value:null===(_=eM.values)||void 0===_?void 0:_.date,required:!0,onChange:eM.setFieldValue,onClear:()=>eM.setFieldValue("date",""),readOnly:eY||eG,error:eM.touched.date&&!!eM.errors.date,helperText:eM.touched.date&&eM.errors.date,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:3,children:(0,t.jsx)(v.Z,{datasetId:L.v.DOCUMENT_STATUS,name:"status",label:eO.status,valueField:"key",displayField:"value",values:eM.values,readOnly:!0,onChange:(e,l)=>{eM&&eM.setFieldValue("status",null==l?void 0:l.key)},maxAccess:eE,error:eM.touched.status&&!!eM.errors.status})}),(0,t.jsx)(n.ZP,{item:!0,xs:3,children:(0,t.jsx)(s.Z,{name:"search",label:eO.search,value:eM.values.search,readOnly:eY||eG,maxLength:"20",required:!0,onChange:e=>{let l=e.target.value;eP(l),l&&ew!=l&&eB({key:l})},onFocus:e=>{eP(e)},onClear:()=>eM.setFieldValue("search",""),error:eM.touched.search&&!!eM.errors.search,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:3,children:(0,t.jsx)(U.Z,{options:[{label:eO.purchase,value:m.J.CurrencyPurchase},{label:eO.sale,value:m.J.CurrencySale}],value:eM.values.functionId,onChange:e=>{let l=e.target.value;eH(parseInt(l)),ej(l),eM.setFieldValue("reference","")},disabledCondition:()=>{var e,l;return(null==eM?void 0:null===(l=eM.values)||void 0===l?void 0:null===(e=l.operations[0])||void 0===e?void 0:e.currencyId)!==""}})}),(0,t.jsx)(n.ZP,{item:!0,xs:3,children:(0,t.jsx)(v.Z,{datasetId:L.v.NATIONALITY,name:"nationalityType",label:eO.nationalityType,readOnly:eY||eG||ef,valueField:"key",displayField:"value",values:eM.values,required:!0,onChange:(e,l)=>{eM&&eM.setFieldValue("nationalityType",(null==l?void 0:l.key)||null)},maxAccess:eE,error:eM.touched.nationalityType&&!!eM.errors.nationalityType})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(U.Z,{options:[{label:eO.individual,value:"1"},{label:eO.corporate,value:"2",disabled:!0}],value:eM.values.clientType,onChange:e=>eM.setFieldValue("clientType",e.target.value),disabledCondition:()=>{var e,l;return(null==eM?void 0:null===(l=eM.values)||void 0===l?void 0:null===(e=l.operations[0])||void 0===e?void 0:e.currencyId)!==""}})})]})})}),(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(c.Z,{title:"Individual",children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(s.Z,{name:"idNo",label:eO.idNo,type:eQ&&eM.values.idNo?"password":"",value:eM.values.idNo,readOnly:eY||eG||ef,required:e5>=5e3,maxLength:"20",onBlur:e=>{let l=e.target.value;eZ(l),l&&l!==e_&&(eW(!0),eD(l),e8({numberId:l}))},onFocus:e=>{eW(!1)},onClear:()=>{eM.setFieldValue("idNo",""),eZ("")},onChange:eM.handleChange,error:eM.touched.idNo&&!!eM.errors.idNo,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(o.Z,{name:"birthDate",label:eO.birthDate,value:null===(H=eM.values)||void 0===H?void 0:H.birthDate,required:e5>=5e3,onChange:eM.setFieldValue,onClear:()=>eM.setFieldValue("birthDate",""),error:eM.touched.birthDate&&!!eM.errors.birthDate,readOnly:eY||eG||ef||ep,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(B.Z,{name:"birthdatehijri",label:eO.birthDateHijri,value:null===(Q=eM.values)||void 0===Q?void 0:Q.birthDate,onChange:(e,l)=>{eM.setFieldValue("birthDate",l)},readOnly:eY||eG||ef||ep,onClear:()=>eM.setFieldValue("birthDate","")})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(v.Z,{name:"id_type",endpointId:I.u.IdTypes.qry,label:eO.id_type,valueField:"recordId",displayField:"name",onChange:(e,l)=>{eM.setFieldValue("id_type",(null==l?void 0:l.key)||null)},readOnly:eY||eG||ef||ep,values:eM.values,required:e5>=5e3,maxAccess:eE,error:eM.touched.id_type&&!!eM.errors.id_type})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(z.Z,{label:eO.fetch,onClick:()=>ex({Component:u.Z,props:{idTypes:eN,clientformik:eM,labels:eO}}),disabled:!!(!(null==eM?void 0:null===(W=eM.values)||void 0===W?void 0:W.id_type)||!(null==eM?void 0:null===($=eM.values)||void 0===$?void 0:$.birthDate)||!eM.values.idNo||(null===(X=eM.values)||void 0===X?void 0:X.expiryDate)&&new Date(null===(ee=eM.values)||void 0===ee?void 0:ee.expiryDate)>=new Date)})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(o.Z,{name:"expiryDate",label:eO.expiryDate,value:null===(el=eM.values)||void 0===el?void 0:el.expiryDate,required:e5>=5e3,onChange:eM.setFieldValue,onClear:()=>eM.setFieldValue("expiryDate",""),error:eM.touched.expiryDate&&!!eM.errors.expiryDate,readOnly:eY||eG||ef||ep,maxAccess:eE})})]})}),(0,t.jsx)(n.ZP,{item:!0,xs:8,children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(s.Z,{name:"firstName",label:eO.firstName,value:eM.values.firstName,readOnly:eY||eG||ef||ep,required:e5>=5e3,maxLength:"20",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("firstName",""),error:eM.touched.firstName&&!!eM.errors.firstName,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(s.Z,{name:"middleName",label:eO.middleName,value:eM.values.middleName,readOnly:eY||eG||ef||ep,maxLength:"20",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("middleName",""),error:eM.touched.middleName&&!!eM.errors.middleName,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(s.Z,{name:"lastName",label:eO.lastName,value:eM.values.lastName,readOnly:eY||eG||ef||ep,required:e5>=5e3,maxLength:"20",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("lastName",""),error:eM.touched.lastName&&!!eM.errors.lastName,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsxs)(K.Z,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(s.Z,{name:"fl_firstName",label:eO.fl_firstName,value:eM.values.fl_firstName,readOnly:eY||eG||ef||ep,dir:"rtl",language:"arabic",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("fl_firstName",""),error:eM.touched.fl_firstName&&!!eM.errors.fl_firstName,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(s.Z,{name:"fl_middleName",label:eO.fl_middleName,value:eM.values.fl_middleName,readOnly:eY||eG||ef||ep,dir:"rtl",language:"arabic",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("fl_middleName",""),error:eM.touched.fl_middleName&&!!eM.errors.fl_middleName,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(s.Z,{name:"fl_lastName",label:eO.fl_lastName,value:eM.values.fl_lastName,readOnly:eY||eG||ef||ep,dir:"rtl",language:"arabic",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("fl_lastName",""),error:eM.touched.fl_lastName&&!!eM.errors.fl_lastName,maxAccess:eE})})]})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(s.Z,{name:"cellPhone",phone:!0,label:eO.cellPhone,value:null===(ea=eM.values)||void 0===ea?void 0:ea.cellPhone,onChange:eM.handleChange,onBlur:e=>{eX(!0)},onFocus:e=>{eX(!1)},maxLength:"20",required:e5>=5e3,onClear:()=>eM.setFieldValue("cellPhone",""),error:eM.touched.cellPhone&&!!eM.errors.cellPhone,maxAccess:eE,readOnly:eY||eG||ef})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(v.Z,{name:"nationalityId",endpointId:N.r.Country.qry,label:eO.nationalityId,valueField:"recordId",displayField:["reference","name","flName"],values:eM.values,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],required:e5>=5e3,onChange:(e,l)=>{eM&&eM.setFieldValue("nationalityId",null==l?void 0:l.recordId)},maxAccess:eE,readOnly:eY||eG||ef,error:eM.touched.nationalityId&&!!eM.errors.nationalityId})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(v.Z,{name:"professionId",endpointId:D.d.Profession.qry,label:eO.professionId,valueField:"recordId",displayField:["reference","name"],readOnly:eY||eG||ef||ep,values:eM.values,required:e5>=5e3,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:(e,l)=>{eM&&eM.setFieldValue("professionId",null==l?void 0:l.key)},maxAccess:eE,error:eM.touched.professionId&&!!eM.errors.professionId})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{name:"sponsorName",label:eO.sponsorName,value:eM.values.sponsorName,readOnly:eY||eG,maxLength:"20",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("sponsorName",""),error:eM.touched.sponsorName&&!!eM.errors.sponsorName,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:6,children:(0,t.jsx)(s.Z,{name:"remarks",label:eO.remarks,value:eM.values.remarks,readOnly:eY||eG,maxLength:"20",onChange:eM.handleChange,forceUpperCase:!0,onClear:()=>eM.setFieldValue("remarks",""),error:eM.touched.remarks&&!!eM.errors.remarks,maxAccess:eE})}),(0,t.jsx)(n.ZP,{item:!0,xs:4,children:(0,t.jsx)(v.Z,{name:"purpose_of_exchange",endpointId:I.u.PurposeExchange.qry,label:eO.purpose_of_exchange,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:(e,l)=>{eM&&eM.setFieldValue("purpose_of_exchange",null==l?void 0:l.key)},readOnly:eY||eG,values:eM.values,maxAccess:eE,error:eM.touched.purpose_of_exchange&&!!eM.errors.purpose_of_exchange})}),(0,t.jsx)(n.ZP,{item:!0,xs:2,children:(0,t.jsx)(i.Z,{name:"resident",value:eM.values.resident,onChange:e=>eM.setFieldValue("resident",e.target.checked),label:"Resident",maxAccess:eE,disabled:eY||eG||ef||ep})}),(0,t.jsx)(n.ZP,{item:!0,xs:2,children:(0,t.jsx)(i.Z,{name:"otp",value:eM.values.otp,onChange:e=>eM.setFieldValue("otp",e.target.checked),label:"Otp",maxAccess:eE,disabled:!0})})]})})]})})}),(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(c.Z,{title:"Operations",children:(0,t.jsx)(j._,{onChange:e=>eM.setFieldValue("operations",e),value:eM.values.operations,error:!(eJ.length<1)||eM.errors.operations,initialValues:null==eM?void 0:null===(en=eM.initialValues)||void 0===en?void 0:null===(et=en.operations)||void 0===et?void 0:et[0],height:175,disabled:eG,maxAccess:eE,allowDelete:!eY,name:"operations",bg:eM.values.functionId&&(parseInt(eM.values.functionId)===m.J.CurrencySale?"#C7F6C7":"rgb(245, 194, 193)"),columns:[{component:"resourcecombobox",label:eO.currency,name:"currencyId",props:{endpointId:N.r.Currency.qry,displayField:["reference","name"],valueField:"recordId",mapping:[{from:"recordId",to:"currencyId"},{from:"name",to:"currencyName"},{from:"reference",to:"currencyRef"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}]},async onChange(e){let{row:{update:l,oldRow:a,newRow:t}}=e;if(!(null==t?void 0:t.currencyId)){l({currencyId:"",currencyName:"",currencyRef:"",exRate:"",defaultRate:"",rateCalcMethod:"",minRate:"",maxRate:""});return}let n=await e2({currencyId:null==t?void 0:t.currencyId});if(!(null==n?void 0:n.rate)){l({exRate:"",defaultRate:"",rateCalcMethod:"",minRate:"",maxRate:""}),eI({message:"Rate not defined for ".concat(t.currencyName,".")});return}if(n&&t.fcAmount){let e=n.rate,a=n.rateCalcMethod,i=1===a?t.fcAmount*e:2===a?t.fcAmount/e:0;isNaN(i)||l({lcAmount:i})}l({currencyId:t.currencyId,exRate:null==n?void 0:n.rate,defaultRate:null==n?void 0:n.rate,rateCalcMethod:null==n?void 0:n.rateCalcMethod,minRate:null==n?void 0:n.minRate,maxRate:null==n?void 0:n.maxRate})},flex:1.5},{component:"numberfield",label:eO.fcAmount,name:"fcAmount",async onChange(e){let{row:{update:l,newRow:a}}=e,t=a.fcAmount,n=a.rateCalcMethod,i=a.exRate,d=1===n?t*i:2===n?t/i:0;isNaN(d)||l({lcAmount:null==d?void 0:d.toFixed(2)})}},{component:"numberfield",label:eO.defaultRate,name:"defaultRate",props:{readOnly:!0}},{component:"numberfield",name:"exRate",label:eO.Rate,props:{readOnly:!1},updateOn:"blur",async onChange(e){let{row:{update:l,newRow:a}}=e,t=a.fcAmount,n=a.lcAmount,i=a.rateCalcMethod,d=a.exRate;if(d){if(d>=a.minRate&&d<=a.maxRate){if(t){let e=1===i?t*d:2===i?t/d:0;isNaN(e)||l({lcAmount:e.toFixed(2)})}else if(n){let e=2===i?n*d:1===i?n/d:0;isNaN(e)||l({fcAmount:e.toFixed(2)})}else l({exRate:null==a?void 0:a.exRate})}else{eI({message:"Rate not in the [".concat(a.minRate,"-").concat(a.maxRate,"]range.")}),l({exRate:""});return}}}},{component:"numberfield",name:"lcAmount",label:eO.lcAmount,props:{readOnly:!1},async onChange(e){let{row:{update:l,newRow:a}}=e,t=a.lcAmount,n=a.rateCalcMethod,i=a.exRate,d=2===n?t*i:1===n?t/i:0;d&&a.exRate&&l({fcAmount:d.toFixed(2)})}}]})})}),(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(c.Z,{title:"Amount",children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:9,children:(0,t.jsx)(M.Z,{height:175,onChange:e=>eM.setFieldValue("amount",e),value:eM.values.amount,error:eM.errors.amount,name:"amount",setFormik:ek,data:{recordId:null===(ei=eM.values)||void 0===ei?void 0:ei.recordId,reference:null===(ed=eM.values)||void 0===ed?void 0:ed.reference,clientName:null===(er=eM.values)||void 0===er?void 0:er.clientName,viewPosButtons:2===eM.values.wip},amount:e5,disabled:eY||eG})},null===(eo=eM.values.amount)||void 0===eo?void 0:eo.length),(0,t.jsx)(n.ZP,{item:!0,xs:3,children:(0,t.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(k.Z,{label:eO.netAmount,value:e5,readOnly:!0})}),(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(k.Z,{label:eO.amountReceived,value:e9,readOnly:!0})}),(0,t.jsx)(n.ZP,{item:!0,xs:12,children:(0,t.jsx)(k.Z,{format:e=>0===e?"0.00":e,label:eO.balanceToPay,value:e4,readOnly:!0})})]})})]})})})]})})})})};H.width=1200,H.height=600;var Q=H},70919:function(e,l,a){"use strict";var t=a(52322),n=a(2784),i=a(49864),d=a(93154),r=a.n(d),o=a(62202),s=a(60418),u=a(34257),c=a(96026),m=a(19473),v=a(95982),p=a(65950),h=a(21326);let f=e=>{let{loggedUser:l,onClose:a,window:d,PlantSupervisors:f=!1,values:y}=e,[I,x]=(0,n.useState)(["","","","","",""]),[N,g]=(0,n.useState)(""),[C,V]=(0,n.useState)(0),{apiUrl:F,languageId:_}=(0,u.a)(),{platformLabels:Z}=(0,n.useContext)(m.l),{postRequest:w}=(0,n.useContext)(p.$),P=(0,c.V)();async function b(e){P&&await P.stack(e)}(0,h.Z)({title:Z.OTPVerification,window:d});let j=e=>{if(e.length>1){let n=l.accessToken;var t=new FormData;t.append("record",JSON.stringify({otp:e})),(0,s.Z)({method:"POST",url:F+v.y.checkOTP,headers:{Authorization:"Bearer "+n,"Content-Type":"multipart/form-data",LanguageId:_},data:t}).then(e=>{o.ZP.success(Z.verificationCompleted),d.close(),a()}).catch(e=>{var l,a;b({message:e,height:(null===(l=e.response)||void 0===l?void 0:l.status)===404||(null===(a=e.response)||void 0===a?void 0:a.status)===500?400:""})})}else g(Z.AllFieldsRequired)},R=async e=>{if(e.length>1){var l={plantId:y.plantId,otp:e};await w({extension:v.y.PlantSupervisors.verify,record:JSON.stringify(l)}).then(e=>{o.ZP.success(Z.verificationCompleted),d.close(),a()})}else g(Z.AllFieldsRequired)},A=(e,l)=>{document.getElementById("otp-input-".concat(e)).select();let a=l.target.value,t=[...I];isNaN(a)||""===a?"deleteContentBackward"===l.nativeEvent.inputType?(t[e]="",x(t),e>0&&""!==document.getElementById("otp-input-".concat(e-1)).value&&document.getElementById("otp-input-".concat(e)).focus()):""!==a&&""!==document.getElementById("otp-input-".concat(e)).value&&(document.getElementById("otp-input-".concat(e)).select(),t[e]=a,x(t)):(t[e]=a,x(t),e<I.length-1&&""!==a?(document.getElementById("otp-input-".concat(e+1)).focus(),document.getElementById("otp-input-".concat(e+1)).select()):e===I.length-1&&t.every(e=>""!==e)&&D(t))};(0,n.useEffect)(()=>{var e;V(0),e=0,I.map((l,a)=>""!==l&&e++),e>5&&V(e)},[I]);let k=(e,l)=>{var a,t,n,i,d;let r=l.target.value;"ArrowRight"==l.key&&e<6?(null===(a=document.getElementById("otp-input-".concat(e+1)))||void 0===a||a.focus(),null===(t=document.getElementById("otp-input-".concat(e+1)))||void 0===t||t.select()):"ArrowLeft"==l.key&&e>0?(null===(n=document.getElementById("otp-input-".concat(e-1)))||void 0===n||n.focus(),null===(i=document.getElementById("otp-input-".concat(e-1)))||void 0===i||i.select()):r===document.getElementById("otp-input-".concat(e)).value&&(null===(d=document.getElementById("otp-input-".concat(e)))||void 0===d||d.select())},D=e=>{let l=e?e.join(""):I.join("");f?R(l):j(l)};return(0,n.useEffect)(()=>{let e=setTimeout(()=>{let e=document.getElementById("otp-input-0");e&&(e.focus(),e.select())},0);return()=>clearTimeout(e)},[]),(0,t.jsx)("div",{width:500,height:300,onClose:a,children:(0,t.jsxs)(i.Z,{className:r().phoneVerificationContainer,children:[(0,t.jsx)("p",{children:Z.TwoFactorAuthentication}),(0,t.jsx)(i.Z,{className:r().otpInputContainer,children:I.map((e,l)=>(0,t.jsx)("input",{className:r().inputText,type:"text",id:"otp-input-".concat(l),maxLength:"1",onKeyUp:e=>k(l,e),value:e,onChange:e=>A(l,e)},l))}),(0,t.jsx)("button",{className:r().verifyButton,onClick:D,disabled:C<5,children:Z.verifyOTP}),N&&(0,t.jsx)("p",{className:r().errorMessage,children:N})]})})};f.width=400,f.height=400,l.Z=f},81119:function(e){e.exports={radioGroup:"CustomRadioButtonGroup_radioGroup__nJ_DE",radio:"CustomRadioButtonGroup_radio__n8LPY"}}}]);