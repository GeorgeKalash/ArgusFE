(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99471],{88635:function(e,a,n){"use strict";n.d(a,{L:function(){return l}});let r="RTBI.asmx/",l={Combos:{qryCBX:r+"qryCBX",qryTerrapayCBX:r+"qryTerrapayCBX",qryTerrapyBanks:r+"qryTerrapyBanks",terrapayAccountStatus:r+"terrapayAccountStatus"},ReceivingCountries:{qry:r+"qryRVC"},PayingAgent:{qry:r+"qryAGT"},Bank:{snapshot:r+"snapshotBank"},InstantCashRates:{qry:r+"qryICFees",get:r+"getICFees"},exchange:{get:r+"getICExchangeRates"},Agents:{qry:r+"qryAgents"},Currencies:{qry:r+"qryBICurrencies"},Countries:{qry:r+"qryBICountries"},DeliveryMode:{qry:r+"qryBIDVRow"},ATPExchangeRate:{get2:r+"getATPExchangeRate2"}}},14200:function(e,a,n){"use strict";n.d(a,{Z:function(){return u}});var r=n(52322);n(2784);var l=n(29254),d=n(37691),t=n(7087),i=n.n(t),o=n(99770),s=n.n(o);function u(e){let{label:a,readOnly:n,onChange:t,...o}=e;return(0,r.jsx)(d.Z,{className:"".concat(i().outlinedRoot," ").concat(s().smallSwitch),control:(0,r.jsx)(l.Z,{color:"primary",onChange:!n&&t,...o}),label:(0,r.jsx)("div",{className:i().inputLabel,children:a})})}},99471:function(e,a,n){"use strict";n.d(a,{Z:function(){return ee}});var r=n(52322),l=n(2784),d=n(60218),t=n(48601),i=n(61802),o=n(5088),s=n(82737),u=n(26612),c=n(8661),v=n(88469),m=n(65950),y=n(17720),h=n(46553),p=n(71987),f=n(88635),x=n(75991),I=n(27423),C=n(80983),g=n(91406),b=n(38449),A=n(96026),N=n(62362),R=n(31389),Z=n(54074);function j(e){var a,n,i,s,v,y,h,j,k,q,P,w,F,S,D,V,O;let{onSubmit:T,cashData:_={},window:L,clientData:M,productData:{deliveryModeId:B,payingAgent:E,payingCurrency:J},outwardsData:U,sysDefault:G}=e,{getRequest:Q}=(0,l.useContext)(m.$),{stack:$}=(0,A.V)(),X=!!(null==U?void 0:U.recordId),{labels:z,maxAccess:H}=(0,p.J)({datasetId:u.i.InstantCash}),{formik:K}=(0,C.c)({maxAccess:H,initialValues:{deliveryModeId:B,payingAgent:E,sourceCurrency:G.currencyRef,targetCurrency:J,sourceAmount:(null==U?void 0:U.amount)||0,toCountryId:"",totalTransactionAmountPerAnnum:M.hiddenTrxAmount,transactionsPerAnnum:M.hiddenTrxCount,remitter:{relation:M.relation,otherRelation:M.otherRelation,employerName:M.employerName,employerStatus:null==M?void 0:M.employerStatus},beneficiary:{address:{postCode:M.postCode},bankDetails:{bankCode:null===(a=M.bankDetails)||void 0===a?void 0:a.bankCode,bankName:null===(n=M.bankDetails)||void 0===n?void 0:n.bankName,bankAddress1:null===(i=M.bankDetails)||void 0===i?void 0:i.bankAddress1}}},validateOnChange:!0,validationSchema:t.Ry({deliveryModeId:t.Rx().required(),payingAgent:t.Z_().required(),sourceAmount:t.Rx().required(),remitter:t.Ry().shape({employerName:t.Z_().required(),employerStatus:t.Z_().required()}),beneficiary:t.Ry().shape({bankDetails:t.Ry().shape({bankName:t.Z_().required()})})}),onSubmit:e=>{T(e),L.close()}});return(0,l.useEffect)(()=>{!async function(){if(_.deliveryModeId&&K.setValues(_),U.countryId){var e,a;let n=await Q({extension:b.r.Country.get,parameters:"_recordId=".concat(U.countryId)});if(!(null===(e=n.record)||void 0===e?void 0:e.isoCode1)){$({message:"".concat(z.assignIsoCode1," ").concat(n.record.name)});return}K.setFieldValue("toCountryId",null==n?void 0:null===(a=n.record)||void 0===a?void 0:a.isoCode1.trim())}}()},[]),(0,r.jsx)(Z.Z,{onSave:K.handleSubmit,maxAccess:H,disabledSubmit:X,children:(0,r.jsx)(R.R,{children:(0,r.jsx)(N.Q,{children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,container:!0,xs:12,children:(0,r.jsx)(d.ZP,{hideonempty:!0,xs:6,children:(0,r.jsx)(g.Z,{name:"sourceAmount",onChange:K.handleChange,label:z.sourceAmount,value:K.values.sourceAmount,error:K.touched.sourceAmount&&!!K.errors.sourceAmount,maxAccess:H,required:!0,readOnly:!0,onClear:()=>K.setFieldValue("sourceAmount","")})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsxs)(x.Z,{title:z.remitter,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(o.Z,{name:"otherRelation",onChange:e=>K.setFieldValue("remitter.otherRelation",e.target.value),label:z.otherRelation,value:K.values.remitter.otherRelation,readOnly:X,error:(null===(s=K.touched.remitter)||void 0===s?void 0:s.otherRelation)&&!!(null===(v=K.errors.remitter)||void 0===v?void 0:v.otherRelation)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(o.Z,{name:"remitter.employerName",required:!0,readOnly:!0,onChange:e=>K.setFieldValue("remitter.employerName",e.target.value),label:z.employerName,onClear:()=>K.setFieldValue("remitter.employerName",""),value:K.values.remitter.employerName,error:(null===(y=K.touched.remitter)||void 0===y?void 0:y.employerName)&&!!(null===(h=K.errors.remitter)||void 0===h?void 0:h.employerName)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(c.Z,{endpointId:f.L.Combos.qryCBX,parameters:"_combo=4",name:"remitter.employerStatus",label:z.employerStatus,required:!0,readOnly:X,valueField:"name",displayField:"name",values:K.values.remitter.employerStatus,onChange:(e,a)=>{K.setFieldValue("remitter.employerStatus",a?null==a?void 0:a.name:"")},maxAccess:H,error:(null===(j=K.touched.remitter)||void 0===j?void 0:j.employerStatus)&&!!(null===(k=K.errors.remitter)||void 0===k?void 0:k.employerStatus)})})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsxs)(x.Z,{title:z.beneficiary,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.U,{endpointId:f.L.Bank.snapshot,parameters:{_receivingCountry:K.values.toCountryId,_payingAgent:K.values.payingAgent,_deliveryMode:K.values.deliveryModeId,_payoutCurrency:K.values.targetCurrency},required:!0,valueField:"name",displayField:"bankName",name:"beneficiary.bankDetails.bankName",label:z.bank,form:K,firstValue:K.values.beneficiary.bankDetails.bankName,readOnly:!(K.values.deliveryModeId&&K.values.payingAgent)||X,maxAccess:H,secondDisplayField:!1,onChange:async(e,a)=>{K.setFieldValue("beneficiary.bankDetails.bankCode",null==a?void 0:a.recordId),K.setFieldValue("beneficiary.bankDetails.bankAddress1",null==a?void 0:a.address1),K.setFieldValue("beneficiary.bankDetails.bankName",(null==a?void 0:a.name)||"")},error:(null===(P=K.touched.beneficiary)||void 0===P?void 0:null===(q=P.bankDetails)||void 0===q?void 0:q.bankName)&&!!(null===(F=K.errors.beneficiary)||void 0===F?void 0:null===(w=F.bankDetails)||void 0===w?void 0:w.bankName)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(o.Z,{numberField:!0,name:"beneficiary.address.postCode",readOnly:X,onChange:e=>K.setFieldValue("beneficiary.address.postCode",e.target.value),onClear:()=>K.setFieldValue("beneficiary.address.postCode",""),label:z.postalCode,value:K.values.beneficiary.address.postCode,error:(null===(D=K.touched.beneficiary)||void 0===D?void 0:null===(S=D.address)||void 0===S?void 0:S.postCode)&&!!(null===(O=K.errors.beneficiary)||void 0===O?void 0:null===(V=O.address)||void 0===V?void 0:V.postCode),maxAccess:H})})]})})]})})})})}function k(e){var a,n,i,s,v,y,h,x,I;let{onSubmit:j,terraPay:k={},window:q,data:P}=e,{getRequest:w}=(0,l.useContext)(m.$),{stack:F}=(0,A.V)(),{labels:S,maxAccess:D}=(0,p.J)({datasetId:u.i.Terrapay}),V=null==P?void 0:P.recordId,{formik:O}=(0,C.c)({maxAccess:D,initialValues:k,validateOnChange:!0,validationSchema:t.Ry({transaction:t.Ry({creditorBankSubCode:t.Z_().required(),internationalTransferInformation:t.Ry({relationshipSender:t.Z_().required()})})}),onSubmit:e=>{j(e),q.close()}});return(0,l.useEffect)(()=>{!async function(){var e,a;if(O.setFieldValue("quotation.requestAmount",null==P?void 0:P.amount),P.countryId){let a=await w({extension:b.r.Country.get,parameters:"_recordId=".concat(P.countryId)});a.record.isoCode1||F({message:"".concat(S.assignIsoCode1," ").concat(a.record.name)}),O.setFieldValue("quotation.creditorReceivingCountry",null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.isoCode1.trim())}if(P.currencyId){let e=await w({extension:b.r.Currency.get,parameters:"_recordId=".concat(P.currencyId)});e.record.isoCode||F({message:"".concat(S.assignIsoCode1," ").concat(e.record.name)}),O.setFieldValue("quotation.requestCurrency",null==e?void 0:null===(a=e.record)||void 0===a?void 0:a.isoCode)}}()},[]),(0,r.jsx)(Z.Z,{onSave:O.handleSubmit,maxAccess:D,disabledSubmit:V,children:(0,r.jsx)(R.R,{children:(0,r.jsx)(N.Q,{children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(o.Z,{name:"quotation.creditorReceivingCountry",readOnly:!0,onChange:O.handleChange,maxAccess:D,label:S.country,value:null===(a=O.values.quotation)||void 0===a?void 0:a.creditorReceivingCountry})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"quotation.requestAmount",readOnly:!0,onChange:O.handleChange,maxAccess:D,label:S.amount,value:null===(n=O.values.quotation)||void 0===n?void 0:n.requestAmount})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(o.Z,{name:"quotation.requestCurrency",readOnly:!0,onChange:O.handleChange,maxAccess:D,label:S.currency,value:null===(i=O.values.quotation)||void 0===i?void 0:i.requestCurrency})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(c.Z,{endpointId:f.L.Combos.qryTerrapayCBX,parameters:"_combo=1",name:"transaction.internationalTransferInformation.relationshipSender",label:S.relSender,valueField:"recordId",displayField:"name",values:O.values.transaction.internationalTransferInformation.relationshipSender,required:!0,readOnly:V,onChange:(e,a)=>{O.setFieldValue("transaction.internationalTransferInformation.relationshipSender",(null==a?void 0:a.recordId)||"")},maxAccess:D,error:(null===(v=O.touched.transaction)||void 0===v?void 0:null===(s=v.internationalTransferInformation)||void 0===s?void 0:s.relationshipSender)&&!!(null===(h=O.errors.transaction)||void 0===h?void 0:null===(y=h.internationalTransferInformation)||void 0===y?void 0:y.relationshipSender)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(c.Z,{endpointId:f.L.Combos.qryTerrapyBanks,parameters:"_country=".concat((null==P?void 0:P.countryRef)||""),name:"transaction.creditorBankSubCode",label:S.bank,valueField:"bankCode",displayField:"bankName",values:O.values.transaction.creditorBankSubCode,required:!0,readOnly:V,onChange:async(e,a)=>{var n,r,l;O.setFieldValue("transaction.bankName",(null==a?void 0:a.bankName)||""),O.setFieldValue("transaction.providerCode",(null==a?void 0:a.providerCode)||""),O.setFieldValue("transaction.creditorOrganisationid",(null==a?void 0:a.bankName)||""),O.setFieldValue("transaction.creditorBankSubCode",(null==a?void 0:a.bankCode)||"");let d=await w({extension:f.L.Combos.terrapayAccountStatus,parameters:"_accountId=".concat(null===(n=O.values.quotation)||void 0===n?void 0:n.creditorBankAccount,"&_country=").concat(null==P?void 0:P.countryRef,"&_bankName=").concat((null==a?void 0:a.bankName)||"","&_MSISDN=").concat(null===(r=O.values.quotation)||void 0===r?void 0:r.creditorMSIDSN,"&_beneficiaryName=").concat(null==P?void 0:P.beneficiaryName,"&_provider=").concat((null==a?void 0:a.providerCode)||"","&_bankCode=").concat(null==P?void 0:P.branchCode,"&_bankSubCode=null&_accountType=","checking")});null==d||null===(l=d.record)||void 0===l||l.status},maxAccess:D,error:(null===(x=O.touched.transaction)||void 0===x?void 0:x.creditorBankSubCode)&&!!(null===(I=O.errors.transaction)||void 0===I?void 0:I.creditorBankSubCode)})})]})})})})}var q=n(53621),P=n(58867),w=n(69387);let F=e=>{let{labels:a,maxAccess:n,setData:l,values:{originAmount:i,baseAmount:o,productId:s,payingCurrency:u,receivingCountry:v,agentCode:m,targetCurrency:y,agentDeliveryMode:h},window:p}=e,{formik:x}=(0,C.c)({initialValues:{agentCode:m,agentName:"",productId:s,fees:null,exRate:1,originAmount:i,baseAmount:o,bankName:"",bankNameCode:"",deliveryModeId:h,payingCurrency:u},maxAccess:n,validateOnChange:!0,validationSchema:t.Ry({agentCode:t.Z_().required()}),onSubmit:async e=>{l(e),p.close()}});return(0,r.jsx)(Z.Z,{onSave:x.handleSubmit,maxAccess:n,children:(0,r.jsx)(R.R,{children:(0,r.jsx)(N.Q,{children:(0,r.jsx)(d.ZP,{container:!0,spacing:2,children:(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(c.Z,{endpointId:x.values.deliveryModeId&&f.L.PayingAgent.qry,parameters:x.values.deliveryModeId&&"_deliveryMode=".concat(x.values.deliveryModeId,"&_receivingCountry=").concat(v,"&_payoutCurrency=").concat(y),name:"agentCode",required:!0,label:a.payingAgent,valueField:"recordId",displayField:"description",columnsInDropDown:[{key:"description",value:"Paying Agent"},{key:"payingCurrency",value:"Paying Currency"}],values:x.values,onChange:(e,a)=>{x.setFieldValue("agentCode",(null==a?void 0:a.recordId)||null),x.setFieldValue("agentName",null==a?void 0:a.description),x.setFieldValue("payingCurrency",null==a?void 0:a.payingCurrency)},readOnly:!x.values.deliveryModeId,maxAccess:n,error:x.touched.agentCode&&!!x.errors.agentCode})})})})})})};F.width=500,F.height=200;var S=n(69627);let D=e=>{let{labels:a,maxAccess:n,onProductSubmit:d,data:{products:t,targetCurrency:o,countryRef:s,sysDefault:u,defaultAgentCode:c,fcAmount:v,lcAmount:y,productId:h,recordId:p},window:x}=e,[I,C]=(0,l.useState)([]),{stack:g}=(0,i.zY)(),{getRequest:b}=(0,l.useContext)(m.$),{stack:j}=(0,A.V)(),k=async e=>{let{productId:n,agentName:r,agentCode:l,payingCurrency:d,deliveryModeId:t}=e,i=v||0,c=y||0,m=await b({extension:f.L.InstantCashRates.get,parameters:"_deliveryMode=".concat(t,"&_sourceCurrency=").concat(u.currencyRef,"&_targetCurrency=").concat(o,"&_sourceAmount=").concat(c,"&_targetAmount=").concat(i,"&_originatingCountry=").concat(u.countryRef,"&_destinationCountry=").concat(s)}),h=await b({extension:f.L.exchange.get,parameters:"_settlementCurrency=".concat(u.currencyRef,"&_receivingAgent=").concat(l,"&_payoutCurrency=").concat(o,"&_destinationCountry=").concat(s,"&_lcAmount=").concat(c,"&_fcAmount=").concat(i)}),p=null==h?void 0:h.record;if(!p){j({message:a.agentIsNotAvailable});return}C({list:null==I?void 0:I.list.map(e=>{var a;return e.productId===n?{...e,agentName:r||(null==e?void 0:e.agentName),agentCode:l,originAmount:null==p?void 0:p.originalAmount,baseAmount:null==p?void 0:p.baseAmount,fees:null==m?void 0:null===(a=m.record)||void 0===a?void 0:a.charge,exRate:p.settlementRate,deliveryModeId:t,payingCurrency:d}:e})})},q=[{field:"productName",headerName:a.ProductName,flex:1},{field:"corName",headerName:a.Correspondant,flex:1},{field:"agentName",headerName:a.Agent,flex:1},{field:"moreInfo",headerName:"",flex:.65,cellRenderer:e=>{if(1===e.data.interfaceId)return(0,r.jsx)(S.Z,{label:a.select,disabled:!!p,onClick:()=>{var r,l,d,t,i,u,v,m,y;return g({Component:F,props:{setData:k,values:{productId:null===(r=e.data)||void 0===r?void 0:r.productId,agentId:null===(l=e.data)||void 0===l?void 0:l.agentId,baseAmount:null===(d=e.data)||void 0===d?void 0:d.baseAmount,originAmount:null===(t=e.data)||void 0===t?void 0:t.originAmount,receivingCountry:s,deliveryModeId:null===(i=e.data)||void 0===i?void 0:i.deliveryModeId,defaultAgentCode:c,targetCurrency:o,payingCurrency:null===(u=e.data)||void 0===u?void 0:u.payingCurrency,agentCode:null===(v=e.data)||void 0===v?void 0:v.agentCode,agentDeliveryMode:null===(m=e.data)||void 0===m?void 0:m.agentDeliveryMode},labels:a,maxAccess:n},title:null===(y=e.data)||void 0===y?void 0:y.productName})}})}},{field:"fees",headerName:a.Fees,flex:.5,type:"number"},{field:"originAmount",headerName:a.originAmount,flex:.8,type:{field:"number",decimal:2}},{field:"baseAmount",headerName:a.BaseAmount,flex:.8,type:{field:"number",decimal:2}},{field:"dispersalName",headerName:a.extraInfo,flex:1}];return(0,l.useEffect)(()=>{C({list:t.map(e=>({...e,defaultAgentCode:e.agentCode,defaultAgentName:e.agentName,payingCurrency:e.agentPayingCurrency,defaultPayoutCurrency:e.payingCurrency,checked:e.productId===h,originAmount:e.originAmount,baseAmount:e.baseAmount}))})},[]),(0,r.jsx)(Z.Z,{onSave:()=>{d(I),x.close()},disabledSubmit:!!p,maxAccess:n,fullSize:!0,children:(0,r.jsx)(R.R,{children:(0,r.jsx)(N.Q,{children:(0,r.jsx)(w.Z,{name:"products",columns:q,gridData:I,rowId:["productId"],rowSelection:"single",isLoading:!1,maxAccess:n,pagination:!1,showCheckboxColumn:!0,ChangeCheckedRow:C,disable:()=>!!p})})})})};D.width=1200,D.height=500;var V=n(24074),O=n(89330),T=n(39812),_=n(62202),L=n(7121),M=n(84100),B=n(53137),E=n(30390),J=n(98345),U=n(19473),G=n(78711),Q=n(70844),$=e=>{let{form:a,maxAccess:n,labels:d,onSubmit:t,window:i}=e,{getRequest:o}=(0,l.useContext)(m.$),s=(0,G.TA)({initialValues:{clientId:a.clientId,benList:[]},validateOnChange:!0,onSubmit:e=>{var a;let n=null==e?void 0:null===(a=e.benList)||void 0===a?void 0:a.find(e=>null==e?void 0:e.checked);t({beneficiaryId:(null==n?void 0:n.beneficiaryId)||null,beneficiaryName:(null==n?void 0:n.name)||null,beneficiarySeqNo:(null==n?void 0:n.seqNo)||null,branchCode:null==n?void 0:n.branchCode}),i.close()}});async function u(){var e;let n=await o({extension:v.N.Beneficiary.qry3,parameters:"_clientId=".concat(a.clientId,"&_dispersalId=").concat(a.dispersalType,"&_countryId=").concat(a.countryId,"&_currencyId=").concat(a.currencyId)});n.list=((null==n?void 0:n.list)||[]).map(e=>(e.beneficiaryId==a.beneficiaryId&&(e.checked=!0),e)),s.setFieldValue("benList",null!==(e=n.list)&&void 0!==e?e:{list:[]})}let c=[{field:"name",headerName:d.name,flex:1},{field:"addressLine1",headerName:d.addressLine1,flex:1},{field:"nationalityName",headerName:d.nationalityId,flex:1},{field:"currencyRef",headerName:d.Currency,flex:1},{field:"countryName",headerName:d.country,flex:1},{field:"accountReference",flex:1},{field:"branchName",headerName:d.branchName,flex:1},{field:"dispersalTypeName",headerName:d.dispersalType,flex:1}];return(0,l.useEffect)(()=>{u()},[]),(0,r.jsx)(Z.Z,{onSave:s.handleSubmit,maxAccess:n,fullSize:!0,children:(0,r.jsx)(R.R,{children:(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{name:"benTable",columns:c,gridData:{list:s.values.benList},rowId:["beneficiaryId"],rowSelection:"single",pagination:!1,maxAccess:n,showCheckboxColumn:!0})})})})},X=n(1685),z=n(38143),H=n(14200),K=n(50023),Y=n(21326);let W=e=>{var a,n,f,Z,w,F,G,Q,W,ee,ea,en,er,el,ed,et,ei,eo,es,eu,ec,ev,em,ey,eh,ep,ef,ex,eI,eC,eg,eb,eA,eN,eR,eZ,ej,ek,eq,eP,ew,eF,eS,eD,eV,eO,eT,e_,eL,eM;let{recordId:eB,plantId:eE,userId:eJ,dtId:eU,window:eG}=e,{getRequest:eQ,postRequest:e$}=(0,l.useContext)(m.$),{stack:eX}=(0,i.zY)(),{stack:ez}=(0,A.V)(),{platformLabels:eH,defaultsData:eK}=(0,l.useContext)(U.l),eY=(0,X.m)("userData"),eW=parseInt(null==eK?void 0:null===(n=eK.list)||void 0===n?void 0:null===(a=n.find(e=>"vatPct"===e.key))||void 0===a?void 0:a.value)||0,[e0,e1]=(0,l.useState)({countryRef:"",currencyRef:""}),{labels:e2,access:e3}=(0,K.Z)({datasetId:u.i.OutwardsOrder,editMode:!!eB});(0,Y.Z)({title:e2.OutwardsOrder,window:eG});let{maxAccess:e6}=(0,J.H)({functionId:L.J.OutwardsOrder,access:e3,objectName:"header",hasDT:!1}),e8=(0,p.E)({endpointId:v.N.OutwardsOrder.snapshot}),e4={idNo:"",firstName:"",middleName:"",lastName:"",fl_firstName:"",fl_middleName:"",fl_lastName:"",expiryDate:null,professionId:"",recordId:eB,header:{countryName:"",countryRef:"",currencyRef:"",dispersalName:"",dispersalRef:"",currencyName:"",currentIsoCode:"",countryIsoCode:" ",corRef:null,corName:null,clientRef:"",clientName:"",cellPhone:"",statusName:"",wipName:"",rsName:null,beneficiaryName:"",plantName:null,plantRef:null,cashAccountRef:null,cashAccountName:null,poeName:"",poeRef:"",productName:"",interfaceId:"",wfStatusName:"",plantId:eE,userId:eJ,countryId:"",lcAmount:"",corId:null,rateCalcMethod:null,dispersalType:null,currencyId:null,wip:1,productId:"",dispersalId:"",clientId:"",category:"",beneficiaryId:"",beneficiarySeqNo:"",fcAmount:null,exRate:1,commission:"",valueDate:new Date,defaultValueDate:new Date,vatAmount:null,tdAmount:0,defaultCommission:12,amount:0,taxPercent:eW,poeId:"",nationalityId:null,receiptId:null,wfStatus:1,rateTypeId:1,includingFees:!1,dtId:eU||null,batchId:null,reference:"",status:1,releaseStatus:null,date:new Date,isVerified:null,recordId:eB,branchCode:""},products:[{}],ICRequest:[{}],tokenNo:"",vatRate:eW,hiddenTrxAmount:"",hiddenTrxCount:"",agentCode:"AE01BH",terraPayDetails:{quotation:{requestDate:new Date,debitorMSIDSN:"",creditorMSIDSN:"",creditorBankAccount:"",creditorReceivingCountry:"",requestAmount:"",requestCurrency:"",sendingCurrency:"",receivingCurrency:""},transaction:{amount:"",currency:"",type:"inttransfer",descriptionText:"",requestDate:new Date,requestingOrganisationTransactionReference:"",debitorMSIDSN:"",creditorBankAccount:"",creditorSortCode:"0001",creditorBankSubCode:"",creditorAccounttype:"Savings",creditorOrganisationid:"",senderKyc:{nationality:"",dateOfBirth:"",gender:"",idDocument:[],postalAddress:{addressLine1:"",addressLine2:"",addressLine3:"",city:"",stateProvince:"",postalCode:"",country:""},subjectName:{title:"",firstName:"",middleName:"",lastName:"",fullName:""}},recipientKyc:{nationality:"",dateOfBirth:"",idDocument:[],postalAddress:{addressLine1:"",addressLine2:"",addressLine3:"",city:"",stateProvince:"",postalCode:"",country:""},subjectName:{title:"",firstName:"",middleName:"",lastName:"",fullName:""}},internationalTransferInformation:{quoteId:"",receivingCountry:"",remittancePurpose:"",sourceOfFunds:"",relationshipSender:""}}}},{formik:e5}=(0,C.c)({maxAccess:e6,initialValues:e4,validateOnChange:!0,validationSchema:t.Ry({header:t.Ry({date:t.hT().required(),valueDate:t.hT().required(),countryId:t.Rx().required(),dispersalType:t.Rx().required(),currencyId:t.Rx().required(),fcAmount:t.Rx().required(),productId:t.Rx().required(),commission:t.Rx().required(),lcAmount:t.Rx().required(),amount:t.Rx().required(),exRate:t.Rx().required(),clientId:t.Rx().required(),poeId:t.Rx().required(),beneficiaryId:t.Rx().required(),tdAmount:t.Rx().test(function(e){let{commission:a}=this.parent;return e<=a})})}),onSubmit:async(e,a)=>{var n,r,l,d,t,i,o;let s=e.header;if(1===s.interfaceId&&!(null===(l=e.ICRequest)||void 0===l?void 0:null===(r=l.beneficiary)||void 0===r?void 0:null===(n=r.bankDetails)||void 0===n?void 0:n.bankName)&&!(null===(t=e.ICRequest)||void 0===t?void 0:null===(d=t.remitter)||void 0===d?void 0:d.employerStatus)||2===s.interfaceId&&!(null===(i=e.terraPayDetails.transaction.internationalTransferInformation)||void 0===i?void 0:i.relationshipSender))throw ap(),{silent:!0};let u={header:{...s,date:(0,T.ku)(null==s?void 0:s.date),valueDate:(0,T.ku)(null==s?void 0:s.valueDate),defaultValueDate:(0,T.ku)(null==s?void 0:s.defaultValueDate)},bankType:s.interfaceId,ICRequest:s.interfaceId&&(null===(o=e.ICRequest)||void 0===o?void 0:o.deliveryModeId)?e.ICRequest:null,TPRequest:2===s.interfaceId?e.terraPayDetails:{}},c=await e$({extension:v.N.OutwardsOrder.set2,record:JSON.stringify(u)});_.ZP.success(eB?eH.Edited:eH.Added),await ab(c.recordId),e8()}}),e7=e5.values.header,e9=!!e7.recordId,ae=2===e7.wip,aa=3===e7.status,an=async()=>{var e;let a=await eQ({extension:b.r.UserDefaults.get,parameters:"_userId=".concat(null==eY?void 0:eY.userId,"&_key=cashAccountId")});return null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.value};async function ar(e){return await eQ({extension:v.N.OutwardsOrder.get2,parameters:"_recordId=".concat(e)})}async function al(e){return await eQ({extension:v.N.OutwardsRequest.get,parameters:"_recordId=".concat(e,"&_functionId=").concat(L.J.OutwardsOrder)})}let ad=async()=>{var e,a;let n=await e$({extension:v.N.OutwardsOrder.close,record:JSON.stringify({recordId:e7.recordId})});_.ZP.success(eH.Closed);let r=await ab(null==n?void 0:n.recordId);(null==r?void 0:null===(a=r.record)||void 0===a?void 0:null===(e=a.headerView)||void 0===e?void 0:e.status)===4&&ax(),e8()},at=async()=>{let e={...e5.values,header:{...e7,date:(0,T.ku)(e7.date),valueDate:(0,T.ku)(e7.valueDate),defaultValueDate:(0,T.ku)(e7.defaultValueDate),expiryDate:(0,T.ku)(e7.expiryDate)}},a=await e$({extension:v.N.OutwardsOrder.reopen,record:JSON.stringify(e)});a.recordId&&(_.ZP.success(eH.Reopened),e8(),ab(a.recordId))},ai=(null==e7?void 0:e7.commission)*eW/100||0,ao=parseFloat(parseFloat(e7.lcAmount)+(e7.commission+ai-e7.tdAmount)),as=e=>{var a;e5.setFieldValue("products",null==e?void 0:e.list),au(null==e?void 0:null===(a=e.list)||void 0===a?void 0:a.find(e=>e.checked),null,{...e5.values,products:null==e?void 0:e.list})};function au(e,a,n){let{interfaceId:r,productId:l,fees:d,dispersalId:t,exRate:i,rateCalcMethod:o,agentCode:s,corId:u,corRef:c,corName:v,rateTypeId:m,baseAmount:y,originAmount:h,valueDays:p}=e||{},f=n||e5.values,x=null==f?void 0:f.header,I={...f,header:{...x,interfaceId:r,productId:l,commission:d,defaultCommission:d,dispersalId:t,exRate:parseFloat(i).toFixed(5),rateCalcMethod:o,corId:u,corRef:c,corName:v,rateTypeId:m,lcAmount:a?"":x.lcAmount||y,fcAmount:a?"":x.fcAmount||h},...s&&{agentCode:s}};return e5.setValues(I),function(e){let a=new Date(e5.values.date);a.setDate(a.getDate()+e),e5.setFieldValue("valueDate",a)}(p),I}let ac=async(e,a)=>{let{headerView:n}=e,r=e5.values&&{...e5.values,products:e5.values.products,recordId:n.recordId,header:{...n,valueDate:(0,T.a1)(n.valueDate),defaultValueDate:(0,T.a1)(n.defaultValueDate),date:(0,T.a1)(n.date),exRate:parseFloat(n.exRate).toFixed(5)},ICRequest:1==n.interfaceId&&(null==a?void 0:a.requestLog)?JSON.parse(null==a?void 0:a.requestLog):e5.values.ICRequest,terraPayDetails:2==n.interfaceId&&(null==a?void 0:a.requestLog)?JSON.parse(null==a?void 0:a.requestLog):e5.values.terraPayDetails};return e5.setValues(r),r},av=async e=>(await eQ({extension:B.L.CtClientIndividual.get2,parameters:"_clientId=".concat(e)})).record,am=async(e,a,n)=>{var r,l,d,t;if(1==a){let a=e?await av(e):null;if(e&&!(null==a?void 0:a.clientRemittance)){ez({message:e2.clientHasNoKyc});return}if(!a)return;let{clientIDView:{idExpiryDate:l,idNo:d},clientIndividual:{firstName:t,middleName:i,lastName:o,fl_firstName:s,fl_lastName:u,fl_middleName:c,professionId:v,sponsorName:m},clientRemittance:{trxCountPerYear:y,trxAmountPerYear:h},clientMaster:{cellPhone:p,nationalityId:f}}=a||{};e5.setValues({...n,idNo:d,expiryDate:(0,T.a1)(l),firstName:t,middleName:i,lastName:o,fl_firstName:s,fl_middleName:c,fl_lastName:u,professionId:v,hiddenTrxCount:y,hiddenTrxAmount:h,ICRequest:{...n.ICRequest,remitter:{...null===(r=n.ICRequest)||void 0===r?void 0:r.remitter,employerName:m}},header:{...n.header,cellPhone:p,nationalityId:f}})}else if(2==a){let a=await eQ({extension:P.u.ClientCorporate.get,parameters:"_clientId=".concat(e)});if(!a)return;e5.setFieldValue("expiryDate",(0,T.a1)(null==a?void 0:null===(l=a.clientMaster)||void 0===l?void 0:l.expiryDate)),e5.setFieldValue("header.cellPhone",null==a?void 0:null===(d=a.clientMaster)||void 0===d?void 0:d.cellPhone),e5.setFieldValue("header.nationalityId",null==a?void 0:null===(t=a.clientMaster)||void 0===t?void 0:t.nationalityId)}},ay=[{key:"Close",condition:!ae,onClick:ad,disabled:ae||!e9},{key:"Reopen",condition:ae,onClick:at,disabled:!ae},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!ae},{key:"BeneficiaryList",condition:!0,onClick:function(){eX({Component:$,props:{form:e7,onSubmit:ah,labels:e2,maxAccess:e6},width:1300,height:500,title:e2.beneficiaryList})},disabled:e9||!((null==e7?void 0:e7.countryId)&&(null==e7?void 0:e7.dispersalType)&&(null==e7?void 0:e7.clientId))},{key:"Beneficiary",condition:!0,onClick:function(){var e;let{dispersalType:a,clientId:n,clientRef:r,clientName:l,corId:d,countryId:t,currencyId:i,beneficiaryId:o,beneficiarySeqNo:s}=null===(e=e5.values)||void 0===e?void 0:e.header;a&&eX({Component:1===a?h.Z:y.Z,props:{client:{clientId:n,clientRef:r,clientName:l},corId:d,dispersalType:a,countryId:t,currencyId:i,beneficiary:{beneficiaryId:o,beneficiarySeqNo:s},recordId:n&&o&&s?(100*n).toString()+(10*o).toString()+s:null,forceDisable:!!e5.values.recordId&&!!o,onSuccess:(e,a)=>(function(e,a){let[,n,r]=e.split(",");aR({...a,seqNo:r,beneficiaryId:n})})(e,a)},title:1===a?e2.cash:e2.bank})},disabled:!((null==e7?void 0:e7.dispersalType)&&(null==e7?void 0:e7.clientId))},{key:"GL",condition:!0,onClick:"onClickGL",valuesPath:e7,datasetId:u.i.GLOutwardsOrder,disabled:!e9},{key:"Receipt Voucher",condition:!0,onClick:ax,disabled:4!=e5.values.header.status}];function ah(e){e5.setFieldValue("header.branchCode",null==e?void 0:e.branchCode),e5.setFieldValue("header.beneficiaryName",null==e?void 0:e.beneficiaryName),e5.setFieldValue("header.beneficiarySeqNo",null==e?void 0:e.beneficiarySeqNo),e5.setFieldValue("header.beneficiaryId",null==e?void 0:e.beneficiaryId)}function ap(){let{recordId:e,header:{interfaceId:a,countryId:n},ICRequest:r,products:l,terraPayDetails:d,hiddenTrxAmount:t,hiddenTrxCount:i}=e5.values;if(1===a){let a=null==r?void 0:r.remitter,d=null==r?void 0:r.beneficiary,o=null==l?void 0:l.find(e=>null==e?void 0:e.checked);eX({Component:j,props:{onSubmit:ag,cashData:r,outwardsData:{recordId:e,countryId:n,amount:ao},sysDefault:e0,productData:{deliveryModeId:(null==o?void 0:o.deliveryModeId)||(null==o?void 0:o.agentDeliveryMode),payingAgent:null==o?void 0:o.agentCode,payingCurrency:(null==o?void 0:o.payingCurrency)||(null==o?void 0:o.agentPayingCurrency)},clientData:{hiddenTrxAmount:t,hiddenTrxCount:i,bankDetails:null==d?void 0:d.bankDetails,postCode:null==d?void 0:d.address.postCode,relation:null==a?void 0:a.relation,otherRelation:null==a?void 0:a.otherRelation,employerName:null==a?void 0:a.employerName,employerStatus:null==a?void 0:a.employerStatus}},title:e2.instantCash})}else 2===a&&eX({Component:k,props:{onSubmit:af,terraPay:d,data:e7},width:700,height:500,title:e2.terraPay})}async function af(e){let a=null==e?void 0:e.quotation,n={quotation:{...a,debitorMSIDSN:null==e7?void 0:e7.cellPhone,sendingCurrency:null==e0?void 0:e0.currencyRef,receivingCurrency:null==a?void 0:a.requestCurrency},transaction:{...e.transaction,amount:null==a?void 0:a.requestAmount,currency:null==a?void 0:a.requestCurrency,type:"inttransfer",descriptionText:"",requestingOrganisationTransactionReference:"t11",debitorMSIDSN:null==e7?void 0:e7.cellPhone,creditorBankAccount:a.creditorBankAccount,creditorAccounttype:"checking",internationalTransferInformation:{...e.transaction.internationalTransferInformation,quoteId:"",receivingCountry:null==e7?void 0:e7.countryRef,sourceOfFunds:"Salary",relationshipSender:e.transaction.internationalTransferInformation.relationshipSender}}};e5.setFieldValue("terraPayDetails",n)}async function ax(){eG.close();let e=await an();eX({Component:z.Z,props:{recordId:null==e7?void 0:e7.receiptId,cashAccountId:e,form:(null==e7?void 0:e7.receiptId)?null:e7}})}async function aI(){var e,a;let n=null==eK?void 0:null===(a=eK.list)||void 0===a?void 0:null===(e=a.find(e=>{let{key:a}=e;return"countryId"===a}))||void 0===e?void 0:e.value;return(await eQ({extension:b.r.Country.get,parameters:"_recordId=".concat(n)})).record.reference}async function aC(){var e,a;let n=null==eK?void 0:null===(a=eK.list)||void 0===a?void 0:null===(e=a.find(e=>{let{key:a}=e;return"baseCurrencyId"===a}))||void 0===e?void 0:e.value;return(await eQ({extension:b.r.Currency.get,parameters:"_recordId=".concat(n)})).record.reference}function ag(e){e5.setFieldValue("ICRequest",e),e5.setFieldValue("header.amount",e.sourceAmount)}async function ab(e){let[a,n]=await Promise.all([ar(e),al(e)]),r=await ac(a.record,n.record);return await am(a.record.headerView.clientId,a.record.headerView.category,r),a}async function aA(e){try{if(!(null==e?void 0:e.fcAmount)&&!(null==e?void 0:e.lcAmount))return;if(eE&&(null==e?void 0:e.countryId)&&(null==e?void 0:e.currencyId)&&(null==e?void 0:e.dispersalType)){e5.setFieldValue("products",[]);var a,n,r="_plantId=".concat(e9?e.plantId:eE,"&_countryId=").concat(e.countryId,"&_dispersalType=").concat(e.dispersalType,"&_currencyId=").concat(null==e?void 0:e.currencyId,"&_fcAmount=").concat(null==e?void 0:e.fcAmount,"&_lcAmount=").concat((null==e?void 0:e.recordId)?0:null==e?void 0:e.lcAmount,"&_includingFees=").concat((null==e?void 0:e.includingFees)?1:0);let l=await eQ({extension:v.N.ProductDispersalEngine.qry,parameters:r});(null==l?void 0:null===(a=l.list)||void 0===a?void 0:a.length)>0?(await aN(l.list,null===(n=e.header)||void 0===n?void 0:n.productId,{...e5.values,products:l.list}),e5.setFieldValue("products",l.list)):e9||au(null,null,{...e5.values,products:[]})}}catch(e){e9||au(null,null,{...e5.values,products:[]})}}async function aN(e,a){if(1===e.length)e9||au(e[0]),e5.setFieldValue("products[0].checked",!0);else if(e9||au(),a){let n=e.findIndex(e=>e.productId===a);n&&e5.setFieldValue("products[".concat(n,"].checked"),!0)}}(0,l.useEffect)(()=>{!async function(){if(e1({countryRef:await aI(),currencyRef:await aC()}),eB){let e={...(await ab(eB)).record};e.lcAmount=0,await aA(e.headerView)}}()},[]),(0,l.useEffect)(()=>{e5.setFieldValue("header.vatAmount",ai),e5.setFieldValue("header.amount",ao)},[ao]);let aR=e=>{e5.setFieldValue("header.beneficiaryName",(null==e?void 0:e.name)||""),e5.setFieldValue("header.beneficiarySeqNo",null==e?void 0:e.seqNo),e5.setFieldValue("header.branchCode",null==e?void 0:e.branchCode),2===e7.interfaceId&&(e5.setFieldValue("terraPayDetails.quotation.creditorMSIDSN",(null==e?void 0:e.cellPhone)||""),e5.setFieldValue("terraPayDetails.quotation.creditorBankAccount",(null==e?void 0:e.IBAN)||"")),e5.setFieldValue("header.beneficiaryId",(null==e?void 0:e.beneficiaryId)||null)};return(0,r.jsx)(s.Z,{resourceId:u.i.OutwardsOrder,form:e5,editMode:e9,maxAccess:e6,actions:ay,previewReport:e9,functionId:L.J.OutwardsOrder,disabledSubmit:e9,children:(0,r.jsx)(R.R,{children:(0,r.jsx)(N.Q,{children:(0,r.jsxs)(d.ZP,{container:!0,xs:12,spacing:2,children:[(0,r.jsx)(E.Z,{item:!0,hideonempty:!0,xs:2,children:(0,r.jsx)(o.Z,{name:"header.reference",label:e2.Reference,value:null==e5?void 0:null===(f=e5.values)||void 0===f?void 0:f.header.reference,maxAccess:!e9&&e6,maxLength:"30",readOnly:e9,onChange:e5.handleChange,error:(null===(Z=e5.touched.header)||void 0===Z?void 0:Z.reference)&&!!(null===(w=e5.errors.header)||void 0===w?void 0:w.reference)})}),(0,r.jsx)(E.Z,{item:!0,hideonempty:!0,xs:2,children:(0,r.jsx)(O.Z,{name:"header.date",required:!0,label:e2.date,value:null==e5?void 0:null===(G=e5.values)||void 0===G?void 0:null===(F=G.header)||void 0===F?void 0:F.date,onChange:e5.setFieldValue,editMode:e9,readOnly:ae||aa||e9,maxAccess:e6,onClear:()=>e5.setFieldValue("header.date",null),error:(null===(Q=e5.touched.header)||void 0===Q?void 0:Q.date)&&!!(null===(W=e5.errors.header)||void 0===W?void 0:W.date)})}),(0,r.jsx)(E.Z,{item:!0,hideonempty:!0,xs:2,children:(0,r.jsx)(c.Z,{datasetId:M.v.DOCUMENT_STATUS,name:"header.status",label:e2.docStatus,readOnly:!0,valueField:"key",displayField:"value",values:e7})}),(0,r.jsx)(E.Z,{item:!0,hideonempty:!0,xs:2,children:(0,r.jsx)(O.Z,{name:"header.valueDate",label:e2.valueDate,value:null==e5?void 0:null===(ee=e5.values)||void 0===ee?void 0:ee.header.valueDate,onChange:e5.setFieldValue,readOnly:ae||aa||e9,required:!0,maxAccess:e6,onClear:()=>e5.setFieldValue("header.valueDate",null),error:(null===(ea=e5.touched.header)||void 0===ea?void 0:ea.valueDate)&&!!(null===(en=e5.errors.header)||void 0===en?void 0:en.valueDate)})}),(0,r.jsx)(E.Z,{item:!0,hideonempty:!0,xs:2,children:(0,r.jsx)(c.Z,{datasetId:M.v.WF_STATUS,name:"wfStatus",label:e2.wfStatus,readOnly:!0,valueField:"key",displayField:"value",values:e7})}),(0,r.jsx)(d.ZP,{item:!0,xs:2}),(0,r.jsx)(d.ZP,{item:!0,xs:4.5,children:(0,r.jsx)(x.Z,{title:"Transaction Details",children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(c.Z,{endpointId:v.N.Country.qry,name:"header.countryId",label:e2.Country,required:!0,readOnly:ae||aa||e9,displayField:["countryRef","countryName"],columnsInDropDown:[{key:"countryRef",value:"Reference"},{key:"countryName",value:"Name"}],valueField:"countryId",values:e7,onChange:(e,a)=>{au(null,!0,{...e5.values,header:{...e7,countryId:(null==a?void 0:a.countryId)||null,countryRef:(null==a?void 0:a.countryRef)||"",fcAmount:"",lcAmount:"",products:[],dispersalType:a?e7.dispersalType:"",currencyId:a?e7.currencyId:null}}),e5.setFieldValue("header.countryId",(null==a?void 0:a.countryId)||null)},error:(null===(er=e5.touched.header)||void 0===er?void 0:er.countryId)&&!!(null===(el=e5.errors.header)||void 0===el?void 0:el.countryId)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(c.Z,{endpointId:e7.countryId&&v.N.DispersalType.qry,parameters:e7.countryId&&"_countryId=".concat(e7.countryId),label:e2.DispersalType,required:!0,readOnly:ae||aa||!e7.countryId||e9,name:"header.dispersalType",displayField:"dispersalTypeName",valueField:"dispersalType",values:e7,onChange:(e,a)=>{e5.setValues({...e5.values,header:{...e7,dispersalType:(null==a?void 0:a.dispersalType)||"",dispersalTypeName:(null==a?void 0:a.dispersalTypeName)||"",beneficiaryId:"",beneficiaryName:"",currencyId:a?e7.currencyId:"",lcAmount:"",fcAmount:"",corRef:"",corName:"",exRate:1,exRate2:1,commission:0}})},error:(null===(ed=e5.touched.header)||void 0===ed?void 0:ed.dispersalType)&&!!(null===(et=e5.errors.header)||void 0===et?void 0:et.dispersalType)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(c.Z,{endpointId:e9?b.r.Currency.qry:e7.countryId&&e7.dispersalType&&v.N.Currency.qry,parameters:e9?void 0:"_dispersalType=".concat(null==e7?void 0:e7.dispersalType,"&_countryId=").concat(null==e7?void 0:e7.countryId),label:e2.Currency,required:!0,name:"header.currencyId",displayField:e9?["reference","name"]:["currencyRef","currencyName"],columnsInDropDown:e9?[{key:"reference",value:"Reference"},{key:"name",value:"Name"}]:[{key:"currencyRef",value:"Reference"},{key:"currencyName",value:"Name"}],valueField:e9?"recordId":"currencyId",values:e7,readOnly:!e7.dispersalType||ae||aa||e9,onChange:(e,a)=>{e5.setValues({...e5.values,header:{...e7,currencyId:null==a?void 0:a.currencyId,currencyRef:null==a?void 0:a.currencyRef,lcAmount:"",fcAmount:"",corRef:"",corName:"",exRate:1,exRate2:1,commission:0}})},error:(null===(ei=e5.touched.header)||void 0===ei?void 0:ei.currencyId)&&!!(null===(eo=e5.errors.header)||void 0===eo?void 0:eo.currencyId)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(H.Z,{readOnly:e7.lcAmount||e7.fcAmount||e9,label:e2.includeTransferFees,name:"header.includingFees",checked:e7.includingFees,onChange:e=>{e5.setFieldValue("header.includingFees",e.target.checked),e5.setFieldValue("header.lcAmount",""),e5.setFieldValue("header.fcAmount","")}})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"header.fcAmount",label:e2.fcAmount,value:e7.fcAmount,required:!0,allowClear:!e9,readOnly:e7.lcAmount||e9,maxAccess:e6,onChange:e=>e5.setFieldValue("header.fcAmount",e.target.value),onBlur:e=>{e7.lcAmount||aA({countryId:e7.countryId,currencyId:e7.currencyId,dispersalType:e7.dispersalType,lcAmount:e7.lcAmount||0,fcAmount:e7.fcAmount||0,includingFees:e7.includingFees,plantId:e7.plantId})},onClear:()=>{e7.lcAmount||au(null,!0,{...e5.values,products:[]}),e5.setFieldValue("header.fcAmount","")},error:(null===(es=e5.touched.header)||void 0===es?void 0:es.fcAmount)&&!!(null===(eu=e5.errors.header)||void 0===eu?void 0:eu.fcAmount),maxLength:10})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"header.lcAmount",label:e2.lcAmount,value:e7.lcAmount,required:!0,allowClear:!e9,readOnly:e7.fcAmount||e9,maxAccess:e6,onChange:e=>e5.setFieldValue("header.lcAmount",e.target.value),onBlur:async e=>{e7.fcAmount||await aA({countryId:e7.countryId,currencyId:e7.currencyId,dispersalType:e7.dispersalType,lcAmount:e7.lcAmount||0,fcAmount:e7.fcAmount||0,includingFees:e7.includingFees,plantId:e7.plantId})},onClear:()=>{e7.fcAmount||au(null,!0,{...e5.values,products:[]}),e5.setFieldValue("header.lcAmount","")},error:(null===(ec=e5.touched.header)||void 0===ec?void 0:ec.lcAmount)&&!!(null===(ev=e5.errors.header)||void 0===ev?void 0:ev.lcAmount),maxLength:10})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(S.Z,{label:e2.products,color:"#000000",disabled:!(eE&&e7.countryId&&e7.currencyId&&e7.dispersalType&&(e7.fcAmount||e7.lcAmount)),onClick:()=>setTimeout(()=>{!function(){let{recordId:e,products:a,header:{countryRef:n,currencyRef:r,agentCode:l,fcAmount:d,lcAmount:t,productId:i}}=e5.values;eX({Component:D,props:{maxAccess:e6,labels:e2,data:{recordId:e,products:a,countryRef:n,targetCurrency:r,defaultAgentCode:l,fcAmount:d,lcAmount:t,productId:i,sysDefault:e0},onProductSubmit:as},width:1200,height:500,title:e2.products})}()},10)})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(o.Z,{name:"header.corRef",label:e2.corRef,value:null===(em=e5.values)||void 0===em?void 0:em.header.corRef,readOnly:!0,required:e7.corId,maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(o.Z,{name:"header.corName",label:e2.corName,value:null===(eh=e5.values)||void 0===eh?void 0:null===(ey=eh.header)||void 0===ey?void 0:ey.corName,readOnly:!0,required:e7.corId,maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(g.Z,{name:"header.exRate",label:e2.exRateMultiply,value:e7.exRate,required:!0,readOnly:!0,decimalScale:5,maxAccess:e6,maxLength:10,error:(null===(ep=e5.touched.header)||void 0===ep?void 0:ep.exRate)&&!!(null===(ef=e5.errors.header)||void 0===ef?void 0:ef.exRate)})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(g.Z,{name:"header.exRate2",decimalScale:5,label:e2.exRateDivide,value:(null==e5?void 0:null===(eI=e5.values)||void 0===eI?void 0:null===(ex=eI.header)||void 0===ex?void 0:ex.exRate)&&(null==e5?void 0:null===(eC=e5.values)||void 0===eC?void 0:eC.header.exRate)!=0?1/(null==e5?void 0:null===(eg=e5.values)||void 0===eg?void 0:eg.header.exRate):"0.00000",readOnly:!0,maxAccess:e6,maxLength:10})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"header.commission",label:e2.commission,value:e7.commission,required:!0,readOnly:!0,maxAccess:e6,maxLength:10,error:(null===(eb=e5.touched.header)||void 0===eb?void 0:eb.commission)&&!!(null===(eN=e5.errors)||void 0===eN?void 0:null===(eA=eN.header)||void 0===eA?void 0:eA.commission)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"header.vatAmount",label:e2.vatRate,value:ai,readOnly:!0,maxAccess:e6,maxLength:10})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"header.tdAmount",label:e2.discount,value:e7.tdAmount,maxAccess:e6,onChange:e=>{e5.setFieldValue("header.tdAmount",e.target.value||0)},required:!0,readOnly:e9,onClear:()=>e5.setFieldValue("header.tdAmount",0),error:(null===(eR=e5.touched.header)||void 0===eR?void 0:eR.tdAmount)&&!!(null===(ej=e5.errors)||void 0===ej?void 0:null===(eZ=ej.header)||void 0===eZ?void 0:eZ.tdAmount),maxLength:10})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{name:"header.amount",label:e2.NetToPay,value:e7.amount,required:!0,readOnly:!0,maxAccess:e6,maxLength:10,error:(null===(ek=e5.touched.header)||void 0===ek?void 0:ek.amount)&&!!(null===(eP=e5.errors)||void 0===eP?void 0:null===(eq=eP.header)||void 0===eq?void 0:eq.amount)})})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:7.5,children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(x.Z,{title:"Client Details",children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(I.U,{endpointId:P.u.ClientCorporate.snapshot,parameters:{_category:0},valueField:"reference",displayField:"name",name:"header.clientId",label:e2.Client,form:e5,formObject:e7,required:!0,readOnly:ae||aa||e9,displayFieldWidth:2,valueShow:"clientRef",secondValueShow:"clientName",maxAccess:e6,editMode:e9,onChange:async(e,a)=>{var n;if((null==a?void 0:a.status)==-1){ez({message:e2.ClientMustBeActive});return}let r=new Date;if(new Date(parseInt(null==a?void 0:null===(n=a.expiryDate)||void 0===n?void 0:n.replace(/\/Date\((\d+)\)\//,"$1")))<r){ez({message:e2.expiredClient});return}let l={...e5.values,header:{...e7,clientId:(null==a?void 0:a.recordId)||null,clientName:(null==a?void 0:a.name)||"",clientRef:(null==a?void 0:a.reference)||"",category:(null==a?void 0:a.category)||1,beneficiaryId:null,beneficiaryName:"",beneficiarySeqNo:null,branchCode:""}};e5.setValues(l),await am(null==a?void 0:a.recordId,(null==a?void 0:a.category)||1,l)},errorCheck:"header.clientId"})}),(0,r.jsx)(d.ZP,{item:!0,xs:4,children:(0,r.jsx)(o.Z,{name:"firstName",label:e2.firstName,value:null===(ew=e5.values)||void 0===ew?void 0:ew.firstName,readOnly:!0,maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:4,children:(0,r.jsx)(o.Z,{name:"middleName",label:e2.middleName,value:null===(eF=e5.values)||void 0===eF?void 0:eF.middleName,readOnly:!0,maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:4,children:(0,r.jsx)(o.Z,{name:"lastName",label:e2.lastName,value:null===(eS=e5.values)||void 0===eS?void 0:eS.lastName,readOnly:!0,maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,sx:{flexDirection:"row-reverse"},children:[(0,r.jsx)(d.ZP,{item:!0,xs:4,children:(0,r.jsx)(o.Z,{name:"fl_firstName",label:e2.flFirstName,value:null===(eD=e5.values)||void 0===eD?void 0:eD.fl_firstName,readOnly:!0,dir:"rtl",maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:4,children:(0,r.jsx)(o.Z,{name:"fl_middleName",label:e2.flMiddleName,value:null===(eV=e5.values)||void 0===eV?void 0:eV.fl_middleName,readOnly:!0,dir:"rtl",maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:4,children:(0,r.jsx)(o.Z,{name:"fl_lastName",label:e2.flLastName,value:null===(eO=e5.values)||void 0===eO?void 0:eO.fl_lastName,readOnly:!0,dir:"rtl",maxAccess:e6})})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:3,children:(0,r.jsx)(c.Z,{endpointId:b.r.Country.qry,label:e2.Nationality,name:"header.nationalityId",displayField:["reference","name"],valueField:"recordId",values:e7,readOnly:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:3,children:(0,r.jsx)(o.Z,{name:"idNo",label:e2.IdNo,value:e5.values.idNo,readOnly:!0,maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:3,children:(0,r.jsx)(O.Z,{name:"expiryDate",label:e2.expiryDate,value:null===(eT=e5.values)||void 0===eT?void 0:eT.expiryDate,readOnly:!0,maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:3,children:(0,r.jsx)(o.Z,{name:"header.cellPhone",phone:!0,label:e2.cellPhone,value:null===(e_=e5.values)||void 0===e_?void 0:e_.header.cellPhone,readOnly:!0,maxLength:"15",autoComplete:"off",maxAccess:e6})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(c.Z,{endpointId:q.d.Profession.qry,label:e2.profession,name:"professionId",displayField:["reference","name"],valueField:"recordId",values:e5.values,readOnly:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(c.Z,{endpointId:V.u.PurposeExchange.qry,name:"header.poeId",label:e2.purposeOfExchange,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:e7,onChange:(e,a)=>{var n,r,l;e5.setValues({...e5.values,header:{...e7,poeId:(null==a?void 0:a.recordId)||null},terraPayDetails:{...e5.values.terraPayDetails,transaction:{...null===(n=e5.values.terraPayDetails)||void 0===n?void 0:n.transaction,internationalTransferInformation:{...null===(l=e5.values.terraPayDetails)||void 0===l?void 0:null===(r=l.transaction)||void 0===r?void 0:r.internationalTransferInformation,remittancePurpose:(null==a?void 0:a.name)||""}}}})},required:!0,readOnly:e9,error:(null===(eL=e5.touched.header)||void 0===eL?void 0:eL.poeId)&&!!(null===(eM=e5.errors.header)||void 0===eM?void 0:eM.poeId)})})]})})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:5,children:(0,r.jsx)(I.U,{endpointId:v.N.Beneficiary.snapshot2,parameters:{_clientId:e7.clientId,_dispersalType:e7.dispersalType,_currencyId:e7.currencyId},valueField:"name",displayField:"name",name:"header.beneficiaryName",label:e2.Beneficiary,form:e5,formObject:e7,columnsInDropDown:[{key:"name",value:"Name"},{key:"shortName",value:"ShortName"}],required:!0,readOnly:!e7.clientId||!e7.dispersalType||ae||aa||e9,maxAccess:e6,editMode:e9,secondDisplayField:!1,onChange:async(e,a)=>{aR(a)},errorCheck:"header.beneficiaryId"})}),(0,r.jsx)(d.ZP,{item:!0,xs:3,children:(0,r.jsx)(S.Z,{onClick:()=>ap(),label:e2.bankApi,color:"#000000",disabled:!(null==e7?void 0:e7.beneficiaryId)||!(null==e7?void 0:e7.interfaceId)||!e7.productId})})]})})]})})})})};W.width=1100,W.height=600;var ee=W},38143:function(e,a,n){"use strict";var r=n(52322),l=n(60218),d=n(2784),t=n(48601),i=n(82737),o=n(62202),s=n(65950),u=n(71987),c=n(26612),v=n(88469),m=n(38449),y=n(27423),h=n(80983),p=n(91406),f=n(5088),x=n(89330),I=n(7121),C=n(31389),g=n(98345),b=n(1685),A=n(39812),N=n(19473),R=n(33625),Z=n(61802),j=n(78618),k=n(84141),q=n(77980),P=n(55648),w=n(42545),F=n(62362),S=n(50023),D=n(21326);let V=e=>{var a,n,V,O,T,_,L,M,B,E,J,U,G,Q,$,X,z,H,K,Y,W,ee,ea,en,er,el;let{recordId:ed,cashAccountId:et,form:ei=null,window:eo}=e,{getRequest:es,postRequest:eu}=(0,d.useContext)(s.$),{platformLabels:ec}=(0,d.useContext)(N.l),{stack:ev}=(0,Z.zY)(),[em,ey]=(0,d.useState)({}),[eh,ep]=(0,d.useState)(null),{labels:ef,access:ex}=(0,S.Z)({datasetId:c.i.RemittanceReceiptVoucher,editMode:!!ed});(0,D.Z)({title:ef.receiptVoucher,window:eo});let{documentType:eI,maxAccess:eC}=(0,g.H)({functionId:I.J.RemittanceReceiptVoucher,access:ex,enabled:!ed,objectName:"header"}),eg=(0,u.E)({endpointId:v.N.ReceiptVouchers.page}),{formik:eb}=(0,h.c)({maxAccess:eC,documentType:{key:"header.dtId",value:null==eI?void 0:eI.dtId},validateOnChange:!0,initialValues:{recordId:ed,header:{recordId:ed,plantId:null,reference:"",accountId:null,date:new Date,dtId:null,amount:null,owoId:null,owoRef:"",status:1,wip:null,otpVerified:!1,clientId:null,cellPhone:null},cash:em.initialValuePayment||[]},validationSchema:t.Ry({header:t.Ry({owoId:t.Z_().required()}),cash:null==em?void 0:em.paymentValidation}),onSubmit:async e=>{let a=eb.values.cash.map((e,a)=>({...e,id:a+1,seqNo:a+1,posStatus:1,cashAccountId:et})),n={header:eb.values.header,cash:a};if(eb.values.cash.reduce((e,a)=>e+parseFloat(a.amount||0),0).toFixed(2)!==eb.values.header.amount.toFixed(2)){o.ZP.error("The total amount does not match the sum of amounts in the grid.");return}await eu({extension:v.N.ReceiptVouchers.set2,record:JSON.stringify(n)}).then(async a=>{e.header.recordId?o.ZP.success(ec.Edited):(o.ZP.success(ec.Added),ej(await ew(null==a?void 0:a.recordId)))}),ei||eg()}}),eA=!!ed||!!(null==eb?void 0:null===(n=eb.values)||void 0===n?void 0:null===(a=n.header)||void 0===a?void 0:a.recordId),eN=(null==eb?void 0:null===(O=eb.values)||void 0===O?void 0:null===(V=O.header)||void 0===V?void 0:V.status)===3,eR=(null==eb?void 0:null===(_=eb.values)||void 0===_?void 0:null===(T=_.header)||void 0===T?void 0:T.wip)===2,eZ=null==eb?void 0:null===(M=eb.values)||void 0===M?void 0:null===(L=M.header)||void 0===L?void 0:L.otpVerified;function ej(e){var a,n,r;let l=(null==e?void 0:e.recordId)||eb.values.header.recordId;ev({Component:k.Z,props:{values:e||eb.values.header,recordId:l,deviceId:(null===(a=(null==e?void 0:e.cellPhone)||(null==eb?void 0:null===(r=eb.values)||void 0===r?void 0:null===(n=r.header)||void 0===n?void 0:n.cellPhone))||void 0===a?void 0:a.replace(/^\+/,""))||null,functionId:I.J.RemittanceReceiptVoucher,onSuccess:()=>{ek(l)}}})}let ek=e=>{let a=e||eb.values.header.recordId;eu({extension:v.N.ReceiptVouchers.close,record:JSON.stringify({recordId:a})}).then(async e=>{if(null==e?void 0:e.recordId){o.ZP.success(ec.Closed),eg();let a=await ew(null==e?void 0:e.recordId);4===a.status&&eq(a)}})},eq=async e=>{let a,n,l;let d=e||eb.values.header,t=await eu({extension:v.N.ReceiptVouchers.post,record:JSON.stringify(d)});t&&(o.ZP.success(ec.Posted),n=(a=t.recordId.split(","))[0],l=a[1],ev({Component:j.Z,props:{DialogText:"".concat(ec.Posted," ").concat(l),bottomSection:(0,r.jsx)(R.g,{children:(0,r.jsx)(P.Z,{previewReport:!0,onGenerateReport:()=>ev({Component:w.Z,props:{selectedReport:eh,recordId:n,functionId:I.J.OutwardsTransfer,resourceId:c.i.OutwardsTransfer}}),recordId:n,resourceId:c.i.OutwardsTransfer,setSelectedReport:ep})}),title:ec.Post}}),eg(),ew())},eP=async()=>{let e=(0,b.m)("userData").userId,{record:a}=await es({extension:m.r.UserDefaults.get,parameters:"_userId=".concat(e,"&_key=plantId")});a&&eb.setFieldValue("header.plantId",parseInt(a.value))};async function ew(e){let a=e||ed||eb.values.header.recordId;if(a){var n,r;let l=await es({extension:v.N.ReceiptVouchers.get,parameters:"_recordId=".concat(a)}),d=await es({extension:v.N.OutwardsCash.qry,parameters:"_receiptId=".concat(a)});return eb.setValues({recordId:e,header:{...l.record,date:(0,A.a1)(null==l?void 0:null===(n=l.record)||void 0===n?void 0:n.date)},cash:(null==d?void 0:null===(r=d.list)||void 0===r?void 0:r.length)!=0?d.list.map((e,a)=>({id:a+1,pos:(null==e?void 0:e.type)!=3,...e})):eb.initialValues.cash}),l.record}}async function eF(){let e=eb.values;await eu({extension:v.N.ReceiptVouchers.reopen,record:JSON.stringify(eb.values.header)}).then(a=>{a.recordId&&(o.ZP.success(ec.Reopened),eg(),ew(null==e?void 0:e.recordId))})}(0,d.useEffect)(()=>{(async()=>{await eP(),ed?await ew(ed):ei&&eb.setValues(e=>({...e,header:{...e.header,amount:ei.amount,owoId:ei.recordId,owoRef:ei.reference,clientId:ei.clientId,cellPhone:ei.cellPhone,plantId:ei.plantId}}))})()},[ed,ei]);let eS=[{key:"Locked",condition:!0,onClick:e=>eq(e.target.value),disabled:eN||!eA||!eZ||!eR},{key:"Close",condition:!eR,onClick:e=>ek(e.target.value),disabled:eR||!eA},{key:"Reopen",condition:eR,onClick:eF,disabled:!eR||!eA||(null==eb?void 0:null===(E=eb.values)||void 0===E?void 0:null===(B=E.header)||void 0===B?void 0:B.releaseStatus)===3},{key:"OTP",condition:!0,onClick:()=>{ej(null)},disabled:!eA||(null==eb?void 0:null===(U=eb.values)||void 0===U?void 0:null===(J=U.header)||void 0===J?void 0:J.status)==3},{key:"GL",condition:!0,onClick:"onClickGL",datasetId:c.i.GLRemittanceReceiptVoucher,valuesPath:eb.values.header,disabled:!eA}];return(0,r.jsx)(i.Z,{resourceId:c.i.RemittanceReceiptVoucher,functionId:I.J.RemittanceReceiptVoucher,form:eb,actions:eS,maxAccess:eC,editMode:eA,disabledSubmit:eN||eR,previewReport:eA,children:(0,r.jsxs)(C.R,{children:[(0,r.jsx)(R.g,{children:(0,r.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(l.ZP,{item:!0,xs:12,children:(0,r.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(l.ZP,{item:!0,xs:6,children:(0,r.jsx)(f.Z,{name:"header.reference",label:ef.reference,value:null==eb?void 0:null===(Q=eb.values)||void 0===Q?void 0:null===(G=Q.header)||void 0===G?void 0:G.reference,readOnly:eA,maxAccess:!eA&&eC,maxLength:"30",onChange:eb.handleChange,onClear:()=>eb.setFieldValue("header.reference",""),error:(null===($=eb.touched.header)||void 0===$?void 0:$.reference)&&!!(null===(X=eb.errors.header)||void 0===X?void 0:X.reference)})}),(0,r.jsx)(l.ZP,{item:!0,xs:6,children:(0,r.jsx)(x.Z,{name:"header.date",label:ef.date,readOnly:!0,value:null==eb?void 0:null===(H=eb.values)||void 0===H?void 0:null===(z=H.header)||void 0===z?void 0:z.date,maxAccess:eC,error:(null===(K=eb.touched.header)||void 0===K?void 0:K.date)&&!!(null===(Y=eb.errors.header)||void 0===Y?void 0:Y.date)})})]})}),(0,r.jsx)(l.ZP,{item:!0,xs:12,children:(0,r.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(l.ZP,{item:!0,xs:6,children:(0,r.jsx)(y.U,{endpointId:v.N.OutwardsOrder.snapshot,valueField:"reference",name:"header.owoId",label:ef.outwards,form:eb,secondDisplayField:!1,valueShow:"owoRef",formObject:eb.values.header,readOnly:eN,required:!0,maxAccess:eC,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"amount",value:"Amount"}],onChange:(e,a)=>{eb.setFieldValue("header.owoId",a?a.recordId:""),eb.setFieldValue("header.owoRef",a?a.reference:""),eb.setFieldValue("header.amount",a?a.amount:""),eb.setFieldValue("header.clientId",a?a.clientId:"")},errorCheck:"header.owoId"})}),(0,r.jsx)(l.ZP,{item:!0,xs:6,children:(0,r.jsx)(p.Z,{name:"header.amount",label:ef.amount,value:null==eb?void 0:null===(ee=eb.values)||void 0===ee?void 0:null===(W=ee.header)||void 0===W?void 0:W.amount,readOnly:!0,maxAccess:eC,onChange:e=>eb.setFieldValue("header.amount",e.target.value),onClear:()=>{var e,a;eb.setFieldValue("header.amount",""),(null==eb?void 0:null===(a=eb.values)||void 0===a?void 0:null===(e=a.header)||void 0===e?void 0:e.fcAmount)||(handleSelectedProduct(null,!0),eb.setFieldValue("header.products",[]))},error:(null===(ea=eb.touched.header)||void 0===ea?void 0:ea.amount)&&!!(null===(en=eb.errors.header)||void 0===en?void 0:en.amount),maxLength:10})})]})})]})}),(0,r.jsx)(F.Q,{children:(0,r.jsx)(q.Z,{onChange:e=>eb.setFieldValue("cash",e),value:eb.values.cash,error:eb.errors.cash,allowDelete:!eN,allowAddNewLine:!eN,amount:eb.values.header.amount,setFormik:ey,data:{recordId:eb.values.header.recordId,reference:eb.values.header.reference,clientName:eb.values.header.clientName,beneficiaryName:eb.values.header.beneficiaryName,viewPosButtons:(null==eb?void 0:null===(el=eb.values)||void 0===el?void 0:null===(er=el.header)||void 0===er?void 0:er.wip)===2},name:"cash"})})]})})};V.width=1e3,a.Z=V},78618:function(e,a,n){"use strict";var r=n(52322),l=n(23925),d=n(31389),t=n(62362);let i=e=>{let{DialogText:a,bottomSection:n}=e;return(0,r.jsxs)(d.R,{children:[(0,r.jsx)(t.Q,{children:(0,r.jsx)(l.Z,{sx:{p:12},textAlign:"center",children:a})}),n]})};i.width=600,i.height=200,a.Z=i},99770:function(e){e.exports={smallSwitch:"CustomSwitch_smallSwitch__tkyfn"}}}]);