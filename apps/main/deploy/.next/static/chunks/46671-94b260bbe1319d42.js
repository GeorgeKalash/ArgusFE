"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46671],{46671:function(e,n,a){a.d(n,{Z:function(){return q}});var l=a(52322),d=a(60218),r=a(2784),o=a(48601),c=a(82737),t=a(62202),u=a(65950),i=a(71987),s=a(26612),v=a(5088),m=a(80983),y=a(19473),I=a(31389),h=a(62362),p=a(89330),x=a(8661),f=a(7121),k=a(25870),F=a(91406),g=a(27423),V=a(2119),C=a(21581),A=a(98345),Z=a(39812),b=a(39704),P=a(61802),j=a(77595),R=a(1251),w=a(30657),N=a(26553),O=a(16463),_=a(50023),S=a(21326),H=a(69627);function q(e){var n,a,q,M,D,T,E,L,G,J,B;let{recordId:U,window:K}=e,{getRequest:W,postRequest:z}=(0,r.useContext)(u.$),{platformLabels:Q,defaultsData:$,userDefaultsData:Y}=(0,r.useContext)(y.l),{stack:X}=(0,P.zY)(),{labels:ee,access:en}=(0,_.Z)({datasetId:s.i.PaymentVouchers,editMode:!!U}),{documentType:ea,maxAccess:el,changeDT:ed}=(0,A.H)({functionId:f.J.PaymentVoucher,access:en,enabled:!U}),er=(0,i.E)({endpointId:k.H.PaymentVouchers.page3});(0,S.Z)({title:ee.paymentVoucher,window:K});let eo=parseInt(null==Y?void 0:null===(a=Y.list)||void 0===a?void 0:null===(n=a.find(e=>"plantId"===e.key))||void 0===n?void 0:n.value),ec=parseInt(null==$?void 0:null===(M=$.list)||void 0===M?void 0:null===(q=M.find(e=>"currencyId"===e.key))||void 0===q?void 0:q.value),et=parseInt(null==Y?void 0:null===(T=Y.list)||void 0===T?void 0:null===(D=T.find(e=>"cashAccountId"===e.key))||void 0===D?void 0:D.value),{formik:eu}=(0,m.c)({documentType:{key:"dtId",value:null==ea?void 0:ea.dtId},initialValues:{recordId:null,reference:"",accountId:"",accountType:"",currencyId:parseInt(ec),currencyName:"",paymentMethod:null,date:new Date,glId:null,amount:null,checkNo:"",checkbookId:null,decimals:null,notes:"",exRate:1,rateCalcMethod:1,baseAmount:null,cashAccountId:parseInt(et),dtId:null,status:1,releaseStatus:null,plantId:parseInt(eo),contactId:null,isVerified:!1,sourceReference:"",paymentReasonId:null},maxAccess:el,validateOnChange:!0,validationSchema:o.Ry({accountType:o.Z_().required(),currencyId:o.Rx().required(),date:o.Z_().required(),paymentMethod:o.Z_().required(),cashAccountId:o.Z_().required(),checkNo:o.Z_().test("check-no-required-if-payment-method-3","Check number is required when payment method is 3.",function(e){let{paymentMethod:n}=this.parent;return 3!=n||e&&""!==e.trim()}),amount:o.Rx().required()}),onSubmit:async e=>{let n=e.recordId,a={header:{...e,date:(0,Z.ku)(e.date),recordId:n},items:[],costCenters:[]},l=await z({extension:k.H.PaymentVouchers.set2,record:JSON.stringify(a)});n?t.ZP.success(Q.Edited):t.ZP.success(Q.Added);let d=await eh(l.recordId);d.record.date=(0,Z.a1)(d.record.date),eu.setValues(d.record),er()}}),ei=async e=>{if(!e)return null;{let{record:n}=await W({extension:V.G.CbBankAccounts.get,parameters:"_recordId=".concat(e)});return eu.setFieldValue("cashAccountId",null==n?void 0:n.recordId),eu.setFieldValue("cashAccountRef",n.reference),eu.setFieldValue("cashAccountName",n.name),n.paymentMethod}};async function es(e,n,a,l){if(e&&n&&a){var d,r,o,c;let t=await W({extension:R.q.Currency.get,parameters:"_currencyId=".concat(e,"&_date=").concat((0,Z.Uf)(n),"&_rateDivision=").concat(a)}),u=(0,w.fB)({amount:0===l?0:null!=l?l:eu.values.amount,exRate:null===(d=t.record)||void 0===d?void 0:d.exRate,baseAmount:0,rateCalcMethod:null===(r=t.record)||void 0===r?void 0:r.rateCalcMethod,dirtyField:w.ss});eu.setFieldValue("baseAmount",parseFloat(null==u?void 0:u.baseAmount).toFixed(2)||0),eu.setFieldValue("exRate",null===(o=t.record)||void 0===o?void 0:o.exRate),eu.setFieldValue("rateCalcMethod",null===(c=t.record)||void 0===c?void 0:c.rateCalcMethod)}}let ev=3===eu.values.status,em=-1===eu.values.status,ey=!!eu.values.recordId,eI=eu.values.isVerified;async function eh(e){return await W({extension:k.H.PaymentVouchers.get,parameters:"_recordId=".concat(e)})}let ep=async()=>{let e=await z({extension:k.H.PaymentVouchers.post,record:JSON.stringify(eu.values)});if(null==e?void 0:e.recordId){t.ZP.success(Q.Posted),er();let n=await eh(e.recordId);n.record.date=(0,Z.a1)(n.record.date),eu.setValues(n.record)}},ex=async()=>{let e=await z({extension:k.H.PaymentVouchers.unpost,record:JSON.stringify(eu.values)});if(null==e?void 0:e.recordId){t.ZP.success(Q.Unposted),er();let n=await eh(e.recordId);n.record.date=(0,Z.a1)(n.record.date),eu.setValues(n.record)}};async function ef(e){if(e){var n,a,l;let d=await W({extension:k.H.FIDocTypeDefaults.get,parameters:"_dtId=".concat(e)});eu.setFieldValue("plantId",(null==d?void 0:null===(n=d.record)||void 0===n?void 0:n.plantId)||eo);let r=await ei((null==d?void 0:null===(a=d.record)||void 0===a?void 0:a.cashAccountId)||et);eu.setFieldValue("paymentMethod",(null==d?void 0:null===(l=d.record)||void 0===l?void 0:l.paymentMethod)||r)}}(0,r.useEffect)(()=>{var e,n;(null===(e=eu.values)||void 0===e?void 0:e.dtId)&&!U&&ef(null===(n=eu.values)||void 0===n?void 0:n.dtId)},[null===(E=eu.values)||void 0===E?void 0:E.dtId]),(0,r.useEffect)(()=>{!async function(){if(U){let e=await W({extension:k.H.PaymentVouchers.get,parameters:"_recordId=".concat(U)});eu.setValues({...e.record,date:(0,Z.a1)(e.record.date)})}}()},[]);let ek=async()=>{X({Component:b.Z,props:{functionId:f.J.PaymentVoucher,recordId:eu.values.recordId}})},eF=async()=>{await z({extension:k.H.PaymentVouchers.verify,record:JSON.stringify(eu.values)})&&(t.ZP.success(eI?Q.Unverfied:Q.Verified),er(),K.close())},eg=async()=>{let e={header:{...eu.values,date:(0,Z.ku)(eu.values.date),recordId:eu.values.recordId},items:[],costCenters:[]};await z({extension:k.H.ResetGL_PV.reset,record:JSON.stringify(e)})},eV=[{key:"Locked",condition:ev,onClick:"onUnpostConfirmation",onSuccess:ex,disabled:!ey||em||eI},{key:"Unlocked",condition:!ev,onClick:ep,disabled:!ey||em},{key:"Verify",condition:!eI,onClick:eF,disabled:!ev},{key:"Unverify",condition:eI,onClick:eF,disabled:!ev},{key:"Cancel",condition:!0,onClick:async()=>{let e=await z({extension:k.H.PaymentVouchers.cancel,record:JSON.stringify(eu.values)});if(null==e?void 0:e.recordId){t.ZP.success(Q.Cancelled),er();let n=await eh(e.recordId);n.record.date=(0,Z.a1)(n.record.date),eu.setValues(n.record)}},disabled:!ey||ev||em},{key:"FI Trx",condition:!0,onClick:"onClickIT",disabled:!ey},{key:"Aging",condition:!0,onClick:"onClickAging",disabled:!ey},{key:"GL",condition:!0,onClick:"onClickGL",datasetId:s.i.GLPaymentVouchers,onReset:eg,disabled:!ey},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!ey},{key:"WorkFlow",condition:!0,onClick:ek,disabled:!ey},{key:"AccountSummary",condition:!0,onClick:()=>{X({Component:O.Z,props:{accountId:parseInt(eu.values.accountId),moduleId:1}})},disabled:!eu.values.accountId}];return(0,l.jsx)(c.Z,{resourceId:s.i.PaymentVouchers,form:eu,maxAccess:el,editMode:ey,previewReport:ey,actions:eV,functionId:f.J.PaymentVoucher,disabledSubmit:ev||em,children:(0,l.jsx)(I.R,{children:(0,l.jsx)(h.Q,{children:(0,l.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.documentTypes},filter:ey?void 0:e=>1===e.activeStatus,name:"dtId",label:ee.documentType,readOnly:ey,valueField:"recordId",displayField:"name",values:eu.values,onChange:async(e,n)=>{eu.setFieldValue("dtId",(null==n?void 0:n.recordId)||null),ed(n)},error:eu.touched.dtId&&!!eu.errors.dtId,maxAccess:el})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(p.Z,{name:"date",label:ee.date,value:null===(L=eu.values)||void 0===L?void 0:L.date,required:!0,onChange:async(e,n)=>{eu.setFieldValue("date",n),await es(eu.values.currencyId,n,N.B.FINANCIALS)},onClear:()=>eu.setFieldValue("date",null),readOnly:ev||em,error:eu.touched.date&&!!eu.errors.date,maxAccess:el})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(v.Z,{name:"reference",label:ee.reference,value:eu.values.reference,readOnly:ey,maxAccess:!ey&&el,maxLength:"15",onChange:eu.handleChange,onClear:()=>eu.setFieldValue("reference",""),error:eu.touched.reference&&!!eu.errors.reference})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.plants},name:"plantId",label:ee.plant,valueField:"recordId",readOnly:ev||em,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:eu.values,onChange:(e,n)=>{eu.setFieldValue("plantId",(null==n?void 0:n.recordId)||null)},error:eu.touched.plantId&&!!eu.errors.plantId})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.groupTypes},name:"accountType",filter:e=>1==e.key||4==e.key,label:ee.accountType,valueField:"key",displayField:"value",values:eu.values,required:!0,readOnly:ev||em,maxAccess:el,onChange:(e,n)=>{eu.setFieldValue("accountType",(null==n?void 0:n.key)||null),(null==n?void 0:n.key)||(eu.setFieldValue("accountId",null),eu.setFieldValue("accountRef",""),eu.setFieldValue("accountName",""))},error:eu.touched.accountType&&!!eu.errors.accountType})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:(null===(G=eu.values)||void 0===G?void 0:G.accountId)&&k.H.Contact.qry,parameters:(null===(J=eu.values)||void 0===J?void 0:J.accountId)&&"_accountId=".concat(null===(B=eu.values)||void 0===B?void 0:B.accountId),name:"contactId",readOnly:ev||em,label:ee.contact,valueField:"recordId",displayField:"name",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:eu.values,maxAccess:el,onChange:(e,n)=>{eu.setFieldValue("contactId",(null==n?void 0:n.recordId)||null)},error:eu.touched.contactId&&!!eu.errors.contactId})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(g.U,{endpointId:k.H.Account.snapshot,name:"accountId",readOnly:ev||em||!eu.values.accountType,label:ee.accountReference,valueField:"reference",displayField:"name",valueShow:"accountRef",secondValueShow:"accountName",form:eu,columnsInDropDown:[{key:"reference",value:"Account Ref"},{key:"name",value:"Name",grid:4},{key:"keywords",value:"Keywords"}],firstFieldWidth:4,displayFieldWidth:4,filter:{type:eu.values.accountType,isInactive:e=>!0!==e},onChange:(e,n)=>{eu.setFieldValue("accountId",(null==n?void 0:n.recordId)||""),eu.setFieldValue("accountRef",(null==n?void 0:n.reference)||""),eu.setFieldValue("accountName",(null==n?void 0:n.name)||""),eu.setFieldValue("accountGroupName",(null==n?void 0:n.groupName)||"")},error:eu.touched.accountId&&!!eu.errors.accountId,maxAccess:el})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(v.Z,{name:"accountGroupName",label:ee.accountGroup,value:eu.values.accountGroupName,readOnly:!0})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.cashAccounts},name:"cashAccountId",readOnly:em||ev,required:!0,label:ee.cashAccount,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:eu.values,maxAccess:el,onChange:async(e,n)=>{eu.setFieldValue("cashAccountId",(null==n?void 0:n.recordId)||null)},error:eu.touched.cashAccountId&&!!eu.errors.cashAccountId})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsxs)(d.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,l.jsx)(d.ZP,{item:!0,xs:8,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.currencies},name:"currencyId",label:ee.currency,filter:e=>1===e.currencyType,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:ev||em,values:eu.values,onChange:async(e,n)=>{await es(null==n?void 0:n.recordId,eu.values.date,N.B.FINANCIALS),eu.setFieldValue("currencyId",n?null==n?void 0:n.recordId:null),eu.setFieldValue("currencyName",null==n?void 0:n.name)},error:eu.touched.currencyId&&!!eu.errors.currencyId})}),(0,l.jsx)(d.ZP,{item:!0,xs:4,children:(0,l.jsx)(H.Z,{onClick:()=>{var e;return e=eu.values,void X({Component:j.Z,props:{DatasetIdAccess:s.i.MCRFIPaymentVoucher,data:e,onOk:e=>{eu.setValues(n=>({...n,...e}))}}})},image:"popup.png",tooltipText:Q.add,disabled:!eu.values.currencyId||eu.values.currencyId===ec})})]})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.paymentMethods},name:"paymentMethod",label:ee.paymentMethod,valueField:"key",displayField:"value",values:eu.values,required:!0,readOnly:ev||em,maxAccess:el,onChange:(e,n)=>{eu.setFieldValue("paymentMethod",(null==n?void 0:n.key)||null),(null==n?void 0:n.key)||(eu.setFieldValue("checkNo",""),eu.setFieldValue("checkbookId",null))},error:eu.touched.paymentMethod&&!!eu.errors.paymentMethod})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(F.Z,{name:"amount",required:!0,label:ee.amount,maxLength:14,decimalScale:2,readOnly:ev||em,value:eu.values.amount,maxAccess:el,onChange:async e=>{var n,a,l;let d=(0,w.fB)({amount:null!==(l=e.target.value)&&void 0!==l?l:0,exRate:null===(n=eu.values)||void 0===n?void 0:n.exRate,baseAmount:0,rateCalcMethod:null===(a=eu.values)||void 0===a?void 0:a.rateCalcMethod,dirtyField:w.ss});eu.setFieldValue("baseAmount",parseFloat(null==d?void 0:d.baseAmount).toFixed(2)||0),eu.setFieldValue("amount",e.target.value)},onClear:async()=>{eu.setFieldValue("amount",0)},error:eu.touched.amount&&!!eu.errors.amount})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(v.Z,{name:"checkNo",label:ee.checkNo,value:eu.values.checkNo,maxAccess:el,onChange:eu.handleChange,onClear:()=>eu.setFieldValue("checkNo",""),error:eu.touched.checkNo&&!!eu.errors.checkNo,disabled:3!=eu.values.paymentMethod,required:3==eu.values.paymentMethod})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.checkBooks},name:"checkbookId",label:ee.checkbook,valueField:"recordId",displayField:"firstCheckNo",values:eu.values,onChange:(e,n)=>{eu.setFieldValue("checkbookId",(null==n?void 0:n.recordId)||null)},error:eu.touched.checkbookId&&!!eu.errors.checkbookId,disabled:3!=eu.values.paymentMethod})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{neverPopulate:!0,endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.descriptionTemplates},name:"templateId",label:ee.descriptionTemplate,readOnly:ev||em,valueField:"recordId",displayField:"name",values:eu.values,onChange:(e,n)=>{let a=eu.values.notes||"";(null==n?void 0:n.name)&&eu.setFieldValue("notes",""===a?n.name:"".concat(a,"\n").concat(n.name)),eu.setFieldValue("templateId",(null==n?void 0:n.recordId)||null)},error:eu.touched.templateId&&!!eu.errors.templateId,maxAccess:el})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(v.Z,{name:"sourceReference",label:ee.sourceReference,value:eu.values.sourceReference,onChange:eu.handleChange,onClear:()=>eu.setFieldValue("sourceReference",""),maxLength:"20",readOnly:ev||em,maxAccess:el,error:eu.touched.sourceReference&&!!eu.errors.sourceReference})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(C.Z,{name:"notes",type:"text",label:ee.notes,value:eu.values.notes,readOnly:ev||em,rows:3,maxAccess:el,onChange:e=>eu.setFieldValue("notes",e.target.value),onClear:()=>eu.setFieldValue("notes",""),error:eu.touched.notes&&!!eu.errors.notes})}),(0,l.jsx)(d.ZP,{item:!0,xs:6,children:(0,l.jsx)(x.Z,{endpointId:k.H.PaymentVouchers.pack,reducer:e=>{var n;return null==e?void 0:null===(n=e.record)||void 0===n?void 0:n.paymentReasons},name:"paymentReasonId",readOnly:ev||em,label:ee.paymentReasons,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:eu.values,maxAccess:el,onChange:(e,n)=>{eu.setFieldValue("paymentReasonId",(null==n?void 0:n.recordId)||null)},error:eu.touched.paymentReasonId&&!!eu.errors.paymentReasonId})})]})})})})}q.width=1250,q.height=550},93736:function(e,n,a){a.d(n,{K:function(){return d}});let l="RG.FI.asmx/",d={FiOpeningBalance:{gen:l+"genOBA"},FiAging:{qry:l+"FI404"},AccountSummary:{AccFI405b:l+"FI405b"},DocumentAging:{AgingFI406a:l+"FI406a",AgingFI406b:l+"FI406b"},TrialBalance:{FI402View:l+"FI402o",FI401o2:l+"FI401o2"}}},16463:function(e,n,a){a.d(n,{Z:function(){return V}});var l=a(52322),d=a(2784),r=a(49864),o=a(65950),c=a(27423),t=a(26612),u=a(71987),i=a(33625),s=a(62362),v=a(31389),m=a(8661),y=a(25870),I=a(69627),h=a(84100),p=a(19473),x=a(80983),f=a(38449),k=a(69387),F=a(93736),g=a(21326);function V(e){let{accountId:n,moduleId:a,window:V}=e,{getRequest:C}=(0,d.useContext)(o.$),{platformLabels:A}=(0,d.useContext)(p.l),[Z,b]=(0,d.useState)([]);(0,g.Z)({title:A.AccountSummary,window:V});let{labels:P,access:j}=(0,u.J)({datasetId:t.i.AccountSummary}),R=[{field:"days",headerName:P.days,flex:1,type:"number"}],[w,N]=(0,d.useState)(R),{formik:O}=(0,x.c)({maxAccess:j,initialValues:{accountId:null,accountRef:"",accountName:"",agpId:null,moduleId:a}});async function _(){var e,n,l,d;let r;let o=2,c=[...R],t=await C({extension:f.r.Currency.qry,parameters:"_filter="});if(1==a?r=null==t?void 0:null===(e=t.list)||void 0===e?void 0:e.filter(e=>e.sale):2==a&&(r=null==t?void 0:null===(n=t.list)||void 0===n?void 0:n.filter(e=>e.purchase)),0==r.length)return;null==r||r.forEach((e,n)=>{c.push({field:"column".concat(n+1),headerName:e.reference,flex:1,type:"number"})}),N(c);let u=await C({extension:y.H.AgingLeg.qry,parameters:"_agpId=".concat(O.values.agpId)}),i=null==u?void 0:null===(l=u.list)||void 0===l?void 0:l.map(e=>{let n=Array(r.length+2).fill(0);return n[0]=null,n[1]=e.days,n}),s=(r||[]).map(e=>C({extension:F.K.AccountSummary.AccFI405b,parameters:"_agpId=".concat(O.values.agpId,"&_currencyId=").concat(e.recordId,"&_accountId=").concat(O.values.accountId)}).then(e=>({summaryRes:e})));(await Promise.all(s)).forEach(e=>{var n;let{summaryRes:a}=e;null==a||null===(n=a.list)||void 0===n||n.forEach(e=>{null==i||i.forEach(n=>{n[1]==e.seqDays&&(n[o]=e.amount)})}),o++});let v=Array(r.length+2).fill(null);for(let e=2;e<r.length+2;e++){let n=0;null==i||i.map(a=>{n+=Number(a[e]||0)}),v[e]=n}let m=i.filter(e=>null!==e[1]).map(e=>{let[n,a,...l]=e,d={days:a};return l.forEach((e,n)=>{d["column".concat(n+1)]=e.toFixed(2)}),d}),I={};for(let e=0;e<r.length;e++)I["column".concat(e+1)]=null!==(d=v[e+2].toFixed(2))&&void 0!==d?d:0;m.push(I),b({list:m})}return(0,d.useEffect)(()=>{!async function(){if(n&&a){var e,l,d;let a=await C({extension:y.H.Account.get,parameters:"_recordId=".concat(n)});O.setFieldValue("accountId",null==a?void 0:null===(e=a.record)||void 0===e?void 0:e.recordId),O.setFieldValue("accountRef",null==a?void 0:null===(l=a.record)||void 0===l?void 0:l.reference),O.setFieldValue("accountName",null==a?void 0:null===(d=a.record)||void 0===d?void 0:d.name)}}()},[]),(0,l.jsxs)(v.R,{children:[(0,l.jsx)(i.g,{children:(0,l.jsxs)(r.Z,{container:!0,spacing:2,p:2,children:[(0,l.jsx)(r.Z,{item:!0,xs:12,children:(0,l.jsx)(c.U,{endpointId:y.H.Account.snapshot,name:"accountId",label:P.account,valueField:"reference",displayField:"name",valueShow:"accountRef",secondValueShow:"accountName",form:O,readOnly:O.values.accountId&&O.values.moduleId,required:!0,maxAccess:j,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:async(e,n)=>{O.setFieldValue("accountId",(null==n?void 0:n.recordId)||null),O.setFieldValue("accountName",(null==n?void 0:n.name)||""),O.setFieldValue("accountRef",(null==n?void 0:n.reference)||"")}})}),(0,l.jsx)(r.Z,{item:!0,xs:6,children:(0,l.jsx)(m.Z,{endpointId:y.H.AgingProfile.qry,parameters:"_startAt=0&_pageSize=1000&filter=",name:"agpId",label:P.agingProfile,values:O.values,valueField:"recordId",displayField:"name",maxAccess:j,required:!0,onChange:(e,n)=>{O.setFieldValue("agpId",(null==n?void 0:n.recordId)||null),(null==n?void 0:n.recordId)||b({list:[]})}})}),(0,l.jsx)(r.Z,{item:!0,xs:5,children:(0,l.jsx)(m.Z,{datasetId:h.v.FI_AGING_MODULE,label:P.module,name:"moduleId",values:O.values,valueField:"key",displayField:"value",maxAccess:j,required:!0,readOnly:O.values.moduleId,onChange:(e,n)=>{O.setFieldValue("moduleId",(null==n?void 0:n.key)||null)}})}),(0,l.jsx)(r.Z,{item:!0,xs:1,children:(0,l.jsx)(I.Z,{onClick:_,image:"preview.png",disabled:!O.values.agpId||!O.values.moduleId||!O.values.accountId,tooltipText:A.Preview})})]})}),(0,l.jsx)(s.Q,{children:(0,l.jsx)(k.Z,{columns:w,gridData:Z,isLoading:!1,pagination:!1})})]})}V.width=1e3,V.height=500}}]);