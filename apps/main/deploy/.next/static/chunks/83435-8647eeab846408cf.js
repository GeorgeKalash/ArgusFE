"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83435],{48258:function(e,s,a){var l=a(52322),c=a(60218),o=a(2784),r=a(62202),n=a(65950),t=a(26612),d=a(80983),i=a(95982),u=a(31389),v=a(19473),g=a(21326),h=a(19689),x=a(54074);let m=e=>{var s,a,m,F,p,C,I,Z,j,b,y,A,f,N,V,S;let{labels:w,maxAccess:P,data:k,invalidate:L,moduleId:O,resourceId:_,window:E}=e,{postRequest:R}=(0,o.useContext)(n.$),{platformLabels:G}=(0,o.useContext)(v.l);(0,g.Z)({title:G.AccessLevel,window:E});let{formik:z}=(0,d.c)({maxAccess:P,initialValues:{accessFlags:{get:!1,add:!1,edit:!1,del:!1,close:!1,reopen:!1,post:!1,unpost:!1}},validateOnChange:!0,onSubmit:async e=>{let s=k.list.map(s=>({moduleId:O,resourceId:s.resourceId||s.key,accessFlags:e.accessFlags,sgId:s.sgId}));_==t.i.SecurityGroup&&s.forEach(async e=>{await R({extension:i.y.ModuleClass.set,record:JSON.stringify(e)})}),_==t.i.GlobalAuthorization&&s.forEach(async e=>{await R({extension:i.y.AuthorizationResourceGlobal.set,record:JSON.stringify(e)})}),r.ZP.success(G.Edited),L(),E.close()}});return(0,l.jsx)(x.Z,{onSave:z.handleSubmit,maxAccess:P,children:(0,l.jsx)(u.R,{children:(0,l.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.get",value:null===(a=z.values)||void 0===a?void 0:null===(s=a.accessFlags)||void 0===s?void 0:s.get,onChange:e=>z.setFieldValue("accessFlags.get",e.target.checked),label:w.get,maxAccess:P})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.add",value:null===(F=z.values)||void 0===F?void 0:null===(m=F.accessFlags)||void 0===m?void 0:m.add,onChange:e=>z.setFieldValue("accessFlags.add",e.target.checked),label:w.add,maxAccess:P})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.edit",value:null===(C=z.values)||void 0===C?void 0:null===(p=C.accessFlags)||void 0===p?void 0:p.edit,onChange:e=>z.setFieldValue("accessFlags.edit",e.target.checked),label:w.edit,maxAccess:P})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"del",value:null===(Z=z.values)||void 0===Z?void 0:null===(I=Z.accessFlags)||void 0===I?void 0:I.del,onChange:e=>z.setFieldValue("accessFlags.del",e.target.checked),label:w.del,maxAccess:P})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.close",value:null===(b=z.values)||void 0===b?void 0:null===(j=b.accessFlags)||void 0===j?void 0:j.close,onChange:e=>z.setFieldValue("accessFlags.close",e.target.checked),label:w.close,maxAccess:P})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.reopen",value:null===(A=z.values)||void 0===A?void 0:null===(y=A.accessFlags)||void 0===y?void 0:y.reopen,onChange:e=>z.setFieldValue("accessFlags.reopen",e.target.checked),label:w.reopen,maxAccess:P})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.post",value:null===(N=z.values)||void 0===N?void 0:null===(f=N.accessFlags)||void 0===f?void 0:f.post,onChange:e=>z.setFieldValue("accessFlags.post",e.target.checked),label:w.post,maxAccess:P})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.unpost",value:null===(S=z.values)||void 0===S?void 0:null===(V=S.accessFlags)||void 0===V?void 0:V.unpost,onChange:e=>z.setFieldValue("accessFlags.unpost",e.target.checked),label:w.unpost,maxAccess:P})})]})})})};m.width=450,m.height=300,s.Z=m},43337:function(e,s,a){a.d(s,{Z:function(){return Z}});var l=a(52322),c=a(2784),o=a(62202),r=a(26612),n=a(60218),t=a(65950),d=a(38449),i=a(95982),u=a(84100),v=a(5088),g=a(76399),h=a(80983),x=a(31389),m=a(62362),F=a(33625),p=a(80968),C=a(19473),I=a(54074);function Z(e){let{labels:s,maxAccess:a,row:Z,invalidate:j,window:b,resourceId:y}=e,{getRequest:A,postRequest:f}=(0,c.useContext)(t.$),[N,V]=(0,c.useState)(!1),{getAllKvsByDataset:S}=(0,c.useContext)(p.k),{platformLabels:w}=(0,c.useContext)(C.l);async function P(){return new Promise((e,s)=>{S({_dataset:u.v.AU_RESOURCE_CONTROL_ACCESS_LEVEL,callback:a=>{a?e(a):s()}})})}let{formik:k}=(0,h.c)({maxAccess:a,validateOnChange:!0,initialValues:{gridRows:[],search:"",...Z},onSubmit:async e=>{let s=k.values.gridRows.filter(e=>null!=e.accessLevel&&""!==e.accessLevel).map(e=>({resourceId:Z.resourceId,sgId:Z.sgId,...e})),a={resourceId:Z.resourceId,sgId:Z.sgId,controls:s};y==r.i.SecurityGroup&&await f({extension:i.y.SGControlAccess.set2,record:JSON.stringify(a)}),y==r.i.GlobalAuthorization&&await f({extension:i.y.GlobalControlAuthorizationPack.set2,record:JSON.stringify(a)}),o.ZP.success(w.Edited),j(),b.close()}}),L=[{component:"textfield",label:s.controlId,name:"controlId",props:{readOnly:!0}},{component:"textfield",label:s.controlName,name:"name",props:{readOnly:!0}},{component:"resourcecombobox",name:"accessLevelCombo",label:s.accessLevel,props:{datasetId:u.v.AU_RESOURCE_CONTROL_ACCESS_LEVEL,valueField:"key",displayField:"value",mapping:[{from:"key",to:"accessLevel"},{from:"value",to:"accessLevelName"}]}}];(0,c.useEffect)(()=>{!async function(){if(Z.resourceId){let e=[];V(!0),P();let s=await A({extension:d.r.ResourceControl.qry,parameters:"_resourceId=".concat(Z.resourceId)});y==r.i.SecurityGroup&&(e=await A({extension:i.y.SGControlAccess.qry,parameters:"_sgId=".concat(Z.sgId,"&_resourceId=").concat(Z.resourceId)})),y==r.i.GlobalAuthorization&&(e=await A({extension:i.y.GlobalControlAuthorizationView.qry,parameters:"_resourceId=".concat(Z.resourceId)}));let a=[];s.list&&(a=s.list.map(s=>{let a={controlId:s.id,name:s.name,accessLevel:null,accessLevelName:null},l=e.list.find(e=>a.controlId===e.controlId);return l&&(a.accessLevel=l.accessLevel,a.accessLevelName=l.accessLevelName),a})),k.setValues({...k.values,gridRows:a.map((e,s)=>({id:s+1,...e}))})}V(!1)}()},[]);let{gridRows:O,search:_}=k.values,E=_.toLowerCase(),R=_?O.filter(e=>{var s;let{controlId:a,name:l}=e;return(null==a?void 0:null===(s=a.toLowerCase())||void 0===s?void 0:s.toString().includes(E))||(null==l?void 0:l.toLowerCase().includes(E))}):O;return(0,l.jsx)(I.Z,{onSave:k.handleSubmit,editMode:!0,maxAccess:a,children:(0,l.jsxs)(x.R,{children:[(0,l.jsx)(F.g,{children:(0,l.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(v.Z,{name:"resourceId",label:s.resourceId,value:k.values.resourceId,required:!0,onChange:k.handleChange,maxAccess:a,readOnly:!0,onClear:()=>k.setFieldValue("resourceId",""),error:k.touched.resourceId&&!!k.errors.resourceId,helperText:k.touched.resourceId&&k.errors.resourceId})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(v.Z,{name:"resourceName",label:s.resourceName,value:k.values.resourceName,required:!0,readOnly:!0,maxAccess:a,onChange:k.handleChange,onClear:()=>k.setFieldValue("resourceName",""),error:k.touched.resourceName&&!!k.errors.resourceName,helperText:k.touched.resourceName&&k.errors.resourceName})}),(0,l.jsx)(n.ZP,{item:!0,xs:12,children:(0,l.jsx)(v.Z,{name:"search",value:k.values.search,label:w.Search,onClear:()=>{k.setFieldValue("search","")},onChange:e=>{let{value:s}=e.target;k.setFieldValue("search",s)},onSearch:e=>k.setFieldValue("search",e),search:!0,height:35})})]})}),(0,l.jsx)(m.Q,{children:(0,l.jsx)(g._,{onChange:e=>(function(e){let s=k.values.gridRows.map(s=>e.find(e=>e.id===s.id)||s);k.setFieldValue("gridRows",s)})(e),value:R,error:k.errors.gridRows,columns:L,allowDelete:!1,allowAddNewLine:!1})})]})})}Z.width=800,Z.height=600},12436:function(e,s,a){a.d(s,{Z:function(){return p}});var l=a(52322),c=a(60218),o=a(2784),r=a(62202),n=a(65950),t=a(26612),d=a(80983),i=a(5088),u=a(95982),v=a(31389),g=a(62362),h=a(19689),x=a(21326),m=a(19473),F=a(54074);function p(e){var s,a,p,C,I,Z,j,b,y,A,f,N,V,S,w,P;let{labels:k,maxAccess:L,row:O,window:_,resourceId:E}=e,{getRequest:R,postRequest:G}=(0,o.useContext)(n.$),{platformLabels:z}=(0,o.useContext)(m.l);(0,x.Z)({title:z.resourceGlobal,window:_});let{formik:q}=(0,d.c)({maxAccess:L,initialValues:{resourceId:null==O?void 0:O.resourceId,resourceName:null==O?void 0:O.resourceName,moduleId:null==O?void 0:O.moduleId,sgId:null==O?void 0:O.sgId,accessFlags:{get:!1,add:!1,edit:!1,del:!1,close:!1,reopen:!1,post:!1,unpost:!1}},validateOnChange:!0,onSubmit:async e=>{E==t.i.SecurityGroup&&await G({extension:u.y.ModuleClass.set,record:JSON.stringify(e)}),E==t.i.GlobalAuthorization&&await G({extension:u.y.AuthorizationResourceGlobal.set,record:JSON.stringify(e)}),r.ZP.success(z.Edited),_.close()}});return(0,o.useEffect)(()=>{!async function(){if(O.resourceId){if(E==t.i.GlobalAuthorization){let e=await R({extension:u.y.AuthorizationResourceGlobal.get,parameters:"_resourceId=".concat(O.resourceId)});e.record&&q.setValues(e.record)}else if(E==t.i.SecurityGroup){let e=await R({extension:u.y.ModuleClass.get,parameters:"_resourceId=".concat(O.resourceId,"&_sgId=").concat(O.sgId)});e.record&&q.setValues(e.record)}}}()},[]),(0,l.jsx)(F.Z,{onSave:q.handleSubmit,maxAccess:L,children:(0,l.jsx)(v.R,{children:(0,l.jsx)(g.Q,{children:(0,l.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(c.ZP,{item:!0,xs:4,children:(0,l.jsx)(i.Z,{name:"resourceId",label:k.resourceId,value:null==O?void 0:O.resourceId,required:!0,onChange:q.handleChange,maxAccess:L,readOnly:!0,onClear:()=>q.setFieldValue("resourceId",""),error:q.touched.resourceId&&!!q.errors.resourceId,helperText:q.touched.resourceId&&q.errors.resourceId})}),(0,l.jsx)(c.ZP,{item:!0,xs:8,children:(0,l.jsx)(i.Z,{name:"resourceName",label:k.resourceName,value:null==O?void 0:O.resourceName,required:!0,readOnly:!0,maxAccess:L,onChange:q.handleChange,onClear:()=>q.setFieldValue("resourceName",""),error:q.touched.resourceName&&!!q.errors.resourceName,helperText:q.touched.resourceName&&q.errors.resourceName})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.get",value:null===(a=q.values)||void 0===a?void 0:null===(s=a.accessFlags)||void 0===s?void 0:s.get,onChange:e=>q.setFieldValue("accessFlags.get",e.target.checked),label:k.get,maxAccess:L})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.close",value:null===(C=q.values)||void 0===C?void 0:null===(p=C.accessFlags)||void 0===p?void 0:p.close,onChange:e=>q.setFieldValue("accessFlags.close",e.target.checked),label:k.close,maxAccess:L})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.add",value:null===(Z=q.values)||void 0===Z?void 0:null===(I=Z.accessFlags)||void 0===I?void 0:I.add,onChange:e=>q.setFieldValue("accessFlags.add",e.target.checked),label:k.add,maxAccess:L})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.reopen",value:null===(b=q.values)||void 0===b?void 0:null===(j=b.accessFlags)||void 0===j?void 0:j.reopen,onChange:e=>q.setFieldValue("accessFlags.reopen",e.target.checked),label:k.reopen,maxAccess:L})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.edit",value:null===(A=q.values)||void 0===A?void 0:null===(y=A.accessFlags)||void 0===y?void 0:y.edit,onChange:e=>q.setFieldValue("accessFlags.edit",e.target.checked),label:k.edit,maxAccess:L})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.post",value:null===(N=q.values)||void 0===N?void 0:null===(f=N.accessFlags)||void 0===f?void 0:f.post,onChange:e=>q.setFieldValue("accessFlags.post",e.target.checked),label:k.post,maxAccess:L})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"del",value:null===(S=q.values)||void 0===S?void 0:null===(V=S.accessFlags)||void 0===V?void 0:V.del,onChange:e=>q.setFieldValue("accessFlags.del",e.target.checked),label:k.del,maxAccess:L})}),(0,l.jsx)(c.ZP,{item:!0,xs:6,children:(0,l.jsx)(h.Z,{name:"accessFlags.unpost",value:null===(P=q.values)||void 0===P?void 0:null===(w=P.accessFlags)||void 0===w?void 0:w.unpost,onChange:e=>q.setFieldValue("accessFlags.unpost",e.target.checked),label:k.unpost,maxAccess:L})})]})})})})}p.width=700,p.height=400}}]);