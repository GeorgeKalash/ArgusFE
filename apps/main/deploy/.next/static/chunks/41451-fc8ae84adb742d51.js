(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41451],{98891:function(e,n,a){"use strict";a.d(n,{J:function(){return s}});let t="CO.asmx/",s={CACostTypes:{qry:t+"qryTYP",page:t+"pageTYP",get:t+"getTYP",set:t+"setTYP",del:t+"delTYP"},PuCostAllocations:{qry:t+"qryTRX",page:t+"pageTRX",get:t+"getTRX",set:t+"setTRX",del:t+"delTRX",post:t+"postTRX",unpost:t+"unpostTRX",close:t+"closeTRX",reopen:t+"reopenTRX",snapshot:t+"snapshotTRX"},TrxCostType:{qry:t+"qryTCT",page:t+"pageTCT",get:t+"getTCT",set:t+"setTCT",del:t+"delTCT"},Invoice:{qry:t+"qryIVC",set2:t+"set2IVC"},TrxDstribution:{qry:t+"qryICT"},InvoicesItems:{qry:t+"qryITM"}}},29326:function(e,n,a){"use strict";var t=a(52322);a(2784);var s=a(23925),l=a(13980),o=a.n(l),r=a(95291),d=a.n(r),i=a(65947);let c=e=>{var n,a,l;let{children:o,value:r,index:c,maxAccess:u,...m}=e,v="".concat(e.name||"tab",".").concat(c),{accessLevel:x}=null!==(l=(null!==(a=null==u?void 0:null===(n=u.record)||void 0===n?void 0:n.controls)&&void 0!==a?a:[]).find(e=>e.controlId===v))&&void 0!==l?l:{accessLevel:0};if(x===i.A1)return null;let f=r===c;return(0,t.jsx)(s.Z,{role:"tabpanel",hidden:!f,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c),className:"".concat(d().tabPanel," ").concat(f?d().active:d().hidden),...m,children:o})};c.propTypes={children:o().node,index:o().number.isRequired,value:o().number.isRequired},n.Z=c},9522:function(e,n,a){"use strict";a.d(n,{Y:function(){return m}});var t=a(52322),s=a(23925),l=a(54582),o=a(68696),r=a(44258),d=a(2784),i=a(99266),c=a(52614),u=a.n(c);let m=e=>{var n,a,c,m,v;let{tabs:x,activeTab:f,setActiveTab:b,maxAccess:I,name:y="tab"}=e,p=(null==I?void 0:null===(a=I.record)||void 0===a?void 0:null===(n=a.controls)||void 0===n?void 0:n.filter(e=>{var n;return 4===e.accessLevel&&(null===(n=e.controlId)||void 0===n?void 0:n.startsWith("".concat(y,".")))}).map(e=>e.controlId.split(".")[1]))||[],h=null==x?void 0:null===(c=x.map((e,n)=>({...e,id:n})))||void 0===c?void 0:c.filter((e,n)=>!p.includes(String(n))),C=null===(m=h[f])||void 0===m?void 0:m.id,A=null===(v=h[f])||void 0===v?void 0:v.disabled;return(0,d.useEffect)(()=>{C>=0&&!A&&f!=C&&b(C)},[]),(0,t.jsx)(s.Z,{className:u().tabsContainer,children:(0,t.jsx)(s.Z,{className:u().tabsWrapper,children:(0,t.jsx)(l.Z,{value:f,onChange:(e,n)=>b(n),variant:"scrollable",scrollButtons:h.length>3?"auto":"off","aria-label":"scrollable tabs",classes:{indicator:u().tabsIndicator},className:u().tabs,children:null==h?void 0:h.map(e=>(0,t.jsx)(o.Z,{value:e.id,disabled:null==e?void 0:e.disabled,className:"".concat(u().tabName," ").concat(e.disabled?u().tabDisabled:""),classes:{root:u().tabRoot,selected:u().selectedTab},label:(0,t.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)("span",{children:e.label}),e.id===f&&(null==e?void 0:e.onRefetch)&&(0,t.jsx)(r.Z,{size:"small",className:u().refreshButton,onClick:n=>{n.stopPropagation(),e.onRefetch()},children:(0,t.jsx)(i.Z,{className:u().refreshIcon})})]})},e.id))})})})}},41451:function(e,n,a){"use strict";a.d(n,{Z:function(){return U}});var t=a(52322),s=a(29326),l=a(9522),o=a(2784),r=a(26612),d=a(50023),i=a(60218),c=a(48601),u=a(82737),m=a(62202),v=a(65950),x=a(71987),f=a(80983),b=a(5088),I=a(8661),y=a(31389),p=a(62362),h=a(19473),C=a(98891),A=a(21581),T=a(39812),j=a(38449),g=a(91406),_=a(89330),N=a(7121),Z=a(98345);function P(e){var n,a,s;let{labels:l,access:d,setStore:P,store:q}=e,{platformLabels:R,userDefaultsData:w}=(0,o.useContext)(h.l),{recordId:k}=q,{getRequest:F,postRequest:J}=(0,o.useContext)(v.$),S=N.J.CostAllocation;async function V(){var e;let n=null==w?void 0:null===(e=w.list)||void 0===e?void 0:e.find(e=>{let{key:n}=e;return"plantId"===n});return(null==n?void 0:n.value)?parseInt(n.value):null}let D=(0,x.E)({endpointId:C.J.PuCostAllocations.page}),{documentType:O,maxAccess:E,changeDT:L}=(0,Z.H)({functionId:S,access:d,enabled:!k}),{formik:X}=(0,f.c)({initialValues:{recordId:null,plantId:null,baseAmount:0,notes:"",wip:1,dtId:null,reference:"",status:1,releaseStatus:null,date:new Date},maxAccess:E,documentType:{key:"dtId",value:null==O?void 0:O.dtId},validateOnChange:!1,validationSchema:c.Ry({reference:c.Z_().required(),date:c.Z_().required()}),onSubmit:async e=>{let n={...e,date:(0,T.ku)(e.date)};await J({extension:C.J.PuCostAllocations.set,record:JSON.stringify(n)}).then(e=>{z(e.recordId),m.ZP.success(M?R.Edited:R.Added),D()})}}),M=!!X.values.recordId,Y=2===X.values.wip,W=3===X.values.status;async function z(e){await F({extension:C.J.PuCostAllocations.get,parameters:"_recordId=".concat(e)}).then(n=>{var a;P(a=>{var t,s;return{...a,recordId:e,isPosted:(null==n?void 0:null===(t=n.record)||void 0===t?void 0:t.status)===3,isClosed:(null==n?void 0:null===(s=n.record)||void 0===s?void 0:s.wip)===2,result:null==n?void 0:n.record}}),X.setValues({...n.record,date:(0,T.a1)(null==n?void 0:null===(a=n.record)||void 0===a?void 0:a.date)})})}(0,o.useEffect)(()=>{(async()=>{if(k)await z(k);else{let e=await V();X.setFieldValue("plantId",e)}})()},[]),(0,o.useEffect)(()=>{var e;X.setFieldValue("baseAmount",(null==q?void 0:null===(e=q.result)||void 0===e?void 0:e.baseAmount)||0)},[null==q?void 0:null===(n=q.result)||void 0===n?void 0:n.baseAmount]);let Q=async()=>{let e={...X.values,date:(0,T.ku)(X.values.date)};await J({extension:C.J.PuCostAllocations.post,record:JSON.stringify(e)}).then(async()=>{await z(e.recordId),m.ZP.success(R.Posted),D()})},U=async()=>{let e={...X.values,date:(0,T.ku)(X.values.date)};await J({extension:C.J.PuCostAllocations.unpost,record:JSON.stringify(e)}).then(async e=>{await z(e.recordId),m.ZP.success(R.Unposted),D()})};async function $(){let e={...X.values,date:(0,T.ku)(X.values.date)};await J({extension:C.J.PuCostAllocations.close,record:JSON.stringify(e)}).then(async e=>{await z(e.recordId),m.ZP.success(R.Closed),D()})}async function B(){let e={...X.values,date:(0,T.ku)(X.values.date)};await J({extension:C.J.PuCostAllocations.reopen,record:JSON.stringify(e)}).then(async e=>{await z(e.recordId),m.ZP.success(R.Reopened),D()})}let H=[{key:"GL",condition:!0,onClick:"onClickGL",datasetId:r.i.GLPuCostAllocation,disabled:!M},{key:"IV",condition:!0,onClick:"onInventoryTransaction",disabled:!M||!W},{key:"Close",condition:!Y,onClick:$,disabled:!M||W},{key:"Reopen",condition:Y,onClick:B,disabled:!M||W},{key:"Unlocked",condition:!W,onClick:Q,disabled:!M||!Y},{key:"Locked",condition:W,onClick:"onUnpostConfirmation",onSuccess:U,disabled:!M||!Y},{key:"Attachment",condition:!0,onClick:"onClickAttachment",disabled:!M}];return(0,t.jsx)(u.Z,{resourceId:r.i.PuCostAllocation,functionId:S,form:X,maxAccess:E,editMode:M,actions:H,disabledSubmit:Y,children:(0,t.jsx)(y.R,{children:(0,t.jsx)(p.Q,{children:(0,t.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(I.Z,{endpointId:j.r.DocumentType.qry,parameters:"_startAt=0&_pageSize=1000&_dgId=".concat(S),name:"dtId",label:l.doctype,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:X.values,maxAccess:E,onChange:(e,n)=>{X.setFieldValue("dtId",(null==n?void 0:n.recordId)||""),L(n)},readOnly:M,error:X.touched.dtId&&!!X.errors.dtId})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(I.Z,{endpointId:j.r.Plant.qry,name:"plantId",label:l.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:X.values,maxAccess:E,onChange:(e,n)=>{X.setFieldValue("plantId",(null==n?void 0:n.recordId)||"")},readOnly:Y,error:X.touched.plantId&&!!X.errors.plantId})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(b.Z,{name:"reference",label:l.reference,value:X.values.reference,rows:2,maxAccess:E,onChange:X.handleChange,readOnly:M,onClear:()=>X.setFieldValue("reference",""),error:X.touched.reference&&!!X.errors.reference})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(g.Z,{name:"baseAmount",label:l.amount,value:null===(a=X.values)||void 0===a?void 0:a.baseAmount,maxAccess:E,readOnly:!0,decimalScale:2})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(_.Z,{name:"date",required:!0,label:l.date,value:null==X?void 0:null===(s=X.values)||void 0===s?void 0:s.date,onChange:X.setFieldValue,editMode:M,maxAccess:E,onClear:()=>X.setFieldValue("date",null),readOnly:Y,error:X.touched.date&&!!X.errors.date})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(A.Z,{name:"notes",label:l.notes,value:X.values.notes,maxLength:"100",rows:2,maxAccess:E,onChange:X.handleChange,readOnly:Y,onClear:()=>X.setFieldValue("notes",""),error:X.touched.notes&&!!X.errors.notes})})]})})})})}var q=a(76399),R=a(2454),w=a(54074),k=a(67920),F=e=>{let{store:n,setStore:a,maxAccess:s,labels:l,editMode:r}=e,{recordId:d,isPosted:i,isClosed:u}=n,{getRequest:x,postRequest:b}=(0,o.useContext)(v.$),{platformLabels:I}=(0,o.useContext)(h.l),{schema:A,requiredFields:j}=(0,k.m)({invoiceId:e=>null==e?void 0:e.invoiceId},!0,s,"items"),{formik:g}=(0,f.c)({validateOnChange:!0,maxAccess:s,conditionSchema:["items"],initialValues:{caId:d,items:[{id:1,caId:d,invoiceId:null,invoiceRef:"",currencyRef:null,date:null,amount:null,baseAmount:null,vendorName:""}]},validationSchema:c.Ry({items:c.IX().of(A)}),onSubmit:async e=>{let n=e.items.filter(e=>{var n;return null===(n=Object.values(j))||void 0===n?void 0:n.every(n=>n(e))}).map(e=>{let{id:n,...a}=e;return{...a,caId:d,date:(0,T.ku)(a.date)}});await b({extension:C.J.Invoice.set2,record:JSON.stringify({caId:d,items:n})}).then(e=>{m.ZP.success(I.Edited)}),await x({extension:C.J.InvoicesItems.qry,parameters:"_invoiceId=0&_caId=".concat(d)}).then(e=>{a(n=>({...n,invoicesItemsData:e}))})}});return(0,o.useEffect)(()=>{d&&x({extension:C.J.Invoice.qry,parameters:"_caId=".concat(d)}).then(e=>{var n;if((null==e?void 0:null===(n=e.list)||void 0===n?void 0:n.length)>0){let n=e.list.map((e,n)=>({...e,id:n+1,date:(0,T.a1)(e.date)}));g.setValues({...g.values,items:n})}})},[]),(0,t.jsx)(w.Z,{onSave:g.handleSubmit,maxAccess:s,disabledSubmit:i||u,editMode:r,isParentWindow:!1,children:(0,t.jsx)(y.R,{children:(0,t.jsx)(p.Q,{children:(0,t.jsx)(q._,{onChange:e=>g.setFieldValue("items",e),value:g.values.items,error:g.errors.items,disabled:i||u,allowDelete:!i&&!u,columns:[{component:"resourcelookup",label:l.reference,name:"invoiceId",flex:1,props:{valueField:"reference",displayField:"reference",endpointId:R.y.PurchaseInvoiceHeader.snapshot,mapping:[{from:"recordId",to:"invoiceId"},{from:"reference",to:"invoiceRef"},{from:"currencyRef",to:"currencyRef"},{from:"amount",to:"amount"},{from:"baseAmount",to:"baseAmount"},{from:"vendorName",to:"vendorName"},{from:"date",to:"date"}],columnsInDropDown:[{key:"reference",value:"Reference"}]},onChange(e){let{row:{update:n,newRow:a}}=e;n({date:(null==a?void 0:a.date)?(0,T.a1)(null==a?void 0:a.date):""})}},{component:"date",name:"date",flex:1,props:{readOnly:!0},width:200}]})})})})},J=a(69387),S=e=>{let{store:n,labels:a,access:s,setStore:l}=e,{recordId:d,invoicesItemsData:i}=n,{getRequest:c}=(0,o.useContext)(v.$),u=[{field:"sku",headerName:a.sku,flex:1},{field:"itemName",headerName:a.name,flex:1},{field:"qty",headerName:a.qty,flex:1,type:"number"},{field:"netPrice",headerName:a.netPrice,flex:1,type:"number"}];async function m(){let e=await c({extension:C.J.InvoicesItems.qry,parameters:"_invoiceId=0&_caId=".concat(d)});return l(n=>({...n,invoicesItemsData:(null==e?void 0:e.count)==0?i:e})),e}let{query:{data:f}}=(0,x.J)({queryFn:m,endpointId:C.J.InvoicesItems.qry,datasetId:r.i.PuCostAllocation,enabled:!!d});return(0,t.jsx)(y.R,{children:(0,t.jsx)(p.Q,{children:(0,t.jsx)(J.Z,{name:"invoicesItemsTable",columns:u,gridData:i,rowId:["recordId"],isLoading:!1,maxAccess:s,pagination:!1})})})},V=a(33625),D=a(27723),O=a(61802),E=a(84100),L=a(27423),X=a(25870);function M(e){var n;let{labels:a,maxAccess:s,recordId:l,seqNo:d,caId:b,onSubmit:A}=e,{getRequest:T}=(0,o.useContext)(v.$),{platformLabels:_}=(0,o.useContext)(h.l),N=(0,x.E)({endpointId:C.J.TrxCostType.qry}),{formik:Z}=(0,f.c)({initialValues:{recordId:null,costTypeId:null,caId:b,currencyId:null,accountId:null,functionId:null,baseAmount:0,reference:"",seqNo:null,amount:0},validateOnChange:!1,validationSchema:c.Ry({baseAmount:c.Rx().required(),costTypeId:c.Rx().required(),reference:c.Z_().test("is-reference-required","reference is required",function(e){return!Z.values.functionId||!!e})}),onSubmit:async e=>{let n=await A(e);m.ZP.success(e.recordId?_.Edited:_.Added),Z.setFieldValue("recordId",n.recordId),N()}}),P=!!(null===(n=Z.values)||void 0===n?void 0:n.recordId);return(0,o.useEffect)(()=>{!async function(){if(l){let e=await T({extension:C.J.TrxCostType.get,parameters:"_caId=".concat(l,"&_seqNo=").concat(d)});Z.setValues(e.record)}}()},[]),(0,t.jsx)(u.Z,{resourceId:r.i.PuCostAllocation,form:Z,maxAccess:s,editMode:P,isInfo:!1,children:(0,t.jsx)(y.R,{children:(0,t.jsx)(p.Q,{children:(0,t.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(I.Z,{endpointId:C.J.CACostTypes.qry,name:"costTypeId",label:a.costType,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],required:!0,values:Z.values,maxAccess:s,onChange:(e,n)=>{Z.setFieldValue("costTypeId",(null==n?void 0:n.recordId)||"")},error:Z.touched.costTypeId&&!!Z.errors.costTypeId})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(g.Z,{name:"baseAmount",type:"text",label:a.baseAmount,value:Z.values.baseAmount,required:!0,readOnly:Z.values.functionId,maxAccess:s,onChange:e=>Z.setFieldValue("baseAmount",e.target.value),onClear:()=>Z.setFieldValue("baseAmount",""),error:Z.touched.baseAmount&&!!Z.errors.baseAmount,maxLength:10})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(I.Z,{datasetId:E.v.CA_FNCTN,name:"functionId",label:a.function,valueField:"key",displayField:"value",values:Z.values,maxAccess:s,onChange:(e,n)=>{n?Z.setFieldValue("functionId",null==n?void 0:n.key):Z.setValues({...Z.values,reference:"",currencyId:null,baseAmount:"",amount:"",accountId:null,accountName:"",accountRef:"",functionId:""})},error:Z.touched.functionId&&!!Z.errors.functionId})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(I.Z,{endpointId:j.r.Currency.qry,name:"currencyId",label:a.currency,valueField:"recordId",displayField:["reference","name"],readOnly:!0,values:Z.values,maxAccess:s})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(L.U,{endpointId:X.H.AgingDoc.snapshot,parameters:{_functionId:Z.values.functionId},readOnly:!Z.values.functionId,required:Z.values.functionId,valueField:"reference",displayField:"reference",name:"reference",label:a.reference,form:Z,secondDisplayField:!1,onChange:(e,n)=>{Z.setValues({...Z.values,accountId:(null==n?void 0:n.accountId)||null,accountName:(null==n?void 0:n.accountName)||"",accountRef:(null==n?void 0:n.accountRef)||"",reference:(null==n?void 0:n.reference)||"",currencyId:(null==n?void 0:n.currencyId)||null,baseAmount:(null==n?void 0:n.baseAmount)||null,amount:(null==n?void 0:n.amount)||null,recordId:(null==n?void 0:n.recordId)||null})},error:Z.touched.reference&&!!Z.errors.reference,maxAccess:s})}),(0,t.jsx)(i.ZP,{item:!0,xs:6,children:(0,t.jsx)(g.Z,{name:"amount",label:a.amount,value:Z.values.amount,maxAccess:s,readOnly:!0,maxLength:10,decimalScale:2})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,children:(0,t.jsx)(L.U,{endpointId:X.H.Account.snapshot,name:"accountId",label:a.accountRef,valueField:"reference",displayField:"name",valueShow:"accountRef",secondValueShow:"accountName",readOnly:Z.values.reference,form:Z,onChange:(e,n)=>{Z.setFieldValue("accountId",(null==n?void 0:n.recordId)||""),Z.setFieldValue("accountRef",(null==n?void 0:n.reference)||""),Z.setFieldValue("accountName",(null==n?void 0:n.name)||"")},error:Z.touched.accountId&&!!Z.errors.accountId,maxAccess:s})})]})})})})}var Y=e=>{let{store:n,labels:a,access:s,setStore:l}=e,{platformLabels:d}=(0,o.useContext)(h.l),{recordId:c,isClosed:u}=n,{getRequest:f,postRequest:b}=(0,o.useContext)(v.$),{stack:I}=(0,O.zY)(),A=(0,o.useRef)([]),{query:{data:T},invalidate:j}=(0,x.J)({queryFn:N,endpointId:C.J.TrxCostType.qry,datasetId:r.i.PuCostAllocation,enabled:!!c}),_=[{field:"costTypeName",headerName:a.costType,flex:1},{field:"baseAmount",headerName:a.baseAmount,flex:1,type:"number"},{field:"accountRef",headerName:a.accountRef,flex:1},{field:"accountName",headerName:a.accountName,flex:1},{field:"currencyRef",headerName:a.currency,flex:1},{field:"amount",headerName:a.amount,flex:1,type:"number"}];async function N(){return await f({extension:C.J.TrxCostType.qry,parameters:"_caId=".concat(c)})}let Z=async e=>{await b({extension:C.J.TrxCostType.del,record:JSON.stringify(e)}),j(),q(T.list.filter(n=>n.seqNo!==e.seqNo)),m.ZP.success(d.Deleted)},P=(0,x.E)({endpointId:C.J.PuCostAllocations.page});async function q(e){let a=null==e?void 0:e.reduce((e,n)=>e+parseFloat(n.baseAmount)||0,0);return await b({extension:C.J.PuCostAllocations.set,record:JSON.stringify({...null==n?void 0:n.result,baseAmount:a})}),l(e=>({...e,result:{...null==e?void 0:e.result,baseAmount:a}})),P(),!0}async function R(e){var n;let a;let t=A.current||[],s=t.findIndex(n=>n.seqNo===e.seqNo);if(s>-1){let n=t.slice();n[s]=e,a=n}else a=[...t,e];e.seqNo=null!==(n=e.seqNo)&&void 0!==n?n:(null==t?void 0:t.reduce((e,n)=>Math.max(e,n.seqNo),0))+1;let l=await b({extension:C.J.TrxCostType.set,record:JSON.stringify(e)});return q(a),l}function w(e){I({Component:M,props:{labels:a,recordId:null==e?void 0:e.caId,caId:c,seqNo:null==e?void 0:e.seqNo,onSubmit:R,maxAccess:s},width:600,height:400,title:a.transaction})}(0,o.useEffect)(()=>{var e;A.current=null!==(e=null==T?void 0:T.list)&&void 0!==e?e:[]},[T]);let k=T?T.list.reduce((e,n)=>e+n.baseAmount,0):0;return(0,t.jsxs)(y.R,{children:[(0,t.jsx)(V.g,{children:(0,t.jsx)(D.Z,{maxAccess:s,labels:a,onAdd:()=>{w()},disableAdd:u})}),(0,t.jsx)(p.Q,{children:(0,t.jsx)(J.Z,{name:"transactionTable",columns:_,gridData:T,rowId:["recordId"],isLoading:!1,onDelete:u?null:Z,onEdit:u?null:e=>{w(e)},maxAccess:s,pagination:!1})}),(0,t.jsx)(V.g,{children:(0,t.jsx)(i.ZP,{container:!0,justifyContent:"flex-end",sx:{p:2},children:(0,t.jsx)(i.ZP,{item:!0,xs:3,children:(0,t.jsx)(g.Z,{name:"baseAmounts",label:a.totalBaseAmounts,value:k,readOnly:!0})})})})]})},W=e=>{let{store:n,labels:a,access:s}=e,{recordId:l}=n,{getRequest:d}=(0,o.useContext)(v.$),i=[{field:"costTypeRef",headerName:a.costTypeRef,flex:1},{field:"costTypeName",headerName:a.costTypeName,flex:1},{field:"sku",headerName:a.sku,flex:1},{field:"itemName",headerName:a.itemName,flex:1},{field:"baseAmount",headerName:a.baseAmount,flex:1,type:"number"}];async function c(){return await d({extension:C.J.TrxDstribution.qry,parameters:"_recordId=".concat(l)})}let{query:{data:u}}=(0,x.J)({queryFn:c,endpointId:C.J.TrxDstribution.qry,datasetId:r.i.PuCostAllocation,enabled:!!l});return(0,t.jsx)(y.R,{children:(0,t.jsx)(p.Q,{children:(0,t.jsx)(J.Z,{name:"distributionTable",columns:i,gridData:u,rowId:["recordId"],isLoading:!1,maxAccess:s,pagination:!1})})})},z=a(21326);let Q=e=>{let{recordId:n,window:a}=e,[i,c]=(0,o.useState)(0),[u,m]=(0,o.useState)({recordId:n||null,isPosted:!1,isClosed:!1,baseAmount:0,invoicesItemsData:[]}),{labels:v,access:x}=(0,d.Z)({datasetId:r.i.PuCostAllocation,editMode:!!n});(0,z.Z)({title:v.PuCostAllocations,window:a});let f=[{label:v.TRX},{label:v.invoices,disabled:!u.recordId},{label:v.invoicesItems,disabled:!u.recordId},{label:v.transaction,disabled:!u.recordId},{label:v.distribution,disabled:!u.recordId}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Y,{tabs:f,activeTab:i,setActiveTab:c,maxAccess:x}),(0,t.jsx)(s.Z,{height:670,index:0,value:i,maxAccess:x,children:(0,t.jsx)(P,{labels:v,setStore:m,store:u,access:x})}),(0,t.jsx)(s.Z,{index:1,value:i,maxAccess:x,children:(0,t.jsx)(F,{labels:v,setStore:m,editMode:!!n,store:u,maxAccess:x})}),(0,t.jsx)(s.Z,{index:2,value:i,maxAccess:x,children:(0,t.jsx)(S,{labels:v,maxAccess:x,setStore:m,store:u})}),(0,t.jsx)(s.Z,{index:3,value:i,maxAccess:x,children:(0,t.jsx)(Y,{store:u,labels:v,access:x,setStore:m})}),(0,t.jsx)(s.Z,{index:4,value:i,maxAccess:x,children:(0,t.jsx)(W,{labels:v,access:x,store:u})})]})};Q.width=800,Q.height=500;var U=Q},95291:function(e){e.exports={tabPanel:"CustomTabPanel_tabPanel__80Dfu",active:"CustomTabPanel_active___6Uvb",hidden:"CustomTabPanel_hidden__y9566"}},52614:function(e){e.exports={customTabPanel:"CustomTabs_customTabPanel__Ztocv",hidden:"CustomTabs_hidden__lZpM7",tabsContainer:"CustomTabs_tabsContainer__28Syi",tabsWrapper:"CustomTabs_tabsWrapper__mlxxj",tabs:"CustomTabs_tabs__25pli",tabName:"CustomTabs_tabName__XzMCn",tabRoot:"CustomTabs_tabRoot__WVR1E",tabDisabled:"CustomTabs_tabDisabled__VauYR",selectedTab:"CustomTabs_selectedTab__sZzwF",tabsIndicator:"CustomTabs_tabsIndicator__89Lek",refreshButton:"CustomTabs_refreshButton__P2mzl",refreshIcon:"CustomTabs_refreshIcon__ADVWF"}}}]);