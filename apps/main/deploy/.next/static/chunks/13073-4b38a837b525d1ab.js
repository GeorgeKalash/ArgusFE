"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13073],{13073:function(e,l,n){var a=n(52322),t=n(2784),r=n(5088),o=n(8661),d=n(38449),s=n(27423),i=n(30390),u=n(50023),c=n(26612),m=n(48601),h=n(65950);l.Z=e=>{var l,n,y,v;let{address:x,addressValidation:p,readOnly:I=!1,defaultReadOnly:g={},required:C=!0,setFormik:Z,access:j,...F}=e,{getRequest:b}=(0,t.useContext)(h.$),{labels:N,access:V}=(0,u.Z)({datasetId:c.i.Address,DatasetIdAccess:null==F?void 0:F.datasetId}),f=(0,t.useRef)(null),D=(0,t.useMemo)(()=>({recordId:(null==x?void 0:x.recordId)||null,name:(null==x?void 0:x.name)||"",countryId:(null==x?void 0:x.countryId)||null,countryName:(null==x?void 0:x.countryName)||"",stateId:(null==x?void 0:x.stateId)||null,stateName:(null==x?void 0:x.stateName)||"",cityId:(null==x?void 0:x.cityId)||null,city:(null==x?void 0:x.city)||"",street1:(null==x?void 0:x.street1)||"",street2:(null==x?void 0:x.street2)||"",email1:(null==x?void 0:x.email1)||"",email2:(null==x?void 0:x.email2)||"",phone:(null==x?void 0:x.phone)||"",phone2:(null==x?void 0:x.phone2)||"",phone3:(null==x?void 0:x.phone3)||"",addressId:(null==x?void 0:x.addressId)||null,postalCode:(null==x?void 0:x.postalCode)||"",cityDistrictId:(null==x?void 0:x.cityDistrictId)||null,cityDistrict:(null==x?void 0:x.cityDistrict)||"",bldgNo:(null==x?void 0:x.bldgNo)||"",unitNo:(null==x?void 0:x.unitNo)||"",subNo:(null==x?void 0:x.subNo)||"",poBox:(null==x?void 0:x.poBox)||""}),[x]),A=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,O=((null==V?void 0:null===(l=V.record)||void 0===l?void 0:l.controls)||[]).filter(e=>2===e.accessLevel).map(e=>e.controlId),_=(p.values.name||p.values.cityId||p.values.phone||p.values.countryId||p.values.street1||O.some(e=>!!p.values[e]))&&!C||C,L=_&&{name:m.Z_().required(),street1:m.Z_().required(),phone:m.Z_().required(),countryId:m.Rx().required(),city:m.Z_().required(),email1:m.Z_().nullable().matches(A,{message:"Invalid email format",excludeEmptyString:!0}),email2:m.Z_().nullable().matches(A,{message:"Invalid email format",excludeEmptyString:!0})};return(0,t.useEffect)(()=>{(null==x?void 0:x.recordId)!==f.current&&(f.current=null==x?void 0:x.recordId,Object.entries(D).forEach(e=>{let[l,n]=e;p.setFieldValue(l,n,!1)}))},[null==x?void 0:x.recordId]),(0,t.useEffect)(()=>{!(null==x?void 0:x.recordId)&&x&&Object.values(x).some(e=>null!==e&&""!==e)&&x!==f.current&&(f.current=x,Object.entries(D).forEach(e=>{let[l,n]=e;p.setFieldValue(l,n,!1)}))},[x]),(0,t.useEffect)(()=>{if(V){var e,l,n;let a=_?(null==V?void 0:null===(e=V.record)||void 0===e?void 0:e.controls)||[]:((null==V?void 0:null===(l=V.record)||void 0===l?void 0:l.controls)||[]).filter(e=>2!==e.accessLevel);Z({validate:L,maxAccess:j?{...j,record:{...null==j?void 0:j.record,controls:[...(null==j?void 0:null===(n=j.record)||void 0===n?void 0:n.controls)||[],...a]}}:{...V,record:{...V.record,controls:a}}})}},[V,_]),(0,t.useEffect)(()=>{(async function(){let e=(await b({extension:d.r.Defaults.get,parameters:"_filter=&_key=countryId"})).record.value;p.values.countryId||p.setFieldValue("countryId",parseInt(e))})()},[]),(0,a.jsxs)(i.Z,{container:!0,hideonempty:!0,xs:12,spacing:2,children:[(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:12,children:(0,a.jsx)(r.Z,{name:"name",label:N.name,value:p.values.name,readOnly:I,maxLength:"50",required:C,onChange:p.handleChange,onClear:()=>p.setFieldValue("name",""),error:(null===(n=p.touched)||void 0===n?void 0:n.name)&&!!(null===(y=p.errors)||void 0===y?void 0:y.name),maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(o.Z,{endpointId:d.r.Country.qry,name:"countryId",label:N.country,valueField:"recordId",displayField:["reference","name"],readOnly:I||(null==g?void 0:g.countryId),displayFieldWidth:1.5,required:C,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],values:p.values,onChange:(e,l)=>{p.setFieldValue("stateId",null),p.setFieldValue("cityId",null),p.setFieldValue("city",""),p.setFieldValue("cityDistrictId",null),p.setFieldValue("cityDistrict",""),l?(p.setFieldValue("countryId",null==l?void 0:l.recordId),p.setFieldValue("countryName",null==l?void 0:l.name)):(p.setFieldValue("countryId",null),p.setFieldValue("countryName",""))},error:p.touched.countryId&&!!p.errors.countryId,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(o.Z,{endpointId:p.values.countryId&&d.r.State.qry,parameters:p.values.countryId&&"_countryId=".concat(p.values.countryId||0),name:"stateId",label:N.state,valueField:"recordId",displayField:"name",readOnly:I||!(null===(v=p.values)||void 0===v?void 0:v.countryId),values:p.values,onChange:(e,l)=>{p.setFieldValue("stateId",(null==l?void 0:l.recordId)||null),p.setFieldValue("stateName",(null==l?void 0:l.name)||""),p.setFieldValue("cityId",null),p.setFieldValue("cityDistrictId",null),p.setFieldValue("city",""),p.setFieldValue("cityDistrict","")},error:p.touched.stateId&&!!p.errors.stateId,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(s.U,{endpointId:d.r.City.snapshot,parameters:{_countryId:p.values.countryId,_stateId:p.values.stateId?p.values.stateId:0},valueField:"name",displayField:"name",name:"city",required:C,label:N.city,readOnly:I||!p.values.countryId,form:p,secondDisplayField:!1,onChange:(e,l)=>{p.setValues({...p.values,cityId:(null==l?void 0:l.recordId)||"",city:(null==l?void 0:l.name)||"",cityDistrictId:"",cityDistrict:""})},errorCheck:"city",maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(s.U,{endpointId:p.values.cityId&&d.r.CityDistrict.snapshot,parameters:p.values.cityId&&{_cityId:p.values.cityId},valueField:"name",displayField:"name",name:"cityDistrictId",label:N.cityDistrict,readOnly:I||!p.values.cityId,form:p,secondDisplayField:!1,valueShow:"cityDistrict",onChange:(e,l)=>{l?(p.setFieldValue("cityDistrictId",null==l?void 0:l.recordId),p.setFieldValue("cityDistrict",null==l?void 0:l.name)):(p.setFieldValue("cityDistrictId",null),p.setFieldValue("cityDistrict",""))},errorCheck:"cityDistrictId",maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:12,children:(0,a.jsxs)(i.Z,{container:!0,hideonempty:!0,spacing:2,children:[(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:6,children:(0,a.jsx)(r.Z,{name:"street1",label:N.street1,value:p.values.street1,required:C,readOnly:I,maxLength:"100",onChange:p.handleChange,onClear:()=>p.setFieldValue("street1",""),error:p.touched.street1&&!!p.errors.street1,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:6,children:(0,a.jsx)(r.Z,{name:"street2",label:N.street2,value:p.values.street2,maxLength:"100",readOnly:I,onChange:p.handleChange,onClear:()=>p.setFieldValue("street2",""),error:p.touched.street2&&!!p.errors.street2,maxAccess:V})})]})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"bldgNo",label:N.bldgNo,value:p.values.bldgNo,maxLength:"10",readOnly:I,onChange:p.handleChange,onClear:()=>p.setFieldValue("bldgNo",""),error:p.touched.bldgNo&&!!p.errors.bldgNo,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"unitNo",label:N.unitNo,value:p.values.unitNo,maxLength:"10",readOnly:I,onChange:p.handleChange,onClear:()=>p.setFieldValue("unitNo",""),error:p.touched.unitNo&&!!p.errors.unitNo,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"subNo",label:N.subNo,value:p.values.subNo,maxLength:"10",readOnly:I,onChange:p.handleChange,onClear:()=>p.setFieldValue("subNo",""),error:p.touched.subNo&&!!p.errors.subNo,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"postalCode",maxLength:"5",label:N.postalCode,readOnly:I,value:p.values.postalCode,onChange:p.handleChange,onClear:()=>p.setFieldValue("postalCode",""),error:p.touched.postalCode&&!!p.errors.postalCode,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"poBox",label:N.poBox,value:p.values.poBox,maxLength:"10",readOnly:I,onChange:p.handleChange,onClear:()=>p.setFieldValue("poBox",""),error:p.touched.poBox&&!!p.errors.poBox,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:12,children:(0,a.jsxs)(i.Z,{container:!0,hideonempty:!0,spacing:2,children:[(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"phone",label:N.phone,value:p.values.phone,readOnly:I,maxLength:"40",required:C,phone:!0,onChange:p.handleChange,onClear:()=>p.setFieldValue("phone",""),error:p.touched.phone&&!!p.errors.phone,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"phone2",label:N.phone2,value:p.values.phone2,maxLength:"40",phone:!0,readOnly:I,onChange:p.handleChange,onClear:()=>p.setFieldValue("phone2",""),error:p.touched.phone2&&!!p.errors.phone2,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:4,children:(0,a.jsx)(r.Z,{name:"phone3",label:N.phone3,value:p.values.phone3,maxLength:"15",phone:!0,readOnly:I,onChange:p.handleChange,onClear:()=>p.setFieldValue("phone3",""),error:p.touched.phone3&&!!p.errors.phone3,maxAccess:V})})]})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:12,children:(0,a.jsxs)(i.Z,{container:!0,hideonempty:!0,spacing:2,children:[(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:6,children:(0,a.jsx)(r.Z,{name:"email1",maxLength:"50",label:N.email1,value:p.values.email1,type:"email",onBlur:p.handleBlur,readOnly:I,placeholder:"johndoe@email.com",onChange:p.handleChange,onClear:()=>p.setFieldValue("email1",""),error:p.touched.email1&&!!p.errors.email1,maxAccess:V})}),(0,a.jsx)(i.Z,{item:!0,hideonempty:!0,xs:6,children:(0,a.jsx)(r.Z,{name:"email2",type:"email",maxLength:"50",readOnly:I,placeholder:"johndoe@email.com",label:N.email2,onBlur:p.handleBlur,value:p.values.email2,onChange:p.handleChange,onClear:()=>p.setFieldValue("email2",""),error:p.touched.email2&&!!p.errors.email2,maxAccess:V})})]})})]})}},30390:function(e,l,n){n.d(l,{Z:function(){return r}});var a=n(52322),t=n(60218);function r(e){let{hideonempty:l=!1,children:n,...r}=e;return(0,a.jsx)(t.ZP,{...r,className:l?"__hide-on-empty":"",children:n})}}}]);