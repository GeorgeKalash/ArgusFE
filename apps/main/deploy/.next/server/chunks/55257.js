exports.id=55257,exports.ids=[55257],exports.modules={44982:e=>{e.exports={container:"ImageUpload_container__I2BWx",previewBox:"ImageUpload_previewBox__JogCN",previewImage:"ImageUpload_previewImage___eqQX",bottomSection:"ImageUpload_bottomSection__jpph8"}},22238:(e,r,a)=>{"use strict";a.d(r,{Z:()=>d});var t=a(79660),s=a(82204);let n=async(e,r)=>(await e({extension:t.r.NumberRange.get,parameters:`_recordId=${r}`})).record,l=(e,r,a)=>{let t=(e=JSON.parse(JSON.stringify(e))).record.controls,n=t.find(e=>e.controlId===a);return n?n.accessLevel=r.mandatory?s.$7:s.rr:r.mandatory||r.readOnly?t.push({sgId:"",resourceId:"",controlId:a,accessLevel:r.mandatory?s.$7:s.rr}):t=t.filter(e=>e.controlId!==a),{...e,record:{...e.record,controls:t}}},d=async(e,r="barcode",a,t,s)=>{let d,i={readOnly:!1,mandatory:!1};if(s)i={readOnly:!0,mandatory:!1};else if(t){let r=await n(e,t);d=r?.external,i=r?d?{readOnly:!1,mandatory:!0}:{readOnly:!1,mandatory:!1}:{readOnly:!1,mandatory:!0}}else i={readOnly:!1,mandatory:!0};return a&&(a=l(a,i,r)),{field:i,maxAccess:a,selectNraId:t}}},14244:(e,r,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.d(r,{A:()=>c});var s=a(49752),n=a(16689),l=a(29352),d=a(22238),i=e([s,l]);function c({access:e,fieldName:r,editMode:a=!0,store:t}){let{getRequest:i}=(0,n.useContext)(l.$),[c,o]=(0,n.useState)(t?.nraId||null),u=async t=>await (0,d.Z)(i,r,e,t,a),m=(0,s.useQuery)({retry:!1,staleTime:0,queryKey:[c,!!e],queryFn:()=>u(c)});return{refBehavior:m.data,maxAccess:m?.data?.maxAccess,changeDT(e){o(e)}}}[s,l]=i.then?(await i)():i,t()}catch(e){t(e)}})},528:(e,r,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.d(r,{Z:()=>p});var s=a(20997),n=a(30343),l=a.n(n),d=a(16689),i=a(95965),c=a(29352),o=a(79660),u=a(60520),m=a(20562),h=a(44982),x=a.n(h),I=a(70755),f=e([c,u]);[c,u]=f.then?(await f)():f;let p=(0,d.forwardRef)(({resourceId:e,error:r,seqNo:t,recordId:n,width:h=140,height:f=140,customWidth:p,customHeight:v,disabled:y=!1,isAbsolutePath:g=!1,parentImage:b},j)=>{let N=(0,d.useRef)(null),w=(0,d.useRef)(null),D=(0,d.useRef)({}),{getRequest:C,postRequest:F}=(0,d.useContext)(c.$),{platformLabels:_}=(0,d.useContext)(u.l),[$,V]=(0,d.useState)(""),A=b?.recordId,O=b?.resourceId,{formik:S}=(0,i.c)({initialValues:{}}),{width:k}=(0,m.d)(),q=k>=1680?1:k>=1600?.9:k<=1024?.7:.7+(k-1024)/576*.22000000000000008;(0,d.useImperativeHandle)(j,()=>({submit:Z}));let Z=()=>{if(y)return;let r=j?.current?.value||n;if(g){if(S.values?.file?.name||S.values.url){let a={...S.values,fileName:S.values.file?.name||S.values.url,resourceId:e,recordId:r};return F({extension:o.r.Attachment.set2,record:JSON.stringify(a),file:S.values?.file}).then(()=>Q(r))}return!$&&D.current?.fileName&&!S.values?.fileName?F({extension:o.r.Attachment.del,record:JSON.stringify(D.current)}).then(()=>Q(r)):void 0}if(S.values?.file){let e={...S.values,recordId:r};return F({extension:o.r.Attachment.set,record:JSON.stringify(e),file:S.values?.file}).then(()=>Q(r))}if(!$&&D.current?.url&&!S.values?.url)return F({extension:o.r.Attachment.del,record:JSON.stringify(D.current),file:D.current?.url}).then(()=>Q(r))},R=()=>{V(""),S.setValues({})},Q=async r=>{let a=r||n;if(!e)return;if(g&&a){let r=await C({extension:o.r.Attachment.get2,parameters:`_resourceId=${e}&_seqNo=${t}&_recordId=${a}`}),s=r?.record||{};S.setValues({...s,resourceId:e}),D.current={...s,resourceId:e},V(s?.fileName?`${s.fileName}?t=${Date.now()}`:"");return}let s=O||e,l=A||a;if(!l)return;let d=await C({extension:o.r.Attachment.get,parameters:`_resourceId=${s}&_seqNo=${t}&_recordId=${l}`}),i=d?.record||{};S.setValues({...i,resourceId:s}),D.current={...i,resourceId:s},V(i?.url?`${i.url}?t=${Date.now()}`:"")};return(0,d.useEffect)(()=>{A||n?Q():R()},[A,n]),(0,s.jsxs)(l(),{className:x().container,children:[s.jsx(l(),{className:x().previewBox,style:{width:"100%",maxWidth:(p||h)*q,height:(v||f)*q},onClick:()=>{y||N.current.click()},children:s.jsx("img",{src:$||a(13063).default.src,alt:"",className:x().previewImage,style:{border:r?"2px solid #F44336":"none"},onError:e=>{e.currentTarget.src=a(13063).default.src}})}),(0,s.jsxs)(l(),{className:x().bottomSection,children:[s.jsx("input",{hidden:!0,type:"file",accept:"image/png, image/jpeg, image/jpg",ref:N,onChange:r=>{let a=r?.target?.files?.[0];if(!a)return;if(Math.round(a.size/1024)>500){alert(_.MaxFileSize);return}let t=new Date(a.lastModifiedDate),s=`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`;S.setValues({resourceId:e,recordId:n,seqNo:0,fileName:a.name,folderId:null,folderName:null,date:s,url:null,file:a});let l=new FileReader;w.current=l,l.onloadend=e=>V(e.target.result),l.readAsDataURL(a)},disabled:y}),s.jsx(I.Z,{onClick:R,image:"clear.png",tooltipText:_.Clear,color:"#F44336",border:"none",disabled:y})]})]})});t()}catch(e){t(e)}})},55257:(e,r,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.d(r,{Z:()=>F});var s=a(20997),n=a(99155),l=a.n(n),d=a(75609),i=a(16689),c=a(80582),o=a(528),u=a(86201),m=a(29352),h=a(6416),x=a(18611),I=a(23385),f=a(95965),p=a(71278),v=a(60520),y=a(61274),g=a(54242),b=a(91184),j=a(44619),N=a(38509),w=a(14244),D=a(67906),C=e([c,o,u,m,p,v,y,N,w]);function F({labels:e,access:r,store:a,recordId:t,msId:n,barcode:C}){let{postRequest:F,getRequest:_}=(0,i.useContext)(m.$),{platformLabels:$}=(0,i.useContext)(v.l),V=(0,N.E)({endpointId:g.$.Barcodes.qry}),{maxAccess:A,changeDT:O}=(0,w.A)({access:r,editMode:!1,fieldName:"barcode",store:a}),S=(0,i.useRef)(null),{formik:k}=(0,f.c)({initialValues:{recordId:t,barcodeId:null,itemId:t||a?.recordId,sku:a?._reference,defaultQty:"",itemName:a?._name,muId:null,msId:n,scaleDescription:null,posDescription:null,barcode:null,isInactive:!1},maxAccess:A,validateOnChange:!0,validationSchema:d.object({itemId:d.string().required(),barcode:d.string().required()}),onSubmit:async e=>{let r={...e,recordId:parseInt(t)},a=await F({extension:g.$.Barcodes.set,record:JSON.stringify(r)});S.current&&(S.current.value=parseInt(a.recordId),await S.current.submit()),e.recordId?u.default.success($.Edited):(u.default.success($.Added),k.setFieldValue("recordId",k.values.barcode),k.setFieldValue("barcodeId",a.recordId)),V()}}),q=!!k.values.recordId;return s.jsx(c.Z,{resourceId:h.i.Barcodes,form:k,maxAccess:r,editMode:q,children:s.jsx(x.R,{children:s.jsx(I.Q,{children:(0,s.jsxs)(l(),{container:!0,spacing:2,children:[s.jsx(l(),{item:!0,xs:8,children:(0,s.jsxs)(l(),{container:!0,spacing:2,children:[s.jsx(l(),{item:!0,xs:12,children:s.jsx(y.U,{endpointId:g.$.Item.snapshot,name:"itemId",label:e?.sku,readOnly:q||!!a?._reference&&!!a?._name,valueField:"recordId",displayField:"sku",valueShow:"sku",secondValueShow:"itemName",form:k,columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}],onChange:(e,r)=>{k.setFieldValue("itemId",r?.recordId),k.setFieldValue("itemName",r?.name),k.setFieldValue("sku",r?.sku),k.setFieldValue("itemRef",r?.sku),k.setFieldValue("msId",r?.msId),k.setFieldValue("scaleDescription",r?.name),k.setFieldValue("posDescription",r?.name)},maxAccess:r,required:!0,displayFieldWidth:2})}),s.jsx(l(),{item:!0,xs:12,children:s.jsx(j.Z,{name:"barcode",label:e?.barcode,value:k?.values?.barcode,maxLength:"20",readOnly:q,required:!0,maxAccess:A,onChange:k.handleChange,onClear:()=>k.setFieldValue("barcode",""),error:k.touched.barcode&&!!k.errors.barcode})}),s.jsx(l(),{item:!0,xs:12,children:s.jsx(p.Z,{endpointId:g.$.MeasurementUnit.qry,parameters:k?.values?.msId?`_msId=${k?.values?.msId}`:"",readOnly:!k?.values?.msId,name:"muId",label:e?.msUnit,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:k.values,onChange:(e,r)=>{k.setFieldValue("muId",r?.recordId)},error:k.touched.muId&&!!k.errors.muId,maxAccess:r})})]})}),s.jsx(l(),{item:!0,xs:4,children:s.jsx(o.Z,{ref:S,resourceId:h.i.Barcodes,seqNo:0,recordId:k.values.barcodeId})}),s.jsx(l(),{item:!0,xs:12,children:s.jsx(b.Z,{name:"defaultQty",label:e?.defaultQty,value:k?.values?.defaultQty,maxAccess:r,onChange:k.handleChange,onClear:()=>k.setFieldValue("defaultQty",""),error:k.touched.defaultQty&&!!k.errors.defaultQty})}),s.jsx(l(),{item:!0,xs:12,children:s.jsx(j.Z,{name:"scaleDescription",label:e?.scaleDescription,value:k.values.scaleDescription,maxAccess:r,maxLength:"20",onChange:k.handleChange,onClear:()=>k.setFieldValue("scaleDescription",""),error:k.touched.scaleDescription&&!!k.errors.scaleDescription})}),s.jsx(l(),{item:!0,xs:12,children:s.jsx(j.Z,{name:"posDescription",label:e?.posDescription,value:k.values.posDescription,maxAccess:r,maxLength:"25",onChange:k.handleChange,onClear:()=>k.setFieldValue("posDescription",""),error:k.touched.posDescription&&!!k.errors.posDescription})}),s.jsx(l(),{item:!0,xs:12,children:s.jsx(D.Z,{name:"isInactive",value:k.values?.isInactive,onChange:e=>k.setFieldValue("isInactive",e.target.checked),label:e?.isInactive,maxAccess:r})})]})})})})}[c,o,u,m,p,v,y,N,w]=C.then?(await C)():C,F.width=750,F.height=500,t()}catch(e){t(e)}})}};