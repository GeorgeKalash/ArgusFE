"use strict";exports.id=44438,exports.ids=[44438],exports.modules={44438:(e,a,l)=>{l.a(e,async(e,r)=>{try{l.d(a,{Z:()=>B});var d=l(20997),i=l(99155),n=l.n(i),s=l(16689),t=l(44619),c=l(61274),o=l(75609),m=l(70305),u=l(79390),h=l(27736),f=l(71278),y=l(80582),N=l(79660),I=l(6416),x=l(65980),p=l(97969),v=l(65305),g=l(29352),b=l(86201),F=l(38509),C=l(95965),_=l(74548),j=l(30967),Z=l(18611),L=l(16774),V=l(82204),D=l(8995),k=l(67906),q=l(42020),R=l(60520),A=l(96119),P=e([c,m,f,y,g,b,F,R]);[c,m,f,y,g,b,F,R]=P.then?(await P)():P;let O=({viewBtns:e=!0,client:a,dispersalType:l,beneficiary:r,submitted:i,setSubmitted:P,corId:O,currencyId:B,countryId:w,resetForm:S,setResetForm:$,onChange:E,setValidSubmit:T,onSuccess:W,submitMainForm:M=!0,recordId:J,forceDisable:G,forceEdit:U=null,window:z})=>{let[H,K]=(0,s.useState)({record:[]}),{stack:Q}=(0,m.V)(),{getRequest:X,postRequest:Y}=(0,s.useContext)(g.$),[ee,ea]=(0,s.useState)(!0),el=(0,s.useRef)(!1),er=(0,s.useRef)(!1),{platformLabels:ed}=(0,s.useContext)(R.l);(0,A.Z)({title:ed.cash,window:z});let ei={clientId:a?.clientId||"",recordId:J,beneficiaryId:0,name:"",dispersalType:l||"",nationalityId:null,isBlocked:!1,isInactive:!1,stoppedDate:null,stoppedReason:"",gender:null,rtName:"",rtId:null,cobId:"",cellPhone:"",birthDate:null,currencyId:B||null,addressLine1:"",addressLine2:"",clientRef:a?.clientRef||"",clientName:a?.clientName||"",countryId:w||"",seqNo:1,firstName:"",lastName:"",middleName:"",familyName:"",fl_firstName:"",fl_lastName:"",fl_middleName:"",fl_familyName:"",birthPlace:"",seqNo:1},{formik:en}=(0,C.c)({maxAccess:H,initialValues:ei,validationSchema:o.object({clientId:o.string().required(),countryId:o.string().required(),name:o.string().required(),firstName:o.string().required(),lastName:o.string().required(),currencyId:o.string().required()}),onSubmit:async e=>{if(M){let a={clientId:e.clientId,beneficiaryId:e.beneficiaryId,gender:e.gender,name:e.name,rtId:e.rtId,dispersalType:e.dispersalType,isBlocked:e.isBlocked,isInactive:e.isInactive,stoppedDate:e.stoppedDate?(0,u.ku)(e.stoppedDate):null,stoppedReason:e.stoppedReason,nationalityId:e.nationalityId,cobId:e.cobId,birthDate:e.birthDate?(0,u.ku)(e.birthDate):null,currencyId:e.currencyId,cellPhone:e.cellPhone,addressLine1:e.addressLine1,addressLine2:e.addressLine2,clientRef:e.clientRef,clientName:e.clientName,countryId:e.countryId,seqNo:e.seqNo},l={clientId:e.clientId,beneficiaryId:e.beneficiaryId,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,familyName:e.familyName,fl_firstName:e.fl_firstName,fl_lastName:e.fl_lastName,fl_middleName:e.fl_middleName,fl_familyName:e.fl_familyName,birthPlace:e.birthPlace,seqNo:e.seqNo},r=await Y({extension:v.N.BeneficiaryCash.set,record:JSON.stringify({header:a,beneficiaryCash:l})});b.default.success(ed.Added);let[d,i,n]=r.recordId.split(",");en.setFieldValue("recordId",(100*d).toString()+(10*i).toString()+n),W&&W(r.recordId,e)}}}),es=null==U?!!en.values.recordId:U,{labels:et}=(0,F.J)({datasetId:I.i.BeneficiaryCash});(0,s.useEffect)(()=>{!async function(){if(en.values.countryId&&l){let e={record:{controls:(await X({extension:_.d.CorrespondentControl.qry,parameters:`_countryId=${en.values.countryId}&_corId=${O||0}&_resourceId=${I.i.BeneficiaryCash}`})).list}};K(e);let a=(e?.record?.controls??[]).find(({controlId:e})=>"isInactive"===e),l=(e?.record?.controls??[]).find(({controlId:e})=>"isBlocked"===e);el.current=a?.accessLevel===V.A1,er.current=l?.accessLevel===V.A1}}()},[en.values.countryId]),(0,s.useEffect)(()=>{!async function(){if(J&&a?.clientId&&r?.beneficiaryId&&r?.beneficiarySeqNo){let e=await X({extension:v.N.BeneficiaryCash.get,parameters:`_clientId=${a?.clientId}&_beneficiaryId=${r?.beneficiaryId}&_seqNo=${r?.beneficiarySeqNo}`}),d=await X({extension:v.N.Beneficiary.get,parameters:`_clientId=${a?.clientId}&_beneficiaryId=${r?.beneficiaryId}&_seqNo=${r?.beneficiarySeqNo}`});e?.record?.firstName||ea(!1);let i={clientId:a?.clientId,recordId:J,beneficiaryId:r?.beneficiaryId,name:d?.record?.name,dispersalType:l,nationalityId:d?.record?.nationalityId,isBlocked:d?.record?.isBlocked,isInactive:d?.record?.isInactive,stoppedDate:d?.record?.stoppedDate&&(0,u.a1)(d.record.stoppedDate),stoppedReason:d?.record?.stoppedReason,gender:d?.record?.gender,rtId:d?.record?.rtId,cobId:d?.record?.cobId,cellPhone:d?.record?.cellPhone,birthDate:d?.record?.birthDate&&(0,u.a1)(d.record.birthDate),currencyId:d?.record?.currencyId,addressLine1:d?.record?.addressLine1,addressLine2:d?.record?.addressLine2,clientRef:d?.record?.clientRef,clientName:d?.record?.clientName,countryId:d?.record?.countryId,seqNo:d?.record?.seqNo,firstName:e?.record?.firstName,lastName:e?.record?.lastName,middleName:e?.record?.middleName,familyName:e?.record?.familyName,fl_firstName:e?.record?.fl_firstName,fl_lastName:e?.record?.fl_lastName,fl_middleName:e?.record?.fl_middleName,fl_familyName:e?.record?.fl_familyName,birthPlace:e?.record?.birthPlace,seqNo:e?.record?.seqNo};en.setValues(i)}}()},[J]),(0,s.useEffect)(()=>{S&&(en.resetForm(),$(!1))},[S]),(0,s.useEffect)(()=>{let e=en.values,a={clientId:e.clientId,beneficiaryId:e.beneficiaryId,gender:e.gender,rtId:e.rtId,name:e.name,dispersalType:e.dispersalType,isBlocked:e.isBlocked,isInactive:e.isInactive,stoppedDate:e.stoppedDate?(0,u.ku)(e.stoppedDate):null,stoppedReason:e.stoppedReason,nationalityId:e.nationalityId,cobId:e.cobId,birthDate:e.birthDate?(0,u.ku)(e.birthDate):null,currencyId:e.currencyId,cellPhone:e.cellPhone,addressLine1:e.addressLine1,addressLine2:e.addressLine2,clientRef:e.clientRef,clientName:e.clientName,countryId:e.countryId,seqNo:e.seqNo},l={clientId:e.clientId,beneficiaryId:e.beneficiaryId,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,familyName:e.familyName,fl_firstName:e.fl_firstName,fl_lastName:e.fl_lastName,fl_middleName:e.fl_middleName,fl_familyName:e.fl_familyName,birthPlace:e.birthPlace,seqNo:e.seqNo};E&&E({header:a,beneficiaryCash:l})},[en.values]),(0,s.useEffect)(()=>{if(!M){let e=0!==Object.keys(en.errors).length;if(e){P(!1),en.handleSubmit();return}i&&!e&&T(!0)}},[i]);let ec=e=>{var a=e?.name;let l=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(a);if(a){let{firstName:e,middleName:r,lastName:d,familyName:i}=eo(a);l?(en.setFieldValue("fl_firstName",e),en.setFieldValue("fl_middleName",r),en.setFieldValue("fl_lastName",d),en.setFieldValue("fl_familyName",i),en.setFieldValue("firstName",""),en.setFieldValue("middleName",""),en.setFieldValue("lastName",""),en.setFieldValue("familyName",""),ea(!1)):(en.setFieldValue("firstName",e),en.setFieldValue("middleName",r),en.setFieldValue("lastName",d),en.setFieldValue("familyName",i),en.setFieldValue("fl_firstName",""),en.setFieldValue("fl_middleName",""),en.setFieldValue("fl_lastName",""),en.setFieldValue("fl_familyName",""),ea(!0))}},eo=e=>{let a=e.trim().split(/\s+/);if(!es){if(2===a.length)return{firstName:a[0],middleName:"",lastName:a[1],familyName:""};if(3===a.length)return{firstName:a[0],middleName:a[1],lastName:a[2],familyName:""};if(a.length>3){let e=a.shift(),l=a.pop(),r=a.slice(0,-1).join(" ")||"",d=a[a.length-1]||"";return{firstName:e,middleName:r,lastName:d,familyName:l}}return{firstName:a[0]||"",middleName:"",lastName:"",familyName:""}}};return d.jsx(y.Z,{resourceId:I.i.BeneficiaryCash,form:en,editMode:es,maxAccess:H,disabledSubmit:es,isCleared:!G&&e,isSaved:e,children:d.jsx(Z.R,{children:d.jsx(q.g,{children:(0,d.jsxs)(n(),{container:!0,spacing:2,children:[d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(c.U,{endpointId:j.u.ClientCorporate.snapshot,parameters:{_category:0},valueField:"reference",displayField:"name",name:"clientId",label:et.client,form:en,required:!0,readOnly:es,displayFieldWidth:2,valueShow:"clientRef",secondValueShow:"clientName",maxAccess:H,columnsInDropDown:[{key:"reference",value:"Ref."},{key:"name",value:"Name"},{key:"cellPhone",value:"Cell Phone"}],onChange:async(e,a)=>{if(a?.status==-1){Q({message:"Chosen Client Must Be Active."});return}en.setFieldValue("clientId",a?a.recordId:""),en.setFieldValue("clientName",a?a.name:""),en.setFieldValue("clientRef",a?a.reference:"")},errorCheck:"clientId"})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(f.Z,{endpointId:N.r.Country.qry,name:"countryId",label:et.benCountry,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],displayFieldWidth:.8,readOnly:en.values.countryId&&es||w||es,values:en.values,onChange:(e,a)=>{en.setFieldValue("countryId",a?a.recordId:"")},error:en.touched.countryId&&!!en.errors.countryId,maxAccess:H,required:!0})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(f.Z,{endpointId:N.r.Currency.qry,name:"currencyId",label:et.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],displayFieldWidth:.8,values:en.values,required:!0,readOnly:en.values.currencyId&&es||B||es,maxAccess:H,onChange:(e,a)=>{en.setFieldValue("currencyId",a?.recordId||null)},error:en.touched.currencyId&&!!en.errors.currencyId})}),d.jsx(n(),{item:!0,xs:6}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(t.Z,{name:"name",label:et.name,value:en.values?.name,maxLength:"50",required:!0,onChange:en.handleChange,onBlur:e=>{es||ec(en.values)},error:en.touched.name&&!!en.errors.name,maxAccess:H,readOnly:es})}),d.jsx(n(),{item:!0,xs:6}),d.jsx(n(),{item:!0,xs:12,children:(0,d.jsxs)(n(),{container:!0,spacing:2,children:[d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"firstName",label:et.firstName,value:en.values?.firstName,required:!0,readOnly:ee||es,onChange:en.handleChange,maxLength:"20",onClear:()=>en.setFieldValue("firstName",""),error:en.touched.firstName&&!!en.errors.firstName,maxAccess:H})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"middleName",label:et.middleName,value:en.values?.middleName,readOnly:!0,onChange:en.handleChange,maxLength:"20",onClear:()=>en.setFieldValue("middleName",""),error:en.touched.middleName&&!!en.errors.middleName,maxAccess:H})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"lastName",label:et.lastName,value:en.values?.lastName,required:!0,readOnly:ee||es,onChange:en.handleChange,maxLength:"20",onClear:()=>en.setFieldValue("lastName",""),error:en.touched.lastName&&!!en.errors.lastName,maxAccess:H})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"familyName",label:et.familyName,value:en.values?.familyName,readOnly:!0,onChange:en.handleChange,maxLength:"20",onClear:()=>en.setFieldValue("familyName",""),error:en.touched.familyName&&!!en.errors.familyName,maxAccess:H})})]})}),d.jsx(n(),{item:!0,xs:12,children:(0,d.jsxs)(n(),{container:!0,sx:{flexDirection:"row-reverse"},spacing:2,children:[d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"fl_firstName",label:et.flFirstName,value:en.values?.fl_firstName,readOnly:!0,onChange:en.handleChange,maxLength:"20",dir:"rtl",onClear:()=>en.setFieldValue("fl_firstName",""),error:en.touched.fl_firstName&&!!en.errors.fl_firstName,maxAccess:H})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"fl_middleName",label:et.flMiddleName,value:en.values?.fl_middleName,readOnly:!0,maxLength:"20",onChange:en.handleChange,dir:"rtl",onClear:()=>en.setFieldValue("fl_familyName",""),error:en.touched.fl_middleName&&!!en.errors.fl_middleName,maxAccess:H})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"fl_lastName",label:et.flLastName,value:en.values?.fl_lastName,readOnly:!0,onChange:en.handleChange,maxLength:"20",dir:"rtl",onClear:()=>en.setFieldValue("fl_lastName",""),error:en.touched.fl_lastName&&!!en.errors.fl_lastName,maxAccess:H})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:3,children:d.jsx(t.Z,{name:"fl_familyName",label:et.flFamilyName,value:en.values?.fl_familyName,readOnly:!0,maxLength:"20",maxAccess:H,onChange:en.handleChange,dir:"rtl",onClear:()=>en.setFieldValue("fl_familyName",""),error:en.touched.fl_familyName&&!!en.errors.fl_familyName})})]})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(f.Z,{endpointId:N.r.Country.qry,name:"nationalityId",label:et.nationality,valueField:"recordId",displayField:["reference","name","flName"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],displayFieldWidth:.8,values:en.values,onChange:(e,a)=>{a?en.setFieldValue("nationalityId",a?.recordId):en.setFieldValue("nationalityId","")},error:en.touched.nationalityId&&!!en.errors.nationalityId,maxAccess:H,readOnly:es})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(h.Z,{name:"birthDate",label:et.birthDate,value:en.values?.birthDate,onChange:en.setFieldValue,disabledDate:">=",onClear:()=>en.setFieldValue("birthDate",""),error:en.touched.birthDate&&!!en.errors.birthDate,maxAccess:H,readOnly:es})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(f.Z,{endpointId:N.r.Country.qry,name:"cobId",label:et.countryOfBirth,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],displayFieldWidth:.8,values:en.values,onChange:(e,a)=>{en.setFieldValue("cobId",a?a.recordId:"")},error:en.touched.cobId&&!!en.errors.cobId,maxAccess:H,readOnly:es})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(t.Z,{name:"birthPlace",label:et.birthPlace,value:en.values?.birthPlace,onChange:en.handleChange,maxLength:"50",onClear:()=>en.setFieldValue("birthPlace",""),error:en.touched.birthPlace&&!!en.errors.birthPlace,maxAccess:H,readOnly:es})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(t.Z,{name:"cellPhone",phone:!0,label:et.cellPhone,value:en.values?.cellPhone,onChange:en.handleChange,maxLength:"20",onClear:()=>en.setFieldValue("cellPhone",""),error:en.touched.cellPhone&&!!en.errors.cellPhone,maxAccess:H,readOnly:es})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(f.Z,{datasetId:p.v.GENDER,name:"gender",label:et.gender,valueField:"key",displayField:"value",values:en.values,onChange:(e,a)=>{en.setFieldValue("gender",a?a.key:"")},maxAccess:H,error:en.touched.gender&&!!en.errors.gender,readOnly:es})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(x.Z,{name:"addressLine1",label:et.addressLine1,value:en.values.addressLine1,rows:3,maxLength:"100",maxAccess:H,onChange:en.handleChange,onClear:()=>en.setFieldValue("addressLine1",""),error:en.touched.addressLine1&&!!en.errors.addressLine1,readOnly:es})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(x.Z,{name:"addressLine2",label:et.addressLine2,value:en.values.addressLine2,rows:3,maxLength:"100",maxAccess:H,onChange:en.handleChange,onClear:()=>en.setFieldValue("addressLine2",""),error:en.touched.addressLine2&&!!en.errors.addressLine2,readOnly:es})}),!el.current&&d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(k.Z,{name:"isInactive",value:en.values.isInactive,onChange:e=>en.setFieldValue("isInactive",e.target.checked),label:et.isInactive,maxAccess:H,disabled:!0})}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(f.Z,{endpointId:D.u.RelationType.qry,name:"rtId",label:et.relationType,displayField:"name",valueField:"recordId",values:en.values,onChange:(e,a)=>{en.setFieldValue("rtId",a?a?.recordId:"")},maxAccess:H,error:en.touched.rtId&&!!en.errors.rtId,readOnly:es})}),!er.current&&d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(k.Z,{name:"isBlocked",value:en.values?.isBlocked,onChange:e=>en.setFieldValue("isBlocked",e.target.checked),label:et.isBlocked,maxAccess:H,disabled:!0})}),d.jsx(n(),{item:!0,xs:6}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(h.Z,{name:"stoppedDate",label:et.stoppedDate,value:en.values?.stoppedDate,readOnly:!0,error:en.touched.stoppedDate&&!!en.errors.stoppedDate,maxAccess:H})}),d.jsx(n(),{item:!0,xs:6}),d.jsx(L.Z,{item:!0,hideonempty:!0,xs:6,children:d.jsx(x.Z,{name:"stoppedReason",label:et.stoppedReason,readOnly:!0,value:en.values.stoppedReason,rows:3,error:en.touched.stoppedReason&&!!en.errors.stoppedReason,maxAccess:H})})]})})})})};O.width=700,O.height=500;let B=O;r()}catch(e){r(e)}})}};