exports.id=77224,exports.ids=[77224],exports.modules={3:e=>{e.exports={root:"WorkFlow_root__EINm1"}},2728:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(r,{Z:()=>j});var n=t(20997),d=t(99155),l=t.n(d),s=t(16689),o=t(75609),i=t(86201),c=t(29352),u=t(44619),m=t(95965),h=t(60520),p=t(18611),y=t(27736),I=t(71278),f=t(79660),v=t(68728),x=t(65980),g=t(86794),b=t(42020),w=t(61274),k=t(13567),N=t(18687),F=e([i,c,h,I,g,w,N]);function j({labels:e,maxAccess:r,recordId:t,form:a,window:d}){let{getRequest:F,postRequest:j}=(0,s.useContext)(c.$),{platformLabels:C,defaultsData:S}=(0,s.useContext)(h.l),{documentType:q,maxAccess:V,changeDT:R}=(0,g.H)({functionId:v.J.PurchaseInvoice,access:r,enabled:!t}),O=parseInt(S?.list?.find(e=>"PUCurrencyId"===e.key)?.value),{formik:Q}=(0,m.c)({documentType:{key:"dtId",value:q?.dtId},initialValues:{reference:a?.values?.header?.reference,plantId:a?.values?.header?.plantId,vendorId:a?.values?.header?.vendorId,vendorRef:a?.values?.header?.vendorRef,vendorName:a?.values?.header?.vendorName,date:new Date,dtId:null,currencyName:null,currencyId:O,plantName:a?.values?.header?.plantName,description:"",shipments:[a?.values?.recordId]},maxAccess:V,validateOnChange:!0,validationSchema:o.object({plantId:o.number().required(),dtId:o.number().required(),date:o.string().required(),currencyName:o.string().required()}),onSubmit:async e=>{await j({extension:k.y.PurchaseInvoiceHeader.generate,record:JSON.stringify(e)}).then(e=>{i.default.success(C.Saved),a.setFieldValue("header.invoiceId",e.recordId),d.close()})}});return n.jsx(N.Z,{onSave:Q.handleSubmit,maxAccess:V,actions:[{key:"Generate Invoice",condition:!0,onClick:()=>Q.handleSubmit()}],isSaved:!1,children:n.jsx(p.R,{children:n.jsx(b.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(I.Z,{endpointId:f.r.DocumentType.qry,parameters:`_dgId=${v.J.PurchaseInvoice}&_startAt=0&_pageSize=1000`,name:"dtId",label:e.docType,valueField:"recordId",displayField:"name",values:Q.values,onChange:(e,r)=>{Q.setFieldValue("dtId",r?.recordId||null),R(r)},error:Q.touched.dtId&&!!Q.errors.dtId,maxAccess:V,required:!0})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"date",label:e.date,value:Q.values?.date,required:!0,onChange:Q.setFieldValue,onClear:()=>Q.setFieldValue("date",null),error:Q.touched.header?.date&&!!Q.errors.header?.date,maxAccess:V})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(I.Z,{endpointId:f.r.Plant.qry,name:"plantId",label:e.plant,valueField:"recordId",displayField:["reference","name"],values:Q.values,readOnly:!0})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(w.U,{endpointId:k.y.Vendor.snapshot,filter:{isInactive:!1},valueField:"reference",displayField:"name",secondFieldLabel:e.vendor,name:"vendorId",label:e.vendor,form:Q,required:!0,readOnly:!0,valueShow:"vendorRef",secondValueShow:"vendorName",errorCheck:"vendorId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(u.Z,{name:"currencyName",required:!0,label:e.currency,value:Q.values.currencyName,readOnly:!0,error:Q.touched.currencyName&&!!Q.errors.currencyName})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(u.Z,{name:"reference",label:e.shipmentRef,value:Q.values.reference,readOnly:!0})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{name:"description",label:e.description,value:Q.values.description,maxAccess:V,onChange:Q.handleChange,onClear:()=>Q.setFieldValue("description",""),error:Q.touched.description&&!!Q.errors.description})})]})})})})}[i,c,h,I,g,w,N]=F.then?(await F)():F,a()}catch(e){a(e)}})},77224:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(r,{Z:()=>L});var n=t(20997),d=t(99155),l=t.n(d),s=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(15051),m=t(29352),h=t(6416),p=t(70305),y=t(44619),I=t(95965),f=t(60520),v=t(18611),x=t(23385),g=t(27736),b=t(71278),w=t(79660),k=t(68728),N=t(65980),F=t(86794),j=t(79390),C=t(42020),S=t(677),q=t(54242),V=t(61274),R=t(70638),O=t(2728),Q=t(13567),A=t(91184),D=t(38509),Z=t(38782),$=t(96119),_=e([i,c,u,m,p,f,b,F,S,V,R,O,D,Z]);function L({recordId:e,window:r}){let{getRequest:a,postRequest:d}=(0,s.useContext)(m.$),{platformLabels:_,userDefaultsData:L,defaultsData:T}=(0,s.useContext)(f.l),{stack:P}=(0,S.zY)(),W=(0,s.useRef)([]),J=(0,s.useRef)([]),E=(0,s.useRef)([]),[U,z]=(0,s.useState)([]),{stack:G}=(0,p.V)(),H=(0,D.E)({endpointId:Q.y.Shipment.page}),{labels:M,access:B}=(0,Z.Z)({datasetId:h.i.Shipments});(0,$.Z)({title:M.shipment,window:r});let{documentType:K,maxAccess:X,changeDT:Y}=(0,F.H)({functionId:k.J.Shipment,access:B,enabled:!e,objectName:"header"}),ee=parseInt(L?.list?.find(e=>"plantId"===e.key)?.value)||null,er=parseInt(L?.list?.find(e=>"siteId"===e.key)?.value)||null,et=parseInt(T?.list?.find(e=>"POSHPVarPct"===e.key)?.value)||0,{formik:ea}=(0,I.c)({documentType:{key:"header.dtId",value:K?.dtId,reference:K?.reference},initialValues:{recordId:e||null,header:{reference:"",recordId:null,date:new Date,dtId:null,status:1,plantId:ee,siteId:er,vendorId:null,volume:0,qty:0,weight:0,notes:"",invoiceId:null,poRef:"",vendorName:"",vendorRef:""},items:[{id:1,seqNo:1,itemId:null,sku:"",itemName:"",qty:null,pendingQty:null,shippedNowQty:null,shipmentId:null,poSeqNo:null,volume:null,weight:null,poId:e||0,poRef:"",siteId:null,siteRef:"",siteName:"",status:null,unitCost:null,trackBy:null,lotCategoryId:null,muName:"",muId:null,muRef:"",msId:null,baseQty:0,muQty:0,shipmentId:null,lotButton:!0}]},maxAccess:X,validateOnChange:!0,validationSchema:o.object({header:o.object({plantId:o.number().required(),date:o.date().required(),siteId:o.number().required(),vendorId:o.number().required()}),items:o.array().of(o.object({poRef:o.string().required(),sku:o.string().required(),itemName:o.string().required(),shippedNowQty:o.number().required(),siteName:o.string().required()}))}),onSubmit:async r=>{let t={header:{...r.header,date:(0,j.ku)(r.header.date)},items:ea.values.items.map((e,r)=>({...e,id:r+1,seqNo:r+1,qty:e.shippedNowQty,shipmentId:ea?.values?.recordId||0}))},a=await d({extension:Q.y.Shipment.set2,record:JSON.stringify(t)});ea.setFieldValue("recordId",a.recordId),ea.setFieldValue("header.recordId",a.recordId),await ei(a.recordId),e?c.default.success(_.Edited):c.default.success(_.Added),H()}}),{totalQty:en,totalVolume:ed,totalWeight:el}=ea?.values?.items?.reduce((e,r)=>{let t=parseFloat(r?.shippedNowQty)||0,a=parseFloat(r?.volume)||0,n=parseFloat(r?.weight)||0;return{totalQty:e?.totalQty+t,totalVolume:e?.totalVolume+a,totalWeight:e?.totalWeight+n}},{totalQty:0,totalVolume:0,totalWeight:0}),es=ea.values.header?.status===3,eo=!!ea.values.header?.recordId;async function ei(e){let r=await ec(e);r.record.date=(0,j.a1)(r.record.date);let t=await eu(r?.record);await em(r,t)}async function ec(e){if(e)return await a({extension:Q.y.Shipment.get,parameters:`_recordId=${e}`})}let eu=async e=>{if(e.recordId)return await a({extension:Q.y.ShipmentItem.qry,parameters:`_shipmentId=${e.recordId}`})};async function em(e,r){let t=ea.initialValues.items;r.list!=[]&&(t=await Promise.all(r.list.map((e,r)=>({...e,id:r+1,seqNo:r+1,date:(0,j.a1)(e.date),shippedNowQty:e.qty})))),ea.setValues({...ea.values,recordId:e.record.recordId,dtId:e.record.dtId,header:{...e.record},items:t}),ev(e.record.vendorId)}let eh=async()=>{await d({extension:Q.y.Shipment.post,record:JSON.stringify(ea.values.header)}),c.default.success(_.Posted),H(),await ei(ea.values.recordId)},ep=async()=>{await d({extension:Q.y.Shipment.unpost,record:JSON.stringify(ea.values.header)}),c.default.success(_.Unposted),H(),await ei(ea.values.recordId)},ey=async()=>{P({Component:R.Z,props:{functionId:k.J.Shipment,recordId:ea.values.header.recordId}})};async function eI(){P({Component:O.Z,props:{form:ea,labels:M,maxAccess:X,recordId:e},width:500,height:550,title:_.GenerateInvoice})}let ef=[{key:"Locked",condition:es,onClick:"onUnpostConfirmation",onSuccess:ep,disabled:!eo},{key:"Unlocked",condition:!es,onClick:eh,disabled:!eo},{key:"WorkFlow",condition:!0,onClick:ey,disabled:!eo},{key:"generateIV",condition:!0,onClick:eI,disabled:!es||ea?.values?.header?.invoiceId},{key:"GL",condition:!0,onClick:"onClickGL",valuesPath:ea.values.header,datasetId:h.i.GLShipments,disabled:!eo},{key:"IV",condition:!0,onClick:"onInventoryTransaction",disabled:!eo||!es},{key:"Attachment",condition:!0,onClick:"onClickAttachment",disabled:!eo},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!eo}];async function ev(e){e?await a({extension:Q.y.UnpostedOrderPack.get,parameters:`_vendorId=${e}`}).then(e=>{W.current=e.record}):W.current=[]}let ex=e=>{if(!W?.current?.items?.length)return[];let r=(W?.current?.items).filter(r=>r.poId===e).map(({poId:e,poSeqNo:r,itemId:t,sku:a,itemName:n,qty:d,trackBy:l,lotCategoryId:s,msId:o,isInactive:i})=>({poId:e,poSeqNo:r,itemId:t,sku:a,itemName:n,qty:d,trackBy:l,lotCategoryId:s,msId:o,isInactive:i}));J.current=r};async function eg(e,r){if(!e)return;let t=U?.filter(e=>e.msId===r)||[];E.current=t}let eb=[{component:"resourcecombobox",label:M.reference,name:"poRef",props:{store:W?.current?.orders,displayField:"reference",valueField:"reference",readOnly:es,mapping:[{from:"poId",to:"poId"},{from:"reference",to:"poRef"}],columnsInDropDown:[{key:"reference",value:"Reference"}],displayFieldWidth:1},async onChange({row:{newRow:e}}){ex(e?.poId)},propsReducer:({row:e,props:r})=>({...r,readOnly:!!e.poId})},{component:"resourcecombobox",label:M.sku,name:"sku",flex:1,propsReducer:({row:e,props:r})=>({...r,readOnly:!!e.shipmentId&&!!e.poId&&!!e.sku}),props:{store:J?.current,displayField:"sku",valueField:"sku",mapping:[{from:"itemId",to:"itemId"},{from:"sku",to:"sku"},{from:"itemName",to:"itemName"},{from:"msId",to:"msId"},{from:"poSeqNo",to:"poSeqNo"},{from:"qty",to:"qty"},{from:"qty",to:"shippedNowQty"},{from:"trackBy",to:"trackBy"},{from:"lotCategoryId",to:"lotCategoryId"},{from:"isInactive",to:"isInactive"}],columnsInDropDown:[{key:"sku",value:"SKU"},{key:"itemName",value:"Item Name"}],displayFieldWidth:2},async onChange({row:{update:e,newRow:r}}){if(!r.itemId){E.current=[],e({muRef:null,muId:null,baseQty:0,muQty:0});return}if(r.isInactive){e({...ea.initialValues.items[0],poId:r?.poId,poRef:r?.poRef,id:r.id}),G({message:M.inactiveItem});return}eg(r?.itemId,r?.msId),e({muRef:E?.current?.[0]?.reference||null,muId:E?.current?.[0]?.recordId||null,muQty:E?.current?.[0]?.qty||0,baseQty:E?.current?.[0]?.qty||r?.qty})}},{component:"textfield",label:M.itemName,name:"itemName",props:{readOnly:!0}},{component:"resourcecombobox",label:M.MU,name:"muRef",props:{readOnly:es,store:E?.current,displayField:"reference",valueField:"recordId",mapping:[{from:"reference",to:"muRef"},{from:"name",to:"muName"},{from:"qty",to:"muQty"},{from:"recordId",to:"muId"}]},async onChange({row:{update:e,newRow:r}}){r&&(r.muId?e({baseQty:r?.qty*r?.muQty}):e({baseQty:0}))},propsReducer({row:e,props:r}){let t=[];return e?.itemId&&(eg(e?.itemId,e?.msId),t=E?.current),{...r,store:t}}},{component:"numberfield",label:M.qty,name:"shippedNowQty",props:{readOnly:es},updateOn:"blur",async onChange({row:{update:e,oldRow:r,newRow:t}}){ew(t?.shippedNowQty,t,e),t?.muQty?e({baseQty:t?.muQty*t?.shippedNowQty}):e({baseQty:t?.shippedNowQty})}},{component:"button",hidden:!0,name:"lotButton",props:{imgSrc:t(16487).default.src},label:M.lot,onClick:(e,r)=>{}},{component:"resourcecombobox",label:M.site,name:"siteName",props:{endpointId:q.$.Site.qry,displayField:"name",valueField:"recordId",readOnly:es,mapping:[{from:"recordId",to:"siteId"},{from:"reference",to:"siteRef"},{from:"name",to:"siteName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}]}}],ew=(e,r,t)=>{if(!e)return;let a=r?.qty*(et/100),n=r?.qty+a,d=r?.pendingQty+a,l={shippedNowQty:e};r?.pendingQty?e>d?l={shippedNowQty:0}:e<0&&(l={qty:0}):e>n?l={shippedNowQty:0}:e<0&&(l={qty:0}),t(l)};return n.jsx(i.Z,{resourceId:h.i.Shipments,form:ea,maxAccess:X,editMode:eo,actions:ef,functionId:k.J.Shipment,disabledSubmit:es,previewReport:eo,children:(0,n.jsxs)(v.R,{children:[n.jsx(C.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:8,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:6,children:n.jsx(b.Z,{endpointId:w.r.DocumentType.qry,parameters:`_dgId=${k.J.Shipment}&_startAt=0&_pageSize=1000`,name:"header.dtId",label:M.docType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:eo,valueField:"recordId",displayField:["reference","name"],values:ea.values.header,onChange:(e,r)=>{ea.setFieldValue("header.dtId",r?.recordId||""),Y(r)},error:ea.touched.header?.dtId&&!!ea.errors.header?.dtId,maxAccess:X})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(g.Z,{name:"header.date",label:M.date,value:ea.values?.header?.date,onChange:ea.setFieldValue,onClear:()=>ea.setFieldValue("header.date",""),readOnly:es,error:ea.touched.header?.date&&!!ea.errors.header?.date,maxAccess:X,required:!0})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(y.Z,{name:"header.reference",label:M.reference,value:ea.values.header?.reference,readOnly:eo,maxAccess:X,onChange:ea.handleChange,onClear:()=>ea.setFieldValue("header.reference",""),error:ea.touched.header?.reference&&!!ea.errors.header?.reference})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(b.Z,{endpointId:w.r.Plant.qry,name:"header.plantId",label:M.plant,valueField:"recordId",readOnly:es,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:ea.values.header,onChange:(e,r)=>{ea.setFieldValue("header.plantId",r?.recordId||null),ea.setFieldValue("header.plantIdTouched",!!r?.recordId),ea.setFieldValue("header.siteId",null)},error:ea.touched?.header?.plantId&&!!ea.errors?.header?.plantId,required:!0,maxAccess:X})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(V.U,{endpointId:Q.y.Vendor.snapshot,filter:e=>!e.isInactive,valueField:"reference",displayField:"name",secondFieldLabel:M.vendor,name:"header.vendorId",label:M.vendor,formObject:ea.values.header,form:ea,required:!0,readOnly:eo,displayFieldWidth:2,valueShow:"vendorRef",secondValueShow:"vendorName",maxAccess:X,secondFieldName:"header.vendorName",onSecondValueChange:(e,r)=>{ea.setFieldValue("header.vendorName",r)},columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language"}],onChange:async(e,r)=>{ea.setFieldValue("header.vendorName",r?.name||""),ea.setFieldValue("header.vendorRef",r?.reference||""),ev(r?.recordId),r?.recordId||ea.setFieldValue("items",ea?.initialValues?.items),ea.setFieldValue("header.vendorId",r?.recordId||null)},errorCheck:"header.vendorId"})})]})}),n.jsx(l(),{item:!0,xs:4,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.Z,{endpointId:q.$.Site.qry,name:"header.siteId",label:M.site,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],filter:ea.values?.header?.plantIdTouched?e=>Number(e.plantId)===Number(ea?.values?.header?.plantId):void 0,required:!0,values:ea.values.header,valueField:"recordId",displayField:["reference","name"],maxAccess:X,readOnly:es,onChange:(e,r)=>{r?.isInactive?(G({message:M.inactiveSite}),ea.setFieldValue("header.siteId",null)):ea.setFieldValue("header.siteId",r?.recordId||null)},error:ea.touched?.header?.siteId&&!!ea.errors?.header?.siteId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(N.Z,{name:"header.notes",label:M.notes,value:ea.values.header?.notes,readOnly:es,maxAccess:X,onChange:ea.handleChange,onClear:()=>ea.setFieldValue("header.notes",""),error:ea.touched.header?.notes&&!!ea.errors.header?.notes})})]})})]})}),n.jsx(x.Q,{children:n.jsx(u._,{onChange:e=>{ea.setFieldValue("items",e)},value:ea?.values?.items,error:ea?.errors?.items,initialValues:ea?.initialValues?.items?.[0],columns:eb,maxAccess:X,name:"shippedItems",allowDelete:!es,allowAddNewLine:!es})}),n.jsx(C.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,mt:.3,children:[n.jsx(l(),{item:!0,xs:3,children:n.jsx(A.Z,{name:"totalQty",label:M.totalQty,maxAccess:X,value:en,readOnly:!0})}),n.jsx(l(),{item:!0,xs:3,children:n.jsx(A.Z,{name:"totalVolume",label:M.totalVolume,maxAccess:X,value:ed,readOnly:!0})}),n.jsx(l(),{item:!0,xs:3,children:n.jsx(A.Z,{name:"totalWeight",label:M.totalWeight,maxAccess:X,value:el,readOnly:!0})})]})})]})})}[i,c,u,m,p,f,b,F,S,V,R,O,D,Z]=_.then?(await _)():_,L.width=1300,L.height=700,a()}catch(e){a(e)}})},68624:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var a=t(79660);t(6416);var n=t(82204),d=t(75281);let l=async(e,r,t)=>{try{let a=await e({extension:r,parameters:t});return r.includes("qry")?a:a.record}catch(e){return null}},s=(e,r,t,a)=>{let d=(e=JSON.parse(JSON.stringify(e))).record.controls,l=d.find(e=>"reference"===e.controlId);return l?l.accessLevel=r?.mandatory?n.$7:n.rr:r?.mandatory?d.push({sgId:0,resourceId:"",controlId:`${a?a+".":""}reference`,accessLevel:r?.mandatory?n.$7:n.rr}):r?.readOnly?d.push({sgId:0,resourceId:"",controlId:`${a?a+".":""}reference`,accessLevel:r?.readOnly?n.rr:n.$7}):d=e.record.controls.filter(e=>"reference"!=e.controlId),t&&d.push({sgId:0,resourceId:"",controlId:`${a?a+".":""}dtId`,accessLevel:n.$7}),{...e,record:{...e.record,controls:d}}},o=async(e,r,t)=>{let n,s;switch(t){case"dtId":let o=(0,d.m)("userData"),i=o?.userId;s=`_userId=${i}&_functionId=${r}`,n=a.r.UserFunction.get;break;case"glbSysNumberRange":s=`_recordId=${r}`,n=a.r.SystemFunction.get;break;case"DocumentType":s=`_dgId=${r}&_startAt=0&_pageSize=50`,n=a.r.DocumentType.qry;break;case"DcTypNumberRange":s=`_recordId=${r}`,n=a.r.DocumentType.get;break;case"isExternal":s=`_recordId=${r}`,n=a.r.NumberRange.get;break;default:return null}return await l(e,n,s)},i=async(e,r,t,a,n=!0,d)=>{let l,i,c,u;let m=void 0===a&&r&&await o(e,r,"dtId"),h=m?.dtId,p="",y=!0;if(m&&void 0===a||"nraId"===a){if(h){let r=await o(e,h,"DcTypNumberRange");l=r?.nraId,y=!(r?.activeStatus<0),l||(p="Assign the document type to a number range")}if((!h||!y)&&n&&r){let t=await o(e,r,"DocumentType");u=t?.list?.filter(e=>e?.activeStatus===1).length>0}}if(("nraId"===a||void 0===a)&&r){if((!h||h)&&!l||l&&!y){let t=await o(e,r,"glbSysNumberRange");(l=t?.nraId)&&u&&(u=!1),y=!0}p=l||u?"":"Assign the system Function to a number range"}a>0&&!l&&(l=a),l&&y?(c=await o(e,l,"isExternal"),i={readOnly:!c?.external,mandatory:!!c?.external},t&&(t=await s(t,i,u,d))):!l&&t&&(t=await s(t,i,u,d));let I=d?`${d}.reference`:"reference";return{dtId:h,resetReference:i?.readOnly,dcTypeRequired:u,reference:{fieldName:I,isEmpty:!(c?.external===void 0||c?.external)},errorMessage:p,maxAccess:t,selectNraId:a}}},75281:(e,r,t)=>{"use strict";t.d(r,{m:()=>a});let a=e=>{let r=window.sessionStorage.getItem(e);return r?JSON.parse(r):null}},86794:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(r,{G:()=>c,H:()=>u});var n=t(49752),d=t(16689),l=t(70305),s=t(68624),o=t(29352),i=e([n,l,o]);function c({functionId:e,action:r,hasDT:t}){let{getRequest:a}=(0,d.useContext)(o.$),{stack:n}=(0,l.V)();return{proxyAction:async()=>{let d=await (0,s.Z)(a,e,"",void 0,t);d?.errorMessage?n({message:d?.errorMessage}):await r()}}}function u({functionId:e,access:r,hasDT:t,enabled:a=!0,objectName:i=""}){let{getRequest:c}=(0,d.useContext)(o.$),{stack:u}=(0,l.V)(),[m,h]=(0,d.useState)(),p=async a=>{let n=await (0,s.Z)(c,e,r,a,t,i);if(!n.errorMessage)return n;u({message:n?.errorMessage})},y=(0,n.useQuery)({retry:!1,staleTime:0,enabled:a,queryKey:[e,m,!!r,a],queryFn:m||"nraId"===m?()=>p(m):()=>p()});return{documentType:y.data,maxAccess:y?.data?.maxAccess||r,changeDT(e){h(e?.nraId||"nraId")}}}[n,l,o]=i.then?(await i)():i,a()}catch(e){a(e)}})},70638:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(r,{Z:()=>I});var n=t(20997),d=t(16689),l=t(97996),s=t(29352),o=t(73846),i=t(96119),c=t(60520),u=t(20562),m=t(3),h=t.n(m),p=e([s,o,c]);[s,o,c]=p.then?(await p)():p;let y=({functionId:e,recordId:r,window:t})=>{let{getRequest:a}=(0,d.useContext)(s.$),{languageId:m}=(0,d.useContext)(o.V),{platformLabels:p}=(0,d.useContext)(c.l),y=r+"-"+e;(0,i.Z)({title:p.WorkFlow,window:t});let{width:I}=(0,u.d)(),f=I<=1024,v=I>1024&&I<=1280,x=f?10:v?12:14,g=f?75:v?85:95,b=f?15:v?20:25,w=async()=>{var t=`_functionId=${e}&_recordId=${r}`;let n=await a({extension:l.P.WorkFlow.graph,parameters:t});return n?.record},k=e=>{let r=[],t=[],a="",n="";return e.objects.forEach(e=>{r.push({functionName:e.functionName,reference:e.reference,date:e.date})}),e.workflow.forEach(r=>{e.objects.forEach(e=>{let t=e.functionName.split(" ").join("\r\n");r.parentId===e.recordId&&r.parentFunctionId===e.functionId&&(a=e.reference+"\r\n"+e.date+"\r\n"+t,r.parentId),r.childId===e.recordId&&r.childFunctionId===e.functionId&&(n=e.reference+"\r\n"+e.date+"\r\n"+t,r.childId)}),""===a||""===n||t.push({from:a,to:n,value:1,labelText:""}),a="",n=""}),t};return(0,d.useEffect)(()=>{!async function(){var e=await w();if(e){let r=(e,r)=>{let t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,t.onload=r,document.head.appendChild(t)};r("https://cdn.amcharts.com/lib/4/core.js",()=>{r("https://cdn.amcharts.com/lib/4/charts.js",()=>{r("https://cdn.amcharts.com/lib/4/themes/animated.js",()=>{am4core.ready(()=>{let r=am4core.create(y,am4charts.SankeyDiagram),t=k(e);r.data=t,r.dataFields.fromName="from",r.dataFields.toName="to",r.dataFields.value="value",r.paddingRight=2===m?0:40,r.paddingLeft=2===m?40:0,r.tooltip.label.fontSize=x;let a=r.nodes.template;a.draggable=!1,a.inert=!0,a.clickable=!1,a.width=g,a.height=b,a.nameLabel.label.fontSize=x,a.nameLabel.locationX=2===m?.85:0,a.nameLabel.height=void 0,a.nameLabel.label.fontWeight="bold";let n=r.links.template;n.middleLine.strokeOpacity=.3,n.middleLine.stroke=am4core.color("#555"),n.middleLine.strokeWidth=5,n.middleLine.hoverable=!1,n.fillOpacity=0,n.hoverable=!0,n.hoverOnFocus=!0,n.fill=am4core.color("#A8C686"),n.isHover=!0,r.appear(1e3,100)})})})})}}()},[]),n.jsx("div",{id:y,className:h().root})};y.width=950;let I=y;a()}catch(e){a(e)}})}};