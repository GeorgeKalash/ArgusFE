exports.id=90961,exports.ids=[90961],exports.modules={3:e=>{e.exports={root:"WorkFlow_root__EINm1"}},68624:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(79660);a(6416);var n=a(82204),c=a(75281);let o=async(e,t,a)=>{try{let r=await e({extension:t,parameters:a});return t.includes("qry")?r:r.record}catch(e){return null}},s=(e,t,a,r)=>{let c=(e=JSON.parse(JSON.stringify(e))).record.controls,o=c.find(e=>"reference"===e.controlId);return o?o.accessLevel=t?.mandatory?n.$7:n.rr:t?.mandatory?c.push({sgId:0,resourceId:"",controlId:`${r?r+".":""}reference`,accessLevel:t?.mandatory?n.$7:n.rr}):t?.readOnly?c.push({sgId:0,resourceId:"",controlId:`${r?r+".":""}reference`,accessLevel:t?.readOnly?n.rr:n.$7}):c=e.record.controls.filter(e=>"reference"!=e.controlId),a&&c.push({sgId:0,resourceId:"",controlId:`${r?r+".":""}dtId`,accessLevel:n.$7}),{...e,record:{...e.record,controls:c}}},l=async(e,t,a)=>{let n,s;switch(a){case"dtId":let l=(0,c.m)("userData"),d=l?.userId;s=`_userId=${d}&_functionId=${t}`,n=r.r.UserFunction.get;break;case"glbSysNumberRange":s=`_recordId=${t}`,n=r.r.SystemFunction.get;break;case"DocumentType":s=`_dgId=${t}&_startAt=0&_pageSize=50`,n=r.r.DocumentType.qry;break;case"DcTypNumberRange":s=`_recordId=${t}`,n=r.r.DocumentType.get;break;case"isExternal":s=`_recordId=${t}`,n=r.r.NumberRange.get;break;default:return null}return await o(e,n,s)},d=async(e,t,a,r,n=!0,c)=>{let o,d,i,m;let u=void 0===r&&t&&await l(e,t,"dtId"),p=u?.dtId,h="",f=!0;if(u&&void 0===r||"nraId"===r){if(p){let t=await l(e,p,"DcTypNumberRange");o=t?.nraId,f=!(t?.activeStatus<0),o||(h="Assign the document type to a number range")}if((!p||!f)&&n&&t){let a=await l(e,t,"DocumentType");m=a?.list?.filter(e=>e?.activeStatus===1).length>0}}if(("nraId"===r||void 0===r)&&t){if((!p||p)&&!o||o&&!f){let a=await l(e,t,"glbSysNumberRange");(o=a?.nraId)&&m&&(m=!1),f=!0}h=o||m?"":"Assign the system Function to a number range"}r>0&&!o&&(o=r),o&&f?(i=await l(e,o,"isExternal"),d={readOnly:!i?.external,mandatory:!!i?.external},a&&(a=await s(a,d,m,c))):!o&&a&&(a=await s(a,d,m,c));let g=c?`${c}.reference`:"reference";return{dtId:p,resetReference:d?.readOnly,dcTypeRequired:m,reference:{fieldName:g,isEmpty:!(i?.external===void 0||i?.external)},errorMessage:h,maxAccess:a,selectNraId:r}}},75281:(e,t,a)=>{"use strict";a.d(t,{m:()=>r});let r=e=>{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null}},86794:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{G:()=>i,H:()=>m});var n=a(49752),c=a(16689),o=a(70305),s=a(68624),l=a(29352),d=e([n,o,l]);function i({functionId:e,action:t,hasDT:a}){let{getRequest:r}=(0,c.useContext)(l.$),{stack:n}=(0,o.V)();return{proxyAction:async()=>{let c=await (0,s.Z)(r,e,"",void 0,a);c?.errorMessage?n({message:c?.errorMessage}):await t()}}}function m({functionId:e,access:t,hasDT:a,enabled:r=!0,objectName:d=""}){let{getRequest:i}=(0,c.useContext)(l.$),{stack:m}=(0,o.V)(),[u,p]=(0,c.useState)(),h=async r=>{let n=await (0,s.Z)(i,e,t,r,a,d);if(!n.errorMessage)return n;m({message:n?.errorMessage})},f=(0,n.useQuery)({retry:!1,staleTime:0,enabled:r,queryKey:[e,u,!!t,r],queryFn:u||"nraId"===u?()=>h(u):()=>h()});return{documentType:f.data,maxAccess:f?.data?.maxAccess||t,changeDT(e){p(e?.nraId||"nraId")}}}[n,o,l]=d.then?(await d)():d,r()}catch(e){r(e)}})},93484:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>v});var n=a(20997),c=a(6416),o=a(99155),s=a.n(o),l=a(15051),d=a(95965),i=a(18611),m=a(23385),u=a(42020),p=a(4416),h=a(91184),f=a(16689),g=a(60520),y=a(96119),I=a(38509),b=a(18687),x=e([l,g,I,b]);function v({row:e,window:t,updateRow:a,recordId:r,readOnly:o}){let{platformLabels:x}=(0,f.useContext)(g.l);(0,y.Z)({title:x.CostCenter,window:t});let{labels:v,access:w}=(0,I.J)({datasetId:c.i.CostCenter}),{formik:C}=(0,d.c)({maxAccess:w,validateOnChange:!0,initialValues:{costCenters:e.costCenters||[{id:1,pvId:r||0,seqNo:1,ccSeqNo:"",ccId:"",amount:""}]},onSubmit:async n=>{let c=n.costCenters.map((t,a)=>({...t,id:a+1,ccSeqNo:a+1,seqNo:e.id,pvId:r}));a({changes:{costCenters:c}}),t.close()}}),N=[{component:"resourcecombobox",label:v.costCenter,name:"ccId",props:{endpointId:p.x.CostCenter.qry,parameters:"_params=&_startAt=0&_pageSize=1000&",valueField:"recordId",displayField:"reference",displayFieldWidth:3,readOnly:o,mapping:[{from:"recordId",to:"ccId"},{from:"name",to:"ccName"},{from:"reference",to:"ccRef"},{from:"ccgName",to:"ccgName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name",grid:3},{key:"ccgName",value:"Group Name"}]}},{component:"textfield",label:v.name,name:"ccName",flex:2,props:{readOnly:!0}},{component:"textfield",label:v.group,name:"ccgName",props:{readOnly:!0}},{component:"numberfield",label:v.amount,name:"amount",props:{readOnly:o}}],S=C.values?.costCenters?.reduce((e,t)=>{let a=parseFloat(t.amount?.toString().replace(/,/g,""))||0;return e+a},0),j=e.amount-S,k=j>0||j<0||o;return n.jsx(b.Z,{onSave:C.handleSubmit,maxAccess:w,disabledSubmit:k,children:(0,n.jsxs)(i.R,{children:[n.jsx(u.g,{children:(0,n.jsxs)(s(),{container:!0,spacing:2,children:[n.jsx(s(),{item:!0,xs:12,children:n.jsx(h.Z,{name:"amount",label:v.amount,value:e.amount,maxAccess:w,readOnly:!0,onChange:C.handleChange,onClear:()=>C.setFieldValue("amount",""),error:C.touched.amount&&!!C.errors.amount})}),n.jsx(s(),{item:!0,xs:12,children:n.jsx(h.Z,{name:"amountAssigned",label:v.amountAssigned,value:S,maxAccess:w,readOnly:!0})}),n.jsx(s(),{item:!0,xs:12,children:n.jsx(h.Z,{name:"balance",label:v.balance,value:j,maxAccess:w,readOnly:!0,onChange:C.handleChange,onClear:()=>C.setFieldValue("balance",""),error:k})})]})}),n.jsx(m.Q,{children:n.jsx(l._,{onChange:e=>{C.setFieldValue("costCenters",e)},value:C.values.costCenters,error:C.errors.costCenters,columns:N,allowDelete:!o,allowAddNewLine:!o})})]})})}[l,g,I,b]=x.then?(await x)():x,v.width=700,v.height=600,r()}catch(e){r(e)}})},70638:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>g});var n=a(20997),c=a(16689),o=a(97996),s=a(29352),l=a(73846),d=a(96119),i=a(60520),m=a(20562),u=a(3),p=a.n(u),h=e([s,l,i]);[s,l,i]=h.then?(await h)():h;let f=({functionId:e,recordId:t,window:a})=>{let{getRequest:r}=(0,c.useContext)(s.$),{languageId:u}=(0,c.useContext)(l.V),{platformLabels:h}=(0,c.useContext)(i.l),f=t+"-"+e;(0,d.Z)({title:h.WorkFlow,window:a});let{width:g}=(0,m.d)(),y=g<=1024,I=g>1024&&g<=1280,b=y?10:I?12:14,x=y?75:I?85:95,v=y?15:I?20:25,w=async()=>{var a=`_functionId=${e}&_recordId=${t}`;let n=await r({extension:o.P.WorkFlow.graph,parameters:a});return n?.record},C=e=>{let t=[],a=[],r="",n="";return e.objects.forEach(e=>{t.push({functionName:e.functionName,reference:e.reference,date:e.date})}),e.workflow.forEach(t=>{e.objects.forEach(e=>{let a=e.functionName.split(" ").join("\r\n");t.parentId===e.recordId&&t.parentFunctionId===e.functionId&&(r=e.reference+"\r\n"+e.date+"\r\n"+a,t.parentId),t.childId===e.recordId&&t.childFunctionId===e.functionId&&(n=e.reference+"\r\n"+e.date+"\r\n"+a,t.childId)}),""===r||""===n||a.push({from:r,to:n,value:1,labelText:""}),r="",n=""}),a};return(0,c.useEffect)(()=>{!async function(){var e=await w();if(e){let t=(e,t)=>{let a=document.createElement("script");a.type="text/javascript",a.src=e,a.async=!0,a.onload=t,document.head.appendChild(a)};t("https://cdn.amcharts.com/lib/4/core.js",()=>{t("https://cdn.amcharts.com/lib/4/charts.js",()=>{t("https://cdn.amcharts.com/lib/4/themes/animated.js",()=>{am4core.ready(()=>{let t=am4core.create(f,am4charts.SankeyDiagram),a=C(e);t.data=a,t.dataFields.fromName="from",t.dataFields.toName="to",t.dataFields.value="value",t.paddingRight=2===u?0:40,t.paddingLeft=2===u?40:0,t.tooltip.label.fontSize=b;let r=t.nodes.template;r.draggable=!1,r.inert=!0,r.clickable=!1,r.width=x,r.height=v,r.nameLabel.label.fontSize=b,r.nameLabel.locationX=2===u?.85:0,r.nameLabel.height=void 0,r.nameLabel.label.fontWeight="bold";let n=t.links.template;n.middleLine.strokeOpacity=.3,n.middleLine.stroke=am4core.color("#555"),n.middleLine.strokeWidth=5,n.middleLine.hoverable=!1,n.fillOpacity=0,n.hoverable=!0,n.hoverOnFocus=!0,n.fill=am4core.color("#A8C686"),n.isHover=!0,t.appear(1e3,100)})})})})}}()},[]),n.jsx("div",{id:f,className:p().root})};f.width=950;let g=f;r()}catch(e){r(e)}})}};