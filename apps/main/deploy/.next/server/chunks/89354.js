"use strict";exports.id=89354,exports.ids=[89354],exports.modules={89354:(e,a,t)=>{t.a(e,async(e,l)=>{try{t.d(a,{Z:()=>p});var r=t(20997),n=t(16689),s=t(44619),d=t(71278),o=t(79660),i=t(61274),c=t(16774),u=t(38782),m=t(6416),h=t(75609),y=t(29352),x=e([d,i,u,y]);[d,i,u,y]=x.then?(await x)():x;let p=({address:e,addressValidation:a,readOnly:t=!1,defaultReadOnly:l={},required:x=!0,setFormik:p,access:I,...g})=>{let{getRequest:v}=(0,n.useContext)(y.$),{labels:C,access:j}=(0,u.Z)({datasetId:m.i.Address,DatasetIdAccess:g?.datasetId}),F=(0,n.useRef)(null),Z=(0,n.useMemo)(()=>({recordId:e?.recordId||null,name:e?.name||"",countryId:e?.countryId||null,countryName:e?.countryName||"",stateId:e?.stateId||null,stateName:e?.stateName||"",cityId:e?.cityId||null,city:e?.city||"",street1:e?.street1||"",street2:e?.street2||"",email1:e?.email1||"",email2:e?.email2||"",phone:e?.phone||"",phone2:e?.phone2||"",phone3:e?.phone3||"",addressId:e?.addressId||null,postalCode:e?.postalCode||"",cityDistrictId:e?.cityDistrictId||null,cityDistrict:e?.cityDistrict||"",bldgNo:e?.bldgNo||"",unitNo:e?.unitNo||"",subNo:e?.subNo||"",poBox:e?.poBox||""}),[e]),b=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,V=(j?.record?.controls||[]).filter(e=>2===e.accessLevel).map(e=>e.controlId),N=(a.values.name||a.values.cityId||a.values.phone||a.values.countryId||a.values.street1||V.some(e=>!!a.values[e]))&&!x||x,f=N&&{name:h.string().required(),street1:h.string().required(),phone:h.string().required(),countryId:h.number().required(),city:h.string().required(),email1:h.string().nullable().matches(b,{message:"Invalid email format",excludeEmptyString:!0}),email2:h.string().nullable().matches(b,{message:"Invalid email format",excludeEmptyString:!0})};return(0,n.useEffect)(()=>{e?.recordId!==F.current&&(F.current=e?.recordId,Object.entries(Z).forEach(([e,t])=>{a.setFieldValue(e,t,!1)}))},[e?.recordId]),(0,n.useEffect)(()=>{!e?.recordId&&e&&Object.values(e).some(e=>null!==e&&""!==e)&&e!==F.current&&(F.current=e,Object.entries(Z).forEach(([e,t])=>{a.setFieldValue(e,t,!1)}))},[e]),(0,n.useEffect)(()=>{if(j){let e=N?j?.record?.controls||[]:(j?.record?.controls||[]).filter(e=>2!==e.accessLevel);p({validate:f,maxAccess:I?{...I,record:{...I?.record,controls:[...I?.record?.controls||[],...e]}}:{...j,record:{...j.record,controls:e}}})}},[j,N]),(0,n.useEffect)(()=>{(async function(){let e=(await v({extension:o.r.Defaults.get,parameters:"_filter=&_key=countryId"})).record.value;a.values.countryId||a.setFieldValue("countryId",parseInt(e))})()},[]),(0,r.jsxs)(c.Z,{container:!0,hideonempty:!0,xs:12,spacing:2,children:[r.jsx(c.Z,{item:!0,hideonempty:!0,xs:12,children:r.jsx(s.Z,{name:"name",label:C.name,value:a.values.name,readOnly:t,maxLength:"50",required:x,onChange:a.handleChange,onClear:()=>a.setFieldValue("name",""),error:a.touched?.name&&!!a.errors?.name,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(d.Z,{endpointId:o.r.Country.qry,name:"countryId",label:C.country,valueField:"recordId",displayField:["reference","name"],readOnly:t||l?.countryId,displayFieldWidth:1.5,required:x,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"Foreign Language Name"}],values:a.values,onChange:(e,t)=>{a.setFieldValue("stateId",null),a.setFieldValue("cityId",null),a.setFieldValue("city",""),a.setFieldValue("cityDistrictId",null),a.setFieldValue("cityDistrict",""),t?(a.setFieldValue("countryId",t?.recordId),a.setFieldValue("countryName",t?.name)):(a.setFieldValue("countryId",null),a.setFieldValue("countryName",""))},error:a.touched.countryId&&!!a.errors.countryId,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(d.Z,{endpointId:a.values.countryId&&o.r.State.qry,parameters:a.values.countryId&&`_countryId=${a.values.countryId||0}`,name:"stateId",label:C.state,valueField:"recordId",displayField:"name",readOnly:t||!a.values?.countryId,values:a.values,onChange:(e,t)=>{a.setFieldValue("stateId",t?.recordId||null),a.setFieldValue("stateName",t?.name||""),a.setFieldValue("cityId",null),a.setFieldValue("cityDistrictId",null),a.setFieldValue("city",""),a.setFieldValue("cityDistrict","")},error:a.touched.stateId&&!!a.errors.stateId,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(i.U,{endpointId:o.r.City.snapshot,parameters:{_countryId:a.values.countryId,_stateId:a.values.stateId?a.values.stateId:0},valueField:"name",displayField:"name",name:"city",required:x,label:C.city,readOnly:t||!a.values.countryId,form:a,secondDisplayField:!1,onChange:(e,t)=>{a.setValues({...a.values,cityId:t?.recordId||"",city:t?.name||"",cityDistrictId:"",cityDistrict:""})},errorCheck:"city",maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(i.U,{endpointId:a.values.cityId&&o.r.CityDistrict.snapshot,parameters:a.values.cityId&&{_cityId:a.values.cityId},valueField:"name",displayField:"name",name:"cityDistrictId",label:C.cityDistrict,readOnly:t||!a.values.cityId,form:a,secondDisplayField:!1,valueShow:"cityDistrict",onChange:(e,t)=>{t?(a.setFieldValue("cityDistrictId",t?.recordId),a.setFieldValue("cityDistrict",t?.name)):(a.setFieldValue("cityDistrictId",null),a.setFieldValue("cityDistrict",""))},errorCheck:"cityDistrictId",maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:12,children:(0,r.jsxs)(c.Z,{container:!0,hideonempty:!0,spacing:2,children:[r.jsx(c.Z,{item:!0,hideonempty:!0,xs:6,children:r.jsx(s.Z,{name:"street1",label:C.street1,value:a.values.street1,required:x,readOnly:t,maxLength:"100",onChange:a.handleChange,onClear:()=>a.setFieldValue("street1",""),error:a.touched.street1&&!!a.errors.street1,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:6,children:r.jsx(s.Z,{name:"street2",label:C.street2,value:a.values.street2,maxLength:"100",readOnly:t,onChange:a.handleChange,onClear:()=>a.setFieldValue("street2",""),error:a.touched.street2&&!!a.errors.street2,maxAccess:j})})]})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"bldgNo",label:C.bldgNo,value:a.values.bldgNo,maxLength:"10",readOnly:t,onChange:a.handleChange,onClear:()=>a.setFieldValue("bldgNo",""),error:a.touched.bldgNo&&!!a.errors.bldgNo,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"unitNo",label:C.unitNo,value:a.values.unitNo,maxLength:"10",readOnly:t,onChange:a.handleChange,onClear:()=>a.setFieldValue("unitNo",""),error:a.touched.unitNo&&!!a.errors.unitNo,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"subNo",label:C.subNo,value:a.values.subNo,maxLength:"10",readOnly:t,onChange:a.handleChange,onClear:()=>a.setFieldValue("subNo",""),error:a.touched.subNo&&!!a.errors.subNo,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"postalCode",maxLength:"5",label:C.postalCode,readOnly:t,value:a.values.postalCode,onChange:a.handleChange,onClear:()=>a.setFieldValue("postalCode",""),error:a.touched.postalCode&&!!a.errors.postalCode,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"poBox",label:C.poBox,value:a.values.poBox,maxLength:"10",readOnly:t,onChange:a.handleChange,onClear:()=>a.setFieldValue("poBox",""),error:a.touched.poBox&&!!a.errors.poBox,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:12,children:(0,r.jsxs)(c.Z,{container:!0,hideonempty:!0,spacing:2,children:[r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"phone",label:C.phone,value:a.values.phone,readOnly:t,maxLength:"40",required:x,phone:!0,onChange:a.handleChange,onClear:()=>a.setFieldValue("phone",""),error:a.touched.phone&&!!a.errors.phone,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"phone2",label:C.phone2,value:a.values.phone2,maxLength:"40",phone:!0,readOnly:t,onChange:a.handleChange,onClear:()=>a.setFieldValue("phone2",""),error:a.touched.phone2&&!!a.errors.phone2,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:4,children:r.jsx(s.Z,{name:"phone3",label:C.phone3,value:a.values.phone3,maxLength:"15",phone:!0,readOnly:t,onChange:a.handleChange,onClear:()=>a.setFieldValue("phone3",""),error:a.touched.phone3&&!!a.errors.phone3,maxAccess:j})})]})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:12,children:(0,r.jsxs)(c.Z,{container:!0,hideonempty:!0,spacing:2,children:[r.jsx(c.Z,{item:!0,hideonempty:!0,xs:6,children:r.jsx(s.Z,{name:"email1",maxLength:"50",label:C.email1,value:a.values.email1,type:"email",onBlur:a.handleBlur,readOnly:t,placeholder:"johndoe@email.com",onChange:a.handleChange,onClear:()=>a.setFieldValue("email1",""),error:a.touched.email1&&!!a.errors.email1,maxAccess:j})}),r.jsx(c.Z,{item:!0,hideonempty:!0,xs:6,children:r.jsx(s.Z,{name:"email2",type:"email",maxLength:"50",readOnly:t,placeholder:"johndoe@email.com",label:C.email2,onBlur:a.handleBlur,value:a.values.email2,onChange:a.handleChange,onClear:()=>a.setFieldValue("email2",""),error:a.touched.email2&&!!a.errors.email2,maxAccess:j})})]})})]})};l()}catch(e){l(e)}})},16774:(e,a,t)=>{t.d(a,{Z:()=>s});var l=t(20997),r=t(99155),n=t.n(r);function s({hideonempty:e=!1,children:a,...t}){return l.jsx(n(),{...t,className:e?"__hide-on-empty":"",children:a})}}};