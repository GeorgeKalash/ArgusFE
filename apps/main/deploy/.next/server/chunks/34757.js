"use strict";exports.id=34757,exports.ids=[34757],exports.modules={8041:(e,t,a)=>{a.d(t,{Z:()=>r});let r={src:"/_next/static/media/imgSerials.d1ee59bb.png",height:17,width:23,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAIVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt0UjBAAAAC3RSTlMCZzsmQ6RbWbaSTwNdgTwAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVHicY2BiZ2BgYOBiZmBmYmRjZGRhYGBg4eBkZWVDYjAzMbKDpWCKARB/AJwjPQgCAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6}},35923:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>F});var n=a(20997),l=a(16689),s=a(29352),d=a(18611),i=a(23385),o=a(60520),c=a(59636),u=a(15051),m=a(95965),p=a(75609),h=a(86201),x=a(54242),f=a(93105),y=a(99155),I=a.n(y),b=a(91184),g=a(677),v=a(19278),j=a(18687),C=e([s,o,u,h,g,v,j]);function F({labels:e,maxAccess:t,store:r}){let{postRequest:y}=(0,l.useContext)(s.$),{platformLabels:C}=(0,l.useContext)(o.l),{recordId:F,jobItems:k}=r||{},{stack:A}=(0,g.zY)(),{schema:w,requiredFields:N}=(0,f.m)({sku:e=>e?.sku,itemName:e=>e?.itemName,qty:e=>e?.qty>0},!0,t,"items"),{formik:O}=(0,m.c)({initialValues:{items:[{id:1,jobId:F,itemId:null,seqNo:1,qty:0,pcs:0,sku:"",itemName:""}]},conditionSchema:["items"],validationSchema:p.object({items:p.array().of(w)}),onSubmit:async e=>{let t=e?.items.filter(e=>Object.values(N).some(t=>t(e))).map((e,t)=>({...e,seqNo:t+1,jobId:F}));await y({extension:c.u.JobOrdersItem.set2,record:JSON.stringify({jobId:F,items:t})}),h.default.success(C.Updated)}}),R=[{component:"resourcelookup",label:e.item,name:"sku",props:{endpointId:x.$.Item.snapshot,valueField:"sku",displayField:"sku",displayFieldWidth:2,mapping:[{from:"recordId",to:"itemId"},{from:"sku",to:"sku"},{from:"name",to:"itemName"},{from:"trackBy",to:"trackBy"}],columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}]}},{component:"textfield",label:e.itemName,name:"itemName",props:{readOnly:!0}},{component:"numberfield",label:e.qty,name:"qty",props:{allowNegative:!1,maxLength:9},updateOn:"blur",async onChange({row:{update:e,newRow:t}}){e({qty:t?.qty||0,extendedCost:(t?.qty||0)*(t?.unitCost||0)})}},{component:"numberfield",label:e.pcs,name:"pcs",props:{decimalScale:0,maxLength:5}},{component:"numberfield",label:e.unitCost,name:"unitCost",props:{readOnly:!0,decimalScale:2}},{component:"numberfield",label:e.extendedCost,name:"extendedCost",props:{readOnly:!0,decimalScale:2}},{component:"button",name:"serials",label:C.serials,flex:.5,props:{onCondition:e=>1===e.trackBy?{imgSrc:a(8041).Z.src,hidden:!1}:{imgSrc:"",hidden:!0}},onClick:(a,r)=>{A({Component:v.Z,props:{labels:e,maxAccess:t,api:c.u.MFSerial.qry2,parameters:`_jobId=${F}&_seqNo=${r.seqNo}`}})}}],D=O?.values?.items?.length>0?O.values.items.reduce((e,t)=>{let a=parseFloat(t.extendedCost?.toString().replace(/,/g,""))||0;return e+a},0):0;return n.jsx(j.Z,{onSave:O.handleSubmit,maxAccess:t,isParentWindow:!1,disabledSubmit:r?.isCancelled||r?.isPosted,children:(0,n.jsxs)(d.R,{children:[n.jsx(i.Q,{children:n.jsx(u._,{name:"items",onChange:e=>O.setFieldValue("items",e),value:O.values.items,error:O.errors.items,columns:R,initialValues:O?.initialValues?.items?.[0],maxAccess:t,allowDelete:!r?.isPosted&&!r?.isCancelled})}),n.jsx(I(),{container:!0,p:4,justifyContent:"flex-end",children:n.jsx(I(),{item:!0,xs:2,children:n.jsx(b.Z,{name:"totalCost",label:e.totalCost,value:D,readOnly:!0})})})]})})}[s,o,u,h,g,v,j]=C.then?(await C)():C,r()}catch(e){r(e)}})},97609:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>P});var n=a(20997),l=a(27736),s=a(79390),d=a(99155),i=a.n(d),o=a(16689),c=a(75609),u=a(80582),m=a(86201),p=a(29352),h=a(6416),x=a(44619),f=a(65980),y=a(71278),I=a(79660),b=a(54242),g=a(68728),v=a(61274),j=a(18611),C=a(42020),F=a(97996),k=a(95965),A=a(70638),w=a(677),N=a(60520),O=a(86794),R=a(59636),D=a(91184),V=a(528),S=a(19278),Z=a(99912),q=a(94107),J=a(96995),W=a(9972),z=a(12048),M=e([u,m,p,y,v,A,w,N,O,V,S,Z,q]);function P({labels:e,maxAccess:t,setStore:a,store:r,setRefetchRouting:d,invalidate:M,lockRecord:P,refetchJob:T,setRefetchJob:Q,window:$}){let{getRequest:U,postRequest:L}=(0,o.useContext)(p.$),{stack:B}=(0,w.zY)(),{platformLabels:_}=(0,o.useContext)(N.l),E=(0,o.useRef)(null),G=r?.recordId,[Y,H]=(0,o.useState)(null),[K,X]=(0,o.useState)({recordId:null,resourceId:null}),{addLockedScreen:ee}=(0,o.useContext)(z.Z),{documentType:et,maxAccess:ea,changeDT:er}=(0,O.H)({functionId:g.J.JobOrder,access:t,enabled:!G}),en={recordId:G||null,dtId:null,reference:null,date:new Date,plantId:null,designId:null,workCenterId:null,itemId:null,sku:null,itemName:null,clientId:null,routingId:null,routingSeqNo:null,startingDT:null,endingDT:null,description:"",weight:0,qty:0,pcs:0,stdWeight:0,netSerialsWeight:0,producedWgt:0,expectedQty:0,expectedPcs:0,RMCost:0,deliveryDate:null,spId:null,sizeId:null,lineId:null,itemsPL:null,designPL:null,trackBy:null,avgWeight:0,categoryId:null,itemCategoryId:null,classId:null,standardId:null,rubberId:null,threeDDId:null,status:1,itemFromDesign:!1,standardCost:null},{formik:el}=(0,k.c)({maxAccess:ea,documentType:{key:"dtId",value:et?.dtId},initialValues:en,validationSchema:c.object({date:c.string().required(),expectedQty:c.number().required(),expectedPcs:c.number().moreThan(0).required(),workCenterId:c.number().required()}),onSubmit:async t=>{let r={...t};r.qty||delete r.qty;let n=await L({extension:R.u.MFJobOrder.set,record:JSON.stringify({...r,date:r?.date?(0,s.ku)(r?.date):null,endingDT:r?.endingDT?(0,s.ku)(r?.endingDT):null,startingDT:r?.startingDT?(0,s.ku)(r?.startingDT):null,deliveryDate:r?.deliveryDate?(0,s.ku)(r?.deliveryDate):null})});E.current&&(E.current.value=parseInt(n.recordId),await E.current.submit()),M();let l=es?_.Edited:_.Added;m.default.success(l),a(e=>({...e,recordId:n?.recordId}));let d=await ey(n.recordId);$.setTitle&&!es&&$.setTitle(d?`${e.jobOrder} ${d}`:e.jobOrder)}}),es=!!el.values.recordId,ed=-1==el.values.status,ei=4==el.values.status,eo=3==el.values.status,ec=[{key:"Locked",condition:eo,onClick:"onUnpostConfirmation",disabled:!0},{key:"Unlocked",condition:!eo,onClick:eh,disabled:!es||eo||ed},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!es},{key:"Cancel",condition:!0,onClick:()=>{ef(_.CancelConf,_.Confirmation,ep)},disabled:!es||ed||eo},{key:"WorkFlow",condition:!0,onClick:ex,disabled:!es},{key:"GL",condition:!0,onClick:"onClickGL",datasetId:h.i.GLMFJobOrders,disabled:!es,error:el?.values?.endingDT?null:{message:e.emptyEndingDate},values:{...el.values,date:el?.values?.endingDT,notes:el?.values?.description}},{key:"IV",condition:!0,onClick:"onInventoryTransaction",disabled:!es||!eo},{key:"SerialsLots",condition:!0,onClick:function(){B({Component:S.Z,props:{labels:e,maxAccess:ea,api:R.u.MFSerial.qry,parameters:`_jobId=${G}`}})}},{key:"Start",condition:!ei,onClick:()=>{ef(_.StartRecord,_.Confirmation,eu)},disabled:!es||ei||eo||ed},{key:"Stop",condition:ei,onClick:()=>{ef(_.StopRecord,_.Confirmation,em)},disabled:!es||!ei||eo},{key:"Sample",condition:!0,onClick:function(){B({Component:q.Z,props:{labels:e,maxAccess:ea,recordId:el.values.recordId,itemId:el.values.itemId},width:500,height:600,title:e.samples})},disabled:(!es||!ei||!eo)&&!(ei||eo)}];async function eu(){if(Object.keys(el?.errors)?.length>0){ek();return}let e=await L({extension:R.u.MFJobOrder.start,record:JSON.stringify({...el.values,date:(0,s.ku)(el.values.date),deliveryDate:el.values.deliveryDate?(0,s.ku)(el.values.deliveryDate):null})});m.default.success(_.Started),M(),await ey(e.recordId),d(!0)}async function em(){if(Object.keys(el?.errors)?.length>0){ek();return}let e=await L({extension:R.u.MFJobOrder.stop,record:JSON.stringify({...el.values,date:(0,s.ku)(el.values.date),deliveryDate:el.values.deliveryDate?(0,s.ku)(el.values.deliveryDate):null})});m.default.success(_.Stoped),M(),await ey(e.recordId),d(!0)}async function ep(){let e=await L({extension:R.u.MFJobOrder.cancel,record:JSON.stringify({...el.values,date:(0,s.ku)(el.values.date),deliveryDate:el.values.deliveryDate?(0,s.ku)(el.values.deliveryDate):null})});m.default.success(_.Cancelled),M(),await ey(e.recordId),a(e=>({...e,isCancelled:!0}))}async function eh(){let e=await L({extension:R.u.MFJobOrder.post,record:JSON.stringify({...el.values,date:(0,s.ku)(el.values.date),deliveryDate:el.values.deliveryDate?(0,s.ku)(el.values.deliveryDate):null})});m.default.success(_.Posted),P({recordId:e.recordId,reference:el.values.reference,resourceId:h.i.MFJobOrders,onSuccess:()=>{ee({resourceId:h.i.MFJobOrders,recordId:e.recordId,reference:el.values.reference}),ey(e.recordId),a(e=>({...e,isPosted:!0}))},isAlreadyLocked:e=>{$.close(),B({Component:W.Z,props:{DialogText:`${_.RecordLocked} ${e}`,width:600,height:200,title:_.Dialog}})}}),M()}async function ex(){B({Component:A.Z,props:{functionId:g.J.JobOrder,recordId:el.values.recordId}})}function ef(e,t,a){B({Component:Z.Z,props:{DialogText:e,okButtonAction:async()=>{await a()},fullScreen:!1,close:!0},width:400,height:150,title:t})}async function ey(e){if(!e)return;let t=await U({extension:R.u.MFJobOrder.get2,parameters:`_recordId=${e}`}),{jobOrder:r,...n}=t?.record||{};return el.setValues({...r,date:(0,s.a1)(r?.date),endingDT:(0,s.a1)(r?.endingDT),startingDT:(0,s.a1)(r?.startingDT),deliveryDate:(0,s.a1)(r?.deliveryDate)}),a(e=>({...e,recordId:r?.recordId,isPosted:r?.status==3,jobReference:r?.reference,isCancelled:r?.status==-1,status:r?.status,routingId:r?.routingId||null,...n})),el.values.recordId||P({recordId:r?.recordId,reference:r?.reference,resourceId:h.i.MFJobOrders,onSuccess:()=>{ee({resourceId:h.i.MFJobOrders,recordId:r?.recordId,reference:r?.reference})}}),r?.reference}async function eI(e){if(e)return await U({extension:R.u.Routing.get,parameters:`_recordId=${e}`})}async function eb(e){if(2==Y&&eF(e.recordId,Y),!e?.recordId){el.setFieldValue("itemId",null),el.setFieldValue("itemName",null),el.setFieldValue("sku",null),el.setFieldValue("itemsPL",null),el.setFieldValue("stdWeight",null),el.setFieldValue("itemCategoryId",null),el.setFieldValue("itemFromDesign",!1);return}let t=await U({extension:b.$.Physical.get,parameters:`_itemId=${e?.recordId}`}),a=await U({extension:b.$.ItemProduction.get,parameters:`_recordId=${e?.recordId}`});el.setFieldValue("itemId",e?.recordId),el.setFieldValue("itemName",e?.name),el.setFieldValue("sku",e?.sku),el.setFieldValue("stdWeight",t?.record?.weight),el.setFieldValue("expectedQty",t?.record?.weight&&el.values.expectedPcs?el.values.expectedPcs*t?.record?.weight:0),el.setFieldValue("itemsPL",a?.record?.lineId),el.setFieldValue("lineId",a?.record?.lineId),el.setFieldValue("itemCategoryId",e?.categoryId)}async function eg(e){if(1==Y?eF(e.recordId,Y):2==Y&&eF(e.itemId,Y),el.setFieldValue("designId",e?.recordId||null),el.setFieldValue("designRef",e?.reference||""),el.setFieldValue("designName",e?.name||""),el.setFieldValue("stdWeight",e?.stdWeight),el.setFieldValue("expectedQty",e?.stdWeight&&el.values.expectedPcs?el.values.expectedPcs*e?.stdWeight:0),!ei){let t=await eI(e?.routingId);t?.record?.isInactive?(el.setFieldValue("routingId",null),el.setFieldValue("routingRef",null),el.setFieldValue("routingName",null)):(el.setFieldValue("routingId",e?.routingId||null),el.setFieldValue("routingRef",e?.routingRef),el.setFieldValue("routingName",e?.routingName))}el.setFieldValue("lineId",e?.lineId),el.setFieldValue("designPL",e?.lineId),el.setFieldValue("classId",e?.classId),el.setFieldValue("standardId",e?.standardId),el.setFieldValue("itemCategoryId",e?.itemCategoryId||null),el.setFieldValue("threeDDId",e?.threeDDId),el.setFieldValue("threeDDRef",e?.threeDDRef),el.setFieldValue("rubberId",e?.rubberId),el.setFieldValue("rubberRef",e?.rubberRef),el.setFieldValue("itemId",e?.itemId),el.setFieldValue("itemName",e?.itemName),el.setFieldValue("sku",e?.sku)}async function ev(e){if(!e?.recordId)return;let t=await U({extension:F.P.Address.qry,parameters:`_params=1|${e.recordId}`});return await ej(t?.list[0]?.addressId)}async function ej(e){if(!e)return null;let t=await U({extension:I.r.Address.format,parameters:`_addressId=${e}`});return t?.record?.formattedAddress.replace(/(\r\n|\r|\n)+/g,"\r\n")}async function eC(e,t){if(!e){t||(el.setFieldValue("wcRef",null),el.setFieldValue("wcName",null),el.setFieldValue("workCenterId",null));return}let a=await U({extension:R.u.RoutingSequence.qry,parameters:`_routingId=${e}`});el.setFieldValue("wcRef",a?.list[0]?.workCenterRef||""),el.setFieldValue("wcName",a?.list[0]?.workCenterName||""),el.setFieldValue("workCenterId",a?.list[0]?.workCenterId||null)}function eF(e,t){X({recordId:e,resourceId:1==t?h.i.Design:2==t?h.i.Item:3==t?h.i.MFJobOrders:null})}async function ek(){if(Object.keys(await el.validateForm()).length){let e=await el.validateForm(),t=Object.keys(e).reduce((e,t)=>(el.touched[t]||(e[t]=!0),e),{});Object.keys(t).length&&el.setTouched(t,!0)}}return n.jsx(u.Z,{resourceId:h.i.MFJobOrders,functionId:g.J.JobOrder,form:el,maxAccess:ea,previewReport:es,actions:ec,editMode:es,disabledSubmit:ed||eo,disabledSavedClear:ed||eo,children:n.jsx(j.R,{children:n.jsx(C.g,{children:(0,n.jsxs)(i(),{container:!0,children:[(0,n.jsxs)(i(),{container:!0,spacing:2,xs:8,children:[n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.documentTypes,name:"dtId",label:e.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:es,valueField:"recordId",displayField:["reference","name"],values:el.values,maxAccess:ea,onChange:(e,t)=>{el.setFieldValue("dtId",t?.recordId),er(t)},error:el.touched.dtId&&!!el.errors.dtId})}),(0,n.jsxs)(i(),{container:!0,item:!0,xs:12,spacing:2,children:[n.jsx(i(),{item:!0,xs:6,children:(0,n.jsxs)(i(),{container:!0,direction:"column",spacing:2,children:[n.jsx(i(),{item:!0,children:n.jsx(x.Z,{name:"reference",label:e.reference,value:el?.values?.reference,maxAccess:!es&&ea,readOnly:es,onChange:el.handleChange,onClear:()=>el.setFieldValue("reference",""),error:el.touched.reference&&!!el.errors.reference})}),n.jsx(i(),{item:!0,children:n.jsx(l.Z,{name:"date",required:!0,readOnly:!0,label:e.date,value:el?.values?.date,editMode:es,maxAccess:ea})}),n.jsx(i(),{item:!0,children:n.jsx(l.Z,{name:"startingDT",label:e.startingDate,value:el?.values?.startingDT,onChange:el.setFieldValue,editMode:es,maxAccess:ea,readOnly:!0})}),n.jsx(i(),{item:!0,children:n.jsx(l.Z,{name:"endingDT",readOnly:!0,label:e.endingDate,value:el?.values?.endingDT,editMode:es,maxAccess:ea})}),n.jsx(i(),{item:!0,children:n.jsx(l.Z,{name:"deliveryDate",readOnly:ed||ei||eo,label:e.deliveryDate,value:el?.values?.deliveryDate,onChange:el.setFieldValue,editMode:es,maxAccess:ea,onClear:()=>el.setFieldValue("deliveryDate",null),error:el.touched.deliveryDate&&!!el.errors.deliveryDate})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.plants,name:"plantId",label:_.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:el.values,readOnly:ed||eo,onChange:(e,t)=>{el.setFieldValue("plantId",t?.recordId||null)},error:el.touched.plantId&&!!el.errors.plantId})}),n.jsx(i(),{item:!0,children:n.jsx(v.U,{endpointId:b.$.Item.snapshot,name:"itemId",readOnly:ed||eo,label:e.item,valueField:"sku",displayField:"sku",valueShow:"sku",secondValueShow:"itemName",columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}],form:el,displayFieldWidth:2,onChange:async(e,t)=>{if(ei){el.setFieldValue("itemId",t?.recordId||null),el.setFieldValue("itemName",t?.name||""),el.setFieldValue("sku",t?.sku||"");return}await eb(t)},errorCheck:"itemId",maxAccess:ea})}),n.jsx(i(),{item:!0,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.itemSizes,name:"sizeId",label:e.size,readOnly:ed||ei||eo,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:el.values,valueField:"recordId",displayField:["reference","name"],maxAccess:ea,onChange:(e,t)=>{el.setFieldValue("sizeId",t?.recordId)},error:el.touched.sizeId&&!!el.errors.sizeId})}),n.jsx(i(),{item:!0,children:n.jsx(D.Z,{name:"expectedQty",label:e.expectedQty,value:el.values.expectedQty,required:!0,readOnly:ed||ei||eo,onChange:e=>el.setFieldValue("expectedQty",e.target.value),onClear:()=>el.setFieldValue("expectedQty",0),error:el.touched.expectedQty&&!!el.errors.expectedQty})}),n.jsx(i(),{item:!0,children:n.jsx(D.Z,{name:"expectedPcs",label:e.expectedPcs,value:el.values.expectedPcs,required:!0,readOnly:ed||ei||eo,onChange:e=>{el.setFieldValue("expectedPcs",e.target.value),el.setFieldValue("expectedQty",el.values.stdWeight?el.values.stdWeight*e.target.value:0)},onClear:()=>{el.setFieldValue("expectedPcs",0),el.setFieldValue("expectedQty",0)},error:el.touched.expectedPcs&&!!el.errors.expectedPcs})}),n.jsx(i(),{item:!0,children:n.jsx(v.U,{endpointId:R.u.Design.snapshot,valueField:"reference",displayField:"name",name:"designId",label:e.design,form:el,firstValue:el.values.designRef,secondValue:el.values.designName,errorCheck:"designId",maxAccess:ea,displayFieldWidth:2,readOnly:ed||eo,onChange:async(e,t)=>{if(ei){el.setFieldValue("designRef",t?.reference||""),el.setFieldValue("designName",t?.name||""),el.setFieldValue("designId",t?.recordId||null);return}await eg(t),await eC(t?.routingId,!1)}})}),n.jsx(i(),{item:!0,children:n.jsx(D.Z,{name:"netSerialsWeight",label:e.netSerialsWeight,value:el.values.netSerialsWeight,readOnly:!0})})]})}),n.jsx(i(),{item:!0,xs:6,children:(0,n.jsxs)(i(),{container:!0,spacing:2,children:[n.jsx(i(),{item:!0,xs:12,children:n.jsx(f.Z,{name:"description",label:e.description,value:el.values.description,rows:2.8,maxAccess:ea,readOnly:ed||eo,onChange:el.handleChange,onClear:()=>el.setFieldValue("description",""),error:el.touched.description&&!!el.errors.description})}),n.jsx(i(),{item:!0,xs:6,children:n.jsx(D.Z,{name:"stdWeight",label:e.itemWeight,value:el.values.stdWeight,readOnly:!0})}),n.jsx(i(),{item:!0,xs:6,children:n.jsx(D.Z,{name:"standardCost",label:e.standardCost,value:el.values.standardCost,readOnly:!0})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"avgWeight",label:e.avgWeight,value:el.values.avgWeight,readOnly:!0})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.productionLines,name:"lineId",label:e.line,values:el.values,valueField:"recordId",displayField:"name",maxAccess:ea,readOnly:ed||eo,onChange:(e,t)=>{el.setFieldValue("lineId",t?.recordId)},error:el.touched.lineId&&!!el.errors.lineId})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:R.u.Routing.snapshot,valueField:"reference",displayField:"name",name:"routingId",label:e.routing,form:el,minChars:2,firstValue:el.values.routingRef,secondValue:el.values.routingName,errorCheck:"routingId",maxAccess:ea,displayFieldWidth:2,readOnly:ed||ei||eo,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:async(e,t)=>{await eC(t?.recordId,!0),el.setFieldValue("routingRef",t?.reference||null),el.setFieldValue("routingName",t?.name||null),el.setFieldValue("routingId",t?.recordId||null)}})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:R.u.WorkCenter.snapshot,valueField:"reference",displayField:"name",name:"workCenterId",label:e.workCenter,form:el,firstValue:el.values.wcRef,required:!0,secondValue:el.values.wcName,errorCheck:"workCenterId",maxAccess:ea,readOnly:el?.values?.routingId||el?.values?.designId,displayFieldWidth:2,onChange:(e,t)=>{el.setFieldValue("wcRef",t?.reference||""),el.setFieldValue("wcName",t?.name||""),el.setFieldValue("workCenterId",t?.recordId||null)}})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"qty",label:e.netProduction,value:el.values.qty,readOnly:!0,maxAccess:ea})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"pcs",label:e.producedPcs,value:el.values.pcs,readOnly:!0,maxAccess:ea})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"RMCost",label:e.rmCost,value:el.values.RMCost,readOnly:!0,maxAccess:ea})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.productionClasses,values:el.values,name:"classId",label:e.productionClass,valueField:"recordId",displayField:"name",maxAccess:ea,readOnly:ed||ei||eo,onChange:(e,t)=>{el.setFieldValue("classId",t?.recordId)},error:el.touched.classId&&!!el.errors.classId})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.productionStandards,values:el.values,name:"standardId",label:e.productionStandard,valueField:"recordId",displayField:"reference",readOnly:ed||ei||eo,maxAccess:ea,onChange:(e,t)=>{el.setFieldValue("standardId",t?.recordId)},error:el.touched.standardId&&!!el.errors.standardId})})]})})]})]}),(0,n.jsxs)(i(),{container:!0,spacing:2,xs:4,sx:{pl:2},children:[n.jsx(i(),{item:!0,children:n.jsx(V.Z,{ref:E,resourceId:h.i.MFJobOrders,recordId:el.values.recordId,seqNo:0,customWidth:300,customHeight:180,disabled:ed||eo,isAbsolutePath:!0,parentImage:K})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.jobCategories,name:"categoryId",label:e.category,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",maxAccess:ea,displayField:"name",readOnly:ed||ei||eo,values:el.values,onChange:(e,t)=>{el.setFieldValue("categoryId",t?.recordId)},error:el.touched.categoryId&&!!el.errors.categoryId})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.categories,name:"itemCategoryId",label:e.itemCategory,readOnly:!0,valueField:"recordId",displayField:["caRef","name"],values:el.values,error:el.touched.itemCategoryId&&!!el.errors.itemCategoryId,maxAccess:ea})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:J.z.ThreeDDrawing.snapshot2,valueField:"reference",displayField:"reference",secondDisplayField:!1,name:"threeDDId",label:e.threeDD,form:el,valueShow:"threeDDRef",maxAccess:ea,readOnly:ed||ei||eo,onChange:(e,t)=>{el.setFieldValue("threeDDId",t?.recordId||null),el.setFieldValue("threeDDRef",t?.reference||""),el.setFieldValue("fileReference",t?.fileReference||"")},errorCheck:"threeDDId"})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:J.z.Rubber.snapshot,valueField:"reference",displayField:"reference",secondDisplayField:!1,name:"rubberId",label:e.rubber,form:el,valueShow:"rubberRef",maxAccess:ea,readOnly:ed||ei||eo,onChange:(e,t)=>{el.setFieldValue("rubberId",t?.recordId||null),el.setFieldValue("rubberRef",t?.reference||"")},errorCheck:"rubberId"})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:R.u.MFJobOrder.pack,reducer:e=>e?.record?.salesPeople,name:"spId",label:e.orderedBy,columnsInDropDown:[{key:"spRef",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",maxAccess:ea,displayField:"name",readOnly:ed||ei||eo,values:el.values,onChange:(e,t)=>{el.setFieldValue("spId",t?.recordId)},error:el.touched.spId&&!!el.errors.spId})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:F.P.Client.snapshot,name:"clientId",label:e.client,valueField:"reference",displayField:"name",valueShow:"clientRef",secondValueShow:"clientName",form:el,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],onChange:async(e,t)=>{await ev(t),el.setFieldValue("clientName",t?.name||""),el.setFieldValue("clientRef",t?.reference||""),el.setFieldValue("clientId",t?.recordId||null)},secondFieldName:"clientName",errorCheck:"clientId",maxAccess:ea,readOnly:ed||ei||eo,displayFieldWidth:3,editMode:es})}),n.jsx(i(),{item:!0,xs:12,children:n.jsx(f.Z,{name:"billAddress",label:e.billAddress,value:el.values.billAddress,rows:3.5,maxLength:"100",readOnly:ed||ei||eo,maxAccess:ea,onChange:e=>el.setFieldValue("billAddress",e.target.value),onClear:()=>el.setFieldValue("billAddress",null)})})]})]})})})})}[u,m,p,y,v,A,w,N,O,V,S,Z,q]=M.then?(await M)():M,r()}catch(e){r(e)}})},19419:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>p});var n=a(20997),l=a(40711),s=a(18611),d=a(23385),i=a(42020),o=a(99155),c=a.n(o),u=a(91184),m=e([l]);function p({store:e,maxAccess:t,labels:a}){let r=e?.jobMaterials||[],o=[{field:"sku",headerName:a.sku,flex:1},{field:"itemName",headerName:a.itemName,flex:1},{field:"itemCategoryName",headerName:a.category,flex:1},{field:"qty",headerName:a.qty,flex:1,type:"number"},{field:"loss",headerName:a.loss,flex:1,type:"number"},{field:"unitCost",headerName:a.unitCost,flex:1,type:"number"},{field:"netCost",headerName:a.netCost,flex:1,type:"number"},{field:"isMetal",headerName:a.isMetal,flex:.6,type:"checkbox"}],m=r?.reduce((e,t)=>{let a=parseFloat(t?.qty?.toString().replace(/,/g,""))||0,r=parseFloat(t?.loss?.toString().replace(/,/g,""))||0;return e+a-r},0);return(0,n.jsxs)(s.R,{children:[n.jsx(d.Q,{children:n.jsx(l.Z,{name:"materialsTable",columns:o,gridData:{list:r},rowId:["itemId"],maxAccess:t,pagination:!1})}),n.jsx(i.g,{children:n.jsx(c(),{container:!0,p:4,children:n.jsx(c(),{item:!0,xs:2,children:n.jsx(u.Z,{name:"totalQty",label:a.totQty,value:m,readOnly:!0})})})})]})}l=(m.then?(await m)():m)[0],r()}catch(e){r(e)}})},8740:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>v});var n=a(20997),l=a(16689),s=a(29352),d=a(18611),i=a(23385),o=a(60520),c=a(59636),u=a(15051),m=a(95965),p=a(75609),h=a(86201),x=a(42020),f=a(99155),y=a.n(f),I=a(91184),b=a(18687),g=e([s,o,u,h,b]);function v({labels:e,maxAccess:t,store:a}){let{postRequest:r}=(0,l.useContext)(s.$),{platformLabels:f}=(0,l.useContext)(o.l),{jobOverheads:g,recordId:v,isPosted:j,isCancelled:C}=a||{},{formik:F}=(0,m.c)({maxAccess:t,validateOnChange:!0,initialValues:{items:[{id:1,jobId:v,overheadId:"",seqNo:"",amount:0,units:0,unitCost:0}]},validationSchema:p.object({items:p.array().of(p.object({overheadRef:p.string().test(function(e){let t=this.parent.units;return this.options.from[1]?.value?.items?.length===1&&(!t||0==t)||!!e}),overheadName:p.string().test(function(e){let t=this.parent.units;return this.options.from[1]?.value?.items?.length===1&&(!t||0==t)||!!e}),units:p.string().test("check-value","Units must be at least 1",function(e){if(this.parent.overheadRef){let t=Number(e);if(!e||isNaN(t))return!1}return!0})}))}),onSubmit:async e=>{let t=e?.items.map((e,t)=>({...e,seqNo:t+1,jobId:v})).filter(e=>e.overheadRef||e.units);await r({extension:c.u.JobOverhead.set2,record:JSON.stringify({jobId:v,items:t})}),h.default.success(f.Edited)}}),k=F?.values?.items?.reduce((e,t)=>{let a=Math.round(parseFloat(t?.amount?.toString().replace(/,/g,""))||0);return e+a},0),A=[{component:"resourcelookup",label:e.overheadRef,name:"overheadRef",props:{endpointId:c.u.Overhead.snapshot,displayField:"reference",valueField:"reference",mapping:[{from:"recordId",to:"overheadId"},{from:"reference",to:"overheadRef"},{from:"name",to:"overheadName"},{from:"unitCost",to:"unitCost"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:2},async onChange({row:{update:e,newRow:t}}){e({overheadId:t?.overheadId,overheadRef:t?.overheadRef,overheadName:t?.overheadName,unitCost:t?.unitCost||0})}},{component:"textfield",label:e.overheadName,name:"overheadName",props:{readOnly:!0}},{component:"numberfield",label:e.units,name:"units",async onChange({row:{update:e,newRow:t}}){e({amount:t?.units*t?.unitCost||0})}},{component:"numberfield",label:e.unitCost,name:"unitCost",props:{readOnly:!0}},{component:"numberfield",label:e.amount,name:"amount",props:{readOnly:!0}}],w=[{key:"GenerateJob",condition:!0,onClick:N,disabled:j||C}];async function N(){await r({extension:c.u.JobOverhead.generate,record:JSON.stringify({jobId:v})}),h.default.success(f.Generated)}return n.jsx(b.Z,{onSave:F.handleSubmit,maxAccess:t,editMode:!!v,actions:w,isCleared:!0,disabledSubmit:C||j,children:(0,n.jsxs)(d.R,{children:[n.jsx(i.Q,{children:n.jsx(u._,{onChange:e=>F.setFieldValue("items",e),value:F.values.items,error:F.errors.items,columns:A,initialValues:F?.initialValues?.items?.[0],name:"items",maxAccess:t,allowDelete:!j&&!C})}),n.jsx(x.g,{children:n.jsx(y(),{container:!0,p:2,children:n.jsx(y(),{item:!0,xs:2,children:n.jsx(I.Z,{name:"totalAmount",label:e.total,value:k,readOnly:!0})})})})]})})}[s,o,u,h,b]=g.then?(await g)():g,r()}catch(e){r(e)}})},39287:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>v});var n=a(20997),l=a(16689),s=a(29352),d=a(18611),i=a(23385),o=a(60520),c=a(59636),u=a(15051),m=a(95965),p=a(75609),h=a(86201),x=a(42020),f=a(99155),y=a.n(f),I=a(44619),b=a(18687),g=e([s,o,u,h,b]);function v({labels:e,maxAccess:t,store:a,refetchRouting:r,setRefetchRouting:f,setRefetchJob:g}){let{postRequest:v,getRequest:j}=(0,l.useContext)(s.$),{platformLabels:C}=(0,l.useContext)(o.l),{recordId:F,jobReference:k,jobRoutings:A}=a||{},w={Unreached:{key:5,value:"Unreached"}},{formik:N}=(0,m.c)({maxAccess:t,initialValues:{jobId:F,jobReference:k,routings:[{id:1,jobId:null,seqNo:"",name:"",workCenterId:"",operationId:"",status:w.Unreached.key,qty:"",qtyIn:"",pcs:"",pcsIn:""}]},validationSchema:p.object({routings:p.array().of(p.object({seqNo:p.string().required(),name:p.string().required(),operationName:p.string().required(),workCenterRef:p.string().required(),workCenterName:p.string().required()}))}),onSubmit:async e=>{let t=e.routings.map(e=>({...e,seqNo:parseInt(e.seqNo),status:e.status||w.Unreached.key,jobId:F}));await v({extension:c.u.JobRouting.set2,record:JSON.stringify({jobId:F,data:t})}),h.default.success(C.Edited),g(!0)}}),O=[{component:"numberfield",label:e.seqNo,name:"seqNo",flex:1,props:{unClearable:!0},propsReducer:({row:e,props:t})=>({...t,readOnly:[1,2,3,4].includes(e.status)})},{component:"textfield",label:e.seqName,name:"name",flex:2,propsReducer:({row:e,props:t})=>({...t,readOnly:[1,2,3,4].includes(e.status)})},{component:"resourcelookup",label:e.wcRef,name:"workCenterRef",flex:2,props:{endpointId:c.u.WorkCenter.snapshot,displayField:"reference",valueField:"recordId",mapping:[{from:"recordId",to:"workCenterId"},{from:"reference",to:"workCenterRef"},{from:"name",to:"workCenterName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:3},async onChange({row:{update:e,newRow:t}}){if(!t?.workCenterId){e({workCenterId:"",workCenterRef:"",workCenterName:"",operationId:"",operationRef:"",operationName:""});return}e({workCenterId:t?.workCenterId,workCenterRef:t?.workCenterRef,workCenterName:t?.workCenterName})},propsReducer:({row:e,props:t})=>({...t,readOnly:[1,2,3,4].includes(e.status)})},{component:"textfield",label:e.wcName,name:"workCenterName",flex:2.7,props:{readOnly:!0}},{component:"resourcecombobox",label:e.operation,name:"operationName",flex:2,variableParameters:[{key:"workCenterId",value:"workCenterId"}],props:{endpointId:c.u.Operation.qry,displayField:"reference",valueField:"recordId",mapping:[{from:"recordId",to:"operationId"},{from:"reference",to:"operationRef"},{from:"name",to:"operationName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:2.5},propsReducer:({row:e,props:t})=>({...t,readOnly:[1,2,3,4].includes(e.status)||!e.workCenterId})},{component:"textfield",label:e.status,name:"statusName",flex:2,props:{readOnly:!0}},{component:"numberfield",label:e.qtyIn,flex:1,name:"qtyIn",props:{readOnly:!0}},{component:"numberfield",label:e.pcsIn,flex:1,name:"pcsIn",props:{readOnly:!0}},{component:"numberfield",label:e.qty,flex:1,name:"qty",props:{readOnly:!0}},{component:"numberfield",label:e.pcs,flex:1,name:"pcs",props:{readOnly:!0}}],R=[{key:"Sync",condition:!0,onClick:D,disabled:a?.status!=1}];async function D(){if(!a?.routingId)return;let e=await j({extension:c.u.RoutingSequence.qry,parameters:`_routingId=${a?.routingId}`}),t=(e?.list||[]).map((e,t)=>({...e,id:t+1,status:w.Unreached.key,statusName:w.Unreached.value,qtyIn:0,pcsIn:0,qty:0,pcs:0}));N.setFieldValue("routings",t)}return n.jsx(b.Z,{onSave:N.handleSubmit,maxAccess:t,editMode:!!F,actions:R,disabledSubmit:a?.isCancelled||a?.isPosted,children:(0,n.jsxs)(d.R,{children:[n.jsx(x.g,{children:n.jsx(y(),{container:!0,spacing:2,children:n.jsx(y(),{item:!0,xs:4,children:n.jsx(I.Z,{value:N.values.jobReference,label:e.reference,readOnly:!0})})})}),n.jsx(i.Q,{children:n.jsx(u._,{onChange:(e,t)=>{N.setFieldValue("routings",e)},value:N.values.routings,error:N.errors.routings,columns:O,name:"routings",maxAccess:t,allowDelete:!a?.isPosted&&!a?.isCancelled,deleteHideCondition:{status:[1,2,3,4]}})})]})})}[s,o,u,h,b]=g.then?(await g)():g,r()}catch(e){r(e)}})},94107:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>v});var n=a(20997),l=a(16689),s=a(29352),d=a(18611),i=a(23385),o=a(60520),c=a(59636),u=a(15051),m=a(95965),p=a(86201),h=a(42020),x=a(99155),f=a.n(x),y=a(91184),I=a(18687),b=a(75609),g=e([s,o,u,p,I]);function v({labels:e,maxAccess:t,recordId:a}){let{postRequest:r,getRequest:x}=(0,l.useContext)(s.$),{platformLabels:g}=(0,l.useContext)(o.l),v=!!a,{formik:j}=(0,m.c)({validateOnChange:!0,initialValues:{jobId:a,data:[{id:1,jobId:a,seqNo:1,itemWeight:0}]},validationSchema:b.object({data:b.array().of(b.object({itemWeight:b.string().test("check-value","itemWeight must be at least 0.01",function(e){return!!e&&!(e<=0)})}))}),onSubmit:async e=>{let t=e.data.filter(e=>e.itemWeight).map((e,t)=>({...e,seqNo:t+1,jobId:a}));await r({extension:c.u.SamplePack.set2,record:JSON.stringify({jobId:a,data:t})}),p.default.success(g.Edited)}}),C=e=>{let t=e.length!==j.values.data.length?e.map((e,t)=>({...e,seqNo:t+1})):e;j.setFieldValue("data",t)},F=j.values.data.filter(e=>e.itemWeight>0),k=F.reduce((e,t)=>{let a=parseFloat(t?.itemWeight?.toString().replace(/,/g,""))||0;return e+a},0),A=F.length>0?k/F.length:0,w=F.length,N=[{component:"numberfield",label:e.seqNo,name:"seqNo",props:{readOnly:!0}},{component:"numberfield",label:e.itemWgt,name:"itemWeight",flex:2}];return n.jsx(I.Z,{onSave:j.handleSubmit,maxAccess:t,editMode:v,children:(0,n.jsxs)(d.R,{children:[n.jsx(i.Q,{children:n.jsx(u._,{value:j.values?.data,error:j.errors?.data,onChange:e=>C(e),initialValues:j?.initialValues?.data?.[0],columns:N,name:"data",maxAccess:t})}),n.jsx(h.g,{children:(0,n.jsxs)(f(),{container:!0,sx:{pt:2},children:[n.jsx(f(),{item:!0,xs:4,children:n.jsx(y.Z,{name:"avgWeight",label:e.average,value:A,readOnly:!0})}),n.jsx(f(),{item:!0,xs:4,children:n.jsx(y.Z,{name:"totalCount",label:e.totalCount,value:w,readOnly:!0})}),n.jsx(f(),{item:!0,xs:4,children:n.jsx(y.Z,{name:"totWeight",label:e.totWeight,value:k,readOnly:!0})})]})})]})})}[s,o,u,p,I]=g.then?(await g)():g,r()}catch(e){r(e)}})},19278:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>b});var n=a(20997),l=a(16689),s=a(29352),d=a(18611),i=a(23385),o=a(6416),c=a(42020),u=a(99155),m=a.n(u),p=a(91184),h=a(96119),x=a(60520),f=a(40711),y=a(38509),I=e([s,x,f,y]);function b({labels:e,maxAccess:t,api:a,parameters:r,window:u}){let{getRequest:I}=(0,l.useContext)(s.$),{platformLabels:b}=(0,l.useContext)(x.l);(0,h.Z)({title:b.serials,window:u});let g=[{field:"srlSeqNo",flex:.5,headerName:e.rowCount},{field:"srlNo",flex:1,headerName:e.srlNo},{field:"weight",flex:1,headerName:e.weight,type:"number"}],{query:{data:v},refetch:j}=(0,y.J)({queryFn:C,endpointId:a,datasetId:o.i.MFJobOrders,params:{disabledReqParams:!0,maxAccess:t}});async function C(){return await I({extension:a,parameters:r})}let F=v?.list?.reduce((e,t)=>e+t.weight,0);return(0,n.jsxs)(d.R,{children:[n.jsx(i.Q,{children:n.jsx(f.Z,{columns:g,gridData:v,rowId:["recordId"],maxAccess:t,refetch:j,pageSize:50,paginationType:"client"})}),n.jsx(c.g,{children:n.jsx(m(),{container:!0,spacing:2,children:n.jsx(m(),{item:!0,xs:4,sx:{p:2,ml:2},children:n.jsx(p.Z,{name:"totalWeight",label:e.totWeight,value:F,readOnly:!0})})})})]})}[s,x,f,y]=I.then?(await I)():I,b.width=680,b.height=600,r()}catch(e){r(e)}})},58798:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>C});var n=a(20997),l=a(16689),s=a(29352),d=a(18611),i=a(23385),o=a(60520),c=a(59636),u=a(15051),m=a(95965),p=a(75609),h=a(6416),x=a(86201),f=a(42020),y=a(99155),I=a.n(y),b=a(91184),g=a(54242),v=a(18687),j=e([s,o,u,x,v]);function C({labels:e,maxAccess:t,store:a}){let{postRequest:r,getRequest:y}=(0,l.useContext)(s.$),{platformLabels:j}=(0,l.useContext)(o.l),{jobItemSizes:C,isCancelled:F,isPosted:k,recordId:A}=a,{formik:w}=(0,m.c)({validateOnChange:!0,initialValues:{jobId:null,jobItemSizes:[{id:1,jobId:null,sizeId:"",expectedQty:0,expectedPcs:0,qty:0,pcs:0}]},validationSchema:p.object({jobItemSizes:p.array().of(p.object({sizeRef:p.string().test(function(e){return this.options.from[1]?.value?.jobItemSizes?.length===1||!!e}),sizeName:p.string().test(function(e){return this.options.from[1]?.value?.jobItemSizes?.length===1||!!e})}))}),onSubmit:async e=>{let t=e.jobItemSizes.map(e=>({...e,jobId:A})).filter(e=>e.sizeRef);await r({extension:c.u.JobItemSize.set2,record:JSON.stringify({jobId:A,jobItemSizes:t})}),x.default.success(j.Edited)}}),N=e=>w.values.jobItemSizes.reduce((t,a)=>{let r=parseFloat(a?.[e])||0;return t+r},0),O=N("expectedPcs"),R=N("expectedQty"),D=N("pcs"),V=N("qty"),S=[{component:"resourcelookup",label:e.sizeRef,name:"sizeRef",props:{endpointId:g.$.ItemSizes.snapshot,displayField:"reference",valueField:"reference",minChars:2,mapping:[{from:"recordId",to:"sizeId"},{from:"reference",to:"sizeRef"},{from:"name",to:"sizeName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:2},async onChange({row:{update:e,newRow:t}}){e({sizeId:t?.sizeId,sizeRef:t?.sizeRef,sizeName:t?.sizeName})}},{component:"textfield",label:e.sizeName,name:"sizeName",props:{readOnly:!0}},{component:"numberfield",label:e.expectedPcs,name:"expectedPcs",props:{maxLength:6}},{component:"numberfield",label:e.expectedQty,name:"expectedQty",props:{maxLength:6}},{component:"numberfield",label:e.pcs,name:"pcs",props:{maxLength:6}},{component:"numberfield",label:e.qty,name:"qty",props:{maxLength:6}}];return n.jsx(v.Z,{resourceId:h.i.MFJobOrders,onSave:w.handleSubmit,maxAccess:t,disabledSubmit:F||k,children:(0,n.jsxs)(d.R,{children:[n.jsx(i.Q,{children:n.jsx(u._,{onChange:e=>w.setFieldValue("jobItemSizes",e),value:w.values.jobItemSizes,error:w.errors.jobItemSizes,initialValues:w?.initialValues?.jobItemSizes?.[0],columns:S,name:"jobItemSizes",maxAccess:t,allowDelete:k&&F})}),n.jsx(f.g,{children:(0,n.jsxs)(I(),{container:!0,spacing:2,p:1,children:[n.jsx(I(),{item:!0,xs:3,children:n.jsx(b.Z,{name:"totExpectedPcs",label:e.totExpectedPcs,value:O,readOnly:!0})}),n.jsx(I(),{item:!0,xs:3,children:n.jsx(b.Z,{name:"totExpectedQty",label:e.totExpectedQty,value:R,readOnly:!0})}),n.jsx(I(),{item:!0,xs:3,children:n.jsx(b.Z,{name:"totPcs",label:e.totPcs,value:D,readOnly:!0})}),n.jsx(I(),{item:!0,xs:3,children:n.jsx(b.Z,{name:"totQty",label:e.totQty,value:V,readOnly:!0})})]})})]})})}[s,o,u,x,v]=j.then?(await j)():j,r()}catch(e){r(e)}})},18512:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>o});var n=a(20997),l=a(40711),s=a(18611),d=a(23385),i=e([l]);l=(i.then?(await i)():i)[0];let o=({labels:e,maxAccess:t,store:a})=>{let r=[{field:"workCenterRef",headerName:e.workCenterRef,flex:1},{field:"workCenterName",headerName:e.workCenterName,flex:1},{field:"qty",headerName:e.qty,flex:1},{field:"pcs",headerName:e.pcs,flex:1},{field:"statusName",headerName:e.status,flex:1}];return n.jsx(s.R,{children:n.jsx(d.Q,{children:n.jsx(l.Z,{name:"workCenterTable",columns:r,gridData:{list:a?.jobWorkCenters||[]},rowId:["recordId"],pageSize:50,pagination:!1,maxAccess:t})})})};r()}catch(e){r(e)}})},69778:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>m});var n=a(20997),l=a(16689),s=a(40711),d=a(18611),i=a(23385),o=a(91677),c=a(677),u=e([s,o,c]);function m({store:e,maxAccess:t,labels:a}){let{stack:r}=(0,c.zY)(),{jobWorksheets:u,jobReference:m}=e||{},[p,h]=(0,l.useState)([]),x=[{field:"reference",headerName:a.reference,flex:1},{field:"date",headerName:a.date,flex:1,type:"date"},{field:"jobRef",headerName:a.jobRef,flex:1},{field:"wcName",headerName:a.workCenter,flex:1},{field:"laborName",headerName:a.labor,flex:1},{field:"statusName",headerName:a.status,flex:1}];return n.jsx(d.R,{children:n.jsx(i.Q,{children:n.jsx(s.Z,{name:"worksheetTable",columns:x,gridData:{list:(p||[])?.map(e=>({...e,jobRef:m}))},onEdit:e=>{var t;t=e?.recordId,r({Component:o.Z,props:{recordId:t,joInvalidate:refetch}})},rowId:["worksheetId"],maxAccess:t,pagination:!1})})})}[s,o,c]=u.then?(await u)():u,r()}catch(e){r(e)}})},34757:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>y});var n=a(20997),l=a(34698),s=a(21061),d=a(16689),i=a(97609),o=a(39287),c=a(69778),u=a(8740),m=a(19419),p=a(58798),h=a(18512),x=a(35923),f=e([i,o,c,u,m,p,h,x]);[i,o,c,u,m,p,h,x]=f.then?(await f)():f;let y=({recordId:e,jobReference:t,access:a,labels:r,invalidate:f,lockRecord:y,window:I})=>{let[b,g]=(0,d.useState)(0),[v,j]=(0,d.useState)({recordId:e,jobReference:t,isPosted:!1,isCancelled:!1}),[C,F]=(0,d.useState)(!1),[k,A]=(0,d.useState)(!1),w=[{label:r.jobOrder},{label:r.routing,disabled:!v.recordId,onRefetch:()=>{F(!0)}},{label:r.worksheet,disabled:!v.recordId},{label:r.overhead,disabled:!v.recordId},{label:r.materials,disabled:!v.recordId},{label:r.size,disabled:!v.recordId},{label:r.workCenter,disabled:!v.recordId},{label:r.item,disabled:!v.recordId}];return(0,n.jsxs)(n.Fragment,{children:[n.jsx(s.Y,{tabs:w,activeTab:b,setActiveTab:g,maxAccess:a}),n.jsx(l.Z,{index:0,value:b,maxAccess:a,children:n.jsx(i.Z,{store:v,setStore:j,labels:r,maxAccess:a,setRefetchRouting:F,invalidate:f,lockRecord:y,refetchJob:k,setRefetchJob:A,window:I})}),n.jsx(l.Z,{index:1,value:b,maxAccess:a,children:n.jsx(o.Z,{store:v,labels:r,maxAccess:a,refetchRouting:C,setRefetchRouting:F,setRefetchJob:A})}),n.jsx(l.Z,{index:2,value:b,maxAccess:a,children:n.jsx(c.Z,{store:v,labels:r,maxAccess:a})}),n.jsx(l.Z,{index:3,value:b,maxAccess:a,children:n.jsx(u.Z,{store:v,labels:r,maxAccess:a})}),n.jsx(l.Z,{index:4,value:b,maxAccess:a,children:n.jsx(m.Z,{store:v,labels:r,maxAccess:a})}),n.jsx(l.Z,{index:5,value:b,maxAccess:a,children:n.jsx(p.Z,{store:v,labels:r,maxAccess:a})}),n.jsx(l.Z,{index:6,value:b,maxAccess:a,children:n.jsx(h.Z,{store:v,labels:r,maxAccess:a})}),n.jsx(l.Z,{index:7,value:b,maxAccess:a,children:n.jsx(x.Z,{store:v,labels:r,maxAccess:a})})]})};r()}catch(e){r(e)}})},93105:(e,t,a)=>{a.d(t,{m:()=>n});var r=a(75609);function n(e,t,a,n="items"){let l={...e};return a?.record?.controls.forEach(({controlId:e,accessLevel:t})=>{let[a,r]=e?.split(".");a!==n||2!==t||r in l||(l[r]=e=>e?.[r]!=null),(1===t||4===t)&&r in l&&delete l[r]}),{schema:r.object().shape({...Object.keys(l).reduce((e,a)=>(e[a]=r.mixed().nullable().test(function(e){let r=this.parent,[,n]=this.path.match(/^(\w+)\[(\d+)\]/)||[],s=this.options.context?.[n]||[];if(t||!t&&s.length>1){if(null!==r[a]&&void 0!==r[a]&&0!==r[a]&&""!==l[a]&&!l[a](r))return!1;if(!Object.entries(l).some(([,e])=>!!e(r)))return!0}return!!l[a](r)&&void 0!==e}),e),{})}),requiredFields:l}}},9972:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(20997),n=a(30343),l=a.n(n),s=a(18611),d=a(23385);let i=({DialogText:e,bottomSection:t})=>(0,r.jsxs)(s.R,{children:[r.jsx(d.Q,{children:r.jsx(l(),{sx:{p:12},textAlign:"center",children:e})}),t]});i.width=600,i.height=200;let o=i}};