exports.id=97475,exports.ids=[97475],exports.modules={6021:(e,a)=>{"use strict";Object.defineProperty(a,"l",{enumerable:!0,get:function(){return function e(a,t){return t in a?a[t]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,t)):"function"==typeof a&&"default"===t?a:void 0}}})},3:e=>{e.exports={root:"WorkFlow_root__EINm1"}},2884:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var r=t(20997),n=t(16689),s=t(331),l=t.n(s),c=t(9552),o=t.n(c),i=t(70075);class d extends l(){render(){return(0,r.jsxs)(s.Html,{lang:"en",children:[(0,r.jsxs)(s.Head,{children:[r.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),r.jsx("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"}),r.jsx("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon.png"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"}),r.jsx("link",{rel:"shortcut icon",href:"/favicon.ico"}),r.jsx("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),r.jsx("meta",{name:"theme-color",content:"#231f20"})]}),(0,r.jsxs)("body",{children:[r.jsx(s.Main,{}),r.jsx(s.NextScript,{})]})]})}}d.getInitialProps=async e=>{let a=e.renderPage,t=(0,i.S)(),{extractCriticalToChunks:s}=o()(t);e.renderPage=()=>a({enhanceApp:e=>a=>r.jsx(e,{...a,emotionCache:t})});let c=await l().getInitialProps(e),d=s(c.html).styles.map(e=>r.jsx("style",{"data-emotion":`${e.key} ${e.ids.join(" ")}`,dangerouslySetInnerHTML:{__html:e.css}},e.key));return{...c,styles:[...n.Children.toArray(c.styles),...d]}};let p=d},13704:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});let r="LO.asmx/",n={LoCollector:{qry:r+"qryCOL",get:r+"getCOL",set:r+"setCOL",page:r+"pageCOL",del:r+"delCOL"},LoCarrier:{qry:r+"qryCAR",get:r+"getCAR",set:r+"setCAR",page:r+"pageCAR",del:r+"delCAR"},Shipment:{get2:r+"get2SHP",set2:r+"set2SHP"},Transportation:{get:r+"getTPT",set:r+"setTPT"}}},5162:(e,a,t)=>{"use strict";t.d(a,{Z:()=>o});var r=t(20997),n=t(99155),s=t.n(n),l=t(13367),c=t.n(l);let o=({children:e,title:a,form:t=!1,...n})=>(0,r.jsxs)(s(),{container:!0,spacing:{xs:1,sm:1.25,md:1.5},sx:{border:"1px solid",borderColor:"#cdd3d4",position:"relative",ml:0,my:a?{xs:.75,sm:1,md:1.25}:0,p:t?0:"clamp(8px, 0.8vw, 14px)",pt:t?0:a?"clamp(14px, 1.2vw, 22px)":"clamp(8px, 0.8vw, 14px)",...n.sx},children:[!!a&&r.jsx(c(),{variant:"h6",sx:{position:"absolute",top:"clamp(-12px, -0.9vw, -8px)",left:"clamp(10px, 1vw, 14px)",bgcolor:"#F4F5FA",px:"clamp(6px, 0.7vw, 12px)",py:"clamp(1px, 0.2vw, 3px)",fontSize:"clamp(10px, 0.75vw, 14px)",lineHeight:1.2,fontWeight:600,whiteSpace:"nowrap",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis"},children:a}),e]})},15105:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(a,{u:()=>q});var n=t(20997),s=t(18611),l=t(42020),c=t(23385),o=t(6416),i=t(99155),d=t.n(i),p=t(44619),m=t(71278),u=t(15051),x=t(95965),g=t(13704),f=t(75609),h=t(38509),y=t(16689),k=t(29352),v=t(97969),j=t(37557),I=t(86201),b=t(5162),w=t(70305),A=t(96119),N=t(60520),C=t(18687),S=e([m,u,h,k,I,w,N,C]);[m,u,h,k,I,w,N,C]=S.then?(await S)():S;let q=({recordId:e,functionId:a,editMode:t,totalBaseAmount:r,window:i})=>{let{postRequest:S,getRequest:q}=(0,y.useContext)(k.$),[P,O]=(0,y.useState)(null),{stack:R}=(0,w.V)(),{platformLabels:F}=(0,y.useContext)(N.l);(0,A.Z)({title:F.Transportation,window:i});let{formik:L}=(0,x.c)({initialValues:{recordId:e,functionId:a,policyNo:"",carrierId:"",packages:[{id:1,recordId:"",functionId:"",seqNo:"",packageType:"",qty:"",amount:"",packageReferences:[{id:1,typeId:"",packageSeqNo:"",recordId:"",functionId:"",seqNo:1,reference:""}]}]},validateOnChange:!0,validationSchema:f.object({carrierId:f.string().required(),packages:f.array().of(f.object().shape({packageTypeName:f.string().required(),qty:f.string().required(),amount:f.string().required()})).required()}),onSubmit:async t=>{let r=L.values.packages.map((t,r)=>({...t,seqNo:r+1,recordId:e,functionId:a,packageReferences:t.packageReferences.map(t=>({seqNo:r+1,recordId:e,functionId:a,reference:t.reference}))?.filter(e=>!!e?.reference)||[]})),n={header:{recordId:e,functionId:a,carrierId:t.carrierId,policyNo:t.policyNo},packages:r};await S({extension:g.p.Shipment.set2,record:JSON.stringify(n)}),I.default.success("Record Updated Successfully")}}),_=L.values.packages.findIndex(e=>e.id===P),{labels:E,maxAccess:T}=(0,h.J)({datasetId:o.i.LOShipments}),Z=L.values?.packages?.reduce((e,a)=>{let t=parseFloat(a.qty?.toString().replace(/,/g,""))||0;return e+t},0),V=L.values?.packages?.reduce((e,a)=>{let t=parseFloat(a.amount?.toString().replace(/,/g,""))||0;return e+t},0),$=e=>{L.values.packages[_]?.packageReferences?.length<e.length&&(e[L.values.packages[_]?.packageReferences?.length].seqNo=L.values.packages[_]?.packageReferences?.length+1),L.setFieldValue(`packages[${_}].packageReferences`,e)},D=(e,a)=>{let t=e.target.value;if(L.values.packages.some(e=>e.packageReferences.some((e,r)=>e.reference===t&&r!==a-1))){R({message:E.referenceDuplicateMessage});let e=[...L.values.packages[_].packageReferences],t=a-1;e[t]={id:t,...e[t],reference:""},L.setFieldValue(`packages[${_}].packageReferences`,e)}},G=e=>{let a=e?.map(e=>{let a=parseInt(e?.qty,10),t=e?.packageReferences;return t?.length===0&&(t=[{seqNo:1,id:1,reference:""}]),a<t?.length&&(t=t.slice(0,a)),e.packageReferences=t,e});L.setFieldValue("packages",a)};return(0,y.useEffect)(()=>{!async function(){if(e&&a){let t=await q({extension:g.p.Shipment.get2,parameters:`_recordId=${e}&_functionId=${a}`}),r=t.record.packages.map((e,a)=>({...e,id:a+1,packageReferences:e?.packageReferences?.map((e,a)=>({...e,id:a+1,seqNo:a+1}))}));O(t.record?.packages?.length>0&&1),t?.record?.header&&L.setValues({...t.record.header,packages:r})}}()},[]),n.jsx(C.Z,{onSave:L.handleSubmit,editMode:!0,children:(0,n.jsxs)(s.R,{children:[n.jsx(l.g,{children:(0,n.jsxs)(d(),{container:!0,wrap:"nowrap",spacing:2,children:[n.jsx(d(),{item:!0,xs:6,children:n.jsx(m.Z,{endpointId:g.p.LoCarrier.qry,name:"carrierId",label:E.carrier,values:L.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:t,maxAccess:T,onChange:(e,a)=>{L&&L.setFieldValue("carrierId",a?a.recordId:"")},error:L.touched.carrierId&&!!L.errors.carrierId})}),n.jsx(d(),{item:!0,xs:6,children:n.jsx(p.Z,{name:"policyNo",label:E.policyNo,value:L.values.policyNo,onChange:L.handleChange,onClear:()=>L.setFieldValue("policyNo",""),maxAccess:T,maxLength:"30",readOnly:t,error:L.touched.policyNo&&!!L.errors.policyNo})})]})}),n.jsx(c.Q,{children:(0,n.jsxs)(d(),{container:!0,xs:12,spacing:2,children:[n.jsx(d(),{item:!0,xs:8,sx:{display:"flex",flex:1},children:n.jsx(b.Z,{sx:{flex:1},children:(0,n.jsxs)(d(),{container:!0,wrap:"nowrap",sx:{flexDirection:"column",flex:1},children:[n.jsx(c.Q,{children:n.jsx(u._,{onChange:e=>G(e),value:L.values.packages,error:L.errors.packages,maxAccess:T,rowSelectionModel:P,allowAddNewLine:!t,initialValues:L?.initialValues?.packages?.[0],allowDelete:!t,onSelectionChange:e=>{e&&O(e.id)},columns:[{component:"resourcecombobox",label:E.type,name:"packageTypeName",props:{datasetId:v.v.PACKAGE_TYPE,displayField:"value",valueField:"key",mapping:[{from:"key",to:"packageType"},{from:"value",to:"packageTypeName"}],readOnly:t}},{component:"numberfield",name:"qty",label:E.qty,props:{readOnly:t}},{component:"numberfield",label:E.amount,name:"amount",props:{readOnly:t}}]})}),n.jsx(l.g,{children:(0,n.jsxs)(d(),{container:!0,direction:"row",wrap:"nowrap",sx:{pt:5,justifyContent:"flex-end"},children:[n.jsx(d(),{item:!0,xs:3,children:n.jsx(p.Z,{name:"totalBaseAmount",maxAccess:T,value:(0,j.bj)(r),label:E.totalBaseAmount,readOnly:!0})}),n.jsx(d(),{item:!0,xs:3,sx:{pl:3},children:n.jsx(p.Z,{name:"totalQty",maxAccess:T,value:(0,j.bj)(Z),label:E.totalQty,readOnly:!0})}),n.jsx(d(),{item:!0,xs:3,sx:{pl:3},children:n.jsx(p.Z,{name:"totalAmount",maxAccess:T,value:(0,j.bj)(V.toFixed(2)),label:E.totalAmount,readOnly:!0})})]})})]})})}),n.jsx(d(),{item:!0,xs:4,sx:{display:"flex",flex:1},children:n.jsx(b.Z,{xs:4,sx:{flex:1},children:n.jsx(c.Q,{children:P&&L.values.packages[_]&&n.jsx(u._,{onChange:e=>$(e),value:L.values.packages.find(e=>e.id===P).packageReferences||[{seqNo:"1",id:1,reference:""}],maxAccess:T,allowAddNewLine:!t&&L?.values?.packages[_]?.packageReferences?.length<parseInt(L?.values?.packages[_]?.qty,10),allowDelete:!1,columns:[{component:"numberfield",name:"seqNo",label:E.seqNo,props:{readOnly:!0}},{component:"textfield",label:E.cellNumber,name:"reference",props:{maxLength:20,mandatory:!0,readOnly:t},onBlur:(e,a)=>D(e,a),onKeyDown:(e,a)=>D(e,a)}]},P)})})})]})})]})})};q.width=1200,q.height=670,r()}catch(e){r(e)}})},70638:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>f});var n=t(20997),s=t(16689),l=t(97996),c=t(29352),o=t(73846),i=t(96119),d=t(60520),p=t(20562),m=t(3),u=t.n(m),x=e([c,o,d]);[c,o,d]=x.then?(await x)():x;let g=({functionId:e,recordId:a,window:t})=>{let{getRequest:r}=(0,s.useContext)(c.$),{languageId:m}=(0,s.useContext)(o.V),{platformLabels:x}=(0,s.useContext)(d.l),g=a+"-"+e;(0,i.Z)({title:x.WorkFlow,window:t});let{width:f}=(0,p.d)(),h=f<=1024,y=f>1024&&f<=1280,k=h?10:y?12:14,v=h?75:y?85:95,j=h?15:y?20:25,I=async()=>{var t=`_functionId=${e}&_recordId=${a}`;let n=await r({extension:l.P.WorkFlow.graph,parameters:t});return n?.record},b=e=>{let a=[],t=[],r="",n="";return e.objects.forEach(e=>{a.push({functionName:e.functionName,reference:e.reference,date:e.date})}),e.workflow.forEach(a=>{e.objects.forEach(e=>{let t=e.functionName.split(" ").join("\r\n");a.parentId===e.recordId&&a.parentFunctionId===e.functionId&&(r=e.reference+"\r\n"+e.date+"\r\n"+t,a.parentId),a.childId===e.recordId&&a.childFunctionId===e.functionId&&(n=e.reference+"\r\n"+e.date+"\r\n"+t,a.childId)}),""===r||""===n||t.push({from:r,to:n,value:1,labelText:""}),r="",n=""}),t};return(0,s.useEffect)(()=>{!async function(){var e=await I();if(e){let a=(e,a)=>{let t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,t.onload=a,document.head.appendChild(t)};a("https://cdn.amcharts.com/lib/4/core.js",()=>{a("https://cdn.amcharts.com/lib/4/charts.js",()=>{a("https://cdn.amcharts.com/lib/4/themes/animated.js",()=>{am4core.ready(()=>{let a=am4core.create(g,am4charts.SankeyDiagram),t=b(e);a.data=t,a.dataFields.fromName="from",a.dataFields.toName="to",a.dataFields.value="value",a.paddingRight=2===m?0:40,a.paddingLeft=2===m?40:0,a.tooltip.label.fontSize=k;let r=a.nodes.template;r.draggable=!1,r.inert=!0,r.clickable=!1,r.width=v,r.height=j,r.nameLabel.label.fontSize=k,r.nameLabel.locationX=2===m?.85:0,r.nameLabel.height=void 0,r.nameLabel.label.fontWeight="bold";let n=a.links.template;n.middleLine.strokeOpacity=.3,n.middleLine.stroke=am4core.color("#555"),n.middleLine.strokeWidth=5,n.middleLine.hoverable=!1,n.fillOpacity=0,n.hoverable=!0,n.hoverOnFocus=!0,n.fill=am4core.color("#A8C686"),n.isHover=!0,a.appear(1e3,100)})})})})}}()},[]),n.jsx("div",{id:g,className:u().root})};g.width=950;let f=g;r()}catch(e){r(e)}})},84591:(e,a)=>{"use strict";var t;Object.defineProperty(a,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))}};