exports.id=86979,exports.ids=[86979],exports.modules={27410:e=>{e.exports={smallSwitch:"CustomSwitch_smallSwitch__tkyfn"}},58905:(e,a,r)=>{"use strict";r.d(a,{L:()=>n});let t="RTBI.asmx/",n={Combos:{qryCBX:t+"qryCBX",qryTerrapayCBX:t+"qryTerrapayCBX",qryTerrapyBanks:t+"qryTerrapyBanks",terrapayAccountStatus:t+"terrapayAccountStatus"},ReceivingCountries:{qry:t+"qryRVC"},PayingAgent:{qry:t+"qryAGT"},Bank:{snapshot:t+"snapshotBank"},InstantCashRates:{qry:t+"qryICFees",get:t+"getICFees"},exchange:{get:t+"getICExchangeRates"},Agents:{qry:t+"qryAgents"},Currencies:{qry:t+"qryBICurrencies"},Countries:{qry:t+"qryBICountries"},DeliveryMode:{qry:t+"qryBIDVRow"},ATPExchangeRate:{get2:t+"getATPExchangeRate2"}}},74353:(e,a,r)=>{"use strict";r.d(a,{Z:()=>m});var t=r(20997);r(16689);var n=r(73632),i=r.n(n),d=r(47501),l=r.n(d),s=r(86085),o=r.n(s),c=r(27410),u=r.n(c);function m({label:e,readOnly:a,onChange:r,...n}){return t.jsx(l(),{className:`${o().outlinedRoot} ${u().smallSwitch}`,control:t.jsx(i(),{color:"primary",onChange:!a&&r,...n}),label:t.jsx("div",{className:o().inputLabel,children:e})})}},11545:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>h});var n=r(20997),i=r(40711),d=r(16689),l=r(65305),s=r(29352),o=r(2296),c=r(18687),u=r(18611),m=r(82099),y=e([i,s,c]);[i,s,c]=y.then?(await y)():y;let h=({form:e,maxAccess:a,labels:r,onSubmit:t,window:y})=>{let{getRequest:h}=(0,d.useContext)(s.$),p=(0,o.useFormik)({initialValues:{clientId:e.clientId,benList:[]},validateOnChange:!0,onSubmit:e=>{let a=e?.benList?.find(e=>e?.checked);t({beneficiaryId:a?.beneficiaryId||null,beneficiaryName:a?.name||null,beneficiarySeqNo:a?.seqNo||null,branchCode:a?.branchCode}),y.close()}});async function f(){let a=await h({extension:l.N.Beneficiary.qry3,parameters:`_clientId=${e.clientId}&_dispersalId=${e.dispersalType}&_countryId=${e.countryId}&_currencyId=${e.currencyId}`});a.list=(a?.list||[]).map(a=>(a.beneficiaryId==e.beneficiaryId&&(a.checked=!0),a)),p.setFieldValue("benList",a.list??{list:[]})}let x=[{field:"name",headerName:r.name,flex:1},{field:"addressLine1",headerName:r.addressLine1,flex:1},{field:"nationalityName",headerName:r.nationalityId,flex:1},{field:"currencyRef",headerName:r.Currency,flex:1},{field:"countryName",headerName:r.country,flex:1},{field:"accountReference",flex:1},{field:"branchName",headerName:r.branchName,flex:1},{field:"dispersalTypeName",headerName:r.dispersalType,flex:1}];return(0,d.useEffect)(()=>{f()},[]),n.jsx(c.Z,{onSave:p.handleSubmit,maxAccess:a,fullSize:!0,children:n.jsx(u.R,{children:n.jsx(m.default,{children:n.jsx(i.Z,{name:"benTable",columns:x,gridData:{list:p.values.benList},rowId:["beneficiaryId"],rowSelection:"single",pagination:!1,maxAccess:a,showCheckboxColumn:!0})})})})};t()}catch(e){t(e)}})},22400:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>N});var n=r(20997),i=r(99155),d=r.n(i),l=r(71278),s=r(38509),o=r(6416),c=r(58905),u=r(44619),m=r(5162),y=r(61274),h=r(16689),p=r(95965),f=r(75609),x=r(91184),I=r(29352);r(79660);var b=r(70305),v=r(23385),C=r(18611),g=r(18687),A=e([l,s,y,I,b,g]);function N({onSubmit:e,cashData:a={},window:r,clientData:t,productData:{deliveryModeId:i,payingAgent:A,payingCurrency:N},outwardsData:j,sysDefault:q}){let{getRequest:k}=(0,h.useContext)(I.$),{stack:D}=(0,b.V)(),R=!!j?.recordId,{labels:S,maxAccess:F}=(0,s.J)({datasetId:o.i.InstantCash}),{formik:w}=(0,p.c)({maxAccess:F,initialValues:{deliveryModeId:i,payingAgent:A,sourceCurrency:q.currencyRef,targetCurrency:N,sourceAmount:j?.amount||0,toCountryId:"",totalTransactionAmountPerAnnum:t.hiddenTrxAmount,transactionsPerAnnum:t.hiddenTrxCount,remitter:{relation:t.relation,otherRelation:t.otherRelation,employerName:t.employerName,employerStatus:t?.employerStatus},beneficiary:{address:{postCode:t.postCode},bankDetails:{bankCode:t.bankDetails?.bankCode,bankName:t.bankDetails?.bankName,bankAddress1:t.bankDetails?.bankAddress1}}},validateOnChange:!0,validationSchema:f.object({deliveryModeId:f.number().required(),payingAgent:f.string().required(),sourceAmount:f.number().required(),remitter:f.object().shape({employerName:f.string().required(),employerStatus:f.string().required()}),beneficiary:f.object().shape({bankDetails:f.object().shape({bankName:f.string().required()})})}),onSubmit:a=>{e(a),r.close()}});return n.jsx(g.Z,{onSave:w.handleSubmit,maxAccess:F,disabledSubmit:R,children:n.jsx(C.R,{children:n.jsx(v.Q,{children:(0,n.jsxs)(d(),{container:!0,spacing:2,children:[n.jsx(d(),{item:!0,container:!0,xs:12,children:n.jsx(d(),{hideonempty:!0,xs:6,children:n.jsx(x.Z,{name:"sourceAmount",onChange:w.handleChange,label:S.sourceAmount,value:w.values.sourceAmount,error:w.touched.sourceAmount&&!!w.errors.sourceAmount,maxAccess:F,required:!0,readOnly:!0,onClear:()=>w.setFieldValue("sourceAmount","")})})}),n.jsx(d(),{item:!0,xs:6,children:(0,n.jsxs)(m.Z,{title:S.remitter,children:[n.jsx(d(),{item:!0,xs:12,children:n.jsx(u.Z,{name:"otherRelation",onChange:e=>w.setFieldValue("remitter.otherRelation",e.target.value),label:S.otherRelation,value:w.values.remitter.otherRelation,readOnly:R,error:w.touched.remitter?.otherRelation&&!!w.errors.remitter?.otherRelation})}),n.jsx(d(),{item:!0,xs:12,children:n.jsx(u.Z,{name:"remitter.employerName",required:!0,readOnly:!0,onChange:e=>w.setFieldValue("remitter.employerName",e.target.value),label:S.employerName,onClear:()=>w.setFieldValue("remitter.employerName",""),value:w.values.remitter.employerName,error:w.touched.remitter?.employerName&&!!w.errors.remitter?.employerName})}),n.jsx(d(),{item:!0,xs:12,children:n.jsx(l.Z,{endpointId:c.L.Combos.qryCBX,parameters:"_combo=4",name:"remitter.employerStatus",label:S.employerStatus,required:!0,readOnly:R,valueField:"name",displayField:"name",values:w.values.remitter.employerStatus,onChange:(e,a)=>{w.setFieldValue("remitter.employerStatus",a?a?.name:"")},maxAccess:F,error:w.touched.remitter?.employerStatus&&!!w.errors.remitter?.employerStatus})})]})}),n.jsx(d(),{item:!0,xs:6,children:(0,n.jsxs)(m.Z,{title:S.beneficiary,children:[n.jsx(d(),{item:!0,xs:12,children:n.jsx(y.U,{endpointId:c.L.Bank.snapshot,parameters:{_receivingCountry:w.values.toCountryId,_payingAgent:w.values.payingAgent,_deliveryMode:w.values.deliveryModeId,_payoutCurrency:w.values.targetCurrency},required:!0,valueField:"name",displayField:"bankName",name:"beneficiary.bankDetails.bankName",label:S.bank,form:w,firstValue:w.values.beneficiary.bankDetails.bankName,readOnly:!(w.values.deliveryModeId&&w.values.payingAgent)||R,maxAccess:F,secondDisplayField:!1,onChange:async(e,a)=>{w.setFieldValue("beneficiary.bankDetails.bankCode",a?.recordId),w.setFieldValue("beneficiary.bankDetails.bankAddress1",a?.address1),w.setFieldValue("beneficiary.bankDetails.bankName",a?.name||"")},error:w.touched.beneficiary?.bankDetails?.bankName&&!!w.errors.beneficiary?.bankDetails?.bankName})}),n.jsx(d(),{item:!0,xs:12,children:n.jsx(u.Z,{numberField:!0,name:"beneficiary.address.postCode",readOnly:R,onChange:e=>w.setFieldValue("beneficiary.address.postCode",e.target.value),onClear:()=>w.setFieldValue("beneficiary.address.postCode",""),label:S.postalCode,value:w.values.beneficiary.address.postCode,error:w.touched.beneficiary?.address?.postCode&&!!w.errors.beneficiary?.address?.postCode,maxAccess:F})})]})})]})})})})}[l,s,y,I,b,g]=A.then?(await A)():A,t()}catch(e){t(e)}})},86979:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>K});var n=r(20997),i=r(16689),d=r(99155),l=r.n(d),s=r(75609),o=r(677),c=r(44619),u=r(80582),m=r(6416),y=r(71278),h=r(65305),p=r(29352),f=r(20295),x=r(44438),I=r(22400),b=r(47851),v=r(74548),C=r(61274),g=r(30967),A=r(64938),N=r(8995),j=r(79660),q=r(27736),k=r(79390),D=r(70305),R=r(86201),S=r(68728),F=r(5162),w=r(97969),O=r(91370),V=r(16774),T=r(91184),Z=r(18611),_=r(23385),$=r(86794),P=r(95965),L=r(38509),M=r(60520),B=r(11545),E=r(75281),J=r(16330),U=r(74353),X=r(70755),Q=r(38782),z=r(96119),G=e([o,u,y,p,f,x,I,b,C,A,D,R,$,L,M,B,J,Q]);[o,u,y,p,f,x,I,b,C,A,D,R,$,L,M,B,J,Q]=G.then?(await G)():G;let H=({recordId:e,plantId:a,userId:r,dtId:t,window:d})=>{let{getRequest:G,postRequest:H}=(0,i.useContext)(p.$),{stack:K}=(0,o.zY)(),{stack:W}=(0,D.V)(),{platformLabels:Y,defaultsData:ee}=(0,i.useContext)(M.l),ea=(0,E.m)("userData"),er=parseInt(ee?.list?.find(e=>"vatPct"===e.key)?.value)||0,[et,en]=(0,i.useState)({countryRef:"",currencyRef:""}),{labels:ei,access:ed}=(0,Q.Z)({datasetId:m.i.OutwardsOrder,editMode:!!e});(0,z.Z)({title:ei.OutwardsOrder,window:d});let{maxAccess:el}=(0,$.H)({functionId:S.J.OutwardsOrder,access:ed,objectName:"header",hasDT:!1}),es=(0,L.E)({endpointId:h.N.OutwardsOrder.snapshot}),eo={idNo:"",firstName:"",middleName:"",lastName:"",fl_firstName:"",fl_middleName:"",fl_lastName:"",expiryDate:null,professionId:"",recordId:e,header:{countryName:"",countryRef:"",currencyRef:"",dispersalName:"",dispersalRef:"",currencyName:"",currentIsoCode:"",countryIsoCode:" ",corRef:null,corName:null,clientRef:"",clientName:"",cellPhone:"",statusName:"",wipName:"",rsName:null,beneficiaryName:"",plantName:null,plantRef:null,cashAccountRef:null,cashAccountName:null,poeName:"",poeRef:"",productName:"",interfaceId:"",wfStatusName:"",plantId:a,userId:r,countryId:"",lcAmount:"",corId:null,rateCalcMethod:null,dispersalType:null,currencyId:null,wip:1,productId:"",dispersalId:"",clientId:"",category:"",beneficiaryId:"",beneficiarySeqNo:"",fcAmount:null,exRate:1,commission:"",valueDate:new Date,defaultValueDate:new Date,vatAmount:null,tdAmount:0,defaultCommission:12,amount:0,taxPercent:er,poeId:"",nationalityId:null,receiptId:null,wfStatus:1,rateTypeId:1,includingFees:!1,dtId:t||null,batchId:null,reference:"",status:1,releaseStatus:null,date:new Date,isVerified:null,recordId:e,branchCode:""},products:[{}],ICRequest:[{}],tokenNo:"",vatRate:er,hiddenTrxAmount:"",hiddenTrxCount:"",agentCode:"AE01BH",terraPayDetails:{quotation:{requestDate:new Date,debitorMSIDSN:"",creditorMSIDSN:"",creditorBankAccount:"",creditorReceivingCountry:"",requestAmount:"",requestCurrency:"",sendingCurrency:"",receivingCurrency:""},transaction:{amount:"",currency:"",type:"inttransfer",descriptionText:"",requestDate:new Date,requestingOrganisationTransactionReference:"",debitorMSIDSN:"",creditorBankAccount:"",creditorSortCode:"0001",creditorBankSubCode:"",creditorAccounttype:"Savings",creditorOrganisationid:"",senderKyc:{nationality:"",dateOfBirth:"",gender:"",idDocument:[],postalAddress:{addressLine1:"",addressLine2:"",addressLine3:"",city:"",stateProvince:"",postalCode:"",country:""},subjectName:{title:"",firstName:"",middleName:"",lastName:"",fullName:""}},recipientKyc:{nationality:"",dateOfBirth:"",idDocument:[],postalAddress:{addressLine1:"",addressLine2:"",addressLine3:"",city:"",stateProvince:"",postalCode:"",country:""},subjectName:{title:"",firstName:"",middleName:"",lastName:"",fullName:""}},internationalTransferInformation:{quoteId:"",receivingCountry:"",remittancePurpose:"",sourceOfFunds:"",relationshipSender:""}}}},{formik:ec}=(0,P.c)({maxAccess:el,initialValues:eo,validateOnChange:!0,validationSchema:s.object({header:s.object({date:s.date().required(),valueDate:s.date().required(),countryId:s.number().required(),dispersalType:s.number().required(),currencyId:s.number().required(),fcAmount:s.number().required(),productId:s.number().required(),commission:s.number().required(),lcAmount:s.number().required(),amount:s.number().required(),exRate:s.number().required(),clientId:s.number().required(),poeId:s.number().required(),beneficiaryId:s.number().required(),tdAmount:s.number().test(function(e){let{commission:a}=this.parent;return e<=a})})}),onSubmit:async(a,r)=>{let t=a.header;if(1===t.interfaceId&&!a.ICRequest?.beneficiary?.bankDetails?.bankName&&!a.ICRequest?.remitter?.employerStatus||2===t.interfaceId&&!a.terraPayDetails.transaction.internationalTransferInformation?.relationshipSender)throw eR(),{silent:!0};let n={header:{...t,date:(0,k.ku)(t?.date),valueDate:(0,k.ku)(t?.valueDate),defaultValueDate:(0,k.ku)(t?.defaultValueDate)},bankType:t.interfaceId,ICRequest:t.interfaceId&&a.ICRequest?.deliveryModeId?a.ICRequest:null,TPRequest:2===t.interfaceId?a.terraPayDetails:{}},i=await H({extension:h.N.OutwardsOrder.set2,record:JSON.stringify(n)});R.default.success(e?Y.Edited:Y.Added),await eT(i.recordId),es()}}),eu=ec.values.header,em=!!eu.recordId,ey=2===eu.wip,eh=3===eu.status,ep=async()=>{let e=await G({extension:j.r.UserDefaults.get,parameters:`_userId=${ea?.userId}&_key=cashAccountId`});return e?.record?.value};async function ef(e){return await G({extension:h.N.OutwardsOrder.get2,parameters:`_recordId=${e}`})}async function ex(e){return await G({extension:h.N.OutwardsRequest.get,parameters:`_recordId=${e}&_functionId=${S.J.OutwardsOrder}`})}let eI=async()=>{let e=await H({extension:h.N.OutwardsOrder.close,record:JSON.stringify({recordId:eu.recordId})});R.default.success(Y.Closed);let a=await eT(e?.recordId);a?.record?.headerView?.status===4&&eF(),es()},eb=async()=>{let e={...ec.values,header:{...eu,date:(0,k.ku)(eu.date),valueDate:(0,k.ku)(eu.valueDate),defaultValueDate:(0,k.ku)(eu.defaultValueDate),expiryDate:(0,k.ku)(eu.expiryDate)}},a=await H({extension:h.N.OutwardsOrder.reopen,record:JSON.stringify(e)});a.recordId&&(R.default.success(Y.Reopened),es(),eT(a.recordId))},ev=eu?.commission*er/100||0,eC=parseFloat(parseFloat(eu.lcAmount)+(eu.commission+ev-eu.tdAmount)),eg=e=>{ec.setFieldValue("products",e?.list);let a=e?.list?.find(e=>e.checked);eA(a,null,{...ec.values,products:e?.list})};function eA(e,a,r){let{interfaceId:t,productId:n,fees:i,dispersalId:d,exRate:l,rateCalcMethod:s,agentCode:o,corId:c,corRef:u,corName:m,rateTypeId:y,baseAmount:h,originAmount:p,valueDays:f}=e||{},x=r||ec.values,I=x?.header,b={...x,header:{...I,interfaceId:t,productId:n,commission:i,defaultCommission:i,dispersalId:d,exRate:parseFloat(l).toFixed(5),rateCalcMethod:s,corId:c,corRef:u,corName:m,rateTypeId:y,lcAmount:a?"":I.lcAmount||h,fcAmount:a?"":I.fcAmount||p},...o&&{agentCode:o}};return ec.setValues(b),function(e){let a=new Date(ec.values.date);a.setDate(a.getDate()+e),ec.setFieldValue("valueDate",a)}(f),b}let eN=async(e,a)=>{let{headerView:r}=e,t=ec.values&&{...ec.values,products:ec.values.products,recordId:r.recordId,header:{...r,valueDate:(0,k.a1)(r.valueDate),defaultValueDate:(0,k.a1)(r.defaultValueDate),date:(0,k.a1)(r.date),exRate:parseFloat(r.exRate).toFixed(5)},ICRequest:1==r.interfaceId&&a?.requestLog?JSON.parse(a?.requestLog):ec.values.ICRequest,terraPayDetails:2==r.interfaceId&&a?.requestLog?JSON.parse(a?.requestLog):ec.values.terraPayDetails};return ec.setValues(t),t},ej=async e=>(await G({extension:O.L.CtClientIndividual.get2,parameters:`_clientId=${e}`})).record,eq=async(e,a,r)=>{if(1==a){let a=e?await ej(e):null;if(e&&!a?.clientRemittance){W({message:ei.clientHasNoKyc});return}if(!a)return;let{clientIDView:{idExpiryDate:t,idNo:n},clientIndividual:{firstName:i,middleName:d,lastName:l,fl_firstName:s,fl_lastName:o,fl_middleName:c,professionId:u,sponsorName:m},clientRemittance:{trxCountPerYear:y,trxAmountPerYear:h},clientMaster:{cellPhone:p,nationalityId:f}}=a||{};ec.setValues({...r,idNo:n,expiryDate:(0,k.a1)(t),firstName:i,middleName:d,lastName:l,fl_firstName:s,fl_middleName:c,fl_lastName:o,professionId:u,hiddenTrxCount:y,hiddenTrxAmount:h,ICRequest:{...r.ICRequest,remitter:{...r.ICRequest?.remitter,employerName:m}},header:{...r.header,cellPhone:p,nationalityId:f}})}else if(2==a){let a=await G({extension:g.u.ClientCorporate.get,parameters:`_clientId=${e}`});if(!a)return;ec.setFieldValue("expiryDate",(0,k.a1)(a?.clientMaster?.expiryDate)),ec.setFieldValue("header.cellPhone",a?.clientMaster?.cellPhone),ec.setFieldValue("header.nationalityId",a?.clientMaster?.nationalityId)}},ek=[{key:"Close",condition:!ey,onClick:eI,disabled:ey||!em},{key:"Reopen",condition:ey,onClick:eb,disabled:!ey},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!ey},{key:"BeneficiaryList",condition:!0,onClick:function(){K({Component:B.Z,props:{form:eu,onSubmit:eD,labels:ei,maxAccess:el},width:1300,height:500,title:ei.beneficiaryList})},disabled:em||!(eu?.countryId&&eu?.dispersalType&&eu?.clientId)},{key:"Beneficiary",condition:!0,onClick:function(){let{dispersalType:e,clientId:a,clientRef:r,clientName:t,corId:n,countryId:i,currencyId:d,beneficiaryId:l,beneficiarySeqNo:s}=ec.values?.header;e&&K({Component:1===e?x.Z:f.Z,props:{client:{clientId:a,clientRef:r,clientName:t},corId:n,dispersalType:e,countryId:i,currencyId:d,beneficiary:{beneficiaryId:l,beneficiarySeqNo:s},recordId:a&&l&&s?(100*a).toString()+(10*l).toString()+s:null,forceDisable:!!ec.values.recordId&&!!l,onSuccess:(e,a)=>(function(e,a){let[,r,t]=e.split(",");e$({...a,seqNo:t,beneficiaryId:r})})(e,a)},title:1===e?ei.cash:ei.bank})},disabled:!(eu?.dispersalType&&eu?.clientId)},{key:"GL",condition:!0,onClick:"onClickGL",valuesPath:eu,datasetId:m.i.GLOutwardsOrder,disabled:!em},{key:"Receipt Voucher",condition:!0,onClick:eF,disabled:4!=ec.values.header.status}];function eD(e){ec.setFieldValue("header.branchCode",e?.branchCode),ec.setFieldValue("header.beneficiaryName",e?.beneficiaryName),ec.setFieldValue("header.beneficiarySeqNo",e?.beneficiarySeqNo),ec.setFieldValue("header.beneficiaryId",e?.beneficiaryId)}function eR(){let{recordId:e,header:{interfaceId:a,countryId:r},ICRequest:t,products:n,terraPayDetails:i,hiddenTrxAmount:d,hiddenTrxCount:l}=ec.values;if(1===a){let a=t?.remitter,i=t?.beneficiary,s=n?.find(e=>e?.checked);K({Component:I.Z,props:{onSubmit:eV,cashData:t,outwardsData:{recordId:e,countryId:r,amount:eC},sysDefault:et,productData:{deliveryModeId:s?.deliveryModeId||s?.agentDeliveryMode,payingAgent:s?.agentCode,payingCurrency:s?.payingCurrency||s?.agentPayingCurrency},clientData:{hiddenTrxAmount:d,hiddenTrxCount:l,bankDetails:i?.bankDetails,postCode:i?.address.postCode,relation:a?.relation,otherRelation:a?.otherRelation,employerName:a?.employerName,employerStatus:a?.employerStatus}},title:ei.instantCash})}else 2===a&&K({Component:b.Z,props:{onSubmit:eS,terraPay:i,data:eu},width:700,height:500,title:ei.terraPay})}async function eS(e){let a=e?.quotation,r={quotation:{...a,debitorMSIDSN:eu?.cellPhone,sendingCurrency:et?.currencyRef,receivingCurrency:a?.requestCurrency},transaction:{...e.transaction,amount:a?.requestAmount,currency:a?.requestCurrency,type:"inttransfer",descriptionText:"",requestingOrganisationTransactionReference:"t11",debitorMSIDSN:eu?.cellPhone,creditorBankAccount:a.creditorBankAccount,creditorAccounttype:"checking",internationalTransferInformation:{...e.transaction.internationalTransferInformation,quoteId:"",receivingCountry:eu?.countryRef,sourceOfFunds:"Salary",relationshipSender:e.transaction.internationalTransferInformation.relationshipSender}}};ec.setFieldValue("terraPayDetails",r)}async function eF(){d.close();let e=await ep();K({Component:J.Z,props:{recordId:eu?.receiptId,cashAccountId:e,form:eu?.receiptId?null:eu}})}async function ew(){let e=ee?.list?.find(({key:e})=>"countryId"===e)?.value;return(await G({extension:j.r.Country.get,parameters:`_recordId=${e}`})).record.reference}async function eO(){let e=ee?.list?.find(({key:e})=>"baseCurrencyId"===e)?.value;return(await G({extension:j.r.Currency.get,parameters:`_recordId=${e}`})).record.reference}function eV(e){ec.setFieldValue("ICRequest",e),ec.setFieldValue("header.amount",e.sourceAmount)}async function eT(e){let[a,r]=await Promise.all([ef(e),ex(e)]),t=await eN(a.record,r.record);return await eq(a.record.headerView.clientId,a.record.headerView.category,t),a}async function eZ(e){try{if(!e?.fcAmount&&!e?.lcAmount)return;if(a&&e?.countryId&&e?.currencyId&&e?.dispersalType){ec.setFieldValue("products",[]);var r=`_plantId=${em?e.plantId:a}&_countryId=${e.countryId}&_dispersalType=${e.dispersalType}&_currencyId=${e?.currencyId}&_fcAmount=${e?.fcAmount}&_lcAmount=${e?.recordId?0:e?.lcAmount}&_includingFees=${e?.includingFees?1:0}`;let t=await G({extension:h.N.ProductDispersalEngine.qry,parameters:r});t?.list?.length>0?(await e_(t.list,e.header?.productId,{...ec.values,products:t.list}),ec.setFieldValue("products",t.list)):em||eA(null,null,{...ec.values,products:[]})}}catch(e){em||eA(null,null,{...ec.values,products:[]})}}async function e_(e,a){if(1===e.length)em||eA(e[0]),ec.setFieldValue("products[0].checked",!0);else if(em||eA(),a){let r=e.findIndex(e=>e.productId===a);r&&ec.setFieldValue(`products[${r}].checked`,!0)}}(0,i.useEffect)(()=>{!async function(){let a=await ew(),r=await eO();if(en({countryRef:a,currencyRef:r}),e){let a={...(await eT(e)).record};a.lcAmount=0,await eZ(a.headerView)}}()},[]),(0,i.useEffect)(()=>{ec.setFieldValue("header.vatAmount",ev),ec.setFieldValue("header.amount",eC)},[eC]);let e$=e=>{ec.setFieldValue("header.beneficiaryName",e?.name||""),ec.setFieldValue("header.beneficiarySeqNo",e?.seqNo),ec.setFieldValue("header.branchCode",e?.branchCode),2===eu.interfaceId&&(ec.setFieldValue("terraPayDetails.quotation.creditorMSIDSN",e?.cellPhone||""),ec.setFieldValue("terraPayDetails.quotation.creditorBankAccount",e?.IBAN||"")),ec.setFieldValue("header.beneficiaryId",e?.beneficiaryId||null)};return n.jsx(u.Z,{resourceId:m.i.OutwardsOrder,form:ec,editMode:em,maxAccess:el,actions:ek,previewReport:em,functionId:S.J.OutwardsOrder,disabledSubmit:em,children:n.jsx(Z.R,{children:n.jsx(_.Q,{children:(0,n.jsxs)(l(),{container:!0,xs:12,spacing:2,children:[n.jsx(V.Z,{item:!0,hideonempty:!0,xs:2,children:n.jsx(c.Z,{name:"header.reference",label:ei.Reference,value:ec?.values?.header.reference,maxAccess:!em&&el,maxLength:"30",readOnly:em,onChange:ec.handleChange,error:ec.touched.header?.reference&&!!ec.errors.header?.reference})}),n.jsx(V.Z,{item:!0,hideonempty:!0,xs:2,children:n.jsx(q.Z,{name:"header.date",required:!0,label:ei.date,value:ec?.values?.header?.date,onChange:ec.setFieldValue,editMode:em,readOnly:ey||eh||em,maxAccess:el,onClear:()=>ec.setFieldValue("header.date",null),error:ec.touched.header?.date&&!!ec.errors.header?.date})}),n.jsx(V.Z,{item:!0,hideonempty:!0,xs:2,children:n.jsx(y.Z,{datasetId:w.v.DOCUMENT_STATUS,name:"header.status",label:ei.docStatus,readOnly:!0,valueField:"key",displayField:"value",values:eu})}),n.jsx(V.Z,{item:!0,hideonempty:!0,xs:2,children:n.jsx(q.Z,{name:"header.valueDate",label:ei.valueDate,value:ec?.values?.header.valueDate,onChange:ec.setFieldValue,readOnly:ey||eh||em,required:!0,maxAccess:el,onClear:()=>ec.setFieldValue("header.valueDate",null),error:ec.touched.header?.valueDate&&!!ec.errors.header?.valueDate})}),n.jsx(V.Z,{item:!0,hideonempty:!0,xs:2,children:n.jsx(y.Z,{datasetId:w.v.WF_STATUS,name:"wfStatus",label:ei.wfStatus,readOnly:!0,valueField:"key",displayField:"value",values:eu})}),n.jsx(l(),{item:!0,xs:2}),n.jsx(l(),{item:!0,xs:4.5,children:n.jsx(F.Z,{title:"Transaction Details",children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:h.N.Country.qry,name:"header.countryId",label:ei.Country,required:!0,readOnly:ey||eh||em,displayField:["countryRef","countryName"],columnsInDropDown:[{key:"countryRef",value:"Reference"},{key:"countryName",value:"Name"}],valueField:"countryId",values:eu,onChange:(e,a)=>{let r={...ec.values,header:{...eu,countryId:a?.countryId||null,countryRef:a?.countryRef||"",fcAmount:"",lcAmount:"",products:[],dispersalType:a?eu.dispersalType:"",currencyId:a?eu.currencyId:null}};eA(null,!0,r),ec.setFieldValue("header.countryId",a?.countryId||null)},error:ec.touched.header?.countryId&&!!ec.errors.header?.countryId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:eu.countryId&&h.N.DispersalType.qry,parameters:eu.countryId&&`_countryId=${eu.countryId}`,label:ei.DispersalType,required:!0,readOnly:ey||eh||!eu.countryId||em,name:"header.dispersalType",displayField:"dispersalTypeName",valueField:"dispersalType",values:eu,onChange:(e,a)=>{ec.setValues({...ec.values,header:{...eu,dispersalType:a?.dispersalType||"",dispersalTypeName:a?.dispersalTypeName||"",beneficiaryId:"",beneficiaryName:"",currencyId:a?eu.currencyId:"",lcAmount:"",fcAmount:"",corRef:"",corName:"",exRate:1,exRate2:1,commission:0}})},error:ec.touched.header?.dispersalType&&!!ec.errors.header?.dispersalType})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:em?j.r.Currency.qry:eu.countryId&&eu.dispersalType&&h.N.Currency.qry,parameters:em?void 0:`_dispersalType=${eu?.dispersalType}&_countryId=${eu?.countryId}`,label:ei.Currency,required:!0,name:"header.currencyId",displayField:em?["reference","name"]:["currencyRef","currencyName"],columnsInDropDown:em?[{key:"reference",value:"Reference"},{key:"name",value:"Name"}]:[{key:"currencyRef",value:"Reference"},{key:"currencyName",value:"Name"}],valueField:em?"recordId":"currencyId",values:eu,readOnly:!eu.dispersalType||ey||eh||em,onChange:(e,a)=>{ec.setValues({...ec.values,header:{...eu,currencyId:a?.currencyId,currencyRef:a?.currencyRef,lcAmount:"",fcAmount:"",corRef:"",corName:"",exRate:1,exRate2:1,commission:0}})},error:ec.touched.header?.currencyId&&!!ec.errors.header?.currencyId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(U.Z,{readOnly:eu.lcAmount||eu.fcAmount||em,label:ei.includeTransferFees,name:"header.includingFees",checked:eu.includingFees,onChange:e=>{ec.setFieldValue("header.includingFees",e.target.checked),ec.setFieldValue("header.lcAmount",""),ec.setFieldValue("header.fcAmount","")}})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(T.Z,{name:"header.fcAmount",label:ei.fcAmount,value:eu.fcAmount,required:!0,allowClear:!em,readOnly:eu.lcAmount||em,maxAccess:el,onChange:e=>ec.setFieldValue("header.fcAmount",e.target.value),onBlur:e=>{eu.lcAmount||eZ({countryId:eu.countryId,currencyId:eu.currencyId,dispersalType:eu.dispersalType,lcAmount:eu.lcAmount||0,fcAmount:eu.fcAmount||0,includingFees:eu.includingFees,plantId:eu.plantId})},onClear:()=>{eu.lcAmount||eA(null,!0,{...ec.values,products:[]}),ec.setFieldValue("header.fcAmount","")},error:ec.touched.header?.fcAmount&&!!ec.errors.header?.fcAmount,maxLength:10})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(T.Z,{name:"header.lcAmount",label:ei.lcAmount,value:eu.lcAmount,required:!0,allowClear:!em,readOnly:eu.fcAmount||em,maxAccess:el,onChange:e=>ec.setFieldValue("header.lcAmount",e.target.value),onBlur:async e=>{eu.fcAmount||await eZ({countryId:eu.countryId,currencyId:eu.currencyId,dispersalType:eu.dispersalType,lcAmount:eu.lcAmount||0,fcAmount:eu.fcAmount||0,includingFees:eu.includingFees,plantId:eu.plantId})},onClear:()=>{eu.fcAmount||eA(null,!0,{...ec.values,products:[]}),ec.setFieldValue("header.lcAmount","")},error:ec.touched.header?.lcAmount&&!!ec.errors.header?.lcAmount,maxLength:10})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(X.Z,{label:ei.products,color:"#000000",disabled:!(a&&eu.countryId&&eu.currencyId&&eu.dispersalType&&(eu.fcAmount||eu.lcAmount)),onClick:()=>setTimeout(()=>{!function(){let{recordId:e,products:a,header:{countryRef:r,currencyRef:t,agentCode:n,fcAmount:i,lcAmount:d,productId:l}}=ec.values;K({Component:A.Z,props:{maxAccess:el,labels:ei,data:{recordId:e,products:a,countryRef:r,targetCurrency:t,defaultAgentCode:n,fcAmount:i,lcAmount:d,productId:l,sysDefault:et},onProductSubmit:eg},width:1200,height:500,title:ei.products})}()},10)})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(c.Z,{name:"header.corRef",label:ei.corRef,value:ec.values?.header.corRef,readOnly:!0,required:eu.corId,maxAccess:el})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(c.Z,{name:"header.corName",label:ei.corName,value:ec.values?.header?.corName,readOnly:!0,required:eu.corId,maxAccess:el})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(T.Z,{name:"header.exRate",label:ei.exRateMultiply,value:eu.exRate,required:!0,readOnly:!0,decimalScale:5,maxAccess:el,maxLength:10,error:ec.touched.header?.exRate&&!!ec.errors.header?.exRate})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(T.Z,{name:"header.exRate2",decimalScale:5,label:ei.exRateDivide,value:ec?.values?.header?.exRate&&ec?.values?.header.exRate!=0?1/ec?.values?.header.exRate:"0.00000",readOnly:!0,maxAccess:el,maxLength:10})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(T.Z,{name:"header.commission",label:ei.commission,value:eu.commission,required:!0,readOnly:!0,maxAccess:el,maxLength:10,error:ec.touched.header?.commission&&!!ec.errors?.header?.commission})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(T.Z,{name:"header.vatAmount",label:ei.vatRate,value:ev,readOnly:!0,maxAccess:el,maxLength:10})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(T.Z,{name:"header.tdAmount",label:ei.discount,value:eu.tdAmount,maxAccess:el,onChange:e=>{ec.setFieldValue("header.tdAmount",e.target.value||0)},required:!0,readOnly:em,onClear:()=>ec.setFieldValue("header.tdAmount",0),error:ec.touched.header?.tdAmount&&!!ec.errors?.header?.tdAmount,maxLength:10})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(T.Z,{name:"header.amount",label:ei.NetToPay,value:eu.amount,required:!0,readOnly:!0,maxAccess:el,maxLength:10,error:ec.touched.header?.amount&&!!ec.errors?.header?.amount})})]})})}),n.jsx(l(),{item:!0,xs:7.5,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(F.Z,{title:"Client Details",children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.U,{endpointId:g.u.ClientCorporate.snapshot,parameters:{_category:0},valueField:"reference",displayField:"name",name:"header.clientId",label:ei.Client,form:ec,formObject:eu,required:!0,readOnly:ey||eh||em,displayFieldWidth:2,valueShow:"clientRef",secondValueShow:"clientName",maxAccess:el,editMode:em,onChange:async(e,a)=>{if(a?.status==-1){W({message:ei.ClientMustBeActive});return}let r=new Date;if(new Date(parseInt(a?.expiryDate?.replace(/\/Date\((\d+)\)\//,"$1")))<r){W({message:ei.expiredClient});return}let t={...ec.values,header:{...eu,clientId:a?.recordId||null,clientName:a?.name||"",clientRef:a?.reference||"",category:a?.category||1,beneficiaryId:null,beneficiaryName:"",beneficiarySeqNo:null,branchCode:""}};ec.setValues(t),await eq(a?.recordId,a?.category||1,t)},errorCheck:"header.clientId"})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(c.Z,{name:"firstName",label:ei.firstName,value:ec.values?.firstName,readOnly:!0,maxAccess:el})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(c.Z,{name:"middleName",label:ei.middleName,value:ec.values?.middleName,readOnly:!0,maxAccess:el})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(c.Z,{name:"lastName",label:ei.lastName,value:ec.values?.lastName,readOnly:!0,maxAccess:el})}),n.jsx(l(),{item:!0,xs:12,children:(0,n.jsxs)(l(),{container:!0,spacing:2,sx:{flexDirection:"row-reverse"},children:[n.jsx(l(),{item:!0,xs:4,children:n.jsx(c.Z,{name:"fl_firstName",label:ei.flFirstName,value:ec.values?.fl_firstName,readOnly:!0,dir:"rtl",maxAccess:el})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(c.Z,{name:"fl_middleName",label:ei.flMiddleName,value:ec.values?.fl_middleName,readOnly:!0,dir:"rtl",maxAccess:el})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(c.Z,{name:"fl_lastName",label:ei.flLastName,value:ec.values?.fl_lastName,readOnly:!0,dir:"rtl",maxAccess:el})})]})}),n.jsx(l(),{item:!0,xs:12,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:3,children:n.jsx(y.Z,{endpointId:j.r.Country.qry,label:ei.Nationality,name:"header.nationalityId",displayField:["reference","name"],valueField:"recordId",values:eu,readOnly:!0})}),n.jsx(l(),{item:!0,xs:3,children:n.jsx(c.Z,{name:"idNo",label:ei.IdNo,value:ec.values.idNo,readOnly:!0,maxAccess:el})}),n.jsx(l(),{item:!0,xs:3,children:n.jsx(q.Z,{name:"expiryDate",label:ei.expiryDate,value:ec.values?.expiryDate,readOnly:!0,maxAccess:el})}),n.jsx(l(),{item:!0,xs:3,children:n.jsx(c.Z,{name:"header.cellPhone",phone:!0,label:ei.cellPhone,value:ec.values?.header.cellPhone,readOnly:!0,maxLength:"15",autoComplete:"off",maxAccess:el})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(y.Z,{endpointId:v.d.Profession.qry,label:ei.profession,name:"professionId",displayField:["reference","name"],valueField:"recordId",values:ec.values,readOnly:!0})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(y.Z,{endpointId:N.u.PurposeExchange.qry,name:"header.poeId",label:ei.purposeOfExchange,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:eu,onChange:(e,a)=>{ec.setValues({...ec.values,header:{...eu,poeId:a?.recordId||null},terraPayDetails:{...ec.values.terraPayDetails,transaction:{...ec.values.terraPayDetails?.transaction,internationalTransferInformation:{...ec.values.terraPayDetails?.transaction?.internationalTransferInformation,remittancePurpose:a?.name||""}}}})},required:!0,readOnly:em,error:ec.touched.header?.poeId&&!!ec.errors.header?.poeId})})]})})]})})}),n.jsx(l(),{item:!0,xs:5,children:n.jsx(C.U,{endpointId:h.N.Beneficiary.snapshot2,parameters:{_clientId:eu.clientId,_dispersalType:eu.dispersalType,_currencyId:eu.currencyId},valueField:"name",displayField:"name",name:"header.beneficiaryName",label:ei.Beneficiary,form:ec,formObject:eu,columnsInDropDown:[{key:"name",value:"Name"},{key:"shortName",value:"ShortName"}],required:!0,readOnly:!eu.clientId||!eu.dispersalType||ey||eh||em,maxAccess:el,editMode:em,secondDisplayField:!1,onChange:async(e,a)=>{e$(a)},errorCheck:"header.beneficiaryId"})}),n.jsx(l(),{item:!0,xs:3,children:n.jsx(X.Z,{onClick:()=>eR(),label:ei.bankApi,color:"#000000",disabled:!eu?.beneficiaryId||!eu?.interfaceId||!eu.productId})})]})})]})})})})};H.width=1100,H.height=600;let K=H;t()}catch(e){t(e)}})},64938:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>I});var n=r(20997),i=r(40711),d=r(18611),l=r(23385),s=r(16689),o=r(677),c=r(26598),u=r(29352),m=r(58905),y=r(70305),h=r(18687),p=r(70755),f=e([i,o,c,u,y,h]);[i,o,c,u,y,h]=f.then?(await f)():f;let x=({labels:e,maxAccess:a,onProductSubmit:r,data:{products:t,targetCurrency:f,countryRef:x,sysDefault:I,defaultAgentCode:b,fcAmount:v,lcAmount:C,productId:g,recordId:A},window:N})=>{let[j,q]=(0,s.useState)([]),{stack:k}=(0,o.zY)(),{getRequest:D}=(0,s.useContext)(u.$),{stack:R}=(0,y.V)(),S=async({productId:a,agentName:r,agentCode:t,payingCurrency:n,deliveryModeId:i})=>{let d=v||0,l=C||0,s=await D({extension:m.L.InstantCashRates.get,parameters:`_deliveryMode=${i}&_sourceCurrency=${I.currencyRef}&_targetCurrency=${f}&_sourceAmount=${l}&_targetAmount=${d}&_originatingCountry=${I.countryRef}&_destinationCountry=${x}`}),o=await D({extension:m.L.exchange.get,parameters:`_settlementCurrency=${I.currencyRef}&_receivingAgent=${t}&_payoutCurrency=${f}&_destinationCountry=${x}&_lcAmount=${l}&_fcAmount=${d}`}),c=o?.record;if(!c){R({message:e.agentIsNotAvailable});return}let u=j?.list.map(e=>e.productId===a?{...e,agentName:r||e?.agentName,agentCode:t,originAmount:c?.originalAmount,baseAmount:c?.baseAmount,fees:s?.record?.charge,exRate:c.settlementRate,deliveryModeId:i,payingCurrency:n}:e);q({list:u})},F=[{field:"productName",headerName:e.ProductName,flex:1},{field:"corName",headerName:e.Correspondant,flex:1},{field:"agentName",headerName:e.Agent,flex:1},{field:"moreInfo",headerName:"",flex:.65,cellRenderer:r=>{if(1===r.data.interfaceId)return n.jsx(p.Z,{label:e.select,disabled:!!A,onClick:()=>k({Component:c.Z,props:{setData:S,values:{productId:r.data?.productId,agentId:r.data?.agentId,baseAmount:r.data?.baseAmount,originAmount:r.data?.originAmount,receivingCountry:x,deliveryModeId:r.data?.deliveryModeId,defaultAgentCode:b,targetCurrency:f,payingCurrency:r.data?.payingCurrency,agentCode:r.data?.agentCode,agentDeliveryMode:r.data?.agentDeliveryMode},labels:e,maxAccess:a},title:r.data?.productName})})}},{field:"fees",headerName:e.Fees,flex:.5,type:"number"},{field:"originAmount",headerName:e.originAmount,flex:.8,type:{field:"number",decimal:2}},{field:"baseAmount",headerName:e.BaseAmount,flex:.8,type:{field:"number",decimal:2}},{field:"dispersalName",headerName:e.extraInfo,flex:1}];return(0,s.useEffect)(()=>{q({list:t.map(e=>({...e,defaultAgentCode:e.agentCode,defaultAgentName:e.agentName,payingCurrency:e.agentPayingCurrency,defaultPayoutCurrency:e.payingCurrency,checked:e.productId===g,originAmount:e.originAmount,baseAmount:e.baseAmount}))})},[]),n.jsx(h.Z,{onSave:()=>{r(j),N.close()},disabledSubmit:!!A,maxAccess:a,fullSize:!0,children:n.jsx(d.R,{children:n.jsx(l.Q,{children:n.jsx(i.Z,{name:"products",columns:F,gridData:j,rowId:["productId"],rowSelection:"single",isLoading:!1,maxAccess:a,pagination:!1,showCheckboxColumn:!0,ChangeCheckedRow:q,disable:()=>!!A})})})})};x.width=1200,x.height=500;let I=x;t()}catch(e){t(e)}})},26598:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>f});var n=r(20997),i=r(99155),d=r.n(i);r(16689);var l=r(18687),s=r(23385),o=r(18611),c=r(71278),u=r(95965),m=r(58905),y=r(75609),h=e([l,c]);[l,c]=h.then?(await h)():h;let p=({labels:e,maxAccess:a,setData:r,values:{originAmount:t,baseAmount:i,productId:h,payingCurrency:p,receivingCountry:f,agentCode:x,targetCurrency:I,agentDeliveryMode:b},window:v})=>{let{formik:C}=(0,u.c)({initialValues:{agentCode:x,agentName:"",productId:h,fees:null,exRate:1,originAmount:t,baseAmount:i,bankName:"",bankNameCode:"",deliveryModeId:b,payingCurrency:p},maxAccess:a,validateOnChange:!0,validationSchema:y.object({agentCode:y.string().required()}),onSubmit:async e=>{r(e),v.close()}});return n.jsx(l.Z,{onSave:C.handleSubmit,maxAccess:a,children:n.jsx(o.R,{children:n.jsx(s.Q,{children:n.jsx(d(),{container:!0,spacing:2,children:n.jsx(d(),{item:!0,xs:12,children:n.jsx(c.Z,{endpointId:C.values.deliveryModeId&&m.L.PayingAgent.qry,parameters:C.values.deliveryModeId&&`_deliveryMode=${C.values.deliveryModeId}&_receivingCountry=${f}&_payoutCurrency=${I}`,name:"agentCode",required:!0,label:e.payingAgent,valueField:"recordId",displayField:"description",columnsInDropDown:[{key:"description",value:"Paying Agent"},{key:"payingCurrency",value:"Paying Currency"}],values:C.values,onChange:(e,a)=>{C.setFieldValue("agentCode",a?.recordId||null),C.setFieldValue("agentName",a?.description),C.setFieldValue("payingCurrency",a?.payingCurrency)},readOnly:!C.values.deliveryModeId,maxAccess:a,error:C.touched.agentCode&&!!C.errors.agentCode})})})})})})};p.width=500,p.height=200;let f=p;t()}catch(e){t(e)}})},47851:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{Z:()=>g});var n=r(20997),i=r(6416),d=r(70305),l=r(16689),s=r(99155),o=r.n(s),c=r(44619),u=r(29352),m=r(38509),y=r(95965),h=r(75609);r(79660);var p=r(91184),f=r(58905),x=r(71278),I=r(23385),b=r(18611),v=r(18687),C=e([d,u,m,x,v]);function g({onSubmit:e,terraPay:a={},window:r,data:t}){let{getRequest:s}=(0,l.useContext)(u.$),{stack:C}=(0,d.V)(),{labels:g,maxAccess:A}=(0,m.J)({datasetId:i.i.Terrapay}),N=t?.recordId,{formik:j}=(0,y.c)({maxAccess:A,initialValues:a,validateOnChange:!0,validationSchema:h.object({transaction:h.object({creditorBankSubCode:h.string().required(),internationalTransferInformation:h.object({relationshipSender:h.string().required()})})}),onSubmit:a=>{e(a),r.close()}});return n.jsx(v.Z,{onSave:j.handleSubmit,maxAccess:A,disabledSubmit:N,children:n.jsx(b.R,{children:n.jsx(I.Q,{children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:12,children:n.jsx(c.Z,{name:"quotation.creditorReceivingCountry",readOnly:!0,onChange:j.handleChange,maxAccess:A,label:g.country,value:j.values.quotation?.creditorReceivingCountry})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(p.Z,{name:"quotation.requestAmount",readOnly:!0,onChange:j.handleChange,maxAccess:A,label:g.amount,value:j.values.quotation?.requestAmount})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(c.Z,{name:"quotation.requestCurrency",readOnly:!0,onChange:j.handleChange,maxAccess:A,label:g.currency,value:j.values.quotation?.requestCurrency})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:f.L.Combos.qryTerrapayCBX,parameters:"_combo=1",name:"transaction.internationalTransferInformation.relationshipSender",label:g.relSender,valueField:"recordId",displayField:"name",values:j.values.transaction.internationalTransferInformation.relationshipSender,required:!0,readOnly:N,onChange:(e,a)=>{j.setFieldValue("transaction.internationalTransferInformation.relationshipSender",a?.recordId||"")},maxAccess:A,error:j.touched.transaction?.internationalTransferInformation?.relationshipSender&&!!j.errors.transaction?.internationalTransferInformation?.relationshipSender})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:f.L.Combos.qryTerrapyBanks,parameters:`_country=${t?.countryRef||""}`,name:"transaction.creditorBankSubCode",label:g.bank,valueField:"bankCode",displayField:"bankName",values:j.values.transaction.creditorBankSubCode,required:!0,readOnly:N,onChange:async(e,a)=>{j.setFieldValue("transaction.bankName",a?.bankName||""),j.setFieldValue("transaction.providerCode",a?.providerCode||""),j.setFieldValue("transaction.creditorOrganisationid",a?.bankName||""),j.setFieldValue("transaction.creditorBankSubCode",a?.bankCode||"");let r=await s({extension:f.L.Combos.terrapayAccountStatus,parameters:`_accountId=${j.values.quotation?.creditorBankAccount}&_country=${t?.countryRef}&_bankName=${a?.bankName||""}&_MSISDN=${j.values.quotation?.creditorMSIDSN}&_beneficiaryName=${t?.beneficiaryName}&_provider=${a?.providerCode||""}&_bankCode=${t?.branchCode}&_bankSubCode=null&_accountType=checking`});r?.record?.status},maxAccess:A,error:j.touched.transaction?.creditorBankSubCode&&!!j.errors.transaction?.creditorBankSubCode})})]})})})})}[d,u,m,x,v]=C.then?(await C)():C,t()}catch(e){t(e)}})}};