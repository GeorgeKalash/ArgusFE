"use strict";exports.id=20295,exports.ids=[20295],exports.modules={20295:(e,a,n)=>{n.a(e,async(e,r)=>{try{n.d(a,{Z:()=>P});var l=n(20997),s=n(99155),t=n.n(s),d=n(75609),o=n(16689),c=n(44619),i=n(80582),u=n(71278),h=n(65980),m=n(61274),y=n(79660),x=n(27736),p=n(97969),I=n(79390),v=n(65305),g=n(29352),C=n(86201),b=n(38509),f=n(6416);n(74548);var N=n(16774),j=n(95965),Z=n(8995),R=n(61932),k=n(30967),A=n(70305),F=n(18611),B=n(67906),L=n(42020),D=n(60520),O=n(96119),V=e([i,u,m,g,C,b,A,D]);function P({viewBtns:e=!0,client:a,beneficiary:n,dispersalType:r,corId:s,submitted:V,setSubmitted:P,countryId:q,currencyId:w,resetForm:T,setResetForm:S,onChange:z,setValidSubmit:E,onSuccess:_,submitMainForm:$=!0,forceDisable:G,recordId:J,forceEdit:M=null,window:U}){let{getRequest:K,postRequest:W}=(0,o.useContext)(g.$),[Y,H]=(0,o.useState)({record:[]}),{stack:Q}=(0,A.V)(),X=(0,o.useRef)(!1),ee=(0,o.useRef)(!1),{platformLabels:ea}=(0,o.useContext)(D.l);(0,O.Z)({title:ea.Bank,window:U});let en={clientId:a?.clientId||"",beneficiaryId:0,recordId:J,name:"",dispersalType:r||"",nationalityId:null,isBlocked:!1,isInactive:!1,stoppedDate:null,stoppedReason:"",gender:null,rtName:"",rtId:null,cellPhone:"",cellPhoneRepeated:"",birthDate:null,cobId:"",shortName:"",addressLine1:"",addressLine2:"",clientRef:a?.clientRef||"",clientName:a?.clientName||"",countryId:q||"",currencyId:w||null,seqNo:1,bankId:null,accountRef:"",accountRefRepeat:"",accountType:"",IBAN:"",IBANRepeated:"",routingNo:"",swiftCode:"",branchCode:"",branchName:"",state:"",city:"",zipcode:"",remarks:"",seqNo:1},{formik:er}=(0,j.c)({maxAccess:Y,initialValues:en,validationSchema:d.object({clientId:d.string().required(),countryId:d.string().required(),name:d.string().required(),bankId:d.string().required(),currencyId:d.string().required(),accountRefRepeat:d.string().test("accountRef must match","Error",function(e){let{accountRef:a}=this.parent;return a==e}),IBANRepeated:d.string().test("IBAN must match","Error",function(e){let{IBAN:a}=this.parent;return a==e}),cellPhoneRepeated:d.number().test("cellPhone must match","Error",function(e){let{cellPhone:a}=this.parent;return a==e})}),onSubmit:async e=>{if($){let a={clientId:e.clientId,clientRef:e.clientRef,clientName:e.clientName,beneficiaryId:e.beneficiaryId,gender:e.gender,rtId:e.rtId,rtName:e.rtName,name:e.name,dispersalType:e.dispersalType,isBlocked:e.isBlocked,isInactive:e.isInactive,stoppedDate:e.stoppedDate?(0,I.ku)(e.stoppedDate):null,stoppedReason:e.stoppedReason,nationalityId:e.nationalityId,cellPhone:e.cellPhone,birthDate:e.birthDate?(0,I.ku)(e.birthDate):null,cobId:e.cobId,shortName:e.shortName,addressLine1:e.addressLine1,addressLine2:e.addressLine2,countryId:e.countryId,currencyId:e.currencyId,seqNo:e.seqNo},n={bankId:e.bankId,clientId:e.clientId,beneficiaryId:e.beneficiaryId,accountRef:e.accountRef,accountType:e.accountType,IBAN:e.IBAN,routingNo:e.routingNo,swiftCode:e.swiftCode,branchCode:e.branchCode,branchName:e.branchName,city:e.city,state:e.state,zipcode:e.zipcode,seqNo:e.seqNo},r=await W({extension:v.N.BeneficiaryBank.set,record:JSON.stringify({header:a,beneficiaryBank:n})});C.default.success(ea.Added);let[l,s,t]=r.recordId.split(",");_&&_(r.recordId,e),er.setFieldValue("recordId",(100*l).toString()+(10*s).toString()+t)}}}),el=null==M?!!er.values.recordId:M,{labels:es}=(0,b.J)({datasetId:f.i.BeneficiaryBank}),et=e=>{e.preventDefault()};return l.jsx(i.Z,{resourceId:f.i.BeneficiaryBank,form:er,editMode:el,maxAccess:Y,disabledSubmit:el,isCleared:!G&&e,isSaved:e,children:l.jsx(F.R,{children:l.jsx(L.g,{children:(0,l.jsxs)(t(),{container:!0,spacing:2,children:[l.jsx(t(),{item:!0,xs:6,children:(0,l.jsxs)(t(),{container:!0,spacing:2,children:[l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(m.U,{endpointId:k.u.ClientCorporate.snapshot,parameters:{_category:0},valueField:"reference",displayField:"name",name:"clientId",label:es.client,form:er,required:!0,readOnly:el,valueShow:"clientRef",secondValueShow:"clientName",maxAccess:Y,displayFieldWidth:3,columnsInDropDown:[{key:"reference",value:"Ref."},{key:"name",value:"Name"},{key:"cellPhone",value:"Cell Phone"}],onChange:async(e,a)=>{if(a?.status==-1){Q({message:"Chosen Client Must Be Active."});return}er.setFieldValue("clientId",a?a.recordId:""),er.setFieldValue("clientName",a?a.name:""),er.setFieldValue("clientRef",a?a.reference:"")},errorCheck:"clientId"})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{endpointId:y.r.Country.qry,name:"countryId",label:es.benCountry,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],readOnly:er.values.countryId&&el||q||el,values:er.values,onChange:(e,a)=>{er.setFieldValue("countryId",a?a.recordId:""),er.setFieldValue("bankId","")},error:er.touched.countryId&&!!er.errors.countryId,maxAccess:Y,required:!0})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{endpointId:(q||er.values.countryId)&&R.G.CbBank.qry2,parameters:q?`_countryId=${q}`:`_countryId=${er.values.countryId}`,name:"bankId",label:es.bank,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],maxAccess:Y,required:!0,values:er.values,onChange:(e,a)=>{er.setFieldValue("bankId",a?a.recordId:"")},error:er.touched.bankId&&!!er.errors.bankId,readOnly:er.values.countryId&&el||el||!er.values.countryId})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{endpointId:y.r.Currency.qry,name:"currencyId",label:es.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],values:er.values,required:!0,readOnly:er.values.currencyId&&el||w||el,maxAccess:Y,onChange:(e,a)=>{er.setFieldValue("currencyId",a?.recordId||null)},error:er.touched.currencyId&&!!er.errors.currencyId})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"accountRef",label:es.accountRef,value:er.values.accountRef,onChange:er.handleChange,maxLength:"50",error:er.touched.accountRef&&!!er.errors.accountRef,maxAccess:Y,readOnly:el,onCopy:et,onPaste:et,onClear:()=>er.setFieldValue("accountRef","")})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"accountRefRepeat",label:es.confirmAccountRef,value:er.values.accountRefRepeat,onChange:er.handleChange,onBlur:er.handleBlur,maxLength:"50",error:er.touched.accountRefRepeat&&!!er.errors.accountRefRepeat,maxAccess:Y,readOnly:el,required:er.values.accountRef,onCopy:et,onPaste:et,onClear:()=>er.setFieldValue("accountRefRepeat","")})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"branchName",label:es.branchName,rows:3,value:er.values.branchName,onChange:er.handleChange,maxLength:"100",error:er.touched.branchName&&!!er.errors.branchName,readOnly:el,maxAccess:Y})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"branchCode",label:es.branchCode,value:er.values.branchCode,onChange:er.handleChange,maxLength:"20",error:er.touched.branchCode&&!!er.errors.branchCode,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(x.Z,{name:"birthDate",label:es.birthDate,value:er.values?.birthDate,onChange:er.setFieldValue,onClear:()=>er.setFieldValue("birthDate",""),error:er.touched.birthDate&&!!er.errors.birthDate,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{endpointId:y.r.Country.qry,name:"cobId",label:es.countryOfBirth,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],values:er.values,onChange:(e,a)=>{er.setFieldValue("cobId",a?a.recordId:"")},error:er.touched.cobId&&!!er.errors.cobId,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{datasetId:p.v.BANK_ACCOUNT_TYPE,name:"accountType",label:es.accountType,valueField:"key",displayField:"value",values:er.values,onChange:(e,a)=>{a?er.setFieldValue("accountType",a?.key):er.setFieldValue("accountType","")},maxAccess:Y,error:er.touched.accountType&&!!er.errors.accountType,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(h.Z,{name:"addressLine1",label:es.addressLine1,value:er.values.addressLine1,rows:3,maxLength:"100",maxAccess:Y,onChange:er.handleChange,onClear:()=>er.setFieldValue("addressLine1",""),error:er.touched.addressLine1&&!!er.errors.addressLine1,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(h.Z,{name:"addressLine2",label:es.addressLine2,value:er.values.addressLine2,rows:3,maxLength:"100",maxAccess:Y,onChange:er.handleChange,onClear:()=>er.setFieldValue("addressLine2",""),error:er.touched.addressLine2&&!!er.errors.addressLine2,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{endpointId:y.r.Country.qry,name:"nationalityId",label:es.country,valueField:"recordId",displayField:["reference","name","flName"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"},{key:"flName",value:"FL Name"}],maxAccess:Y,values:er.values,onChange:(e,a)=>{er.setFieldValue("state",""),er.setFieldValue("city",""),er.setFieldValue("nationalityId",a?a.recordId:"")},error:er.touched.nationalityId&&!!er.errors.nationalityId,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"state",label:es.state,value:er.values.state,onChange:er.handleChange,error:er.touched.state&&!!er.errors.state,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"city",label:es.city,value:er.values.city,onChange:er.handleChange,error:er.touched.city&&!!er.errors.city,maxAccess:Y,readOnly:el})})]})}),l.jsx(t(),{item:!0,xs:6,children:(0,l.jsxs)(t(),{container:!0,spacing:2,children:[l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"name",label:es.name,value:er.values.name,required:!0,onChange:er.handleChange,maxLength:"50",error:er.touched.name&&!!er.errors.name,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"shortName",label:es.shortName,value:er.values.shortName,onChange:er.handleChange,maxLength:"50",error:er.touched.shortName&&!!er.errors.shortName,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"cellPhone",label:es.cellPhone,value:er.values?.cellPhone,phone:!0,onChange:er.handleChange,maxLength:"20",autoComplete:"off",onClear:()=>er.setFieldValue("cellPhone",""),error:er.touched.cellPhone&&!!er.errors.cellPhone,maxAccess:Y,readOnly:el,onCopy:et,onPaste:et})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"cellPhoneRepeated",label:es.confirmCellPhone,value:er.values?.cellPhoneRepeated,phone:!0,onChange:er.handleChange,maxLength:"20",autoComplete:"off",onClear:()=>er.setFieldValue("cellPhoneRepeated",""),error:er.touched.cellPhoneRepeated&&!!er.errors.cellPhoneRepeated,maxAccess:Y,readOnly:el,onCopy:et,onPaste:et,onBlur:er.handleBlur,required:er.values.cellPhone})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{datasetId:p.v.GENDER,name:"gender",label:es.gender,valueField:"key",displayField:"value",values:er.values,onChange:(e,a)=>{a?er.setFieldValue("gender",a?.key):er.setFieldValue("gender","")},maxAccess:Y,error:er.touched.gender&&!!er.errors.gender,helperText:er.touched.gender&&er.errors.gender,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(u.Z,{endpointId:Z.u.RelationType.qry,name:"rtId",label:es.relationType,displayField:"name",valueField:"recordId",values:er.values,onChange:(e,a)=>{er.setFieldValue("rtId",a?a?.recordId:"")},maxAccess:Y,error:er.touched.rtId&&!!er.errors.rtId,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"zipcode",label:es.zipCode,value:er.values.zipcode,maxLength:"30",onChange:er.handleChange,error:er.touched.zipcode&&!!er.errors.zipcode,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"swiftCode",label:es.ifscSwift,maxLength:"30",value:er.values.swiftCode,onChange:er.handleChange,error:er.touched.swiftCode&&!!er.errors.swiftCode,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"routingNo",label:es.routingNo,maxLength:"50",value:er.values.routingNo,onChange:er.handleChange,error:er.touched.routingNo&&!!er.errors.routingNo,maxAccess:Y,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"IBAN",label:es.iban,maxLength:"50",value:er.values.IBAN,onChange:er.handleChange,error:er.touched.IBAN&&!!er.errors.IBAN,maxAccess:Y,readOnly:el,onCopy:et,onPaste:et,onClear:()=>er.setFieldValue("IBAN","")})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(c.Z,{name:"IBANRepeated",label:es.confirmIBAN,maxLength:"50",value:er.values.IBANRepeated,onChange:er.handleChange,onClear:()=>er.setFieldValue("IBANRepeated",""),error:er.touched.IBANRepeated&&!!er.errors.IBANRepeated,maxAccess:Y,readOnly:el,onCopy:et,onPaste:et,onBlur:er.handleBlur,required:er.values.IBAN})}),!X.current&&l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(B.Z,{name:"isInactive",value:er.values.isInactive,onChange:e=>er.setFieldValue("isInactive",e.target.checked),label:es.isInactive,maxAccess:Y,disabled:!0})}),!ee.current&&l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(B.Z,{name:"isBlocked",value:er.values.isBlocked,onChange:e=>er.setFieldValue("isBlocked",e.target.checked),label:es.isBlocked,maxAccess:Y,disabled:!0})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(h.Z,{name:"remarks",label:es.remarks,value:er.values.remarks,rows:3,maxLength:"150",maxAccess:Y,onChange:er.handleChange,onClear:()=>er.setFieldValue("remarks",""),error:er.touched.remarks&&!!er.errors.remarks,readOnly:el})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(x.Z,{name:"stoppedDate",label:es.stoppedDate,value:er.values?.stoppedDate,readOnly:!0,error:er.touched.stoppedDate&&!!er.errors.stoppedDate,maxAccess:Y})}),l.jsx(N.Z,{item:!0,hideonempty:!0,xs:12,children:l.jsx(h.Z,{name:"stoppedReason",label:es.stoppedReason,readOnly:!0,value:er.values.stoppedReason,rows:3,maxAccess:Y,error:er.touched.stoppedReason&&!!er.errors.stoppedReason})})]})})]})})})})}[i,u,m,g,C,b,A,D]=V.then?(await V)():V,P.width=700,P.height=500,r()}catch(e){r(e)}})}};