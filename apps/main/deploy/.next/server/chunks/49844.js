"use strict";exports.id=49844,exports.ids=[49844],exports.modules={91664:(e,a,t)=>{var r=t(71600);a.Z=void 0;var n=r(t(84198)),s=t(20997);a.Z=(0,n.default)([(0,s.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,s.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime")},26979:(e,a,t)=>{t.d(a,{Y:()=>r});let r={DocumentsOnHold:{set:"CTDR.asmx/setTRX"}}},24380:(e,a,t)=>{t.d(a,{s:()=>n});let r="CC.asmx/",n={CashCountTransaction:{snapshot:r+"snapshotTRX",qry:r+"qryTRX",get2:r+"get2TRX",set2:r+"set2TRX",post:r+"postTRX",close:r+"closeTRX",reopen:r+"reopenTRX",del:r+"delTRX"},Generate:{generate:r+"generateTFR"},CcCashNotes:{qry:r+"qryNOT",get:r+"getNOT",set:r+"setNOT",del:r+"delNOT",page:r+"pageNOT"}}},8297:(e,a,t)=>{t.d(a,{y:()=>n});let r="EP.asmx/",n={Employee:{snapshot:r+"snapshotEM",get1:r+"getEM1",set:r+"setEM",del:r+"delEM"},CertificateFilters:{qry:r+"qryCL",get:r+"getCL",set:r+"setCL",del:r+"delCL",page:r+"pageCL"},HRDocTypeFilters:{qry:r+"qryDT"},SalaryChangeReason:{qry:r+"qrySC",get:r+"getSC",set:r+"setSC",del:r+"delSC",page:r+"pageSC"},EmploymentStatusFilters:{qry:r+"qryST",page:r+"pageST",set:r+"setST",get:r+"getST",del:r+"delST"},SponsorFilters:{qry:r+"qrySP",page:r+"pageSP",set:r+"setSP",get:r+"getSP",del:r+"delSP"},RelationshipTypes:{page:r+"pageRT",set:r+"setRT",get:r+"getRT",del:r+"delRT"},BonusTypes:{get:r+"getBT",set:r+"setBT",page:r+"pageBT",del:r+"delBT"},BgCheck:{page:r+"pageCT",set:r+"setCT",get:r+"getCT",del:r+"delCT"},NoticePeriods:{get:r+"getNP",set:r+"setNP",del:r+"delNP",qry:r+"qryNP",page:r+"pageNP"},CustomProperties:{get:r+"getUP",set:r+"setUP",del:r+"delUP",page:r+"pageUP",qry:r+"qryUP"},ResignationRequest:{get:r+"getRR",set:r+"setRR",del:r+"delRR",page:r+"pageRR",close:r+"closeRR",reopen:r+"reopenRR"},TerminationReasons:{qry:r+"qryTR",get:r+"getTR",set:r+"setTR",del:r+"delTR",page:r+"pageTR"},JobInfo:{snapshot:r+"snapshotJI",page:r+"pageJI",close:r+"closeJI",reopen:r+"reopenJI",get:r+"getJI",set:r+"setJI",del:r+"delJI",qry:r+"qryJI"},QuickView:{get:r+"getQV"},EmployeePenalty:{page:r+"pagePE",close:r+"closePE",reopen:r+"reopenPE",get:r+"getPE",set:r+"setPE",del:r+"delPE"},EmployeeDeduction:{qry:r+"qryED",page:r+"pageED",del:r+"delED",get:r+"getED",set:r+"setED",snapshot:r+"snapshotED"},FullName:{sync:r+"syncFullName"},EmployeeChart:{page:r+"pageES",qry:r+"qryES",qry2:r+"qryES2"},EmployeeSalary:{qry:r+"qrySA",get:r+"getSA",set:r+"setSA",del:r+"delSA"},SalaryDetails:{qry:r+"qrySD",get:r+"getSD",set2:r+"set2SD",del:r+"delSD"},TerminationEmployee:{get:r+"getTE"},EmployementHistory:{qry:r+"qryEH",del:r+"delEH",get:r+"getEH",set:r+"setEH"},Hiring:{get:r+"getRE",set:r+"setRE"},Skills:{qry:r+"qryCE",del:r+"delCE",get:r+"getCE",set:r+"setCE"},UserDefined:{qry:r+"qryUV",set2:r+"set2UV"},Leaves:{set:r+"setLS",del:r+"delLS",get:r+"getLS"}}},79520:(e,a,t)=>{t.d(a,{I:()=>n});let r="IR.asmx/",n={ReplenishmentGroups:{qry:r+"qryGRP",page:r+"pageGRP",get:r+"getGRP",set:r+"setGRP",del:r+"delGRP"},IvReplenishements:{qry:r+"qryHDR",page:r+"pageHDR",get:r+"getHDR",set:r+"setHDR"},IvReplenishementsList:{qry:r+"qryTRX"},GenerateIvReplenishements:{generate:r+"generateTFR"},MaterialReplenishment:{page:r+"pageREQ",del:r+"delREQ",get:r+"getREQ",set2:r+"set2REQ",snapshot:r+"snapshotREQ",close:r+"closeREQ",reopen:r+"reopenREQ",cancel:r+"cancelREQ",print:r+"printREQ"},OrderItem:{qry:r+"qryREI",open:r+"openREI"},MatPlanning:{page:r+"pageMPL",del:r+"delMPL",get:r+"getMPL",set2:r+"set2MPL",reopen:r+"reopenMPL",close:r+"closeMPL",qry:r+"qryMPL",snapshot:r+"snapshotMPL"},MatPlanningItem:{qry:r+"qryMPI",append:r+"appendMPI"},PurchaseRequest:{generate:r+"generatePR"},PlantSettings:{get:r+"getPLT",set:r+"setPLT",del:r+"delPLT"},DocumentTypeDefault:{get:r+"getDTD",set:r+"setDTD",del:r+"delDTD",page:r+"pageDTD"},materialPlaning:{preview:r+"previewMRP"},Transfer:{generate2:r+"generate2TFR"},ConsumptionOfTools:{generate:r+"generateMFCON"}}},58131:(e,a,t)=>{t.d(a,{U:()=>n});let r="LM.asmx/",n={IndemnityAccuralsFilters:{qry:r+"qryLT"},LeaveScheduleFilters:{qry:r+"qryLS",page:r+"pageLS",set:r+"setLS",get:r+"getLS",del:r+"delLS"},OpeningBalances:{page:r+"pageOBA",set:r+"setOBA",get:r+"getOBA",del:r+"delOBA",qry:r+"qryOBA"},BalanceAdjustment:{page:r+"pageBA",set:r+"setBA",get:r+"getBA",del:r+"delBA",snapshot:r+"snapshotBA"},EarnedLeave:{page:r+"pageEL",set2:r+"set2EL",get2:r+"get2EL",del:r+"delEL",preview:r+"previewEL",post:r+"postEL"},LeavePeriod:{qry:r+"qryLP",del:r+"delLP",get:r+"getLP",set:r+"setLP"},LeaveRequest:{page:r+"pageLR",qry:r+"qryLR",set:r+"setLR",get:r+"getLR",del:r+"delLR",snapshot:r+"snapshotLR",close:r+"closeLR",reopen:r+"reopenLR",set2:r+"set2LR",get2:r+"get2LR"},LeaveReturn:{page:r+"pageRE",set:r+"setRE",get:r+"getRE",del:r+"delRE",snapshot:r+"snapshotRE",close:r+"closeRE",reopen:r+"reopenRE"},PreviewDays:{preview:r+"previewLD"},Leaves:{qry:r+"qryELB"}}},14361:(e,a,t)=>{t.d(a,{h:()=>n});let r="LT.asmx/",n={LoanType:{get:r+"getLT",set:r+"setLT",del:r+"delLT",qry:r+"qryLT",page:r+"pageLT"},Loans:{get:r+"getLR",set:r+"setLR",del:r+"delLR",page:r+"pageLR",close:r+"closeLR",reopen:r+"reopenLR"},LoanDeduction:{page:r+"pageLD",get:r+"getLD",set:r+"setLD",del:r+"delLD"}}},59636:(e,a,t)=>{t.d(a,{u:()=>n});let r="MF.asmx/",n={DesignRawMaterial:{qry2:r+"qryDRM2",qry:r+"qryDRM",set2:r+"set2DRM"},JobOrdersItem:{qry:r+"qryJIT",set2:r+"set2JIT"},IssueOfMaterialsItems:{qry:r+"qryIMI",qry2:r+"qryIMI2"},LaborGroup:{snapshot:r+"snapshotLBG",page:r+"pageLBG",qry:r+"qryLBG",set:r+"setLBG",get:r+"getLBG",del:r+"delLBG"},ProductionLine:{page:r+"pageLIN",qry:r+"qryLIN",qry2:r+"qry2LIN",qry3:r+"qry3LIN",set:r+"setLIN",get:r+"getLIN",del:r+"delLIN"},CostGroup:{page:r+"pageCG",set:r+"setCG",get:r+"getCG",del:r+"delCG",qry:r+"qryCG"},WorkCenter:{page:r+"pageWCT",qry:r+"qryWCT",qry3:r+"qryWCT3",set:r+"setWCT",get:r+"getWCT",del:r+"delWCT",snapshot:r+"snapshotWCT"},Routing:{page:r+"pageRTN",qry:r+"qryRTN",set:r+"setRTN",get:r+"getRTN",del:r+"delRTN",snapshot2:r+"snapshot2RTN",snapshot:r+"snapshotRTN"},Operation:{snapshot:r+"snapshotOPR",qry:r+"qryOPR",page:r+"pageOPR",set:r+"setOPR",get:r+"getOPR",del:r+"delOPR"},Labor:{page:r+"pageLBR",qry:r+"qryLBR",qry2:r+"qry2LBR",set:r+"setLBR",get:r+"getLBR",del:r+"delLBR",snapshot:r+"snapshotLBR"},Machine:{page:r+"pageMAC",qry:r+"qryMAC",set:r+"setMAC",get:r+"getMAC",del:r+"delMAC",snapshot:r+"snapshotMAC"},MachineSpecification:{page:r+"pageMAS",qry:r+"qryMAS",set:r+"setMAS",get:r+"getMAS",del:r+"delMAS"},LeanProductionPlanning:{preview:r+"previewPQ",update:r+"updatePQ",snapshot:r+"snapshotPQ",del:r+"delPQ",cancel:r+"cancelPQ"},MaterialsAdjustment:{generate:r+"generateADJ"},ProductionClass:{page:r+"pageCLS",qry:r+"qryCLS",set:r+"setCLS",get:r+"getCLS",del:r+"delCLS",snapshot:r+"qryCLS"},ProductionStandard:{qry:r+"qrySTD",page:r+"pageSTD",set:r+"setSTD",get:r+"getSTD",del:r+"delSTD"},ProductionClassSemiFinished:{qry:r+"qryCSF",set:r+"setCSF",get:r+"getCSF",del:r+"delCSF",set2:r+"set2CSF"},RoutingSequence:{set2:r+"set2RTS",qry:r+"qryRTS"},Overhead:{qry:r+"qryOVH",set:r+"setOVH",get:r+"getOVH",del:r+"delOVH",page:r+"pageOVH",snapshot:r+"snapshotOVH"},Design:{qry:r+"qryDES",set:r+"setDES",get:r+"getDES",del:r+"delDES",snapshot:r+"snapshotDES",page:r+"pageDES"},MFJobOrder:{pack:r+"packJOB",qry:r+"qryJOB",qry2:r+"qryJOB2",set:r+"setJOB",get:r+"getJOB",get2:r+"get2JOB",del:r+"delJOB",snapshot:r+"snapshotJOB",snapshot2:r+"snapshotJOB2",snapshot3:r+"snapshotJOB3",cancel:r+"cancelJOB",post:r+"postJOB",start:r+"startJOB",stop:r+"stopJOB",wip:r+"wipJOB",sync:r+"syncJOB"},ProductionSheet:{page:r+"pagePST",qry:r+"qryPST",get:r+"getPST",set2:r+"set2PST",get2:r+"get2PST",del:r+"delPST",post:r+"postPST",unpost:r+"unpostPST",snapshot:r+"snapshotPST"},ProductionSheetItem:{qry:r+"qryPSI",set:r+"setPSI",get:r+"getPSI",del:r+"delPSI"},DocumentTypeDefault:{qry:r+"qryDTD",get:r+"getDTD",set:r+"setDTD",del:r+"delDTD",page:r+"pageDTD"},RawMaterialCategory:{qry:r+"qryRMC",get:r+"getRMC",set:r+"setRMC",del:r+"delRMC",page:r+"pageRMC"},WorksheetMaterials:{qry:r+"qryIMA",get:r+"getIMA",pack:r+"get2IMA",set:r+"setIMA",set2:r+"set2IMA",del:r+"delIMA",post:r+"postIMA"},ProductionSheetQueue:{qry:r+"qryPSQ"},Damage:{qry:r+"qryDMG",get:r+"getDMG",set:r+"setDMG",del:r+"delDMG",page:r+"pageDMG",snapshot:r+"snapshotDMG",post:r+"postDMG",get2:r+"get2DMG",set2:r+"set2DMG",preview:r+"previewDMG"},JobCategory:{qry:r+"qryJCA"},JobRouting:{qry:r+"qryJRO",get:r+"getJRO",set:r+"setJRO",set2:r+"set2JRO",del:r+"delJRO",sync:r+"syncJRO",close:r+"closeJRO",reopen:r+"reopenJRO"},Worksheet:{snapshot:r+"snapshotWST",get:r+"getWST",pack:r+"getPackWST",set:r+"setWST",del:r+"delWST",page:r+"pageWST",summary:r+"summaryWST",post:r+"postWST",qry2:r+"qryWST2",draft:r+"draftWST"},JobOverhead:{qry:r+"qryJOH",set2:r+"set2JOH",generate:r+"generateJOH"},JobMaterial:{qry:r+"qryJMA"},JobItemSize:{qry:r+"qryJSZ",set2:r+"set2JSZ"},MFSerial:{qry:r+"qrySRL",qry2:r+"qrySRL2",set2:r+"set2SRL",generate:r+"generateSRL"},SamplePack:{qry:r+"qrySPL",set2:r+"set2SPL"},DamageReturn:{get:r+"getDMR",set:r+"setDMR",del:r+"delDMR",page:r+"pageDMR",snapshot:r+"snapshotDMR",post:r+"postDMR"},ProductionOrder:{get2:r+"get2PO",set2:r+"set2PO",del:r+"delPO",page:r+"pagePO",snapshot:r+"snapshotPO",post:r+"postPO",gen:r+"genPO",close:r+"closePO"},BillOfMaterials:{get:r+"getBMA",qry2:r+"qry2BMA",set:r+"setBMA",del:r+"delBMA",page:r+"pageBMA",snapshot:r+"snapshotBMA"},Component:{get:r+"getBMI",qry:r+"qryBMI",del:r+"delBMI",set:r+"setBMI",set2:r+"set2BMI"},Assembly:{get:r+"getASM",set2:r+"set2ASM",del:r+"delASM",page:r+"pageASM",snapshot:r+"snapshotASM",post:r+"postASM",unpost:r+"unpostASM",generate:r+"genASM"},AssemblyItems:{qry:r+"qryASC"},AssemblyLot:{get:r+"getASL",set:r+"setASL"},AssemblyOverhead:{qry:r+"qryAOH",set2:r+"set2AOH"},MeasurementScheduleMap:{qry:r+"qryMSM",set:r+"setMSM",set2:r+"set2MSM",del:r+"delMSM"},JobCategory:{set:r+"setJCA",get:r+"getJCA",del:r+"delJCA",page:r+"pageJCA",qry:r+"qryJCA"},DesignGroup:{qry:r+"qryDEG",set:r+"setDEG",get:r+"getDEG",del:r+"delDEG",page:r+"pageDEG"},Components:{qry:r+"qryDEM",set2:r+"set2DEM"},DesignFamily:{qry:r+"qryDEF",set:r+"setDEF",get:r+"getDEF",del:r+"delDEF",page:r+"pageDEF"},ProductionShifts:{qry:r+"qrySHI",set:r+"setSHI",get:r+"getSHI",del:r+"delSHI",page:r+"pageSHI"},JobOrderWizard:{set2:r+"set2JOZ",get2:r+"get2JOZ",del:r+"delJOZ",page:r+"pageJOZ",snapshot:r+"snapshotJOZ",post:r+"postJOZ"},JobTransfer:{get2:r+"get2TFR",set2:r+"set2TFR",del:r+"delTFR",page:r+"pageTFR",snapshot:r+"snapshotTFR",post:r+"postTFR",close:r+"closeTFR",reopen:r+"reopenTFR",qry:r+"qryTFR"},JobWorkCenter:{qry:r+"qryJWC",close:r+"closeJWC",reopen:r+"reopenJWC",get:r+"getJWC",snapshot:r+"snapshotJWC",verify:r+"verifyJWC"},WorkCenterConsumption:{page:r+"pageCON",snapshot:r+"snapshotCON",del:r+"delCON",set2:r+"set2CON",get:r+"getCON",post:r+"postCON",unpost:r+"unpostCON",close:r+"closeCON",reopen:r+"reopenCON"},ConsumptionItemView:{qry:r+"qryCOI"},LineItemCapacity:{set2:r+"set2LIT",del:r+"delLIT",qry:r+"qryLIT",page:r+"pageLIT"},CostGroupOverhead:{set2:r+"set2CGV",qry:r+"qryCGV"},IssueOfMaterialDimension:{set:r+"setIMD",qry:r+"qryIMD"},JobOrder:{gen:r+"genORD"},RefreshPoItem:{refresh:r+"refreshPOI"},WorkCenterTransferMap:{qry:r+"qryWCTM",set2:r+"set2WCTM"},BatchWorksheet:{get2:r+"get2BWST",set2:r+"set2BWST",del:r+"delBWST",page:r+"pageBWST",snapshot:r+"snapshotBWST",post:r+"postBWST",gen:r+"genBWST",close:r+"closeBWST",reopen:r+"reopenBWST"},ProductionOrderFromSaleOrder:{gen:r+"generatePOFromSO"},BatchTransfer:{page:r+"pageBTFR",set2:r+"set2BTFR",del:r+"delBTFR",snapshot:r+"snapshotBTFR",get:r+"getBTFR",post:r+"postBTFR",unpost:r+"unpostBTFR"},BatchTransferJob:{qry:r+"qryBTFJ"},Disposal:{page:r+"pageDIS",snapshot:r+"snapshotDIS",get:r+"getDIS",set2:r+"set2DIS",del:r+"delDIS"},DisposalItem:{qry:r+"qryDII"},DisposalSerial:{qry:r+"qryDISRL"},MetalSetting:{page:r+"pageMTS",set:r+"setMTS",get:r+"getMTS",del:r+"delMTS"},DamageReason:{qry:r+"qryDRS",page:r+"pageDRS",set:r+"setDRS",get:r+"getDRS",del:r+"delDRS",snapshot:r+"snapshotDRS"},DamageCategory:{qry:r+"qryDCA",page:r+"pageDCA",set:r+"setDCA",get:r+"getDCA",del:r+"delDCA",snapshot:r+"snapshotDCA"}}},34340:(e,a,t)=>{t.d(a,{m:()=>n});let r="PY.asmx/",n={Payroll:{qry:r+"qryHE",page:r+"pageHE",get:r+"getHE",set:r+"setHE",del:r+"delHE",close:r+"closeHE",reopen:r+"reopenHE",post:r+"postHE",unpost:r+"unpostHE",snapshot:r+"snapshotHE"},BankTransferFilters:{qry:r+"qrySB",page:r+"pageSB",get:r+"getSB",set:r+"setSB",del:r+"delSB"},Paycode:{qry:r+"qryPC",set:r+"setPC",del:r+"delPC",get:r+"getPC"},SecuritySchedule:{qry:r+"qrySS"},IndemnitySchedule:{page:r+"pageIS",qry:r+"qryIS",get:r+"getIS",set:r+"setIS",del:r+"delIS"},LedgerGroup:{qry:r+"qryGLG",get:r+"getGLG",set:r+"setGLG",del:r+"delGLG"},Arguments:{page:r+"pageAR"},SalaryBatch:{page:r+"pageBAT",get:r+"getBAT",set:r+"setBAT",del:r+"delBAT"},TimeCodes:{page:r+"pageTC",qry:r+"qryTC",get:r+"getTC",set:r+"setTC",del:r+"delTC"},FinalSettlement:{page:r+"pageFS",get:r+"getFS",set:r+"setFS",del:r+"delFS",snapshot:r+"snapshotFS"},IndemnityCompany:{qry:r+"qryID",set2:r+"set2ID"},IndemnityResignation:{qry:r+"qryIR",set2:r+"set2IR"},PenaltyType:{page:r+"pagePT",qry:r+"qryPT",get:r+"getPT",set:r+"setPT",del:r+"delPT"},PenaltyDetail:{qry:r+"qryPD",set2:r+"set2PD"},GeneratePayroll:{gen:r+"genEM",page:r+"pageEM"},PayrollDetails:{qry:r+"qryED",set2:r+"set2ED"},SocialSecurity:{qry:r+"qryES"},FiscalYear:{qry:r+"qryYE"},Period:{qry:r+"qryPE"}}},96995:(e,a,t)=>{t.d(a,{z:()=>n});let r="PM.asmx/",n={Designer:{page:r+"pageDSR",get:r+"getDSR",set:r+"setDSR",del:r+"delDSR",snapshot:r+"snapshotDSR",qry:r+"qryDSR"},ThreeDDesign:{page:r+"page3DD",get:r+"get3DD",set:r+"set3DD",del:r+"del3DD",post:r+"post3DD",close:r+"close3DD",reopen:r+"reopen3DD",snapshot:r+"snapshot3DD"},Sketch:{page:r+"pageSKH",get:r+"getSKH",set:r+"setSKH",del:r+"delSKH",close:r+"closeSKH",reopen:r+"reopenSKH",snapshot:r+"snapshotSKH",snapshot2:r+"snapshot2SKH",snapshot3:r+"snapshot3SKH",post:r+"postSKH"},ModelMaker:{snapshot:r+"snapshotMDL",snapshot2:r+"snapshot2MDL",page:r+"pageMDL",get:r+"getMDL",set:r+"setMDL",del:r+"delMDL",post:r+"postMDL",close:r+"closeMDL",reopen:r+"reopenMDL"},ModellingMaterial:{qry:r+"qryMDLM",set2:r+"set2MDLM"},Printing:{page:r+"page3DP",get:r+"get3DP",set:r+"set3DP",del:r+"del3DP",start:r+"start3DP",snapshot:r+"snapshot3DP",snapshot2:r+"snapshot3DP2",post:r+"post3DP",qry:r+"qry3DP"},ThreeDDrawing:{snapshot:r+"snapshot3DD",snapshot2:r+"snapshot23DD",get:r+"get3DD",snapshot3DD2:r+"snapshot3DD2"},Rubber:{page:r+"pageRBR",get:r+"getRBR",set:r+"setRBR",del:r+"delRBR",snapshot:r+"snapshotRBR",post:r+"postRBR",start:r+"startRBR"},Modeling:{qry:r+"qryMDL"},Casting:{page:r+"pageCAS",get:r+"getCAS",set:r+"setCAS",del:r+"delCAS",snapshot:r+"snapshotCAS",post:r+"postCAS"},DocumentTypeDefault:{page:r+"pageDTD",get:r+"getDTD",set:r+"setDTD",del:r+"delDTD"},Samples:{page:r+"pageSPL",get2:r+"get2SPL",set:r+"setSPL",del:r+"delSPL",snapshot:r+"snapshotSPL",set2:r+"set2SPL",close:r+"closeSPL",reopen:r+"reopenSPL",post:r+"postSPL"}}},13567:(e,a,t)=>{t.d(a,{y:()=>n});let r="PU.asmx/",n={VendorGroups:{qry:r+"qryGRP",page:r+"pageGRP",get:r+"getGRP",set:r+"setGRP",del:r+"delGRP"},PriceList:{qry:r+"qryPRI",del:r+"delPRI",get:r+"getPRI",set:r+"setPRI"},PUOrderStatus:{qry:r+"qryPOS",page:r+"pagePOS",get:r+"getPOS",set:r+"setPOS",del:r+"delPOS"},DeliveryMethods:{qry:r+"qryDM",page:r+"pageDM",get:r+"getDM",set:r+"setDM",del:r+"delDM"},PaymentTerms:{qry:r+"qryPT",page:r+"pagePT",get:r+"getPT",set:r+"setPT",del:r+"delPT"},Vendor:{snapshot:r+"snapshotVEN",qry:r+"qryVEN",page:r+"pageVEN",get:r+"getVEN",set:r+"setVEN",del:r+"delVEN"},Address:{qry:r+"qryAD",page:r+"pageAD",get:r+"getAD",set:r+"setAD",del:r+"delAD"},DocumentTypeDefault:{qry:r+"qryDTD",get:r+"getDTD",set:r+"setDTD",del:r+"delDTD",page:r+"pageDTD"},PurchaseInvoiceHeader:{qry:r+"qryIVC",get:r+"getIVC",get2:r+"get2IVC",level2_PU:r+"level2_PU",set:r+"setIVC",del:r+"delIVC",snapshot:r+"snapshotIVC",set2:r+"set2IVC",post:r+"postIVC",unpost:r+"unpostIVC",generate:r+"generateIVC",preview:r+"previewIVC",sync:r+"syncIVC",verify:r+"verifyIVC"},Invoice:{snapshot:r+"snapshotINV"},PurchaseReturnHeader:{set2:r+"set2IVR",post:r+"postIVR",unpost:r+"unpostIVR",del:r+"delIVR",qry:r+"qryIVR",snapshot:r+"snapshotIVR"},VendorPrice:{get:r+"getPRI2"},ItemCostHistory:{qry:r+"qryIPH"},ItemPromotion:{qry:r+"qryIVIM"},Serials:{qry:r+"qrySRL",import:r+"importSRL",last:r+"lastSRL",sync:r+"syncSRL"},Shipment:{get:r+"getSHP",set2:r+"set2SHP",del:r+"delSHP",page:r+"pageSHP",snapshot:r+"snapshotSHP",post:r+"postSHP",unpost:r+"unpostSHP",gen:r+"genSHP"},ShipmentItem:{qry:r+"qrySHI"},UnpostedOrderPack:{get:r+"openORD",snapshot:r+"snapshotORD"},PurchaseOrder:{page:r+"pageORD",snapshot:r+"snapshotORD",del:r+"delORD",set2:r+"set2ORD",get2:r+"get2ORD",close:r+"closeORD",reopen:r+"reopenORD",terminate:r+"terminateORD",transfer:r+"transfer1ORD"},PurchaseRequisition:{snapshot:r+"snapshotREQ",page:r+"pageREQ",get:r+"getREQ",set:r+"setREQ",del:r+"delREQ",cancel:r+"cancelREQ",reopen:r+"reopenREQ",close:r+"closeREQ"},RequisitionDetail:{qry:r+"qryREI",set:r+"setREI",get:r+"getREI",del:r+"delREI"},QuotationItem:{preview:r+"previewQTI",qry:r+"qryQTI"},OrderItem:{qry:r+"qryORI",set2:r+"set2ORI"},PUDraftReturn:{set2:r+"set2DRE",get:r+"getDRE",page:r+"pageDRE",snapshot:r+"snapshotDRE",del:r+"delDRE",post:r+"postDRE"},PUDraftReturnSerial:{get2:r+"get2DRS",qry:r+"qryDRS",del:r+"delDRS",append:r+"appendDRS",batch:r+"batchDRS"},FinancialGroup:{qry:r+"qryFII",set2:r+"set2FII"},PUInvoiceRetBalance:{balance:r+"balanceRET"},ItemLastPurchaseInfo:{last:r+"lastIVI"},PurchaseQuotation:{page:r+"pageQTN",set2:r+"set2QTN",get:r+"getQTN",del:r+"delQTN",snapshot:r+"snapshotQTN"},GenerateQTNPRPack:{gen:r+"genQTN"},GeneratePOPRPack:{gen:r+"genPO",gen2:r+"gen2PO"}}},9161:(e,a,t)=>{t.d(a,{x:()=>n});let r="SC.asmx/",n={LabelTemplate:{qry:r+"qryLBT",set:r+"setLBT",get:r+"getLBT",del:r+"delLBT"},Item:{qry:r+"qryLBI",set:r+"setLBI",get:r+"getLBI",del:r+"delLBI"},Sites:{qry:r+"qrySIT",set:r+"setSIT",set2:r+"set2SIT",get:r+"getSIT",del:r+"delSIT",reopen:r+"reopenSIT",end:r+"endSIT"},Controller:{qry:r+"qryCRL"},StockCountControllerTab:{qry:r+"qryPHY",set2:r+"set2PHY",set:r+"setPHY",get:r+"getPHY",del:r+"delPHY"},StockCount:{page:r+"pageHDR",post:r+"postHDR",unpost:r+"unpostHDR",qry:r+"qryHDR",get:r+"getHDR",set:r+"setHDR",del:r+"delHDR",close:r+"closeHDR",reopen:r+"reopenHDR",snapshot:r+"snapshotHDR"},StockCountController:{page:r+"pageCRL",set:r+"setCRL",get:r+"getCRL",del:r+"delCRL"},DocumentTypeDefaults:{qry:r+"qryDTD",set:r+"setDTD",get:r+"getDTD",del:r+"delDTD"},StockCountItem:{qry:r+"qryITM",set:r+"setITM",get:r+"getITM",del:r+"delITM"},StockCountSerialSum:{qry:r+"qrySRS"},StockCountItemDetail:{qry:r+"qryITD",set:r+"setITD",get:r+"getITD",del:r+"delITD",set2:r+"set2ITD"},StockCountSerialDetail:{set2:r+"set2SRL",qry:r+"qrySRL",append:r+"appendSRL",del:r+"delSRL",batch:r+"batchSRL"}}},9421:(e,a,t)=>{t.d(a,{f:()=>n});let r="TA.asmx/",n={AttendanceScheduleFilters:{qry:r+"qrySD"},ProcessedShiftPunches:{retry:r+"retryPSP"},OvertimeProfiles:{page:r+"pageOTP",set:r+"setOTP",get:r+"getOTP",del:r+"delOTP",qry:r+"qryOTP"},PendingPunches:{page:r+"pagePP",del:r+"delPP",qry:r+"qryPP"},BiometricDevices:{page:r+"pageBM",qry:r+"qryBM",del:r+"delBM",set:r+"setBM",get:r+"getBM"},DSLReasons:{page:r+"pageLR",set:r+"setLR",get:r+"getLR",del:r+"delLR"},TimeVariation:{reset:r+"resetTV",qry:r+"qryTV",qry2:r+"qryTV2",snapshot:r+"snapshotTV",page:r+"pageTV",get:r+"getTV",set:r+"setTV",del:r+"delTV",gen:r+"genTV",close:r+"closeTV",reopen:r+"reopenTV",cancel:r+"cancelTV",override:r+"overrideTV"},ShitLeave:{page:r+"pageLQ",set:r+"setLQ",get:r+"getLQ",del:r+"delLQ",close:r+"closeLQ",reopen:r+"reopenLQ"},FlatSchedule:{qry:r+"qryFS",qry2:r+"qryFS2",copyRange:r+"copyRangeFS",range:r+"rangeFS",del:r+"delRangeFS"},DSLReason:{qry:r+"qryLR"},Calendar:{qry:r+"qryCA"},DayTypes:{page:r+"pageDT",qry:r+"qryDT",set:r+"setDT",get:r+"getDT",del:r+"delDT"},AttendanceDay:{qry:r+"qryAD"},Schedule:{qry:r+"qrySC"},FlatPunch:{qry:r+"qryFP"}}},96611:(e,a,t)=>{t.d(a,{K:()=>n});let r="CS.asmx/",n={DivisionFilters:{qry:r+"qryDI"},BranchFilters:{qry:r+"qryBR"},CompanyPositions:{qry:r+"qryPO"},DepartmentFilters:{qry:r+"qryDE"}}},76788:(e,a,t)=>{t.d(a,{Z:()=>x});var r=t(20997),n=t(16689),s=t(38361),l=t.n(s),d=t(92189),o=t.n(d),i=t(85753),c=t(88851),u=t(81591),m=t(44046),p=t(81290),y=t(99535),h=t(73280),I=t(66829),f=t(86085),g=t.n(f);let x=({name:e,label:a,value:t,onChange:s,error:d,disabledRangeDate:f={},max:x=null,min:v=null,variant:C="outlined",size:D="small",views:b=["year","month","day","hours","minutes"],fullWidth:S=!0,required:q=!1,autoFocus:w=!1,disabled:R=!1,disabledDate:j=null,readOnly:F=!1,editMode:k=!1,hasBorder:O=!0,hidden:T=!1,formatTime:N="hh:mm aa",defaultValue:A,...V})=>{let P=`${window.localStorage.getItem("default")&&JSON.parse(window.localStorage.getItem("default")).dateFormat} ${N}`,[L,Z]=(0,n.useState)(!1),{_readOnly:M,_required:E,_hidden:J}=(0,I.W)(e,V.maxAccess,q,F,T),B=new Date(f.date);B.setDate(B.getDate()+f.day);let _=void 0===t?(()=>{let e;switch(A){case"today":e=new Date;break;case"yesterday":(e=new Date).setDate(e.getDate()-1);break;case"boy":e=new Date(new Date().getFullYear(),0,1);break;default:e=null}return e})():t;return J?r.jsx(r.Fragment,{}):r.jsx(i.LocalizationProvider,{dateAdapter:m.AdapterDateFns,children:r.jsx(h.DateTimePicker,{variant:C,size:D,value:_,label:a,views:b,minDate:v||f.date,maxDate:x||B,fullWidth:S,autoFocus:w,format:P,onChange:a=>s(e,a),onClose:()=>Z(!1),open:L,disabled:R,readOnly:M,clearable:!0,shouldDisableDate:j&&(e=>{let a=new Date(e),t=new Date;return(t.setDate(t.getDate()),a.setDate(a.getDate()),">="===j)?a>=t:"<"===j?a<t:">"===j&&a>t}),slotProps:{popper:{disablePortal:!0},textField:{required:E,size:D,fullWidth:S,error:d,inputProps:{tabIndex:M?-1:0},InputProps:{classes:{root:g().outlinedRoot,notchedOutline:O?g().outlinedFieldset:g().outlinedNoBorder,input:g().inputBase},endAdornment:!(M||R)&&(0,r.jsxs)(l(),{position:"end",className:g().inputAdornment,children:[_&&r.jsx(o(),{tabIndex:-1,edge:"start",onClick:()=>s(e,null),className:g().iconButton,children:r.jsx(c.Z,{className:g().icon})}),r.jsx(o(),{tabIndex:-1,onClick:()=>Z(!0),className:g().iconButton,children:r.jsx(u.Z,{className:g().icon})})]})},InputLabelProps:{classes:{root:g().inputLabel,shrink:g().inputLabelShrink}}},actionBar:{actions:["accept","today"]}},slots:{actionBar:e=>r.jsx(p.PickersActionBar,{...e,actions:["accept","today"]}),popper:e=>r.jsx(y.Z,{isDateTimePicker:!0,...e})}})})}},20757:(e,a,t)=>{t.d(a,{Z:()=>x});var r=t(20997),n=t(16689),s=t(38361),l=t.n(s),d=t(92189),o=t.n(d),i=t(85753),c=t(88851),u=t(91664),m=t(81290),p=t(37918),y=t(10298),h=t(99535),I=t(66829),f=t(86085),g=t.n(f);let x=({name:e,label:a,value:t,onChange:s,error:d=!1,helperText:f="",disabledRangeTime:x={},variant:v="outlined",size:C="small",fullWidth:D=!0,required:b=!1,autoFocus:S=!1,disabled:q=!1,disabledTime:w=null,readOnly:R=!1,editMode:j=!1,hasBorder:F=!0,hidden:k=!1,use24Hour:O=!1,min:T=null,max:N=null,...A})=>{let[V,P]=(0,n.useState)(!1),[L,Z]=(0,n.useState)(!1),{_readOnly:M,_required:E,_hidden:J}=(0,I.W)(e,A.maxAccess,b,R,k);return J?r.jsx(r.Fragment,{}):r.jsx(i.LocalizationProvider,{dateAdapter:y.AdapterDayjs,children:r.jsx(p.TimePicker,{variant:v,size:C,value:t,label:a,fullWidth:D,ampm:!O,minTime:T,maxTime:N,onFocus:()=>Z(!0),onBlur:()=>Z(!1),autoFocus:S,onChange:a=>s(e,a),onClose:()=>P(!1),open:V,disabled:q,readOnly:M,clearable:!0,slotProps:{textField:{required:E,size:C,fullWidth:D,error:!!d,helperText:"string"==typeof d?d:f,InputProps:{classes:{root:g().outlinedRoot,notchedOutline:F?g().outlinedFieldset:g().outlinedNoBorder,input:g().inputBase},endAdornment:!(M||q)&&(0,r.jsxs)(l(),{position:"end",className:g().inputAdornment,children:[t&&r.jsx(o(),{tabIndex:-1,className:g().iconButton,onClick:()=>s(e,null),children:r.jsx(c.Z,{className:g().icon})}),r.jsx(o(),{tabIndex:-1,className:g().iconButton,onClick:()=>P(!0),children:r.jsx(u.Z,{className:g().icon})})]})},InputLabelProps:{className:L||t?g().inputLabelShrink:g().inputLabel}},actionBar:{actions:["accept"]}},slots:{actionBar:e=>r.jsx(m.PickersActionBar,{...e,actions:["accept"]}),popper:e=>r.jsx(h.Z,{...e,matchAnchorWidth:!1,isDateTimePicker:!0})},...A})})}},11514:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>u});var n=t(20997),s=t(60520),l=t(99912),d=t(16689),o=t(96119),i=e([s,l]);[s,l]=i.then?(await i)():i;let c=({window:e,w:a,responseValue:t,onConfirm:r,fullScreen:i})=>{let{platformLabels:c}=(0,d.useContext)(s.l);return(0,o.Z)({title:c.Confirmation,window:e}),n.jsx(l.Z,{DialogText:2===t?c.ApproveDoc:c.RejectDoc,okButtonAction:()=>{r(),e.close(),a.close()},fullScreen:i,cancelButtonAction:()=>{e.close()}})};c.width=450,c.height=170;let u=c;r()}catch(e){r(e)}})},16046:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>es});var n=t(20997),s=t(16689),l=t(30343),d=t.n(l),o=t(92189),i=t.n(o),c=t(56252),u=t(40711),m=t(24644),p=t(29352),y=t(31367),h=t(42721),I=t(677),f=t(38509),g=t(6416),x=t(20373),v=t(68728),C=t(29608),D=t(53119),b=t(79660),S=t(58296),q=t(91370),w=t(18611),R=t(42020),j=t(23385),F=t(34127),k=t(95537),O=t(56257),T=t(32618),N=t(35950),A=t(51183),V=t(86979),P=t(65977),L=t(85960),Z=t(20936),M=t(51157),E=t(15317),J=t(30295),B=t(87361),_=t(4212),H=t(33298),$=t(7897),Q=t(78169),G=t(35289),U=t(56809),W=t(72952),Y=t(61844),z=t(73224),K=t(19610),X=t(83743),ee=t(57617),ea=t(58806),et=t(45516),er=t(23344),en=e([c,u,m,p,h,I,f,x,C,D,S,F,k,O,T,N,A,V,P,L,Z,M,E,J,B,_,H,$,Q,G,U,W,Y,z,K,X,ee,ea,et,er]);[c,u,m,p,h,I,f,x,C,D,S,F,k,O,T,N,A,V,P,L,Z,M,E,J,B,_,H,$,Q,G,U,W,Y,z,K,X,ee,ea,et,er]=en.then?(await en)():en;let es=({pageSize:e=50})=>{let{getRequest:a}=(0,s.useContext)(p.$),{stack:t}=(0,I.zY)();async function r(t={}){let{_startAt:r=0}=t;return{...await a({extension:y.y.DocumentsOnHold.qry,parameters:`_startAt=${r}&_reference=&_sortBy=reference desc&_pageSize=${e}`}),_startAt:r}}let{query:{data:l},labels:o,filterBy:en,clearFilter:es,refetch:el,paginationParameters:ed,access:eo}=(0,f.J)({queryFn:r,endpointId:y.y.DocumentsOnHold.qry,datasetId:g.i.DocumentsOnHold,filter:{endpointId:y.y.DocumentsOnHold.qry,filterFn:ei}});async function ei({options:t={},filters:r}){let{_startAt:n=0}=t;return r.qry&&await a({extension:y.y.DocumentsOnHold.qry,parameters:`&_reference=${r.qry}&_sortBy=reference desc&_pageSize=${e}&_startAt=${n}`})}let ec=async e=>{try{let t=await a({extension:b.r.UserDefaults.get,parameters:`_userId=${e&&e.userId}&_key=plantId`});return t?.record?.value}catch(e){return""}},eu=async e=>{let r;let n=e.recordId;switch(e.functionId){case v.J.CurrencyCreditOrderSale:case v.J.CurrencyCreditOrderPurchase:r=x.Z;break;case v.J.CreditInvoiceSales:case v.J.CreditInvoicePurchase:r=C.Z;break;case v.J.CashCountTransaction:r=F.Z;break;case v.J.CurrencyPurchase:case v.J.CurrencySale:r=D.Z;break;case v.J.KYC:await a({extension:q.L.CtClientIndividual.get,parameters:`_recordId=${e.recordId}`}).then(e=>{n=e.record.clientId}),r=S.Z;break;case v.J.ResignationRequest:r=H.Z;break;case v.J.LeaveRequest:r=$.Z;break;case v.J.Samples:r=Q.Z;break;case v.J.PayrollList:r=G.Z;break;case v.J.OutwardsOrder:r=V.Z;break;case v.J.CashTransfer:r=k.Z;break;case v.J.OutwardsModification:r=O.Z;break;case v.J.OutwardsReturn:r=T.Z;break;case v.J.InwardTransfer:r=N.Z;break;case v.J.InwardSettlement:r=A.Z;break;case v.J.Sketch:r=P.Z;break;case v.J.SalesOrder:r=Z.Z;break;case v.J.ThreeDDesign:r=L.Z;break;case v.J.LoanRequest:r=E.Z;break;case v.J.PurchaseRequisition:r=M.Z;break;case v.J.PurchaseOrder:r=J.Z;break;case v.J.MaterialRequest:r=B.Z;break;case v.J.CostAllocation:r=_.Z;break;case v.J.MRP:r=U.Z;break;case v.J.ReturnFromLeave:r=W.Z;break;case v.J.Penalty:r=Y.Z;break;case v.J.TimeVariation:r=z.Z;break;case v.J.DuringShiftLeave:r=K.Z;break;case v.J.JobInfo:r=X.Z;break;case v.J.PaymentOrder:r=ee.Z;break;case v.J.WorkCenterConsumption:r=ea.Z;break;case v.J.ProductionOrder:r=et.Z;break;case v.J.StockCount:r=er.Z}if(r){let e=window.sessionStorage.getItem("userData")?JSON.parse(window.sessionStorage.getItem("userData")):null,a=await ec(e);t({Component:r,props:{recordId:n,plantId:a,userData:e}})}},em=async e=>{await eu(e)},ep=[{field:"reference",headerName:o.reference,flex:2},{field:"functionName",headerName:o.functionName,flex:2},{field:"thirdParty",headerName:o.thirdParty,flex:2},{field:"strategyName",headerName:o.strategy,flex:2},{field:"date",headerName:o.date,flex:2,type:"date"},{field:"approval",flex:1,cellRenderer:e=>n.jsx(d(),{sx:{display:"flex",width:"100%",justifyContent:"center"},children:n.jsx(i(),{size:"small",onClick:()=>ey(e.data),children:n.jsx(c.Z,{icon:"mdi:application-edit-outline",fontSize:18})})})}],ey=e=>{t({Component:h.Z,props:{labels:o,maxAccess:o,maxAccess:eo,recordId:e.recordId,functionId:e.functionId,seqNo:e.seqNo}})};return(0,n.jsxs)(w.R,{children:[n.jsx(R.g,{children:n.jsx(m.Z,{maxAccess:eo,onSearch:e=>{en("qry",e)},onSearchClear:()=>{es("qry")},labels:o,inputSearch:!0})}),n.jsx(j.Q,{children:n.jsx(u.Z,{columns:ep,gridData:l,rowId:["functionId","seqNo","recordId"],onEdit:em,isLoading:!1,pageSize:e,refetch:el,paginationParameters:ed,paginationType:"api",maxAccess:eo})})]})};r()}catch(e){r(e)}})},42721:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>R});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(2296),i=t(86201),c=t(29352),u=t(38509),m=t(11514),p=t(44619),y=t(65980),h=t(27736),I=t(31367),f=t(79390),g=t(26979),x=t(18611),v=t(23385),C=t(677),D=t(68728),b=t(96167),S=t(60520),q=t(18687),w=e([i,c,u,m,C,S,q]);function R({labels:e,maxAccess:a,functionId:t,seqNo:r,recordId:s,window:w}){let[R,j]=(0,d.useState)(null),{platformLabels:F}=(0,d.useContext)(S.l),{getRequest:k,postRequest:O}=(0,d.useContext)(c.$),T=(0,u.E)({endpointId:I.y.DocumentsOnHold.qry}),{stack:N}=(0,C.zY)(),A=(0,o.useFormik)({initialValues:{recordId:null,reference:"",indicatorId:null,functionId:null,seqNo:"",thirdParty:"",date:null,notes:"",responseDate:null,strategyName:""},validateOnChange:!0,onSubmit:async e=>{let a={...e,date:(0,f.ku)(e.date),response:R},n=(0,D.x)(t);n===b.Y.CurrencyTrading||n===b.Y.Remittance?await O({extension:g.Y.DocumentsOnHold.set,record:JSON.stringify(a)}):await O({extension:I.y.DocumentsOnHold.set,record:JSON.stringify(a)}),i.default.success(t||r||e.recordId||null===R?F.Edited:F.Added),T()}});function V(e){j(e),N({Component:m.Z,props:{fullScreen:!1,responseValue:e,w,onConfirm:()=>{console.log("submit"),A.submitForm()}}})}return n.jsx(q.Z,{actions:[{key:"Reject",condition:!0,onClick:()=>{V(-1)},disabled:!1},{key:"Approve",condition:!0,onClick:()=>{V(2)},disabled:!1}],isSaved:!1,maxAccess:a,children:n.jsx(x.R,{children:n.jsx(v.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(p.Z,{name:"reference",label:e.reference,value:A.values.reference,readOnly:!0,maxAccess:a,maxLength:"30"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(p.Z,{name:"thirdParty",label:e.thirdParty,value:A.values.thirdParty,readOnly:!0,maxAccess:a})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(h.Z,{name:"date",label:e.date,onChange:A.setFieldValue,value:A.values.date,readOnly:!0,maxAccess:a})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(p.Z,{name:"strategyName",label:e.strategy,value:A.values.strategyName,readOnly:!0,maxAccess:a})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"notes",label:e.notes,value:A.values.notes,maxLength:"100",rows:2,maxAccess:a,onChange:A.handleChange,onClear:()=>A.setFieldValue("notes",""),error:A.touched.notes&&!!A.errors.notes})})]})})})})}[i,c,u,m,C,S,q]=w.then?(await w)():w,r()}catch(e){r(e)}})},34127:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>E});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(6416),p=t(44619),y=t(18611),h=t(95965),I=t(61274),f=t(61932),g=t(71278),x=t(79660),v=t(27736),C=t(15051),D=t(42020),b=t(23385),S=t(44242),q=t(677),w=t(24380),R=t(79390),j=t(68728),F=t(75281),k=t(38509),O=t(70638),T=t(43552),N=t(86794),A=t(60520),V=t(67906),P=t(38782),L=t(96119),Z=e([i,c,u,I,g,C,S,q,k,O,T,N,A,P]);[i,c,u,I,g,C,S,q,k,O,T,N,A,P]=Z.then?(await Z)():Z;let M=({recordId:e,window:a})=>{let{postRequest:t,getRequest:r}=(0,d.useContext)(u.$),{platformLabels:s}=(0,d.useContext)(A.l),[Z,M]=(0,d.useState)(!!e),{stack:E}=(0,q.zY)(),[J,B]=(0,d.useState)(!1),[_,H]=(0,d.useState)(!1),$=async()=>{let e=(0,F.m)("userData").userId,a=`_userId=${e}&_functionId=${j.J.CashCountTransaction}`,{record:t}=await r({extension:x.r.UserFunction.get,parameters:a});t&&Y.setFieldValue("dtId",t.dtId);let{record:n}=await r({extension:x.r.UserDefaults.get,parameters:`_userId=${e}&_key=cashAccountId`}),s=n?.value;if(s){let{record:e}=await r({extension:f.G.CbBankAccounts.get,parameters:`_recordId=${s}`});Y.setFieldValue("cashAccountId",s),Y.setFieldValue("cashAccountRef",e.reference),Y.setFieldValue("cashAccountName",e.name)}let{record:l}=await r({extension:x.r.UserDefaults.get,parameters:`_userId=${e}&_key=plantId`});l&&Y.setFieldValue("plantId",parseInt(l.value))},Q=(0,k.E)({endpointId:w.s.CashCountTransaction.qry}),{labels:G,access:U}=(0,P.Z)({datasetId:m.i.CashCountTransaction,editMode:!!e});(0,L.Z)({title:G.cashCount,window:a});let{maxAccess:W}=(0,N.H)({functionId:j.J.CashCountTransaction,access:U,hasDT:!1,enabled:!Z}),{formik:Y}=(0,h.c)({maxAccess:W,initialValues:{recordId:null,plantId:null,reference:"",cashAccountId:"",cashAccountRef:"",cashAccountName:"",forceNoteCount:!1,wip:1,status:1,releaseStatus:"",date:new Date,startTime:"",endTime:"",items:[{id:1,cashCountId:"",seqNo:1,currencyId:"",currencyName:"",currencyRef:"",counted:"",system:"",variation:"",flag:"",currencyNotes:[]}]},validateOnChange:!0,validationSchema:o.object({cashAccountRef:o.string().required(),plantId:o.string().required(),items:o.array().of(o.object().shape({currencyId:o.string().required(),counted:o.string().required()})).required()}),onSubmit:async e=>{let a={header:{recordId:e.recordId,dtId:e.dtId,plantId:e.plantId,shiftId:e.shiftId,currencyId:e.currencyId,cashAccountId:e.cashAccountId,forceNoteCount:e.forceNoteCount,reference:e.reference,date:(0,R.ku)(new Date),startTime:e.startTime,endTime:e.endTime,status:e.status,wip:e.wip,releaseStatus:e.releaseStatus},items:e.items.map(({id:e,flag:a,enabled:t,cashCountId:r,currencyNotes:n,...s},l)=>({seqNo:l+1,cashCountId:r||0,currencyNotes:n||[],...s}))},r=(await t({extension:w.s.CashCountTransaction.set2,record:JSON.stringify(a)})).recordId;e.recordId?c.default.success(s.Edited):(c.default.success(s.Added),z(r)),M(!0),Q()}});(0,d.useEffect)(()=>{Z||$(),ea()},[]),(0,d.useEffect)(()=>{z(e)},[e]);let z=async e=>{if(e){let{record:{header:a,items:t}}=await r({extension:w.s.CashCountTransaction.get2,parameters:`_recordId=${e}`});B(2===a.wip),H(3===a.status),Y.setValues({recordId:a.recordId,plantId:a.plantId,reference:a.reference,cashAccountId:a.cashAccountId,cashAccountRef:a.cashAccountRef,cashAccountName:a.cashAccountName,forceNoteCount:a.forceNoteCount,wip:a.wip,status:a.status,releaseStatus:a.releaseStatus,date:(0,R.a1)(a.date),startTime:a.startTime&&(0,R.s4)(a.startTime),endTime:a.endTime&&(0,R.s4)(a.endTime),items:t.map(({seqNo:e,variation:a,...t},r)=>({id:e,seqNo:e,variation:a,flag:0===a,...t}))})}};async function K(){let e=Y.values,a={recordId:e.recordId,dtId:e.dtId,plantId:e.plantId,shiftId:e.shiftId,currencyId:e.currencyId,cashAccountId:e.cashAccountId,reference:e.reference,date:e.date,startTime:e.startTime,status:e.status,wip:e.wip,releaseStatus:e.releaseStatus},r=await t({extension:w.s.CashCountTransaction.reopen,record:JSON.stringify(a)}).then(()=>{r.recordId&&(c.default.success(s.Reopened),Q(),z(e?.recordId))})}let X=async()=>{E({Component:O.Z,props:{functionId:j.J.CashCountTransaction,recordId:Y.values.recordId}})},ee=[{key:"Bulk",condition:!0,onClick:function(){E({Component:T.Z,props:{labels:G,cashCountId:Y.values.recordId,fromPlantId:Y.values.plantId,maxAccess:W},width:600,height:300,title:G.bulk})},disabled:!_},{key:"WorkFlow",condition:!0,onClick:X,disabled:!Z},{key:"Locked",condition:!0,onClick:()=>{t({extension:w.s.CashCountTransaction.post,record:JSON.stringify(Y.values)}).then(e=>{e?.recordId&&(c.default.success(s.Posted),Q(),H(!0))})},disabled:!Z||4!==Y.values.status||_},{key:"Close",condition:!J,onClick:()=>{t({extension:w.s.CashCountTransaction.close,record:JSON.stringify(Y.values)}).then(e=>{e?.recordId&&(c.default.success(s.Closed),Q(),z(e?.recordId))})},disabled:J||!Z},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!J},{key:"Reopen",condition:J,onClick:K,disabled:!J||!Z||3===Y.values.releaseStatus},{key:"Account Balance",condition:!0,onClick:"onClickAC",disabled:!1}],ea=async()=>{let{record:e}=await r({extension:x.r.TimeZone?.get,parameters:""});e&&(Z||Y.setFieldValue("startTime",(0,R.s4)(e?.utcDate,"utc")))},et=async e=>{let a=Y.values?.cashAccountId;if(e&&a){let{record:a}=await r({extension:f.G.AccountBalance.get,parameters:"_currencyId="+e+"&_cashAccountId="+Y.values?.cashAccountId});if(a)return a.balance}};return n.jsx(i.Z,{actions:ee,resourceId:m.i.CashCountTransaction,form:Y,maxAccess:W,editMode:Z,functionId:j.J.CashCountTransaction,disabledSubmit:J,previewReport:Z,children:(0,n.jsxs)(y.R,{children:[n.jsx(D.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:6,children:n.jsx(I.U,{endpointId:f.G.CashAccount.snapshot,parameters:{_type:2},name:"cashAccountRef",required:!0,label:G.cashAccount,readOnly:_||J,valueField:"reference",displayField:"name",valueShow:"cashAccountRef",secondValueShow:"cashAccountName",form:Y,onChange:(e,a)=>{Y.setValues({...Y.values,cashAccountId:a?.recordId||"",cashAccountRef:a?.reference||"",cashAccountName:a?.name||""})},maxAccess:W})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(v.Z,{name:"date",label:G.date,value:Y.values.date,onChange:Y.setFieldValue,readOnly:!0,maxAccess:W})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(g.Z,{endpointId:x.r.Plant.qry,name:"plantId",label:G.plant,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"plant Ref"},{key:"name",value:"Name"}],values:Y.values,required:!0,readOnly:_||J,maxAccess:W,onChange:(e,a)=>{let t=a?.recordId||"";Y.setFieldValue("plantId",t)},error:Y.touched.plantId&&!!Y.errors.plantId})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(p.Z,{name:"startTime",label:G.startTime,value:Y.values.startTime,readOnly:!0,maxAccess:W})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(p.Z,{name:"reference",label:G.reference,value:Y.values.reference,readOnly:Z,maxAccess:W,onChange:e=>{Y.handleChange(e)},onClear:()=>Y.setFieldValue("reference",""),error:Y.touched.reference&&!!Y.errors.reference})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(p.Z,{name:"endTime",label:G.endTime,value:Y.values.endTime,readOnly:!0,maxAccess:W})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(V.Z,{name:"forceNoteCount",value:Y.values?.forceNoteCount,onChange:e=>Y.setFieldValue("forceNoteCount",e.target.checked),label:G.forceNotesCount,maxAccess:W,disabled:Y.values.items&&(Y.values?.items[0]?.currencyId||Y.values?.items[0]?.currencyId)})})]})}),n.jsx(b.Q,{children:n.jsx(C._,{onChange:e=>Y.setFieldValue("items",e),value:Y.values.items,error:Y.errors.items,name:"currency",maxAccess:W,columns:[{component:"resourcecombobox",label:G.currency,name:"currencyId",props:{readOnly:_||J,endpointId:x.r.Currency.qry,valueField:"recordId",displayField:"reference",mapping:[{from:"recordId",to:"currencyId"},{from:"reference",to:"currencyRef"},{from:"name",to:"currencyName"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:2},propsReducer:({row:e,props:a})=>({...a,readOnly:e.currencyNotes?.length>0}),async onChange({row:{update:e,newRow:a}}){if(a?.currencyId){let t=await et(a?.currencyId);e({system:t})}}},{component:"numberfield",name:"counted",label:G.count,props:{readOnly:Y.values.forceNoteCount||_||J},async onChange({row:{update:e,newRow:a}}){let t=a.counted||0,r=a.system||0;e({variation:t-r,flag:r===t})}},{component:"numberfield",label:G.system,name:"system",props:{readOnly:!0}},{component:"icon",label:G.flag,name:"flag"},{component:"button",name:"enabled",label:G.currencyNotes,props:{onCondition:e=>({disabled:!e?.currencyId})},onClick:(e,a,t,r)=>{E({Component:S.Z,props:{readOnly:_||J,labels:G,maxAccess:W,forceNoteCount:Y.values.forceNoteCount,row:a,updateRow:r},width:700,title:G?.currencyNotes})}}],allowDelete:!J||!_&&!J})})]})})};M.width=1100,M.height=700;let E=M;r()}catch(e){r(e)}})},44242:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>x});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(18611),c=t(95965),u=t(15051),m=t(42020),p=t(23385),y=t(91184);t(24380);var h=t(29352),I=t(44619),f=t(18687),g=e([u,h,f]);function x({labels:e,maxAccess:a,recordId:t,forceNoteCount:r,row:s,updateRow:g,readOnly:x,window:v}){let{getRequest:C}=(0,d.useContext)(h.$),{formik:D}=(0,c.c)({maxAccess:a,initialValues:{total:0,currencyNotes:[{id:1,seqNo:"",cashCountId:0,note:"",qty:"",subTotal:""}]},validateOnChange:!0,validationSchema:o.object({currencyNotes:o.array().of(o.object().shape({note:o.string().required()})).required("Operations array is required")}),onSubmit:async e=>{let a=e.currencyNotes.filter(e=>e.qty>0)?.map(({id:e,seqNo:a,cashCountId:t,qty:r,qty1:n,qty100:l,qty1000:d,...o})=>({seqNo:s.id,qty:r,qty1:n||0,qty100:l||0,qty1000:d||0,cashCountId:s?.cashCountId<1?0:s?.cashCountId,...o})),t=e.currencyNotes.reduce((e,{subTotal:a})=>e+(Number(a)||0),0);r?g({changes:{counted:t,currencyNotes:a,variation:t-(s.system||0),flag:s.system===t}}):g({changes:{currencyNotes:a}}),v.close()}}),b=D.values?.currencyNotes?.reduce((e,{subTotal:a})=>e+(Number(a)||0),0);function S({update:e,newRow:a}){let t=a?.note||0,r=a?.qty1||0,n=a?.qty100||0,s=a?.qty1000||0,l=r+100*n+1e3*s;e({qty:l,subTotal:l*t})}return n.jsx(f.Z,{onSave:D.handleSubmit,maxAccess:a,children:(0,n.jsxs)(i.R,{children:[n.jsx(m.g,{children:n.jsx(l(),{container:!0,xs:6,children:n.jsx(I.Z,{name:"reference",label:e.currency,value:s.currencyRef,readOnly:!0})})}),n.jsx(p.Q,{children:n.jsx(u._,{onChange:e=>D.setFieldValue("currencyNotes",e),value:D.values.currencyNotes,error:D.errors.currencyNotes,columns:[{component:"numberfield",label:e.currencyNote,name:"note",props:{readOnly:!0}},{component:"numberfield",label:e.qty1,name:"qty1",props:{readOnly:x,decimalScale:0,maxLength:2,allowNegative:!1},async onChange({row:e}){S(e)}},{component:"numberfield",label:e.qty100,name:"qty100",props:{readOnly:x,decimalScale:0,maxLength:3,allowNegative:!1},async onChange({row:e}){S(e)}},{component:"numberfield",label:e.qty1000,name:"qty1000",props:{readOnly:x,decimalScale:0,allowNegative:!1},async onChange({row:e}){S(e)}},{component:"numberfield",label:e.qty,name:"qty",props:{readOnly:!0},async onChange({row:{update:e,newRow:a}}){let t=a?.note||0,r=a?.qty||0;e({subTotal:r*t})}},{component:"numberfield",label:e.subTotal,name:"subTotal",props:{readOnly:!0}}],allowDelete:!1,allowAddNewLine:!1})}),n.jsx(m.g,{children:n.jsx(l(),{container:!0,spacing:2,sx:{mb:3,display:"flex",justifyContent:"right"},children:n.jsx(l(),{item:!0,xs:4,children:n.jsx(y.Z,{name:"total",label:e.total,value:b,readOnly:!0})})})})]})})}[u,h,f]=g.then?(await g)():g,r()}catch(e){r(e)}})},79060:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>x});var n=t(20997),s=t(16689),l=t(95965),d=t(75609),o=t(29352),i=t(18611),c=t(23385),u=t(60520),m=t(9161),p=t(42020),y=t(86201),h=t(71278),I=t(15051),f=t(18687),g=e([o,u,y,h,I,f]);[o,u,y,h,I,f]=g.then?(await g)():g;let x=({store:e,maxAccess:a,labels:t})=>{let{recordId:r,isPosted:g,isClosed:x}=e,{getRequest:v,postRequest:C}=(0,s.useContext)(o.$),{platformLabels:D}=(0,s.useContext)(u.l),{formik:b}=(0,l.c)({maxAccess:a,validateOnChange:!0,initialValues:{stockCountId:"",siteId:null,rows:[]},validationSchema:d.object({siteId:d.number().required()}),onSubmit:async()=>{let e=b.values.rows.map((e,a)=>({...e,id:a+1,status:e.status||1,controllerId:e.recordId,siteId:b.values.siteId,stockCountId:r})).filter(e=>e.isChecked),a={stockCountId:r,siteId:b.values.siteId,items:e};if(await C({extension:m.x.StockCountControllerTab.set2,record:JSON.stringify(a)}),y.default.success(D.Updated),b.values.siteId){let e=await S(r,b.values.siteId);b.setValues({rows:e.list})}}}),S=async(e,a)=>{let t=await v({extension:m.x.Controller.qry,parameters:`_siteId=${a}`}),r=await v({extension:m.x.StockCountControllerTab.qry,parameters:`_siteId=${a}&_stockCountId=${e}`});t.list.map((e,a)=>{let t=r.list.find(a=>a.controllerId===e.recordId);return t&&(e.isChecked=!0,e.statusName=t.statusName,e.status=t.status),{...e,id:a+1}}),t.list=t?.list?.map((e,a)=>({...e,id:a,isChecked:e?.isChecked!==void 0&&e?.isChecked})),b.setFieldValue("stockCountId",e),b.setValues({rows:t.list}),b.setFieldValue("siteId",a)},q=[{component:"checkbox",label:" ",name:"isChecked",flex:.2,props:{disabled:g||x}},{component:"textfield",name:"name",label:t.name,flex:1,props:{readOnly:!0}},{component:"textfield",name:"statusName",label:t.statusName,flex:1,props:{readOnly:!0}}];return n.jsx(f.Z,{onSave:b.handleSubmit,maxAccess:a,disabledSubmit:g||x,children:n.jsx(i.R,{children:(0,n.jsxs)(c.Q,{children:[n.jsx(p.g,{children:n.jsx(h.Z,{name:"siteId",endpointId:m.x.Sites.qry,parameters:r?`_stockCountId=${r}`:"",label:t.sites,filter:e=>e.isChecked,valueField:"siteId",required:!0,displayField:"siteName",values:b.values,onChange:async(e,a)=>{a?.siteId&&(b.setFieldValue("siteId",a?a?.siteId:null),await S(r,a?.siteId))},error:b.touched.siteId&&!!b.errors.siteId,maxAccess:a})}),n.jsx(I._,{onChange:e=>(function(e){let a=b.values.rows.map(a=>e.find(e=>e.id===a.id)||a);b.setFieldValue("rows",a)})(e),value:b.values.rows,error:b.errors.rows,columns:q,allowAddNewLine:!1,allowDelete:!1})]})})})};r()}catch(e){r(e)}})},13052:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>A});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(6416),p=t(95965),y=t(23385),h=t(18611),I=t(60520),f=t(38509),g=t(9161),x=t(71278),v=t(79660),C=t(65980),D=t(97969),b=t(61274),S=t(97996),q=t(27736),w=t(86794),R=t(68728),j=t(44619),F=t(70638),k=t(79390),O=t(677),T=t(67906),N=e([i,c,u,I,f,x,b,w,F,O]);function A({labels:e,maxAccess:a,setStore:t,store:r,plantId:s}){let{recordId:N}=r,{getRequest:A,postRequest:V}=(0,d.useContext)(u.$),{platformLabels:P}=(0,d.useContext)(I.l),{stack:L}=(0,O.zY)(),Z=!!r.recordId,M=(0,f.E)({endpointId:g.x.StockCount.qry}),{documentType:E,maxAccess:J,changeDT:B}=(0,w.H)({functionId:R.J.StockCount,access:a}),{formik:_}=(0,p.c)({documentType:{key:"dtId",value:E?.dtId},initialValues:{recordId:N||null,reference:null,dtId:null,date:new Date,plantId:parseInt(s),notes:"",type:1,clientId:null,currencyId:null,genVar:1,wip:1,status:1,disableItemDuplicate:!1},maxAccess:J,validateOnChange:!0,validationSchema:o.object({genVar:o.string().required(),plantId:o.number().required(),clientId:o.string().nullable().test("",function(e){let{type:a}=this.parent;return 2!==a&&"2"!==a||!!e}),currencyId:o.string().nullable().test("",function(e){let{type:a}=this.parent;return 2!==a&&"2"!==a||!!e})}),onSubmit:async e=>{let a=await V({extension:g.x.StockCount.set,record:JSON.stringify(e)});if(e.recordId)c.default.success(P.Edited);else{t(e=>({...e,recordId:a.recordId})),c.default.success(P.Added),_.setFieldValue("recordId",a.recordId);let e=await $(a.recordId);_.setValues({...e.record,date:(0,k.a1)(e.record.date)})}M()}}),H=async()=>{L({Component:F.Z,props:{functionId:R.J.StockCount,recordId:_.values.recordId}})};async function $(e){return await A({extension:g.x.StockCount.get,parameters:`_recordId=${e}`})}async function Q(e){let a=await $(e);return a.record.date=(0,k.a1)(a.record.date),a}let G=2===_.values.wip,U=3===_.values.status,W=async e=>{let a=await V({extension:g.x.StockCount.close,record:JSON.stringify({recordId:e})});c.default.success(P.Closed),M();let r=await Q(a.recordId);_.setValues(r.record),t(e=>({...e,isClosed:2===r.record.wip}))};async function Y(){let e=await V({extension:g.x.StockCount.reopen,record:JSON.stringify(_.values)});c.default.success(P.Reopened),M();let a=await Q(e.recordId);_.setValues(a.record),t(e=>({...e,isClosed:2===a.record.wip}))}let z=async()=>{let e={..._.values};e.date=(0,k.ku)(e.date);let a=await V({extension:g.x.StockCount.post,record:JSON.stringify(e)});c.default.success(P.Posted),M();let r=await Q(a.recordId);_.setValues(r.record),t(e=>({...e,isPosted:3===r.record.status}))},K=async()=>{let e={..._.values};e.date=(0,k.ku)(e.date);let a=await V({extension:g.x.StockCount.unpost,record:JSON.stringify(e)});c.default.success(P.Unposted),M();let r=await Q(a.recordId);_.setValues(r.record),t(e=>({...e,isPosted:3!==r.record.status}))},X=[{key:"WorkFlow",condition:!0,onClick:H,disabled:!Z},{key:"Close",condition:!G,onClick:()=>W(_.values.recordId),disabled:U||G||!Z},{key:"Reopen",condition:G,onClick:Y,disabled:!G||U},{key:"Unlocked",condition:!U,onClick:z,disabled:!Z||!G},{key:"Locked",condition:U,onClick:"onUnpostConfirmation",onSuccess:K,disabled:!Z||!G}];return n.jsx(i.Z,{resourceId:m.i.StockCounts,form:_,maxAccess:J,editMode:Z,actions:X,disabledSubmit:U||G,disableSubmitAndClear:U||G,children:n.jsx(h.R,{children:n.jsx(y.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:v.r.DocumentType.qry,parameters:`_startAt=0&_pageSize=1000&_dgId=${R.J.StockCount}`,name:"dtId",readOnly:Z||U||G,label:e.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["reference","name"],values:_.values,maxAccess:J,onChange:(e,a)=>{B(a),_&&_.setFieldValue("dtId",a?.recordId)},error:_.touched.dtId&&!!_.errors.dtId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(j.Z,{name:"reference",label:e.reference,value:_?.values?.reference,maxAccess:!Z&&J,maxLength:"30",readOnly:Z||U||G,onChange:_.handleChange,error:_.touched.reference&&!!_.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(q.Z,{name:"date",label:e.date,value:_.values?.date,onChange:_.setFieldValue,onClear:()=>_.setFieldValue("date",""),readOnly:Z||U||G,error:_.touched.date&&!!_.errors.date,maxAccess:J})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:v.r.Plant.qry,name:"plantId",label:e.plant,required:!0,valueField:"recordId",readOnly:Z||U||G,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:_.values,onChange:(e,a)=>{_.setFieldValue("plantId",a?a?.recordId:null)},error:_.touched.plantId&&!!_.errors.plantId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.Z,{name:"notes",type:"text",label:e.notes,value:_.values?.notes,rows:3,readOnly:U||G,maxAccess:J,onChange:e=>_.setFieldValue("notes",e.target.value),onClear:()=>_.setFieldValue("notes",""),error:_.touched.notes&&!!_.errors.notes})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{datasetId:D.v.SC_TYPE,name:"type",label:e.type,values:_.values,valueField:"key",displayField:"value",readOnly:Z||U||G,maxAccess:J,onChange:(e,a)=>{_&&_.setFieldValue("type",a?a.key:"")},error:_.touched.type&&!!_.errors.type})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.U,{endpointId:S.P.Client.snapshot,parameters:{_category:0},valueField:"reference",displayField:"name",name:"clientId",label:e.client,form:_,readOnly:Z||U||G||"1"===_.values.type||1===_.values.type,required:"2"===_.values.type||2===_.values.type,displayFieldWidth:2,valueShow:"clientRef",secondValueShow:"clientName",maxAccess:J,columnsInDropDown:[{key:"reference",value:"Ref."},{key:"name",value:"Name"}],onChange:async(e,a)=>{_.setFieldValue("clientId",a?a.recordId:""),_.setFieldValue("clientName",a?a.name:""),_.setFieldValue("clientRef",a?a.reference:"")},errorCheck:"clientId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:v.r.Currency.qry,name:"currencyId",label:e.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:_.values,readOnly:Z||U||G||"1"===_.values.type||1===_.values.type,required:"2"===_.values.type||2===_.values.type,maxAccess:J,onChange:(e,a)=>{_.setFieldValue("currencyId",a?.recordId||0)},error:_.touched.currencyId&&!!_.errors.currencyId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{datasetId:D.v.GENERATE_VARIATIONS,name:"genVar",label:e.generateVariations,values:_.values,valueField:"key",displayField:"value",readOnly:Z||U||G,maxAccess:J,onChange:(e,a)=>{_&&_.setFieldValue("genVar",a?a.key:"")},required:!0,error:_.touched.genVar&&!!_.errors.genVar})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(T.Z,{name:"disableItemDuplicate",value:_.values?.disableItemDuplicate,onChange:e=>_.setFieldValue("disableItemDuplicate",e.target.checked),label:e.disableItemDuplicate,maxAccess:J})})]})})})})}[i,c,u,I,f,x,b,w,F,O]=N.then?(await N)():N,r()}catch(e){r(e)}})},23344:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>I});var n=t(20997),s=t(34698),l=t(21061),d=t(16689),o=t(13052),i=t(30088),c=t(79060),u=t(6416),m=t(38782),p=t(96119),y=e([o,i,c,m]);[o,i,c,m]=y.then?(await y)():y;let h=({recordId:e,plantId:a,window:t})=>{let[r,y]=(0,d.useState)(0),[h,I]=(0,d.useState)({recordId:e||null,isPosted:!1,isClosed:!1}),{labels:f,access:g}=(0,m.Z)({datasetId:u.i.StockCounts,editMode:!!e});(0,p.Z)({title:f.cycleCounts,window:t});let[x,v]=(0,d.useState)(!1),C=!!h.recordId,D=[{label:f.cycleCounts},{label:f.sites,disabled:!C},{label:f.controller,disabled:!C}];return(0,n.jsxs)(n.Fragment,{children:[n.jsx(l.Y,{tabs:D,activeTab:r,setActiveTab:y,maxAccess:g}),n.jsx(s.Z,{index:0,value:r,maxAccess:g,children:n.jsx(o.Z,{labels:f,setStore:I,store:h,maxAccess:g,plantId:a})}),n.jsx(s.Z,{index:1,value:r,maxAccess:g,children:n.jsx(i.Z,{labels:f,maxAccess:g,store:h,setRefreshController:v,refreshController:x})}),n.jsx(s.Z,{index:2,value:r,maxAccess:g,children:n.jsx(c.Z,{labels:f,maxAccess:g,store:h},x)})]})};h.width=650,h.height=750;let I=h;r()}catch(e){r(e)}})},58124:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>R});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(6416),p=t(71278),y=t(95965),h=t(23385),I=t(18611),f=t(60520),g=t(91184),x=t(38509),v=t(14361),C=t(67906),D=t(27736),b=t(97969),S=t(65980),q=t(79390),w=e([i,c,u,p,f,x]);function R({labels:e,recordId:a,store:t,maxAccess:r,loanAmount:s,window:w}){let{getRequest:R,postRequest:j}=(0,d.useContext)(u.$),{platformLabels:F}=(0,d.useContext)(f.l),k=(0,x.E)({endpointId:v.h.LoanDeduction.page}),{formik:O}=(0,y.c)({maxAccess:r,initialValues:{loanId:t.recordId,recordId:null,payrollDeduction:!1,amount:null,date:new Date,type:null,notes:""},validationSchema:o.object({amount:o.number().required().max(s),date:o.date().required(),type:o.string().required()}),onSubmit:e=>{let a={...e,date:(0,q.ku)(e.date),payrollDeduction:1===e.type};j({extension:v.h.LoanDeduction.set,record:JSON.stringify(a)}).then(a=>{c.default.success(e.recordId?F.Edited:F.Added),O.setFieldValue("recordId",a.recordId),k(),w.close()})}}),T=!!O.values.recordId;return n.jsx(i.Z,{resourceId:m.i.Loans,form:O,maxAccess:r,disabledSubmit:!t.isClosed||O.values.payrollDeduction,editMode:T,isInfo:!1,isCleared:!1,children:n.jsx(I.R,{children:n.jsx(h.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:6,children:n.jsx(C.Z,{name:"payrollDeduction",value:O.values?.payrollDeduction,readOnly:!0,label:e.payrollDeduction,maxAccess:r})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(g.Z,{name:"amount",label:e.deductionAmount,value:O.values.amount,required:!0,readOnly:!t.isClosed||O.values.payrollDeduction,maxAccess:r,onChange:async e=>{O.setFieldValue("amount",e?.target?.value||null)},onClear:async()=>{O.setFieldValue("amount",null)},error:O.touched.amount&&!!O.errors.amount,maxLength:10})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"date",label:e.date,required:!0,min:t.effectiveDate,readOnly:!t.isClosed||O.values.payrollDeduction,value:O?.values?.date,onChange:O.setFieldValue,maxAccess:r,onClear:()=>O.setFieldValue("date",null),error:O.touched.date&&!!O.errors.date})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(p.Z,{datasetId:b.v.LOAN_TYPE,name:"type",label:e.type,required:!0,readOnly:!t.isClosed||O.values.payrollDeduction,valueField:"key",displayField:"value",values:O.values,maxAccess:r,onChange:(e,a)=>{O.setFieldValue("type",a?.key||null)},error:O.touched.type&&!!O.errors.type})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.Z,{name:"notes",label:e.notes,readOnly:!t.isClosed||O.values.payrollDeduction,value:O.values.notes,maxLength:"100",maxAccess:r,onChange:e=>O.setFieldValue("notes",e.target.value),onClear:()=>O.setFieldValue("notes",""),error:O.touched.notes&&!!O.errors.notes})})]})})})})}[i,c,u,p,f,x]=w.then?(await w)():w,r()}catch(e){r(e)}})},39532:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>b});var n=t(20997),s=t(40711),l=t(16689),d=t(86201),o=t(29352),i=t(18611),c=t(23385),u=t(42020),m=t(38509),p=t(6416),y=t(24644),h=t(677),I=t(14361),f=t(99155),g=t.n(f),x=t(91184),v=t(58124),C=t(60520),D=e([s,d,o,m,y,h,v,C]);[s,d,o,m,y,h,v,C]=D.then?(await D)():D;let b=({store:e,labels:a})=>{let{recordId:t}=e,{getRequest:r,postRequest:f}=(0,l.useContext)(o.$),{platformLabels:D}=(0,l.useContext)(C.l),{stack:b}=(0,h.zY)(),S=[{field:"payrollDeduction",headerName:a.payrollDeduction,type:"checkbox",flex:1},{field:"amount",headerName:a.amount,flex:1,type:"number"},{field:"date",headerName:a.date,flex:1,type:"date"},{field:"typeName",headerName:a.type,flex:1},{field:"notes",headerName:a.notes,flex:1}];async function q(e={}){let{_startAt:a=0,_pageSize:n=50}=e;return{...await r({extension:I.h.LoanDeduction.page,parameters:`_loanId=${t}&_pageSize=${n}&_startAt=${a}`}),_startAt:a}}let{query:{data:w},access:R,invalidate:j,paginationParameters:F,refetch:k}=(0,m.J)({queryFn:q,endpointId:I.h.LoanDeduction.page,datasetId:p.i.Loans,enabled:!!t}),O=parseFloat(w?.list?.reduce((e,a)=>e+(a.amount||0),0)||0).toFixed(2),T=parseFloat((e.loanAmount||0)-O).toFixed(2);function N(t){b({Component:v.Z,props:{labels:a,store:e,maxAccess:R,loanAmount:e.loanAmount,recordId:t},width:600,height:500,title:a.Deduction})}let A=async e=>{await f({extension:I.h.LoanDeduction.del,record:JSON.stringify(e)}),j(),d.default.success(D.Deleted)};return(0,n.jsxs)(i.R,{children:[n.jsx(u.g,{children:n.jsx(y.Z,{disableAdd:!e.isClosed,onAdd:()=>N(),maxAccess:R})}),n.jsx(c.Q,{children:n.jsx(s.Z,{name:"deductionTable",columns:S,gridData:w,rowId:"recordId",onEdit:e=>N(e.recordId),onDelete:e.isClosed&&A,actionCondition:(e,a)=>"delete"!==a||!1===e.payrollDeduction,pageSize:50,paginationType:"api",paginationParameters:F,refetch:k,maxAccess:R})}),n.jsx(u.g,{children:(0,n.jsxs)(g(),{container:!0,sx:{p:2},spacing:2,children:[n.jsx(g(),{item:!0,xs:4,children:n.jsx(x.Z,{name:"loanAmount",label:a.loanAmount,value:parseFloat(e.loanAmount).toFixed(2),readOnly:!0})}),n.jsx(g(),{item:!0,xs:4,children:n.jsx(x.Z,{name:"deductedAmount",label:a.deductedAmount,value:O,readOnly:!0})}),n.jsx(g(),{item:!0,xs:4,children:n.jsx(x.Z,{name:"remainingBalance",label:a.remainingBalance,value:T,readOnly:!0})})]})})]})};r()}catch(e){r(e)}})},61844:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>T});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(38509),p=t(6416),y=t(71278),h=t(44619),I=t(95965),f=t(18611),g=t(23385),x=t(60520),v=t(79390),C=t(27736),D=t(91184),b=t(65980),S=t(61274),q=t(8297),w=t(86794),R=t(68728),j=t(34340),F=t(96119),k=t(38782),O=e([i,c,u,m,y,x,S,w,k]);function T({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,d.useContext)(u.$),{platformLabels:s}=(0,d.useContext)(x.l),{labels:O,access:T}=(0,k.Z)({datasetId:p.i.EmployeePenalties,editMode:!!e});(0,F.Z)({title:O.empPenalty,window:a});let{maxAccess:N}=(0,w.H)({functionId:R.J.Penalty,access:T,enabled:!e}),{formik:A}=(0,I.c)({initialValues:{recordId:e||null,reference:"",penaltyId:null,employeeId:null,employeeRef:"",employeeName:"",date:new Date,amount:null,notes:"",status:1,wip:1},maxAccess:N,validateOnChange:!0,validationSchema:o.object({date:o.date().required().test(function(e){return e<=new Date}),penaltyId:o.number().required(),amount:o.number().required(),employeeId:o.number().required()}),onSubmit:async e=>{let{employeeName:a,employeeRef:t,date:n,...l}=e,d=await r({extension:q.y.EmployeePenalty.set,record:JSON.stringify({...l,date:(0,v.ku)(n)})});c.default.success(l.recordId?s.Edited:s.Added),Z(d.recordId),V()}}),V=(0,m.E)({endpointId:q.y.EmployeePenalty.page}),P=!!A.values.recordId,L=2===A.values.wip;async function Z(e){if(e){let{record:a}=await t({extension:q.y.EmployeePenalty.get,parameters:`_recordId=${e}`});A.setValues({...a,date:(0,v.a1)(a.date)})}}let{employeeName:M,employeeRef:E,date:J,...B}=A.values,_=async()=>{await r({extension:q.y.EmployeePenalty.close,record:JSON.stringify({...B,date:(0,v.ku)(J)})}),c.default.success(s.Closed),Z(A.values.recordId),V()},H=async()=>{await r({extension:q.y.EmployeePenalty.reopen,record:JSON.stringify({...B,date:(0,v.ku)(J)})}),c.default.success(s.Reopened),Z(A.values.recordId),V()},$=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!P},{key:"Close",condition:!L,onClick:_,disabled:L||!P},{key:"Reopen",condition:L,onClick:H,disabled:!L},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!L}];return n.jsx(i.Z,{resourceId:p.i.EmployeePenalties,functionId:R.J.Penalty,form:A,actions:$,maxAccess:N,editMode:P,children:n.jsx(f.R,{children:n.jsx(g.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(h.Z,{name:"reference",label:O.ref,value:A.values.reference,maxAccess:N,readOnly:P,maxLength:"10",onChange:A.handleChange,onClear:()=>A.setFieldValue("reference",""),error:A.touched.reference&&!!A.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.Z,{name:"date",required:!0,label:O.date,value:A.values?.date,onChange:A.setFieldValue,onClear:()=>A.setFieldValue("date",null),error:A.touched.date&&!!A.errors.date,maxAccess:N,readOnly:L,max:new Date})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{endpointId:j.m.PenaltyType.qry,name:"penaltyId",label:O.penalty,required:!0,valueField:"recordId",readOnly:L,displayField:"name",values:A.values,maxAccess:N,onChange:(e,a)=>{A.setFieldValue("penaltyId",a?.recordId||null)},error:A.touched.penaltyId&&!!A.errors.penaltyId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.U,{endpointId:q.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:L,label:O.employee,secondFieldLabel:O.empName,form:A,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:N,onChange:async(e,a)=>{A.setFieldValue("employeeRef",a?.reference||""),A.setFieldValue("employeeName",a?.fullName||""),A.setFieldValue("employeeId",a?.recordId||null)},errorCheck:"employeeId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"amount",label:O.amount,value:A.values.amount,maxAccess:N,readOnly:L,required:!0,onChange:A.handleChange,onClear:()=>A.setFieldValue("amount",null),error:A.touched.amount&&!!A.errors.amount})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.Z,{name:"notes",label:O.notes,value:A.values.notes,rows:3,readOnly:L,maxAccess:N,onChange:e=>A.setFieldValue("notes",e.target.value),onClear:()=>A.setFieldValue("notes",""),error:A.touched.notes&&!!A.errors.notes})})]})})})})}[i,c,u,m,y,x,S,w,k]=O.then?(await O)():O,T.width=600,T.height=470,r()}catch(e){r(e)}})},43552:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>D});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(71278),i=t(61274),c=t(95965),u=t(29352),m=t(61932),p=t(24380),y=t(79660),h=t(75609),I=t(86201),f=t(18611),g=t(42020),x=t(60520),v=t(18687),C=e([o,i,u,I,x,v]);function D({cashCountId:e,fromPlantId:a,labels:t,maxAccess:r}){let{postRequest:s}=(0,d.useContext)(u.$),{platformLabels:C}=(0,d.useContext)(x.l),{formik:D}=(0,c.c)({maxAccess:r,initialValues:{cashCountId:e,fromPlantId:a,toPlantId:"",toAccountId:""},validateOnChange:!0,validationSchema:h.object({toPlantId:h.string().required(" "),toAccountId:h.string().required(" ")}),onSubmit:async t=>{console.log(t);let r={cashCountId:e,fromPlantId:a,toPlantId:t.toPlantId,toAccountId:t.toAccountId};try{await s({extension:p.s.Generate.generate,record:JSON.stringify(r)}),I.default.success(C.Generated)}catch(e){}}});return n.jsx(v.Z,{onSave:D.handleSubmit,maxAccess:r,children:n.jsx(f.R,{children:n.jsx(g.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(o.Z,{endpointId:y.r.Plant.qry,name:"toPlantId",label:t.toPlant,values:D.values,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,maxAccess:r,onChange:(e,a)=>{D&&D.setFieldValue("toPlantId",a?.recordId),D.setFieldValue("toAccountId",null),D.setFieldValue("fromCARef",null),D.setFieldValue("fromCAName",null)},error:D.touched.toPlantId&&!!D.errors.toPlantId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(i.U,{endpointId:m.G.CashAccount.snapshot,parameters:{_type:0},filter:{plantId:D.values.toPlantId},firstFieldWidth:5,valueField:"accountNo",displayField:"name",name:"toAccountId",displayFieldWidth:2,required:!0,label:t.toCashAccount,form:D,valueShow:"fromCARef",secondValueShow:"fromCAName",onChange:(e,a)=>{D.setFieldValue("toAccountId",a?a.recordId:null),D.setFieldValue("fromCARef",a?a.accountNo:null),D.setFieldValue("fromCAName",a?a.name:null)},error:D.touched.toAccountId&&!!D.errors.toAccountId,maxAccess:r})})]})})})})}[o,i,u,I,x,v]=C.then?(await C)():C,r()}catch(e){r(e)}})},7897:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>T});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(38509),p=t(6416),y=t(44619),h=t(95965),I=t(60520),f=t(18611),g=t(23385),x=t(58131),v=t(61274),C=t(8297),D=t(27736),b=t(91184),S=t(65980),q=t(79390),w=t(68728),R=t(86794),j=t(71278),F=t(38782),k=t(96119),O=e([i,c,u,m,I,v,R,j,F]);function T({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,d.useContext)(u.$),{platformLabels:s}=(0,d.useContext)(I.l),{labels:O,access:T}=(0,F.Z)({datasetId:p.i.LeaveRequest,editMode:!!e});(0,k.Z)({title:O.title,window:a});let N=(0,m.E)({endpointId:x.U.LeaveRequest.page}),{maxAccess:A}=(0,R.H)({functionId:w.J.LeaveRequest,access:T,enabled:!e}),{formik:V}=(0,h.c)({initialValues:{recordId:null,name:"",startDate:null,endDate:null,date:new Date,employeeId:null,justification:"",destination:"",ltId:null,status:1,reference:"",hours:null,multiDayLeave:1,wip:1},maxAccess:A,validateOnChange:!0,validationSchema:o.object({hours:o.number().required(),startDate:o.date().required(),date:o.date().required(),destination:o.string().required(),employeeId:o.number().required(),ltId:o.number().required(),justification:o.string().required()}),onSubmit:async e=>{let a=await r({extension:x.U.LeaveRequest.set,record:JSON.stringify({...e,date:(0,q.ku)(e.date),startDate:(0,q.ku)(e.startDate),endDate:(0,q.ku)(e.endDate)})});c.default.success(e.recordId?s.Edited:s.Added),Z(a.recordId),N()}}),P=!!V.values.recordId,L=V?.values?.wip===2;async function Z(e){if(e){let{record:a}=await t({extension:x.U.LeaveRequest.get,parameters:`_recordId=${e}`});V.setValues({...a,date:(0,q.a1)(a.date),startDate:(0,q.a1)(a.startDate),endDate:(0,q.a1)(a.endDate)})}}let M=async()=>{await r({extension:x.U.LeaveRequest.close,record:JSON.stringify({...V.values,date:(0,q.ku)(V.values.date),startDate:(0,q.ku)(V.values.startDate),endDate:(0,q.ku)(V.values.endDate)})}),c.default.success(s.Closed),Z(V.values.recordId),N()},E=async()=>{await r({extension:x.U.LeaveRequest.reopen,record:JSON.stringify({...V.values,date:(0,q.ku)(V.values.date),startDate:(0,q.ku)(V.values.startDate),endDate:(0,q.ku)(V.values.endDate)})}),c.default.success(s.Reopened),Z(V.values.recordId),N()},J=[{key:"Close",condition:!L,onClick:M,disabled:L||!P},{key:"Reopen",condition:L,onClick:E,disabled:!L||!P||3===V.values.releaseStatus},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!L}];return n.jsx(i.Z,{resourceId:p.i.LeaveRequest,functionId:w.J.LeaveRequest,previewReport:P,form:V,maxAccess:A,editMode:P,actions:J,children:n.jsx(f.R,{children:n.jsx(g.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"reference",label:O.ref,value:V.values.reference,maxAccess:A,maxLength:"30",readOnly:L,onChange:V.handleChange,onClear:()=>V.setFieldValue("reference",""),error:V.touched.reference&&!!V.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:C.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,label:O.employee,secondFieldLabel:O.employeeName,form:V,readOnly:L,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:A,onChange:async(e,a)=>{V.setFieldValue("employeeRef",a?.reference||""),V.setFieldValue("employeeName",a?.fullName||""),V.setFieldValue("employeeId",a?.recordId||null)},errorCheck:"employeeId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"date",label:O.date,value:V.values?.date,required:!0,readOnly:L,onChange:(e,a)=>{V.setFieldValue("date",a||null)},onClear:()=>V.setFieldValue("date",null),error:V.touched.date&&!!V.errors.date,maxAccess:A})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"startDate",label:O.startDate,value:V.values?.startDate,required:!0,readOnly:L,onChange:(e,a)=>{V.setFieldValue("startDate",a||null),V.setFieldValue("endDate",a||null)},onClear:()=>{V.setFieldValue("startDate",null),V.setFieldValue("endDate",null)},error:V.touched.startDate&&!!V.errors.startDate,maxAccess:A})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.Z,{name:"hours",label:O.hours,value:V.values.hours,maxAccess:A,readOnly:L,required:!0,onChange:e=>V.setFieldValue("hours",e.target.value),onClear:()=>V.setFieldValue("hours",null),error:V.touched.hours&&!!V.errors.hours,decimalScale:2})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.Z,{name:"justification",label:O.justification,value:V.values.justification,rows:3,required:!0,readOnly:L,maxAccess:A,onChange:V.handleChange,onClear:()=>V.setFieldValue("justification",""),error:V.touched.justification&&!!V.errors.justification})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"destination",label:O.destination,value:V.values.destination,onChange:V.handleChange,required:!0,readOnly:L,maxLength:100,maxAccess:A,onClear:()=>V.setFieldValue("destination",""),error:V.touched.destination&&!!V.errors.destination})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(j.Z,{endpointId:x.U.IndemnityAccuralsFilters.qry,name:"ltId",label:O.leaveType,valueField:"recordId",values:V.values,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:P,maxAccess:A,onChange:(e,a)=>{V.setFieldValue("ltId",a?.recordId)},error:V.touched.ltId&&!!V.errors.ltId})})]})})})})}[i,c,u,m,I,v,R,j,F]=O.then?(await O)():O,T.width=800,T.height=500,r()}catch(e){r(e)}})},72952:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>T});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(38509),p=t(6416),y=t(44619),h=t(95965),I=t(60520),f=t(18611),g=t(23385),x=t(58131),v=t(61274),C=t(8297),D=t(27736),b=t(65980),S=t(79390),q=t(68728),w=t(86794),R=t(71278),j=t(97969),F=t(38782),k=t(96119),O=e([i,c,u,m,I,v,w,R,F]);function T({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,d.useContext)(u.$),{platformLabels:s}=(0,d.useContext)(I.l),O=(0,m.E)({endpointId:x.U.LeaveReturn.page}),{labels:T,access:N}=(0,F.Z)({datasetId:p.i.LeaveReturn,editMode:!!e});(0,k.Z)({title:T.title,window:a});let{maxAccess:A}=(0,w.H)({functionId:q.J.ReturnFromLeave,access:N,enabled:!e}),{formik:V}=(0,h.c)({initialValues:{recordId:null,date:null,employeeId:null,employeeRef:"",employeeName:"",justification:"",leaveId:null,status:1,reference:"",returnType:null,wip:1,minDate:null,maxDate:null},maxAccess:A,validateOnChange:!0,validationSchema:o.object({date:o.date().typeError().required().test(function(e){let{minDate:a,maxDate:t}=this.parent;return!e||!(a&&e<=new Date(a)||t&&e>=new Date(t))}),leaveId:o.number().required(),returnType:o.number().required(),justification:o.string().required()}),onSubmit:async e=>{let{minDate:a,maxDate:t,employeeName:n,date:l,...d}=e,o=await r({extension:x.U.LeaveReturn.set,record:JSON.stringify({...d,date:(0,S.ku)(l)})});c.default.success(e.recordId?s.Edited:s.Added),Z(o.recordId),O()}}),P=!!V.values.recordId,L=V?.values?.wip===2;async function Z(e){if(e){let{record:a}=await t({extension:x.U.LeaveReturn.get,parameters:`_recordId=${e}`}),r=await G(a.returnType,a.leaveId);V.setValues({...a,date:(0,S.a1)(a.date),minDate:r.minDate,maxDate:r.maxDate})}}let{minDate:M,maxDate:E,employeeName:J,date:B,..._}=V.values,H=async()=>{await r({extension:x.U.LeaveReturn.close,record:JSON.stringify({..._,date:(0,S.ku)(B)})}),c.default.success(s.Closed),Z(_.recordId),O()},$=async()=>{await r({extension:x.U.LeaveReturn.reopen,record:JSON.stringify({..._,date:(0,S.ku)(B)})}),c.default.success(s.Reopened),Z(_.recordId),O()},Q=[{key:"Close",condition:!L,onClick:H,disabled:L||!P},{key:"Reopen",condition:L,onClick:$,disabled:!L},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!L}];async function G(e,a){let r={date:null,minDate:null,maxDate:null};if(!a||!e)return;let{record:n}=await t({extension:x.U.LeaveRequest.get,parameters:`_recordId=${a}`});switch(e){case"1":r.date=(0,S.a1)(n.startDate);break;case"2":r.minDate=(0,S.a1)(n.startDate),r.endDate=(0,S.a1)(n.endDate),r.date=new Date;break;case"3":let s=new Date((0,S.a1)(n.endDate));s.setDate(s.getDate()+1),r.date=s;break;case"4":r.date=new Date,r.minDate=n.startDate}return r}return n.jsx(i.Z,{resourceId:p.i.LeaveReturn,functionId:q.J.ReturnFromLeave,previewReport:P,form:V,maxAccess:A,editMode:P,actions:Q,disabledSubmit:L,children:n.jsx(f.R,{children:n.jsx(g.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"reference",label:T.reference,value:V.values.reference,maxAccess:A,maxLength:"30",readOnly:L,onChange:V.handleChange,onClear:()=>V.setFieldValue("reference",""),error:V.touched.reference&&!!V.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:C.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",label:T.employee,secondFieldLabel:T.employeeName,form:V,readOnly:L,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:A,onChange:async(e,a)=>{V.setFieldValue("employeeRef",a?.reference||""),V.setFieldValue("employeeName",a?.fullName||""),V.setFieldValue("employeeId",a?.recordId||null)},errorCheck:"employeeId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{endpointId:V.values.employeeId&&x.U.LeaveRequest.qry,parameters:`_filter=&_multiDayLeave=2&_params=1|${V.values.employeeId}&_sortBy=recordId&_startAt=0&_size=100`,filter:e=>4==e.status,displayField:["reference",{name:"startDate",type:"date"},{name:"endDate",type:"date"}],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"startDate",value:"Start Date",type:"date"},{key:"endDate",value:"End date",type:"date"}],name:"leaveId",label:T.leave,valueField:"recordId",required:!0,values:V.values,onChange:(e,a)=>{V.setFieldValue("leaveId",a?.recordId||null)},readOnly:L,maxAccess:A,error:V?.touched?.leaveId&&!!V?.errors?.leaveId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{datasetId:j.v.LEAVE_RETURN_TYPE,name:"returnType",label:T.returnType,valueField:"key",displayField:"value",values:V.values,required:!0,readOnly:L,maxAccess:A,onChange:async(e,a)=>{let t=await G(a?.key,V.values.leaveId);V.setValues({...V.values,maxDate:t?.maxDate||null,minDate:t?.minDate||null,date:t?.date||null,returnType:a?.key||null})},error:V.touched.returnType&&!!V.errors.returnType})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"date",label:T.date,value:V.values?.date,required:!0,readOnly:L||"1"==V.values.returnType||"3"==V.values.returnType,onChange:(e,a)=>{V.setFieldValue("date",a||null)},min:V.values.minDate,max:V.values.maxDate,onClear:()=>V.setFieldValue("date",null),error:V.touched.date&&!!V.errors.date,maxAccess:A})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.Z,{name:"justification",label:T.justification,value:V.values.justification,rows:3,required:!0,readOnly:L,maxAccess:A,onChange:V.handleChange,onClear:()=>V.setFieldValue("justification",""),error:V.touched.justification&&!!V.errors.justification})})]})})})})}[i,c,u,m,I,v,w,R,F]=O.then?(await O)():O,T.width=800,T.height=500,r()}catch(e){r(e)}})},15317:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>h});var n=t(20997),s=t(34698),l=t(21061),d=t(16689),o=t(60841),i=t(39532),c=t(96119),u=t(38782),m=t(6416),p=e([o,i,u]);[o,i,u]=p.then?(await p)():p;let y=({recordId:e,window:a})=>{let[t,r]=(0,d.useState)(0),[p,y]=(0,d.useState)({recordId:e,isClosed:!1,loanAmount:0,effectiveDate:null}),{labels:h,access:I}=(0,u.Z)({datasetId:m.i.Loans,editMode:!!e});(0,c.Z)({title:h.Loans,window:a});let f=[{label:h.LoanInfo},{label:h.Deduction,disabled:!p.recordId}];return(0,n.jsxs)(n.Fragment,{children:[n.jsx(l.Y,{tabs:f,activeTab:t,setActiveTab:r}),n.jsx(s.Z,{index:0,value:t,children:n.jsx(o.Z,{labels:h,setStore:y,store:p,maxAccess:I,window:a})}),n.jsx(s.Z,{index:1,value:t,children:n.jsx(i.Z,{labels:h,store:p})})]})};y.width=800,y.height=600;let h=y;r()}catch(e){r(e)}})},60841:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>T});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(38509),p=t(6416),y=t(44619),h=t(95965),I=t(60520),f=t(18611),g=t(42020),x=t(71278),v=t(97969),C=t(14361),D=t(91184),b=t(61274),S=t(8297),q=t(96611),w=t(79660),R=t(27736),j=t(65980),F=t(79390),k=t(68728),O=e([i,c,u,m,I,x,b]);function T({labels:e,maxAccess:a,store:t,setStore:r,window:s}){let{getRequest:O,postRequest:T}=(0,d.useContext)(u.$),{platformLabels:N,defaultsData:A}=(0,d.useContext)(I.l),{recordId:V}=t,P=(0,m.E)({endpointId:C.h.Loans.page}),L=A?.list?.find(({key:e})=>"currencyId"===e)?.value,Z=A?.list?.find(({key:e})=>"ldMethod"===e)?.value,M=A?.list?.find(({key:e})=>"ldValue"===e)?.value,{formik:E}=(0,h.c)({initialValues:{recordId:null,status:1,releaseStatus:null,wip:1,reference:"",date:new Date,employeeId:null,branchId:null,departmentName:"",positionName:"",ltId:null,ltName:"",loanBalance:null,currencyId:parseInt(L),amount:null,purpose:"",effectiveDate:new Date,ldMethod:parseInt(Z),ldmName:"",ldValue:parseInt(M),disableEditing:!1},maxAccess:a,validationSchema:o.object({reference:o.string().required(),employeeId:o.number().required(),date:o.date().required(),ltId:o.number().required(),currencyId:o.number().required(),amount:o.number().min(1).required(),purpose:o.string().required(),ldValue:o.number().min(1).required(),effectiveDate:o.date().required(),ldMethod:o.number().required()}),onSubmit:async e=>{let a={...e,date:(0,F.ku)(e.date),effectiveDate:(0,F.ku)(e.effectiveDate)};await T({extension:C.h.Loans.set,record:JSON.stringify(a)}),c.default.success(e.recordId?N.Edited:N.Added),P(),s.close()}}),J=!!E?.values?.recordId,B=2==E.values.wip,_=async e=>{let a=await O({extension:C.h.Loans.get,parameters:`_recordId=${e}`});if(a?.record){let{record:e}=a;E.setValues({...e,date:(0,F.a1)(e.date),effectiveDate:(0,F.a1)(e.effectiveDate)}),r(t=>({...t,isClosed:2===e.wip,loanAmount:e.amount??0,effectiveDate:(0,F.a1)(a.record.effectiveDate)})),await H(e.employeeId)}return a},H=async e=>{if(!e){$();return}let{record:a}=await O({extension:S.y.QuickView.get,parameters:`_recordId=${e}&_asOfDate=${(0,F.uQ)(new Date)}`});E.setValues(t=>({...t,employeeId:e,employeeRef:a?.reference||"",employeeName:a?.fullName||"",positionName:a?.positionName||"",departmentName:a?.departmentName||"",loanBalance:a?.loanBalance??0,branchId:a?.branchId||null}))},$=()=>{E.setValues(e=>({...e,employeeId:null,employeeRef:"",employeeName:"",positionName:"",departmentName:"",loanBalance:0,branchId:null}))},Q=async e=>{let a=await _(e);a?.record&&(E.setValues(e=>({...e,...a.record,date:(0,F.a1)(a.record.date),effectiveDate:(0,F.a1)(a.record.effectiveDate)})),r(e=>({...e,isClosed:2===a.record.wip,effectiveDate:(0,F.a1)(a.record.effectiveDate)})))},G=async()=>{let e=await T({extension:C.h.Loans.close,record:JSON.stringify(E.values)});c.default.success(N.Closed),P(),Q(e.recordId)},U=async()=>{let e=await T({extension:C.h.Loans.reopen,record:JSON.stringify(E.values)});c.default.success(N.Reopened),P(),Q(e.recordId)},W=[{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!J},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!B||!J},{key:"Close",condition:!B,onClick:G,disabled:B||!J},{key:"Reopen",condition:B,onClick:U,disabled:!B||!J}];return n.jsx(i.Z,{resourceId:p.i.Loans,form:E,maxAccess:a,editMode:J,actions:W,disabledSubmit:B,functionId:k.J.LoanRequest,children:n.jsx(f.R,{children:n.jsx(g.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"reference",label:e.reference,value:E.values.reference,required:!0,readOnly:J,maxAccess:a,maxLength:"20",onChange:E.handleChange,onClear:()=>E.setFieldValue("reference",""),error:E.touched.reference&&!!E.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{name:"date",required:!0,max:E.values.effectiveDate,readOnly:B,label:e.date,value:E?.values?.date,onChange:E.setFieldValue,maxAccess:a,onClear:()=>E.setFieldValue("date",null),error:E.touched.date&&!!E.errors.date})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.U,{endpointId:S.y.Employee.snapshot,parameters:{_branchId:0},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:B,displayFieldWidth:2,label:e.employeeName,form:E,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:a,onChange:(e,a)=>{H(a?.recordId||null)},errorCheck:"employeeId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:q.K.BranchFilters.qry,name:"branchId",label:e.branch,readOnly:!0,valueField:"recordId",displayField:["reference","name"],values:E.values,maxAccess:a,onChange:(e,a)=>E.setFieldValue("branchId",a?.recordId||null),error:E.touched.branchId&&!!E.errors.branchId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"departmentName",label:e.department,value:E.values.departmentName,readOnly:!0,maxAccess:a,error:E.touched.departmentName&&!!E.errors.departmentName})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"positionName",label:e.position,value:E.values.positionName,readOnly:!0,maxAccess:a,error:E.touched.positionName&&!!E.errors.positionName})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:C.h.LoanType.qry,name:"ltId",label:e.ltype,required:!0,readOnly:B,valueField:"recordId",displayField:"name",values:E.values,onChange:(e,a)=>{E.setFieldValue("disableEditing",a?.disableEditing||!1),E.setFieldValue("ldMethod",a?.ldMethod||null),E.setFieldValue("ldValue",a?.ldValue||0),E.setFieldValue("ltId",a?.recordId||null)},error:E.touched.ltId&&!!E.errors.ltId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"loanBalance",label:e.loanBalance,value:E?.values?.loanBalance,maxAccess:a,readOnly:!0})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:w.r.Currency.qry,filter:e=>1===e.currencyType,name:"currencyId",label:e.currency,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:E.values,required:!0,readOnly:B,maxAccess:a,onChange:async(e,a)=>{E.setFieldValue("currencyName",a?.name||""),E.setFieldValue("currencyRef",a?.reference||""),E.setFieldValue("currencyId",a?.recordId||null)},error:E.touched.currencyId&&!!E.errors.currencyId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"amount",label:e.amount,value:E.values.amount,required:!0,readOnly:B,maxAccess:a,onChange:e=>E.setFieldValue("amount",e.target.value),onClear:async()=>{E.setFieldValue("amount",null)},error:E.touched.amount&&!!E.errors.amount,maxLength:10})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(j.Z,{name:"purpose",label:e.purpose,required:!0,rows:2,readOnly:B,value:E.values.purpose,maxAccess:a,onChange:e=>E.setFieldValue("purpose",e.target.value),onClear:()=>E.setFieldValue("purpose",""),error:E.touched.purpose&&!!E.errors.purpose})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{name:"effectiveDate",label:e.effectiveDate,value:E?.values?.effectiveDate,required:!0,min:E.values.date,readOnly:B,onChange:E.setFieldValue,maxAccess:a,onClear:()=>E.setFieldValue("effectiveDate",null),error:E.touched.effectiveDate&&!!E.errors.effectiveDate})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{datasetId:v.v.LOAN_DEDUCTION_METHOD,name:"ldMethod",label:e.ldMethod,required:!0,readOnly:B||E.values.disableEditing,valueField:"key",displayField:"value",values:E.values,maxAccess:a,onChange:(e,a)=>E.setFieldValue("ldMethod",a?.key||null),onClear:async()=>{E.setFieldValue("ldMethod",null),E.setFieldValue("ldValue",null)},error:E.touched.ldMethod&&!!E.errors.ldMethod})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{name:"ldValue",label:e.ldValue,value:E.values.ldValue,required:!0,readOnly:B||E.values.disableEditing,maxAccess:a,onChange:e=>E.setFieldValue("ldValue",e.target.value),onClear:()=>E.setFieldValue("ldValue",null),error:E.touched.ldValue&&!!E.errors.ldValue,maxLength:10})})]})})})})}[i,c,u,m,I,x,b]=O.then?(await O)():O,r()}catch(e){r(e)}})},87361:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>M});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(15051),m=t(29352),p=t(38509),y=t(6416),h=t(44619),I=t(95965),f=t(60520),g=t(18611),x=t(23385),v=t(27736),C=t(71278),D=t(79660),b=t(68728),S=t(65980),q=t(86794),w=t(79390),R=t(70638),j=t(677),F=t(54242),k=t(70305),O=t(96611),T=t(79520);t(8297);var N=t(42020),A=t(61274),V=t(59636),P=t(96119),L=t(38782),Z=e([i,c,u,m,p,f,C,q,R,j,k,A,L]);function M({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,d.useContext)(m.$),{platformLabels:s,defaultsData:Z}=(0,d.useContext)(f.l),{stack:M}=(0,j.zY)(),{stack:E}=(0,k.V)(),[J,B]=(0,d.useState)([]),_=(0,d.useRef)([]),{labels:H,access:$}=(0,L.Z)({datasetId:y.i.MaterialReplenishment,editMode:!!e});(0,P.Z)({title:H.MaterialRequest,window:a});let{documentType:Q,maxAccess:G,changeDT:U}=(0,q.H)({functionId:b.J.MaterialRequest,access:$,enabled:!e}),W=(0,p.E)({endpointId:T.I.MaterialReplenishment.page});JSON.parse(window.sessionStorage.getItem("userData"))?.userId;let{formik:Y}=(0,I.c)({documentType:{key:"dtId",value:Q?.dtId},initialValues:{recordId:null,functionId:b.J.MaterialRequest,reference:"",dtId:null,siteId:null,siteName:"",date:new Date,fromSiteId:"",departmentId:null,departmentName:"",statusName:"",rsName:"",wipName:"",notes:"",workCenterId:null,wcName:"",wcRef:"",status:1,wip:1,items:[{id:1,requestId:e||0,seqNo:1,sku:"",itemName:null,itemId:null,qty:null,notes:"",onHandSite:0,onHandGlobal:null,deliveredQty:null,deliveryStatus:"",muId:null,muQty:"",muRef:"",muName:"",msId:null}]},maxAccess:G,validateOnChange:!0,validationSchema:o.object({date:o.date().required(),fromSiteId:o.string().required(),items:o.array().of(o.object().shape({sku:o.string().required(),qty:o.string().required().min(1)})).required()}),onSubmit:async e=>{let a={...e,date:(0,w.ku)(e?.date)||null};delete a.items;let t=e?.items.map((a,t)=>({...a,seqNo:t+1,requestId:e.recordId||0}));if(e.fromSiteId===e.siteId){E({message:H.errorMessage});return}let n=await r({extension:T.I.MaterialReplenishment.set2,record:JSON.stringify({header:a,items:t})});if(e.recordId)c.default.success(s.Edited);else{c.default.success(s.Added),Y.setFieldValue("recordId",n.recordId);let e=await en(n.recordId),a=await ec(n.recordId);Y.setValues({...e.record,items:a}),W()}}});async function z(e){if(!e)return;let a=Y.values.items?.find(a=>parseInt(a.itemId)===e)?.msId,t=J?.filter(e=>e.msId===a)||[];_.current=t}let K=2===Y.values.wip,X=-1==Y.values.status,ee=!!Y.values.recordId;async function ea(e){let a=await t({extension:F.$.Item.get,parameters:`_recordId=${e}`});return a?.record}async function et(e){let a=await t({extension:F.$.Availability.qry,parameters:`_siteId=${Y.values.fromSiteId||0}&_itemId=${e}&_startAt=0&_pageSize=1000`}),r=a?.count>0,n=r&&0!==a.list[0].siteId;return r&&n?(Y.setFieldValue("onHandSite",a.list[0].onhand),a.list[0].onhand):(Y.setFieldValue("onHandSite",0),null)}let er=[{component:"resourcelookup",label:H.sku,name:"sku",props:{endpointId:F.$.Item.snapshot,valueField:"sku",displayField:"sku",mandatory:!0,readOnly:K||X,displayFieldWidth:3,mapping:[{from:"recordId",to:"itemId"},{from:"msId",to:"msId"},{from:"onHandGlobal",to:"onHandGlobal"},{from:"deliveredQty",to:"deliveredQty"},{from:"sku",to:"sku"},{from:"name",to:"itemName"},{from:"isInactive",to:"isInactive"}],columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"},{key:"flName",value:"flName"}]},async onChange({row:{update:e,newRow:a}}){if(!a?.itemId){e({details:!1});return}if(a.isInactive){e({...Y.initialValues.items[0],id:a.id}),E({message:H.inactiveItem});return}if(a?.itemId){let t=await ea(a.itemId);z(a?.itemId);let r=J?.filter(e=>e.msId===t?.msId),n=await et(a?.itemId)??0;e({msId:t?.msId,onHandSite:n,muRef:r?.[0]?.reference,muId:r?.[0]?.recordId})}}},{component:"textfield",label:H.itemName,name:"itemName",props:{readOnly:!0}},{component:"resourcecombobox",label:H.muId,name:"muRef",props:{store:_?.current,displayField:"reference",valueField:"recordId",readOnly:K||X,mapping:[{from:"reference",to:"muRef"},{from:"recordId",to:"muId"}]},async onChange({row:{update:e,newRow:a}}){let t=_?.current.filter(e=>e.recordId===a?.muId),r=(a?.qty*t?.muQty)??0;e({qtyInBase:r,muQty:a?.muQty})},propsReducer:({row:e,props:a})=>({...a,store:_?.current})},{component:"numberfield",label:H.qty,name:"qty",props:{readOnly:K||X,mandatory:!0},async onChange({row:{update:e,newRow:a}}){if(a){let t=(a?.qty*a?.muQty)??0;e({qtyInBase:t})}}},{component:"numberfield",label:H.onHandSite,name:"onHandSite",props:{readOnly:!0}},{component:"textfield",label:H.notes,name:"notes",props:{readOnly:K||X}}];async function en(e){let a=await t({extension:T.I.MaterialReplenishment.get,parameters:`_requestId=${e}&_params=`});return a.record.date=(0,w.a1)(a?.record?.date),a}let es=async e=>{await r({extension:T.I.MaterialReplenishment.close,record:JSON.stringify({recordId:e})}),c.default.success(s.Closed),W();let a=await en(e),t=await ec(e);Y.setValues({...a.record,items:t})},el=async e=>{let a={...Y.values,date:(0,w.ku)(Y.values?.date)||null};delete a.items,await r({extension:T.I.MaterialReplenishment.reopen,record:JSON.stringify(a)}),c.default.success(s.Reopened),W();let t=await en(e),n=await ec(e);Y.setValues({...t.record,items:n})},ed=async e=>{let a={...Y.values,date:(0,w.ku)(Y.values?.date)||null};delete a.items,await r({extension:T.I.MaterialReplenishment.cancel,record:JSON.stringify(a)}),c.default.success(s.Cancelled),W();let t=await en(e),n=await ec(e);Y.setValues({...t.record,items:n})},eo=async()=>{M({Component:R.Z,props:{functionId:b.J.MaterialRequest,recordId:Y.values.recordId}})},ei=[{key:"Approval",condition:!0,onClick:"onApproval",disabled:!K},{key:"Close",condition:!K,onClick:()=>es(Y.values.recordId),disabled:!ee||X},{key:"Reopen",condition:K,onClick:()=>el(Y.values.recordId),disabled:!ee||X},{key:"WorkFlow",condition:!0,onClick:eo,disabled:!ee},{key:"Cancel",condition:!0,onClick:()=>ed(Y.values.recordId),disabled:!ee||X||K}];async function ec(e){let a=await t({extension:T.I.OrderItem.qry,parameters:`_requestId=${e}&_functionId=${b.J.MaterialRequest}&_params=&_startAt=0`});return a?.list?.length?await Promise.all(a?.list?.map(async e=>({...e,id:e.seqNo,onHandSite:e.onhandSite}))):[]}return n.jsx(i.Z,{resourceId:y.i.MaterialReplenishment,form:Y,maxAccess:G,editMode:ee,previewReport:ee,actions:ei,functionId:b.J.MaterialRequest,disabledSubmit:K||X,children:(0,n.jsxs)(g.R,{children:[n.jsx(N.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:6,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.Z,{endpointId:D.r.DocumentType.qry,parameters:`_dgId=${b.J.MaterialRequest}&_startAt=0&_pageSize=50`,filter:ee?void 0:e=>1===e.activeStatus,name:"dtId",label:H.documentType,readOnly:K||X,valueField:"recordId",displayField:"name",values:Y?.values,onChange:async(e,a)=>{Y.setFieldValue("dtId",a?.recordId||null),U(a)},error:Y.touched.dtId&&!!Y.errors.dtId,maxAccess:G})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(h.Z,{name:"reference",label:H.reference,value:Y?.values?.reference,readOnly:ee,maxAccess:!ee&&G,onChange:Y.handleChange,onClear:()=>Y.setFieldValue("reference",""),error:Y.touched.reference&&!!Y.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(v.Z,{name:"date",label:H.date,value:Y?.values?.date,required:!0,onChange:Y.setFieldValue,onClear:()=>Y.setFieldValue("date",null),readOnly:K||X,error:Y.touched.date&&!!Y.errors.date,maxAccess:G})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.Z,{endpointId:O.K.DepartmentFilters.qry,parameters:"_filter=&_size=1000&_startAt=0&_type=0&_activeStatus=0&_sortBy=recordId",name:"departmentId",readOnly:K||X,label:H.department,values:Y.values,displayField:"name",maxAccess:G,onChange:(e,a)=>{Y.setFieldValue("departmentId",a?.recordId||null)},error:Y.touched.departmentId&&!!Y.errors.departmentId})})]})}),n.jsx(l(),{item:!0,xs:6,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(A.U,{endpointId:V.u.WorkCenter.snapshot,name:"workCenterId",label:H.workCenter,valueField:"reference",displayField:"name",valueShow:"wcRef",secondValueShow:"wcName",displayFieldWidth:2,form:Y,onChange:(e,a)=>{Y.setFieldValue("workCenterId",a?.recordId||null),Y.setFieldValue("wcRef",a?.reference||""),Y.setFieldValue("wcName",a?.name||"")},error:Y.touched.workCenterId&&!!Y.errors.workCenterId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.Z,{endpointId:F.$.Site.qry,name:"siteId",readOnly:K||X,refresh:ee,label:H.site,values:Y.values,displayField:"name",maxAccess:G,onChange:(e,a)=>{Y.setFieldValue("siteId",a?.recordId||null)},error:Y.touched.siteId&&!!Y.errors.siteId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.Z,{endpointId:F.$.Site.qry,name:"fromSiteId",readOnly:K||X||Y?.values?.items?.some(e=>e.sku),label:H.fromSite,values:Y.values,displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],displayFieldWidth:1,required:!0,maxAccess:G,onChange:(e,a)=>{Y.setFieldValue("fromSiteId",a?.recordId||null)},error:Y.touched.fromSiteId&&!!Y.errors.fromSiteId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.Z,{name:"notes",label:H.notes,value:Y?.values?.notes,readOnly:K||X,maxLength:"200",maxAccess:G,onChange:Y.handleChange,onClear:()=>Y.setFieldValue("notes",""),error:Y.touched.notes&&!!Y.errors.notes})})]})})]})}),n.jsx(x.Q,{children:n.jsx(u._,{onChange:e=>{let a=e?.map(e=>({...e,details:!1,qtyInBase:0}));Y?.setFieldValue("items",a)},onSelectionChange:(e,a,t)=>{"muRef"==t&&z(e?.itemId)},name:"items",maxAccess:G,value:Y?.values?.items,error:Y?.errors?.items,columns:er,allowDelete:!K&&!X})})]})})}[i,c,u,m,p,f,C,q,R,j,k,A,L]=Z.then?(await Z)():Z,M.width=1e3,M.height=680,r()}catch(e){r(e)}})},56257:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>Z});var n=t(20997),s=t(99155),l=t.n(s),d=t(75609),o=t(16689),i=t(44619),c=t(80582),u=t(27736),m=t(65305),p=t(29352),y=t(6416),h=t(95965),I=t(18611),f=t(23385),g=t(91184),x=t(61274),v=t(79390),C=t(5162),D=t(44438),b=t(20295),S=t(86201),q=t(68728),w=t(86794),R=t(27559),j=t(677),F=t(60520),k=t(38509),O=t(42020),T=t(71278),N=t(97969),A=t(38782),V=t(96119),P=e([c,p,x,D,b,S,w,R,j,F,k,T,A]);[c,p,x,D,b,S,w,R,j,F,k,T,A]=P.then?(await P)():P;let L=({recordId:e,window:a})=>{let{getRequest:t,postRequest:r}=(0,o.useContext)(p.$),{stack:s}=(0,j.zY)(),{platformLabels:P}=(0,o.useContext)(F.l),[L,Z]=(0,o.useState)(!1),[M,E]=(0,o.useState)(!1),[J,B]=(0,o.useState)(!1),{labels:_,access:H}=(0,A.Z)({datasetId:y.i.OutwardsModification,editMode:!!e});(0,V.Z)({title:_.outwardsModification,window:a});let{maxAccess:$}=(0,w.H)({functionId:q.J.OutwardsModification,access:H,hasDT:!1}),Q=(0,k.E)({endpointId:m.N.OutwardsModification.page}),{formik:G}=(0,h.c)({maxAccess:$,initialValues:{recordId:null,reference:"",date:new Date,outwardsDate:null,owoId:"",owRef:"",ttNo:"",productName:"",clientId:"",currencyId:"",clientRef:"",clientName:"",cellPhone:"",dispersalType:"",countryId:"",headerBenId:"",headerBenName:"",headerBenSeqNo:"",newBeneficiaryId:"",newBeneficiarySeqNo:"",corId:"",oldBeneficiaryId:"",oldBeneficiarySeqNo:"",oldBeneficiarySeqName:"",wip:"",releaseStatus:"",status:"",otpVerified:!1,owtId:"",owtRef:"",plantId:"",seqNo:"",modificationType:"",beneficiaryData:{}},validateOnChange:!0,validationSchema:d.object({owRef:d.string().required(),date:d.string().required(),modificationType:d.string().required()}),onSubmit:async()=>{E(!0)}}),U=!!G.values.recordId,W=2===G.values.wip,Y=4===G.values.status,z=G.values.dispersalType;async function K(e){return await t({extension:m.N.OutwardsModification.get,parameters:`_recordId=${e}`})}let X=async a=>{let t=await r({extension:m.N.OutwardsModification.close,record:JSON.stringify({recordId:a})});e&&S.default.success(P.Closed),Q(),await eo(t.recordId)},ee=async()=>{let e=await r({extension:m.N.OutwardsModification.reopen,record:JSON.stringify({recordId:G.values.recordId})});S.default.success(P.Reopened),Q(),await eo(e.recordId)},ea=async()=>{let e=await r({extension:m.N.OutwardsModification.post,record:JSON.stringify({recordId:G.values.recordId})});S.default.success(P.Posted),Q(),await eo(e.recordId)};function et(e){G.setValues({...G.values,beneficiaryData:e})}function er(e){for(let[a,t]of Object.entries(e))G.setFieldValue(a,t??"")}async function en(e){er(e);let{headerView:a,ttNo:r}=(await t({extension:m.N.OutwardsOrder.get2,parameters:`_recordId=${e?.owoId}`})).record,n={outwardsDate:(0,v.a1)(a.date),amount:a.amount,productName:a.productName,clientId:a.clientId,currencyId:a.currencyId,clientRef:a.clientRef,clientName:a.clientName,cellPhone:a.cellPhone,ttNo:r,dispersalType:a.dispersalType,countryId:a.countryId,corId:a.corId,modificationType:e?.modificationType};er(n),el({headerBenId:e.newBeneficiaryId??"",headerBenName:e.newBeneficiaryName??"",headerBenSeqNo:e.newBeneficiarySeqNo??"",dispersalType:a.dispersalType??""})}function es(){G.resetForm(),Z(!0)}async function el(e){G.setFieldValue("newBeneficiaryId",e.headerBenId),G.setFieldValue("newBeneficiarySeqNo",e.headerBenSeqNo),G.setFieldValue("dispersalType",e.dispersalType)}let ed=[{key:"Close",condition:!W,onClick:()=>X(G.values.recordId),disabled:W||!U},{key:"Reopen",condition:W,onClick:ee,disabled:!W},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!W},{key:"Locked",condition:!0,onClick:ea,disabled:!Y}];async function eo(e){let a=await K(e);a.record.date=(0,v.a1)(a.record.date),await en(a.record)}async function ei(e){if(e)return await t({extension:m.N.OutwardsOrder.get,parameters:`_recordId=${e}`})}return(0,o.useEffect)(()=>{!async function(){if(J){var a;E(!1),B(!1);let t={owoId:G.values.owoId,modificationType:G.values.modificationType,owtId:G.values.owtId,beneficiaryCashPack:1===z?G.values.beneficiaryData:null,beneficiaryBankPack:2===z?G.values.beneficiaryData:null},n=await r({extension:m.N.OutwardsModification.set2,record:JSON.stringify(t)}),l=U?P.Edited:P.Added;S.default.success(l),await eo(n.recordId),Q(),e||(a=n.recordId,s({Component:R.Z,props:{values:G.values,recordId:a,functionId:q.J.OutwardsModification,onSuccess:()=>{X(a)}}}))}}()},[J]),(0,o.useEffect)(()=>{!async function(){e&&await eo(e)}()},[]),n.jsx(c.Z,{resourceId:y.i.OutwardsModification,form:G,maxAccess:$,editMode:U,disabledSubmit:U,onClose:X,isClosed:W,actions:ed,functionId:q.J.OutwardsModification,previewReport:U,children:n.jsx(I.R,{children:n.jsx(f.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(O.g,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:4,children:n.jsx(i.Z,{name:"reference",label:_.reference,value:G.values.reference,maxAccess:$,readOnly:!0})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(u.Z,{name:"date",required:!0,readOnly:U,label:_.date,value:G.values.date,editMode:U,maxAccess:$,onChange:G.setFieldValue,onClear:()=>G.setFieldValue("date",""),error:G.touched.date&&!!G.errors.date})}),n.jsx(l(),{item:!0,xs:2,children:n.jsx(x.U,{endpointId:m.N.OutwardsOrder.snapshot,valueField:"reference",displayField:"reference",name:"owRef",secondDisplayField:!1,required:!0,readOnly:U||G.values.owtRef,label:_.outwardOrder,form:G,onChange:(e,a)=>{a?.recordId?en({owoId:a?.recordId,owRef:a?.reference,oldBeneficiaryId:a?.beneficiaryId,oldBeneficiarySeqNo:a?.beneficiarySeqNo,oldBeneficiaryName:a?.beneficiaryName,newBeneficiaryId:a?.beneficiaryId,newBeneficiarySeqNo:a?.beneficiarySeqNo,newBeneficiaryName:a?.beneficiaryName,dispersalType:a?.dispersalType}):es()},error:G.touched.owRef&&!!G.errors.owRef,maxAccess:$})}),n.jsx(l(),{item:!0,xs:2,children:n.jsx(x.U,{endpointId:m.N.OutwardsTransfer.snapshot,valueField:"reference",displayField:"reference",name:"owtRef",secondDisplayField:!1,readOnly:U||G.values.owRef,label:_.outwardTransfer,form:G,onChange:async(e,a)=>{a?.recordId||es();let t=await ei(a?.owoId);await en({owoId:a?.owoId,owRef:t?.record?.reference,owtId:a?.recordId,owtRef:a?.reference,oldBeneficiaryId:t?.record?.beneficiaryId,oldBeneficiarySeqNo:t?.record?.beneficiarySeqNo,oldBeneficiaryName:t?.record?.beneficiaryName,newBeneficiaryId:t?.record?.beneficiaryId,newBeneficiarySeqNo:t?.record?.beneficiarySeqNo,newBeneficiaryName:t?.record?.beneficiaryName,dispersalType:t?.record?.dispersalType})},error:G.touched.owtRef&&!!G.errors.owtRef,maxAccess:$})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(i.Z,{name:"ttNo",label:_.ttNo,value:G.values.ttNo,readOnly:!0,error:G.touched.ttNo&&!!G.errors.ttNo,maxAccess:$})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(u.Z,{name:"outwardsDate",label:_.outwardsDate,value:G.values.outwardsDate,editMode:U,maxAccess:$,readOnly:!0,error:G.touched.outwardsDate&&!!G.errors.outwardsDate})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(i.Z,{name:"productName",label:_.product,value:G.values.productName,readOnly:!0,error:G.touched.ttNo&&!!G.errors.productName,maxAccess:$})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(g.Z,{name:"amount",label:_.amount,value:G.values.amount,maxAccess:$,readOnly:!0,error:G.touched.amount&&!!G.errors.amount})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(T.Z,{datasetId:N.v.OW_MODIFICATION_TYPE,name:"modificationType",label:_.modificationType,values:G.values,valueField:"key",displayField:"value",required:!0,readOnly:U,maxAccess:$,onChange:(e,a)=>{G.setFieldValue("modificationType",a?.key),a?.key==3&&(Z(!0),G.setFieldValue("newBeneficiaryId",""),G.setFieldValue("newBeneficiarySeqNo",""),G.setFieldValue("headerBenName",""))},error:G.touched.modificationType&&!!G.errors.modificationType})}),n.jsx(l(),{item:!0,xs:4,children:n.jsx(x.U,{endpointId:m.N.Beneficiary.snapshot2,parameters:{_clientId:G.values.clientId,_dispersalType:G.values.dispersalType,_currencyId:G.values.currencyId},valueField:"name",displayField:"name",name:"headerBenName",label:_.beneficiary,form:G,readOnly:!G.values.clientId||!G.values.dispersalType||U||Y||2!=G.values.modificationType,maxAccess:$,editMode:U,secondDisplayField:!1,onChange:async(e,a)=>{a?.beneficiaryId?el({headerBenId:a?.beneficiaryId,headerBenName:a?.name,headerBenSeqNo:a?.seqNo,dispersalType:a?.dispersalType}):(G.setFieldValue("headerBenId",""),G.setFieldValue("headerBenName",""),G.setFieldValue("headerBenSeqNo",""))},errorCheck:"headerBenId"})})]})})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(f.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:6,children:(0,n.jsxs)(C.Z,{title:_.benOld,form:!0,children:[2===z&&n.jsx(b.Z,{client:{clientId:G.values.clientId,clientName:G.values.clientName,clientRef:G.values.clientRef},beneficiary:{beneficiaryId:G.values.oldBeneficiaryId,beneficiarySeqNo:G.values.oldBeneficiarySeqNo},dispersalType:G.values.dispersalType,countryId:G.values.countryId,corId:G.values.corId,recordId:G.values?.clientId&&G.values?.oldBeneficiaryId&&G.values?.oldBeneficiarySeqNo?(100*G.values.clientId).toString()+(10*G.values.oldBeneficiaryId).toString()+G.values.oldBeneficiarySeqNo:null,viewBtns:!1}),1===z&&n.jsx(D.Z,{client:{clientId:G.values.clientId,clientName:G.values.clientName,clientRef:G.values.clientRef},beneficiary:{beneficiaryId:G.values.oldBeneficiaryId,beneficiarySeqNo:G.values.oldBeneficiarySeqNo},dispersalType:G.values.dispersalType,countryId:G.values.countryId,corId:G.values.corId,recordId:G.values?.clientId&&G.values?.oldBeneficiaryId&&G.values?.oldBeneficiarySeqNo?(100*G.values.clientId).toString()+(10*G.values.oldBeneficiaryId).toString()+G.values.oldBeneficiarySeqNo:null,viewBtns:!1})]})}),n.jsx(l(),{item:!0,xs:6,children:(0,n.jsxs)(C.Z,{title:_.benNew,form:!0,children:[2===z&&n.jsx(b.Z,{viewBtns:!1,resetForm:L,setResetForm:Z,onChange:et,submitted:M,setSubmitted:E,setValidSubmit:B,forceEdit:U,client:{clientId:G.values.clientId,clientName:G.values.clientName,clientRef:G.values.clientRef},beneficiary:{beneficiaryId:G.values.newBeneficiaryId,beneficiarySeqNo:G.values.newBeneficiarySeqNo},dispersalType:G.values.dispersalType,corId:G.values.corId,recordId:G.values?.clientId&&G.values?.newBeneficiaryId&&G.values?.newBeneficiarySeqNo?(100*G.values.clientId).toString()+(10*G.values.newBeneficiaryId).toString()+G.values.newBeneficiarySeqNo:null,submitMainForm:!1}),1===z&&n.jsx(D.Z,{viewBtns:!1,forceEdit:U,resetForm:L,setResetForm:Z,onChange:et,submitted:M,setSubmitted:E,setValidSubmit:B,client:{clientId:G.values.clientId,clientName:G.values.clientName,clientRef:G.values.clientRef},beneficiary:{beneficiaryId:G.values.newBeneficiaryId,beneficiarySeqNo:G.values.newBeneficiarySeqNo},dispersalType:G.values.dispersalType,countryId:G.values.countryId,corId:G.values.corId,recordId:G.values?.clientId&&G.values?.newBeneficiaryId&&G.values?.newBeneficiarySeqNo?(100*G.values.clientId).toString()+(10*G.values.newBeneficiaryId).toString()+G.values.newBeneficiarySeqNo:null,submitMainForm:!1})]})})]})})})]})})})})};L.width=1200,L.height=650;let Z=L;r()}catch(e){r(e)}})},35289:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>T});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(86201),c=t(79390),u=t(29352),m=t(60520),p=t(38509),y=t(34340),h=t(68728),I=t(86794),f=t(95965),g=t(6416),x=t(80582),v=t(18611),C=t(23385),D=t(71278),b=t(79660),S=t(44619),q=t(27736),w=t(97969),R=t(91184),j=t(65980),F=t(38782),k=t(96119),O=e([i,u,m,p,I,x,D,F]);function T({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,d.useContext)(u.$),{platformLabels:s,defaultsData:O}=(0,d.useContext)(m.l),T=parseInt(O?.list?.find(({key:e})=>"pytvStartDate"===e)?.value)||null,N=parseInt(O?.list?.find(({key:e})=>"pytvEndDate"===e)?.value)||null,A=(0,p.E)({endpointId:y.m.Payroll.page}),{labels:V,access:P}=(0,F.Z)({datasetId:g.i.PayrollHeader,editMode:!!e});(0,k.Z)({title:V.payrollList,window:a});let{documentType:L,maxAccess:Z,changeDT:M}=(0,I.H)({functionId:h.J.PayrollList,access:P,enabled:!e}),{formik:E}=(0,f.c)({maxAccess:Z,documentType:{key:"dtId",value:L?.dtId,reference:L?.reference},initialValues:{recordId:null,dtId:null,reference:"",fiscalYear:null,salaryType:5,date:new Date,payDate:null,startDate:null,endDate:null,taStartDate:null,taEndDate:null,calendarDays:null,periodId:null,notes:"",status:1},validationSchema:o.object({periodId:o.number().required(),date:o.date().required(),payDate:o.date().required(),startDate:o.date().required(),endDate:o.date().required(),fiscalYear:o.number().required()}),onSubmit:async e=>{await r({extension:y.m.Payroll.set,record:JSON.stringify(e)}),i.default.success(e.recordId?s.Edited:s.Added),A(),a.close()}}),J=!!E.values.recordId,B=2==E.values.wip,_=3===E.values.status,H=async e=>{if(e){let a=await t({extension:y.m.Payroll.get,parameters:`_recordId=${e}`});E.setValues({...a.record,date:(0,c.a1)(a.record.date),payDate:(0,c.a1)(a.record.payDate),startDate:(0,c.a1)(a.record.startDate),endDate:(0,c.a1)(a.record.endDate),taStartDate:(0,c.a1)(a.record.taStartDate),taEndDate:(0,c.a1)(a.record.taEndDate)})}},$=async()=>{let e=await r({extension:y.m.Payroll.close,record:JSON.stringify({...E.values,date:(0,c.ku)(E.values.date),payDate:(0,c.ku)(E.values.payDate),startDate:(0,c.ku)(E.values.startDate),endDate:(0,c.ku)(E.values.endDate),taStartDate:(0,c.ku)(E.values.taStartDate),taEndDate:(0,c.ku)(E.values.taEndDate)})});i.default.success(s.Closed),H(e?.recordId),A()},Q=async()=>{await r({extension:y.m.Payroll.post,record:JSON.stringify({...E.values,date:(0,c.ku)(E.values.date),payDate:(0,c.ku)(E.values.payDate),startDate:(0,c.ku)(E.values.startDate),endDate:(0,c.ku)(E.values.endDate),taStartDate:(0,c.ku)(E.values.taStartDate),taEndDate:(0,c.ku)(E.values.taEndDate)})}),i.default.success(s.Posted),H(e),A()},G=async()=>{let e=await r({extension:y.m.Payroll.unpost,record:JSON.stringify({...E.values,date:(0,c.ku)(E.values.date),payDate:(0,c.ku)(E.values.payDate),startDate:(0,c.ku)(E.values.startDate),endDate:(0,c.ku)(E.values.endDate),taStartDate:(0,c.ku)(E.values.taStartDate),taEndDate:(0,c.ku)(E.values.taEndDate)})});i.default.success(s.Unposted),H(e?.recordId),A()},U=async()=>{let e=await r({extension:y.m.Payroll.reopen,record:JSON.stringify({...E.values,date:(0,c.ku)(E.values.date),payDate:(0,c.ku)(E.values.payDate),startDate:(0,c.ku)(E.values.startDate),endDate:(0,c.ku)(E.values.endDate),taStartDate:(0,c.ku)(E.values.taStartDate),taEndDate:(0,c.ku)(E.values.taEndDate)})});i.default.success(s.Reopened),H(e?.recordId),A()},W=[{key:"GL",condition:!0,onClick:"onClickGL",datasetId:g.i.GLPayrollList,disabled:!J},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!B},{key:"Close",condition:!B,onClick:$,disabled:B||!J},{key:"Reopen",condition:B,onClick:U,disabled:!B||_},{key:"Unlocked",condition:!_,onClick:Q,disabled:!J||!B},{key:"Locked",condition:_,onClick:"onUnpostConfirmation",onSuccess:G,disabled:!J||!B}],Y=(e,a,t,r)=>{if(!e||!a)return{};let n=new Date(e),s=new Date(a),l=new Date(s.getFullYear(),s.getMonth(),r),d=n.getMonth(),o=n.getFullYear();return t>n.getDate()&&(d-=1)<0&&(d=11,o-=1),{taStartDate:new Date(o,d,t),taEndDate:l}};return n.jsx(x.Z,{resourceId:g.i.PayrollHeader,form:E,maxAccess:Z,editMode:J,actions:W,functionId:h.J.PayrollList,disabledSubmit:B,children:n.jsx(v.R,{children:n.jsx(C.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{endpointId:b.r.DocumentType.qry,parameters:`_startAt=0&_pageSize=1000&_dgId=${h.J.PayrollList}`,name:"dtId",label:V.docType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:J,valueField:"recordId",displayField:["reference","name"],values:E.values,maxAccess:Z,onChange:async(e,a)=>{await M(a),E.setFieldValue("dtId",a?.recordId||null)},error:E.touched.dtId&&!!E.errors.dtId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.Z,{name:"reference",label:V.reference,value:E?.values?.reference,maxAccess:!J&&Z,readOnly:J,onChange:E.handleChange,onClear:()=>E.setFieldValue("reference",""),error:E.touched.reference&&!!E.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(q.Z,{name:"date",required:!0,label:V.date,value:E?.values?.date,maxAccess:Z,readOnly:B,onChange:E.setFieldValue,onClear:()=>E.setFieldValue("date",null),error:E.touched.date&&!!E.errors.date})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{endpointId:y.m.FiscalYear.qry,name:"fiscalYear",label:V.fiscalYear,valueField:"fiscalYear",displayField:"fiscalYear",values:E.values,readOnly:B,required:!0,maxAccess:Z,onChange:(e,a)=>{E.setFieldValue("fiscalYear",a?.fiscalYear||null)},error:E.touched.fiscalYear&&!!E.errors.fiscalYear})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{datasetId:w.v.SALARY_TYPE,name:"salaryType",label:V.salaryType,valueField:"key",displayField:"value",values:E.values,maxAccess:Z,readOnly:!0,onChange:(e,a)=>E.setFieldValue("salaryType",a?.key||null),error:E.touched.salaryType&&!!E.errors.salaryType})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(D.Z,{endpointId:y.m.Period.qry,parameters:E.values.fiscalYear&&E.values.salaryType&&`_year=${E.values.fiscalYear}&_salaryType=${E.values.salaryType}&_status=0`,name:"periodId",label:V.period,valueField:"periodId",required:!0,displayField:"periodName",values:E.values,readOnly:B,maxAccess:Z,onChange:(e,a)=>E.setFieldValue("periodId",a?.periodId||null),error:E.touched.periodId&&!!E.errors.periodId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(q.Z,{name:"payDate",required:!0,label:V.payDate,value:E?.values?.payDate,maxAccess:Z,readOnly:B,onChange:(e,a)=>{if(a&&5===E.values.salaryType){let e=new Date(a),t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0),n=r.getTime()-t.getTime();if(E.setFieldValue("calendarDays",n/864e5+1),E.setFieldValue("startDate",t),E.setFieldValue("endDate",r),E.setFieldTouched("startDate",!1,!1),E.setFieldTouched("endDate",!1,!1),T&&N){let{taStartDate:e,taEndDate:a}=Y(t,r,T,N);E.setFieldValue("taStartDate",e),E.setFieldValue("taEndDate",a)}}E.setFieldValue("payDate",a)},onClear:()=>{E.setFieldValue("payDate",null),E.setFieldValue("calendarDays",""),E.setFieldValue("startDate",null),E.setFieldValue("endDate",null),E.setFieldValue("taStartDate",null),E.setFieldValue("taEndDate",null)},error:E.touched.payDate&&!!E.errors.payDate})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(q.Z,{name:"startDate",label:V.startDate,value:E?.values?.startDate,maxAccess:Z,readOnly:!0,required:!0,onChange:E.setFieldValue,onClear:()=>E.setFieldValue("startDate",null),error:E.touched.startDate&&!!E.errors.startDate})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(q.Z,{name:"endDate",label:V.endDate,value:E?.values?.endDate,onChange:E.setFieldValue,maxAccess:Z,readOnly:!0,required:!0,onClear:()=>E.setFieldValue("endDate",null),error:E.touched.endDate&&!!E.errors.endDate})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(q.Z,{name:"taStartDate",label:V.taStartDate,value:E?.values?.taStartDate,onChange:E.setFieldValue,maxAccess:Z,readOnly:!0,onClear:()=>E.setFieldValue("taStartDate",null),error:E.touched.taStartDate&&!!E.errors.taStartDate})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(q.Z,{name:"taEndDate",label:V.taEndDate,value:E?.values?.taEndDate,onChange:E.setFieldValue,maxAccess:Z,readOnly:!0,onClear:()=>E.setFieldValue("taEndDate",null),error:E.touched.taEndDate&&!!E.errors.taEndDate})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{name:"calendarDays",label:V.calendarDays,value:E.values.calendarDays,onChange:E.handleChange,onClear:()=>E.setFieldValue("calendarDays",""),readOnly:!0,maxAccess:Z,error:E.touched.calendarDays&&!!E.errors.calendarDays})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(j.Z,{name:"notes",label:V.notes,value:E.values.notes,maxAccess:Z,readOnly:B,rows:3,maxLength:"128",onChange:e=>E.setFieldValue("notes",e.target.value),onClear:()=>E.setFieldValue("notes",""),error:E.touched.notes&&!!E.errors.notes})})]})})})})}[i,u,m,p,I,x,D,F]=O.then?(await O)():O,T.width=850,T.height=700,r()}catch(e){r(e)}})},33298:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>N});var n=t(20997),s=t(27736),l=t(79390),d=t(99155),o=t.n(d),i=t(16689),c=t(75609),u=t(80582),m=t(86201),p=t(29352),y=t(38509),h=t(6416),I=t(44619),f=t(65980),g=t(71278),x=t(68728),v=t(61274),C=t(23385),D=t(18611),b=t(91184),S=t(95965),q=t(60520),w=t(8297),R=t(5162),j=t(31367),F=t(70305),k=t(96119),O=t(38782),T=e([u,m,p,y,g,v,q,F,O]);function N({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,i.useContext)(p.$),{platformLabels:d}=(0,i.useContext)(q.l),{stack:T}=(0,F.V)(),{labels:N,access:A}=(0,O.Z)({datasetId:h.i.ResignationRequest,editMode:!!e});(0,k.Z)({title:N.ResignationReq,window:a});let V=(0,y.E)({endpointId:w.y.ResignationRequest.page}),{formik:P}=(0,S.c)({maxAccess:A,initialValues:{recordId:e||null,reference:"",date:new Date,effectiveDate:null,employeeId:null,department:null,position:null,branch:null,hireDate:null,serviceDuration:null,netSalary:null,explanation:"",status:1,wip:1,reasonId:null,releaseStatus:null},validateOnChange:!0,validationSchema:c.object({employeeId:c.number().required(),effectiveDate:c.date().required(),date:c.date().required(),reasonId:c.number().required()}),onSubmit:async a=>{let{hireDate:t,department:n,position:s,branch:o,serviceDuration:i,netSalary:c,...u}=a;r({extension:w.y.ResignationRequest.set,record:JSON.stringify({...u,date:(0,l.OZ)(new Date(a.date)),effectiveDate:(0,l.OZ)(new Date(a.effectiveDate))})}).then(async a=>{m.default.success(e?d.Edited:d.Added),P.setFieldValue("recordId",a.recordId),await L(a.recordId),V()})}});function L(e){t({extension:w.y.ResignationRequest.get,parameters:`_recordId=${e}`}).then(e=>{(function(e){t({extension:w.y.QuickView.get,parameters:`_recordId=${e?.employeeId}&_asOfDate=${(0,l.Uf)((0,l.a1)(e?.date))}`}).then(a=>{P.setValues({...P.values,...e,effectiveDate:(0,l.a1)(e?.effectiveDate),date:(0,l.a1)(e?.date),hireDate:(0,l.a1)(a?.record?.hireDate),department:a?.record?.departmentName,position:a?.record?.positionName,branch:a?.record?.branchName,serviceDuration:a?.record?.serviceDuration,netSalary:a?.record?.salary})})})(e.record)})}async function Z(e){e?await t({extension:w.y.QuickView.get,parameters:`_recordId=${e}&_asOfDate=${(0,l.Uf)(P?.values?.date)}`}).then(e=>{P.setFieldValue("hireDate",(0,l.a1)(e?.record?.hireDate)||null),P.setFieldValue("department",e?.record?.departmentName||null),P.setFieldValue("position",e?.record?.positionName||null),P.setFieldValue("branch",e?.record?.branchName||null),P.setFieldValue("serviceDuration",e?.record?.serviceDuration||null),P.setFieldValue("netSalary",e?.record?.salary||0)}):(P.setFieldValue("hireDate",null),P.setFieldValue("department",null),P.setFieldValue("position",null),P.setFieldValue("branch",null),P.setFieldValue("serviceDuration",null),P.setFieldValue("netSalary",null))}let M=!!P.values.recordId,E=2===P.values.wip;async function J(){let{hireDate:e,department:a,position:t,branch:n,serviceDuration:s,netSalary:o,...i}=P?.values;await r({extension:w.y.ResignationRequest.close,record:JSON.stringify({...i,date:(0,l.OZ)(new Date(P?.values?.date)),effectiveDate:(0,l.OZ)(new Date(P?.values?.effectiveDate))})}).then(()=>{m.default.success(d.Closed),V(),L(P?.values?.recordId)})}async function B(){P?.values?.releaseStatus?await t({extension:j.y.ReleaseIndicator.get,parameters:`_recordId=${P?.value?.releaseStatus}`}).then(e=>{e?.record?.isReleased?T({message:N.documentReleasedError}):_()}):_()}async function _(){let{hireDate:e,department:a,position:t,branch:n,serviceDuration:s,netSalary:o,...i}=P?.values;await r({extension:w.y.ResignationRequest.reopen,record:JSON.stringify({...i,date:(0,l.OZ)(new Date(P?.values?.date)),effectiveDate:(0,l.OZ)(new Date(P?.values?.effectiveDate))})}).then(()=>{m.default.success(d.Reopened),V(),L(P?.values?.recordId)})}let H=[{key:"Close",condition:!E,onClick:J,disabled:E||!M},{key:"Reopen",condition:E,onClick:B,disabled:!E||!M},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!E}];return n.jsx(u.Z,{resourceId:h.i.ResignationRequest,functionId:x.J.ResignationRequest,form:P,maxAccess:A,actions:H,editMode:M,isClosed:E,disabledSubmit:E,children:n.jsx(D.R,{children:n.jsx(C.Q,{children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:6,children:n.jsx(I.Z,{name:"reference",label:N.reference,value:P?.values?.reference,maxAccess:A,readOnly:!M||E,onChange:P.handleChange,onClear:()=>P.setFieldValue("reference",""),error:P.touched.reference&&!!P.errors.reference})}),n.jsx(o(),{item:!0,xs:6,children:n.jsx(s.Z,{name:"effectiveDate",required:!0,label:N.effectiveDate,value:P?.values?.effectiveDate,onChange:P.setFieldValue,readOnly:E,maxAccess:A,onClear:()=>P.setFieldValue("effectiveDate",null),error:P.touched.effectiveDate&&!!P.errors.effectiveDate})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(v.U,{endpointId:w.y.Employee.snapshot,parameters:{_branchId:0},required:!0,form:P,filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeRef",readOnly:E,label:N.employee,secondFieldLabel:N.name,secondDisplayField:!0,secondValue:P.values.employeeName,onChange:(e,a)=>{P.setFieldValue("employeeId",a?.recordId||null),P.setFieldValue("employeeRef",a?.reference||null),P.setFieldValue("employeeName",a?.fullName||null),Z(a?.recordId)},error:P.touched.employeeId&&!!P.errors.employeeId})}),n.jsx(o(),{item:!0,xs:6,children:n.jsx(s.Z,{name:"date",required:!0,readOnly:E,label:N.date,value:P?.values?.date,onChange:P.setFieldValue,maxAccess:A,onClear:()=>P.setFieldValue("date",null),error:P.touched.date&&!!P.errors.date})}),n.jsx(o(),{item:!0,xs:12,children:(0,n.jsxs)(R.Z,{title:N.jobInfo,children:[n.jsx(o(),{item:!0,xs:6,children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:12,children:n.jsx(I.Z,{name:"department",label:N.department,value:P?.values?.department,maxAccess:A,readOnly:!0})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(I.Z,{name:"position",label:N.position,value:P?.values?.position,maxAccess:A,readOnly:!0})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(I.Z,{name:"branch",label:N.branch,value:P?.values?.branch,maxAccess:A,readOnly:!0})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(s.Z,{name:"hireDate",label:N.hireDate,value:P?.values?.hireDate,readOnly:!0,maxAccess:A})})]})}),n.jsx(o(),{item:!0,xs:6,children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:12,children:n.jsx(I.Z,{name:"serviceDuration",label:N.YIS,value:P?.values?.serviceDuration,maxAccess:A,readOnly:!0})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(b.Z,{name:"netSalary",label:N.netSalary,value:P?.values?.netSalary,maxAccess:A,readOnly:!0})})]})})]})}),n.jsx(o(),{item:!0,xs:6,children:n.jsx(g.Z,{endpointId:w.y.TerminationReasons.qry,name:"reasonId",label:N.reason,valueField:"recordId",required:!0,displayField:"name",readOnly:E,values:P.values,onChange:(e,a)=>{P.setFieldValue("reasonId",a?.recordId||null)},error:P.touched.reasonId&&!!P.errors.reasonId,maxAccess:A})}),n.jsx(o(),{item:!0,xs:7,children:n.jsx(f.Z,{name:"explanation",label:N.explanation,value:P.values.explanation,rows:3,readOnly:E,maxAccess:A,onChange:e=>P.setFieldValue("explanation",e.target.value),onClear:()=>P.setFieldValue("explanation",""),error:P.touched.explanation&&!!P.errors.explanation})})]})})})})}[u,m,p,y,g,v,q,F,O]=T.then?(await T)():T,N.width=850,N.height=630,r()}catch(e){r(e)}})},78169:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>Z});var n=t(20997),s=t(27736),l=t(79390),d=t(99155),o=t.n(d),i=t(16689),c=t(75609),u=t(80582),m=t(86201),p=t(29352),y=t(38509),h=t(6416),I=t(44619),f=t(65980),g=t(71278),x=t(79660),v=t(54242),C=t(68728),D=t(15051),b=t(18611),S=t(42020),q=t(23385),w=t(95965),R=t(60520),j=t(86794),F=t(59636),k=t(91184),O=t(93105),T=t(61274),N=t(96995),A=t(528),V=t(38782),P=t(96119),L=e([u,m,p,y,g,D,R,j,T,A,V]);function Z({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,i.useContext)(p.$),{platformLabels:d}=(0,i.useContext)(R.l),L=(0,i.useRef)(null),{labels:Z,access:M}=(0,V.Z)({datasetId:h.i.Samples,editMode:!!e});(0,P.Z)({title:Z.samples,window:a});let{documentType:E,maxAccess:J,changeDT:B}=(0,j.H)({functionId:C.J.Samples,access:M,enabled:!e}),_=(0,y.E)({endpointId:N.z.Samples.page}),{schema:H,requiredFields:$}=(0,O.m)({sku:e=>e?.sku,stonePct:e=>e?.stonePct!=null,weight:e=>e?.weight!=null,pcs:e=>e?.pcs!=null,itemName:e=>e?.itemName},!0,J,"rows"),{formik:Q}=(0,w.c)({maxAccess:J,documentType:{key:"dtId",value:E?.dtId},conditionSchema:["rows"],initialValues:{recordId:e,header:{recordId:e,dtId:null,reference:"",date:new Date,productionStandardId:null,productionClassId:null,weight:null,siteId:null,collectionId:null,jobId:null,itemId:null,threeDDId:null,productionLineId:null,designFamilyId:null,designGroupId:null,statusName:"",notes:"",status:1},rows:[{id:1,sampleId:e,sku:"",itemName:"",weight:null,pcs:null,stonePct:null,seqNo:""}]},validateOnChange:!0,validationSchema:c.object({header:c.object({productionStandardId:c.number().required(),productionClassId:c.number().required(),weight:c.number().required(),siteId:c.number().required(),collectionId:c.number().required(),jobId:c.number().required(),threeDDId:c.number().required(),productionLineId:c.number().required(),date:c.date().required()}),rows:c.array().of(H)}),onSubmit:async a=>{let{rows:t,header:n}=a,s={...n,date:(0,l.ku)(n.date)},o=t?.filter(e=>Object.values($)?.every(a=>a(e))).map((a,t)=>({...a,sampleId:e??0,seqNo:t+1})),i=await r({extension:N.z.Samples.set2,record:JSON.stringify({header:s,items:o})});L.current&&(L.current.value=i.recordId,await L.current.submit()),m.default.success(a.recordId?d.Edited:d.Added),_(),K(i?.recordId)}}),G=!!Q.values.recordId,U=3===Q.values.header.status,W=2===Q.values.header.wip;async function Y(){await r({extension:N.z.Samples.post,record:JSON.stringify({...Q?.values?.header,date:(0,l.ku)(Q?.values?.header.date)})}),m.default.success(d.Posted),a.close(),_()}let z=[{component:"resourcelookup",label:Z.sku,name:"sku",width:100,props:{endpointId:v.$.Item.snapshot,valueField:"sku",displayField:"sku",mapping:[{from:"recordId",to:"itemId"},{from:"sku",to:"sku"},{from:"name",to:"itemName"}],columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}],displayFieldWidth:2}},{component:"numberfield",name:"pcs",label:Z.pcs,width:100,props:{maxLength:4}},{component:"numberfield",name:"weight",label:Z.weight,width:100,props:{maxLength:10,decimalScale:3}},{component:"numberfield",name:"stonePct",label:Z.stonePct,width:100,props:{maxLength:5,decimalScale:2}}];async function K(e){let a=await t({extension:N.z.Samples.get2,parameters:`_recordId=${e}`}),r=a?.record?.items?.length?a?.record?.items?.map((e,a)=>({...e,id:a+1})):Q.initialValues.rows;return Q.setValues({recordId:a?.record?.header?.recordId,header:{...a?.record?.header,date:(0,l.a1)(a?.record?.header?.date)},rows:r}),a?.record}let X=async()=>{await r({extension:N.z.Samples.close,record:JSON.stringify(Q.values.header)}),m.default.success(d.Closed),K(Q?.values?.header?.recordId),_()},ee=async()=>{await r({extension:N.z.Samples.reopen,record:JSON.stringify(Q.values.header)}),m.default.success(d.Closed),K(Q?.values?.header?.recordId),_()},ea=[{key:"Approval",condition:!0,onClick:"onApproval",disabled:!W},{key:"Unlocked",condition:!U,onClick:Y,disabled:!G||!W},{key:"Locked",condition:U,onClick:"onUnpostConfirmation",disabled:!0},{key:"Close",condition:!W,onClick:X,disabled:W||!G},{key:"Reopen",condition:W,onClick:ee,disabled:!W||U}];return n.jsx(u.Z,{resourceId:h.i.Samples,functionId:C.J.Samples,form:Q,maxAccess:J,actions:ea,editMode:G,previewReport:G,disabledSubmit:W,children:(0,n.jsxs)(b.R,{children:[n.jsx(S.g,{children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:3,children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:x.r.DocumentType.qry,parameters:`_startAt=0&_pageSize=1000&_dgId=${C.J.Samples}`,name:"header.dtId",label:Z.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:G,valueField:"recordId",displayField:["reference","name"],values:Q.values.header,maxAccess:J,onChange:(e,a)=>{Q.setFieldValue("header.dtId",a?.recordId||null),B(a)},error:Q.touched?.header?.dtId&&!!Q.errors?.header?.dtId})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(I.Z,{name:"header.reference",label:Z.reference,value:Q?.values?.header?.reference,maxAccess:!G&&J,maxLength:"30",readOnly:G,onChange:Q.handleChange,onClear:()=>Q.setFieldValue("header.reference",""),error:Q.touched.header?.reference&&!!Q.errors.header?.reference})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(s.Z,{name:"header.date",label:Z.date,readOnly:W,value:Q?.values?.header.date,onChange:Q.setFieldValue,required:!0,maxAccess:J,onClear:()=>Q.setFieldValue("header.date",null),error:Q?.touched?.header?.date&&!!Q?.errors?.header?.date})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:v.$.Site.qry,name:"header.siteId",label:Z.site,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],values:Q.values.header,valueField:"recordId",displayField:["reference","name"],maxAccess:J,readOnly:W,onChange:(e,a)=>{Q.setFieldValue("header.siteId",a?.recordId||null)},required:!0,error:Q?.touched?.header?.siteId&&!!Q.errors?.header?.siteId})})]})}),n.jsx(o(),{item:!0,xs:3,children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:F.u.ProductionLine.qry,parameters:`_startAt=0&_pageSize=1000&_dtId=${Q.values.header.dtId}`,values:Q.values.header,name:"header.productionLineId",label:Z.productionLine,valueField:"recordId",displayField:["reference","name"],displayFieldWidth:1,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:W,maxAccess:J,onChange:(e,a)=>{Q.setFieldValue("header.productionLineId",a?.recordId||null)},error:Q?.touched?.header?.productionLineId&&Q?.errors?.header?.productionLineId})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:F.u.ProductionStandard.qry,values:Q.values.header,name:"header.productionStandardId",label:Z.productionStandard,valueField:"recordId",displayField:"reference",required:!0,readOnly:W,maxAccess:J,onChange:(e,a)=>{Q.setFieldValue("header.productionStandardId",a?.recordId||"")},error:Q?.touched?.header?.productionStandardId&&!!Q?.errors?.header?.productionStandardId})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:F.u.ProductionClass.qry,values:Q.values.header,name:"header.productionClassId",label:Z.productionClass,valueField:"recordId",readOnly:W,displayField:"name",maxAccess:J,required:!0,onChange:(e,a)=>{Q.setFieldValue("header.productionClassId",a?.recordId||"")},error:Q?.touched?.header?.productionClassId&&!!Q?.errors?.header?.productionClassId})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(k.Z,{name:"header.weight",maxAccess:J,label:Z.sampleWgt,value:Q.values.header.weight,maxLength:10,decimalScale:2,readOnly:W,required:!0,onChange:e=>Q.setFieldValue("header.weight",e.target.value),onClear:()=>{Q.setFieldValue("header.weight",null)},error:Q?.touched?.header?.weight&&!!Q?.errors?.header?.weight})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:F.u.DesignFamily.qry,name:"header.designFamilyId",label:Z.familyGroup,valueField:"recordId",displayField:"name",values:Q.values.header,readOnly:W,onChange:(e,a)=>{Q.setFieldValue("header.designFamilyId",a?.recordId||null)},error:Q?.touched?.header?.designFamilyId&&!!Q?.errors?.header?.designFamilyId,maxAccess:J})})]})}),n.jsx(o(),{item:!0,xs:3,children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:12,children:n.jsx(T.U,{endpointId:F.u.MFJobOrder.snapshot3,parameters:{_status:1},valueField:"reference",displayField:"reference",secondDisplayField:!1,name:"header.jobId",label:Z.jobOrder,readOnly:W,formObject:Q.values.header,form:Q,required:!0,valueShow:"jobRef",maxAccess:M,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"itemName",value:"Item Name"},{key:"description",value:"Description"}],onChange:(e,a)=>{Q.setFieldValue("header.jobRef",a?.reference||""),Q.setFieldValue("header.jobId",a?.recordId||null)},errorCheck:"header.jobId"})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(T.U,{endpointId:v.$.Item.snapshot,name:"header.itemId",label:Z.sku,valueField:"sku",displayFieldWidth:2,displayField:"name",readOnly:W,valueShow:"sku",secondValueShow:"itemName",formObject:Q.values.header,form:Q,columnsInDropDown:[{key:"sku",value:"SKU"},{key:"name",value:"Name"}],onChange:(e,a)=>{Q.setFieldValue("header.itemId",a?.recordId||null),Q.setFieldValue("header.itemName",a?.name||""),Q.setFieldValue("header.sku",a?.sku||"")},errorCheck:"header.itemId",maxAccess:J})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(T.U,{endpointId:N.z.ThreeDDesign.snapshot,valueField:"reference",displayField:"reference",secondDisplayField:!1,name:"header.threeDDId",label:Z.threeDD,formObject:Q.values.header,form:Q,required:!0,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"date",value:"Date",type:"date"},{key:"designerRef",value:"Designer"}],valueShow:"threeDDRef",maxAccess:J,readOnly:W,onChange:(e,a)=>{Q.setFieldValue("header.threeDDRef",a?.reference||""),Q.setFieldValue("header.threeDDId",a?.recordId||null)},errorCheck:"header.threeDDId"})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:v.$.Collections.qry,name:"header.collectionId",label:Z.collection,valueField:"recordId",displayField:["reference","name"],columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],required:!0,maxAccess:J,readOnly:W,values:Q.values.header,onChange:(e,a)=>{Q.setFieldValue("header.collectionId",a?.recordId||null)},error:Q?.touched?.header?.collectionId&&!!Q?.errors?.header?.collectionId})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:F.u.DesignGroup.qry,name:"header.designGroupId",label:Z.designGroup,valueField:"recordId",displayField:"name",values:Q.values.header,readOnly:W,onChange:(e,a)=>{Q.setFieldValue("header.designGroupId",a?.recordId||null)},error:Q?.touched?.header?.designGroupId&&!!Q?.errors?.header?.designGroupId,maxAccess:J})})]})}),n.jsx(o(),{item:!0,xs:3,children:n.jsx(A.Z,{ref:L,resourceId:h.i.Samples,seqNo:0,disabled:W,recordId:e,width:250,height:200})})]})}),n.jsx(q.Q,{children:n.jsx(D._,{onChange:e=>Q.setFieldValue("rows",e),value:Q.values.rows,error:Q.errors.rows,name:"rows",maxAccess:J,columns:z,allowAddNewLine:!W,allowDelete:!W,disabled:W})}),n.jsx(S.g,{children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:3,children:n.jsx(I.Z,{name:"header.statusName",label:Z.statusName,value:Q.values.header.statusName,maxAccess:J,readOnly:!0})}),n.jsx(o(),{item:!0,xs:3,children:n.jsx(f.Z,{name:"header.notes",label:Z.notes,value:Q?.values.header?.notes,rows:2.5,readOnly:W,maxAccess:J,onChange:e=>Q.setFieldValue("header.notes",e.target.value),onClear:()=>Q.setFieldValue("header.notes",""),error:Q?.touched?.header?.notes&&!!Q?.errors?.header?.notes})})]})})]})})}[u,m,p,y,g,D,R,j,T,A,V]=L.then?(await L)():L,Z.width=1200,Z.height=680,r()}catch(e){r(e)}})},30088:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>g});var n=t(20997),s=t(16689),l=t(95965),d=t(29352),o=t(18611),i=t(23385),c=t(60520),u=t(9161),m=t(42020),p=t(44619),y=t(15051),h=t(86201),I=t(18687),f=e([d,c,y,h,I]);[d,c,y,h,I]=f.then?(await f)():f;let g=({store:e,maxAccess:a,labels:t,setRefreshController:r,refreshController:f})=>{let{recordId:g,isPosted:x,isClosed:v}=e,{getRequest:C,postRequest:D}=(0,s.useContext)(d.$),{platformLabels:b}=(0,s.useContext)(c.l),{formik:S}=(0,l.c)({maxAccess:a,validateOnChange:!0,initialValues:{search:"",rows:[]},onSubmit:async()=>{let e=S.values.rows.map((e,a)=>({...e,id:a+1,status:e.status||1})).filter(e=>e.isChecked);await D({extension:u.x.Sites.set2,record:JSON.stringify({stockCountId:g,sites:e})}),await q(g),r(!f),h.default.success(b.Updated),S.setFieldValue("search","")}}),q=async e=>{if(e){let a=(await C({extension:u.x.Sites.qry,parameters:`_stockCountId=${e}`})).list.map((e,a)=>({...e,id:a+1}));S.setValues({rows:a})}},w=S.values.search?S.values.rows.filter(e=>e.siteRef&&e.siteRef.toString().includes(S.values.search.toLowerCase())||e.siteName&&e.siteName.toLowerCase().includes(S.values.search.toLowerCase())):S.values.rows,R=[{component:"checkbox",label:" ",name:"isChecked",flex:1,props:{disabled:x||v}},{component:"textfield",name:"siteRef",label:t.siteRef,flex:1,props:{readOnly:!0}},{component:"textfield",name:"siteName",label:t.name,flex:1,props:{readOnly:!0}},{component:"textfield",name:"statusName",label:t.statusName,flex:1,props:{readOnly:!0}},{component:"textfield",name:"notes",label:t.notes,flex:2,props:{readOnly:!1},propsReducer:({row:e,props:a})=>({...a,readOnly:"Processed"===e.statusName||x||v})}];return(0,s.useEffect)(()=>{!async function(){g&&await q(g)}()},[g]),n.jsx(I.Z,{onSave:S.handleSubmit,maxAccess:a,disabledSubmit:v,children:n.jsx(o.R,{children:(0,n.jsxs)(i.Q,{children:[n.jsx(m.g,{children:n.jsx(p.Z,{name:"search",value:S.values.search,label:t.search,readOnly:x||v,onClear:()=>{S.setFieldValue("search",""),q()},sx:{width:"30%"},onChange:e=>{let{value:a}=e.target;S.setFieldValue("search",a)}})}),n.jsx(i.Q,{children:n.jsx(y._,{onChange:e=>(function(e){let a=S.values.rows.map(a=>e.find(e=>e.id===a.id)||a);S.setFieldValue("rows",a)})(e),value:w,error:S.errors.rows,columns:R,allowAddNewLine:!1,allowDelete:!1})})]})})})};r()}catch(e){r(e)}})},19610:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>N});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(38509),p=t(6416),y=t(44619),h=t(18611),I=t(95965),f=t(71278),g=t(27736),x=t(79390),v=t(68728),C=t(86794),D=t(60520),b=t(65980),S=t(61274),q=t(8297),w=t(9421),R=t(20757),j=t(1635),F=t.n(j),k=t(96119),O=t(38782),T=e([i,c,u,m,f,C,D,S,O]);function N({recordId:e,window:a}){let{platformLabels:t}=(0,d.useContext)(D.l),{getRequest:r,postRequest:s}=(0,d.useContext)(u.$),{labels:j,access:T}=(0,O.Z)({datasetId:p.i.ShiftLeave,editMode:!!e});(0,k.Z)({title:j.duringShiftLeave,window:a});let{maxAccess:N}=(0,C.H)({functionId:v.J.DuringShiftLeave,access:T,enabled:!e}),A=(0,m.E)({endpointId:w.f.ShitLeave.page}),{formik:V}=(0,I.c)({initialValues:{recordId:null,employeeId:null,employeeRef:"",employeeName:"",reference:"",date:new Date,leaveDate:null,reasonId:null,fromTime:null,toTime:null,realDuration:null,destination:null,notes:"",status:1,wip:1,departmentRef:"",departmentName:"",reportToRef:"",reportToName:"",departmentHeadName:"",departmentHeadRef:"",position:"",schedule:""},maxAccess:N,validateOnChange:!0,validationSchema:o.object({employeeId:o.number().required(),reasonId:o.number().required(),duration:o.string().required(),destination:o.string().required(),leaveDate:o.date().required(),fromTime:o.string().required(),toTime:o.string().required()}),onSubmit:async e=>{let{date:a,leaveDate:r,fromTime:n,toTime:l,returnTime:d,statusName:o,rsName:i,wipName:u,employeeRef:m,employeeName:p,departmentRef:y,departmentName:h,reportToRef:I,reportToName:f,departmentHeadName:g,departmentHeadRef:v,position:C,schedule:D,...b}=e,S=await s({extension:w.f.ShitLeave.set,record:JSON.stringify({...b,date:(0,x.ku)(a),leaveDate:(0,x.ku)(r),fromTime:F()(n).format("HH:mm"),toTime:F()(l).format("HH:mm"),returnTime:F()(d).format("HH:mm")})});c.default.success(e.recordId?t.Edited:t.Added),es(S.recordId),A()}}),P=!!V.values?.recordId,L=V?.values?.wip===2,{date:Z,leaveDate:M,fromTime:E,toTime:J,returnTime:B,statusName:_,rsName:H,wipName:$,employeeRef:Q,employeeName:G,departmentRef:U,departmentName:W,reportToRef:Y,reportToName:z,departmentHeadName:K,departmentHeadRef:X,position:ee,schedule:ea,...et}=V.values,er=async()=>{await s({extension:w.f.ShitLeave.close,record:JSON.stringify({...et,date:(0,x.ku)(Z),leaveDate:(0,x.ku)(M),fromTime:F()(E).format("HH:mm"),toTime:F()(J).format("HH:mm"),returnTime:F()(B).format("HH:mm")})}),c.default.success(t.Closed),es(V.values.recordId),A()},en=async()=>{await s({extension:w.f.ShitLeave.reopen,record:JSON.stringify({...et,date:(0,x.ku)(Z),leaveDate:(0,x.ku)(M),fromTime:F()(E).format("HH:mm"),toTime:F()(J).format("HH:mm"),returnTime:F()(B).format("HH:mm")})}),c.default.success(t.Reopened),es(V.values.recordId),A()};async function es(e){let{record:a}=await r({extension:w.f.ShitLeave.get,parameters:`_recordId=${e}`});return V.setValues({...a,date:(0,x.a1)(a.date),leaveDate:(0,x.a1)(a.leaveDate),fromTime:F()(a.fromTime,"HH:mm"),toTime:F()(a.toTime,"HH:mm"),returnTime:a?.returnTime?.trim()?F()(a?.returnTime,"HH:mm"):null}),ed(a.employeeId),a}let el=[{key:"Close",condition:!L,onClick:er,disabled:L||!P},{key:"Reopen",condition:L,onClick:en,disabled:!L},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!L}];async function ed(e){if(e){let{record:a}=await r({extension:q.y.QuickView.get,parameters:`_recordId=${e}&_asOfDate=${(0,x.Uf)(V.values.date)}`});V.setFieldValue("departmentRef",a?.departmentRef),V.setFieldValue("departmentName",a?.departmentName),V.setFieldValue("departmentHeadRef",a?.departmentHeadRef),V.setFieldValue("departmentHeadName",a?.departmentHeadName),V.setFieldValue("reportToRef",a?.reportToRef),V.setFieldValue("reportToName",a?.reportToName),V.setFieldValue("position",`${a?.positionName||""}${a?.positionRef?` ${a.positionRef}`:""}`)}}return n.jsx(i.Z,{form:V,resourceId:p.i.ShiftLeave,functionId:v.J.DuringShiftLeave,maxAccess:N,editMode:P,previewReport:P,actions:el,disabledSubmit:L,children:n.jsx(h.R,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:8,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:6,children:n.jsx(y.Z,{name:"reference",label:j.ref,value:V.values.reference,maxAccess:N,maxLength:"30",readOnly:P,onChange:V.handleChange,onClear:()=>V.setFieldValue("reference",""),error:V.touched.reference&&!!V.errors.reference})}),n.jsx(l(),{item:!0,xs:6}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(g.Z,{name:"date",label:j.date,value:V.values.date,onChange:V.setFieldValue,maxAccess:T,readOnly:!0,onClear:()=>V.setFieldValue("date",""),error:V.touched.date&&!!V.errors.date})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.U,{endpointId:q.y.Employee.snapshot,parameters:{_branchId:0},filter:{activeStatus:1},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:L,label:j.employee,secondFieldLabel:j.employee,form:V,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:N,onChange:async(e,a)=>{await ed(a?.recordId),V.setFieldValue("employeeRef",a?.reference||""),V.setFieldValue("employeeName",a?.fullName||""),V.setFieldValue("employeeId",a?.recordId||null)},errorCheck:"employeeId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.U,{name:"department",readOnly:!0,label:j.department,secondFieldLabel:j.department,form:V,valueShow:"departmentRef",secondValueShow:"departmentName",maxAccess:N})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.U,{name:"reportTo",readOnly:!0,label:j.reportTo,secondFieldLabel:j.reportTo,form:V,valueShow:"reportToRef",secondValueShow:"reportToName",maxAccess:N})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.U,{name:"depManager",readOnly:!0,label:j.depManager,secondFieldLabel:j.depManager,form:V,valueShow:"departmentHeadRef",secondValueShow:"departmentHeadName",maxAccess:N})}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(y.Z,{name:"position",label:j.empPosition,value:V.values.position,readOnly:!0,maxAccess:N})}),n.jsx(l(),{item:!0,xs:6}),n.jsx(l(),{item:!0,xs:6,children:n.jsx(y.Z,{name:"schedule",label:j.schedule,value:V.values.schedule,readOnly:!0,maxAccess:N})})]})}),n.jsx(l(),{item:!0,xs:4,children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(g.Z,{name:"leaveDate",label:j.dateOfLeave,value:V.values?.leaveDate,required:!0,readOnly:L,onBlur:(e,a)=>{V.setFieldValue("leaveDate",a||null)},onAccept:e=>{V.setFieldValue("leaveDate",e||null)},onClear:()=>V.setFieldValue("leaveDate",null),error:V.touched.leaveDate&&!!V.errors.leaveDate,maxAccess:N})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{label:j.from,name:"fromTime",required:!0,use24Hour:!0,readOnly:L,value:V.values.fromTime,onChange:V.setFieldValue,onClear:()=>V.setFieldValue("fromTime",""),maxAccess:N,error:V.touched.fromTime&&!!V.errors.fromTime})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{label:j.to,name:"toTime",readOnly:L,use24Hour:!0,required:!0,value:V.values.toTime,onChange:V.setFieldValue,onClear:()=>V.setFieldValue("toTime",""),maxAccess:N,error:V.touched.toTime&&!!V.errors.toTime})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"duration",label:j.leaveDuration,value:V.values.duration,readOnly:!0,required:!0,maxAccess:N,error:V.touched.duration&&!!V.errors.duration})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(f.Z,{endpointId:w.f.DSLReason.qry,name:"reasonId",label:j.dsltype,valueField:"recordId",displayField:"name",required:!0,values:V.values,onChange:(e,a)=>{V.setFieldValue("reasonId",a?.recordId||null)},readOnly:L,maxAccess:N,error:V?.touched?.reasonId&&!!V?.errors?.reasonId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(R.Z,{label:j.returnTime,name:"returnTime",use24Hour:!0,readOnly:L,value:V.values.returnTime,onChange:V.setFieldValue,onClear:()=>V.setFieldValue("returnTime",""),maxAccess:N,error:V.touched.returnTime&&!!V.errors.returnTime})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"realDuration",label:j.duration,value:V.values.realDuration,readOnly:!0,maxAccess:N})})]})}),n.jsx(l(),{item:!0,xs:8,children:n.jsx(y.Z,{name:"destination",label:j.destination,value:V.values.destination,onChange:V.handleChange,required:!0,maxLength:100,readOnly:L,maxAccess:N,onClear:()=>V.setFieldValue("destination",""),error:V.touched.destination&&!!V.errors.destination})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.Z,{name:"notes",label:j.notes,value:V.values.notes,rows:2,readOnly:L,maxAccess:N,onChange:V.handleChange,onClear:()=>V.setFieldValue("notes",""),error:V.touched.notes&&!!V.errors.notes})})]})})})}[i,c,u,m,f,C,D,S,O]=T.then?(await T)():T,N.width=1e3,N.height=500,r()}catch(e){r(e)}})},73224:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>L});var n=t(20997),s=t(99155),l=t.n(s),d=t(44619),o=t(71278),i=t(80582),c=t(6416),u=t(29352),m=t(16689),p=t(75609),y=t(86201),h=t(38509),I=t(95965),f=t(60520),g=t(65980),x=t(9421),v=t(38782),C=t(96119),D=t(23385),b=t(18611),S=t(61274),q=t(8297),w=t(27736),R=t(97969),j=t(91184),F=t(79390),k=t(1635),O=t.n(k),T=t(36619),N=t.n(T),A=t(97429),V=t(68728),P=e([o,i,u,y,h,f,v,S,A]);function L({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,m.useContext)(u.$),{platformLabels:s}=(0,m.useContext)(f.l),k=(0,m.useRef)([]);O().extend(N());let{labels:T,access:P}=(0,v.Z)({datasetId:c.i.TimeVariation,editMode:!!e});(0,C.Z)({title:T?.timeVariation,window:a});let L=(0,h.E)({endpointId:x.f.TimeVariation.page}),{formik:Z}=(0,I.c)({maxAccess:P,initialValues:{recordId:e,reference:"",date:new Date,employeeId:null,dataSource:2,timeCode:20,clockDuration:Q(0),duration:0,damageLevel:null,justification:"",releaseStatus:null,wip:1,status:1},validationSchema:p.object({employeeId:p.number().required(),date:p.date().required(),timeCode:p.number().required(),damageLevel:p.number().required()}),onSubmit:async e=>{await r({extension:x.f.TimeVariation.gen,record:JSON.stringify({...e,clockDuration:0,date:(0,F.ku)(e.date)})}),y.default.success(e.recordId?s.Edited:s.Added),L(),a.close()}}),M=!!Z.values.recordId,E=2==Z.values.wip,J=-1==Z.values.status,B=[{key:"Approval",condition:!0,onClick:"onApproval",disabled:!E},{key:"Close",condition:!E,onClick:"onCloseConfirmation",action:_,disabled:J||E||!M},{key:"Reopen",condition:E,onClick:"onOpenConfirmation",action:H,disabled:J||!E||!M},{key:"Cancel",condition:!0,onClick:$,disabled:!M||E||J}];async function _(){let e=await r({extension:x.f.TimeVariation.close,record:JSON.stringify({...Z.values,date:(0,F.ku)(Z.values?.date),clockDuration:0})});y.default.success(s.Closed),L(),K(e.recordId)}async function H(){let e=await r({extension:x.f.TimeVariation.reopen,record:JSON.stringify({...Z.values,date:(0,F.ku)(Z.values?.date),clockDuration:0})});y.default.success(s.Reopened),L(),K(e.recordId)}async function $(){let e=await r({extension:x.f.TimeVariation.cancel,record:JSON.stringify({...Z.values,date:(0,F.ku)(Z.values?.date),clockDuration:0})});y.default.success(s.Cancelled),L(),K(e.recordId)}function Q(e=0){if(0==e)return"00:00";let a=Math.abs(e),t=String(Math.floor(a/60)).padStart(2,"0"),r=String(a%60).padStart(2,"0");return(e<0?"-":"")+`${t}:${r}`}async function G(e,a){let{list:r}=await t({extension:x.f.FlatSchedule.qry,parameters:"_params=1|"+e+"^2|"+O()(a).format("YYYYMMDD")+"^3|"+O()(a).format("YYYYMMDD")}),n=r?.map(e=>{let a=O().utc(F.a1(e.dtFrom)).format("hh:mm A"),t=O().utc(F.a1(e.dtTo)).format("hh:mm A");return{...e,dtRange:`${a} - ${t}`}});return k.current=n||[],n||[]}async function U(e,a,t){if(!e){Y();return}let r=await G(e,a);if(!r?.length){Y();return}let{recordId:n,duration:s}=r[0];20!=t&&(Z.setFieldValue("shiftId",n),Z.setFieldValue("duration",s),Z.setFieldValue("clockDuration",Q(s)))}async function W(e){if(!e){Z.setFieldValue("terminationDate",null);return}let a=await t({extension:q.y.QuickView.get,parameters:`_recordId=${e}&_asOfDate=${(0,F.uQ)(new Date)}`});Z.setFieldValue("terminationDate",a?.record?.terminationDate||null)}function Y(){Z.setFieldValue("shiftId",null),Z.setFieldValue("duration",0),Z.setFieldValue("clockDuration",Q(0))}async function z(e){if(e)return await t({extension:x.f.TimeVariation.get,parameters:`_recordId=${e}`})}async function K(e){let a=await z(e);Z.setValues({...a.record,date:(0,F.a1)(a?.record?.date),clockDuration:Q(a?.record?.duration)})}return n.jsx(i.Z,{form:Z,resourceId:c.i.TimeVariation,maxAccess:P,editMode:M,actions:B,isCleared:!1,functionId:V.J.TimeVariation,disabledSubmit:J||E,children:n.jsx(b.R,{children:n.jsx(D.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(d.Z,{name:"reference",label:T?.reference,value:Z.values?.reference,readOnly:!0,maxAccess:P,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("reference",""),error:Z.touched.reference&&!!Z.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.U,{endpointId:q.y.Employee.snapshot,parameters:{_branchId:0},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,readOnly:J||E,label:T.employee,form:Z,displayFieldWidth:2,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:P,onChange:async(e,a)=>{await U(a?.recordId,Z.values.date,Z.values.timeCode),await W(a?.recordId),Z.setFieldValue("employeeRef",a?.reference||""),Z.setFieldValue("employeeName",a?.fullName||""),Z.setFieldValue("employeeId",a?.recordId||null)},errorCheck:"employeeId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(w.Z,{name:"date",required:!0,label:T.date,value:Z.values?.date,onChange:async(e,a)=>{await U(Z.values?.employeeId,a,Z.values?.timeCode),Z.setFieldValue("date",a)},onClear:()=>{Y(),Z.setFieldValue("date",null)},error:Z.touched.date&&!!Z.errors.date,maxAccess:P,readOnly:J||E})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(o.Z,{datasetId:R.v.TIME_CODE,name:"timeCode",readOnly:J||M,label:T.timeCode,valueField:"key",displayField:"value",required:!0,values:Z.values,maxAccess:P,onChange:async(e,a)=>{a&&a?.key!=20||Y(),await U(Z.values?.employeeId,Z.values?.date,a?.key),Z.setFieldValue("timeCode",a?.key||null)},error:Z.touched.timeCode&&!!Z.errors.timeCode})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(A.Z,{name:"shiftId",label:T.shift,valueField:"recordId",displayField:"dtRange",store:k?.current,value:Z.values.shiftId,readOnly:J||E||Z.values?.timeCode==20,onChange:(e,a)=>Z.setFieldValue("shiftId",a?.recordId||null),error:Z.touched.shiftId&&!!Z.errors.shiftId,maxAccess:P})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(d.Z,{name:"clockDuration",label:T?.clockDuration,value:Z.values?.clockDuration,readOnly:!0,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("clockDuration",Q(0)),error:Z.touched.clockDuration&&!!Z.errors.clockDuration,maxAccess:P})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(j.Z,{name:"duration",label:T.duration,value:Z.values.duration,maxAccess:P,readOnly:J||E||Z.values?.timeCode==20||Z.values?.timeCode==21,min:20==Z.values.timeCode||21==Z.values.timeCode?0:1,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("duration",null),error:Z.touched.duration&&!!Z.errors.duration})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(o.Z,{name:"damageLevel",label:T.damage,datasetId:R.v.DAMAGE_LEVEL,values:Z.values,valueField:"key",displayField:"value",required:!0,readOnly:J||E,maxAccess:P,onChange:(e,a)=>Z.setFieldValue("damageLevel",a?.key||null),error:Z.touched.damageLevel&&!!Z.errors.damageLevel})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(g.Z,{name:"justification",label:T.justification,value:Z.values.justification,rows:2,readOnly:J||E,maxAccess:P,onChange:Z.handleChange,onClear:()=>Z.setFieldValue("justification",""),error:Z.touched.justification&&!!Z.errors.justification})})]})})})})}[o,i,u,y,h,f,v,S,A]=P.then?(await P)():P,L.width=550,L.height=550,r()}catch(e){r(e)}})},83743:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>O});var n=t(20997),s=t(99155),l=t.n(s),d=t(16689),o=t(75609),i=t(80582),c=t(86201),u=t(29352),m=t(38509),p=t(6416),y=t(44619),h=t(95965),I=t(23385),f=t(18611),g=t(60520),x=t(71278),v=t(8297),C=t(61274),D=t(96611),b=t(65980),S=t(27736),q=t(79390),w=t(86794),R=t(68728),j=t(96119),F=t(38782),k=e([i,c,u,m,g,x,C,w,F]);function O({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,d.useContext)(u.$),{platformLabels:s}=(0,d.useContext)(g.l),{labels:k,access:O}=(0,F.Z)({datasetId:p.i.JobInfos,editMode:!!e});(0,j.Z)({title:k.jobInfo,window:a});let{maxAccess:T}=(0,w.H)({functionId:R.J.JobInfo,access:O,enabled:!e}),N=(0,m.E)({endpointId:v.y.JobInfo.page}),{formik:A}=(0,h.c)({initialValues:{recordId:null,reference:"",employeeId:null,employeeName:"",employeeRef:"",date:new Date,departmentId:null,branchId:null,divisionId:null,positionId:null,reportToId:null,reportToName:"",reportToRef:"",notes:"",status:1,wip:1},validateOnChange:!0,validationSchema:o.object({employeeId:o.number().required(),date:o.date().max(new Date,"Date cannot be in the future").required(),departmentId:o.number().required(),branchId:o.number().required(),positionId:o.number().required()}),onSubmit:async e=>{await r({extension:v.y.JobInfo.set,record:JSON.stringify({...e,date:(0,q.ku)(e.date)})}),c.default.success(e.recordId?s.Edited:s.Added),a.close(),N()}}),V=!!A.values.recordId,P=2==A.values.wip;async function L(e){if(e){let a=await t({extension:v.y.JobInfo.get,parameters:`_recordId=${e}`});A.setValues({...a.record,date:(0,q.a1)(a.record.date)})}}let Z=async()=>{await r({extension:v.y.JobInfo.close,record:JSON.stringify({...A.values,date:(0,q.ku)(A.values.date)})}),c.default.success(s.Closed),L(e),N()},M=async()=>{await r({extension:v.y.JobInfo.reopen,record:JSON.stringify({...A.values,date:(0,q.ku)(A.values.date)})}),c.default.success(s.Reopened),L(e),N()},E=[{key:"Close",condition:!P,onClick:Z,disabled:P||!V},{key:"Reopen",condition:P,onClick:M,disabled:!P},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!P}];return n.jsx(i.Z,{resourceId:p.i.JobInfos,functionId:R.J.JobInfo,form:A,maxAccess:T,editMode:V,actions:E,disabledSubmit:P,children:n.jsx(f.R,{children:n.jsx(I.Q,{children:(0,n.jsxs)(l(),{container:!0,spacing:2,children:[n.jsx(l(),{item:!0,xs:12,children:n.jsx(y.Z,{name:"reference",label:k.ref,value:A.values.reference,maxAccess:T,readOnly:V,maxLength:"30",onChange:A.handleChange,onClear:()=>A.setFieldValue("reference",""),error:A.touched.reference&&!!A.errors.reference})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.U,{endpointId:v.y.Employee.snapshot,parameters:{_branchId:0},valueField:"reference",displayField:"fullName",name:"employeeId",required:!0,displayFieldWidth:2,readOnly:P,label:k.employee,secondFieldLabel:k.employee,form:A,valueShow:"employeeRef",secondValueShow:"employeeName",columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],maxAccess:T,onChange:(e,a)=>{A.setFieldValue("employeeName",a?.fullName||""),A.setFieldValue("employeeId",a?.recordId||null)},errorCheck:"employeeId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(S.Z,{name:"date",label:k.date,value:A.values?.date,readOnly:P,required:!0,max:new Date,onChange:A.setFieldValue,onClear:()=>A.setFieldValue("date",null),error:A.touched.date&&!!A.errors.date,maxAccess:T})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:D.K.DepartmentFilters.qry,parameters:"_filter=&_size=1000&_startAt=0&_type=0&_activeStatus=0&_sortBy=recordId",name:"departmentId",label:k.department,values:A.values,columnsInDropDown:[{key:"departmentRef",value:"Reference"},{key:"name",value:"Name"}],required:!0,readOnly:P,displayField:["departmentRef","name"],maxAccess:T,onChange:(e,a)=>{A.setFieldValue("departmentId",a?.recordId||null)},error:A.touched.departmentId&&!!A.errors.departmentId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:D.K.BranchFilters.qry,name:"branchId",label:k.branch,columnsInDropDown:[{key:"branchRef",value:"Reference"},{key:"name",value:"Name"}],valueField:"recordId",displayField:["branchRef","name"],values:A.values,maxAccess:T,onChange:(e,a)=>{A.setFieldValue("branchId",a?.recordId||null)},required:!0,readOnly:P,error:A.touched.branchId&&!!A.errors.branchId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:D.K.DivisionFilters.qry,name:"divisionId",label:k.division,valueField:"recordId",displayField:"name",maxAccess:T,readOnly:P,values:A.values,onChange:(e,a)=>{A.setFieldValue("divisionId",a?.recordId||null)},error:A.touched.divisionId&&!!A.errors.divisionId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(x.Z,{endpointId:D.K.CompanyPositions.qry,parameters:"_filter=&_size=1000&_startAt=0&_sortBy=recordId",name:"positionId",label:k.position,required:!0,valueField:"recordId",displayField:["positionRef","name"],columnsInDropDown:[{key:"positionRef",value:"Reference"},{key:"name",value:"Name"}],maxAccess:T,readOnly:P,values:A.values,onChange:(e,a)=>{A.setFieldValue("positionId",a?.recordId||null)},error:A.touched.positionId&&!!A.errors.positionId})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(C.U,{endpointId:v.y.Employee.snapshot,parameters:{_branchId:0},secondFieldLabel:k.reportsTo,valueField:"reference",displayField:"fullName",name:"reportToId",displayFieldWidth:2,label:k.reportsTo,form:A,readOnly:P,valueShow:"reportToRef",secondValueShow:"reportToName",maxAccess:T,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"fullName",value:"Name"}],onChange:(e,a)=>{A.setFieldValue("reportToName",a?.fullName||""),A.setFieldValue("reportToId",a?.recordId||null)},errorCheck:"reportToId"})}),n.jsx(l(),{item:!0,xs:12,children:n.jsx(b.Z,{name:"notes",label:k.notes,value:A.values.notes,rows:2,readOnly:P,maxAccess:T,onChange:A.handleChange,onClear:()=>A.setFieldValue("notes",""),error:A.touched.notes&&!!A.errors.notes})})]})})})})}[i,c,u,m,g,x,C,w,F]=k.then?(await k)():k,O.width=600,O.height=520,r()}catch(e){r(e)}})},56809:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{Z:()=>A});var n=t(20997),s=t(27736),l=t(79390),d=t(99155),o=t.n(d),i=t(16689),c=t(75609),u=t(80582),m=t(86201),p=t(29352),y=t(38509),h=t(6416),I=t(44619),f=t(65980),g=t(71278),x=t(79660),v=t(68728),C=t(23385),D=t(18611),b=t(95965),S=t(60520),q=t(86794),w=t(677),R=t(79520),j=t(15051),F=t(42020),k=t(70638),O=t(38782),T=t(96119),N=e([u,m,p,y,g,S,q,w,j,k,O]);function A({recordId:e,window:a}){let{getRequest:t,postRequest:r}=(0,i.useContext)(p.$),{platformLabels:d}=(0,i.useContext)(S.l),{stack:N}=(0,w.zY)(),{labels:A,access:V}=(0,O.Z)({datasetId:h.i.MaterialReqPlannings,editMode:!!e}),{documentType:P,maxAccess:L,changeDT:Z}=(0,q.H)({functionId:v.J.MRP,access:V,enabled:!e,objectName:"header"});(0,T.Z)({title:A.materialRequestPlaning,window:a});let M=(0,y.E)({endpointId:R.I.MatPlanning.page}),{formik:E}=(0,b.c)({maxAccess:L,documentType:{key:"header.dtId",value:P?.dtId},initialValues:{recordId:e,header:{recordId:e,dtId:null,reference:"",date:new Date,notes:"",status:1,releaseStatus:null,wip:1},items:[]},validateOnChange:!0,validationSchema:c.object({header:c.object({date:c.date().required()}),items:c.array().of(c.object({qty:c.number().required()}))}),onSubmit:async e=>{let a=await r({extension:R.I.MatPlanning.set2,record:JSON.stringify({header:{...e.header,date:(0,l.ku)(e.header.date)},items:e.items})});m.default.success(e.recordId?d.Edited:d.Added),H(a.recordId),M()}}),J=!!E.values.recordId,B=4==E.values.header.status,_=2===E.values.header.wip;async function H(e){let{record:a}=await t({extension:R.I.MatPlanning.get,parameters:`_requestId=${e}`}),{list:r}=await t({extension:R.I.MatPlanningItem.qry,parameters:`_mrpId=${e}`});E.setValues({recordId:a.recordId,header:{...a,date:(0,l.a1)(a?.date)},items:r?.map((e,a)=>({...e,id:a+1,seqNo:a+1,date:l.a1(e.date)}))})}async function $(){N({Component:k.Z,props:{functionId:v.J.MRP,recordId:E.values.recordId}})}async function Q(){await r({extension:R.I.MatPlanning.reopen,record:JSON.stringify({...E.values.header,date:(0,l.ku)(E.values.header.date)})}),m.default.success(d.Reopened),M(),H(E.values.recordId)}async function G(){await r({extension:R.I.MatPlanning.close,record:JSON.stringify({...E.values.header,date:(0,l.ku)(E.values.header.date)})}),m.default.success(d.Closed),M(),H(E.values.recordId)}let U=async()=>{await r({extension:R.I.PurchaseRequest.generate,record:JSON.stringify({...E.values.header,date:(0,l.ku)(E.values.header.date)})}),m.default.success(d.Generated),M(),H(E.values.recordId)},W=[{key:"Reopen",condition:_,onClick:Q,disabled:!_},{key:"Close",condition:!_,onClick:G,disabled:_||!J},{key:"RecordRemarks",condition:!0,onClick:"onRecordRemarks",disabled:!J},{key:"WorkFlow",condition:!0,onClick:$,disabled:!J},{key:"Approval",condition:!0,onClick:"onApproval",disabled:!_},{key:"generate",condition:!0,onClick:U,disabled:!J||!B}],Y=[{component:"textfield",label:A.sku,name:"sku",width:100,props:{readOnly:!0}},{component:"textfield",label:A.name,name:"itemName",width:150,props:{readOnly:!0}},{component:"numberfield",label:A.onHand,name:"onhand",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.openPr,name:"openPR",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.openPo,name:"openPO",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.leadTime,name:"leadTime",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.safetyStock,name:"safetyStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.reorderPoint,name:"reorderPoint",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.min,name:"minStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.max,name:"maxStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.amcShortTerm,name:"amcShortTerm",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.amcLongTerm,name:"amcLongTerm",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.siteCoverageStock,name:"siteCoverageStock",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.totalCoverageStock,name:"totalStockCoverage",width:100,props:{readOnly:!0}},{component:"textfield",label:A.mu,name:"msRef",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.unitCost,name:"unitCost",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.totalCost,name:"totalCost",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.sugQty,name:"suggestedPRQty",width:100,props:{readOnly:!0}},{component:"numberfield",label:A.reqQty,name:"qty",width:100,props:{decimalScale:2}}];return n.jsx(u.Z,{resourceId:h.i.MaterialReqPlannings,functionId:v.J.MRP,form:E,maxAccess:L,actions:W,editMode:J,previewReport:J,disabledSubmit:_,children:(0,n.jsxs)(D.R,{children:[n.jsx(F.g,{children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:4,children:(0,n.jsxs)(o(),{container:!0,spacing:2,children:[n.jsx(o(),{item:!0,xs:12,children:n.jsx(g.Z,{endpointId:x.r.DocumentType.qry,parameters:`_startAt=0&_pageSize=1000&_dgId=${v.J.MRP}`,name:"header.dtId",label:A.documentType,columnsInDropDown:[{key:"reference",value:"Reference"},{key:"name",value:"Name"}],readOnly:J,valueField:"recordId",displayField:["reference","name"],values:E.values.header,maxAccess:L,onChange:(e,a)=>{E.setFieldValue("header.dtId",a?.recordId||null),Z(a)},error:E.touched.header?.dtId&&!!E.errors.header?.dtId})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(s.Z,{name:"header.date",label:A.date,value:E.values?.header.date,readOnly:_,required:!0,onChange:E.setFieldValue,onClear:()=>E.setFieldValue("header.date",null),error:E.touched.header?.date&&!!E.errors.header?.date,maxAccess:L})}),n.jsx(o(),{item:!0,xs:12,children:n.jsx(I.Z,{name:"header.reference",label:A.reference,value:E?.values?.header.reference,maxAccess:!J&&L,readOnly:J,onChange:E.handleChange,onClear:()=>E.setFieldValue("header.reference",""),error:E.touched.header?.reference&&!!E.errors.header?.reference})})]})}),n.jsx(o(),{item:!0,xs:4,children:n.jsx(f.Z,{name:"header.notes",label:A.notes,value:E.values.header.notes,rows:3,readOnly:_,maxAccess:L,onChange:e=>E.setFieldValue("header.notes",e.target.value),onClear:()=>E.setFieldValue("header.notes",""),error:E.touched.header?.notes&&!!E.errors.header?.notes})})]})}),n.jsx(C.Q,{children:n.jsx(j._,{onChange:e=>{E.setFieldValue("items",e)},value:E?.values?.items,error:E?.errors?.items,columns:Y,maxAccess:L,name:"items",allowDelete:!_,allowAddNewLine:!1,disabled:_})})]})})}[u,m,p,y,g,S,q,w,j,k,O]=N.then?(await N)():N,A.width=1300,A.height=600,r()}catch(e){r(e)}})}};